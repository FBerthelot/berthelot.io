<!DOCTYPE html>
<html  lang="en-GB" dir="ltr">
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>React refactoring: Kills of the legacy with snapshot testing - Florent Berthelot</title>
<meta name="description" content>
<meta name="format-detection" content="telephone=no">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link id="i18n-alt-fr" rel="alternate" href="/articles/react-test-refactoring-snapshot" hreflang="fr">
<link id="i18n-alt-fr-FR" rel="alternate" href="/articles/react-test-refactoring-snapshot" hreflang="fr-FR">
<link id="i18n-alt-en" rel="alternate" href="/en/articles/react-test-refactoring-snapshot" hreflang="en">
<link id="i18n-alt-en-GB" rel="alternate" href="/en/articles/react-test-refactoring-snapshot" hreflang="en-GB">
<link id="i18n-xd" rel="alternate" href="/articles/react-test-refactoring-snapshot" hreflang="x-default">
<link id="i18n-can" rel="canonical" href="/en/articles/react-test-refactoring-snapshot">
<meta id="i18n-og-url" content="/en/articles/react-test-refactoring-snapshot" property="og:url">
<meta id="i18n-og" content="en_GB" property="og:locale">
<meta id="i18n-og-alt-fr-FR" content="fr_FR" property="og:locale:alternate">
<meta property="og:type" content="article">
<meta property="og:title" content="React refactoring: Kills of the legacy with snapshot testing - Florent Berthelot">
<meta name="twitter:title" content="React refactoring: Kills of the legacy with snapshot testing - Florent Berthelot">
<meta name="description" content="You want to refactor a big React codebase but you're not sure you won't break anything? I will guide you through this!">
<meta property="og:description" content="You want to refactor a big React codebase but you're not sure you won't break anything? I will guide you through this!">
<meta name="twitter:description" content="You want to refactor a big React codebase but you're not sure you won't break anything? I will guide you through this!">
<meta property="og:image" content="/illustrations/cowboy.jpg">
<meta name="twitter:image" content="/illustrations/cowboy.jpg">
<meta name="twitter:card" content="summary_large_image">
<meta property="og:url" content="https://berthelot.io/articles/react-test-refactoring-snapshot">
<meta property="og:article:published:time" content="2020/06/04">
<meta property="og:article:modified:time" content="2020/06/04">
<meta property="og:article:author" content="https://berthelot.io">
<link rel="preload" as="fetch" crossorigin="anonymous" href="/en/articles/react-test-refactoring-snapshot/_payload.json">
<style>a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{border:0;font-size:100%;font:inherit;margin:0;padding:0;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}table{border-collapse:collapse;border-spacing:0}#__layout,#__nuxt,body,html{height:100%}#layout_default{--color-white:#f6f6f6;--color-light:#a991dd;--color-bright:#a70000;--color-medium:#084108;--color-dark:#5d0854;--color-black:#1f2933;--font-sans-serif:Verdana,Geneva,sans-serif;--font-cursive:suicide-squad,"Comic Sans MS","Comic Sans",cursive}@font-face{font-display:swap;font-family:suicide-squad;src:url(/fonts/suicide-squad.ttf)}#layout_default .typo_default{font-family:var(--font-sans-serif);font-size:1rem;line-height:1.3rem}#layout_default .typo_meta-info,#layout_default .typo_meta-info--link{font-family:var(--font-sans-serif);font-size:.7rem;font-style:italic;line-height:1rem}#layout_default .typo_meta-info--link{text-decoration:underline}#layout_default .typo_title{font-family:var(--font-cursive);font-size:3rem;line-height:3rem}#layout_default .typo_title--small{font-family:var(--font-cursive);font-size:1.5rem;line-height:1.5rem}#layout_default .typo_title--extra-small{font-family:var(--font-cursive);font-size:1.1rem;line-height:1.5rem}#layout_default .typo_white{color:var(--color-white)}#layout_default .typo_light{color:var(--color-light)}#layout_default .typo_bright{color:var(--color-bright)}#layout_default .typo_medium{color:var(--color-medium)}#layout_default .typo_dark{color:var(--color-dark)}#layout_default .typo_black{color:var(--color-black)}#layout_default .card_meta{display:block;margin-top:.5rem;text-align:right}#layout_default .card_video{margin:3rem 0 2rem;width:100%}#layout_default .tabs{border-bottom:1px solid var(--color-dark);display:flex;justify-content:flex-end;padding-right:2rem}#layout_default .tab{background:var(--color-black);border-bottom:1px solid var(--color-dark);border:1px solid var(--color-dark);border-bottom-color:var(--color-black);border-top-left-radius:.5rem;border-top-right-radius:.5rem;box-shadow:0 -.25rem .25rem var(--color-black);box-sizing:border-box;color:var(--color-white);cursor:pointer;display:inline-block;font-family:var(--font-sans-serif);font-size:1rem;height:3rem;line-height:1.3rem;margin:0 1rem -1px;padding:1rem;position:relative;text-align:center;text-decoration:none;transform-origin:bottom center;transition:all .5s ease;width:7rem}#layout_default .tab--active{border-bottom:1px solid var(--color-light);border:1px solid var(--color-light);border-bottom-color:var(--color-black);box-shadow:0 0 1rem var(--color-light);cursor:default}#layout_default .tab:after{background-color:var(--color-black);bottom:calc(-2rem - 1px);content:"";cursor:default;display:block;height:2rem;left:-2rem;pointer-events:none;position:absolute;width:calc(100% + 4rem)}#layout_default .tab:active:not(.tab--active),#layout_default .tab:focus:not(.tab--active),#layout_default .tab:hover:not(.tab--active){border-bottom:1px solid var(--color-light);border:1px solid var(--color-light);border-bottom-color:var(--color-black);box-shadow:0 0 2rem var(--color-light);outline:none;transform:scale(1.3)}html{font-size:16px}#layout_default{background-color:var(--color-black);color:var(--color-white)}</style>
<style>#article-page[data-v-dc335689]{height:100%}.article[data-v-dc335689]{box-sizing:border-box;margin:3rem 25% 2rem;min-height:calc(100% - 14rem - 1px);position:relative;width:50%;z-index:1}@media screen and (max-width:850px){.article[data-v-dc335689]{margin:0;padding:2rem 1rem;width:100%}}</style>
<style>.article h2,.article h3,.article h4,.article h5,.article h6{font-family:var(--font-cursive);margin:.5rem}.article h2{font-size:2rem;line-height:2.4rem}.article h3{font-size:1.5rem;line-height:2rem}.article h4{font-size:1.2rem;line-height:1.5rem}.article h5{font-size:1rem;line-height:1.3rem}.article h6{font-size:.7rem;line-height:1rem}.article p{line-height:1.3rem;margin:1rem}.article a{color:var(--color-light);text-decoration:none;transition:all .3s ease}.article a:hover{text-decoration:underline}.article a:active{color:var(--color-dark)}.article strong{font-weight:700}.article em{font-style:italic}.article blockquote{border-left:2px solid var(--color-light);padding-left:.5rem}.article code{background-color:var(--color-dark);border-radius:.25rem;padding:.125rem .25rem}.article pre{word-wrap:break-word;background-color:var(--color-white);border:1px solid var(--color-light);border-radius:.125rem;display:block;font-size:.75rem;margin:.5rem;overflow-x:auto;padding:.5rem;word-break:break-all}.article pre code{border-radius:0;padding:0}.article ul{list-style:disc;padding-left:3rem}.article ol{list-style:decimal;padding-left:3rem}.article img{max-width:35%;vertical-align:middle}.article .main-image{max-width:100%;width:100%}.article table{margin:2rem}.article thead tr{border-bottom:2px solid var(--color-light);font-weight:700}.article th{padding:.5rem}.article tbody tr:not(:last-child){border-bottom:2px solid var(--color-dark)}.article td{padding:.5rem}</style>
<style>pre code .line{display:block;min-height:1rem}</style>
<link rel="stylesheet" href="/_nuxt/header.387a5a5b.css">
<link rel="stylesheet" href="/_nuxt/avatar.43761bc0.css">
<link rel="stylesheet" href="/_nuxt/footer.e476d7c0.css">
<link rel="stylesheet" href="/_nuxt/ProseCode.e63e49c6.css">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/entry.5db522ee.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/default.aaf5cecf.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/components.1e471420.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/vue.f36acd1f.678548f7.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/composables.81711a3d.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/index.5b503e35.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/_slug_.f97a687a.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/header.5d8fcc1e.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/avatar.fec14676.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/nuxt-link.8d0d78d3.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/footer.15a1834b.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/linkedin.64e4b0e9.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRendererMarkdown.vue.73969add.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/index.13aa9e49.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/preview.c9210702.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRenderer.940e61dd.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/query.10ae9a40.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRendererMarkdown.cdaf0e2a.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseImg.999a72dc.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseP.6bac4404.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseUl.b54a9691.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseLi.e0d93cca.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH2.329574ce.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProsePre.60832572.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseCode.vue.a34e6784.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseCode.0324876f.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH3.b1bd2cfb.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseA.07063c51.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseEm.cd2ae98c.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseCodeInline.7e12e71d.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseHr.4d2b166d.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/agnes.2ee63845.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/mariage.5575cec8.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/error-404.2c8e0874.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/error-500.4d738957.js">
<script type="module" src="/_nuxt/entry.5db522ee.js" crossorigin></script></head>
<body  id="layout_default"><div id="__nuxt"><!--[--><!--[--><!----><!----><!----><!----><!----><!--[--><!----><!----><!----><!----><!----><!----><!--]--><!--[--><!----><!----><!----><!--]--><!--]--><!--[--><!--[--><div id="article-page" data-v-dc335689><header class="header" data-v-dc335689 data-v-cd8bd24c><div class="first_row" data-v-cd8bd24c><div class="header__logo" data-v-cd8bd24c><a href="/en/articles" class="" aria-label="Back to home" data-v-cd8bd24c><div class="avatar" data-v-cd8bd24c data-v-965a2279><div class="avatar__flip-container" data-v-965a2279><img src="/assets/florent/avatar.jpg" alt="Une photo de Florent avec des lunettes de soleil oranges." class="avatar__face-a" data-v-965a2279><img src="/assets/florent/joker.jpg" alt="Une photo du joker, un personnage que j&#39;aime beaucoup car toujours souriant." class="avatar__face-b" data-v-965a2279></div></div></a></div><h1 variant="header__title" class="typo_title title" data-v-cd8bd24c>React refactoring: Kills of the legacy with snapshot testing</h1><div class="typo_default languageSwitcher language-switcher" data-v-cd8bd24c data-v-39aece94><!----><a href="/articles/react-test-refactoring-snapshot" class="" data-v-39aece94>FR</a></div></div><nav class="tabs" data-v-cd8bd24c><a href="/en/articles" class="tab tab--active" tabindex="-1" data-v-cd8bd24c>Articles</a><a href="/en/courses" class="tab" tabindex="0" data-v-cd8bd24c>Courses</a><a href="/en/talks" class="tab" tabindex="0" data-v-cd8bd24c>Talks</a><a href="/en/activities" class="tab" tabindex="0" data-v-cd8bd24c>Activities</a></nav></header><!--[--><div class="typo_default article" data-v-dc335689><img src="/illustrations/cowboy.jpg" alt="The refactoring cowboy" class="main-image"><p><!--[-->Once upon a time, there was a poor lonesome cowboy developer. He had a long long code to refactor. Whenever he went to a new town, he shot the legacy code faster than his shadow.<!--]--></p><p><!--[-->He is a contractor, so he joins teams for that purpose, to refactor and to improve software quality.<!--]--></p><p><!--[-->While the cowboy developer read the legacy code, he tends to refactor everything. He write clean new code and test his code properly. But, in the end, his refactoring always stumbles upon some edge case that he was not aware of and here it comesâ€¦ Despite the tests he had created, he has introduced some bugs! ðŸ˜¨.<!--]--></p><p><!--[-->What&#39;s wrong with this process ?<!--]--></p><p><!--[-->There are two major breaches in his way of refactoring:<!--]--></p><ul><!--[--><li><!--[-->our cowboy is refactoring a whole system without knowing the exact behavior<!--]--></li><li><!--[-->our cowboy is testing his code according to the refactored code and not according to both legacy and new code.<!--]--></li><!--]--></ul><p><!--[-->While the first mistake is hard to fix, we will improve the cowboy developer&#39;s process by changing the way he refactor the code.<!--]--></p><h2 id="testing-legacy-code"><a href="#testing-legacy-code"><!--[-->Testing legacy code<!--]--></a></h2><p><!--[-->The first step to successfully refactor a piece of code is to add tests to the legacy code.
But tests should always refer to a behavior while keeping in mind empathy with the user.
It&#39;s impossible to do that when you don&#39;t know the behaviour!<!--]--></p><p><!--[-->We have to find another way to achieve that. The first tool we will use is snapshot testing using Jest.<!--]--></p><p><!--[-->What is a snapshot test? It&#39;s simple:<!--]--></p><ul><!--[--><li><!--[-->Take a picture of a component<!--]--></li><li><!--[-->Modify the code<!--]--></li><li><!--[-->Take another picture after the code was changed<!--]--></li><li><!--[-->Compare both pictures (before and after the refactoring). They should look exactly the same.<!--]--></li><!--]--></ul><p><!--[-->It means the output of the component should be the same before and after the refactoring. Let&#39;s try this with some code.<!--]--></p><p><!--[-->Imagine an application our cowboy developer uses for counting cows and keep some data on them. Here is the application:<!--]--></p><p><!--[-->The code:<!--]--></p><!--[--><pre class="language-jsx shiki shiki-themes github-light" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D73A49">import</span><span style="--shiki-default:#24292E"> React </span><span style="--shiki-default:#D73A49">from</span><span style="--shiki-default:#032F62"> &#39;react&#39;
</span></span><span class="line" line="2"><span style="--shiki-default:#D73A49">import</span><span style="--shiki-default:#032F62"> &#39;bulma&#39;
</span></span><span class="line" line="3"><span style="--shiki-default:#D73A49">import</span><span style="--shiki-default:#032F62"> &#39;./styles.css&#39;
</span></span><span class="line" line="4"><span emptylineplaceholder="true">
</span></span><span class="line" line="5"><span style="--shiki-default:#D73A49">export</span><span style="--shiki-default:#D73A49"> default</span><span style="--shiki-default:#D73A49"> function</span><span style="--shiki-default:#6F42C1"> App</span><span style="--shiki-default:#24292E">() {
</span></span><span class="line" line="6"><span style="--shiki-default:#D73A49">  return</span><span style="--shiki-default:#24292E"> (
</span></span><span class="line" line="7"><span style="--shiki-default:#24292E">    &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;App&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="8"><span style="--shiki-default:#24292E">      &lt;</span><span style="--shiki-default:#22863A">h1</span><span style="--shiki-default:#24292E">&gt;MY COWS&lt;/</span><span style="--shiki-default:#22863A">h1</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="9"><span emptylineplaceholder="true">
</span></span><span class="line" line="10"><span style="--shiki-default:#24292E">      &lt;</span><span style="--shiki-default:#22863A">section</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;cows&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="11"><span style="--shiki-default:#24292E">        &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;card&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="12"><span style="--shiki-default:#24292E">          &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;card-image&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="13"><span style="--shiki-default:#24292E">            &lt;</span><span style="--shiki-default:#22863A">figure</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;image is-4by3&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="14"><span style="--shiki-default:#24292E">              &lt;</span><span style="--shiki-default:#22863A">img</span><span style="--shiki-default:#6F42C1"> src</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;https://lh3.googleusercontent.com/eLxDr87icLAQlzF2LFIig62i46hm7f8sH77zIaZX6t64kFsjHlok6QMyCiReOzBcfpkPTZSv3g=w640-h400-e365&quot;</span><span style="--shiki-default:#24292E"> /&gt;
</span></span><span class="line" line="15"><span style="--shiki-default:#24292E">            &lt;/</span><span style="--shiki-default:#22863A">figure</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="16"><span style="--shiki-default:#24292E">          &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="17"><span emptylineplaceholder="true">
</span></span><span class="line" line="18"><span style="--shiki-default:#24292E">          &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;card-content&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="19"><span style="--shiki-default:#24292E">            &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;media&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="20"><span style="--shiki-default:#24292E">              &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;media-content&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="21"><span style="--shiki-default:#24292E">                &lt;</span><span style="--shiki-default:#22863A">p</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;title is-4&quot;</span><span style="--shiki-default:#24292E">&gt;Margueritte&lt;/</span><span style="--shiki-default:#22863A">p</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="22"><span style="--shiki-default:#24292E">                &lt;</span><span style="--shiki-default:#22863A">p</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;subtitle is-6&quot;</span><span style="--shiki-default:#24292E">&gt;Field A&lt;/</span><span style="--shiki-default:#22863A">p</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="23"><span style="--shiki-default:#24292E">              &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="24"><span style="--shiki-default:#24292E">            &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="25"><span emptylineplaceholder="true">
</span></span><span class="line" line="26"><span style="--shiki-default:#24292E">            &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;content&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="27"><span style="--shiki-default:#24292E">              She love organize poker game in the basment of the farm.
</span></span><span class="line" line="28"><span style="--shiki-default:#24292E">            &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="29"><span style="--shiki-default:#24292E">          &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="30"><span style="--shiki-default:#24292E">        &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="31"><span emptylineplaceholder="true">
</span></span><span class="line" line="32"><span style="--shiki-default:#24292E">        &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;card&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="33"><span style="--shiki-default:#24292E">          &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;card-image&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="34"><span style="--shiki-default:#24292E">            &lt;</span><span style="--shiki-default:#22863A">figure</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;image is-4by3&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="35"><span style="--shiki-default:#24292E">              &lt;</span><span style="--shiki-default:#22863A">img</span><span style="--shiki-default:#6F42C1"> src</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;https://image.posterlounge.fr/img/products/650000/649832/649832_poster_l.jpg&quot;</span><span style="--shiki-default:#24292E"> /&gt;
</span></span><span class="line" line="36"><span style="--shiki-default:#24292E">            &lt;/</span><span style="--shiki-default:#22863A">figure</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="37"><span style="--shiki-default:#24292E">          &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="38"><span emptylineplaceholder="true">
</span></span><span class="line" line="39"><span style="--shiki-default:#24292E">          &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;card-content&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="40"><span style="--shiki-default:#24292E">            &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;media&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="41"><span style="--shiki-default:#24292E">              &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;media-content&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="42"><span style="--shiki-default:#24292E">                &lt;</span><span style="--shiki-default:#22863A">p</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;title is-4&quot;</span><span style="--shiki-default:#24292E">&gt;ThÃ©rÃ¨se&lt;/</span><span style="--shiki-default:#22863A">p</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="43"><span style="--shiki-default:#24292E">                &lt;</span><span style="--shiki-default:#22863A">p</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;subtitle is-6&quot;</span><span style="--shiki-default:#24292E">&gt;Field A&lt;/</span><span style="--shiki-default:#22863A">p</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="44"><span style="--shiki-default:#24292E">              &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="45"><span style="--shiki-default:#24292E">            &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="46"><span emptylineplaceholder="true">
</span></span><span class="line" line="47"><span style="--shiki-default:#24292E">            &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;content&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="48"><span style="--shiki-default:#24292E">              During the confinement, her hair grown up significantly.
</span></span><span class="line" line="49"><span style="--shiki-default:#24292E">            &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="50"><span style="--shiki-default:#24292E">          &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="51"><span style="--shiki-default:#24292E">        &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="52"><span emptylineplaceholder="true">
</span></span><span class="line" line="53"><span style="--shiki-default:#24292E">        &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;card&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="54"><span style="--shiki-default:#24292E">          &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;card-image&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="55"><span style="--shiki-default:#24292E">            &lt;</span><span style="--shiki-default:#22863A">figure</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;image is-4by3&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="56"><span style="--shiki-default:#24292E">              &lt;</span><span style="--shiki-default:#22863A">img</span><span style="--shiki-default:#6F42C1"> src</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;https://oldmooresalmanac.com/wp-content/uploads/2017/11/cow-2896329_960_720-Copy-476x459.jpg&quot;</span><span style="--shiki-default:#24292E"> /&gt;
</span></span><span class="line" line="57"><span style="--shiki-default:#24292E">            &lt;/</span><span style="--shiki-default:#22863A">figure</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="58"><span style="--shiki-default:#24292E">          &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="59"><span emptylineplaceholder="true">
</span></span><span class="line" line="60"><span style="--shiki-default:#24292E">          &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;card-content&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="61"><span style="--shiki-default:#24292E">            &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;media&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="62"><span style="--shiki-default:#24292E">              &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;media-content&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="63"><span style="--shiki-default:#24292E">                &lt;</span><span style="--shiki-default:#22863A">p</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;title is-4&quot;</span><span style="--shiki-default:#24292E">&gt;Evelyne&lt;/</span><span style="--shiki-default:#22863A">p</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="64"><span style="--shiki-default:#24292E">                &lt;</span><span style="--shiki-default:#22863A">p</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;subtitle is-6&quot;</span><span style="--shiki-default:#24292E">&gt;Field B&lt;/</span><span style="--shiki-default:#22863A">p</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="65"><span style="--shiki-default:#24292E">              &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="66"><span style="--shiki-default:#24292E">            &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="67"><span emptylineplaceholder="true">
</span></span><span class="line" line="68"><span style="--shiki-default:#24292E">            &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;content&quot;</span><span style="--shiki-default:#24292E">&gt;She smile to me, it&#39;s weird.&lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="69"><span style="--shiki-default:#24292E">          &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="70"><span style="--shiki-default:#24292E">        &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="71"><span style="--shiki-default:#24292E">      &lt;/</span><span style="--shiki-default:#22863A">section</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="72"><span style="--shiki-default:#24292E">    &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="73"><span style="--shiki-default:#24292E">  )
</span></span><span class="line" line="74"><span style="--shiki-default:#24292E">}
</span></span></code><!--]--></pre><!--]--><p><!--[-->The application:<!--]--></p><iframe src="https://codesandbox.io/embed/github/FBerthelot/my-cows-react-refactoring-kata/tree/master/?fontsize=14&amp;hidenavigation=1&amp;theme=dark&amp;view=preview" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" title="my-cows-react-refactoring-kata" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-autoplay allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe><p><!--[-->As you can see, the application is quite simple but it doesn&#39;t rely at all on React as no component has been created. So the first thing we want to do is to create a Cow component.<!--]--></p><p><!--[-->In order to have the best refactoring workflow possible, we need to add tests on the application first.<!--]--></p><h3 id="rendering-the-component-to-get-a-snapshot"><a href="#rendering-the-component-to-get-a-snapshot"><!--[-->Rendering the component to get a snapshot<!--]--></a></h3><p><!--[-->In the React ecosystem, there are 2 major libraries to test components: Enzyme and @testing-library.
Iâ€™ve also created <a href="https://component-test-utils.berthelot.io/" rel="nofollow"><!--[-->my own library, component-test-utils<!--]--></a> earlier this year and I will write the tests with each library so you can have the one you use in an example.<!--]--></p><p><!--[-->Whichever test library youâ€™re using, make sure to render all the React tree and not only one component, so please <em><!--[-->do not use any mock while you are refactoring<!--]--></em>.<!--]--></p><!--[--><pre class="language-jsx shiki shiki-themes github-light" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D73A49">import</span><span style="--shiki-default:#24292E"> App </span><span style="--shiki-default:#D73A49">from</span><span style="--shiki-default:#032F62"> &#39;./App&#39;
</span></span><span class="line" line="2"><span style="--shiki-default:#D73A49">import</span><span style="--shiki-default:#24292E"> React </span><span style="--shiki-default:#D73A49">from</span><span style="--shiki-default:#032F62"> &#39;react&#39;
</span></span><span class="line" line="3"><span style="--shiki-default:#D73A49">import</span><span style="--shiki-default:#24292E"> renderer </span><span style="--shiki-default:#D73A49">from</span><span style="--shiki-default:#032F62"> &#39;react-test-renderer&#39;
</span></span><span class="line" line="4"><span style="--shiki-default:#D73A49">import</span><span style="--shiki-default:#24292E"> { shallow } </span><span style="--shiki-default:#D73A49">from</span><span style="--shiki-default:#032F62"> &#39;component-test-utils-react&#39;
</span></span><span class="line" line="5"><span style="--shiki-default:#D73A49">import</span><span style="--shiki-default:#24292E"> { render } </span><span style="--shiki-default:#D73A49">from</span><span style="--shiki-default:#032F62"> &#39;@testing-library/react&#39;
</span></span><span class="line" line="6"><span style="--shiki-default:#D73A49">import</span><span style="--shiki-default:#24292E"> Enzyme, { mount } </span><span style="--shiki-default:#D73A49">from</span><span style="--shiki-default:#032F62"> &#39;enzyme&#39;
</span></span><span class="line" line="7"><span style="--shiki-default:#D73A49">import</span><span style="--shiki-default:#24292E"> Adapter </span><span style="--shiki-default:#D73A49">from</span><span style="--shiki-default:#032F62"> &#39;enzyme-adapter-react-16&#39;
</span></span><span class="line" line="8"><span emptylineplaceholder="true">
</span></span><span class="line" line="9"><span style="--shiki-default:#24292E">Enzyme.</span><span style="--shiki-default:#6F42C1">configure</span><span style="--shiki-default:#24292E">({ adapter: </span><span style="--shiki-default:#D73A49">new</span><span style="--shiki-default:#6F42C1"> Adapter</span><span style="--shiki-default:#24292E">() })
</span></span><span class="line" line="10"><span emptylineplaceholder="true">
</span></span><span class="line" line="11"><span style="--shiki-default:#6A737D">// React test render
</span></span><span class="line" line="12"><span style="--shiki-default:#6F42C1">describe</span><span style="--shiki-default:#24292E">(</span><span style="--shiki-default:#032F62">&#39;App - react-test-render - Refactoring Tests&#39;</span><span style="--shiki-default:#24292E">, () </span><span style="--shiki-default:#D73A49">=&gt;</span><span style="--shiki-default:#24292E"> {
</span></span><span class="line" line="13"><span style="--shiki-default:#6F42C1">  it</span><span style="--shiki-default:#24292E">(</span><span style="--shiki-default:#032F62">&#39;should look the same&#39;</span><span style="--shiki-default:#24292E">, () </span><span style="--shiki-default:#D73A49">=&gt;</span><span style="--shiki-default:#24292E"> {
</span></span><span class="line" line="14"><span style="--shiki-default:#D73A49">    const</span><span style="--shiki-default:#005CC5"> tree</span><span style="--shiki-default:#D73A49"> =</span><span style="--shiki-default:#24292E"> renderer.</span><span style="--shiki-default:#6F42C1">create</span><span style="--shiki-default:#24292E">(&lt;</span><span style="--shiki-default:#005CC5">App</span><span style="--shiki-default:#24292E"> /&gt;).</span><span style="--shiki-default:#6F42C1">toJSON</span><span style="--shiki-default:#24292E">()
</span></span><span class="line" line="15"><span style="--shiki-default:#6F42C1">    expect</span><span style="--shiki-default:#24292E">(tree).</span><span style="--shiki-default:#6F42C1">toMatchSnapshot</span><span style="--shiki-default:#24292E">()
</span></span><span class="line" line="16"><span style="--shiki-default:#24292E">  })
</span></span><span class="line" line="17"><span style="--shiki-default:#24292E">})
</span></span><span class="line" line="18"><span emptylineplaceholder="true">
</span></span><span class="line" line="19"><span style="--shiki-default:#6A737D">// Enzyme
</span></span><span class="line" line="20"><span style="--shiki-default:#6F42C1">describe</span><span style="--shiki-default:#24292E">(</span><span style="--shiki-default:#032F62">&#39;App - enzyme - Refactoring Tests&#39;</span><span style="--shiki-default:#24292E">, () </span><span style="--shiki-default:#D73A49">=&gt;</span><span style="--shiki-default:#24292E"> {
</span></span><span class="line" line="21"><span style="--shiki-default:#6F42C1">  it</span><span style="--shiki-default:#24292E">(</span><span style="--shiki-default:#032F62">&#39;should look the same&#39;</span><span style="--shiki-default:#24292E">, () </span><span style="--shiki-default:#D73A49">=&gt;</span><span style="--shiki-default:#24292E"> {
</span></span><span class="line" line="22"><span style="--shiki-default:#D73A49">    const</span><span style="--shiki-default:#005CC5"> component</span><span style="--shiki-default:#D73A49"> =</span><span style="--shiki-default:#6F42C1"> mount</span><span style="--shiki-default:#24292E">(&lt;</span><span style="--shiki-default:#005CC5">App</span><span style="--shiki-default:#24292E"> /&gt;)
</span></span><span class="line" line="23"><span style="--shiki-default:#6F42C1">    expect</span><span style="--shiki-default:#24292E">(component.</span><span style="--shiki-default:#6F42C1">html</span><span style="--shiki-default:#24292E">()).</span><span style="--shiki-default:#6F42C1">toMatchSnapshot</span><span style="--shiki-default:#24292E">()
</span></span><span class="line" line="24"><span style="--shiki-default:#24292E">  })
</span></span><span class="line" line="25"><span style="--shiki-default:#24292E">})
</span></span><span class="line" line="26"><span emptylineplaceholder="true">
</span></span><span class="line" line="27"><span style="--shiki-default:#6A737D">// component-test-utils-react
</span></span><span class="line" line="28"><span style="--shiki-default:#6F42C1">describe</span><span style="--shiki-default:#24292E">(</span><span style="--shiki-default:#032F62">&#39;App - component-test-utils-react - Refactoring Tests&#39;</span><span style="--shiki-default:#24292E">, () </span><span style="--shiki-default:#D73A49">=&gt;</span><span style="--shiki-default:#24292E"> {
</span></span><span class="line" line="29"><span style="--shiki-default:#6F42C1">  it</span><span style="--shiki-default:#24292E">(</span><span style="--shiki-default:#032F62">&#39;should look the same&#39;</span><span style="--shiki-default:#24292E">, () </span><span style="--shiki-default:#D73A49">=&gt;</span><span style="--shiki-default:#24292E"> {
</span></span><span class="line" line="30"><span style="--shiki-default:#D73A49">    const</span><span style="--shiki-default:#005CC5"> component</span><span style="--shiki-default:#D73A49"> =</span><span style="--shiki-default:#6F42C1"> shallow</span><span style="--shiki-default:#24292E">(&lt;</span><span style="--shiki-default:#005CC5">App</span><span style="--shiki-default:#24292E"> /&gt;, { blackList: </span><span style="--shiki-default:#005CC5">true</span><span style="--shiki-default:#24292E"> })
</span></span><span class="line" line="31"><span style="--shiki-default:#6F42C1">    expect</span><span style="--shiki-default:#24292E">(component.</span><span style="--shiki-default:#6F42C1">html</span><span style="--shiki-default:#24292E">({ snapshot: </span><span style="--shiki-default:#005CC5">true</span><span style="--shiki-default:#24292E"> })).</span><span style="--shiki-default:#6F42C1">toMatchSnapshot</span><span style="--shiki-default:#24292E">()
</span></span><span class="line" line="32"><span style="--shiki-default:#24292E">  })
</span></span><span class="line" line="33"><span style="--shiki-default:#24292E">})
</span></span><span class="line" line="34"><span emptylineplaceholder="true">
</span></span><span class="line" line="35"><span style="--shiki-default:#6A737D">// @testing-library
</span></span><span class="line" line="36"><span style="--shiki-default:#6F42C1">describe</span><span style="--shiki-default:#24292E">(</span><span style="--shiki-default:#032F62">&#39;App - @testing-library/react - Refactoring Tests&#39;</span><span style="--shiki-default:#24292E">, () </span><span style="--shiki-default:#D73A49">=&gt;</span><span style="--shiki-default:#24292E"> {
</span></span><span class="line" line="37"><span style="--shiki-default:#6F42C1">  it</span><span style="--shiki-default:#24292E">(</span><span style="--shiki-default:#032F62">&#39;should look the same&#39;</span><span style="--shiki-default:#24292E">, () </span><span style="--shiki-default:#D73A49">=&gt;</span><span style="--shiki-default:#24292E"> {
</span></span><span class="line" line="38"><span style="--shiki-default:#D73A49">    const</span><span style="--shiki-default:#24292E"> { </span><span style="--shiki-default:#005CC5">container</span><span style="--shiki-default:#24292E"> } </span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#6F42C1"> render</span><span style="--shiki-default:#24292E">(&lt;</span><span style="--shiki-default:#005CC5">App</span><span style="--shiki-default:#24292E"> /&gt;)
</span></span><span class="line" line="39"><span style="--shiki-default:#6F42C1">    expect</span><span style="--shiki-default:#24292E">(container.firstChild).</span><span style="--shiki-default:#6F42C1">toMatchSnapshot</span><span style="--shiki-default:#24292E">()
</span></span><span class="line" line="40"><span style="--shiki-default:#24292E">  })
</span></span><span class="line" line="41"><span style="--shiki-default:#24292E">})
</span></span></code><!--]--></pre><!--]--><p><!--[-->When executing the tests for the first time, Jest will create a <code class=""><!--[-->__snapshots__<!--]--></code> folder with a copy of your React tree. If you make any change, Jest will verify if the new code generates the same React tree.<!--]--></p><h3 id="creating-a-cow-component"><a href="#creating-a-cow-component"><!--[-->Creating a Cow component<!--]--></a></h3><p><!--[-->Now we can start developing a Cow component using TDD as usual.<!--]--></p><!--[--><pre class="language-jsx shiki shiki-themes github-light" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D73A49">import</span><span style="--shiki-default:#24292E"> React </span><span style="--shiki-default:#D73A49">from</span><span style="--shiki-default:#032F62"> &#39;react&#39;
</span></span><span class="line" line="2"><span style="--shiki-default:#D73A49">import</span><span style="--shiki-default:#24292E"> { Cow } </span><span style="--shiki-default:#D73A49">from</span><span style="--shiki-default:#032F62"> &#39;./Cow&#39;
</span></span><span class="line" line="3"><span style="--shiki-default:#D73A49">import</span><span style="--shiki-default:#24292E"> { shallow } </span><span style="--shiki-default:#D73A49">from</span><span style="--shiki-default:#032F62"> &#39;component-test-utils-react&#39;
</span></span><span class="line" line="4"><span emptylineplaceholder="true">
</span></span><span class="line" line="5"><span style="--shiki-default:#6F42C1">describe</span><span style="--shiki-default:#24292E">(</span><span style="--shiki-default:#032F62">&#39;Cow&#39;</span><span style="--shiki-default:#24292E">, () </span><span style="--shiki-default:#D73A49">=&gt;</span><span style="--shiki-default:#24292E"> {
</span></span><span class="line" line="6"><span style="--shiki-default:#D73A49">  const</span><span style="--shiki-default:#005CC5"> cow</span><span style="--shiki-default:#D73A49"> =</span><span style="--shiki-default:#24292E"> {
</span></span><span class="line" line="7"><span style="--shiki-default:#24292E">    name: </span><span style="--shiki-default:#032F62">&#39;Margueritte&#39;</span><span style="--shiki-default:#24292E">,
</span></span><span class="line" line="8"><span style="--shiki-default:#24292E">    location: </span><span style="--shiki-default:#032F62">&#39;Field A&#39;</span><span style="--shiki-default:#24292E">,
</span></span><span class="line" line="9"><span style="--shiki-default:#24292E">    description: </span><span style="--shiki-default:#032F62">&quot;She&#39;s smiling at me, it&#39;s weird.&quot;</span><span style="--shiki-default:#24292E">,
</span></span><span class="line" line="10"><span style="--shiki-default:#24292E">    image: </span><span style="--shiki-default:#032F62">&#39;http://toto.toto.com&#39;</span><span style="--shiki-default:#24292E">,
</span></span><span class="line" line="11"><span style="--shiki-default:#24292E">  }
</span></span><span class="line" line="12"><span style="--shiki-default:#6F42C1">  it</span><span style="--shiki-default:#24292E">(</span><span style="--shiki-default:#032F62">&#39;should display cow name&#39;</span><span style="--shiki-default:#24292E">, () </span><span style="--shiki-default:#D73A49">=&gt;</span><span style="--shiki-default:#24292E"> {
</span></span><span class="line" line="13"><span style="--shiki-default:#D73A49">    const</span><span style="--shiki-default:#005CC5"> component</span><span style="--shiki-default:#D73A49"> =</span><span style="--shiki-default:#6F42C1"> shallow</span><span style="--shiki-default:#24292E">(&lt;</span><span style="--shiki-default:#005CC5">Cow</span><span style="--shiki-default:#6F42C1"> cow</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#24292E">{cow} /&gt;)
</span></span><span class="line" line="14"><span style="--shiki-default:#6F42C1">    expect</span><span style="--shiki-default:#24292E">(component.</span><span style="--shiki-default:#6F42C1">html</span><span style="--shiki-default:#24292E">()).</span><span style="--shiki-default:#6F42C1">toContain</span><span style="--shiki-default:#24292E">(cow.name)
</span></span><span class="line" line="15"><span style="--shiki-default:#24292E">  })
</span></span><span class="line" line="16"><span emptylineplaceholder="true">
</span></span><span class="line" line="17"><span style="--shiki-default:#6F42C1">  it</span><span style="--shiki-default:#24292E">(</span><span style="--shiki-default:#032F62">&#39;should display where the cow is&#39;</span><span style="--shiki-default:#24292E">, () </span><span style="--shiki-default:#D73A49">=&gt;</span><span style="--shiki-default:#24292E"> {
</span></span><span class="line" line="18"><span style="--shiki-default:#D73A49">    const</span><span style="--shiki-default:#005CC5"> component</span><span style="--shiki-default:#D73A49"> =</span><span style="--shiki-default:#6F42C1"> shallow</span><span style="--shiki-default:#24292E">(&lt;</span><span style="--shiki-default:#005CC5">Cow</span><span style="--shiki-default:#6F42C1"> cow</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#24292E">{cow} /&gt;)
</span></span><span class="line" line="19"><span style="--shiki-default:#6F42C1">    expect</span><span style="--shiki-default:#24292E">(component.</span><span style="--shiki-default:#6F42C1">html</span><span style="--shiki-default:#24292E">()).</span><span style="--shiki-default:#6F42C1">toContain</span><span style="--shiki-default:#24292E">(cow.location)
</span></span><span class="line" line="20"><span style="--shiki-default:#24292E">  })
</span></span><span class="line" line="21"><span emptylineplaceholder="true">
</span></span><span class="line" line="22"><span style="--shiki-default:#6F42C1">  it</span><span style="--shiki-default:#24292E">(</span><span style="--shiki-default:#032F62">&quot;should display the cow&#39;s description&quot;</span><span style="--shiki-default:#24292E">, () </span><span style="--shiki-default:#D73A49">=&gt;</span><span style="--shiki-default:#24292E"> {
</span></span><span class="line" line="23"><span style="--shiki-default:#D73A49">    const</span><span style="--shiki-default:#005CC5"> component</span><span style="--shiki-default:#D73A49"> =</span><span style="--shiki-default:#6F42C1"> shallow</span><span style="--shiki-default:#24292E">(&lt;</span><span style="--shiki-default:#005CC5">Cow</span><span style="--shiki-default:#6F42C1"> cow</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#24292E">{cow} /&gt;)
</span></span><span class="line" line="24"><span style="--shiki-default:#6F42C1">    expect</span><span style="--shiki-default:#24292E">(component.</span><span style="--shiki-default:#6F42C1">html</span><span style="--shiki-default:#24292E">()).</span><span style="--shiki-default:#6F42C1">toContain</span><span style="--shiki-default:#24292E">(cow.description)
</span></span><span class="line" line="25"><span style="--shiki-default:#24292E">  })
</span></span><span class="line" line="26"><span emptylineplaceholder="true">
</span></span><span class="line" line="27"><span style="--shiki-default:#6F42C1">  it</span><span style="--shiki-default:#24292E">(</span><span style="--shiki-default:#032F62">&quot;should display the cow&#39;s image&quot;</span><span style="--shiki-default:#24292E">, () </span><span style="--shiki-default:#D73A49">=&gt;</span><span style="--shiki-default:#24292E"> {
</span></span><span class="line" line="28"><span style="--shiki-default:#D73A49">    const</span><span style="--shiki-default:#005CC5"> component</span><span style="--shiki-default:#D73A49"> =</span><span style="--shiki-default:#6F42C1"> shallow</span><span style="--shiki-default:#24292E">(&lt;</span><span style="--shiki-default:#005CC5">Cow</span><span style="--shiki-default:#6F42C1"> cow</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#24292E">{cow} /&gt;)
</span></span><span class="line" line="29"><span style="--shiki-default:#6F42C1">    expect</span><span style="--shiki-default:#24292E">(component.</span><span style="--shiki-default:#6F42C1">html</span><span style="--shiki-default:#24292E">()).</span><span style="--shiki-default:#6F42C1">toContain</span><span style="--shiki-default:#24292E">(cow.image)
</span></span><span class="line" line="30"><span style="--shiki-default:#24292E">  })
</span></span><span class="line" line="31"><span style="--shiki-default:#24292E">})
</span></span></code><!--]--></pre><!--]--><p><!--[-->As you can see we test that each data sent to the component is displayed no matter the HTML tree. The Cow component is very simple, nothing special here.<!--]--></p><!--[--><pre class="language-jsx shiki shiki-themes github-light" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D73A49">import</span><span style="--shiki-default:#24292E"> React </span><span style="--shiki-default:#D73A49">from</span><span style="--shiki-default:#032F62"> &#39;react&#39;
</span></span><span class="line" line="2"><span emptylineplaceholder="true">
</span></span><span class="line" line="3"><span style="--shiki-default:#D73A49">export</span><span style="--shiki-default:#D73A49"> const</span><span style="--shiki-default:#6F42C1"> Cow</span><span style="--shiki-default:#D73A49"> =</span><span style="--shiki-default:#24292E"> ({ </span><span style="--shiki-default:#E36209">cow</span><span style="--shiki-default:#24292E"> }) </span><span style="--shiki-default:#D73A49">=&gt;</span><span style="--shiki-default:#24292E"> {
</span></span><span class="line" line="4"><span style="--shiki-default:#D73A49">  return</span><span style="--shiki-default:#24292E"> (
</span></span><span class="line" line="5"><span style="--shiki-default:#24292E">    &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;card&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="6"><span style="--shiki-default:#24292E">      &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;card-image&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="7"><span style="--shiki-default:#24292E">        &lt;</span><span style="--shiki-default:#22863A">figure</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;image is-4by3&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="8"><span style="--shiki-default:#24292E">          &lt;</span><span style="--shiki-default:#22863A">img</span><span style="--shiki-default:#6F42C1"> src</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#24292E">{cow.image} /&gt;
</span></span><span class="line" line="9"><span style="--shiki-default:#24292E">        &lt;/</span><span style="--shiki-default:#22863A">figure</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="10"><span style="--shiki-default:#24292E">      &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="11"><span emptylineplaceholder="true">
</span></span><span class="line" line="12"><span style="--shiki-default:#24292E">      &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;card-content&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="13"><span style="--shiki-default:#24292E">        &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;media&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="14"><span style="--shiki-default:#24292E">          &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;media-content&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="15"><span style="--shiki-default:#24292E">            &lt;</span><span style="--shiki-default:#22863A">p</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;title is-4&quot;</span><span style="--shiki-default:#24292E">&gt;{cow.name}&lt;/</span><span style="--shiki-default:#22863A">p</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="16"><span style="--shiki-default:#24292E">            &lt;</span><span style="--shiki-default:#22863A">p</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;subtitle is-6&quot;</span><span style="--shiki-default:#24292E">&gt;{cow.location}&lt;/</span><span style="--shiki-default:#22863A">p</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="17"><span style="--shiki-default:#24292E">          &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="18"><span style="--shiki-default:#24292E">        &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="19"><span emptylineplaceholder="true">
</span></span><span class="line" line="20"><span style="--shiki-default:#24292E">        &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;content&quot;</span><span style="--shiki-default:#24292E">&gt;{cow.description}&lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="21"><span style="--shiki-default:#24292E">      &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="22"><span style="--shiki-default:#24292E">    &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="23"><span style="--shiki-default:#24292E">  )
</span></span><span class="line" line="24"><span style="--shiki-default:#24292E">}
</span></span></code><!--]--></pre><!--]--><h3 id="using-the-cow-component"><a href="#using-the-cow-component"><!--[-->Using the Cow component<!--]--></a></h3><p><!--[-->The Cow component is ready now, it&#39;s time for our cowboy to destroy the old code and use his new Cow card.<!--]--></p><!--[--><pre class="language-jsx shiki shiki-themes github-light" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#D73A49">import</span><span style="--shiki-default:#24292E"> React </span><span style="--shiki-default:#D73A49">from</span><span style="--shiki-default:#032F62"> &#39;react&#39;
</span></span><span class="line" line="2"><span style="--shiki-default:#D73A49">import</span><span style="--shiki-default:#032F62"> &#39;bulma&#39;
</span></span><span class="line" line="3"><span style="--shiki-default:#D73A49">import</span><span style="--shiki-default:#032F62"> &#39;./styles.css&#39;
</span></span><span class="line" line="4"><span style="--shiki-default:#D73A49">import</span><span style="--shiki-default:#24292E"> { Cow } </span><span style="--shiki-default:#D73A49">from</span><span style="--shiki-default:#032F62"> &#39;./Cow&#39;
</span></span><span class="line" line="5"><span emptylineplaceholder="true">
</span></span><span class="line" line="6"><span style="--shiki-default:#D73A49">export</span><span style="--shiki-default:#D73A49"> default</span><span style="--shiki-default:#D73A49"> function</span><span style="--shiki-default:#6F42C1"> App</span><span style="--shiki-default:#24292E">() {
</span></span><span class="line" line="7"><span style="--shiki-default:#D73A49">  const</span><span style="--shiki-default:#005CC5"> cows</span><span style="--shiki-default:#D73A49"> =</span><span style="--shiki-default:#24292E"> [
</span></span><span class="line" line="8"><span style="--shiki-default:#24292E">    {
</span></span><span class="line" line="9"><span style="--shiki-default:#24292E">      name: </span><span style="--shiki-default:#032F62">&#39;Margueritte&#39;</span><span style="--shiki-default:#24292E">,
</span></span><span class="line" line="10"><span style="--shiki-default:#24292E">      image:
</span></span><span class="line" line="11"><span style="--shiki-default:#032F62">        &#39;https://lh3.googleusercontent.com/eLxDr87icLAQlzF2LFIig62i46hm7f8sH77zIaZX6t64kFsjHlok6QMyCiReOzBcfpkPTZSv3g=w640-h400-e365&#39;</span><span style="--shiki-default:#24292E">,
</span></span><span class="line" line="12"><span style="--shiki-default:#24292E">      location: </span><span style="--shiki-default:#032F62">&#39;Field A&#39;</span><span style="--shiki-default:#24292E">,
</span></span><span class="line" line="13"><span style="--shiki-default:#24292E">      description:
</span></span><span class="line" line="14"><span style="--shiki-default:#032F62">        &#39;She loves organizing poker games in the basement of the farm.&#39;</span><span style="--shiki-default:#24292E">,
</span></span><span class="line" line="15"><span style="--shiki-default:#24292E">    },
</span></span><span class="line" line="16"><span style="--shiki-default:#24292E">    {
</span></span><span class="line" line="17"><span style="--shiki-default:#24292E">      name: </span><span style="--shiki-default:#032F62">&#39;ThÃ©rÃ¨se&#39;</span><span style="--shiki-default:#24292E">,
</span></span><span class="line" line="18"><span style="--shiki-default:#24292E">      image:
</span></span><span class="line" line="19"><span style="--shiki-default:#032F62">        &#39;https://image.posterlounge.fr/img/products/650000/649832/649832_poster_l.jpg&#39;</span><span style="--shiki-default:#24292E">,
</span></span><span class="line" line="20"><span style="--shiki-default:#24292E">      location: </span><span style="--shiki-default:#032F62">&#39;Field A&#39;</span><span style="--shiki-default:#24292E">,
</span></span><span class="line" line="21"><span style="--shiki-default:#24292E">      description: </span><span style="--shiki-default:#032F62">&#39;During the confinement, her hair grew significantly.&#39;</span><span style="--shiki-default:#24292E">,
</span></span><span class="line" line="22"><span style="--shiki-default:#24292E">    },
</span></span><span class="line" line="23"><span style="--shiki-default:#24292E">    {
</span></span><span class="line" line="24"><span style="--shiki-default:#24292E">      name: </span><span style="--shiki-default:#032F62">&#39;Evelyne&#39;</span><span style="--shiki-default:#24292E">,
</span></span><span class="line" line="25"><span style="--shiki-default:#24292E">      image:
</span></span><span class="line" line="26"><span style="--shiki-default:#032F62">        &#39;https://oldmooresalmanac.com/wp-content/uploads/2017/11/cow-2896329_960_720-Copy-476x459.jpg&#39;</span><span style="--shiki-default:#24292E">,
</span></span><span class="line" line="27"><span style="--shiki-default:#24292E">      location: </span><span style="--shiki-default:#032F62">&#39;Field B&#39;</span><span style="--shiki-default:#24292E">,
</span></span><span class="line" line="28"><span style="--shiki-default:#24292E">      description: </span><span style="--shiki-default:#032F62">&quot;She&#39;s smiling at me, it&#39;s weird.&quot;</span><span style="--shiki-default:#24292E">,
</span></span><span class="line" line="29"><span style="--shiki-default:#24292E">    },
</span></span><span class="line" line="30"><span style="--shiki-default:#24292E">  ]
</span></span><span class="line" line="31"><span emptylineplaceholder="true">
</span></span><span class="line" line="32"><span style="--shiki-default:#D73A49">  return</span><span style="--shiki-default:#24292E"> (
</span></span><span class="line" line="33"><span style="--shiki-default:#24292E">    &lt;</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;App&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="34"><span style="--shiki-default:#24292E">      &lt;</span><span style="--shiki-default:#22863A">h1</span><span style="--shiki-default:#24292E">&gt;MY COWS&lt;/</span><span style="--shiki-default:#22863A">h1</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="35"><span emptylineplaceholder="true">
</span></span><span class="line" line="36"><span style="--shiki-default:#24292E">      &lt;</span><span style="--shiki-default:#22863A">section</span><span style="--shiki-default:#6F42C1"> className</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#032F62">&quot;cows&quot;</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="37"><span style="--shiki-default:#24292E">        {cows.</span><span style="--shiki-default:#6F42C1">map</span><span style="--shiki-default:#24292E">((</span><span style="--shiki-default:#E36209">cow</span><span style="--shiki-default:#24292E">) </span><span style="--shiki-default:#D73A49">=&gt;</span><span style="--shiki-default:#24292E"> {
</span></span><span class="line" line="38"><span style="--shiki-default:#D73A49">          return</span><span style="--shiki-default:#24292E"> &lt;</span><span style="--shiki-default:#005CC5">Cow</span><span style="--shiki-default:#6F42C1"> cow</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#24292E">{cow} </span><span style="--shiki-default:#6F42C1">key</span><span style="--shiki-default:#D73A49">=</span><span style="--shiki-default:#24292E">{cow.name} /&gt;
</span></span><span class="line" line="39"><span style="--shiki-default:#24292E">        })}
</span></span><span class="line" line="40"><span style="--shiki-default:#24292E">      &lt;/</span><span style="--shiki-default:#22863A">section</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="41"><span style="--shiki-default:#24292E">    &lt;/</span><span style="--shiki-default:#22863A">div</span><span style="--shiki-default:#24292E">&gt;
</span></span><span class="line" line="42"><span style="--shiki-default:#24292E">  )
</span></span><span class="line" line="43"><span style="--shiki-default:#24292E">}
</span></span></code><!--]--></pre><!--]--><p><!--[-->When refactoring this code, we are confident because we are sure to generate the same html output thanks to our snapshot tests.<!--]--></p><h3 id="deleting-the-snapshot-tests"><a href="#deleting-the-snapshot-tests"><!--[-->Deleting the snapshot tests<!--]--></a></h3><p><!--[-->Refactoring is done, so we don&#39;t need the snapshot tests anymore. The snapshot tests helped the cowboy to refactor code and to create a Cow component, but now refactoring is done the first test is useless. This snapshot test has no value anymore.<!--]--></p><p><!--[-->As DOM is something very versatile, the HTML structure will likely change. This kind of tests will bring many false negative results, lots of noise while changing some HTML/CSS. It has now become something more annoying than helpful.<!--]--></p><p><!--[-->Let&#39;s execute our cowboyâ€™s favorite command <code class=""><!--[-->rm ./src/App.snapshot.spec.js<!--]--></code>!<!--]--></p><h2 id="whats-next"><a href="#whats-next"><!--[-->What&#39;s next?<!--]--></a></h2><p><!--[-->In this article, our cowboy developer refactors a very simple piece of code, there is no logic in this app. To handle more complexe piece of code, you can use another tools like property-based-testing to find what is the logic behind the crappy old code.<!--]--></p><hr><p><!--[-->The code of <a href="https://github.com/FBerthelot/my-cows-react-refactoring-kata" rel="nofollow"><!--[-->the repository is here<!--]--></a> and you can navigate between steps with a branch system.<!--]--></p><style>html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}</style></div><!--]--><footer class="footer" data-v-dc335689 data-v-ff26e94e><ul class="social-network" data-v-ff26e94e><li data-v-ff26e94e><a class="typo_default typo_white" rel="noopener" target="_blank" href="https://twitter.com/berthel350" data-v-ff26e94e><img src="/assets/twitter.svg" alt="" data-v-ff26e94e> Twitter</a></li><li data-v-ff26e94e><a class="typo_default typo_white" rel="noopener" target="_blank" href="https://www.linkedin.com/in/florent-berthelot-dev-web/" data-v-ff26e94e><img src="/assets/linkedin.svg" alt="" data-v-ff26e94e> Linkedin</a></li><li data-v-ff26e94e><a class="typo_default typo_white" rel="noopener" target="_blank" href="https://github.com/FBerthelot" data-v-ff26e94e><img src="/assets/github.svg" alt="" data-v-ff26e94e>Github</a></li><li data-v-ff26e94e><a class="typo_default typo_white" href="mailto:florent@berthelot.io" data-v-ff26e94e><img src="/assets/email.svg" alt="" data-v-ff26e94e> Mail</a></li></ul></footer></div><!--]--><!--]--><!--]--></div><script type="application/json" id="__NUXT_DATA__" data-ssr="true" data-src="/en/articles/react-test-refactoring-snapshot/_payload.json">[{"state":1,"_errors":11,"serverRendered":7,"path":14,"prerenderedAt":15},["Reactive",2],{"$ssite-config":3},{"defaultLocale":4,"description":5,"env":6,"indexable":7,"name":8,"trailingSlash":9,"url":10},"fr","The family website","production",true,"berthelot.io",false,"https://berthelot.io",["Reactive",12],{"page-data":13},null,"/en/articles/react-test-refactoring-snapshot",1701690608675]</script>
<script>window.__NUXT__={};window.__NUXT__.config={public:{MAPS_URL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyAn1-5rizMpzzJTPnnO5acHg5gA_OpFEhw&callback=initMap&v=weekly",FIREBASE_API_KEY:"AIzaSyDd9LsguBACesKqNbIXaYCV9CDVY2TIga8",FIREBASE_AUTH_DOMAIN:"mariage-88c97.firebaseapp.com",FIREBASE_PROJECT_ID:"mariage-88c97",FIREBASE_STORAGE_BUCKET:"mariage-88c97.appspot.com",FIREBASE_MESSAGING_SENDER_ID:"590464781182",FIREBASE_APP_ID:"1:590464781182:web:662160725231da84e4412f",i18n:{experimental:{jsTsFormatResource:false},baseUrl:"",locales:{fr:{domain:""},en:{domain:""}}},mdc:{components:{prose:true,map:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"ProseCodeInline",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"}},headings:{anchorLinks:{h1:false,h2:true,h3:true,h4:true,h5:false,h6:false}}},content:{locales:[],defaultLocale:"",integrity:1701690586837,experimental:{stripQueryParameters:false,advanceQuery:false,clientDB:false},respectPathCase:false,api:{baseURL:"/api/_content"},navigation:{fields:[]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"ProseCodeInline",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:{theme:"github-light"},wsUrl:"",documentDriven:false,host:"",trailingSlash:false,search:"",contentHead:true,anchorLinks:{depth:4,exclude:[1]}}},app:{baseURL:"/",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body>
</html>