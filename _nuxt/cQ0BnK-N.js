var Kle=Object.defineProperty;var Zle=(t,e,r)=>e in t?Kle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var xk=(t,e,r)=>Zle(t,typeof e!="symbol"?e+"":e,r);var Qle={},qT="11.6.0",Jle=Object.create,b6=Object.defineProperty,ece=Object.getOwnPropertyDescriptor,AB=Object.getOwnPropertyNames,tce=Object.getPrototypeOf,rce=Object.prototype.hasOwnProperty,l=(t,e)=>b6(t,"name",{value:e,configurable:!0}),qn=(t,e)=>function(){return e||(0,t[AB(t)[0]])((e={exports:{}}).exports,e),e.exports},Ss=(t,e)=>{for(var r in e)b6(t,r,{get:e[r],enumerable:!0})},LB=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of AB(e))rce.call(t,i)||i===r||b6(t,i,{get:()=>e[i],enumerable:!(n=ece(e,i))||n.enumerable});return t},w6=(t,e,r)=>(LB(t,e,"default"),r),Ci=(t,e,r)=>(r=t!=null?Jle(tce(t)):{},LB(b6(r,"default",{value:t,enumerable:!0}),t)),g8=qn({"../../node_modules/.pnpm/dayjs@1.11.13/node_modules/dayjs/dayjs.min.js"(t,e){(function(r,n){typeof t=="object"&&e!==void 0?e.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs=n()})(t,(function(){var r=6e4,n=36e5,i="millisecond",a="second",s="minute",o="hour",u="day",h="week",d="month",p="quarter",f="year",g="date",m="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,x={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:l((function(L){var I=["th","st","nd","rd"],A=L%100;return"["+L+(I[(A-20)%10]||I[A]||I[0])+"]"}),"ordinal")},b=l((function(L,I,A){var M=String(L);return!M||M.length>=I?L:""+Array(I+1-M.length).join(A)+L}),"m"),w={s:b,z:l((function(L){var I=-L.utcOffset(),A=Math.abs(I),M=Math.floor(A/60),D=A%60;return(I<=0?"+":"-")+b(M,2,"0")+":"+b(D,2,"0")}),"z"),m:l((function L(I,A){if(I.date()<A.date())return-L(A,I);var M=12*(A.year()-I.year())+(A.month()-I.month()),D=I.clone().add(M,d),R=A-D<0,P=I.clone().add(M+(R?-1:1),d);return+(-(M+(A-D)/(R?D-P:P-D))||0)}),"t"),a:l((function(L){return L<0?Math.ceil(L)||0:Math.floor(L)}),"a"),p:l((function(L){return{M:d,y:f,w:h,d:u,D:g,h:o,m:s,s:a,ms:i,Q:p}[L]||String(L||"").toLowerCase().replace(/s$/,"")}),"p"),u:l((function(L){return L===void 0}),"u")},T="en",k={};k[T]=x;var C="$isDayjsObject",E=l((function(L){return L instanceof O||!(!L||!L[C])}),"S"),_=l((function L(I,A,M){var D;if(!I)return T;if(typeof I=="string"){var R=I.toLowerCase();k[R]&&(D=R),A&&(k[R]=A,D=R);var P=I.split("-");if(!D&&P.length>1)return L(P[0])}else{var $=I.name;k[$]=I,D=$}return!M&&D&&(T=D),D||!M&&T}),"t"),S=l((function(L,I){if(E(L))return L.clone();var A=typeof I=="object"?I:{};return A.date=L,A.args=arguments,new O(A)}),"O"),N=w;N.l=_,N.i=E,N.w=function(L,I){return S(L,{locale:I.$L,utc:I.$u,x:I.$x,$offset:I.$offset})};var O=(function(){function L(A){this.$L=_(A.locale,null,!0),this.parse(A),this.$x=this.$x||A.x||{},this[C]=!0}l(L,"M");var I=L.prototype;return I.parse=function(A){this.$d=(function(M){var D=M.date,R=M.utc;if(D===null)return new Date(NaN);if(N.u(D))return new Date;if(D instanceof Date)return new Date(D);if(typeof D=="string"&&!/Z$/i.test(D)){var P=D.match(y);if(P){var $=P[2]-1||0,z=(P[7]||"0").substring(0,3);return R?new Date(Date.UTC(P[1],$,P[3]||1,P[4]||0,P[5]||0,P[6]||0,z)):new Date(P[1],$,P[3]||1,P[4]||0,P[5]||0,P[6]||0,z)}}return new Date(D)})(A),this.init()},I.init=function(){var A=this.$d;this.$y=A.getFullYear(),this.$M=A.getMonth(),this.$D=A.getDate(),this.$W=A.getDay(),this.$H=A.getHours(),this.$m=A.getMinutes(),this.$s=A.getSeconds(),this.$ms=A.getMilliseconds()},I.$utils=function(){return N},I.isValid=function(){return this.$d.toString()!==m},I.isSame=function(A,M){var D=S(A);return this.startOf(M)<=D&&D<=this.endOf(M)},I.isAfter=function(A,M){return S(A)<this.startOf(M)},I.isBefore=function(A,M){return this.endOf(M)<S(A)},I.$g=function(A,M,D){return N.u(A)?this[M]:this.set(D,A)},I.unix=function(){return Math.floor(this.valueOf()/1e3)},I.valueOf=function(){return this.$d.getTime()},I.startOf=function(A,M){var D=this,R=!!N.u(M)||M,P=N.p(A),$=l((function(H,K){var ie=N.w(D.$u?Date.UTC(D.$y,K,H):new Date(D.$y,K,H),D);return R?ie:ie.endOf(u)}),"l"),z=l((function(H,K){return N.w(D.toDate()[H].apply(D.toDate("s"),(R?[0,0,0,0]:[23,59,59,999]).slice(K)),D)}),"$"),q=this.$W,W=this.$M,Q=this.$D,te="set"+(this.$u?"UTC":"");switch(P){case f:return R?$(1,0):$(31,11);case d:return R?$(1,W):$(0,W+1);case h:var oe=this.$locale().weekStart||0,re=(q<oe?q+7:q)-oe;return $(R?Q-re:Q+(6-re),W);case u:case g:return z(te+"Hours",0);case o:return z(te+"Minutes",1);case s:return z(te+"Seconds",2);case a:return z(te+"Milliseconds",3);default:return this.clone()}},I.endOf=function(A){return this.startOf(A,!1)},I.$set=function(A,M){var D,R=N.p(A),P="set"+(this.$u?"UTC":""),$=(D={},D[u]=P+"Date",D[g]=P+"Date",D[d]=P+"Month",D[f]=P+"FullYear",D[o]=P+"Hours",D[s]=P+"Minutes",D[a]=P+"Seconds",D[i]=P+"Milliseconds",D)[R],z=R===u?this.$D+(M-this.$W):M;if(R===d||R===f){var q=this.clone().set(g,1);q.$d[$](z),q.init(),this.$d=q.set(g,Math.min(this.$D,q.daysInMonth())).$d}else $&&this.$d[$](z);return this.init(),this},I.set=function(A,M){return this.clone().$set(A,M)},I.get=function(A){return this[N.p(A)]()},I.add=function(A,M){var D,R=this;A=Number(A);var P=N.p(M),$=l((function(W){var Q=S(R);return N.w(Q.date(Q.date()+Math.round(W*A)),R)}),"y");if(P===d)return this.set(d,this.$M+A);if(P===f)return this.set(f,this.$y+A);if(P===u)return $(1);if(P===h)return $(7);var z=(D={},D[s]=r,D[o]=n,D[a]=1e3,D)[P]||1,q=this.$d.getTime()+A*z;return N.w(q,this)},I.subtract=function(A,M){return this.add(-1*A,M)},I.format=function(A){var M=this,D=this.$locale();if(!this.isValid())return D.invalidDate||m;var R=A||"YYYY-MM-DDTHH:mm:ssZ",P=N.z(this),$=this.$H,z=this.$m,q=this.$M,W=D.weekdays,Q=D.months,te=D.meridiem,oe=l((function(K,ie,ne,J){return K&&(K[ie]||K(M,R))||ne[ie].slice(0,J)}),"h"),re=l((function(K){return N.s($%12||12,K,"0")}),"d"),H=te||function(K,ie,ne){var J=K<12?"AM":"PM";return ne?J.toLowerCase():J};return R.replace(v,(function(K,ie){return ie||(function(ne){switch(ne){case"YY":return String(M.$y).slice(-2);case"YYYY":return N.s(M.$y,4,"0");case"M":return q+1;case"MM":return N.s(q+1,2,"0");case"MMM":return oe(D.monthsShort,q,Q,3);case"MMMM":return oe(Q,q);case"D":return M.$D;case"DD":return N.s(M.$D,2,"0");case"d":return String(M.$W);case"dd":return oe(D.weekdaysMin,M.$W,W,2);case"ddd":return oe(D.weekdaysShort,M.$W,W,3);case"dddd":return W[M.$W];case"H":return String($);case"HH":return N.s($,2,"0");case"h":return re(1);case"hh":return re(2);case"a":return H($,z,!0);case"A":return H($,z,!1);case"m":return String(z);case"mm":return N.s(z,2,"0");case"s":return String(M.$s);case"ss":return N.s(M.$s,2,"0");case"SSS":return N.s(M.$ms,3,"0");case"Z":return P}return null})(K)||P.replace(":","")}))},I.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},I.diff=function(A,M,D){var R,P=this,$=N.p(M),z=S(A),q=(z.utcOffset()-this.utcOffset())*r,W=this-z,Q=l((function(){return N.m(P,z)}),"D");switch($){case f:R=Q()/12;break;case d:R=Q();break;case p:R=Q()/3;break;case h:R=(W-q)/6048e5;break;case u:R=(W-q)/864e5;break;case o:R=W/n;break;case s:R=W/r;break;case a:R=W/1e3;break;default:R=W}return D?R:N.a(R)},I.daysInMonth=function(){return this.endOf(d).$D},I.$locale=function(){return k[this.$L]},I.locale=function(A,M){if(!A)return this.$L;var D=this.clone(),R=_(A,M,!0);return R&&(D.$L=R),D},I.clone=function(){return N.w(this.$d,this)},I.toDate=function(){return new Date(this.valueOf())},I.toJSON=function(){return this.isValid()?this.toISOString():null},I.toISOString=function(){return this.$d.toISOString()},I.toString=function(){return this.$d.toUTCString()},L})(),B=O.prototype;return S.prototype=B,[["$ms",i],["$s",a],["$m",s],["$H",o],["$W",u],["$M",d],["$y",f],["$D",g]].forEach((function(L){B[L[1]]=function(I){return this.$g(I,L[0],L[1])}})),S.extend=function(L,I){return L.$i||(L(I,O,S),L.$i=!0),S},S.locale=_,S.isDayjs=E,S.unix=function(L){return S(1e3*L)},S.en=k[T],S.Ls=k,S.p={},S}))}}),nce=Ci(g8()),po={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},ee={trace:l(((...t)=>{}),"trace"),debug:l(((...t)=>{}),"debug"),info:l(((...t)=>{}),"info"),warn:l(((...t)=>{}),"warn"),error:l(((...t)=>{}),"error"),fatal:l(((...t)=>{}),"fatal")},m8=l((function(t="fatal"){let e=po.fatal;typeof t=="string"?t.toLowerCase()in po&&(e=po[t]):typeof t=="number"&&(e=t),ee.trace=()=>{},ee.debug=()=>{},ee.info=()=>{},ee.warn=()=>{},ee.error=()=>{},ee.fatal=()=>{},e<=po.fatal&&(ee.fatal=console.error?console.error.bind(console,Na("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",Na("FATAL"))),e<=po.error&&(ee.error=console.error?console.error.bind(console,Na("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",Na("ERROR"))),e<=po.warn&&(ee.warn=console.warn?console.warn.bind(console,Na("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",Na("WARN"))),e<=po.info&&(ee.info=console.info?console.info.bind(console,Na("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",Na("INFO"))),e<=po.debug&&(ee.debug=console.debug?console.debug.bind(console,Na("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Na("DEBUG"))),e<=po.trace&&(ee.trace=console.debug?console.debug.bind(console,Na("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Na("TRACE")))}),"setLogLevel"),Na=l((t=>`%c${(0,nce.default)().format("ss.SSS")} : ${t} : `),"format"),NB=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,Cy=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,ice=/\s*%%.*\n/gm,ap,IB=(ap=class extends Error{constructor(e){super(e),this.name="UnknownDiagramError"}},l(ap,"UnknownDiagramError"),ap),R0={},y8=l((function(t,e){t=t.replace(NB,"").replace(Cy,"").replace(ice,`
`);for(const[r,{detector:n}]of Object.entries(R0))if(n(t,e))return r;throw new IB(`No diagram type detected matching given configuration for text: ${t}`)}),"detectType"),RB=l(((...t)=>{for(const{id:e,detector:r,loader:n}of t)MB(e,r,n)}),"registerLazyLoadedDiagrams"),MB=l(((t,e,r)=>{R0[t]&&ee.warn(`Detector with key ${t} already exists. Overwriting.`),R0[t]={detector:e,loader:r},ee.debug(`Detector with key ${t} added${r?" with loader":""}`)}),"addDetector"),ace=l((t=>R0[t].loader),"getDiagramLoader"),jT=l(((t,e,{depth:r=2,clobber:n=!1}={})=>{const i={depth:r,clobber:n};return Array.isArray(e)&&!Array.isArray(t)?(e.forEach((a=>jT(t,a,i))),t):Array.isArray(e)&&Array.isArray(t)?(e.forEach((a=>{t.includes(a)||t.push(a)})),t):t===void 0||r<=0?t!=null&&typeof t=="object"&&typeof e=="object"?Object.assign(t,e):e:(e!==void 0&&typeof t=="object"&&typeof e=="object"&&Object.keys(e).forEach((a=>{typeof e[a]!="object"||t[a]!==void 0&&typeof t[a]!="object"?(n||typeof t[a]!="object"&&typeof e[a]!="object")&&(t[a]=e[a]):(t[a]===void 0&&(t[a]=Array.isArray(e[a])?[]:{}),t[a]=jT(t[a],e[a],{depth:r-1,clobber:n}))})),t)}),"assignWithDepth"),On=jT,cb={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:l((t=>t>=255?255:t<0?0:t),"r"),g:l((t=>t>=255?255:t<0?0:t),"g"),b:l((t=>t>=255?255:t<0?0:t),"b"),h:l((t=>t%360),"h"),s:l((t=>t>=100?100:t<0?0:t),"s"),l:l((t=>t>=100?100:t<0?0:t),"l"),a:l((t=>t>=1?1:t<0?0:t),"a")},toLinear:l((t=>{const e=t/255;return t>.03928?Math.pow((e+.055)/1.055,2.4):e/12.92}),"toLinear"),hue2rgb:l(((t,e,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t)),"hue2rgb"),hsl2rgb:l((({h:t,s:e,l:r},n)=>{if(!e)return 2.55*r;t/=360,e/=100;const i=(r/=100)<.5?r*(1+e):r+e-r*e,a=2*r-i;switch(n){case"r":return 255*cb.hue2rgb(a,i,t+1/3);case"g":return 255*cb.hue2rgb(a,i,t);case"b":return 255*cb.hue2rgb(a,i,t-1/3)}}),"hsl2rgb"),rgb2hsl:l((({r:t,g:e,b:r},n)=>{t/=255,e/=255,r/=255;const i=Math.max(t,e,r),a=Math.min(t,e,r),s=(i+a)/2;if(n==="l")return 100*s;if(i===a)return 0;const o=i-a;if(n==="s")return 100*(s>.5?o/(2-i-a):o/(i+a));switch(i){case t:return 60*((e-r)/o+(e<r?6:0));case e:return 60*((r-t)/o+2);case r:return 60*((t-e)/o+4);default:return-1}}),"rgb2hsl")},jt={channel:cb,lang:{clamp:l(((t,e,r)=>e>r?Math.min(e,Math.max(r,t)):Math.min(r,Math.max(e,t))),"clamp"),round:l((t=>Math.round(1e10*t)/1e10),"round")},unit:{dec2hex:l((t=>{const e=Math.round(t).toString(16);return e.length>1?e:`0${e}`}),"dec2hex")}},bl={};for(let t=0;t<=255;t++)bl[t]=jt.unit.dec2hex(t);var DB,WT=0,bh=1,Rc=2,sp,sce=(sp=class{constructor(){this.type=WT}get(){return this.type}set(e){if(this.type&&this.type!==e)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=e}reset(){this.type=WT}is(e){return this.type===e}},l(sp,"Type"),sp),op,oce=(op=class{constructor(e,r){this.color=r,this.changed=!1,this.data=e,this.type=new sce}set(e,r){return this.color=r,this.changed=!1,this.data=e,this.type.type=WT,this}_ensureHSL(){const e=this.data,{h:r,s:n,l:i}=e;r===void 0&&(e.h=jt.channel.rgb2hsl(e,"h")),n===void 0&&(e.s=jt.channel.rgb2hsl(e,"s")),i===void 0&&(e.l=jt.channel.rgb2hsl(e,"l"))}_ensureRGB(){const e=this.data,{r,g:n,b:i}=e;r===void 0&&(e.r=jt.channel.hsl2rgb(e,"r")),n===void 0&&(e.g=jt.channel.hsl2rgb(e,"g")),i===void 0&&(e.b=jt.channel.hsl2rgb(e,"b"))}get r(){const e=this.data,r=e.r;return this.type.is(Rc)||r===void 0?(this._ensureHSL(),jt.channel.hsl2rgb(e,"r")):r}get g(){const e=this.data,r=e.g;return this.type.is(Rc)||r===void 0?(this._ensureHSL(),jt.channel.hsl2rgb(e,"g")):r}get b(){const e=this.data,r=e.b;return this.type.is(Rc)||r===void 0?(this._ensureHSL(),jt.channel.hsl2rgb(e,"b")):r}get h(){const e=this.data,r=e.h;return this.type.is(bh)||r===void 0?(this._ensureRGB(),jt.channel.rgb2hsl(e,"h")):r}get s(){const e=this.data,r=e.s;return this.type.is(bh)||r===void 0?(this._ensureRGB(),jt.channel.rgb2hsl(e,"s")):r}get l(){const e=this.data,r=e.l;return this.type.is(bh)||r===void 0?(this._ensureRGB(),jt.channel.rgb2hsl(e,"l")):r}get a(){return this.data.a}set r(e){this.type.set(bh),this.changed=!0,this.data.r=e}set g(e){this.type.set(bh),this.changed=!0,this.data.g=e}set b(e){this.type.set(bh),this.changed=!0,this.data.b=e}set h(e){this.type.set(Rc),this.changed=!0,this.data.h=e}set s(e){this.type.set(Rc),this.changed=!0,this.data.s=e}set l(e){this.type.set(Rc),this.changed=!0,this.data.l=e}set a(e){this.changed=!0,this.data.a=e}},l(op,"Channels"),op),k6=new oce({r:0,g:0,b:0,a:0},"transparent"),OB={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:l((t=>{if(t.charCodeAt(0)!==35)return;const e=t.match(OB.re);if(!e)return;const r=e[1],n=parseInt(r,16),i=r.length,a=i%4==0,s=i>4,o=s?1:17,u=s?8:4,h=a?0:-1,d=s?255:15;return k6.set({r:(n>>u*(h+3)&d)*o,g:(n>>u*(h+2)&d)*o,b:(n>>u*(h+1)&d)*o,a:a?(n&d)*o/255:1},t)}),"parse"),stringify:l((t=>{const{r:e,g:r,b:n,a:i}=t;return i<1?`#${bl[Math.round(e)]}${bl[Math.round(r)]}${bl[Math.round(n)]}${bl[Math.round(255*i)]}`:`#${bl[Math.round(e)]}${bl[Math.round(r)]}${bl[Math.round(n)]}`}),"stringify")},Sy=OB,ub={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:l((t=>{const e=t.match(ub.hueRe);if(e){const[,r,n]=e;switch(n){case"grad":return jt.channel.clamp.h(.9*parseFloat(r));case"rad":return jt.channel.clamp.h(180*parseFloat(r)/Math.PI);case"turn":return jt.channel.clamp.h(360*parseFloat(r))}}return jt.channel.clamp.h(parseFloat(t))}),"_hue2deg"),parse:l((t=>{const e=t.charCodeAt(0);if(e!==104&&e!==72)return;const r=t.match(ub.re);if(!r)return;const[,n,i,a,s,o]=r;return k6.set({h:ub._hue2deg(n),s:jt.channel.clamp.s(parseFloat(i)),l:jt.channel.clamp.l(parseFloat(a)),a:s?jt.channel.clamp.a(o?parseFloat(s)/100:parseFloat(s)):1},t)}),"parse"),stringify:l((t=>{const{h:e,s:r,l:n,a:i}=t;return i<1?`hsla(${jt.lang.round(e)}, ${jt.lang.round(r)}%, ${jt.lang.round(n)}%, ${i})`:`hsl(${jt.lang.round(e)}, ${jt.lang.round(r)}%, ${jt.lang.round(n)}%)`}),"stringify")},lx=ub,hb={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:l((t=>{t=t.toLowerCase();const e=hb.colors[t];if(e)return Sy.parse(e)}),"parse"),stringify:l((t=>{const e=Sy.stringify(t);for(const r in hb.colors)if(hb.colors[r]===e)return r}),"stringify")},SI=hb,PB={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:l((t=>{const e=t.charCodeAt(0);if(e!==114&&e!==82)return;const r=t.match(PB.re);if(!r)return;const[,n,i,a,s,o,u,h,d]=r;return k6.set({r:jt.channel.clamp.r(i?2.55*parseFloat(n):parseFloat(n)),g:jt.channel.clamp.g(s?2.55*parseFloat(a):parseFloat(a)),b:jt.channel.clamp.b(u?2.55*parseFloat(o):parseFloat(o)),a:h?jt.channel.clamp.a(d?parseFloat(h)/100:parseFloat(h)):1},t)}),"parse"),stringify:l((t=>{const{r:e,g:r,b:n,a:i}=t;return i<1?`rgba(${jt.lang.round(e)}, ${jt.lang.round(r)}, ${jt.lang.round(n)}, ${jt.lang.round(i)})`:`rgb(${jt.lang.round(e)}, ${jt.lang.round(r)}, ${jt.lang.round(n)})`}),"stringify")},cx=PB,Ts={format:{keyword:SI,hex:Sy,rgb:cx,rgba:cx,hsl:lx,hsla:lx},parse:l((t=>{if(typeof t!="string")return t;const e=Sy.parse(t)||cx.parse(t)||lx.parse(t)||SI.parse(t);if(e)return e;throw new Error(`Unsupported color format: "${t}"`)}),"parse"),stringify:l((t=>!t.changed&&t.color?t.color:t.type.is(Rc)||t.data.r===void 0?lx.stringify(t):t.a<1||!Number.isInteger(t.r)||!Number.isInteger(t.g)||!Number.isInteger(t.b)?cx.stringify(t):Sy.stringify(t)),"stringify")},lce=l(((t,e)=>{const r=Ts.parse(t);for(const n in e)r[n]=jt.channel.clamp[n](e[n]);return Ts.stringify(r)}),"change"),BB=lce,cce=l(((t,e,r=0,n=1)=>{if(typeof t!="number")return BB(t,{a:e});const i=k6.set({r:jt.channel.clamp.r(t),g:jt.channel.clamp.g(e),b:jt.channel.clamp.b(r),a:jt.channel.clamp.a(n)});return Ts.stringify(i)}),"rgba"),$l=cce,v8=l(((t,e)=>jt.lang.round(Ts.parse(t)[e])),"channel"),uce=l((t=>{const{r:e,g:r,b:n}=Ts.parse(t),i=.2126*jt.channel.toLinear(e)+.7152*jt.channel.toLinear(r)+.0722*jt.channel.toLinear(n);return jt.lang.round(i)}),"luminance"),hce=uce,dce=l((t=>hce(t)>=.5),"isLight"),hc=l((t=>!dce(t)),"isDark"),$B=l(((t,e,r)=>{const n=Ts.parse(t),i=n[e],a=jt.channel.clamp[e](i+r);return i!==a&&(n[e]=a),Ts.stringify(n)}),"adjustChannel"),bt=l(((t,e)=>$B(t,"l",e)),"lighten"),Lt=l(((t,e)=>$B(t,"l",-e)),"darken"),pce=l(((t,e)=>{const r=Ts.parse(t),n={};for(const i in e)e[i]&&(n[i]=r[i]+e[i]);return BB(t,n)}),"adjust"),Ie=pce,fce=l(((t,e,r=50)=>{const{r:n,g:i,b:a,a:s}=Ts.parse(t),{r:o,g:u,b:h,a:d}=Ts.parse(e),p=r/100,f=2*p-1,g=s-d,m=((f*g==-1?f:(f+g)/(1+f*g))+1)/2,y=1-m;return $l(n*m+o*y,i*m+u*y,a*m+h*y,s*p+d*(1-p))}),"mix"),ut=l(((t,e=100)=>{const r=Ts.parse(t);return r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,fce(r,t,e)}),"invert"),Di=l(((t,e)=>Ie(t,e?{s:-40,l:10}:{s:-40,l:-10})),"mkBorder"),lp,gce=(lp=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||Ie(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||Ie(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||Di(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||Di(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||Di(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||Di(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||ut(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||ut(this.tertiaryColor),this.lineColor=this.lineColor||ut(this.background),this.arrowheadColor=this.arrowheadColor||ut(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?Lt(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||Lt(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||ut(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||bt(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||Lt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Lt(this.mainBkg,10)):(this.rowOdd=this.rowOdd||bt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||bt(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Ie(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Ie(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Ie(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Ie(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Ie(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Ie(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||Ie(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Ie(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Ie(this.primaryColor,{h:330}),this.darkMode)for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScale"+r]=Lt(this["cScale"+r],75);else for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScale"+r]=Lt(this["cScale"+r],25);for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScaleInv"+r]=this["cScaleInv"+r]||ut(this["cScale"+r]);for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this.darkMode?this["cScalePeer"+r]=this["cScalePeer"+r]||bt(this["cScale"+r],10):this["cScalePeer"+r]=this["cScalePeer"+r]||Lt(this["cScale"+r],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScaleLabel"+r]=this["cScaleLabel"+r]||this.scaleLabelColor;const e=this.darkMode?-4:-1;for(let r=0;r<5;r++)this["surface"+r]=this["surface"+r]||Ie(this.mainBkg,{h:180,s:-15,l:e*(5+3*r)}),this["surfacePeer"+r]=this["surfacePeer"+r]||Ie(this.mainBkg,{h:180,s:-15,l:e*(8+3*r)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||Ie(this.primaryColor,{h:64}),this.fillType3=this.fillType3||Ie(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||Ie(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||Ie(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||Ie(this.primaryColor,{h:128}),this.fillType7=this.fillType7||Ie(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||Ie(this.primaryColor,{l:-10}),this.pie5=this.pie5||Ie(this.secondaryColor,{l:-10}),this.pie6=this.pie6||Ie(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||Ie(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||Ie(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||Ie(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||Ie(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||Ie(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||Ie(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Ie(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Ie(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Ie(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Ie(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Ie(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Ie(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||hc(this.quadrant1Fill)?bt(this.quadrant1Fill):Lt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Lt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Ie(this.primaryColor,{h:-30}),this.git4=this.git4||Ie(this.primaryColor,{h:-60}),this.git5=this.git5||Ie(this.primaryColor,{h:-90}),this.git6=this.git6||Ie(this.primaryColor,{h:60}),this.git7=this.git7||Ie(this.primaryColor,{h:120}),this.darkMode?(this.git0=bt(this.git0,25),this.git1=bt(this.git1,25),this.git2=bt(this.git2,25),this.git3=bt(this.git3,25),this.git4=bt(this.git4,25),this.git5=bt(this.git5,25),this.git6=bt(this.git6,25),this.git7=bt(this.git7,25)):(this.git0=Lt(this.git0,25),this.git1=Lt(this.git1,25),this.git2=Lt(this.git2,25),this.git3=Lt(this.git3,25),this.git4=Lt(this.git4,25),this.git5=Lt(this.git5,25),this.git6=Lt(this.git6,25),this.git7=Lt(this.git7,25)),this.gitInv0=this.gitInv0||ut(this.git0),this.gitInv1=this.gitInv1||ut(this.git1),this.gitInv2=this.gitInv2||ut(this.git2),this.gitInv3=this.gitInv3||ut(this.git3),this.gitInv4=this.gitInv4||ut(this.git4),this.gitInv5=this.gitInv5||ut(this.git5),this.gitInv6=this.gitInv6||ut(this.git6),this.gitInv7=this.gitInv7||ut(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||"#ffffff",this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||"#f2f2f2"}calculate(e){if(typeof e!="object")return void this.updateColors();const r=Object.keys(e);r.forEach((n=>{this[n]=e[n]})),this.updateColors(),r.forEach((n=>{this[n]=e[n]}))}},l(lp,"Theme"),lp),mce=l((t=>{const e=new gce;return e.calculate(t),e}),"getThemeVariables"),cp,yce=(cp=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=bt(this.primaryColor,16),this.tertiaryColor=Ie(this.primaryColor,{h:-160}),this.primaryBorderColor=ut(this.background),this.secondaryBorderColor=Di(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Di(this.tertiaryColor,this.darkMode),this.primaryTextColor=ut(this.primaryColor),this.secondaryTextColor=ut(this.secondaryColor),this.tertiaryTextColor=ut(this.tertiaryColor),this.lineColor=ut(this.background),this.textColor=ut(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=bt(ut("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=$l(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=Lt("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=Lt(this.sectionBkgColor,10),this.taskBorderColor=$l(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=$l(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||bt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Lt(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=bt(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=bt(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=bt(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Ie(this.primaryColor,{h:64}),this.fillType3=Ie(this.secondaryColor,{h:64}),this.fillType4=Ie(this.primaryColor,{h:-64}),this.fillType5=Ie(this.secondaryColor,{h:-64}),this.fillType6=Ie(this.primaryColor,{h:128}),this.fillType7=Ie(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Ie(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Ie(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Ie(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Ie(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Ie(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Ie(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Ie(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Ie(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Ie(this.primaryColor,{h:330});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||ut(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScalePeer"+e]=this["cScalePeer"+e]||bt(this["cScale"+e],10);for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||Ie(this.mainBkg,{h:30,s:-30,l:-(4*e-10)}),this["surfacePeer"+e]=this["surfacePeer"+e]||Ie(this.mainBkg,{h:30,s:-30,l:-(4*e-7)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Ie(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Ie(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Ie(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Ie(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Ie(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Ie(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||hc(this.quadrant1Fill)?bt(this.quadrant1Fill):Lt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Lt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=bt(this.secondaryColor,20),this.git1=bt(this.pie2||this.secondaryColor,20),this.git2=bt(this.pie3||this.tertiaryColor,20),this.git3=bt(this.pie4||Ie(this.primaryColor,{h:-30}),20),this.git4=bt(this.pie5||Ie(this.primaryColor,{h:-60}),20),this.git5=bt(this.pie6||Ie(this.primaryColor,{h:-90}),10),this.git6=bt(this.pie7||Ie(this.primaryColor,{h:60}),10),this.git7=bt(this.pie8||Ie(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||ut(this.git0),this.gitInv1=this.gitInv1||ut(this.git1),this.gitInv2=this.gitInv2||ut(this.git2),this.gitInv3=this.gitInv3||ut(this.git3),this.gitInv4=this.gitInv4||ut(this.git4),this.gitInv5=this.gitInv5||ut(this.git5),this.gitInv6=this.gitInv6||ut(this.git6),this.gitInv7=this.gitInv7||ut(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ut(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ut(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||bt(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||bt(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(e){if(typeof e!="object")return void this.updateColors();const r=Object.keys(e);r.forEach((n=>{this[n]=e[n]})),this.updateColors(),r.forEach((n=>{this[n]=e[n]}))}},l(cp,"Theme"),cp),vce=l((t=>{const e=new yce;return e.calculate(t),e}),"getThemeVariables"),up,xce=(up=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=Ie(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=Ie(this.primaryColor,{h:-160}),this.primaryBorderColor=Di(this.primaryColor,this.darkMode),this.secondaryBorderColor=Di(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Di(this.tertiaryColor,this.darkMode),this.primaryTextColor=ut(this.primaryColor),this.secondaryTextColor=ut(this.secondaryColor),this.tertiaryTextColor=ut(this.tertiaryColor),this.lineColor=ut(this.background),this.textColor=ut(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=$l(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Ie(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Ie(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Ie(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Ie(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Ie(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Ie(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Ie(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Ie(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Ie(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Lt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Lt(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=Lt(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||Lt(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||Ie(this["cScale"+e],{h:180});for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||Ie(this.mainBkg,{h:30,l:-(5+5*e)}),this["surfacePeer"+e]=this["surfacePeer"+e]||Ie(this.mainBkg,{h:30,l:-(7+5*e)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||ut(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||ut(this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=bt(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||bt(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||bt(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Ie(this.primaryColor,{h:64}),this.fillType3=Ie(this.secondaryColor,{h:64}),this.fillType4=Ie(this.primaryColor,{h:-64}),this.fillType5=Ie(this.secondaryColor,{h:-64}),this.fillType6=Ie(this.primaryColor,{h:128}),this.fillType7=Ie(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||Ie(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||Ie(this.primaryColor,{l:-10}),this.pie5=this.pie5||Ie(this.secondaryColor,{l:-30}),this.pie6=this.pie6||Ie(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||Ie(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||Ie(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||Ie(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||Ie(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||Ie(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||Ie(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Ie(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Ie(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Ie(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Ie(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Ie(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Ie(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||hc(this.quadrant1Fill)?bt(this.quadrant1Fill):Lt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Ie(this.primaryColor,{h:-30}),this.git4=this.git4||Ie(this.primaryColor,{h:-60}),this.git5=this.git5||Ie(this.primaryColor,{h:-90}),this.git6=this.git6||Ie(this.primaryColor,{h:60}),this.git7=this.git7||Ie(this.primaryColor,{h:120}),this.darkMode?(this.git0=bt(this.git0,25),this.git1=bt(this.git1,25),this.git2=bt(this.git2,25),this.git3=bt(this.git3,25),this.git4=bt(this.git4,25),this.git5=bt(this.git5,25),this.git6=bt(this.git6,25),this.git7=bt(this.git7,25)):(this.git0=Lt(this.git0,25),this.git1=Lt(this.git1,25),this.git2=Lt(this.git2,25),this.git3=Lt(this.git3,25),this.git4=Lt(this.git4,25),this.git5=Lt(this.git5,25),this.git6=Lt(this.git6,25),this.git7=Lt(this.git7,25)),this.gitInv0=this.gitInv0||Lt(ut(this.git0),25),this.gitInv1=this.gitInv1||ut(this.git1),this.gitInv2=this.gitInv2||ut(this.git2),this.gitInv3=this.gitInv3||ut(this.git3),this.gitInv4=this.gitInv4||ut(this.git4),this.gitInv5=this.gitInv5||ut(this.git5),this.gitInv6=this.gitInv6||ut(this.git6),this.gitInv7=this.gitInv7||ut(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ut(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ut(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||"#ffffff",this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||"#f2f2f2"}calculate(e){if(Object.keys(this).forEach((n=>{this[n]==="calculated"&&(this[n]=void 0)})),typeof e!="object")return void this.updateColors();const r=Object.keys(e);r.forEach((n=>{this[n]=e[n]})),this.updateColors(),r.forEach((n=>{this[n]=e[n]}))}},l(up,"Theme"),up),T6=l((t=>{const e=new xce;return e.calculate(t),e}),"getThemeVariables"),hp,bce=(hp=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=bt("#cde498",10),this.primaryBorderColor=Di(this.primaryColor,this.darkMode),this.secondaryBorderColor=Di(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Di(this.tertiaryColor,this.darkMode),this.primaryTextColor=ut(this.primaryColor),this.secondaryTextColor=ut(this.secondaryColor),this.tertiaryTextColor=ut(this.primaryColor),this.lineColor=ut(this.background),this.textColor=ut(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.actorBorder=Lt(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Ie(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Ie(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Ie(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Ie(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Ie(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Ie(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Ie(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Ie(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Ie(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Lt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Lt(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=Lt(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||Lt(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||Ie(this["cScale"+e],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||Ie(this.mainBkg,{h:30,s:-30,l:-(5+5*e)}),this["surfacePeer"+e]=this["surfacePeer"+e]||Ie(this.mainBkg,{h:30,s:-30,l:-(8+5*e)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||bt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||bt(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Ie(this.primaryColor,{h:64}),this.fillType3=Ie(this.secondaryColor,{h:64}),this.fillType4=Ie(this.primaryColor,{h:-64}),this.fillType5=Ie(this.secondaryColor,{h:-64}),this.fillType6=Ie(this.primaryColor,{h:128}),this.fillType7=Ie(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||Ie(this.primaryColor,{l:-30}),this.pie5=this.pie5||Ie(this.secondaryColor,{l:-30}),this.pie6=this.pie6||Ie(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||Ie(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||Ie(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||Ie(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||Ie(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||Ie(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||Ie(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Ie(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Ie(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Ie(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Ie(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Ie(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Ie(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||hc(this.quadrant1Fill)?bt(this.quadrant1Fill):Lt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Ie(this.primaryColor,{h:-30}),this.git4=this.git4||Ie(this.primaryColor,{h:-60}),this.git5=this.git5||Ie(this.primaryColor,{h:-90}),this.git6=this.git6||Ie(this.primaryColor,{h:60}),this.git7=this.git7||Ie(this.primaryColor,{h:120}),this.darkMode?(this.git0=bt(this.git0,25),this.git1=bt(this.git1,25),this.git2=bt(this.git2,25),this.git3=bt(this.git3,25),this.git4=bt(this.git4,25),this.git5=bt(this.git5,25),this.git6=bt(this.git6,25),this.git7=bt(this.git7,25)):(this.git0=Lt(this.git0,25),this.git1=Lt(this.git1,25),this.git2=Lt(this.git2,25),this.git3=Lt(this.git3,25),this.git4=Lt(this.git4,25),this.git5=Lt(this.git5,25),this.git6=Lt(this.git6,25),this.git7=Lt(this.git7,25)),this.gitInv0=this.gitInv0||ut(this.git0),this.gitInv1=this.gitInv1||ut(this.git1),this.gitInv2=this.gitInv2||ut(this.git2),this.gitInv3=this.gitInv3||ut(this.git3),this.gitInv4=this.gitInv4||ut(this.git4),this.gitInv5=this.gitInv5||ut(this.git5),this.gitInv6=this.gitInv6||ut(this.git6),this.gitInv7=this.gitInv7||ut(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ut(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ut(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||"#ffffff",this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||"#f2f2f2"}calculate(e){if(typeof e!="object")return void this.updateColors();const r=Object.keys(e);r.forEach((n=>{this[n]=e[n]})),this.updateColors(),r.forEach((n=>{this[n]=e[n]}))}},l(hp,"Theme"),hp),wce=l((t=>{const e=new bce;return e.calculate(t),e}),"getThemeVariables"),dp,kce=(dp=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=bt(this.contrast,55),this.background="#ffffff",this.tertiaryColor=Ie(this.primaryColor,{h:-160}),this.primaryBorderColor=Di(this.primaryColor,this.darkMode),this.secondaryBorderColor=Di(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Di(this.tertiaryColor,this.darkMode),this.primaryTextColor=ut(this.primaryColor),this.secondaryTextColor=ut(this.secondaryColor),this.tertiaryTextColor=ut(this.tertiaryColor),this.lineColor=ut(this.background),this.textColor=ut(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||bt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=bt(this.contrast,55),this.border2=this.contrast,this.actorBorder=bt(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||ut(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this.darkMode?this["cScalePeer"+e]=this["cScalePeer"+e]||bt(this["cScale"+e],10):this["cScalePeer"+e]=this["cScalePeer"+e]||Lt(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||Ie(this.mainBkg,{l:-(5+5*e)}),this["surfacePeer"+e]=this["surfacePeer"+e]||Ie(this.mainBkg,{l:-(8+5*e)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=bt(this.contrast,30),this.sectionBkgColor2=bt(this.contrast,30),this.taskBorderColor=Lt(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=bt(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=Lt(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Ie(this.primaryColor,{h:64}),this.fillType3=Ie(this.secondaryColor,{h:64}),this.fillType4=Ie(this.primaryColor,{h:-64}),this.fillType5=Ie(this.secondaryColor,{h:-64}),this.fillType6=Ie(this.primaryColor,{h:128}),this.fillType7=Ie(this.secondaryColor,{h:128});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Ie(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Ie(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Ie(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Ie(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Ie(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Ie(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||hc(this.quadrant1Fill)?bt(this.quadrant1Fill):Lt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Lt(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||Ie(this.primaryColor,{h:-30}),this.git4=this.pie5||Ie(this.primaryColor,{h:-60}),this.git5=this.pie6||Ie(this.primaryColor,{h:-90}),this.git6=this.pie7||Ie(this.primaryColor,{h:60}),this.git7=this.pie8||Ie(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||ut(this.git0),this.gitInv1=this.gitInv1||ut(this.git1),this.gitInv2=this.gitInv2||ut(this.git2),this.gitInv3=this.gitInv3||ut(this.git3),this.gitInv4=this.gitInv4||ut(this.git4),this.gitInv5=this.gitInv5||ut(this.git5),this.gitInv6=this.gitInv6||ut(this.git6),this.gitInv7=this.gitInv7||ut(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||"#ffffff",this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||"#f2f2f2"}calculate(e){if(typeof e!="object")return void this.updateColors();const r=Object.keys(e);r.forEach((n=>{this[n]=e[n]})),this.updateColors(),r.forEach((n=>{this[n]=e[n]}))}},l(dp,"Theme"),dp),Mo={base:{getThemeVariables:mce},dark:{getThemeVariables:vce},default:{getThemeVariables:T6},forest:{getThemeVariables:wce},neutral:{getThemeVariables:l((t=>{const e=new kce;return e.calculate(t),e}),"getThemeVariables")}},fo={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},FB={...fo,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF"},themeCSS:void 0,themeVariables:Mo.default.getThemeVariables(),sequence:{...fo.sequence,messageFont:l((function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}}),"messageFont"),noteFont:l((function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}}),"noteFont"),actorFont:l((function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}),"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...fo.gantt,tickInterval:void 0,useWidth:void 0},c4:{...fo.c4,useWidth:void 0,personFont:l((function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}}),"personFont"),external_personFont:l((function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}}),"external_personFont"),systemFont:l((function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}}),"systemFont"),external_systemFont:l((function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}}),"external_systemFont"),system_dbFont:l((function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}}),"system_dbFont"),external_system_dbFont:l((function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}}),"external_system_dbFont"),system_queueFont:l((function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}}),"system_queueFont"),external_system_queueFont:l((function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}}),"external_system_queueFont"),containerFont:l((function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}}),"containerFont"),external_containerFont:l((function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}}),"external_containerFont"),container_dbFont:l((function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}}),"container_dbFont"),external_container_dbFont:l((function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}}),"external_container_dbFont"),container_queueFont:l((function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}}),"container_queueFont"),external_container_queueFont:l((function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}}),"external_container_queueFont"),componentFont:l((function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}}),"componentFont"),external_componentFont:l((function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}}),"external_componentFont"),component_dbFont:l((function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}}),"component_dbFont"),external_component_dbFont:l((function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}}),"external_component_dbFont"),component_queueFont:l((function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}}),"component_queueFont"),external_component_queueFont:l((function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}}),"external_component_queueFont"),boundaryFont:l((function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}}),"boundaryFont"),messageFont:l((function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}}),"messageFont")},pie:{...fo.pie,useWidth:984},xyChart:{...fo.xyChart,useWidth:void 0},requirement:{...fo.requirement,useWidth:void 0},packet:{...fo.packet},radar:{...fo.radar}},zB=l(((t,e="")=>Object.keys(t).reduce(((r,n)=>Array.isArray(t[n])?r:typeof t[n]=="object"&&t[n]!==null?[...r,e+n,...zB(t[n],"")]:[...r,e+n]),[])),"keyify"),Tce=new Set(zB(FB,"")),or=FB,w4=l((t=>{if(ee.debug("sanitizeDirective called with",t),typeof t=="object"&&t!=null)if(Array.isArray(t))t.forEach((e=>w4(e)));else{for(const e of Object.keys(t)){if(ee.debug("Checking key",e),e.startsWith("__")||e.includes("proto")||e.includes("constr")||!Tce.has(e)||t[e]==null){ee.debug("sanitize deleting key: ",e),delete t[e];continue}if(typeof t[e]=="object"){ee.debug("sanitizing object",e),w4(t[e]);continue}const r=["themeCSS","fontFamily","altFontFamily"];for(const n of r)e.includes(n)&&(ee.debug("sanitizing css option",e),t[e]=Ece(t[e]))}if(t.themeVariables)for(const e of Object.keys(t.themeVariables)){const r=t.themeVariables[e];r?.match&&!r.match(/^[\d "#%(),.;A-Za-z]+$/)&&(t.themeVariables[e]="")}ee.debug("After sanitization",t)}}),"sanitizeDirective"),Ece=l((t=>{let e=0,r=0;for(const n of t){if(e<r)return"{ /* ERROR: Unbalanced CSS */ }";n==="{"?e++:n==="}"&&r++}return e!==r?"{ /* ERROR: Unbalanced CSS */ }":t}),"sanitizeCss"),M0=Object.freeze(or),Ji=On({},M0),a2=[],k4=On({},M0),E6=l(((t,e)=>{let r=On({},t),n={};for(const i of e)qB(i),n=On(n,i);if(r=On(r,n),n.theme&&n.theme in Mo){const i=On({},DB),a=On(i.themeVariables||{},n.themeVariables);r.theme&&r.theme in Mo&&(r.themeVariables=Mo[r.theme].getThemeVariables(a))}return jB(k4=r),k4}),"updateCurrentConfig"),_ce=l((t=>(Ji=On({},M0),Ji=On(Ji,t),t.theme&&Mo[t.theme]&&(Ji.themeVariables=Mo[t.theme].getThemeVariables(t.themeVariables)),E6(Ji,a2),Ji)),"setSiteConfig"),Cce=l((t=>{DB=On({},t)}),"saveConfigFromInitialize"),Sce=l((t=>(Ji=On(Ji,t),E6(Ji,a2),Ji)),"updateSiteConfig"),GB=l((()=>On({},Ji)),"getSiteConfig"),UB=l((t=>(jB(t),On(k4,t),Sr())),"setConfig"),Sr=l((()=>On({},k4)),"getConfig"),qB=l((t=>{t&&(["secure",...Ji.secure??[]].forEach((e=>{Object.hasOwn(t,e)&&(ee.debug(`Denied attempt to modify a secure key ${e}`,t[e]),delete t[e])})),Object.keys(t).forEach((e=>{e.startsWith("__")&&delete t[e]})),Object.keys(t).forEach((e=>{typeof t[e]=="string"&&(t[e].includes("<")||t[e].includes(">")||t[e].includes("url(data:"))&&delete t[e],typeof t[e]=="object"&&qB(t[e])})))}),"sanitize"),Ace=l((t=>{w4(t),t.fontFamily&&!t.themeVariables?.fontFamily&&(t.themeVariables={...t.themeVariables,fontFamily:t.fontFamily}),a2.push(t),E6(Ji,a2)}),"addDirective"),T4=l(((t=Ji)=>{E6(t,a2=[])}),"reset"),Lce={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},AI={},Nce=l((t=>{AI[t]||(ee.warn(Lce[t]),AI[t]=!0)}),"issueWarning"),jB=l((t=>{t&&(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&Nce("LAZY_LOAD_DEPRECATED")}),"checkConfig"),{entries:WB,setPrototypeOf:LI,isFrozen:Ice,getPrototypeOf:Rce,getOwnPropertyDescriptor:Mce}=Object,{freeze:Gi,seal:Za,create:YB}=Object,{apply:YT,construct:VT}=typeof Reflect<"u"&&Reflect;Gi||(Gi=l((function(t){return t}),"freeze")),Za||(Za=l((function(t){return t}),"seal")),YT||(YT=l((function(t,e,r){return t.apply(e,r)}),"apply")),VT||(VT=l((function(t,e){return new t(...e)}),"construct"));var ux=Ti(Array.prototype.forEach),Dce=Ti(Array.prototype.lastIndexOf),NI=Ti(Array.prototype.pop),_m=Ti(Array.prototype.push),Oce=Ti(Array.prototype.splice),db=Ti(String.prototype.toLowerCase),bk=Ti(String.prototype.toString),II=Ti(String.prototype.match),Cm=Ti(String.prototype.replace),Pce=Ti(String.prototype.indexOf),Bce=Ti(String.prototype.trim),ls=Ti(Object.prototype.hasOwnProperty),Si=Ti(RegExp.prototype.test),Sm=VB(TypeError);function Ti(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return YT(t,e,n)}}function VB(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return VT(t,r)}}function tr(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:db;LI&&LI(t,null);let n=e.length;for(;n--;){let i=e[n];if(typeof i=="string"){const a=r(i);a!==i&&(Ice(e)||(e[n]=a),i=a)}t[i]=!0}return t}function HB(t){for(let e=0;e<t.length;e++)ls(t,e)||(t[e]=null);return t}function El(t){const e=YB(null);for(const[r,n]of WB(t))ls(t,r)&&(Array.isArray(n)?e[r]=HB(n):n&&typeof n=="object"&&n.constructor===Object?e[r]=El(n):e[r]=n);return e}function Rh(t,e){for(;t!==null;){const n=Mce(t,e);if(n){if(n.get)return Ti(n.get);if(typeof n.value=="function")return Ti(n.value)}t=Rce(t)}function r(){return null}return l(r,"fallbackValue"),r}l(Ti,"unapply"),l(VB,"unconstruct"),l(tr,"addToSet"),l(HB,"cleanArray"),l(El,"clone"),l(Rh,"lookupGetter");var RI=Gi(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),wk=Gi(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),kk=Gi(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),$ce=Gi(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Tk=Gi(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Fce=Gi(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),MI=Gi(["#text"]),DI=Gi(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Ek=Gi(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),OI=Gi(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),hx=Gi(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),zce=Za(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Gce=Za(/<%[\w\W]*|[\w\W]*%>/gm),Uce=Za(/\$\{[\w\W]*/gm),qce=Za(/^data-[\-\w.\u00B7-\uFFFF]+$/),jce=Za(/^aria-[\-\w]+$/),XB=Za(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Wce=Za(/^(?:\w+script|data):/i),Yce=Za(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),KB=Za(/^html$/i),Vce=Za(/^[a-z][.\w]*(-[.\w]+)+$/i),PI=Object.freeze({__proto__:null,ARIA_ATTR:jce,ATTR_WHITESPACE:Yce,CUSTOM_ELEMENT:Vce,DATA_ATTR:qce,DOCTYPE_NAME:KB,ERB_EXPR:Gce,IS_ALLOWED_URI:XB,IS_SCRIPT_OR_DATA:Wce,MUSTACHE_EXPR:zce,TMPLIT_EXPR:Uce}),Hce=1,Xce=3,Kce=7,Zce=8,Qce=9,Jce=l((function(){return typeof window>"u"?null:window}),"getGlobal"),eue=l((function(t,e){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const n="data-tt-policy-suffix";e&&e.hasAttribute(n)&&(r=e.getAttribute(n));const i="dompurify"+(r?"#"+r:"");try{return t.createPolicy(i,{createHTML:a=>a,createScriptURL:a=>a})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}}),"_createTrustedTypesPolicy"),BI=l((function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}}),"_createHooksMap");function x8(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Jce();const e=l((xe=>x8(xe)),"DOMPurify");if(e.version="3.2.4",e.removed=[],!t||!t.document||t.document.nodeType!==Qce||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const n=r,i=n.currentScript,{DocumentFragment:a,HTMLTemplateElement:s,Node:o,Element:u,NodeFilter:h,NamedNodeMap:d=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:p,DOMParser:f,trustedTypes:g}=t,m=u.prototype,y=Rh(m,"cloneNode"),v=Rh(m,"remove"),x=Rh(m,"nextSibling"),b=Rh(m,"childNodes"),w=Rh(m,"parentNode");if(typeof s=="function"){const xe=r.createElement("template");xe.content&&xe.content.ownerDocument&&(r=xe.content.ownerDocument)}let T,k="";const{implementation:C,createNodeIterator:E,createDocumentFragment:_,getElementsByTagName:S}=r,{importNode:N}=n;let O=BI();e.isSupported=typeof WB=="function"&&typeof w=="function"&&C&&C.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:B,ERB_EXPR:L,TMPLIT_EXPR:I,DATA_ATTR:A,ARIA_ATTR:M,IS_SCRIPT_OR_DATA:D,ATTR_WHITESPACE:R,CUSTOM_ELEMENT:P}=PI;let{IS_ALLOWED_URI:$}=PI,z=null;const q=tr({},[...RI,...wk,...kk,...Tk,...MI]);let W=null;const Q=tr({},[...DI,...Ek,...OI,...hx]);let te=Object.seal(YB(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),oe=null,re=null,H=!0,K=!0,ie=!1,ne=!0,J=!1,ue=!0,Y=!1,se=!1,de=!1,ce=!1,Ee=!1,ve=!1,De=!0,Ue=!1;const ze="user-content-";let Ge=!0,$e=!1,Pe={},j=null;const pe=tr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let X=null;const ge=tr({},["audio","video","img","source","image","track"]);let G=null;const le=tr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),V="http://www.w3.org/1998/Math/MathML",me="http://www.w3.org/2000/svg",he="http://www.w3.org/1999/xhtml";let _e=he,Ce=!1,Te=null;const Re=tr({},[V,me,he],bk);let Le=tr({},["mi","mo","mn","ms","mtext"]),ot=tr({},["annotation-xml"]);const Tt=tr({},["title","style","font","a","script"]);let Fe=null;const gt=["application/xhtml+xml","text/html"],Qe="text/html";let Be=null,rt=null;const lt=r.createElement("form"),Je=l((function(xe){return xe instanceof RegExp||xe instanceof Function}),"isRegexOrFunction"),_t=l((function(){let xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!rt||rt!==xe){if(xe&&typeof xe=="object"||(xe={}),xe=El(xe),Fe=gt.indexOf(xe.PARSER_MEDIA_TYPE)===-1?Qe:xe.PARSER_MEDIA_TYPE,Be=Fe==="application/xhtml+xml"?bk:db,z=ls(xe,"ALLOWED_TAGS")?tr({},xe.ALLOWED_TAGS,Be):q,W=ls(xe,"ALLOWED_ATTR")?tr({},xe.ALLOWED_ATTR,Be):Q,Te=ls(xe,"ALLOWED_NAMESPACES")?tr({},xe.ALLOWED_NAMESPACES,bk):Re,G=ls(xe,"ADD_URI_SAFE_ATTR")?tr(El(le),xe.ADD_URI_SAFE_ATTR,Be):le,X=ls(xe,"ADD_DATA_URI_TAGS")?tr(El(ge),xe.ADD_DATA_URI_TAGS,Be):ge,j=ls(xe,"FORBID_CONTENTS")?tr({},xe.FORBID_CONTENTS,Be):pe,oe=ls(xe,"FORBID_TAGS")?tr({},xe.FORBID_TAGS,Be):{},re=ls(xe,"FORBID_ATTR")?tr({},xe.FORBID_ATTR,Be):{},Pe=!!ls(xe,"USE_PROFILES")&&xe.USE_PROFILES,H=xe.ALLOW_ARIA_ATTR!==!1,K=xe.ALLOW_DATA_ATTR!==!1,ie=xe.ALLOW_UNKNOWN_PROTOCOLS||!1,ne=xe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,J=xe.SAFE_FOR_TEMPLATES||!1,ue=xe.SAFE_FOR_XML!==!1,Y=xe.WHOLE_DOCUMENT||!1,ce=xe.RETURN_DOM||!1,Ee=xe.RETURN_DOM_FRAGMENT||!1,ve=xe.RETURN_TRUSTED_TYPE||!1,de=xe.FORCE_BODY||!1,De=xe.SANITIZE_DOM!==!1,Ue=xe.SANITIZE_NAMED_PROPS||!1,Ge=xe.KEEP_CONTENT!==!1,$e=xe.IN_PLACE||!1,$=xe.ALLOWED_URI_REGEXP||XB,_e=xe.NAMESPACE||he,Le=xe.MATHML_TEXT_INTEGRATION_POINTS||Le,ot=xe.HTML_INTEGRATION_POINTS||ot,te=xe.CUSTOM_ELEMENT_HANDLING||{},xe.CUSTOM_ELEMENT_HANDLING&&Je(xe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(te.tagNameCheck=xe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),xe.CUSTOM_ELEMENT_HANDLING&&Je(xe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(te.attributeNameCheck=xe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),xe.CUSTOM_ELEMENT_HANDLING&&typeof xe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(te.allowCustomizedBuiltInElements=xe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),J&&(K=!1),Ee&&(ce=!0),Pe&&(z=tr({},MI),W=[],Pe.html===!0&&(tr(z,RI),tr(W,DI)),Pe.svg===!0&&(tr(z,wk),tr(W,Ek),tr(W,hx)),Pe.svgFilters===!0&&(tr(z,kk),tr(W,Ek),tr(W,hx)),Pe.mathMl===!0&&(tr(z,Tk),tr(W,OI),tr(W,hx))),xe.ADD_TAGS&&(z===q&&(z=El(z)),tr(z,xe.ADD_TAGS,Be)),xe.ADD_ATTR&&(W===Q&&(W=El(W)),tr(W,xe.ADD_ATTR,Be)),xe.ADD_URI_SAFE_ATTR&&tr(G,xe.ADD_URI_SAFE_ATTR,Be),xe.FORBID_CONTENTS&&(j===pe&&(j=El(j)),tr(j,xe.FORBID_CONTENTS,Be)),Ge&&(z["#text"]=!0),Y&&tr(z,["html","head","body"]),z.table&&(tr(z,["tbody"]),delete oe.tbody),xe.TRUSTED_TYPES_POLICY){if(typeof xe.TRUSTED_TYPES_POLICY.createHTML!="function")throw Sm('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof xe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Sm('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');T=xe.TRUSTED_TYPES_POLICY,k=T.createHTML("")}else T===void 0&&(T=eue(g,i)),T!==null&&typeof k=="string"&&(k=T.createHTML(""));Gi&&Gi(xe),rt=xe}}),"_parseConfig"),it=tr({},[...wk,...kk,...$ce]),pt=tr({},[...Tk,...Fce]),Ye=l((function(xe){let Ke=w(xe);Ke&&Ke.tagName||(Ke={namespaceURI:_e,tagName:"template"});const Xe=db(xe.tagName),Xt=db(Ke.tagName);return!!Te[xe.namespaceURI]&&(xe.namespaceURI===me?Ke.namespaceURI===he?Xe==="svg":Ke.namespaceURI===V?Xe==="svg"&&(Xt==="annotation-xml"||Le[Xt]):!!it[Xe]:xe.namespaceURI===V?Ke.namespaceURI===he?Xe==="math":Ke.namespaceURI===me?Xe==="math"&&ot[Xt]:!!pt[Xe]:xe.namespaceURI===he?!(Ke.namespaceURI===me&&!ot[Xt])&&!(Ke.namespaceURI===V&&!Le[Xt])&&!pt[Xe]&&(Tt[Xe]||!it[Xe]):!(Fe!=="application/xhtml+xml"||!Te[xe.namespaceURI]))}),"_checkValidNamespace"),je=l((function(xe){_m(e.removed,{element:xe});try{w(xe).removeChild(xe)}catch{v(xe)}}),"_forceRemove"),mt=l((function(xe,Ke){try{_m(e.removed,{attribute:Ke.getAttributeNode(xe),from:Ke})}catch{_m(e.removed,{attribute:null,from:Ke})}if(Ke.removeAttribute(xe),xe==="is")if(ce||Ee)try{je(Ke)}catch{}else try{Ke.setAttribute(xe,"")}catch{}}),"_removeAttribute"),at=l((function(xe){let Ke=null,Xe=null;if(de)xe="<remove></remove>"+xe;else{const ir=II(xe,/^[\r\n\t ]+/);Xe=ir&&ir[0]}Fe==="application/xhtml+xml"&&_e===he&&(xe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+xe+"</body></html>");const Xt=T?T.createHTML(xe):xe;if(_e===he)try{Ke=new f().parseFromString(Xt,Fe)}catch{}if(!Ke||!Ke.documentElement){Ke=C.createDocument(_e,"template",null);try{Ke.documentElement.innerHTML=Ce?k:Xt}catch{}}const Tr=Ke.body||Ke.documentElement;return xe&&Xe&&Tr.insertBefore(r.createTextNode(Xe),Tr.childNodes[0]||null),_e===he?S.call(Ke,Y?"html":"body")[0]:Y?Ke.documentElement:Tr}),"_initDocument"),Et=l((function(xe){return E.call(xe.ownerDocument||xe,xe,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)}),"_createNodeIterator"),xt=l((function(xe){return xe instanceof p&&(typeof xe.nodeName!="string"||typeof xe.textContent!="string"||typeof xe.removeChild!="function"||!(xe.attributes instanceof d)||typeof xe.removeAttribute!="function"||typeof xe.setAttribute!="function"||typeof xe.namespaceURI!="string"||typeof xe.insertBefore!="function"||typeof xe.hasChildNodes!="function")}),"_isClobbered"),rn=l((function(xe){return typeof o=="function"&&xe instanceof o}),"_isNode");function wt(xe,Ke,Xe){ux(xe,(Xt=>{Xt.call(e,Ke,Xe,rt)}))}l(wt,"_executeHooks");const dn=l((function(xe){let Ke=null;if(wt(O.beforeSanitizeElements,xe,null),xt(xe))return je(xe),!0;const Xe=Be(xe.nodeName);if(wt(O.uponSanitizeElement,xe,{tagName:Xe,allowedTags:z}),xe.hasChildNodes()&&!rn(xe.firstElementChild)&&Si(/<[/\w]/g,xe.innerHTML)&&Si(/<[/\w]/g,xe.textContent)||xe.nodeType===Kce||ue&&xe.nodeType===Zce&&Si(/<[/\w]/g,xe.data))return je(xe),!0;if(!z[Xe]||oe[Xe]){if(!oe[Xe]&&Ht(Xe)&&(te.tagNameCheck instanceof RegExp&&Si(te.tagNameCheck,Xe)||te.tagNameCheck instanceof Function&&te.tagNameCheck(Xe)))return!1;if(Ge&&!j[Xe]){const Xt=w(xe)||xe.parentNode,Tr=b(xe)||xe.childNodes;if(Tr&&Xt)for(let ir=Tr.length-1;ir>=0;--ir){const Yi=y(Tr[ir],!0);Yi.__removalCount=(xe.__removalCount||0)+1,Xt.insertBefore(Yi,x(xe))}}return je(xe),!0}return xe instanceof u&&!Ye(xe)?(je(xe),!0):Xe!=="noscript"&&Xe!=="noembed"&&Xe!=="noframes"||!Si(/<\/no(script|embed|frames)/i,xe.innerHTML)?(J&&xe.nodeType===Xce&&(Ke=xe.textContent,ux([B,L,I],(Xt=>{Ke=Cm(Ke,Xt," ")})),xe.textContent!==Ke&&(_m(e.removed,{element:xe.cloneNode()}),xe.textContent=Ke)),wt(O.afterSanitizeElements,xe,null),!1):(je(xe),!0)}),"_sanitizeElements"),gr=l((function(xe,Ke,Xe){if(De&&(Ke==="id"||Ke==="name")&&(Xe in r||Xe in lt))return!1;if(!(K&&!re[Ke]&&Si(A,Ke))){if(!(H&&Si(M,Ke))){if(!W[Ke]||re[Ke]){if(!(Ht(xe)&&(te.tagNameCheck instanceof RegExp&&Si(te.tagNameCheck,xe)||te.tagNameCheck instanceof Function&&te.tagNameCheck(xe))&&(te.attributeNameCheck instanceof RegExp&&Si(te.attributeNameCheck,Ke)||te.attributeNameCheck instanceof Function&&te.attributeNameCheck(Ke))||Ke==="is"&&te.allowCustomizedBuiltInElements&&(te.tagNameCheck instanceof RegExp&&Si(te.tagNameCheck,Xe)||te.tagNameCheck instanceof Function&&te.tagNameCheck(Xe))))return!1}else if(!G[Ke]){if(!Si($,Cm(Xe,R,""))){if((Ke!=="src"&&Ke!=="xlink:href"&&Ke!=="href"||xe==="script"||Pce(Xe,"data:")!==0||!X[xe])&&!(ie&&!Si(D,Cm(Xe,R,"")))){if(Xe)return!1}}}}}return!0}),"_isValidAttribute"),Ht=l((function(xe){return xe!=="annotation-xml"&&II(xe,P)}),"_isBasicCustomElement"),nn=l((function(xe){wt(O.beforeSanitizeAttributes,xe,null);const{attributes:Ke}=xe;if(!Ke||xt(xe))return;const Xe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:W,forceKeepAttr:void 0};let Xt=Ke.length;for(;Xt--;){const Tr=Ke[Xt],{name:ir,namespaceURI:Yi,value:Xr}=Tr,ti=Be(ir);let fn=ir==="value"?Xr:Bce(Xr);if(Xe.attrName=ti,Xe.attrValue=fn,Xe.keepAttr=!0,Xe.forceKeepAttr=void 0,wt(O.uponSanitizeAttribute,xe,Xe),fn=Xe.attrValue,!Ue||ti!=="id"&&ti!=="name"||(mt(ir,xe),fn=ze+fn),ue&&Si(/((--!?|])>)|<\/(style|title)/i,fn)){mt(ir,xe);continue}if(Xe.forceKeepAttr||(mt(ir,xe),!Xe.keepAttr))continue;if(!ne&&Si(/\/>/i,fn)){mt(ir,xe);continue}J&&ux([B,L,I],(Kt=>{fn=Cm(fn,Kt," ")}));const Dt=Be(xe.nodeName);if(gr(Dt,ti,fn)){if(T&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!Yi)switch(g.getAttributeType(Dt,ti)){case"TrustedHTML":fn=T.createHTML(fn);break;case"TrustedScriptURL":fn=T.createScriptURL(fn)}try{Yi?xe.setAttributeNS(Yi,ir,fn):xe.setAttribute(ir,fn),xt(xe)?je(xe):NI(e.removed)}catch{}}}wt(O.afterSanitizeAttributes,xe,null)}),"_sanitizeAttributes"),pn=l((function xe(Ke){let Xe=null;const Xt=Et(Ke);for(wt(O.beforeSanitizeShadowDOM,Ke,null);Xe=Xt.nextNode();)wt(O.uponSanitizeShadowNode,Xe,null),dn(Xe),nn(Xe),Xe.content instanceof a&&xe(Xe.content);wt(O.afterSanitizeShadowDOM,Ke,null)}),"_sanitizeShadowDOM");return e.sanitize=function(xe){let Ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Xe=null,Xt=null,Tr=null,ir=null;if(Ce=!xe,Ce&&(xe="<!-->"),typeof xe!="string"&&!rn(xe)){if(typeof xe.toString!="function")throw Sm("toString is not a function");if(typeof(xe=xe.toString())!="string")throw Sm("dirty is not a string, aborting")}if(!e.isSupported)return xe;if(se||_t(Ke),e.removed=[],typeof xe=="string"&&($e=!1),$e){if(xe.nodeName){const ti=Be(xe.nodeName);if(!z[ti]||oe[ti])throw Sm("root node is forbidden and cannot be sanitized in-place")}}else if(xe instanceof o)Xe=at("<!---->"),Xt=Xe.ownerDocument.importNode(xe,!0),Xt.nodeType===Hce&&Xt.nodeName==="BODY"||Xt.nodeName==="HTML"?Xe=Xt:Xe.appendChild(Xt);else{if(!ce&&!J&&!Y&&xe.indexOf("<")===-1)return T&&ve?T.createHTML(xe):xe;if(Xe=at(xe),!Xe)return ce?null:ve?k:""}Xe&&de&&je(Xe.firstChild);const Yi=Et($e?xe:Xe);for(;Tr=Yi.nextNode();)dn(Tr),nn(Tr),Tr.content instanceof a&&pn(Tr.content);if($e)return xe;if(ce){if(Ee)for(ir=_.call(Xe.ownerDocument);Xe.firstChild;)ir.appendChild(Xe.firstChild);else ir=Xe;return(W.shadowroot||W.shadowrootmode)&&(ir=N.call(n,ir,!0)),ir}let Xr=Y?Xe.outerHTML:Xe.innerHTML;return Y&&z["!doctype"]&&Xe.ownerDocument&&Xe.ownerDocument.doctype&&Xe.ownerDocument.doctype.name&&Si(KB,Xe.ownerDocument.doctype.name)&&(Xr="<!DOCTYPE "+Xe.ownerDocument.doctype.name+`>
`+Xr),J&&ux([B,L,I],(ti=>{Xr=Cm(Xr,ti," ")})),T&&ve?T.createHTML(Xr):Xr},e.setConfig=function(){let xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_t(xe),se=!0},e.clearConfig=function(){rt=null,se=!1},e.isValidAttribute=function(xe,Ke,Xe){rt||_t({});const Xt=Be(xe),Tr=Be(Ke);return gr(Xt,Tr,Xe)},e.addHook=function(xe,Ke){typeof Ke=="function"&&_m(O[xe],Ke)},e.removeHook=function(xe,Ke){if(Ke!==void 0){const Xe=Dce(O[xe],Ke);return Xe===-1?void 0:Oce(O[xe],Xe,1)[0]}return NI(O[xe])},e.removeHooks=function(xe){O[xe]=[]},e.removeAllHooks=function(){O=BI()},e}l(x8,"createDOMPurify");var D0=x8(),im=/<br\s*\/?>/gi,tue=l((t=>t?JB(t).replace(/\\n/g,"#br#").split("#br#"):[""]),"getRows"),rue=(()=>{let t=!1;return()=>{t||(ZB(),t=!0)}})();function ZB(){const t="data-temp-href-target";D0.addHook("beforeSanitizeAttributes",(e=>{e instanceof Element&&e.tagName==="A"&&e.hasAttribute("target")&&e.setAttribute(t,e.getAttribute("target")??"")})),D0.addHook("afterSanitizeAttributes",(e=>{e instanceof Element&&e.tagName==="A"&&e.hasAttribute(t)&&(e.setAttribute("target",e.getAttribute(t)??""),e.removeAttribute(t),e.getAttribute("target")==="_blank"&&e.setAttribute("rel","noopener"))}))}l(ZB,"setupDompurifyHooks");var QB=l((t=>(rue(),D0.sanitize(t))),"removeScript"),$I=l(((t,e)=>{if(e.flowchart?.htmlLabels!==!1){const r=e.securityLevel;r==="antiscript"||r==="strict"?t=QB(t):r!=="loose"&&(t=(t=(t=JB(t)).replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/=/g,"&equals;"),t=sue(t))}return t}),"sanitizeMore"),Ir=l(((t,e)=>t&&(t=e.dompurifyConfig?D0.sanitize($I(t,e),e.dompurifyConfig).toString():D0.sanitize($I(t,e),{FORBID_TAGS:["style"]}).toString())),"sanitizeText"),nue=l(((t,e)=>typeof t=="string"?Ir(t,e):t.flat().map((r=>Ir(r,e)))),"sanitizeTextOrArray"),iue=l((t=>im.test(t)),"hasBreaks"),aue=l((t=>t.split(im)),"splitBreaks"),sue=l((t=>t.replace(/#br#/g,"<br/>")),"placeholderToBreak"),JB=l((t=>t.replace(im,"#br#")),"breakToPlaceholder"),oue=l((t=>{let e="";return t&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=e.replaceAll(/\(/g,"\\("),e=e.replaceAll(/\)/g,"\\)")),e}),"getUrl"),Cr=l((t=>t!==!1&&!["false","null","0"].includes(String(t).trim().toLowerCase())),"evaluate"),lue=l((function(...t){const e=t.filter((r=>!isNaN(r)));return Math.max(...e)}),"getMax"),cue=l((function(...t){const e=t.filter((r=>!isNaN(r)));return Math.min(...e)}),"getMin"),_l=l((function(t){const e=t.split(/(,)/),r=[];for(let n=0;n<e.length;n++){let i=e[n];if(i===","&&n>0&&n+1<e.length){const a=e[n-1],s=e[n+1];uue(a,s)&&(i=a+","+s,n++,r.pop())}r.push(hue(i))}return r.join("")}),"parseGenericTypes"),HT=l(((t,e)=>Math.max(0,t.split(e).length-1)),"countOccurrence"),uue=l(((t,e)=>{const r=HT(t,"~"),n=HT(e,"~");return r===1&&n===1}),"shouldCombineSets"),hue=l((t=>{const e=HT(t,"~");let r=!1;if(e<=1)return t;e%2!=0&&t.startsWith("~")&&(t=t.substring(1),r=!0);const n=[...t];let i=n.indexOf("~"),a=n.lastIndexOf("~");for(;i!==-1&&a!==-1&&i!==a;)n[i]="<",n[a]=">",i=n.indexOf("~"),a=n.lastIndexOf("~");return r&&n.unshift("~"),n.join("")}),"processSet"),FI=l((()=>window.MathMLElement!==void 0),"isMathMLSupported"),XT=/\$\$(.*)\$\$/g,Ei=l((t=>(t.match(XT)?.length??0)>0),"hasKatex"),hv=l((async(t,e)=>{t=await dv(t,e);const r=document.createElement("div");r.innerHTML=t,r.id="katex-temp",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0",document.querySelector("body")?.insertAdjacentElement("beforeend",r);const n={width:r.clientWidth,height:r.clientHeight};return r.remove(),n}),"calculateMathMLDimensions"),dv=l((async(t,e)=>{if(!Ei(t))return t;if(!(FI()||e.legacyMathML||e.forceLegacyMathML))return t.replace(XT,"MathML is unsupported in this environment.");const{default:r}=await Promise.resolve().then((function(){return iye})),n=e.forceLegacyMathML||!FI()&&e.legacyMathML?"htmlAndMathml":"mathml";return t.split(im).map((i=>Ei(i)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${i}</div>`:`<div>${i}</div>`)).join("").replace(XT,((i,a)=>r.renderToString(a,{throwOnError:!0,displayMode:!0,output:n}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,"")))}),"renderKatex"),He={getRows:tue,sanitizeText:Ir,sanitizeTextOrArray:nue,hasBreaks:iue,splitBreaks:aue,lineBreakRegex:im,removeScript:QB,getUrl:oue,evaluate:Cr,getMax:lue,getMin:cue},due=l((function(t,e){for(let r of e)t.attr(r[0],r[1])}),"d3Attrs"),pue=l((function(t,e,r){let n=new Map;return r?(n.set("width","100%"),n.set("style",`max-width: ${e}px;`)):(n.set("height",t),n.set("width",e)),n}),"calculateSvgSizeAttrs"),da=l((function(t,e,r,n){const i=pue(e,r,n);due(t,i)}),"configureSvgSize"),am=l((function(t,e,r,n){const i=e.node().getBBox(),a=i.width,s=i.height;ee.info(`SVG bounds: ${a}x${s}`,i);let o=0,u=0;ee.info(`Graph bounds: ${o}x${u}`,t),o=a+2*r,u=s+2*r,ee.info(`Calculated bounds: ${o}x${u}`),da(e,u,o,n);const h=`${i.x-r} ${i.y-r} ${i.width+2*r} ${i.height+2*r}`;e.attr("viewBox",h)}),"setupGraphViewbox"),pb={},fue=l(((t,e,r)=>{let n="";return t in pb&&pb[t]?n=pb[t](r):ee.warn(`No theme found for ${t}`),` & {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
    fill: ${r.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${r.errorBkgColor};
  }
  & .error-text {
    fill: ${r.errorTextColor};
    stroke: ${r.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${r.lineColor};
    stroke: ${r.lineColor};
  }
  & .marker.cross {
    stroke: ${r.lineColor};
  }

  & svg {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
  }
   & p {
    margin: 0
   }

  ${n}

  ${e}
`}),"getStyles"),gue=l(((t,e)=>{e!==void 0&&(pb[t]=e)}),"addStylesForDiagram"),mue=fue,b8={};Ss(b8,{clear:()=>jn,getAccDescription:()=>Zn,getAccTitle:()=>Xn,getDiagramTitle:()=>Wn,setAccDescription:()=>Kn,setAccTitle:()=>zn,setDiagramTitle:()=>di});var w8="",k8="",T8="",E8=l((t=>Ir(t,Sr())),"sanitizeText"),jn=l((()=>{w8="",T8="",k8=""}),"clear"),zn=l((t=>{w8=E8(t).replace(/^\s+/g,"")}),"setAccTitle"),Xn=l((()=>w8),"getAccTitle"),Kn=l((t=>{T8=E8(t).replace(/\n\s+/g,`
`)}),"setAccDescription"),Zn=l((()=>T8),"getAccDescription"),di=l((t=>{k8=E8(t)}),"setDiagramTitle"),Wn=l((()=>k8),"getDiagramTitle"),zI=ee,yue=m8,ke=Sr,KT=UB,e$=M0,_8=l((t=>Ir(t,ke())),"sanitizeText"),t$=am,vue=l((()=>b8),"getCommonDb"),E4={},_4=l(((t,e,r)=>{E4[t]&&zI.warn(`Diagram with id ${t} already registered. Overwriting.`),E4[t]=e,r&&MB(t,r),gue(t,e.styles),e.injectUtils?.(zI,yue,ke,_8,t$,vue(),(()=>{}))}),"registerDiagram"),ZT=l((t=>{if(t in E4)return E4[t];throw new xue(t)}),"getDiagram"),pp,xue=(pp=class extends Error{constructor(e){super(`Diagram ${e} not found.`)}},l(pp,"DiagramNotFoundError"),pp);function r$(t,e){let r;if(e===void 0)for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}return r}function n$(t,e){let r;if(e===void 0)for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}return r}function Ay(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function i$(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _6(t){let e,r,n;function i(o,u,h=0,d=o.length){if(h<d){if(e(u,u)!==0)return d;do{const p=h+d>>>1;r(o[p],u)<0?h=p+1:d=p}while(h<d)}return h}function a(o,u,h=0,d=o.length){if(h<d){if(e(u,u)!==0)return d;do{const p=h+d>>>1;r(o[p],u)<=0?h=p+1:d=p}while(h<d)}return h}function s(o,u,h=0,d=o.length){const p=i(o,u,h,d-1);return p>h&&n(o[p-1],u)>-n(o[p],u)?p-1:p}return t.length!==2?(e=Ay,r=l(((o,u)=>Ay(t(o),u)),"compare2"),n=l(((o,u)=>t(o)-u),"delta")):(e=t===Ay||t===i$?t:a$,r=t,n=t),l(i,"left"),l(a,"right"),l(s,"center"),{left:i,center:s,right:a}}function a$(){return 0}function s$(t){return t===null?NaN:+t}l(r$,"max"),l(n$,"min"),l(Ay,"ascending"),l(i$,"descending"),l(_6,"bisector"),l(a$,"zero"),l(s$,"number");var o$=_6(Ay),bue=o$.right;o$.left,_6(s$).center;var wue=bue,fp,GI=(fp=class extends Map{constructor(e,r=u$){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(QT(this,e))}has(e){return super.has(QT(this,e))}set(e,r){return super.set(l$(this,e),r)}delete(e){return super.delete(c$(this,e))}},l(fp,"InternMap"),fp);function QT({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function l$({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function c$({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function u$(t){return t!==null&&typeof t=="object"?t.valueOf():t}l(QT,"intern_get"),l(l$,"intern_set"),l(c$,"intern_delete"),l(u$,"keyof");var kue=Math.sqrt(50),Tue=Math.sqrt(10),Eue=Math.sqrt(2);function s2(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=kue?10:a>=Tue?5:a>=Eue?2:1;let o,u,h;return i<0?(h=Math.pow(10,-i)/s,o=Math.round(t*h),u=Math.round(e*h),o/h<t&&++o,u/h>e&&--u,h=-h):(h=Math.pow(10,i)*s,o=Math.round(t/h),u=Math.round(e/h),o*h<t&&++o,u*h>e&&--u),u<o&&.5<=r&&r<2?s2(t,e,2*r):[o,u,h]}function h$(t,e,r){if(!((r=+r)>0))return[];if((t=+t)==(e=+e))return[t];const n=e<t,[i,a,s]=n?s2(e,t,r):s2(t,e,r);if(!(a>=i))return[];const o=a-i+1,u=new Array(o);if(n)if(s<0)for(let h=0;h<o;++h)u[h]=(a-h)/-s;else for(let h=0;h<o;++h)u[h]=(a-h)*s;else if(s<0)for(let h=0;h<o;++h)u[h]=(i+h)/-s;else for(let h=0;h<o;++h)u[h]=(i+h)*s;return u}function C4(t,e,r){return s2(t=+t,e=+e,r=+r)[2]}function S4(t,e,r){r=+r;const n=(e=+e)<(t=+t),i=n?C4(e,t,r):C4(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function d$(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=0|Math.max(0,Math.ceil((e-t)/r)),a=new Array(i);++n<i;)a[n]=t+n*r;return a}function p$(t){return t}l(s2,"tickSpec"),l(h$,"ticks"),l(C4,"tickIncrement"),l(S4,"tickStep"),l(d$,"range"),l(p$,"default");function f$(t){return"translate("+t+",0)"}function g$(t){return"translate(0,"+t+")"}function m$(t){return e=>+t(e)}function y$(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),r=>+t(r)+e}function v$(){return!this.__axis}function C8(t,e){var r=[],n=null,i=null,a=6,s=6,o=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,h=t===1||t===4?-1:1,d=t===4||t===2?"x":"y",p=t===1||t===3?f$:g$;function f(g){var m=n??(e.ticks?e.ticks.apply(e,r):e.domain()),y=i??(e.tickFormat?e.tickFormat.apply(e,r):p$),v=Math.max(a,0)+o,x=e.range(),b=+x[0]+u,w=+x[x.length-1]+u,T=(e.bandwidth?y$:m$)(e.copy(),u),k=g.selection?g.selection():g,C=k.selectAll(".domain").data([null]),E=k.selectAll(".tick").data(m,e).order(),_=E.exit(),S=E.enter().append("g").attr("class","tick"),N=E.select("line"),O=E.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(S),N=N.merge(S.append("line").attr("stroke","currentColor").attr(d+"2",h*a)),O=O.merge(S.append("text").attr("fill","currentColor").attr(d,h*v).attr("dy",t===1?"0em":t===3?"0.71em":"0.32em")),g!==k&&(C=C.transition(g),E=E.transition(g),N=N.transition(g),O=O.transition(g),_=_.transition(g).attr("opacity",1e-6).attr("transform",(function(B){return isFinite(B=T(B))?p(B+u):this.getAttribute("transform")})),S.attr("opacity",1e-6).attr("transform",(function(B){var L=this.parentNode.__axis;return p((L&&isFinite(L=L(B))?L:T(B))+u)}))),_.remove(),C.attr("d",t===4||t===2?s?"M"+h*s+","+b+"H"+u+"V"+w+"H"+h*s:"M"+u+","+b+"V"+w:s?"M"+b+","+h*s+"V"+u+"H"+w+"V"+h*s:"M"+b+","+u+"H"+w),E.attr("opacity",1).attr("transform",(function(B){return p(T(B)+u)})),N.attr(d+"2",h*a),O.attr(d,h*v).text(y),k.filter(v$).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===2?"start":t===4?"end":"middle"),k.each((function(){this.__axis=T}))}return l(f,"axis"),f.scale=function(g){return arguments.length?(e=g,f):e},f.ticks=function(){return r=Array.from(arguments),f},f.tickArguments=function(g){return arguments.length?(r=g==null?[]:Array.from(g),f):r.slice()},f.tickValues=function(g){return arguments.length?(n=g==null?null:Array.from(g),f):n&&n.slice()},f.tickFormat=function(g){return arguments.length?(i=g,f):i},f.tickSize=function(g){return arguments.length?(a=s=+g,f):a},f.tickSizeInner=function(g){return arguments.length?(a=+g,f):a},f.tickSizeOuter=function(g){return arguments.length?(s=+g,f):s},f.tickPadding=function(g){return arguments.length?(o=+g,f):o},f.offset=function(g){return arguments.length?(u=+g,f):u},f}function x$(t){return C8(1,t)}function b$(t){return C8(3,t)}function w$(){}function C6(t){return t==null?w$:function(){return this.querySelector(t)}}function k$(t){typeof t!="function"&&(t=C6(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var a,s,o=e[i],u=o.length,h=n[i]=new Array(u),d=0;d<u;++d)(a=o[d])&&(s=t.call(a,a.__data__,d,o))&&("__data__"in a&&(s.__data__=a.__data__),h[d]=s);return new ia(n,this._parents)}function T$(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function E$(){return[]}function S8(t){return t==null?E$:function(){return this.querySelectorAll(t)}}function _$(t){return function(){return T$(t.apply(this,arguments))}}function C$(t){t=typeof t=="function"?_$(t):S8(t);for(var e=this._groups,r=e.length,n=[],i=[],a=0;a<r;++a)for(var s,o=e[a],u=o.length,h=0;h<u;++h)(s=o[h])&&(n.push(t.call(s,s.__data__,h,o)),i.push(s));return new ia(n,i)}function A8(t){return function(){return this.matches(t)}}function L8(t){return function(e){return e.matches(t)}}l(f$,"translateX"),l(g$,"translateY"),l(m$,"number"),l(y$,"center"),l(v$,"entering"),l(C8,"axis"),l(x$,"axisTop"),l(b$,"axisBottom"),l(w$,"none"),l(C6,"default"),l(k$,"default"),l(T$,"array"),l(E$,"empty"),l(S8,"default"),l(_$,"arrayAll"),l(C$,"default"),l(A8,"default"),l(L8,"childMatcher");var _ue=Array.prototype.find;function S$(t){return function(){return _ue.call(this.children,t)}}function A$(){return this.firstElementChild}function L$(t){return this.select(t==null?A$:S$(typeof t=="function"?t:L8(t)))}l(S$,"childFind"),l(A$,"childFirst"),l(L$,"default");var Cue=Array.prototype.filter;function N$(){return Array.from(this.children)}function I$(t){return function(){return Cue.call(this.children,t)}}function R$(t){return this.selectAll(t==null?N$:I$(typeof t=="function"?t:L8(t)))}function M$(t){typeof t!="function"&&(t=A8(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var a,s=e[i],o=s.length,u=n[i]=[],h=0;h<o;++h)(a=s[h])&&t.call(a,a.__data__,h,s)&&u.push(a);return new ia(n,this._parents)}function N8(t){return new Array(t.length)}function D$(){return new ia(this._enter||this._groups.map(N8),this._parents)}function Ly(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function O$(t){return function(){return t}}function P$(t,e,r,n,i,a){for(var s,o=0,u=e.length,h=a.length;o<h;++o)(s=e[o])?(s.__data__=a[o],n[o]=s):r[o]=new Ly(t,a[o]);for(;o<u;++o)(s=e[o])&&(i[o]=s)}function B$(t,e,r,n,i,a,s){var o,u,h,d=new Map,p=e.length,f=a.length,g=new Array(p);for(o=0;o<p;++o)(u=e[o])&&(g[o]=h=s.call(u,u.__data__,o,e)+"",d.has(h)?i[o]=u:d.set(h,u));for(o=0;o<f;++o)h=s.call(t,a[o],o,a)+"",(u=d.get(h))?(n[o]=u,u.__data__=a[o],d.delete(h)):r[o]=new Ly(t,a[o]);for(o=0;o<p;++o)(u=e[o])&&d.get(g[o])===u&&(i[o]=u)}function $$(t){return t.__data__}function F$(t,e){if(!arguments.length)return Array.from(this,$$);var r=e?B$:P$,n=this._parents,i=this._groups;typeof t!="function"&&(t=O$(t));for(var a=i.length,s=new Array(a),o=new Array(a),u=new Array(a),h=0;h<a;++h){var d=n[h],p=i[h],f=p.length,g=z$(t.call(d,d&&d.__data__,h,n)),m=g.length,y=o[h]=new Array(m),v=s[h]=new Array(m),x=u[h]=new Array(f);r(d,p,y,v,x,g,e);for(var b,w,T=0,k=0;T<m;++T)if(b=y[T]){for(T>=k&&(k=T+1);!(w=v[k])&&++k<m;);b._next=w||null}}return(s=new ia(s,n))._enter=o,s._exit=u,s}function z$(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function G$(){return new ia(this._exit||this._groups.map(N8),this._parents)}function U$(t,e,r){var n=this.enter(),i=this,a=this.exit();return typeof t=="function"?(n=t(n))&&(n=n.selection()):n=n.append(t+""),e!=null&&(i=e(i))&&(i=i.selection()),r==null?a.remove():r(a),n&&i?n.merge(i).order():i}function q$(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,i=r.length,a=n.length,s=Math.min(i,a),o=new Array(i),u=0;u<s;++u)for(var h,d=r[u],p=n[u],f=d.length,g=o[u]=new Array(f),m=0;m<f;++m)(h=d[m]||p[m])&&(g[m]=h);for(;u<i;++u)o[u]=r[u];return new ia(o,this._parents)}function j$(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n,i=t[e],a=i.length-1,s=i[a];--a>=0;)(n=i[a])&&(s&&4^n.compareDocumentPosition(s)&&s.parentNode.insertBefore(n,s),s=n);return this}function W$(t){function e(p,f){return p&&f?t(p.__data__,f.__data__):!p-!f}t||(t=Y$),l(e,"compareNode");for(var r=this._groups,n=r.length,i=new Array(n),a=0;a<n;++a){for(var s,o=r[a],u=o.length,h=i[a]=new Array(u),d=0;d<u;++d)(s=o[d])&&(h[d]=s);h.sort(e)}return new ia(i,this._parents).order()}function Y$(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function V$(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function H$(){return Array.from(this)}function X$(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],i=0,a=n.length;i<a;++i){var s=n[i];if(s)return s}return null}function K$(){let t=0;for(const e of this)++t;return t}function Z$(){return!this.node()}function Q$(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var i,a=e[r],s=0,o=a.length;s<o;++s)(i=a[s])&&t.call(i,i.__data__,s,a);return this}l(N$,"children"),l(I$,"childrenFilter"),l(R$,"default"),l(M$,"default"),l(N8,"default"),l(D$,"default"),l(Ly,"EnterNode"),Ly.prototype={constructor:Ly,appendChild:l((function(t){return this._parent.insertBefore(t,this._next)}),"appendChild"),insertBefore:l((function(t,e){return this._parent.insertBefore(t,e)}),"insertBefore"),querySelector:l((function(t){return this._parent.querySelector(t)}),"querySelector"),querySelectorAll:l((function(t){return this._parent.querySelectorAll(t)}),"querySelectorAll")},l(O$,"default"),l(P$,"bindIndex"),l(B$,"bindKey"),l($$,"datum"),l(F$,"default"),l(z$,"arraylike"),l(G$,"default"),l(U$,"default"),l(q$,"default"),l(j$,"default"),l(W$,"default"),l(Y$,"ascending"),l(V$,"default"),l(H$,"default"),l(X$,"default"),l(K$,"default"),l(Z$,"default"),l(Q$,"default");var JT="http://www.w3.org/1999/xhtml",UI={svg:"http://www.w3.org/2000/svg",xhtml:JT,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function pv(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),UI.hasOwnProperty(e)?{space:UI[e],local:t}:t}function J$(t){return function(){this.removeAttribute(t)}}function eF(t){return function(){this.removeAttributeNS(t.space,t.local)}}function tF(t,e){return function(){this.setAttribute(t,e)}}function rF(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function nF(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function iF(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function aF(t,e){var r=pv(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?eF:J$:typeof e=="function"?r.local?iF:nF:r.local?rF:tF)(r,e))}function I8(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function sF(t){return function(){this.style.removeProperty(t)}}function oF(t,e,r){return function(){this.style.setProperty(t,e,r)}}function lF(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function cF(t,e,r){return arguments.length>1?this.each((e==null?sF:typeof e=="function"?lF:oF)(t,e,r??"")):Bu(this.node(),t)}function Bu(t,e){return t.style.getPropertyValue(e)||I8(t).getComputedStyle(t,null).getPropertyValue(e)}function uF(t){return function(){delete this[t]}}function hF(t,e){return function(){this[t]=e}}function dF(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function pF(t,e){return arguments.length>1?this.each((e==null?uF:typeof e=="function"?dF:hF)(t,e)):this.node()[t]}function R8(t){return t.trim().split(/^|\s+/)}function S6(t){return t.classList||new eE(t)}function eE(t){this._node=t,this._names=R8(t.getAttribute("class")||"")}function M8(t,e){for(var r=S6(t),n=-1,i=e.length;++n<i;)r.add(e[n])}function D8(t,e){for(var r=S6(t),n=-1,i=e.length;++n<i;)r.remove(e[n])}function fF(t){return function(){M8(this,t)}}function gF(t){return function(){D8(this,t)}}function mF(t,e){return function(){(e.apply(this,arguments)?M8:D8)(this,t)}}function yF(t,e){var r=R8(t+"");if(arguments.length<2){for(var n=S6(this.node()),i=-1,a=r.length;++i<a;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof e=="function"?mF:e?fF:gF)(r,e))}function vF(){this.textContent=""}function xF(t){return function(){this.textContent=t}}function bF(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function wF(t){return arguments.length?this.each(t==null?vF:(typeof t=="function"?bF:xF)(t)):this.node().textContent}function kF(){this.innerHTML=""}function TF(t){return function(){this.innerHTML=t}}function EF(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function _F(t){return arguments.length?this.each(t==null?kF:(typeof t=="function"?EF:TF)(t)):this.node().innerHTML}function CF(){this.nextSibling&&this.parentNode.appendChild(this)}function SF(){return this.each(CF)}function AF(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function LF(){return this.each(AF)}function NF(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===JT&&e.documentElement.namespaceURI===JT?e.createElement(t):e.createElementNS(r,t)}}function IF(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function O8(t){var e=pv(t);return(e.local?IF:NF)(e)}function RF(t){var e=typeof t=="function"?t:O8(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function MF(){return null}function DF(t,e){var r=typeof t=="function"?t:O8(t),n=e==null?MF:typeof e=="function"?e:C6(e);return this.select((function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)}))}function OF(){var t=this.parentNode;t&&t.removeChild(this)}function PF(){return this.each(OF)}function BF(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function $F(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function FF(t){return this.select(t?$F:BF)}function zF(t){return arguments.length?this.property("__data__",t):this.node().__data__}function GF(t){return function(e){t.call(this,e,this.__data__)}}function UF(t){return t.trim().split(/^|\s+/).map((function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}}))}function qF(t){return function(){var e=this.__on;if(e){for(var r,n=0,i=-1,a=e.length;n<a;++n)r=e[n],t.type&&r.type!==t.type||r.name!==t.name?e[++i]=r:this.removeEventListener(r.type,r.listener,r.options);++i?e.length=i:delete this.__on}}}function jF(t,e,r){return function(){var n,i=this.__on,a=GF(e);if(i){for(var s=0,o=i.length;s<o;++s)if((n=i[s]).type===t.type&&n.name===t.name)return this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=a,n.options=r),void(n.value=e)}this.addEventListener(t.type,a,r),n={type:t.type,name:t.name,value:e,listener:a,options:r},i?i.push(n):this.__on=[n]}}function WF(t,e,r){var n,i,a=UF(t+""),s=a.length;if(!(arguments.length<2)){for(o=e?jF:qF,n=0;n<s;++n)this.each(o(a[n],e,r));return this}var o=this.node().__on;if(o){for(var u,h=0,d=o.length;h<d;++h)for(n=0,u=o[h];n<s;++n)if((i=a[n]).type===u.type&&i.name===u.name)return u.value}}function P8(t,e,r){var n=I8(t),i=n.CustomEvent;typeof i=="function"?i=new i(e,r):(i=n.document.createEvent("Event"),r?(i.initEvent(e,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function YF(t,e){return function(){return P8(this,t,e)}}function VF(t,e){return function(){return P8(this,t,e.apply(this,arguments))}}function HF(t,e){return this.each((typeof e=="function"?VF:YF)(t,e))}function*XF(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n,i=t[e],a=0,s=i.length;a<s;++a)(n=i[a])&&(yield n)}l(pv,"default"),l(J$,"attrRemove"),l(eF,"attrRemoveNS"),l(tF,"attrConstant"),l(rF,"attrConstantNS"),l(nF,"attrFunction"),l(iF,"attrFunctionNS"),l(aF,"default"),l(I8,"default"),l(sF,"styleRemove"),l(oF,"styleConstant"),l(lF,"styleFunction"),l(cF,"default"),l(Bu,"styleValue"),l(uF,"propertyRemove"),l(hF,"propertyConstant"),l(dF,"propertyFunction"),l(pF,"default"),l(R8,"classArray"),l(S6,"classList"),l(eE,"ClassList"),eE.prototype={add:l((function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))}),"add"),remove:l((function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))}),"remove"),contains:l((function(t){return this._names.indexOf(t)>=0}),"contains")},l(M8,"classedAdd"),l(D8,"classedRemove"),l(fF,"classedTrue"),l(gF,"classedFalse"),l(mF,"classedFunction"),l(yF,"default"),l(vF,"textRemove"),l(xF,"textConstant"),l(bF,"textFunction"),l(wF,"default"),l(kF,"htmlRemove"),l(TF,"htmlConstant"),l(EF,"htmlFunction"),l(_F,"default"),l(CF,"raise"),l(SF,"default"),l(AF,"lower"),l(LF,"default"),l(NF,"creatorInherit"),l(IF,"creatorFixed"),l(O8,"default"),l(RF,"default"),l(MF,"constantNull"),l(DF,"default"),l(OF,"remove"),l(PF,"default"),l(BF,"selection_cloneShallow"),l($F,"selection_cloneDeep"),l(FF,"default"),l(zF,"default"),l(GF,"contextListener"),l(UF,"parseTypenames"),l(qF,"onRemove"),l(jF,"onAdd"),l(WF,"default"),l(P8,"dispatchEvent"),l(YF,"dispatchConstant"),l(VF,"dispatchFunction"),l(HF,"default"),l(XF,"default");var KF=[null];function ia(t,e){this._groups=t,this._parents=e}function tE(){return new ia([[document.documentElement]],KF)}function qI(){return this}l(ia,"Selection"),l(tE,"selection"),l(qI,"selection_selection"),ia.prototype=tE.prototype={constructor:ia,select:k$,selectAll:C$,selectChild:L$,selectChildren:R$,filter:M$,data:F$,enter:D$,exit:G$,join:U$,merge:q$,selection:qI,order:j$,sort:W$,call:V$,nodes:H$,node:X$,size:K$,empty:Z$,each:Q$,attr:aF,style:cF,property:pF,classed:yF,text:wF,html:_F,raise:SF,lower:LF,append:RF,insert:DF,remove:PF,clone:FF,datum:zF,on:WF,dispatch:HF,[Symbol.iterator]:XF};var o2=tE;function Ze(t){return typeof t=="string"?new ia([[document.querySelector(t)]],[document.documentElement]):new ia([[t]],KF)}function Wd(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function l2(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Fl(){}l(Ze,"default"),l(Wd,"default"),l(l2,"extend"),l(Fl,"Color");var dx=1/.7,Yd="\\s*([+-]?\\d+)\\s*",c2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Js="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sue=/^#([0-9a-f]{3,8})$/,Aue=new RegExp(`^rgb\\(${Yd},${Yd},${Yd}\\)$`),Lue=new RegExp(`^rgb\\(${Js},${Js},${Js}\\)$`),Nue=new RegExp(`^rgba\\(${Yd},${Yd},${Yd},${c2}\\)$`),Iue=new RegExp(`^rgba\\(${Js},${Js},${Js},${c2}\\)$`),Rue=new RegExp(`^hsl\\(${c2},${Js},${Js}\\)$`),Mue=new RegExp(`^hsla\\(${c2},${Js},${Js},${c2}\\)$`),jI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function _k(){return this.rgb().formatHex()}function WI(){return this.rgb().formatHex8()}function YI(){return $8(this).formatHsl()}function Ck(){return this.rgb().formatRgb()}function Hl(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Sue.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?rE(e):r===3?new ci(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):r===8?Wm(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):r===4?Wm(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Aue.exec(t))?new ci(e[1],e[2],e[3],1):(e=Lue.exec(t))?new ci(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Nue.exec(t))?Wm(e[1],e[2],e[3],e[4]):(e=Iue.exec(t))?Wm(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Rue.exec(t))?nE(e[1],e[2]/100,e[3]/100,1):(e=Mue.exec(t))?nE(e[1],e[2]/100,e[3]/100,e[4]):jI.hasOwnProperty(t)?rE(jI[t]):t==="transparent"?new ci(NaN,NaN,NaN,0):null}function rE(t){return new ci(t>>16&255,t>>8&255,255&t,1)}function Wm(t,e,r,n){return n<=0&&(t=e=r=NaN),new ci(t,e,r,n)}function B8(t){return t instanceof Fl||(t=Hl(t)),t?new ci((t=t.rgb()).r,t.g,t.b,t.opacity):new ci}function u2(t,e,r,n){return arguments.length===1?B8(t):new ci(t,e,r,n??1)}function ci(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}function Sk(){return`#${Il(this.r)}${Il(this.g)}${Il(this.b)}`}function VI(){return`#${Il(this.r)}${Il(this.g)}${Il(this.b)}${Il(255*(isNaN(this.opacity)?1:this.opacity))}`}function Ak(){const t=Ym(this.opacity);return`${t===1?"rgb(":"rgba("}${Nl(this.r)}, ${Nl(this.g)}, ${Nl(this.b)}${t===1?")":`, ${t})`}`}function Ym(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Nl(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Il(t){return((t=Nl(t))<16?"0":"")+t.toString(16)}function nE(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new qa(t,e,r,n)}function $8(t){if(t instanceof qa)return new qa(t.h,t.s,t.l,t.opacity);if(t instanceof Fl||(t=Hl(t)),!t)return new qa;if(t instanceof qa)return t;var e=(t=t.rgb()).r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),a=Math.max(e,r,n),s=NaN,o=a-i,u=(a+i)/2;return o?(s=e===a?(r-n)/o+6*(r<n):r===a?(n-e)/o+2:(e-r)/o+4,o/=u<.5?a+i:2-a-i,s*=60):o=u>0&&u<1?0:s,new qa(s,o,u,t.opacity)}function HI(t,e,r,n){return arguments.length===1?$8(t):new qa(t,e,r,n??1)}function qa(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}function Lk(t){return(t=(t||0)%360)<0?t+360:t}function Am(t){return Math.max(0,Math.min(1,t||0))}function px(t,e,r){return 255*(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)}Wd(Fl,Hl,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:_k,formatHex:_k,formatHex8:WI,formatHsl:YI,formatRgb:Ck,toString:Ck}),l(_k,"color_formatHex"),l(WI,"color_formatHex8"),l(YI,"color_formatHsl"),l(Ck,"color_formatRgb"),l(Hl,"color"),l(rE,"rgbn"),l(Wm,"rgba"),l(B8,"rgbConvert"),l(u2,"rgb"),l(ci,"Rgb"),Wd(ci,u2,l2(Fl,{brighter(t){return t=t==null?dx:Math.pow(dx,t),new ci(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?.7:Math.pow(.7,t),new ci(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ci(Nl(this.r),Nl(this.g),Nl(this.b),Ym(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Sk,formatHex:Sk,formatHex8:VI,formatRgb:Ak,toString:Ak})),l(Sk,"rgb_formatHex"),l(VI,"rgb_formatHex8"),l(Ak,"rgb_formatRgb"),l(Ym,"clampa"),l(Nl,"clampi"),l(Il,"hex"),l(nE,"hsla"),l($8,"hslConvert"),l(HI,"hsl"),l(qa,"Hsl"),Wd(qa,HI,l2(Fl,{brighter(t){return t=t==null?dx:Math.pow(dx,t),new qa(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?.7:Math.pow(.7,t),new qa(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new ci(px(t>=240?t-240:t+120,i,n),px(t,i,n),px(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new qa(Lk(this.h),Am(this.s),Am(this.l),Ym(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ym(this.opacity);return`${t===1?"hsl(":"hsla("}${Lk(this.h)}, ${100*Am(this.s)}%, ${100*Am(this.l)}%${t===1?")":`, ${t})`}`}})),l(Lk,"clamph"),l(Am,"clampt"),l(px,"hsl2rgb");var Due=Math.PI/180,Oue=180/Math.PI,ZF=4/29,iE=6/29,QF=3*iE*iE;function F8(t){if(t instanceof ms)return new ms(t.l,t.a,t.b,t.opacity);if(t instanceof Vs)return aE(t);t instanceof ci||(t=B8(t));var e,r,n=gb(t.r),i=gb(t.g),a=gb(t.b),s=fb((.2225045*n+.7168786*i+.0606169*a)/1);return n===i&&i===a?e=r=s:(e=fb((.4360747*n+.3850649*i+.1430804*a)/.96422),r=fb((.0139322*n+.0971045*i+.7141733*a)/.82521)),new ms(116*s-16,500*(e-s),200*(s-r),t.opacity)}function XI(t,e,r,n){return arguments.length===1?F8(t):new ms(t,e,r,n??1)}function ms(t,e,r,n){this.l=+t,this.a=+e,this.b=+r,this.opacity=+n}function fb(t){return t>.008856451679035631?Math.pow(t,1/3):t/QF+ZF}function fx(t){return t>iE?t*t*t:QF*(t-ZF)}function gx(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function gb(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function JF(t){if(t instanceof Vs)return new Vs(t.h,t.c,t.l,t.opacity);if(t instanceof ms||(t=F8(t)),t.a===0&&t.b===0)return new Vs(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Oue;return new Vs(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function A4(t,e,r,n){return arguments.length===1?JF(t):new Vs(t,e,r,n??1)}function Vs(t,e,r,n){this.h=+t,this.c=+e,this.l=+r,this.opacity=+n}function aE(t){if(isNaN(t.h))return new ms(t.l,0,0,t.opacity);var e=t.h*Due;return new ms(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}l(F8,"labConvert"),l(XI,"lab"),l(ms,"Lab"),Wd(ms,XI,l2(Fl,{brighter(t){return new ms(this.l+18*(t??1),this.a,this.b,this.opacity)},darker(t){return new ms(this.l-18*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,r=isNaN(this.b)?t:t-this.b/200;return new ci(gx(3.1338561*(e=.96422*fx(e))-1.6168667*(t=1*fx(t))-.4906146*(r=.82521*fx(r))),gx(-.9787684*e+1.9161415*t+.033454*r),gx(.0719453*e-.2289914*t+1.4052427*r),this.opacity)}})),l(fb,"xyz2lab"),l(fx,"lab2xyz"),l(gx,"lrgb2rgb"),l(gb,"rgb2lrgb"),l(JF,"hclConvert"),l(A4,"hcl"),l(Vs,"Hcl"),l(aE,"hcl2lab"),Wd(Vs,A4,l2(Fl,{brighter(t){return new Vs(this.h,this.c,this.l+18*(t??1),this.opacity)},darker(t){return new Vs(this.h,this.c,this.l-18*(t??1),this.opacity)},rgb(){return aE(this).rgb()}}));var A6=l((t=>()=>t),"default");function z8(t,e){return function(r){return t+r*e}}function ez(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function tz(t,e){var r=e-t;return r?z8(t,r>180||r<-180?r-360*Math.round(r/360):r):A6(isNaN(t)?e:t)}function rz(t){return(t=+t)==1?Vd:function(e,r){return r-e?ez(e,r,t):A6(isNaN(e)?r:e)}}function Vd(t,e){var r=e-t;return r?z8(t,r):A6(isNaN(t)?e:t)}function nz(t){return function(e,r){var n=t((e=A4(e)).h,(r=A4(r)).h),i=Vd(e.c,r.c),a=Vd(e.l,r.l),s=Vd(e.opacity,r.opacity);return function(o){return e.h=n(o),e.c=i(o),e.l=a(o),e.opacity=s(o),e+""}}}l(z8,"linear"),l(ez,"exponential"),l(tz,"hue"),l(rz,"gamma"),l(Vd,"nogamma"),l(nz,"hcl");var Pue=nz(tz);function Nk(t,e,r,n,i){var a=t*t,s=a*t;return((1-3*t+3*a-s)*e+(4-6*a+3*s)*r+(1+3*t+3*a-3*s)*n+s*i)/6}l(Nk,"basis"),l((function(t){var e=t.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),i=t[n],a=t[n+1],s=n>0?t[n-1]:2*i-a,o=n<e-1?t[n+2]:2*a-i;return Nk((r-n/e)*e,s,i,a,o)}}),"default"),l((function(t){var e=t.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*e),i=t[(n+e-1)%e],a=t[n%e],s=t[(n+1)%e],o=t[(n+2)%e];return Nk((r-n/e)*e,i,a,s,o)}}),"default");var L4=l((function t(e){var r=rz(e);function n(i,a){var s=r((i=u2(i)).r,(a=u2(a)).r),o=r(i.g,a.g),u=r(i.b,a.b),h=Vd(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=o(d),i.b=u(d),i.opacity=h(d),i+""}}return l(n,"rgb"),n.gamma=t,n}),"rgbGamma")(1);function iz(t,e){e||(e=[]);var r,n=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(r=0;r<n;++r)i[r]=t[r]*(1-a)+e[r]*a;return i}}function az(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function sz(t,e){var r,n=e?e.length:0,i=t?Math.min(n,t.length):0,a=new Array(i),s=new Array(n);for(r=0;r<i;++r)a[r]=L6(t[r],e[r]);for(;r<n;++r)s[r]=e[r];return function(o){for(r=0;r<i;++r)s[r]=a[r](o);return s}}function oz(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function za(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function lz(t,e){var r,n={},i={};for(r in t!==null&&typeof t=="object"||(t={}),e!==null&&typeof e=="object"||(e={}),e)r in t?n[r]=L6(t[r],e[r]):i[r]=e[r];return function(a){for(r in n)i[r]=n[r](a);return i}}l((function(t){return function(e){var r,n,i=e.length,a=new Array(i),s=new Array(i),o=new Array(i);for(r=0;r<i;++r)n=u2(e[r]),a[r]=n.r||0,s[r]=n.g||0,o[r]=n.b||0;return a=t(a),s=t(s),o=t(o),n.opacity=1,function(u){return n.r=a(u),n.g=s(u),n.b=o(u),n+""}}}),"rgbSpline"),l(iz,"default"),l(az,"isNumberArray"),l(sz,"genericArray"),l(oz,"default"),l(za,"default"),l(lz,"default");var sE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ik=new RegExp(sE.source,"g");function cz(t){return function(){return t}}function uz(t){return function(e){return t(e)+""}}function G8(t,e){var r,n,i,a=sE.lastIndex=Ik.lastIndex=0,s=-1,o=[],u=[];for(t+="",e+="";(r=sE.exec(t))&&(n=Ik.exec(e));)(i=n.index)>a&&(i=e.slice(a,i),o[s]?o[s]+=i:o[++s]=i),(r=r[0])===(n=n[0])?o[s]?o[s]+=n:o[++s]=n:(o[++s]=null,u.push({i:s,x:za(r,n)})),a=Ik.lastIndex;return a<e.length&&(i=e.slice(a),o[s]?o[s]+=i:o[++s]=i),o.length<2?u[0]?uz(u[0].x):cz(e):(e=u.length,function(h){for(var d,p=0;p<e;++p)o[(d=u[p]).i]=d.x(h);return o.join("")})}function L6(t,e){var r,n=typeof e;return e==null||n==="boolean"?A6(e):(n==="number"?za:n==="string"?(r=Hl(e))?(e=r,L4):G8:e instanceof Hl?L4:e instanceof Date?oz:az(e)?iz:Array.isArray(e)?sz:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?lz:za)(t,e)}function hz(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}l(cz,"zero"),l(uz,"one"),l(G8,"default"),l(L6,"default"),l(hz,"default");var mx,KI=180/Math.PI,oE={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function U8(t,e,r,n,i,a){var s,o,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*r+e*n)&&(r-=t*u,n-=e*u),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,u/=o),t*n<e*r&&(t=-t,e=-e,u=-u,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*KI,skewX:Math.atan(u)*KI,scaleX:s,scaleY:o}}function dz(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?oE:U8(e.a,e.b,e.c,e.d,e.e,e.f)}function pz(t){return t==null?oE:(mx||(mx=document.createElementNS("http://www.w3.org/2000/svg","g")),mx.setAttribute("transform",t),(t=mx.transform.baseVal.consolidate())?U8((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):oE)}function q8(t,e,r,n){function i(h){return h.length?h.pop()+" ":""}function a(h,d,p,f,g,m){if(h!==p||d!==f){var y=g.push("translate(",null,e,null,r);m.push({i:y-4,x:za(h,p)},{i:y-2,x:za(d,f)})}else(p||f)&&g.push("translate("+p+e+f+r)}function s(h,d,p,f){h!==d?(h-d>180?d+=360:d-h>180&&(h+=360),f.push({i:p.push(i(p)+"rotate(",null,n)-2,x:za(h,d)})):d&&p.push(i(p)+"rotate("+d+n)}function o(h,d,p,f){h!==d?f.push({i:p.push(i(p)+"skewX(",null,n)-2,x:za(h,d)}):d&&p.push(i(p)+"skewX("+d+n)}function u(h,d,p,f,g,m){if(h!==p||d!==f){var y=g.push(i(g)+"scale(",null,",",null,")");m.push({i:y-4,x:za(h,p)},{i:y-2,x:za(d,f)})}else p===1&&f===1||g.push(i(g)+"scale("+p+","+f+")")}return l(i,"pop"),l(a,"translate"),l(s,"rotate"),l(o,"skewX"),l(u,"scale"),function(h,d){var p=[],f=[];return h=t(h),d=t(d),a(h.translateX,h.translateY,d.translateX,d.translateY,p,f),s(h.rotate,d.rotate,p,f),o(h.skewX,d.skewX,p,f),u(h.scaleX,h.scaleY,d.scaleX,d.scaleY,p,f),h=d=null,function(g){for(var m,y=-1,v=f.length;++y<v;)p[(m=f[y]).i]=m.x(g);return p.join("")}}}l(U8,"default"),l(dz,"parseCss"),l(pz,"parseSvg"),l(q8,"interpolateTransform");var Bue=q8(dz,"px, ","px)","deg)"),$ue=q8(pz,", ",")",")");function fv(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}l(fv,"initRange");var ZI=Symbol("implicit");function gv(){var t=new GI,e=[],r=[],n=ZI;function i(a){let s=t.get(a);if(s===void 0){if(n!==ZI)return n;t.set(a,s=e.push(a)-1)}return r[s%r.length]}return l(i,"scale"),i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new GI;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return gv(e,r).unknown(n)},fv.apply(i,arguments),i}function fz(t){return function(){return t}}function gz(t){return+t}l(gv,"ordinal"),l(fz,"constants"),l(gz,"number");var QI=[0,1];function ru(t){return t}function N4(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:fz(isNaN(e)?NaN:.5)}function mz(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function yz(t,e,r){var n=t[0],i=t[1],a=e[0],s=e[1];return i<n?(n=N4(i,n),a=r(s,a)):(n=N4(n,i),a=r(a,s)),function(o){return a(n(o))}}function vz(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),a=new Array(n),s=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<n;)i[s]=N4(t[s],t[s+1]),a[s]=r(e[s],e[s+1]);return function(o){var u=wue(t,o,1,n)-1;return a[u](i[u](o))}}function j8(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function xz(){var t,e,r,n,i,a,s=QI,o=QI,u=L6,h=ru;function d(){var f=Math.min(s.length,o.length);return h!==ru&&(h=mz(s[0],s[f-1])),n=f>2?vz:yz,i=a=null,p}function p(f){return f==null||isNaN(f=+f)?r:(i||(i=n(s.map(t),o,u)))(t(h(f)))}return l(d,"rescale"),l(p,"scale"),p.invert=function(f){return h(e((a||(a=n(o,s.map(t),za)))(f)))},p.domain=function(f){return arguments.length?(s=Array.from(f,gz),d()):s.slice()},p.range=function(f){return arguments.length?(o=Array.from(f),d()):o.slice()},p.rangeRound=function(f){return o=Array.from(f),u=hz,d()},p.clamp=function(f){return arguments.length?(h=!!f||ru,d()):h!==ru},p.interpolate=function(f){return arguments.length?(u=f,d()):u},p.unknown=function(f){return arguments.length?(r=f,p):r},function(f,g){return t=f,e=g,d()}}function W8(){return xz()(ru,ru)}function bz(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function h2(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function $u(t){return(t=h2(Math.abs(t)))?t[1]:NaN}function wz(t,e){return function(r,n){for(var i=r.length,a=[],s=0,o=t[0],u=0;i>0&&o>0&&(u+o+1>n&&(o=Math.max(1,n-u)),a.push(r.substring(i-=o,i+o)),!((u+=o+1)>n));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function kz(t){return function(e){return e.replace(/[0-9]/g,(function(r){return t[+r]}))}}l(ru,"identity"),l(N4,"normalize"),l(mz,"clamper"),l(yz,"bimap"),l(vz,"polymap"),l(j8,"copy"),l(xz,"transformer"),l(W8,"continuous"),l(bz,"default"),l(h2,"formatDecimalParts"),l($u,"default"),l(wz,"default"),l(kz,"default");var Tz,Fue=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function d2(t){if(!(e=Fue.exec(t)))throw new Error("invalid format: "+t);var e;return new mb({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function mb(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}function Ez(t){e:for(var e,r=t.length,n=1,i=-1;n<r;++n)switch(t[n]){case".":i=e=n;break;case"0":i===0&&(i=n),e=n;break;default:if(!+t[n])break e;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}function _z(t,e){var r=h2(t,e);if(!r)return t+"";var n=r[0],i=r[1],a=i-(Tz=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+h2(t,Math.max(0,e+a-1))[0]}function lE(t,e){var r=h2(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}l(d2,"formatSpecifier"),d2.prototype=mb.prototype,l(mb,"FormatSpecifier"),mb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type},l(Ez,"default"),l(_z,"default"),l(lE,"default");var JI={"%":l(((t,e)=>(100*t).toFixed(e)),"%"),b:l((t=>Math.round(t).toString(2)),"b"),c:l((t=>t+""),"c"),d:bz,e:l(((t,e)=>t.toExponential(e)),"e"),f:l(((t,e)=>t.toFixed(e)),"f"),g:l(((t,e)=>t.toPrecision(e)),"g"),o:l((t=>Math.round(t).toString(8)),"o"),p:l(((t,e)=>lE(100*t,e)),"p"),r:lE,s:_z,X:l((t=>Math.round(t).toString(16).toUpperCase()),"X"),x:l((t=>Math.round(t).toString(16)),"x")};function cE(t){return t}l(cE,"default");var yx,Cz,Sz,eR=Array.prototype.map,tR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Az(t){var e=t.grouping===void 0||t.thousands===void 0?cE:wz(eR.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?cE:kz(eR.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function h(p){var f=(p=d2(p)).fill,g=p.align,m=p.sign,y=p.symbol,v=p.zero,x=p.width,b=p.comma,w=p.precision,T=p.trim,k=p.type;k==="n"?(b=!0,k="g"):JI[k]||(w===void 0&&(w=12),T=!0,k="g"),(v||f==="0"&&g==="=")&&(v=!0,f="0",g="=");var C=y==="$"?r:y==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",E=y==="$"?n:/[%p]/.test(k)?s:"",_=JI[k],S=/[defgprs%]/.test(k);function N(O){var B,L,I,A=C,M=E;if(k==="c")M=_(O)+M,O="";else{var D=(O=+O)<0||1/O<0;if(O=isNaN(O)?u:_(Math.abs(O),w),T&&(O=Ez(O)),D&&+O==0&&m!=="+"&&(D=!1),A=(D?m==="("?m:o:m==="-"||m==="("?"":m)+A,M=(k==="s"?tR[8+Tz/3]:"")+M+(D&&m==="("?")":""),S){for(B=-1,L=O.length;++B<L;)if(48>(I=O.charCodeAt(B))||I>57){M=(I===46?i+O.slice(B+1):O.slice(B))+M,O=O.slice(0,B);break}}}b&&!v&&(O=e(O,1/0));var R=A.length+O.length+M.length,P=R<x?new Array(x-R+1).join(f):"";switch(b&&v&&(O=e(P+O,P.length?x-M.length:1/0),P=""),g){case"<":O=A+O+M+P;break;case"=":O=A+P+O+M;break;case"^":O=P.slice(0,R=P.length>>1)+A+O+M+P.slice(R);break;default:O=P+A+O+M}return a(O)}return w=w===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w)),l(N,"format"),N.toString=function(){return p+""},N}function d(p,f){var g=h(((p=d2(p)).type="f",p)),m=3*Math.max(-8,Math.min(8,Math.floor($u(f)/3))),y=Math.pow(10,-m),v=tR[8+m/3];return function(x){return g(y*x)+v}}return l(h,"newFormat"),l(d,"formatPrefix"),{format:h,formatPrefix:d}}function rR(t){return yx=Az(t),Cz=yx.format,Sz=yx.formatPrefix,yx}function Lz(t){return Math.max(0,-$u(Math.abs(t)))}function Nz(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor($u(e)/3)))-$u(Math.abs(t)))}function Iz(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,$u(e)-$u(t))+1}function Rz(t,e,r,n){var i,a=S4(t,e,r);switch((n=d2(n??",f")).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return n.precision!=null||isNaN(i=Nz(a,s))||(n.precision=i),Sz(n,s);case"":case"e":case"g":case"p":case"r":n.precision!=null||isNaN(i=Iz(a,Math.max(Math.abs(t),Math.abs(e))))||(n.precision=i-(n.type==="e"));break;case"f":case"%":n.precision!=null||isNaN(i=Lz(a))||(n.precision=i-2*(n.type==="%"))}return Cz(n)}function Mz(t){var e=t.domain;return t.ticks=function(r){var n=e();return h$(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return Rz(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n,i,a=e(),s=0,o=a.length-1,u=a[s],h=a[o],d=10;for(h<u&&(i=u,u=h,h=i,i=s,s=o,o=i);d-- >0;){if((i=C4(u,h,r))===n)return a[s]=u,a[o]=h,e(a);if(i>0)u=Math.floor(u/i)*i,h=Math.ceil(h/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,h=Math.floor(h*i)/i}n=i}return t},t}function Fu(){var t=W8();return t.copy=function(){return j8(t,Fu())},fv.apply(t,arguments),Mz(t)}l(Az,"default"),rR({thousands:",",grouping:[3],currency:["$",""]}),l(rR,"defaultLocale"),l(Lz,"default"),l(Nz,"default"),l(Iz,"default"),l(Rz,"tickFormat"),l(Mz,"linearish"),l(Fu,"linear");var Rk=new Date,Mk=new Date;function Sn(t,e,r,n){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return l(i,"interval"),i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const u=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s&&o>0))return u;let h;do u.push(h=new Date(+a)),e(a,o),t(a);while(h<a&&a<s);return u},i.filter=a=>Sn((s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)}),((s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););})),r&&(i.count=(a,s)=>(Rk.setTime(+a),Mk.setTime(+s),t(Rk),t(Mk),Math.floor(r(Rk,Mk))),i.every=a=>(a=Math.floor(a),isFinite(a)&&a>0?a>1?i.filter(n?s=>n(s)%a==0:s=>i.count(0,s)%a==0):i:null)),i}l(Sn,"timeInterval");var Hd=Sn((()=>{}),((t,e)=>{t.setTime(+t+e)}),((t,e)=>e-t));Hd.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?Sn((e=>{e.setTime(Math.floor(e/t)*t)}),((e,r)=>{e.setTime(+e+r*t)}),((e,r)=>(r-e)/t)):Hd:null),Hd.range;var Rl=Sn((t=>{t.setTime(t-t.getMilliseconds())}),((t,e)=>{t.setTime(+t+1e3*e)}),((t,e)=>(e-t)/1e3),(t=>t.getUTCSeconds()));Rl.range;var p2=Sn((t=>{t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),((t,e)=>{t.setTime(+t+6e4*e)}),((t,e)=>(e-t)/6e4),(t=>t.getMinutes()));p2.range;var Dz=Sn((t=>{t.setUTCSeconds(0,0)}),((t,e)=>{t.setTime(+t+6e4*e)}),((t,e)=>(e-t)/6e4),(t=>t.getUTCMinutes()));Dz.range;var f2=Sn((t=>{t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),((t,e)=>{t.setTime(+t+36e5*e)}),((t,e)=>(e-t)/36e5),(t=>t.getHours()));f2.range;var Oz=Sn((t=>{t.setUTCMinutes(0,0,0)}),((t,e)=>{t.setTime(+t+36e5*e)}),((t,e)=>(e-t)/36e5),(t=>t.getUTCHours()));Oz.range;var zu=Sn((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5),(t=>t.getDate()-1));zu.range;var Y8=Sn((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/864e5),(t=>t.getUTCDate()-1));Y8.range;var Pz=Sn((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/864e5),(t=>Math.floor(t/864e5)));function dc(t){return Sn((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((e,r)=>{e.setDate(e.getDate()+7*r)}),((e,r)=>(r-e-6e4*(r.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5))}Pz.range,l(dc,"timeWeekday");var mv=dc(0),g2=dc(1),Bz=dc(2),$z=dc(3),Gu=dc(4),Fz=dc(5),zz=dc(6);function pc(t){return Sn((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((e,r)=>{e.setUTCDate(e.getUTCDate()+7*r)}),((e,r)=>(r-e)/6048e5))}mv.range,g2.range,Bz.range,$z.range,Gu.range,Fz.range,zz.range,l(pc,"utcWeekday");var V8=pc(0),I4=pc(1),zue=pc(2),Gue=pc(3),O0=pc(4),Uue=pc(5),que=pc(6);V8.range,I4.range,zue.range,Gue.range,O0.range,Uue.range,que.range;var m2=Sn((t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,e)=>{t.setMonth(t.getMonth()+e)}),((t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())),(t=>t.getMonth()));m2.range;var Gz=Sn((t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)}),((t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())),(t=>t.getUTCMonth()));Gz.range;var Bo=Sn((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear()));Bo.every=t=>isFinite(t=Math.floor(t))&&t>0?Sn((e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,r)=>{e.setFullYear(e.getFullYear()+r*t)})):null,Bo.range;var zl=Sn((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));function uE(t,e,r,n,i,a){const s=[[Rl,1,1e3],[Rl,5,5e3],[Rl,15,15e3],[Rl,30,3e4],[a,1,6e4],[a,5,3e5],[a,15,9e5],[a,30,18e5],[i,1,36e5],[i,3,108e5],[i,6,216e5],[i,12,432e5],[n,1,864e5],[n,2,1728e5],[r,1,6048e5],[e,1,2592e6],[e,3,7776e6],[t,1,31536e6]];function o(h,d,p){const f=d<h;f&&([h,d]=[d,h]);const g=p&&typeof p.range=="function"?p:u(h,d,p),m=g?g.range(h,+d+1):[];return f?m.reverse():m}function u(h,d,p){const f=Math.abs(d-h)/p,g=_6((([,,v])=>v)).right(s,f);if(g===s.length)return t.every(S4(h/31536e6,d/31536e6,p));if(g===0)return Hd.every(Math.max(S4(h,d,p),1));const[m,y]=s[f/s[g-1][2]<s[g][2]/f?g-1:g];return m.every(y)}return l(o,"ticks"),l(u,"tickInterval"),[o,u]}zl.every=t=>isFinite(t=Math.floor(t))&&t>0?Sn((e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)})):null,zl.range,l(uE,"ticker"),uE(zl,Gz,V8,Pz,Oz,Dz);var[jue,Wue]=uE(Bo,m2,mv,zu,f2,p2);function yb(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function vb(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Mh(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Uz(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,u=t.shortMonths,h=Dh(i),d=Oh(i),p=Dh(a),f=Oh(a),g=Dh(s),m=Oh(s),y=Dh(o),v=Oh(o),x=Dh(u),b=Oh(u),w={a:D,A:R,b:P,B:$,c:null,d:gE,e:gE,f:cG,g:xG,G:wG,H:sG,I:oG,j:lG,L:H8,m:uG,M:hG,p:z,q,Q:vE,s:xE,S:dG,u:pG,U:fG,V:gG,w:mG,W:yG,x:null,X:null,y:vG,Y:bG,Z:kG,"%":yE},T={a:W,A:Q,b:te,B:oe,c:null,d:mE,e:mE,f:CG,g:PG,G:$G,H:TG,I:EG,j:_G,L:K8,m:SG,M:AG,p:re,q:H,Q:vE,s:xE,S:LG,u:NG,U:IG,V:RG,w:MG,W:DG,x:null,X:null,y:OG,Y:BG,Z:FG,"%":yE},k={a:N,A:O,b:B,B:L,c:I,d:pE,e:pE,f:rG,g:dE,G:hE,H:fE,I:fE,j:Qz,L:tG,m:Zz,M:Jz,p:S,q:Kz,Q:iG,s:aG,S:eG,u:Wz,U:Yz,V:Vz,w:jz,W:Hz,x:A,X:M,y:dE,Y:hE,Z:Xz,"%":nG};function C(K,ie){return function(ne){var J,ue,Y,se=[],de=-1,ce=0,Ee=K.length;for(ne instanceof Date||(ne=new Date(+ne));++de<Ee;)K.charCodeAt(de)===37&&(se.push(K.slice(ce,de)),(ue=nR[J=K.charAt(++de)])!=null?J=K.charAt(++de):ue=J==="e"?" ":"0",(Y=ie[J])&&(J=Y(ne,ue)),se.push(J),ce=de+1);return se.push(K.slice(ce,de)),se.join("")}}function E(K,ie){return function(ne){var J,ue,Y=Mh(1900,void 0,1);if(_(Y,K,ne+="",0)!=ne.length)return null;if("Q"in Y)return new Date(Y.Q);if("s"in Y)return new Date(1e3*Y.s+("L"in Y?Y.L:0));if(ie&&!("Z"in Y)&&(Y.Z=0),"p"in Y&&(Y.H=Y.H%12+12*Y.p),Y.m===void 0&&(Y.m="q"in Y?Y.q:0),"V"in Y){if(Y.V<1||Y.V>53)return null;"w"in Y||(Y.w=1),"Z"in Y?(ue=(J=vb(Mh(Y.y,0,1))).getUTCDay(),J=ue>4||ue===0?I4.ceil(J):I4(J),J=Y8.offset(J,7*(Y.V-1)),Y.y=J.getUTCFullYear(),Y.m=J.getUTCMonth(),Y.d=J.getUTCDate()+(Y.w+6)%7):(ue=(J=yb(Mh(Y.y,0,1))).getDay(),J=ue>4||ue===0?g2.ceil(J):g2(J),J=zu.offset(J,7*(Y.V-1)),Y.y=J.getFullYear(),Y.m=J.getMonth(),Y.d=J.getDate()+(Y.w+6)%7)}else("W"in Y||"U"in Y)&&("w"in Y||(Y.w="u"in Y?Y.u%7:"W"in Y?1:0),ue="Z"in Y?vb(Mh(Y.y,0,1)).getUTCDay():yb(Mh(Y.y,0,1)).getDay(),Y.m=0,Y.d="W"in Y?(Y.w+6)%7+7*Y.W-(ue+5)%7:Y.w+7*Y.U-(ue+6)%7);return"Z"in Y?(Y.H+=Y.Z/100|0,Y.M+=Y.Z%100,vb(Y)):yb(Y)}}function _(K,ie,ne,J){for(var ue,Y,se=0,de=ie.length,ce=ne.length;se<de;){if(J>=ce)return-1;if((ue=ie.charCodeAt(se++))===37){if(ue=ie.charAt(se++),!(Y=k[ue in nR?ie.charAt(se++):ue])||(J=Y(K,ne,J))<0)return-1}else if(ue!=ne.charCodeAt(J++))return-1}return J}function S(K,ie,ne){var J=h.exec(ie.slice(ne));return J?(K.p=d.get(J[0].toLowerCase()),ne+J[0].length):-1}function N(K,ie,ne){var J=g.exec(ie.slice(ne));return J?(K.w=m.get(J[0].toLowerCase()),ne+J[0].length):-1}function O(K,ie,ne){var J=p.exec(ie.slice(ne));return J?(K.w=f.get(J[0].toLowerCase()),ne+J[0].length):-1}function B(K,ie,ne){var J=x.exec(ie.slice(ne));return J?(K.m=b.get(J[0].toLowerCase()),ne+J[0].length):-1}function L(K,ie,ne){var J=y.exec(ie.slice(ne));return J?(K.m=v.get(J[0].toLowerCase()),ne+J[0].length):-1}function I(K,ie,ne){return _(K,e,ie,ne)}function A(K,ie,ne){return _(K,r,ie,ne)}function M(K,ie,ne){return _(K,n,ie,ne)}function D(K){return s[K.getDay()]}function R(K){return a[K.getDay()]}function P(K){return u[K.getMonth()]}function $(K){return o[K.getMonth()]}function z(K){return i[+(K.getHours()>=12)]}function q(K){return 1+~~(K.getMonth()/3)}function W(K){return s[K.getUTCDay()]}function Q(K){return a[K.getUTCDay()]}function te(K){return u[K.getUTCMonth()]}function oe(K){return o[K.getUTCMonth()]}function re(K){return i[+(K.getUTCHours()>=12)]}function H(K){return 1+~~(K.getUTCMonth()/3)}return w.x=C(r,w),w.X=C(n,w),w.c=C(e,w),T.x=C(r,T),T.X=C(n,T),T.c=C(e,T),l(C,"newFormat"),l(E,"newParse"),l(_,"parseSpecifier"),l(S,"parsePeriod"),l(N,"parseShortWeekday"),l(O,"parseWeekday"),l(B,"parseShortMonth"),l(L,"parseMonth"),l(I,"parseLocaleDateTime"),l(A,"parseLocaleDate"),l(M,"parseLocaleTime"),l(D,"formatShortWeekday"),l(R,"formatWeekday"),l(P,"formatShortMonth"),l($,"formatMonth"),l(z,"formatPeriod"),l(q,"formatQuarter"),l(W,"formatUTCShortWeekday"),l(Q,"formatUTCWeekday"),l(te,"formatUTCShortMonth"),l(oe,"formatUTCMonth"),l(re,"formatUTCPeriod"),l(H,"formatUTCQuarter"),{format:l((function(K){var ie=C(K+="",w);return ie.toString=function(){return K},ie}),"format"),parse:l((function(K){var ie=E(K+="",!1);return ie.toString=function(){return K},ie}),"parse"),utcFormat:l((function(K){var ie=C(K+="",T);return ie.toString=function(){return K},ie}),"utcFormat"),utcParse:l((function(K){var ie=E(K+="",!0);return ie.toString=function(){return K},ie}),"utcParse")}}l(yb,"localDate"),l(vb,"utcDate"),l(Mh,"newDate"),l(Uz,"formatLocale");var wh,R4,nR={"-":"",_:" ",0:"0"},Qn=/^\s*\d+/,Yue=/^%/,Vue=/[\\^$*+?|[\]().{}]/g;function dr(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(e)+i:i)}function qz(t){return t.replace(Vue,"\\$&")}function Dh(t){return new RegExp("^(?:"+t.map(qz).join("|")+")","i")}function Oh(t){return new Map(t.map(((e,r)=>[e.toLowerCase(),r])))}function jz(t,e,r){var n=Qn.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function Wz(t,e,r){var n=Qn.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function Yz(t,e,r){var n=Qn.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function Vz(t,e,r){var n=Qn.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function Hz(t,e,r){var n=Qn.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function hE(t,e,r){var n=Qn.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function dE(t,e,r){var n=Qn.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Xz(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Kz(t,e,r){var n=Qn.exec(e.slice(r,r+1));return n?(t.q=3*n[0]-3,r+n[0].length):-1}function Zz(t,e,r){var n=Qn.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function pE(t,e,r){var n=Qn.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function Qz(t,e,r){var n=Qn.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function fE(t,e,r){var n=Qn.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function Jz(t,e,r){var n=Qn.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function eG(t,e,r){var n=Qn.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function tG(t,e,r){var n=Qn.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function rG(t,e,r){var n=Qn.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function nG(t,e,r){var n=Yue.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function iG(t,e,r){var n=Qn.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function aG(t,e,r){var n=Qn.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function gE(t,e){return dr(t.getDate(),e,2)}function sG(t,e){return dr(t.getHours(),e,2)}function oG(t,e){return dr(t.getHours()%12||12,e,2)}function lG(t,e){return dr(1+zu.count(Bo(t),t),e,3)}function H8(t,e){return dr(t.getMilliseconds(),e,3)}function cG(t,e){return H8(t,e)+"000"}function uG(t,e){return dr(t.getMonth()+1,e,2)}function hG(t,e){return dr(t.getMinutes(),e,2)}function dG(t,e){return dr(t.getSeconds(),e,2)}function pG(t){var e=t.getDay();return e===0?7:e}function fG(t,e){return dr(mv.count(Bo(t)-1,t),e,2)}function X8(t){var e=t.getDay();return e>=4||e===0?Gu(t):Gu.ceil(t)}function gG(t,e){return t=X8(t),dr(Gu.count(Bo(t),t)+(Bo(t).getDay()===4),e,2)}function mG(t){return t.getDay()}function yG(t,e){return dr(g2.count(Bo(t)-1,t),e,2)}function vG(t,e){return dr(t.getFullYear()%100,e,2)}function xG(t,e){return dr((t=X8(t)).getFullYear()%100,e,2)}function bG(t,e){return dr(t.getFullYear()%1e4,e,4)}function wG(t,e){var r=t.getDay();return dr((t=r>=4||r===0?Gu(t):Gu.ceil(t)).getFullYear()%1e4,e,4)}function kG(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+dr(e/60|0,"0",2)+dr(e%60,"0",2)}function mE(t,e){return dr(t.getUTCDate(),e,2)}function TG(t,e){return dr(t.getUTCHours(),e,2)}function EG(t,e){return dr(t.getUTCHours()%12||12,e,2)}function _G(t,e){return dr(1+Y8.count(zl(t),t),e,3)}function K8(t,e){return dr(t.getUTCMilliseconds(),e,3)}function CG(t,e){return K8(t,e)+"000"}function SG(t,e){return dr(t.getUTCMonth()+1,e,2)}function AG(t,e){return dr(t.getUTCMinutes(),e,2)}function LG(t,e){return dr(t.getUTCSeconds(),e,2)}function NG(t){var e=t.getUTCDay();return e===0?7:e}function IG(t,e){return dr(V8.count(zl(t)-1,t),e,2)}function Z8(t){var e=t.getUTCDay();return e>=4||e===0?O0(t):O0.ceil(t)}function RG(t,e){return t=Z8(t),dr(O0.count(zl(t),t)+(zl(t).getUTCDay()===4),e,2)}function MG(t){return t.getUTCDay()}function DG(t,e){return dr(I4.count(zl(t)-1,t),e,2)}function OG(t,e){return dr(t.getUTCFullYear()%100,e,2)}function PG(t,e){return dr((t=Z8(t)).getUTCFullYear()%100,e,2)}function BG(t,e){return dr(t.getUTCFullYear()%1e4,e,4)}function $G(t,e){var r=t.getUTCDay();return dr((t=r>=4||r===0?O0(t):O0.ceil(t)).getUTCFullYear()%1e4,e,4)}function FG(){return"+0000"}function yE(){return"%"}function vE(t){return+t}function xE(t){return Math.floor(+t/1e3)}function iR(t){return wh=Uz(t),R4=wh.format,wh.parse,wh.utcFormat,wh.utcParse,wh}function zG(t,e){var r,n=0,i=(t=t.slice()).length-1,a=t[n],s=t[i];return s<a&&(r=n,n=i,i=r,r=a,a=s,s=r),t[n]=e.floor(a),t[i]=e.ceil(s),t}function GG(t){return new Date(t)}function UG(t){return t instanceof Date?+t:+new Date(+t)}function Q8(t,e,r,n,i,a,s,o,u,h){var d=W8(),p=d.invert,f=d.domain,g=h(".%L"),m=h(":%S"),y=h("%I:%M"),v=h("%I %p"),x=h("%a %d"),b=h("%b %d"),w=h("%B"),T=h("%Y");function k(C){return(u(C)<C?g:o(C)<C?m:s(C)<C?y:a(C)<C?v:n(C)<C?i(C)<C?x:b:r(C)<C?w:T)(C)}return l(k,"tickFormat"),d.invert=function(C){return new Date(p(C))},d.domain=function(C){return arguments.length?f(Array.from(C,UG)):f().map(GG)},d.ticks=function(C){var E=f();return t(E[0],E[E.length-1],C??10)},d.tickFormat=function(C,E){return E==null?k:h(E)},d.nice=function(C){var E=f();return C&&typeof C.range=="function"||(C=e(E[0],E[E.length-1],C??10)),C?f(zG(E,C)):d},d.copy=function(){return j8(d,Q8(t,e,r,n,i,a,s,o,u,h))},d}function qG(){return fv.apply(Q8(jue,Wue,Bo,m2,mv,zu,f2,p2,Rl,R4).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function M4(){var t,e,r=gv().unknown(void 0),n=r.domain,i=r.range,a=0,s=1,o=!1,u=0,h=0,d=.5;function p(){var f=n().length,g=s<a,m=g?s:a,y=g?a:s;t=(y-m)/Math.max(1,f-u+2*h),o&&(t=Math.floor(t)),m+=(y-m-t*(f-u))*d,e=t*(1-u),o&&(m=Math.round(m),e=Math.round(e));var v=d$(f).map((function(x){return m+t*x}));return i(g?v.reverse():v)}return delete r.unknown,l(p,"rescale"),r.domain=function(f){return arguments.length?(n(f),p()):n()},r.range=function(f){return arguments.length?([a,s]=f,a=+a,s=+s,p()):[a,s]},r.rangeRound=function(f){return[a,s]=f,a=+a,s=+s,o=!0,p()},r.bandwidth=function(){return e},r.step=function(){return t},r.round=function(f){return arguments.length?(o=!!f,p()):o},r.padding=function(f){return arguments.length?(u=Math.min(1,h=+f),p()):u},r.paddingInner=function(f){return arguments.length?(u=Math.min(1,f),p()):u},r.paddingOuter=function(f){return arguments.length?(h=+f,p()):h},r.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),p()):d},r.copy=function(){return M4(n(),[a,s]).round(o).paddingInner(u).paddingOuter(h).align(d)},fv.apply(p(),arguments)}function jG(t){for(var e=t.length/6|0,r=new Array(e),n=0;n<e;)r[n]="#"+t.slice(6*n,6*++n);return r}l(dr,"pad"),l(qz,"requote"),l(Dh,"formatRe"),l(Oh,"formatLookup"),l(jz,"parseWeekdayNumberSunday"),l(Wz,"parseWeekdayNumberMonday"),l(Yz,"parseWeekNumberSunday"),l(Vz,"parseWeekNumberISO"),l(Hz,"parseWeekNumberMonday"),l(hE,"parseFullYear"),l(dE,"parseYear"),l(Xz,"parseZone"),l(Kz,"parseQuarter"),l(Zz,"parseMonthNumber"),l(pE,"parseDayOfMonth"),l(Qz,"parseDayOfYear"),l(fE,"parseHour24"),l(Jz,"parseMinutes"),l(eG,"parseSeconds"),l(tG,"parseMilliseconds"),l(rG,"parseMicroseconds"),l(nG,"parseLiteralPercent"),l(iG,"parseUnixTimestamp"),l(aG,"parseUnixTimestampSeconds"),l(gE,"formatDayOfMonth"),l(sG,"formatHour24"),l(oG,"formatHour12"),l(lG,"formatDayOfYear"),l(H8,"formatMilliseconds"),l(cG,"formatMicroseconds"),l(uG,"formatMonthNumber"),l(hG,"formatMinutes"),l(dG,"formatSeconds"),l(pG,"formatWeekdayNumberMonday"),l(fG,"formatWeekNumberSunday"),l(X8,"dISO"),l(gG,"formatWeekNumberISO"),l(mG,"formatWeekdayNumberSunday"),l(yG,"formatWeekNumberMonday"),l(vG,"formatYear"),l(xG,"formatYearISO"),l(bG,"formatFullYear"),l(wG,"formatFullYearISO"),l(kG,"formatZone"),l(mE,"formatUTCDayOfMonth"),l(TG,"formatUTCHour24"),l(EG,"formatUTCHour12"),l(_G,"formatUTCDayOfYear"),l(K8,"formatUTCMilliseconds"),l(CG,"formatUTCMicroseconds"),l(SG,"formatUTCMonthNumber"),l(AG,"formatUTCMinutes"),l(LG,"formatUTCSeconds"),l(NG,"formatUTCWeekdayNumberMonday"),l(IG,"formatUTCWeekNumberSunday"),l(Z8,"UTCdISO"),l(RG,"formatUTCWeekNumberISO"),l(MG,"formatUTCWeekdayNumberSunday"),l(DG,"formatUTCWeekNumberMonday"),l(OG,"formatUTCYear"),l(PG,"formatUTCYearISO"),l(BG,"formatUTCFullYear"),l($G,"formatUTCFullYearISO"),l(FG,"formatUTCZone"),l(yE,"formatLiteralPercent"),l(vE,"formatUnixTimestamp"),l(xE,"formatUnixTimestampSeconds"),iR({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),l(iR,"defaultLocale"),l(zG,"nice"),l(GG,"date"),l(UG,"number"),l(Q8,"calendar"),l(qG,"time"),l(M4,"band"),l(jG,"default");var Hue=jG("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function on(t){return l((function(){return t}),"constant")}l(on,"default");var aR=Math.abs,pi=Math.atan2,wc=Math.cos,Xue=Math.max,Dk=Math.min,Ds=Math.sin,Qh=Math.sqrt,y2=Math.PI,D4=y2/2,xb=2*y2;function WG(t){return t>1?0:t<-1?y2:Math.acos(t)}function bE(t){return t>=1?D4:t<=-1?-D4:Math.asin(t)}l(WG,"acos"),l(bE,"asin");var wE=Math.PI,kE=2*wE,Kue=kE-1e-6;function J8(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function YG(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return J8;const r=10**e;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}l(J8,"append"),l(YG,"appendRound");var gp,e1=(gp=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?J8:YG(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,a,s){this._append`C${+e},${+r},${+n},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,r,n,i,a){if(e=+e,r=+r,n=+n,i=+i,(a=+a)<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,u=n-e,h=i-r,d=s-e,p=o-r,f=d*d+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(f>1e-6)if(Math.abs(p*u-h*d)>1e-6&&a){let g=n-s,m=i-o,y=u*u+h*h,v=g*g+m*m,x=Math.sqrt(y),b=Math.sqrt(f),w=a*Math.tan((wE-Math.acos((y+f-v)/(2*x*b)))/2),T=w/b,k=w/x;Math.abs(T-1)>1e-6&&this._append`L${e+T*d},${r+T*p}`,this._append`A${a},${a},0,0,${+(p*g>d*m)},${this._x1=e+k*u},${this._y1=r+k*h}`}else this._append`L${this._x1=e},${this._y1=r}`}arc(e,r,n,i,a,s){if(e=+e,r=+r,s=!!s,(n=+n)<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),u=n*Math.sin(i),h=e+o,d=r+u,p=1^s,f=s?i-a:a-i;this._x1===null?this._append`M${h},${d}`:(Math.abs(this._x1-h)>1e-6||Math.abs(this._y1-d)>1e-6)&&this._append`L${h},${d}`,n&&(f<0&&(f=f%kE+kE),f>Kue?this._append`A${n},${n},0,1,${p},${e-o},${r-u}A${n},${n},0,1,${p},${this._x1=h},${this._y1=d}`:f>1e-6&&this._append`A${n},${n},0,${+(f>=wE)},${p},${this._x1=e+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}},l(gp,"Path"),gp);function sR(){return new e1}function t1(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new e1(e)}function VG(t){return t.innerRadius}function HG(t){return t.outerRadius}function XG(t){return t.startAngle}function KG(t){return t.endAngle}function ZG(t){return t&&t.padAngle}function QG(t,e,r,n,i,a,s,o){var u=r-t,h=n-e,d=s-i,p=o-a,f=p*u-d*h;if(!(f*f<1e-12))return[t+(f=(d*(e-a)-p*(t-i))/f)*u,e+f*h]}function Vm(t,e,r,n,i,a,s){var o=t-r,u=e-n,h=(s?a:-a)/Qh(o*o+u*u),d=h*u,p=-h*o,f=t+d,g=e+p,m=r+d,y=n+p,v=(f+m)/2,x=(g+y)/2,b=m-f,w=y-g,T=b*b+w*w,k=i-a,C=f*y-m*g,E=(w<0?-1:1)*Qh(Xue(0,k*k*T-C*C)),_=(C*w-b*E)/T,S=(-C*b-w*E)/T,N=(C*w+b*E)/T,O=(-C*b+w*E)/T,B=_-v,L=S-x,I=N-v,A=O-x;return B*B+L*L>I*I+A*A&&(_=N,S=O),{cx:_,cy:S,x01:-d,y01:-p,x11:_*(i/k-1),y11:S*(i/k-1)}}function Uu(){var t=VG,e=HG,r=on(0),n=null,i=XG,a=KG,s=ZG,o=null,u=t1(h);function h(){var d,p,f=+t.apply(this,arguments),g=+e.apply(this,arguments),m=i.apply(this,arguments)-D4,y=a.apply(this,arguments)-D4,v=aR(y-m),x=y>m;if(o||(o=d=u()),g<f&&(p=g,g=f,f=p),g>1e-12)if(v>xb-1e-12)o.moveTo(g*wc(m),g*Ds(m)),o.arc(0,0,g,m,y,!x),f>1e-12&&(o.moveTo(f*wc(y),f*Ds(y)),o.arc(0,0,f,y,m,x));else{var b,w,T=m,k=y,C=m,E=y,_=v,S=v,N=s.apply(this,arguments)/2,O=N>1e-12&&(n?+n.apply(this,arguments):Qh(f*f+g*g)),B=Dk(aR(g-f)/2,+r.apply(this,arguments)),L=B,I=B;if(O>1e-12){var A=bE(O/f*Ds(N)),M=bE(O/g*Ds(N));(_-=2*A)>1e-12?(C+=A*=x?1:-1,E-=A):(_=0,C=E=(m+y)/2),(S-=2*M)>1e-12?(T+=M*=x?1:-1,k-=M):(S=0,T=k=(m+y)/2)}var D=g*wc(T),R=g*Ds(T),P=f*wc(E),$=f*Ds(E);if(B>1e-12){var z,q=g*wc(k),W=g*Ds(k),Q=f*wc(C),te=f*Ds(C);if(v<y2)if(z=QG(D,R,Q,te,q,W,P,$)){var oe=D-z[0],re=R-z[1],H=q-z[0],K=W-z[1],ie=1/Ds(WG((oe*H+re*K)/(Qh(oe*oe+re*re)*Qh(H*H+K*K)))/2),ne=Qh(z[0]*z[0]+z[1]*z[1]);L=Dk(B,(f-ne)/(ie-1)),I=Dk(B,(g-ne)/(ie+1))}else L=I=0}S>1e-12?I>1e-12?(b=Vm(Q,te,D,R,g,I,x),w=Vm(q,W,P,$,g,I,x),o.moveTo(b.cx+b.x01,b.cy+b.y01),I<B?o.arc(b.cx,b.cy,I,pi(b.y01,b.x01),pi(w.y01,w.x01),!x):(o.arc(b.cx,b.cy,I,pi(b.y01,b.x01),pi(b.y11,b.x11),!x),o.arc(0,0,g,pi(b.cy+b.y11,b.cx+b.x11),pi(w.cy+w.y11,w.cx+w.x11),!x),o.arc(w.cx,w.cy,I,pi(w.y11,w.x11),pi(w.y01,w.x01),!x))):(o.moveTo(D,R),o.arc(0,0,g,T,k,!x)):o.moveTo(D,R),f>1e-12&&_>1e-12?L>1e-12?(b=Vm(P,$,q,W,f,-L,x),w=Vm(D,R,Q,te,f,-L,x),o.lineTo(b.cx+b.x01,b.cy+b.y01),L<B?o.arc(b.cx,b.cy,L,pi(b.y01,b.x01),pi(w.y01,w.x01),!x):(o.arc(b.cx,b.cy,L,pi(b.y01,b.x01),pi(b.y11,b.x11),!x),o.arc(0,0,f,pi(b.cy+b.y11,b.cx+b.x11),pi(w.cy+w.y11,w.cx+w.x11),x),o.arc(w.cx,w.cy,L,pi(w.y11,w.x11),pi(w.y01,w.x01),!x))):o.arc(0,0,f,E,C,x):o.lineTo(P,$)}else o.moveTo(0,0);if(o.closePath(),d)return o=null,d+""||null}return l(h,"arc"),h.centroid=function(){var d=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,p=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-y2/2;return[wc(p)*d,Ds(p)*d]},h.innerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:on(+d),h):t},h.outerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:on(+d),h):e},h.cornerRadius=function(d){return arguments.length?(r=typeof d=="function"?d:on(+d),h):r},h.padRadius=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:on(+d),h):n},h.startAngle=function(d){return arguments.length?(i=typeof d=="function"?d:on(+d),h):i},h.endAngle=function(d){return arguments.length?(a=typeof d=="function"?d:on(+d),h):a},h.padAngle=function(d){return arguments.length?(s=typeof d=="function"?d:on(+d),h):s},h.context=function(d){return arguments.length?(o=d??null,h):o},h}function TE(t){this._context=t}function v2(t){return new TE(t)}function r1(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function JG(t){return t[0]}function eU(t){return t[1]}function P0(t,e){var r=on(!0),n=null,i=v2,a=null,s=t1(o);function o(u){var h,d,p,f=(u=r1(u)).length,g=!1;for(n==null&&(a=i(p=s())),h=0;h<=f;++h)!(h<f&&r(d=u[h],h,u))===g&&((g=!g)?a.lineStart():a.lineEnd()),g&&a.point(+t(d,h,u),+e(d,h,u));if(p)return a=null,p+""||null}return t=typeof t=="function"?t:t===void 0?JG:on(t),e=typeof e=="function"?e:e===void 0?eU:on(e),l(o,"line"),o.x=function(u){return arguments.length?(t=typeof u=="function"?u:on(+u),o):t},o.y=function(u){return arguments.length?(e=typeof u=="function"?u:on(+u),o):e},o.defined=function(u){return arguments.length?(r=typeof u=="function"?u:on(!!u),o):r},o.curve=function(u){return arguments.length?(i=u,n!=null&&(a=i(n)),o):i},o.context=function(u){return arguments.length?(u==null?n=a=null:a=i(n=u),o):n},o}function tU(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function rU(t){return t}function nU(){var t=rU,e=tU,r=null,n=on(0),i=on(xb),a=on(0);function s(o){var u,h,d,p,f,g=(o=r1(o)).length,m=0,y=new Array(g),v=new Array(g),x=+n.apply(this,arguments),b=Math.min(xb,Math.max(-xb,i.apply(this,arguments)-x)),w=Math.min(Math.abs(b)/g,a.apply(this,arguments)),T=w*(b<0?-1:1);for(u=0;u<g;++u)(f=v[y[u]=u]=+t(o[u],u,o))>0&&(m+=f);for(e!=null?y.sort((function(k,C){return e(v[k],v[C])})):r!=null&&y.sort((function(k,C){return r(o[k],o[C])})),u=0,d=m?(b-g*T)/m:0;u<g;++u,x=p)h=y[u],p=x+((f=v[h])>0?f*d:0)+T,v[h]={data:o[h],index:u,value:f,startAngle:x,endAngle:p,padAngle:w};return v}return l(s,"pie"),s.value=function(o){return arguments.length?(t=typeof o=="function"?o:on(+o),s):t},s.sortValues=function(o){return arguments.length?(e=o,r=null,s):e},s.sort=function(o){return arguments.length?(r=o,e=null,s):r},s.startAngle=function(o){return arguments.length?(n=typeof o=="function"?o:on(+o),s):n},s.endAngle=function(o){return arguments.length?(i=typeof o=="function"?o:on(+o),s):i},s.padAngle=function(o){return arguments.length?(a=typeof o=="function"?o:on(+o),s):a},s}l(sR,"path"),sR.prototype=e1.prototype,l(t1,"withPath"),l(VG,"arcInnerRadius"),l(HG,"arcOuterRadius"),l(XG,"arcStartAngle"),l(KG,"arcEndAngle"),l(ZG,"arcPadAngle"),l(QG,"intersect"),l(Vm,"cornerTangents"),l(Uu,"default"),l(TE,"Linear"),TE.prototype={areaStart:l((function(){this._line=0}),"areaStart"),areaEnd:l((function(){this._line=NaN}),"areaEnd"),lineStart:l((function(){this._point=0}),"lineStart"),lineEnd:l((function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:l((function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}),"point")},l(v2,"default"),l(r1,"default"),l(JG,"x"),l(eU,"y"),l(P0,"default"),l(tU,"default"),l(rU,"default"),l(nU,"default");var mp,iU=(mp=class{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r)}this._x0=e,this._y0=r}},l(mp,"Bump"),mp);function n1(t){return new iU(t,!0)}function i1(t){return new iU(t,!1)}function Lm(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function x2(t){this._context=t}function B0(t){return new x2(t)}function Do(){}function EE(t){this._context=t}function aU(t){return new EE(t)}function _E(t){this._context=t}function sU(t){return new _E(t)}function CE(t,e){this._basis=new x2(t),this._beta=e}l(n1,"bumpX"),l(i1,"bumpY"),l(Lm,"point"),l(x2,"Basis"),x2.prototype={areaStart:l((function(){this._line=0}),"areaStart"),areaEnd:l((function(){this._line=NaN}),"areaEnd"),lineStart:l((function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0}),"lineStart"),lineEnd:l((function(){switch(this._point){case 3:Lm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:l((function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Lm(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}),"point")},l(B0,"default"),l(Do,"default"),l(EE,"BasisClosed"),EE.prototype={areaStart:Do,areaEnd:Do,lineStart:l((function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0}),"lineStart"),lineEnd:l((function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}}),"lineEnd"),point:l((function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Lm(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}),"point")},l(aU,"default"),l(_E,"BasisOpen"),_E.prototype={areaStart:l((function(){this._line=0}),"areaStart"),areaEnd:l((function(){this._line=NaN}),"areaEnd"),lineStart:l((function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0}),"lineStart"),lineEnd:l((function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:l((function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Lm(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}),"point")},l(sU,"default"),l(CE,"Bundle"),CE.prototype={lineStart:l((function(){this._x=[],this._y=[],this._basis.lineStart()}),"lineStart"),lineEnd:l((function(){var t=this._x,e=this._y,r=t.length-1;if(r>0)for(var n,i=t[0],a=e[0],s=t[r]-i,o=e[r]-a,u=-1;++u<=r;)n=u/r,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+n*s),this._beta*e[u]+(1-this._beta)*(a+n*o));this._x=this._y=null,this._basis.lineEnd()}),"lineEnd"),point:l((function(t,e){this._x.push(+t),this._y.push(+e)}),"point")};var Zue=l((function t(e){function r(n){return e===1?new x2(n):new CE(n,e)}return l(r,"bundle"),r.beta=function(n){return t(+n)},r}),"custom")(.85);function Ny(t,e,r){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-r),t._x2,t._y2)}function O4(t,e){this._context=t,this._k=(1-e)/6}l(Ny,"point"),l(O4,"Cardinal"),O4.prototype={areaStart:l((function(){this._line=0}),"areaStart"),areaEnd:l((function(){this._line=NaN}),"areaEnd"),lineStart:l((function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0}),"lineStart"),lineEnd:l((function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ny(this,this._x1,this._y1)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:l((function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ny(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}),"point")};var oU=l((function t(e){function r(n){return new O4(n,e)}return l(r,"cardinal"),r.tension=function(n){return t(+n)},r}),"custom")(0);function P4(t,e){this._context=t,this._k=(1-e)/6}l(P4,"CardinalClosed"),P4.prototype={areaStart:Do,areaEnd:Do,lineStart:l((function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0}),"lineStart"),lineEnd:l((function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}}),"lineEnd"),point:l((function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ny(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}),"point")};var Que=l((function t(e){function r(n){return new P4(n,e)}return l(r,"cardinal"),r.tension=function(n){return t(+n)},r}),"custom")(0);function B4(t,e){this._context=t,this._k=(1-e)/6}l(B4,"CardinalOpen"),B4.prototype={areaStart:l((function(){this._line=0}),"areaStart"),areaEnd:l((function(){this._line=NaN}),"areaEnd"),lineStart:l((function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0}),"lineStart"),lineEnd:l((function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:l((function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ny(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}),"point")};var Jue=l((function t(e){function r(n){return new B4(n,e)}return l(r,"cardinal"),r.tension=function(n){return t(+n)},r}),"custom")(0);function $4(t,e,r){var n=t._x1,i=t._y1,a=t._x2,s=t._y2;if(t._l01_a>1e-12){var o=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);n=(n*o-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*o-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>1e-12){var h=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,d=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*h+t._x1*t._l23_2a-e*t._l12_2a)/d,s=(s*h+t._y1*t._l23_2a-r*t._l12_2a)/d}t._context.bezierCurveTo(n,i,a,s,t._x2,t._y2)}function SE(t,e){this._context=t,this._alpha=e}l($4,"point"),l(SE,"CatmullRom"),SE.prototype={areaStart:l((function(){this._line=0}),"areaStart"),areaEnd:l((function(){this._line=NaN}),"areaEnd"),lineStart:l((function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}),"lineStart"),lineEnd:l((function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:l((function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:$4(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}),"point")};var lU=l((function t(e){function r(n){return e?new SE(n,e):new O4(n,0)}return l(r,"catmullRom"),r.alpha=function(n){return t(+n)},r}),"custom")(.5);function AE(t,e){this._context=t,this._alpha=e}l(AE,"CatmullRomClosed"),AE.prototype={areaStart:Do,areaEnd:Do,lineStart:l((function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}),"lineStart"),lineEnd:l((function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}}),"lineEnd"),point:l((function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:$4(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}),"point")};var ehe=l((function t(e){function r(n){return e?new AE(n,e):new P4(n,0)}return l(r,"catmullRom"),r.alpha=function(n){return t(+n)},r}),"custom")(.5);function LE(t,e){this._context=t,this._alpha=e}l(LE,"CatmullRomOpen"),LE.prototype={areaStart:l((function(){this._line=0}),"areaStart"),areaEnd:l((function(){this._line=NaN}),"areaEnd"),lineStart:l((function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}),"lineStart"),lineEnd:l((function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:l((function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:$4(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}),"point")};var the=l((function t(e){function r(n){return e?new LE(n,e):new B4(n,0)}return l(r,"catmullRom"),r.alpha=function(n){return t(+n)},r}),"custom")(.5);function NE(t){this._context=t}function cU(t){return new NE(t)}function IE(t){return t<0?-1:1}function Ok(t,e,r){var n=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(n||i<0&&-0),s=(r-t._y1)/(i||n<0&&-0),o=(a*i+s*n)/(n+i);return(IE(a)+IE(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function Pk(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function vx(t,e,r){var n=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-n)/3;t._context.bezierCurveTo(n+o,i+o*e,a-o,s-o*r,a,s)}function Hm(t){this._context=t}function RE(t){this._context=new ME(t)}function ME(t){this._context=t}function a1(t){return new Hm(t)}function s1(t){return new RE(t)}function DE(t){this._context=t}function Bk(t){var e,r,n=t.length-1,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function o1(t){return new DE(t)}function b2(t,e){this._context=t,this._t=e}function l1(t){return new b2(t,.5)}function c1(t){return new b2(t,0)}function u1(t){return new b2(t,1)}l(NE,"LinearClosed"),NE.prototype={areaStart:Do,areaEnd:Do,lineStart:l((function(){this._point=0}),"lineStart"),lineEnd:l((function(){this._point&&this._context.closePath()}),"lineEnd"),point:l((function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}),"point")},l(cU,"default"),l(IE,"sign"),l(Ok,"slope3"),l(Pk,"slope2"),l(vx,"point"),l(Hm,"MonotoneX"),Hm.prototype={areaStart:l((function(){this._line=0}),"areaStart"),areaEnd:l((function(){this._line=NaN}),"areaEnd"),lineStart:l((function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0}),"lineStart"),lineEnd:l((function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:vx(this,this._t0,Pk(this,this._t0))}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:l((function(t,e){var r=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,vx(this,Pk(this,r=Ok(this,t,e)),r);break;default:vx(this,this._t0,r=Ok(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}),"point")},l(RE,"MonotoneY"),(RE.prototype=Object.create(Hm.prototype)).point=function(t,e){Hm.prototype.point.call(this,e,t)},l(ME,"ReflectContext"),ME.prototype={moveTo:l((function(t,e){this._context.moveTo(e,t)}),"moveTo"),closePath:l((function(){this._context.closePath()}),"closePath"),lineTo:l((function(t,e){this._context.lineTo(e,t)}),"lineTo"),bezierCurveTo:l((function(t,e,r,n,i,a){this._context.bezierCurveTo(e,t,n,r,a,i)}),"bezierCurveTo")},l(a1,"monotoneX"),l(s1,"monotoneY"),l(DE,"Natural"),DE.prototype={areaStart:l((function(){this._line=0}),"areaStart"),areaEnd:l((function(){this._line=NaN}),"areaEnd"),lineStart:l((function(){this._x=[],this._y=[]}),"lineStart"),lineEnd:l((function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=Bk(t),i=Bk(e),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null}),"lineEnd"),point:l((function(t,e){this._x.push(+t),this._y.push(+e)}),"point")},l(Bk,"controlPoints"),l(o1,"default"),l(b2,"Step"),b2.prototype={areaStart:l((function(){this._line=0}),"areaStart"),areaEnd:l((function(){this._line=NaN}),"areaEnd"),lineStart:l((function(){this._x=this._y=NaN,this._point=0}),"lineStart"),lineEnd:l((function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)}),"lineEnd"),point:l((function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}}this._x=t,this._y=e}),"point")},l(l1,"default"),l(c1,"stepBefore"),l(u1,"stepAfter");var rhe={value:l((()=>{}),"value")};function OE(){for(var t,e=0,r=arguments.length,n={};e<r;++e){if(!(t=arguments[e]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new Xm(n)}function Xm(t){this._=t}function oR(t,e){return t.trim().split(/^|\s+/).map((function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}}))}function lR(t,e){for(var r,n=0,i=t.length;n<i;++n)if((r=t[n]).name===e)return r.value}function $k(t,e,r){for(var n=0,i=t.length;n<i;++n)if(t[n].name===e){t[n]=rhe,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}l(OE,"dispatch"),l(Xm,"Dispatch"),l(oR,"parseTypenames"),Xm.prototype=OE.prototype={constructor:Xm,on:l((function(t,e){var r,n=this._,i=oR(t+"",n),a=-1,s=i.length;if(!(arguments.length<2)){if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(r=(t=i[a]).type)n[r]=$k(n[r],t.name,e);else if(e==null)for(r in n)n[r]=$k(n[r],t.name,null);return this}for(;++a<s;)if((r=(t=i[a]).type)&&(r=lR(n[r],t.name)))return r}),"on"),copy:l((function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Xm(t)}),"copy"),call:l((function(t,e){if((r=arguments.length-2)>0)for(var r,n,i=new Array(r),a=0;a<r;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,r=(n=this._[t]).length;a<r;++a)n[a].value.apply(e,i)}),"call"),apply:l((function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],i=0,a=n.length;i<a;++i)n[i].value.apply(e,r)}),"apply")},l(lR,"get"),l($k,"set");var F4,Km,nhe=OE,$0=0,Zm=0,Nm=0,z4=0,qu=0,N6=0,w2=typeof performance=="object"&&performance.now?performance:Date,uU=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function G4(){return qu||(uU(hU),qu=w2.now()+N6)}function hU(){qu=0}function Iy(){this._call=this._time=this._next=null}function PE(t,e,r){var n=new Iy;return n.restart(t,e,r),n}function dU(){G4(),++$0;for(var t,e=F4;e;)(t=qu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--$0}function BE(){qu=(z4=w2.now())+N6,$0=Zm=0;try{dU()}finally{$0=0,fU(),qu=0}}function pU(){var t=w2.now(),e=t-z4;e>1e3&&(N6-=e,z4=t)}function fU(){for(var t,e,r=F4,n=1/0;r;)r._call?(n>r._time&&(n=r._time),t=r,r=r._next):(e=r._next,r._next=null,r=t?t._next=e:F4=e);Km=t,bb(n)}function bb(t){$0||(Zm&&(Zm=clearTimeout(Zm)),t-qu>24?(t<1/0&&(Zm=setTimeout(BE,t-w2.now()-N6)),Nm&&(Nm=clearInterval(Nm))):(Nm||(z4=w2.now(),Nm=setInterval(pU,1e3)),$0=1,uU(BE)))}function $E(t,e,r){var n=new Iy;return e=e==null?0:+e,n.restart((i=>{n.stop(),t(i+e)}),e,r),n}l(G4,"now"),l(hU,"clearNow"),l(Iy,"Timer"),Iy.prototype=PE.prototype={constructor:Iy,restart:l((function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?G4():+r)+(e==null?0:+e),this._next||Km===this||(Km?Km._next=this:F4=this,Km=this),this._call=t,this._time=r,bb()}),"restart"),stop:l((function(){this._call&&(this._call=null,this._time=1/0,bb())}),"stop")},l(PE,"timer"),l(dU,"timerFlush"),l(BE,"wake"),l(pU,"poke"),l(fU,"nap"),l(bb,"sleep"),l($E,"default");var ihe=nhe("start","end","cancel","interrupt"),ahe=[];function yv(t,e,r,n,i,a){var s=t.__transition;if(s){if(r in s)return}else t.__transition={};gU(t,r,{name:e,index:n,group:i,on:ihe,tween:ahe,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function I6(t,e){var r=is(t,e);if(r.state>0)throw new Error("too late; already scheduled");return r}function As(t,e){var r=is(t,e);if(r.state>3)throw new Error("too late; already running");return r}function is(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function gU(t,e,r){var n,i=t.__transition;function a(h){r.state=1,r.timer.restart(s,r.delay,r.time),r.delay<=h&&s(h-r.delay)}function s(h){var d,p,f,g;if(r.state!==1)return u();for(d in i)if((g=i[d]).name===r.name){if(g.state===3)return $E(s);g.state===4?(g.state=6,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete i[d]):+d<e&&(g.state=6,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete i[d])}if($E((function(){r.state===3&&(r.state=4,r.timer.restart(o,r.delay,r.time),o(h))})),r.state=2,r.on.call("start",t,t.__data__,r.index,r.group),r.state===2){for(r.state=3,n=new Array(f=r.tween.length),d=0,p=-1;d<f;++d)(g=r.tween[d].value.call(t,t.__data__,r.index,r.group))&&(n[++p]=g);n.length=p+1}}function o(h){for(var d=h<r.duration?r.ease.call(null,h/r.duration):(r.timer.restart(u),r.state=5,1),p=-1,f=n.length;++p<f;)n[p].call(t,d);r.state===5&&(r.on.call("end",t,t.__data__,r.index,r.group),u())}function u(){for(var h in r.state=6,r.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=r,r.timer=PE(a,0,r.time),l(a,"schedule"),l(s,"start"),l(o,"tick"),l(u,"stop")}function mU(t,e){var r,n,i,a=t.__transition,s=!0;if(a){for(i in e=e==null?null:e+"",a)(r=a[i]).name===e?(n=r.state>2&&r.state<5,r.state=6,r.timer.stop(),r.on.call(n?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete a[i]):s=!1;s&&delete t.__transition}}function yU(t){return this.each((function(){mU(this,t)}))}function vU(t,e){var r,n;return function(){var i=As(this,t),a=i.tween;if(a!==r){for(var s=0,o=(n=r=a).length;s<o;++s)if(n[s].name===e){(n=n.slice()).splice(s,1);break}}i.tween=n}}function xU(t,e,r){var n,i;if(typeof r!="function")throw new Error;return function(){var a=As(this,t),s=a.tween;if(s!==n){i=(n=s).slice();for(var o={name:e,value:r},u=0,h=i.length;u<h;++u)if(i[u].name===e){i[u]=o;break}u===h&&i.push(o)}a.tween=i}}function bU(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n,i=is(this.node(),r).tween,a=0,s=i.length;a<s;++a)if((n=i[a]).name===t)return n.value;return null}return this.each((e==null?vU:xU)(r,t,e))}function R6(t,e,r){var n=t._id;return t.each((function(){var i=As(this,n);(i.value||(i.value={}))[e]=r.apply(this,arguments)})),function(i){return is(i,n).value[e]}}function h1(t,e){var r;return(typeof e=="number"?za:e instanceof Hl?L4:(r=Hl(e))?(e=r,L4):G8)(t,e)}function wU(t){return function(){this.removeAttribute(t)}}function kU(t){return function(){this.removeAttributeNS(t.space,t.local)}}function TU(t,e,r){var n,i,a=r+"";return function(){var s=this.getAttribute(t);return s===a?null:s===n?i:i=e(n=s,r)}}function EU(t,e,r){var n,i,a=r+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===a?null:s===n?i:i=e(n=s,r)}}function _U(t,e,r){var n,i,a;return function(){var s,o,u=r(this);if(u!=null)return(s=this.getAttribute(t))===(o=u+"")?null:s===n&&o===i?a:(i=o,a=e(n=s,u));this.removeAttribute(t)}}function CU(t,e,r){var n,i,a;return function(){var s,o,u=r(this);if(u!=null)return(s=this.getAttributeNS(t.space,t.local))===(o=u+"")?null:s===n&&o===i?a:(i=o,a=e(n=s,u));this.removeAttributeNS(t.space,t.local)}}function SU(t,e){var r=pv(t),n=r==="transform"?$ue:h1;return this.attrTween(t,typeof e=="function"?(r.local?CU:_U)(r,n,R6(this,"attr."+t,e)):e==null?(r.local?kU:wU)(r):(r.local?EU:TU)(r,n,e))}function AU(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function LU(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function NU(t,e){var r,n;function i(){var a=e.apply(this,arguments);return a!==n&&(r=(n=a)&&LU(t,a)),r}return l(i,"tween"),i._value=e,i}function IU(t,e){var r,n;function i(){var a=e.apply(this,arguments);return a!==n&&(r=(n=a)&&AU(t,a)),r}return l(i,"tween"),i._value=e,i}function RU(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=pv(t);return this.tween(r,(n.local?NU:IU)(n,e))}function MU(t,e){return function(){I6(this,t).delay=+e.apply(this,arguments)}}function DU(t,e){return e=+e,function(){I6(this,t).delay=e}}function OU(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?MU:DU)(e,t)):is(this.node(),e).delay}function PU(t,e){return function(){As(this,t).duration=+e.apply(this,arguments)}}function BU(t,e){return e=+e,function(){As(this,t).duration=e}}function $U(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?PU:BU)(e,t)):is(this.node(),e).duration}function FU(t,e){if(typeof e!="function")throw new Error;return function(){As(this,t).ease=e}}function zU(t){var e=this._id;return arguments.length?this.each(FU(e,t)):is(this.node(),e).ease}function GU(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;As(this,t).ease=r}}function UU(t){if(typeof t!="function")throw new Error;return this.each(GU(this._id,t))}function qU(t){typeof t!="function"&&(t=A8(t));for(var e=this._groups,r=e.length,n=new Array(r),i=0;i<r;++i)for(var a,s=e[i],o=s.length,u=n[i]=[],h=0;h<o;++h)(a=s[h])&&t.call(a,a.__data__,h,s)&&u.push(a);return new ro(n,this._parents,this._name,this._id)}function jU(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,i=r.length,a=Math.min(n,i),s=new Array(n),o=0;o<a;++o)for(var u,h=e[o],d=r[o],p=h.length,f=s[o]=new Array(p),g=0;g<p;++g)(u=h[g]||d[g])&&(f[g]=u);for(;o<n;++o)s[o]=e[o];return new ro(s,this._parents,this._name,this._id)}function WU(t){return(t+"").trim().split(/^|\s+/).every((function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"}))}function YU(t,e,r){var n,i,a=WU(e)?I6:As;return function(){var s=a(this,t),o=s.on;o!==n&&(i=(n=o).copy()).on(e,r),s.on=i}}function VU(t,e){var r=this._id;return arguments.length<2?is(this.node(),r).on.on(t):this.each(YU(r,t,e))}function HU(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function XU(){return this.on("end.remove",HU(this._id))}function KU(t){var e=this._name,r=this._id;typeof t!="function"&&(t=C6(t));for(var n=this._groups,i=n.length,a=new Array(i),s=0;s<i;++s)for(var o,u,h=n[s],d=h.length,p=a[s]=new Array(d),f=0;f<d;++f)(o=h[f])&&(u=t.call(o,o.__data__,f,h))&&("__data__"in o&&(u.__data__=o.__data__),p[f]=u,yv(p[f],e,r,f,p,is(o,r)));return new ro(a,this._parents,e,r)}function ZU(t){var e=this._name,r=this._id;typeof t!="function"&&(t=S8(t));for(var n=this._groups,i=n.length,a=[],s=[],o=0;o<i;++o)for(var u,h=n[o],d=h.length,p=0;p<d;++p)if(u=h[p]){for(var f,g=t.call(u,u.__data__,p,h),m=is(u,r),y=0,v=g.length;y<v;++y)(f=g[y])&&yv(f,e,r,y,g,m);a.push(g),s.push(u)}return new ro(a,s,e,r)}l(yv,"default"),l(I6,"init"),l(As,"set"),l(is,"get"),l(gU,"create"),l(mU,"default"),l(yU,"default"),l(vU,"tweenRemove"),l(xU,"tweenFunction"),l(bU,"default"),l(R6,"tweenValue"),l(h1,"default"),l(wU,"attrRemove"),l(kU,"attrRemoveNS"),l(TU,"attrConstant"),l(EU,"attrConstantNS"),l(_U,"attrFunction"),l(CU,"attrFunctionNS"),l(SU,"default"),l(AU,"attrInterpolate"),l(LU,"attrInterpolateNS"),l(NU,"attrTweenNS"),l(IU,"attrTween"),l(RU,"default"),l(MU,"delayFunction"),l(DU,"delayConstant"),l(OU,"default"),l(PU,"durationFunction"),l(BU,"durationConstant"),l($U,"default"),l(FU,"easeConstant"),l(zU,"default"),l(GU,"easeVarying"),l(UU,"default"),l(qU,"default"),l(jU,"default"),l(WU,"start"),l(YU,"onFunction"),l(VU,"default"),l(HU,"removeFunction"),l(XU,"default"),l(KU,"default"),l(ZU,"default");var she=o2.prototype.constructor;function QU(){return new she(this._groups,this._parents)}function JU(t,e){var r,n,i;return function(){var a=Bu(this,t),s=(this.style.removeProperty(t),Bu(this,t));return a===s?null:a===r&&s===n?i:i=e(r=a,n=s)}}function d1(t){return function(){this.style.removeProperty(t)}}function eq(t,e,r){var n,i,a=r+"";return function(){var s=Bu(this,t);return s===a?null:s===n?i:i=e(n=s,r)}}function tq(t,e,r){var n,i,a;return function(){var s=Bu(this,t),o=r(this),u=o+"";return o==null&&(this.style.removeProperty(t),u=o=Bu(this,t)),s===u?null:s===n&&u===i?a:(i=u,a=e(n=s,o))}}function rq(t,e){var r,n,i,a,s="style."+e,o="end."+s;return function(){var u=As(this,t),h=u.on,d=u.value[s]==null?a||(a=d1(e)):void 0;h===r&&i===d||(n=(r=h).copy()).on(o,i=d),u.on=n}}function nq(t,e,r){var n=(t+="")=="transform"?Bue:h1;return e==null?this.styleTween(t,JU(t,n)).on("end.style."+t,d1(t)):typeof e=="function"?this.styleTween(t,tq(t,n,R6(this,"style."+t,e))).each(rq(this._id,t)):this.styleTween(t,eq(t,n,e),r).on("end.style."+t,null)}function iq(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function aq(t,e,r){var n,i;function a(){var s=e.apply(this,arguments);return s!==i&&(n=(i=s)&&iq(t,s,r)),n}return l(a,"tween"),a._value=e,a}function sq(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,aq(t,e,r??""))}function oq(t){return function(){this.textContent=t}}function lq(t){return function(){var e=t(this);this.textContent=e??""}}function cq(t){return this.tween("text",typeof t=="function"?lq(R6(this,"text",t)):oq(t==null?"":t+""))}function uq(t){return function(e){this.textContent=t.call(this,e)}}function hq(t){var e,r;function n(){var i=t.apply(this,arguments);return i!==r&&(e=(r=i)&&uq(i)),e}return l(n,"tween"),n._value=t,n}function dq(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,hq(t))}function pq(){for(var t=this._name,e=this._id,r=p1(),n=this._groups,i=n.length,a=0;a<i;++a)for(var s,o=n[a],u=o.length,h=0;h<u;++h)if(s=o[h]){var d=is(s,e);yv(s,t,r,h,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new ro(n,this._parents,t,r)}function fq(){var t,e,r=this,n=r._id,i=r.size();return new Promise((function(a,s){var o={value:s},u={value:l((function(){--i==0&&a()}),"value")};r.each((function(){var h=As(this,n),d=h.on;d!==t&&((e=(t=d).copy())._.cancel.push(o),e._.interrupt.push(o),e._.end.push(u)),h.on=e})),i===0&&a()}))}l(QU,"default"),l(JU,"styleNull"),l(d1,"styleRemove"),l(eq,"styleConstant"),l(tq,"styleFunction"),l(rq,"styleMaybeRemove"),l(nq,"default"),l(iq,"styleInterpolate"),l(aq,"styleTween"),l(sq,"default"),l(oq,"textConstant"),l(lq,"textFunction"),l(cq,"default"),l(uq,"textInterpolate"),l(hq,"textTween"),l(dq,"default"),l(pq,"default"),l(fq,"default");var ohe=0;function ro(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function gq(t){return o2().transition(t)}function p1(){return++ohe}l(ro,"Transition"),l(gq,"transition"),l(p1,"newId");var go=o2.prototype;function mq(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}ro.prototype=gq.prototype={constructor:ro,select:KU,selectAll:ZU,selectChild:go.selectChild,selectChildren:go.selectChildren,filter:qU,merge:jU,selection:QU,transition:pq,call:go.call,nodes:go.nodes,node:go.node,size:go.size,empty:go.empty,each:go.each,on:VU,attr:SU,attrTween:RU,style:nq,styleTween:sq,text:cq,textTween:dq,remove:XU,tween:bU,delay:OU,duration:$U,ease:zU,easeVarying:UU,end:fq,[Symbol.iterator]:go[Symbol.iterator]},l(mq,"cubicInOut");var lhe={time:null,delay:0,duration:250,ease:mq};function yq(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function cR(t){var e,r;t instanceof ro?(e=t._id,t=t._name):(e=p1(),(r=lhe).time=G4(),t=t==null?null:t+"");for(var n=this._groups,i=n.length,a=0;a<i;++a)for(var s,o=n[a],u=o.length,h=0;h<u;++h)(s=o[h])&&yv(s,t,e,h,o,r||yq(s,e));return new ro(n,this._parents,t,e)}function Fk(t){return[+t[0],+t[1]]}function Kc(t,e,r){this.k=t,this.x=e,this.y=r}l(yq,"inherit"),l(cR,"default"),o2.prototype.interrupt=yU,o2.prototype.transition=cR,l(Fk,"number1"),l((function(t){return[Fk(t[0]),Fk(t[1])]}),"number2"),l((function(t){return{type:t}}),"type"),l(Kc,"Transform"),Kc.prototype={constructor:Kc,scale:l((function(t){return t===1?this:new Kc(this.k*t,this.x,this.y)}),"scale"),translate:l((function(t,e){return t===0&e===0?this:new Kc(this.k,this.x+this.k*t,this.y+this.k*e)}),"translate"),apply:l((function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]}),"apply"),applyX:l((function(t){return t*this.k+this.x}),"applyX"),applyY:l((function(t){return t*this.k+this.y}),"applyY"),invert:l((function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]}),"invert"),invertX:l((function(t){return(t-this.x)/this.k}),"invertX"),invertY:l((function(t){return(t-this.y)/this.k}),"invertY"),rescaleX:l((function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))}),"rescaleX"),rescaleY:l((function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))}),"rescaleY"),toString:l((function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}),"toString")};var che=new Kc(1,0,0);function uR(t){for(;!t.__zoom;)if(!(t=t.parentNode))return che;return t.__zoom}uR.prototype=Kc.prototype,l(uR,"transform");var tl=l((t=>{const{securityLevel:e}=ke();let r=Ze("body");if(e==="sandbox"){const n=Ze(`#i${t}`);r=Ze((n.node()?.contentDocument??document).body)}return r.select(`#${t}`)}),"selectSvgElement");function f1(t){return t==null}function vq(t){return typeof t=="object"&&t!==null}function xq(t){return Array.isArray(t)?t:f1(t)?[]:[t]}function bq(t,e){var r,n,i,a;if(e)for(r=0,n=(a=Object.keys(e)).length;r<n;r+=1)t[i=a[r]]=e[i];return t}function wq(t,e){var r,n="";for(r=0;r<e;r+=1)n+=t;return n}function kq(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}l(f1,"isNothing"),l(vq,"isObject"),l(xq,"toArray"),l(bq,"extend"),l(wq,"repeat"),l(kq,"isNegativeZero");var Pn={isNothing:f1,isObject:vq,toArray:xq,repeat:wq,isNegativeZero:kq,extend:bq};function FE(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function Ph(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=FE(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}l(FE,"formatError"),l(Ph,"YAMLException$1"),Ph.prototype=Object.create(Error.prototype),Ph.prototype.constructor=Ph,Ph.prototype.toString=l((function(t){return this.name+": "+FE(this,t)}),"toString");var ta=Ph;function wb(t,e,r,n,i){var a="",s="",o=Math.floor(i/2)-1;return n-e>o&&(e=n-o+(a=" ... ").length),r-n>o&&(r=n+o-(s=" ...").length),{str:a+t.slice(e,r).replace(/\t/g,"")+s,pos:n-e+a.length}}function kb(t,e){return Pn.repeat(" ",e-t.length)+t}function Tq(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r,n=/\r?\n|\r|\0/g,i=[0],a=[],s=-1;r=n.exec(t.buffer);)a.push(r.index),i.push(r.index+r[0].length),t.position<=r.index&&s<0&&(s=i.length-2);s<0&&(s=i.length-1);var o,u,h="",d=Math.min(t.line+e.linesAfter,a.length).toString().length,p=e.maxLength-(e.indent+d+3);for(o=1;o<=e.linesBefore&&!(s-o<0);o++)u=wb(t.buffer,i[s-o],a[s-o],t.position-(i[s]-i[s-o]),p),h=Pn.repeat(" ",e.indent)+kb((t.line-o+1).toString(),d)+" | "+u.str+`
`+h;for(u=wb(t.buffer,i[s],a[s],t.position,p),h+=Pn.repeat(" ",e.indent)+kb((t.line+1).toString(),d)+" | "+u.str+`
`,h+=Pn.repeat("-",e.indent+d+3+u.pos)+`^
`,o=1;o<=e.linesAfter&&!(s+o>=a.length);o++)u=wb(t.buffer,i[s+o],a[s+o],t.position-(i[s]-i[s+o]),p),h+=Pn.repeat(" ",e.indent)+kb((t.line+o+1).toString(),d)+" | "+u.str+`
`;return h.replace(/\n$/,"")}l(wb,"getLine"),l(kb,"padStart"),l(Tq,"makeSnippet");var uhe=Tq,hhe=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],dhe=["scalar","sequence","mapping"];function Eq(t){var e={};return t!==null&&Object.keys(t).forEach((function(r){t[r].forEach((function(n){e[String(n)]=r}))})),e}function _q(t,e){if(e=e||{},Object.keys(e).forEach((function(r){if(hhe.indexOf(r)===-1)throw new ta('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')})),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Eq(e.styleAliases||null),dhe.indexOf(this.kind)===-1)throw new ta('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}l(Eq,"compileStyleAliases"),l(_q,"Type$1");var ki=_q;function zk(t,e){var r=[];return t[e].forEach((function(n){var i=r.length;r.forEach((function(a,s){a.tag===n.tag&&a.kind===n.kind&&a.multi===n.multi&&(i=s)})),r[i]=n})),r}function hR(){var t,e,r={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function n(i){i.multi?(r.multi[i.kind].push(i),r.multi.fallback.push(i)):r[i.kind][i.tag]=r.fallback[i.tag]=i}for(l(n,"collectType"),t=0,e=arguments.length;t<e;t+=1)arguments[t].forEach(n);return r}function Tb(t){return this.extend(t)}l(zk,"compileList"),l(hR,"compileMap"),l(Tb,"Schema$1"),Tb.prototype.extend=l((function(t){var e=[],r=[];if(t instanceof ki)r.push(t);else if(Array.isArray(t))r=r.concat(t);else{if(!t||!Array.isArray(t.implicit)&&!Array.isArray(t.explicit))throw new ta("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.implicit&&(e=e.concat(t.implicit)),t.explicit&&(r=r.concat(t.explicit))}e.forEach((function(i){if(!(i instanceof ki))throw new ta("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new ta("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new ta("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),r.forEach((function(i){if(!(i instanceof ki))throw new ta("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var n=Object.create(Tb.prototype);return n.implicit=(this.implicit||[]).concat(e),n.explicit=(this.explicit||[]).concat(r),n.compiledImplicit=zk(n,"implicit"),n.compiledExplicit=zk(n,"explicit"),n.compiledTypeMap=hR(n.compiledImplicit,n.compiledExplicit),n}),"extend");var phe=Tb,fhe=new ki("tag:yaml.org,2002:str",{kind:"scalar",construct:l((function(t){return t!==null?t:""}),"construct")}),ghe=new ki("tag:yaml.org,2002:seq",{kind:"sequence",construct:l((function(t){return t!==null?t:[]}),"construct")}),mhe=new ki("tag:yaml.org,2002:map",{kind:"mapping",construct:l((function(t){return t!==null?t:{}}),"construct")}),yhe=new phe({explicit:[fhe,ghe,mhe]});function Cq(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function Sq(){return null}function Aq(t){return t===null}l(Cq,"resolveYamlNull"),l(Sq,"constructYamlNull"),l(Aq,"isNull");var vhe=new ki("tag:yaml.org,2002:null",{kind:"scalar",resolve:Cq,construct:Sq,predicate:Aq,represent:{canonical:l((function(){return"~"}),"canonical"),lowercase:l((function(){return"null"}),"lowercase"),uppercase:l((function(){return"NULL"}),"uppercase"),camelcase:l((function(){return"Null"}),"camelcase"),empty:l((function(){return""}),"empty")},defaultStyle:"lowercase"});function Lq(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function Nq(t){return t==="true"||t==="True"||t==="TRUE"}function Iq(t){return Object.prototype.toString.call(t)==="[object Boolean]"}l(Lq,"resolveYamlBoolean"),l(Nq,"constructYamlBoolean"),l(Iq,"isBoolean");var xhe=new ki("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Lq,construct:Nq,predicate:Iq,represent:{lowercase:l((function(t){return t?"true":"false"}),"lowercase"),uppercase:l((function(t){return t?"TRUE":"FALSE"}),"uppercase"),camelcase:l((function(t){return t?"True":"False"}),"camelcase")},defaultStyle:"lowercase"});function Rq(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function Mq(t){return 48<=t&&t<=55}function Dq(t){return 48<=t&&t<=57}function Oq(t){if(t===null)return!1;var e,r=t.length,n=0,i=!1;if(!r)return!1;if((e=t[n])!=="-"&&e!=="+"||(e=t[++n]),e==="0"){if(n+1===r)return!0;if((e=t[++n])==="b"){for(n++;n<r;n++)if((e=t[n])!=="_"){if(e!=="0"&&e!=="1")return!1;i=!0}return i&&e!=="_"}if(e==="x"){for(n++;n<r;n++)if((e=t[n])!=="_"){if(!Rq(t.charCodeAt(n)))return!1;i=!0}return i&&e!=="_"}if(e==="o"){for(n++;n<r;n++)if((e=t[n])!=="_"){if(!Mq(t.charCodeAt(n)))return!1;i=!0}return i&&e!=="_"}}if(e==="_")return!1;for(;n<r;n++)if((e=t[n])!=="_"){if(!Dq(t.charCodeAt(n)))return!1;i=!0}return!(!i||e==="_")}function Pq(t){var e,r=t,n=1;if(r.indexOf("_")!==-1&&(r=r.replace(/_/g,"")),(e=r[0])!=="-"&&e!=="+"||(e==="-"&&(n=-1),e=(r=r.slice(1))[0]),r==="0")return 0;if(e==="0"){if(r[1]==="b")return n*parseInt(r.slice(2),2);if(r[1]==="x")return n*parseInt(r.slice(2),16);if(r[1]==="o")return n*parseInt(r.slice(2),8)}return n*parseInt(r,10)}function Bq(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1==0&&!Pn.isNegativeZero(t)}l(Rq,"isHexCode"),l(Mq,"isOctCode"),l(Dq,"isDecCode"),l(Oq,"resolveYamlInteger"),l(Pq,"constructYamlInteger"),l(Bq,"isInteger");var bhe=new ki("tag:yaml.org,2002:int",{kind:"scalar",resolve:Oq,construct:Pq,predicate:Bq,represent:{binary:l((function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)}),"binary"),octal:l((function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)}),"octal"),decimal:l((function(t){return t.toString(10)}),"decimal"),hexadecimal:l((function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}),"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),whe=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function $q(t){return t!==null&&!(!whe.test(t)||t[t.length-1]==="_")}function Fq(t){var e,r;return r=(e=t.replace(/_/g,"").toLowerCase())[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}l($q,"resolveYamlFloat"),l(Fq,"constructYamlFloat");var khe=/^[-+]?[0-9]+e/;function zq(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Pn.isNegativeZero(t))return"-0.0";return r=t.toString(10),khe.test(r)?r.replace("e",".e"):r}function Gq(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!=0||Pn.isNegativeZero(t))}l(zq,"representYamlFloat"),l(Gq,"isFloat");var The=new ki("tag:yaml.org,2002:float",{kind:"scalar",resolve:$q,construct:Fq,predicate:Gq,represent:zq,defaultStyle:"lowercase"}),Uq=yhe.extend({implicit:[vhe,xhe,bhe,The]}),Ehe=Uq,qq=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),jq=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Wq(t){return t!==null&&(qq.exec(t)!==null||jq.exec(t)!==null)}function Yq(t){var e,r,n,i,a,s,o,u,h=0,d=null;if((e=qq.exec(t))===null&&(e=jq.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(a=+e[4],s=+e[5],o=+e[6],e[7]){for(h=e[7].slice(0,3);h.length<3;)h+="0";h=+h}return e[9]&&(d=6e4*(60*+e[10]+ +(e[11]||0)),e[9]==="-"&&(d=-d)),u=new Date(Date.UTC(r,n,i,a,s,o,h)),d&&u.setTime(u.getTime()-d),u}function Vq(t){return t.toISOString()}l(Wq,"resolveYamlTimestamp"),l(Yq,"constructYamlTimestamp"),l(Vq,"representYamlTimestamp");var _he=new ki("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Wq,construct:Yq,instanceOf:Date,represent:Vq});function Hq(t){return t==="<<"||t===null}l(Hq,"resolveYamlMerge");var Che=new ki("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Hq}),g1=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Xq(t){if(t===null)return!1;var e,r,n=0,i=t.length,a=g1;for(r=0;r<i;r++)if(!((e=a.indexOf(t.charAt(r)))>64)){if(e<0)return!1;n+=6}return n%8==0}function Kq(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,a=g1,s=0,o=[];for(e=0;e<i;e++)e%4==0&&e&&(o.push(s>>16&255),o.push(s>>8&255),o.push(255&s)),s=s<<6|a.indexOf(n.charAt(e));return(r=i%4*6)===0?(o.push(s>>16&255),o.push(s>>8&255),o.push(255&s)):r===18?(o.push(s>>10&255),o.push(s>>2&255)):r===12&&o.push(s>>4&255),new Uint8Array(o)}function Zq(t){var e,r,n="",i=0,a=t.length,s=g1;for(e=0;e<a;e++)e%3==0&&e&&(n+=s[i>>18&63],n+=s[i>>12&63],n+=s[i>>6&63],n+=s[63&i]),i=(i<<8)+t[e];return(r=a%3)===0?(n+=s[i>>18&63],n+=s[i>>12&63],n+=s[i>>6&63],n+=s[63&i]):r===2?(n+=s[i>>10&63],n+=s[i>>4&63],n+=s[i<<2&63],n+=s[64]):r===1&&(n+=s[i>>2&63],n+=s[i<<4&63],n+=s[64],n+=s[64]),n}function Qq(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}l(Xq,"resolveYamlBinary"),l(Kq,"constructYamlBinary"),l(Zq,"representYamlBinary"),l(Qq,"isBinary");var She=new ki("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Xq,construct:Kq,predicate:Qq,represent:Zq}),Ahe=Object.prototype.hasOwnProperty,Lhe=Object.prototype.toString;function Jq(t){if(t===null)return!0;var e,r,n,i,a,s=[],o=t;for(e=0,r=o.length;e<r;e+=1){if(n=o[e],a=!1,Lhe.call(n)!=="[object Object]")return!1;for(i in n)if(Ahe.call(n,i)){if(a)return!1;a=!0}if(!a||s.indexOf(i)!==-1)return!1;s.push(i)}return!0}function ej(t){return t!==null?t:[]}l(Jq,"resolveYamlOmap"),l(ej,"constructYamlOmap");var Nhe=new ki("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Jq,construct:ej}),Ihe=Object.prototype.toString;function tj(t){if(t===null)return!0;var e,r,n,i,a,s=t;for(a=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],Ihe.call(n)!=="[object Object]"||(i=Object.keys(n)).length!==1)return!1;a[e]=[i[0],n[i[0]]]}return!0}function rj(t){if(t===null)return[];var e,r,n,i,a,s=t;for(a=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),a[e]=[i[0],n[i[0]]];return a}l(tj,"resolveYamlPairs"),l(rj,"constructYamlPairs");var Rhe=new ki("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:tj,construct:rj}),Mhe=Object.prototype.hasOwnProperty;function nj(t){if(t===null)return!0;var e,r=t;for(e in r)if(Mhe.call(r,e)&&r[e]!==null)return!1;return!0}function ij(t){return t!==null?t:{}}l(nj,"resolveYamlSet"),l(ij,"constructYamlSet");var Dhe=new ki("tag:yaml.org,2002:set",{kind:"mapping",resolve:nj,construct:ij}),aj=Ehe.extend({implicit:[_he,Che],explicit:[She,Nhe,Rhe,Dhe]}),Xl=Object.prototype.hasOwnProperty,Ohe=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Phe=/[\x85\u2028\u2029]/,Bhe=/[,\[\]\{\}]/,sj=/^(?:!|!!|![a-z\-]+!)$/i,oj=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function zE(t){return Object.prototype.toString.call(t)}function vs(t){return t===10||t===13}function Gl(t){return t===9||t===32}function Oi(t){return t===9||t===32||t===10||t===13}function nu(t){return t===44||t===91||t===93||t===123||t===125}function lj(t){var e;return 48<=t&&t<=57?t-48:97<=(e=32|t)&&e<=102?e-97+10:-1}function cj(t){return t===120?2:t===117?4:t===85?8:0}function uj(t){return 48<=t&&t<=57?t-48:-1}function GE(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?"":t===76?"\u2028":t===80?"\u2029":""}function hj(t){return t<=65535?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023))}l(zE,"_class"),l(vs,"is_EOL"),l(Gl,"is_WHITE_SPACE"),l(Oi,"is_WS_OR_EOL"),l(nu,"is_FLOW_INDICATOR"),l(lj,"fromHexCode"),l(cj,"escapedHexLen"),l(uj,"fromDecimalCode"),l(GE,"simpleEscapeSequence"),l(hj,"charFromCodepoint");var kc,dj=new Array(256),pj=new Array(256);for(kc=0;kc<256;kc++)dj[kc]=GE(kc)?1:0,pj[kc]=GE(kc);function fj(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||aj,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function m1(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=uhe(r),new ta(e,r)}function Mt(t,e){throw m1(t,e)}function k2(t,e){t.onWarning&&t.onWarning.call(null,m1(t,e))}l(fj,"State$1"),l(m1,"generateError"),l(Mt,"throwError"),l(k2,"throwWarning");var dR={YAML:l((function(t,e,r){var n,i,a;t.version!==null&&Mt(t,"duplication of %YAML directive"),r.length!==1&&Mt(t,"YAML directive accepts exactly one argument"),(n=/^([0-9]+)\.([0-9]+)$/.exec(r[0]))===null&&Mt(t,"ill-formed argument of the YAML directive"),i=parseInt(n[1],10),a=parseInt(n[2],10),i!==1&&Mt(t,"unacceptable YAML version of the document"),t.version=r[0],t.checkLineBreaks=a<2,a!==1&&a!==2&&k2(t,"unsupported YAML version of the document")}),"handleYamlDirective"),TAG:l((function(t,e,r){var n,i;r.length!==2&&Mt(t,"TAG directive accepts exactly two arguments"),n=r[0],i=r[1],sj.test(n)||Mt(t,"ill-formed tag handle (first argument) of the TAG directive"),Xl.call(t.tagMap,n)&&Mt(t,'there is a previously declared suffix for "'+n+'" tag handle'),oj.test(i)||Mt(t,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch{Mt(t,"tag prefix is malformed: "+i)}t.tagMap[n]=i}),"handleTagDirective")};function Oo(t,e,r,n){var i,a,s,o;if(e<r){if(o=t.input.slice(e,r),n)for(i=0,a=o.length;i<a;i+=1)(s=o.charCodeAt(i))===9||32<=s&&s<=1114111||Mt(t,"expected valid JSON character");else Ohe.test(o)&&Mt(t,"the stream contains non-printable characters");t.result+=o}}function UE(t,e,r,n){var i,a,s,o;for(Pn.isObject(r)||Mt(t,"cannot merge mappings; the provided source object is unacceptable"),s=0,o=(i=Object.keys(r)).length;s<o;s+=1)a=i[s],Xl.call(e,a)||(e[a]=r[a],n[a]=!0)}function iu(t,e,r,n,i,a,s,o,u){var h,d;if(Array.isArray(i))for(h=0,d=(i=Array.prototype.slice.call(i)).length;h<d;h+=1)Array.isArray(i[h])&&Mt(t,"nested arrays are not supported inside keys"),typeof i=="object"&&zE(i[h])==="[object Object]"&&(i[h]="[object Object]");if(typeof i=="object"&&zE(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(a))for(h=0,d=a.length;h<d;h+=1)UE(t,e,a[h],r);else UE(t,e,a,r);else t.json||Xl.call(r,i)||!Xl.call(e,i)||(t.line=s||t.line,t.lineStart=o||t.lineStart,t.position=u||t.position,Mt(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:a}):e[i]=a,delete r[i];return e}function M6(t){var e;(e=t.input.charCodeAt(t.position))===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):Mt(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function bn(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Gl(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(!vs(i))break;for(M6(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position)}return r!==-1&&n!==0&&t.lineIndent<r&&k2(t,"deficient indentation"),n}function vv(t){var e,r=t.position;return!((e=t.input.charCodeAt(r))!==45&&e!==46||e!==t.input.charCodeAt(r+1)||e!==t.input.charCodeAt(r+2)||(r+=3,(e=t.input.charCodeAt(r))!==0&&!Oi(e)))}function D6(t,e){e===1?t.result+=" ":e>1&&(t.result+=Pn.repeat(`
`,e-1))}function gj(t,e,r){var n,i,a,s,o,u,h,d,p=t.kind,f=t.result;if(Oi(d=t.input.charCodeAt(t.position))||nu(d)||d===35||d===38||d===42||d===33||d===124||d===62||d===39||d===34||d===37||d===64||d===96||(d===63||d===45)&&(Oi(n=t.input.charCodeAt(t.position+1))||r&&nu(n)))return!1;for(t.kind="scalar",t.result="",i=a=t.position,s=!1;d!==0;){if(d===58){if(Oi(n=t.input.charCodeAt(t.position+1))||r&&nu(n))break}else if(d===35){if(Oi(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&vv(t)||r&&nu(d))break;if(vs(d)){if(o=t.line,u=t.lineStart,h=t.lineIndent,bn(t,!1,-1),t.lineIndent>=e){s=!0,d=t.input.charCodeAt(t.position);continue}t.position=a,t.line=o,t.lineStart=u,t.lineIndent=h;break}}s&&(Oo(t,i,a,!1),D6(t,t.line-o),i=a=t.position,s=!1),Gl(d)||(a=t.position+1),d=t.input.charCodeAt(++t.position)}return Oo(t,i,a,!1),!!t.result||(t.kind=p,t.result=f,!1)}function mj(t,e){var r,n,i;if((r=t.input.charCodeAt(t.position))!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39){if(Oo(t,n,t.position,!0),(r=t.input.charCodeAt(++t.position))!==39)return!0;n=t.position,t.position++,i=t.position}else vs(r)?(Oo(t,n,i,!0),D6(t,bn(t,!1,e)),n=i=t.position):t.position===t.lineStart&&vv(t)?Mt(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);Mt(t,"unexpected end of the stream within a single quoted scalar")}function yj(t,e){var r,n,i,a,s,o;if((o=t.input.charCodeAt(t.position))!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(o=t.input.charCodeAt(t.position))!==0;){if(o===34)return Oo(t,r,t.position,!0),t.position++,!0;if(o===92){if(Oo(t,r,t.position,!0),vs(o=t.input.charCodeAt(++t.position)))bn(t,!1,e);else if(o<256&&dj[o])t.result+=pj[o],t.position++;else if((s=cj(o))>0){for(i=s,a=0;i>0;i--)(s=lj(o=t.input.charCodeAt(++t.position)))>=0?a=(a<<4)+s:Mt(t,"expected hexadecimal character");t.result+=hj(a),t.position++}else Mt(t,"unknown escape sequence");r=n=t.position}else vs(o)?(Oo(t,r,n,!0),D6(t,bn(t,!1,e)),r=n=t.position):t.position===t.lineStart&&vv(t)?Mt(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}Mt(t,"unexpected end of the stream within a double quoted scalar")}function vj(t,e){var r,n,i,a,s,o,u,h,d,p,f,g,m=!0,y=t.tag,v=t.anchor,x=Object.create(null);if((g=t.input.charCodeAt(t.position))===91)s=93,h=!1,a=[];else{if(g!==123)return!1;s=125,h=!0,a={}}for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),g=t.input.charCodeAt(++t.position);g!==0;){if(bn(t,!0,e),(g=t.input.charCodeAt(t.position))===s)return t.position++,t.tag=y,t.anchor=v,t.kind=h?"mapping":"sequence",t.result=a,!0;m?g===44&&Mt(t,"expected the node content, but found ','"):Mt(t,"missed comma between flow collection entries"),f=null,o=u=!1,g===63&&Oi(t.input.charCodeAt(t.position+1))&&(o=u=!0,t.position++,bn(t,!0,e)),r=t.line,n=t.lineStart,i=t.position,ju(t,e,1,!1,!0),p=t.tag,d=t.result,bn(t,!0,e),g=t.input.charCodeAt(t.position),!u&&t.line!==r||g!==58||(o=!0,g=t.input.charCodeAt(++t.position),bn(t,!0,e),ju(t,e,1,!1,!0),f=t.result),h?iu(t,a,x,p,d,f,r,n,i):o?a.push(iu(t,null,x,p,d,f,r,n,i)):a.push(d),bn(t,!0,e),(g=t.input.charCodeAt(t.position))===44?(m=!0,g=t.input.charCodeAt(++t.position)):m=!1}Mt(t,"unexpected end of the stream within a flow collection")}function xj(t,e){var r,n,i,a,s=1,o=!1,u=!1,h=e,d=0,p=!1;if((a=t.input.charCodeAt(t.position))===124)n=!1;else{if(a!==62)return!1;n=!0}for(t.kind="scalar",t.result="";a!==0;)if((a=t.input.charCodeAt(++t.position))===43||a===45)s===1?s=a===43?3:2:Mt(t,"repeat of a chomping mode identifier");else{if(!((i=uj(a))>=0))break;i===0?Mt(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):u?Mt(t,"repeat of an indentation width identifier"):(h=e+i-1,u=!0)}if(Gl(a)){do a=t.input.charCodeAt(++t.position);while(Gl(a));if(a===35)do a=t.input.charCodeAt(++t.position);while(!vs(a)&&a!==0)}for(;a!==0;){for(M6(t),t.lineIndent=0,a=t.input.charCodeAt(t.position);(!u||t.lineIndent<h)&&a===32;)t.lineIndent++,a=t.input.charCodeAt(++t.position);if(!u&&t.lineIndent>h&&(h=t.lineIndent),vs(a))d++;else{if(t.lineIndent<h){s===3?t.result+=Pn.repeat(`
`,o?1+d:d):s===1&&o&&(t.result+=`
`);break}for(n?Gl(a)?(p=!0,t.result+=Pn.repeat(`
`,o?1+d:d)):p?(p=!1,t.result+=Pn.repeat(`
`,d+1)):d===0?o&&(t.result+=" "):t.result+=Pn.repeat(`
`,d):t.result+=Pn.repeat(`
`,o?1+d:d),o=!0,u=!0,d=0,r=t.position;!vs(a)&&a!==0;)a=t.input.charCodeAt(++t.position);Oo(t,r,t.position,!1)}}return!0}function qE(t,e){var r,n,i=t.tag,a=t.anchor,s=[],o=!1;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),n=t.input.charCodeAt(t.position);n!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Mt(t,"tab characters must not be used in indentation")),n===45)&&Oi(t.input.charCodeAt(t.position+1));)if(o=!0,t.position++,bn(t,!0,-1)&&t.lineIndent<=e)s.push(null),n=t.input.charCodeAt(t.position);else if(r=t.line,ju(t,e,3,!1,!0),s.push(t.result),bn(t,!0,-1),n=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&n!==0)Mt(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break;return!!o&&(t.tag=i,t.anchor=a,t.kind="sequence",t.result=s,!0)}function bj(t,e,r){var n,i,a,s,o,u,h,d=t.tag,p=t.anchor,f={},g=Object.create(null),m=null,y=null,v=null,x=!1,b=!1;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=f),h=t.input.charCodeAt(t.position);h!==0;){if(x||t.firstTabInLine===-1||(t.position=t.firstTabInLine,Mt(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),a=t.line,h!==63&&h!==58||!Oi(n)){if(s=t.line,o=t.lineStart,u=t.position,!ju(t,r,2,!1,!0))break;if(t.line===a){for(h=t.input.charCodeAt(t.position);Gl(h);)h=t.input.charCodeAt(++t.position);if(h===58)Oi(h=t.input.charCodeAt(++t.position))||Mt(t,"a whitespace character is expected after the key-value separator within a block mapping"),x&&(iu(t,f,g,m,y,null,s,o,u),m=y=v=null),b=!0,x=!1,i=!1,m=t.tag,y=t.result;else{if(!b)return t.tag=d,t.anchor=p,!0;Mt(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!b)return t.tag=d,t.anchor=p,!0;Mt(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else h===63?(x&&(iu(t,f,g,m,y,null,s,o,u),m=y=v=null),b=!0,x=!0,i=!0):x?(x=!1,i=!0):Mt(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,h=n;if((t.line===a||t.lineIndent>e)&&(x&&(s=t.line,o=t.lineStart,u=t.position),ju(t,e,4,!0,i)&&(x?y=t.result:v=t.result),x||(iu(t,f,g,m,y,v,s,o,u),m=y=v=null),bn(t,!0,-1),h=t.input.charCodeAt(t.position)),(t.line===a||t.lineIndent>e)&&h!==0)Mt(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return x&&iu(t,f,g,m,y,null,s,o,u),b&&(t.tag=d,t.anchor=p,t.kind="mapping",t.result=f),b}function wj(t){var e,r,n,i,a=!1,s=!1;if((i=t.input.charCodeAt(t.position))!==33)return!1;if(t.tag!==null&&Mt(t,"duplication of a tag property"),(i=t.input.charCodeAt(++t.position))===60?(a=!0,i=t.input.charCodeAt(++t.position)):i===33?(s=!0,r="!!",i=t.input.charCodeAt(++t.position)):r="!",e=t.position,a){do i=t.input.charCodeAt(++t.position);while(i!==0&&i!==62);t.position<t.length?(n=t.input.slice(e,t.position),i=t.input.charCodeAt(++t.position)):Mt(t,"unexpected end of the stream within a verbatim tag")}else{for(;i!==0&&!Oi(i);)i===33&&(s?Mt(t,"tag suffix cannot contain exclamation marks"):(r=t.input.slice(e-1,t.position+1),sj.test(r)||Mt(t,"named tag handle cannot contain such characters"),s=!0,e=t.position+1)),i=t.input.charCodeAt(++t.position);n=t.input.slice(e,t.position),Bhe.test(n)&&Mt(t,"tag suffix cannot contain flow indicator characters")}n&&!oj.test(n)&&Mt(t,"tag name cannot contain such characters: "+n);try{n=decodeURIComponent(n)}catch{Mt(t,"tag name is malformed: "+n)}return a?t.tag=n:Xl.call(t.tagMap,r)?t.tag=t.tagMap[r]+n:r==="!"?t.tag="!"+n:r==="!!"?t.tag="tag:yaml.org,2002:"+n:Mt(t,'undeclared tag handle "'+r+'"'),!0}function kj(t){var e,r;if((r=t.input.charCodeAt(t.position))!==38)return!1;for(t.anchor!==null&&Mt(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Oi(r)&&!nu(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Mt(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function Tj(t){var e,r,n;if((n=t.input.charCodeAt(t.position))!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Oi(n)&&!nu(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Mt(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),Xl.call(t.anchorMap,r)||Mt(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],bn(t,!0,-1),!0}function ju(t,e,r,n,i){var a,s,o,u,h,d,p,f,g,m=1,y=!1,v=!1;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,a=s=o=r===4||r===3,n&&bn(t,!0,-1)&&(y=!0,t.lineIndent>e?m=1:t.lineIndent===e?m=0:t.lineIndent<e&&(m=-1)),m===1)for(;wj(t)||kj(t);)bn(t,!0,-1)?(y=!0,o=a,t.lineIndent>e?m=1:t.lineIndent===e?m=0:t.lineIndent<e&&(m=-1)):o=!1;if(o&&(o=y||i),m!==1&&r!==4||(f=r===1||r===2?e:e+1,g=t.position-t.lineStart,m===1?o&&(qE(t,g)||bj(t,g,f))||vj(t,f)?v=!0:(s&&xj(t,f)||mj(t,f)||yj(t,f)?v=!0:Tj(t)?(v=!0,t.tag===null&&t.anchor===null||Mt(t,"alias node should not have any properties")):gj(t,f,r===1)&&(v=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):m===0&&(v=o&&qE(t,g))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&Mt(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),u=0,h=t.implicitTypes.length;u<h;u+=1)if((p=t.implicitTypes[u]).resolve(t.result)){t.result=p.construct(t.result),t.tag=p.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Xl.call(t.typeMap[t.kind||"fallback"],t.tag))p=t.typeMap[t.kind||"fallback"][t.tag];else for(p=null,u=0,h=(d=t.typeMap.multi[t.kind||"fallback"]).length;u<h;u+=1)if(t.tag.slice(0,d[u].tag.length)===d[u].tag){p=d[u];break}p||Mt(t,"unknown tag !<"+t.tag+">"),t.result!==null&&p.kind!==t.kind&&Mt(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"'),p.resolve(t.result,t.tag)?(t.result=p.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):Mt(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||v}function Ej(t){var e,r,n,i,a=t.position,s=!1;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(i=t.input.charCodeAt(t.position))!==0&&(bn(t,!0,-1),i=t.input.charCodeAt(t.position),!(t.lineIndent>0||i!==37));){for(s=!0,i=t.input.charCodeAt(++t.position),e=t.position;i!==0&&!Oi(i);)i=t.input.charCodeAt(++t.position);for(n=[],(r=t.input.slice(e,t.position)).length<1&&Mt(t,"directive name must not be less than one character in length");i!==0;){for(;Gl(i);)i=t.input.charCodeAt(++t.position);if(i===35){do i=t.input.charCodeAt(++t.position);while(i!==0&&!vs(i));break}if(vs(i))break;for(e=t.position;i!==0&&!Oi(i);)i=t.input.charCodeAt(++t.position);n.push(t.input.slice(e,t.position))}i!==0&&M6(t),Xl.call(dR,r)?dR[r](t,r,n):k2(t,'unknown document directive "'+r+'"')}bn(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,bn(t,!0,-1)):s&&Mt(t,"directives end mark is expected"),ju(t,t.lineIndent-1,4,!1,!0),bn(t,!0,-1),t.checkLineBreaks&&Phe.test(t.input.slice(a,t.position))&&k2(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&vv(t)?t.input.charCodeAt(t.position)===46&&(t.position+=3,bn(t,!0,-1)):t.position<t.length-1&&Mt(t,"end of the stream or a document separator is expected")}function y1(t,e){e=e||{},(t=String(t)).length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new fj(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,Mt(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)Ej(r);return r.documents}function $he(t,e,r){e!==null&&typeof e=="object"&&r===void 0&&(r=e,e=null);var n=y1(t,r);if(typeof e!="function")return n;for(var i=0,a=n.length;i<a;i+=1)e(n[i])}function _j(t,e){var r=y1(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new ta("expected a single document in the stream, but found more")}}l(Oo,"captureSegment"),l(UE,"mergeMappings"),l(iu,"storeMappingPair"),l(M6,"readLineBreak"),l(bn,"skipSeparationSpace"),l(vv,"testDocumentSeparator"),l(D6,"writeFoldedLines"),l(gj,"readPlainScalar"),l(mj,"readSingleQuotedScalar"),l(yj,"readDoubleQuotedScalar"),l(vj,"readFlowCollection"),l(xj,"readBlockScalar"),l(qE,"readBlockSequence"),l(bj,"readBlockMapping"),l(wj,"readTagProperty"),l(kj,"readAnchorProperty"),l(Tj,"readAlias"),l(ju,"composeNode"),l(Ej,"readDocument"),l(y1,"loadDocuments"),l($he,"loadAll$1"),l(_j,"load$1");var Fhe={load:_j},Cj=Object.prototype.toString,Sj=Object.prototype.hasOwnProperty,zhe={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},Ghe=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Uhe=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Aj(t,e){var r,n,i,a,s,o,u;if(e===null)return{};for(r={},i=0,a=(n=Object.keys(e)).length;i<a;i+=1)s=n[i],o=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),(u=t.compiledTypeMap.fallback[s])&&Sj.call(u.styleAliases,o)&&(o=u.styleAliases[o]),r[s]=o;return r}function Lj(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else{if(!(t<=4294967295))throw new ta("code point within a string may not be greater than 0xFFFFFFFF");r="U",n=8}return"\\"+r+Pn.repeat("0",n-e.length)+e}l(Aj,"compileStyleMap"),l(Lj,"encodeHex");function Nj(t){this.schema=t.schema||aj,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Pn.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=Aj(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?2:1,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function jE(t,e){for(var r,n=Pn.repeat(" ",e),i=0,a=-1,s="",o=t.length;i<o;)(a=t.indexOf(`
`,i))===-1?(r=t.slice(i),i=o):(r=t.slice(i,a+1),i=a+1),r.length&&r!==`
`&&(s+=n),s+=r;return s}function U4(t,e){return`
`+Pn.repeat(" ",t.indent*e)}function Ij(t,e){var r,n;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(t.implicitTypes[r].resolve(e))return!0;return!1}function T2(t){return t===32||t===9}function F0(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==65279||65536<=t&&t<=1114111}function WE(t){return F0(t)&&t!==65279&&t!==13&&t!==10}function YE(t,e,r){var n=WE(t),i=n&&!T2(t);return(r?n:n&&t!==44&&t!==91&&t!==93&&t!==123&&t!==125)&&t!==35&&!(e===58&&!i)||WE(e)&&!T2(e)&&t===35||e===58&&i}function Rj(t){return F0(t)&&t!==65279&&!T2(t)&&t!==45&&t!==63&&t!==58&&t!==44&&t!==91&&t!==93&&t!==123&&t!==125&&t!==35&&t!==38&&t!==42&&t!==33&&t!==124&&t!==61&&t!==62&&t!==39&&t!==34&&t!==37&&t!==64&&t!==96}function Mj(t){return!T2(t)&&t!==58}function Jh(t,e){var r,n=t.charCodeAt(e);return n>=55296&&n<=56319&&e+1<t.length&&(r=t.charCodeAt(e+1))>=56320&&r<=57343?1024*(n-55296)+r-56320+65536:n}function v1(t){return/^\n* /.test(t)}l(Nj,"State"),l(jE,"indentString"),l(U4,"generateNextLine"),l(Ij,"testImplicitResolving"),l(T2,"isWhitespace"),l(F0,"isPrintable"),l(WE,"isNsCharOrWhitespace"),l(YE,"isPlainSafe"),l(Rj,"isPlainSafeFirst"),l(Mj,"isPlainSafeLast"),l(Jh,"codePointAt"),l(v1,"needIndentIndicator");function Dj(t,e,r,n,i,a,s,o){var u,h=0,d=null,p=!1,f=!1,g=n!==-1,m=-1,y=Rj(Jh(t,0))&&Mj(Jh(t,t.length-1));if(e||s)for(u=0;u<t.length;h>=65536?u+=2:u++){if(!F0(h=Jh(t,u)))return 5;y=y&&YE(h,d,o),d=h}else{for(u=0;u<t.length;h>=65536?u+=2:u++){if((h=Jh(t,u))===10)p=!0,g&&(f=f||u-m-1>n&&t[m+1]!==" ",m=u);else if(!F0(h))return 5;y=y&&YE(h,d,o),d=h}f=f||g&&u-m-1>n&&t[m+1]!==" "}return p||f?r>9&&v1(t)?5:s?a===2?5:2:f?4:3:!y||s||i(t)?a===2?5:2:1}function Oj(t,e,r,n,i){t.dump=(function(){if(e.length===0)return t.quotingType===2?'""':"''";if(!t.noCompatMode&&(Ghe.indexOf(e)!==-1||Uhe.test(e)))return t.quotingType===2?'"'+e+'"':"'"+e+"'";var a=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-a),o=n||t.flowLevel>-1&&r>=t.flowLevel;function u(h){return Ij(t,h)}switch(l(u,"testAmbiguity"),Dj(e,o,t.indent,s,u,t.quotingType,t.forceQuotes&&!n,i)){case 1:return e;case 2:return"'"+e.replace(/'/g,"''")+"'";case 3:return"|"+VE(e,t.indent)+HE(jE(e,a));case 4:return">"+VE(e,t.indent)+HE(jE(Pj(e,s),a));case 5:return'"'+Bj(e)+'"';default:throw new ta("impossible error: invalid scalar style")}})()}function VE(t,e){var r=v1(t)?String(e):"",n=t[t.length-1]===`
`;return r+(n&&(t[t.length-2]===`
`||t===`
`)?"+":n?"":"-")+`
`}function HE(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function Pj(t,e){for(var r,n,i,a=/(\n+)([^\n]*)/g,s=(r=(r=t.indexOf(`
`))!==-1?r:t.length,a.lastIndex=r,XE(t.slice(0,r),e)),o=t[0]===`
`||t[0]===" ";i=a.exec(t);){var u=i[1],h=i[2];n=h[0]===" ",s+=u+(o||n||h===""?"":`
`)+XE(h,e),o=n}return s}function XE(t,e){if(t===""||t[0]===" ")return t;for(var r,n,i=/ [^ ]/g,a=0,s=0,o=0,u="";r=i.exec(t);)(o=r.index)-a>e&&(n=s>a?s:o,u+=`
`+t.slice(a,n),a=n+1),s=o;return u+=`
`,t.length-a>e&&s>a?u+=t.slice(a,s)+`
`+t.slice(s+1):u+=t.slice(a),u.slice(1)}function Bj(t){for(var e,r="",n=0,i=0;i<t.length;n>=65536?i+=2:i++)n=Jh(t,i),!(e=zhe[n])&&F0(n)?(r+=t[i],n>=65536&&(r+=t[i+1])):r+=e||Lj(n);return r}function $j(t,e,r){var n,i,a,s="",o=t.tag;for(n=0,i=r.length;n<i;n+=1)a=r[n],t.replacer&&(a=t.replacer.call(r,String(n),a)),(no(t,e,a,!1,!1)||a===void 0&&no(t,e,null,!1,!1))&&(s!==""&&(s+=","+(t.condenseFlow?"":" ")),s+=t.dump);t.tag=o,t.dump="["+s+"]"}function KE(t,e,r,n){var i,a,s,o="",u=t.tag;for(i=0,a=r.length;i<a;i+=1)s=r[i],t.replacer&&(s=t.replacer.call(r,String(i),s)),(no(t,e+1,s,!0,!0,!1,!0)||s===void 0&&no(t,e+1,null,!0,!0,!1,!0))&&(n&&o===""||(o+=U4(t,e)),t.dump&&t.dump.charCodeAt(0)===10?o+="-":o+="- ",o+=t.dump);t.tag=u,t.dump=o||"[]"}function Fj(t,e,r){var n,i,a,s,o,u="",h=t.tag,d=Object.keys(r);for(n=0,i=d.length;n<i;n+=1)o="",u!==""&&(o+=", "),t.condenseFlow&&(o+='"'),s=r[a=d[n]],t.replacer&&(s=t.replacer.call(r,a,s)),no(t,e,a,!1,!1)&&(t.dump.length>1024&&(o+="? "),o+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),no(t,e,s,!1,!1)&&(u+=o+=t.dump));t.tag=h,t.dump="{"+u+"}"}function zj(t,e,r,n){var i,a,s,o,u,h,d="",p=t.tag,f=Object.keys(r);if(t.sortKeys===!0)f.sort();else if(typeof t.sortKeys=="function")f.sort(t.sortKeys);else if(t.sortKeys)throw new ta("sortKeys must be a boolean or a function");for(i=0,a=f.length;i<a;i+=1)h="",n&&d===""||(h+=U4(t,e)),o=r[s=f[i]],t.replacer&&(o=t.replacer.call(r,s,o)),no(t,e+1,s,!0,!0,!0)&&((u=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024)&&(t.dump&&t.dump.charCodeAt(0)===10?h+="?":h+="? "),h+=t.dump,u&&(h+=U4(t,e)),no(t,e+1,o,!0,u)&&(t.dump&&t.dump.charCodeAt(0)===10?h+=":":h+=": ",d+=h+=t.dump));t.tag=p,t.dump=d||"{}"}function ZE(t,e,r){var n,i,a,s,o,u;for(a=0,s=(i=r?t.explicitTypes:t.implicitTypes).length;a<s;a+=1)if(((o=i[a]).instanceOf||o.predicate)&&(!o.instanceOf||typeof e=="object"&&e instanceof o.instanceOf)&&(!o.predicate||o.predicate(e))){if(r?o.multi&&o.representName?t.tag=o.representName(e):t.tag=o.tag:t.tag="?",o.represent){if(u=t.styleMap[o.tag]||o.defaultStyle,Cj.call(o.represent)==="[object Function]")n=o.represent(e,u);else{if(!Sj.call(o.represent,u))throw new ta("!<"+o.tag+'> tag resolver accepts not "'+u+'" style');n=o.represent[u](e,u)}t.dump=n}return!0}return!1}function no(t,e,r,n,i,a,s){t.tag=null,t.dump=r,ZE(t,r,!1)||ZE(t,r,!0);var o,u=Cj.call(t.dump),h=n;n&&(n=t.flowLevel<0||t.flowLevel>e);var d,p,f=u==="[object Object]"||u==="[object Array]";if(f&&(p=(d=t.duplicates.indexOf(r))!==-1),(t.tag!==null&&t.tag!=="?"||p||t.indent!==2&&e>0)&&(i=!1),p&&t.usedDuplicates[d])t.dump="*ref_"+d;else{if(f&&p&&!t.usedDuplicates[d]&&(t.usedDuplicates[d]=!0),u==="[object Object]")n&&Object.keys(t.dump).length!==0?(zj(t,e,t.dump,i),p&&(t.dump="&ref_"+d+t.dump)):(Fj(t,e,t.dump),p&&(t.dump="&ref_"+d+" "+t.dump));else if(u==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?KE(t,e-1,t.dump,i):KE(t,e,t.dump,i),p&&(t.dump="&ref_"+d+t.dump)):($j(t,e,t.dump),p&&(t.dump="&ref_"+d+" "+t.dump));else{if(u!=="[object String]"){if(u==="[object Undefined]"||t.skipInvalid)return!1;throw new ta("unacceptable kind of an object to dump "+u)}t.tag!=="?"&&Oj(t,t.dump,e,a,h)}t.tag!==null&&t.tag!=="?"&&(o=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),o=t.tag[0]==="!"?"!"+o:o.slice(0,18)==="tag:yaml.org,2002:"?"!!"+o.slice(18):"!<"+o+">",t.dump=o+" "+t.dump)}return!0}function pR(t,e){var r,n,i=[],a=[];for(q4(t,i,a),r=0,n=a.length;r<n;r+=1)e.duplicates.push(i[a[r]]);e.usedDuplicates=new Array(n)}function q4(t,e,r){var n,i,a;if(t!==null&&typeof t=="object")if((i=e.indexOf(t))!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,a=t.length;i<a;i+=1)q4(t[i],e,r);else for(i=0,a=(n=Object.keys(t)).length;i<a;i+=1)q4(t[n[i]],e,r)}l(Dj,"chooseScalarStyle"),l(Oj,"writeScalar"),l(VE,"blockHeader"),l(HE,"dropEndingNewline"),l(Pj,"foldString"),l(XE,"foldLine"),l(Bj,"escapeString"),l($j,"writeFlowSequence"),l(KE,"writeBlockSequence"),l(Fj,"writeFlowMapping"),l(zj,"writeBlockMapping"),l(ZE,"detectType"),l(no,"writeNode"),l(pR,"getDuplicateReferences"),l(q4,"inspectNode"),l((function(t,e){var r=new Nj(e=e||{});r.noRefs||pR(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),no(r,0,n,!0,!0)?r.dump+`
`:""}),"dump$1"),l((function(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}),"renamed");var x1=Uq,b1=Fhe.load,qhe=qn({"../../node_modules/.pnpm/ms@2.1.3/node_modules/ms/index.js"(t,e){var r=1e3,n=60*r,i=60*n,a=24*i;function s(d){if(!((d=String(d)).length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(p){var f=parseFloat(p[1]);switch((p[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*f;case"weeks":case"week":case"w":return 6048e5*f;case"days":case"day":case"d":return f*a;case"hours":case"hour":case"hrs":case"hr":case"h":return f*i;case"minutes":case"minute":case"mins":case"min":case"m":return f*n;case"seconds":case"second":case"secs":case"sec":case"s":return f*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function o(d){var p=Math.abs(d);return p>=a?Math.round(d/a)+"d":p>=i?Math.round(d/i)+"h":p>=n?Math.round(d/n)+"m":p>=r?Math.round(d/r)+"s":d+"ms"}function u(d){var p=Math.abs(d);return p>=a?h(d,p,a,"day"):p>=i?h(d,p,i,"hour"):p>=n?h(d,p,n,"minute"):p>=r?h(d,p,r,"second"):d+" ms"}function h(d,p,f,g){var m=p>=1.5*f;return Math.round(d/f)+" "+g+(m?"s":"")}e.exports=function(d,p){p=p||{};var f=typeof d;if(f==="string"&&d.length>0)return s(d);if(f==="number"&&isFinite(d))return p.long?u(d):o(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))},l(s,"parse"),l(o,"fmtShort"),l(u,"fmtLong"),l(h,"plural")}}),jhe=qn({"../../node_modules/.pnpm/debug@4.4.0_supports-color@8.1.1/node_modules/debug/src/common.js"(t,e){function r(n){function i(g){let m=0;for(let y=0;y<g.length;y++)m=(m<<5)-m+g.charCodeAt(y),m|=0;return a.colors[Math.abs(m)%a.colors.length]}function a(g){let m,y,v,x=null;function b(...w){if(!b.enabled)return;const T=b,k=Number(new Date),C=k-(m||k);T.diff=C,T.prev=m,T.curr=k,m=k,w[0]=a.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let E=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,((_,S)=>{if(_==="%%")return"%";E++;const N=a.formatters[S];if(typeof N=="function"){const O=w[E];_=N.call(T,O),w.splice(E,1),E--}return _})),a.formatArgs.call(T,w),(T.log||a.log).apply(T,w)}return l(b,"debug"),b.namespace=g,b.useColors=a.useColors(),b.color=a.selectColor(g),b.extend=s,b.destroy=a.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:l((()=>x!==null?x:(y!==a.namespaces&&(y=a.namespaces,v=a.enabled(g)),v)),"get"),set:l((w=>{x=w}),"set")}),typeof a.init=="function"&&a.init(b),b}function s(g,m){const y=a(this.namespace+(m===void 0?":":m)+g);return y.log=this.log,y}function o(g){a.save(g),a.namespaces=g,a.names=[],a.skips=[];const m=(typeof g=="string"?g:"").trim().replace(" ",",").split(",").filter(Boolean);for(const y of m)y[0]==="-"?a.skips.push(y.slice(1)):a.names.push(y)}function u(g,m){let y=0,v=0,x=-1,b=0;for(;y<g.length;)if(v<m.length&&(m[v]===g[y]||m[v]==="*"))m[v]==="*"?(x=v,b=y,v++):(y++,v++);else{if(x===-1)return!1;v=x+1,b++,y=b}for(;v<m.length&&m[v]==="*";)v++;return v===m.length}function h(){const g=[...a.names,...a.skips.map((m=>"-"+m))].join(",");return a.enable(""),g}function d(g){for(const m of a.skips)if(u(g,m))return!1;for(const m of a.names)if(u(g,m))return!0;return!1}function p(g){return g instanceof Error?g.stack||g.message:g}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return a.debug=a,a.default=a,a.coerce=p,a.disable=h,a.enable=o,a.enabled=d,a.humanize=qhe(),a.destroy=f,Object.keys(n).forEach((g=>{a[g]=n[g]})),a.names=[],a.skips=[],a.formatters={},l(i,"selectColor"),a.selectColor=i,l(a,"createDebug"),l(s,"extend"),l(o,"enable"),l(u,"matchesTemplate"),l(h,"disable"),l(d,"enabled"),l(p,"coerce"),l(f,"destroy"),a.enable(a.load()),a}l(r,"setup"),e.exports=r}}),Whe=qn({"../../node_modules/.pnpm/debug@4.4.0_supports-color@8.1.1/node_modules/debug/src/browser.js"(t,e){function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const h="color: "+this.color;u.splice(1,0,h,"color: inherit");let d=0,p=0;u[0].replace(/%[a-zA-Z%]/g,(f=>{f!=="%%"&&(d++,f==="%c"&&(p=d))})),u.splice(p,0,h)}function i(u){try{u?t.storage.setItem("debug",u):t.storage.removeItem("debug")}catch{}}function a(){let u;try{u=t.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=Qle.DEBUG),u}function s(){try{return localStorage}catch{}}t.formatArgs=n,t.save=i,t.load=a,t.useColors=r,t.storage=s(),t.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],l(r,"useColors"),l(n,"formatArgs"),t.log=console.debug||console.log||(()=>{}),l(i,"save"),l(a,"load"),l(s,"localstorage"),e.exports=jhe()(t);var{formatters:o}=e.exports;o.j=function(u){try{return JSON.stringify(u)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}}}}),Yhe=Object.freeze({left:0,top:0,width:16,height:16}),j4=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),Gj=Object.freeze({...Yhe,...j4}),Vhe=Object.freeze({...Gj,body:"",hidden:!1}),Hhe=Object.freeze({width:null,height:null}),Xhe=Object.freeze({...Hhe,...j4}),Khe=l(((t,e,r,n="")=>{const i=t.split(":");if(t.slice(0,1)==="@"){if(i.length<2||i.length>3)return null;n=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const o=i.pop(),u=i.pop(),h={provider:i.length>0?i[0]:n,prefix:u,name:o};return e&&!Gk(h)?null:h}const a=i[0],s=a.split("-");if(s.length>1){const o={provider:n,prefix:s.shift(),name:s.join("-")};return e&&!Gk(o)?null:o}if(r&&n===""){const o={provider:n,prefix:"",name:a};return e&&!Gk(o,r)?null:o}return null}),"stringToIcon"),Gk=l(((t,e)=>!!t&&!(!(e&&t.prefix===""||t.prefix)||!t.name)),"validateIconName");function Uj(t,e){const r={};!t.hFlip!=!e.hFlip&&(r.hFlip=!0),!t.vFlip!=!e.vFlip&&(r.vFlip=!0);const n=((t.rotate||0)+(e.rotate||0))%4;return n&&(r.rotate=n),r}function QE(t,e){const r=Uj(t,e);for(const n in Vhe)n in j4?n in t&&!(n in r)&&(r[n]=j4[n]):n in e?r[n]=e[n]:n in t&&(r[n]=t[n]);return r}function qj(t,e){const r=t.icons,n=t.aliases||Object.create(null),i=Object.create(null);function a(s){if(r[s])return i[s]=[];if(!(s in i)){i[s]=null;const o=n[s]&&n[s].parent,u=o&&a(o);u&&(i[s]=[o].concat(u))}return i[s]}return l(a,"resolve"),(e||Object.keys(r).concat(Object.keys(n))).forEach(a),i}function JE(t,e,r){const n=t.icons,i=t.aliases||Object.create(null);let a={};function s(o){a=QE(n[o]||i[o],a)}return l(s,"parse"),s(e),r.forEach(s),QE(t,a)}function jj(t,e){if(t.icons[e])return JE(t,e,[]);const r=qj(t,[e])[e];return r?JE(t,e,r):null}l(Uj,"mergeIconTransformations"),l(QE,"mergeIconData"),l(qj,"getIconsTree"),l(JE,"internalGetIconData"),l(jj,"getIconData");var Zhe=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Qhe=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function e_(t,e,r){if(e===1)return t;if(r=r||100,typeof t=="number")return Math.ceil(t*e*r)/r;if(typeof t!="string")return t;const n=t.split(Zhe);if(n===null||!n.length)return t;const i=[];let a=n.shift(),s=Qhe.test(a);for(;;){if(s){const o=parseFloat(a);isNaN(o)?i.push(a):i.push(Math.ceil(o*e*r)/r)}else i.push(a);if(a=n.shift(),a===void 0)return i.join("");s=!s}}function Wj(t,e="defs"){let r="";const n=t.indexOf("<"+e);for(;n>=0;){const i=t.indexOf(">",n),a=t.indexOf("</"+e);if(i===-1||a===-1)break;const s=t.indexOf(">",a);if(s===-1)break;r+=t.slice(i+1,a).trim(),t=t.slice(0,n).trim()+t.slice(s+1)}return{defs:r,content:t}}function Yj(t,e){return t?"<defs>"+t+"</defs>"+e:e}function Vj(t,e,r){const n=Wj(t);return Yj(n.defs,e+n.content+r)}l(e_,"calculateSize"),l(Wj,"splitSVGDefs"),l(Yj,"mergeDefsAndContent"),l(Vj,"wrapSVGContent");var Jhe=l((t=>t==="unset"||t==="undefined"||t==="none"),"isUnsetKeyword");function Hj(t,e){const r={...Gj,...t},n={...Xhe,...e},i={left:r.left,top:r.top,width:r.width,height:r.height};let a=r.body;[r,n].forEach((y=>{const v=[],x=y.hFlip,b=y.vFlip;let w,T=y.rotate;switch(x?b?T+=2:(v.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),v.push("scale(-1 1)"),i.top=i.left=0):b&&(v.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),v.push("scale(1 -1)"),i.top=i.left=0),T<0&&(T-=4*Math.floor(T/4)),T%=4,T){case 1:w=i.height/2+i.top,v.unshift("rotate(90 "+w.toString()+" "+w.toString()+")");break;case 2:v.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:w=i.width/2+i.left,v.unshift("rotate(-90 "+w.toString()+" "+w.toString()+")")}T%2==1&&(i.left!==i.top&&(w=i.left,i.left=i.top,i.top=w),i.width!==i.height&&(w=i.width,i.width=i.height,i.height=w)),v.length&&(a=Vj(a,'<g transform="'+v.join(" ")+'">',"</g>"))}));const s=n.width,o=n.height,u=i.width,h=i.height;let d,p;s===null?(p=o===null?"1em":o==="auto"?h:o,d=e_(p,u/h)):(d=s==="auto"?u:s,p=o===null?e_(d,h/u):o==="auto"?h:o);const f={},g=l(((y,v)=>{Jhe(v)||(f[y]=v.toString())}),"setAttr");g("width",d),g("height",p);const m=[i.left,i.top,u,h];return f.viewBox=m.join(" "),{attributes:f,viewBox:m,body:a}}l(Hj,"iconToSVG");var ede=/\sid="(\S+)"/g,tde="IconifyId"+Date.now().toString(16)+(16777216*Math.random()|0).toString(16),rde=0;function Xj(t,e=tde){const r=[];let n;for(;n=ede.exec(t);)r.push(n[1]);if(!r.length)return t;const i="suffix"+(16777216*Math.random()|Date.now()).toString(16);return r.forEach((a=>{const s=typeof e=="function"?e(a):e+(rde++).toString(),o=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+o+')([")]|\\.[a-z])',"g"),"$1"+s+i+"$3")})),t=t.replace(new RegExp(i,"g"),"")}function Kj(t,e){let r=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const n in e)r+=" "+n+'="'+e[n]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+r+">"+t+"</svg>"}l(Xj,"replaceIDs"),l(Kj,"iconToHTML"),Ci(Whe());var Zj={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},t_=new Map,Qj=new Map,Jj=l((t=>{for(const e of t){if(!e.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(ee.debug("Registering icon pack:",e.name),"loader"in e)Qj.set(e.name,e.loader);else{if(!("icons"in e))throw ee.error("Invalid icon loader:",e),new Error('Invalid icon loader. Must have either "icons" or "loader" property.');t_.set(e.name,e.icons)}}}),"registerIconPacks"),nde=l((async(t,e)=>{const r=Khe(t,!0,e!==void 0);if(!r)throw new Error(`Invalid icon name: ${t}`);const n=r.prefix||e;if(!n)throw new Error(`Icon name must contain a prefix: ${t}`);let i=t_.get(n);if(!i){const s=Qj.get(n);if(!s)throw new Error(`Icon set not found: ${r.prefix}`);try{i={...await s(),prefix:n},t_.set(n,i)}catch(o){throw ee.error(o),new Error(`Failed to load icon set: ${r.prefix}`)}}const a=jj(i,r.name);if(!a)throw new Error(`Icon not found: ${t}`);return a}),"getRegisteredIconData"),Wu=l((async(t,e)=>{let r;try{r=await nde(t,e?.fallbackPrefix)}catch(i){ee.error(i),r=Zj}const n=Hj(r,e);return Kj(Xj(n.body),n.attributes)}),"getIconSVG"),xv=l((({flowchart:t})=>{const e=t?.subGraphTitleMargin?.top??0,r=t?.subGraphTitleMargin?.bottom??0;return{subGraphTitleTopMargin:e,subGraphTitleBottomMargin:r,subGraphTitleTotalMargin:e+r}}),"getSubGraphTitleMargins"),ide=qn({"../../node_modules/.pnpm/@braintree+sanitize-url@7.1.0/node_modules/@braintree/sanitize-url/dist/constants.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.BLANK_URL=t.relativeFirstCharacters=t.whitespaceEscapeCharsRegex=t.urlSchemeRegex=t.ctrlCharactersRegex=t.htmlCtrlEntityRegex=t.htmlEntitiesRegex=t.invalidProtocolRegex=void 0,t.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,t.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,t.htmlCtrlEntityRegex=/&(newline|tab);/gi,t.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,t.urlSchemeRegex=/^.+(:|&colon;)/gim,t.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,t.relativeFirstCharacters=[".","/"],t.BLANK_URL="about:blank"}}),bv=qn({"../../node_modules/.pnpm/@braintree+sanitize-url@7.1.0/node_modules/@braintree/sanitize-url/dist/index.js"(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeUrl=void 0;var e=ide();function r(o){return e.relativeFirstCharacters.indexOf(o[0])>-1}function n(o){return o.replace(e.ctrlCharactersRegex,"").replace(e.htmlEntitiesRegex,(function(u,h){return String.fromCharCode(h)}))}function i(o){return URL.canParse(o)}function a(o){try{return decodeURIComponent(o)}catch{return o}}function s(o){if(!o)return e.BLANK_URL;var u,h=a(o.trim());do u=(h=a(h=n(h).replace(e.htmlCtrlEntityRegex,"").replace(e.ctrlCharactersRegex,"").replace(e.whitespaceEscapeCharsRegex,"").trim())).match(e.ctrlCharactersRegex)||h.match(e.htmlEntitiesRegex)||h.match(e.htmlCtrlEntityRegex)||h.match(e.whitespaceEscapeCharsRegex);while(u&&u.length>0);var d=h;if(!d)return e.BLANK_URL;if(r(d))return d;var p=d.trimStart(),f=p.match(e.urlSchemeRegex);if(!f)return d;var g=f[0].toLowerCase().trim();if(e.invalidProtocolRegex.test(g))return e.BLANK_URL;var m=p.replace(/\\/g,"/");if(g==="mailto:"||g.includes("://"))return m;if(g==="http:"||g==="https:"){if(!i(m))return e.BLANK_URL;var y=new URL(m);return y.protocol=y.protocol.toLowerCase(),y.hostname=y.hostname.toLowerCase(),y.toString()}return m}l(r,"isRelativeUrlWithoutProtocol"),l(n,"decodeHtmlCharacters"),l(i,"isValidUrl"),l(a,"decodeURI"),l(s,"sanitizeUrl"),t.sanitizeUrl=s}}),eW=typeof global=="object"&&global&&global.Object===Object&&global,ade=typeof self=="object"&&self&&self.Object===Object&&self,Ls=eW||ade||Function("return this")(),Qa=Ls.Symbol,tW=Object.prototype,sde=tW.hasOwnProperty,ode=tW.toString,Im=Qa?Qa.toStringTag:void 0;function rW(t){var e=sde.call(t,Im),r=t[Im];try{t[Im]=void 0;var n=!0}catch{}var i=ode.call(t);return n&&(e?t[Im]=r:delete t[Im]),i}l(rW,"getRawTag");var lde=rW,cde=Object.prototype.toString;function nW(t){return cde.call(t)}l(nW,"objectToString");var ude=nW,fR=Qa?Qa.toStringTag:void 0;function iW(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":fR&&fR in Object(t)?lde(t):ude(t)}l(iW,"baseGetTag");var rl=iW;function aW(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}l(aW,"isObject");var oa=aW;function sW(t){if(!oa(t))return!1;var e=rl(t);return e=="[object Function]"||e=="[object GeneratorFunction]"||e=="[object AsyncFunction]"||e=="[object Proxy]"}l(sW,"isFunction");var gR,Ja=sW,Uk=Ls["__core-js_shared__"],mR=(gR=/[^.]+$/.exec(Uk&&Uk.keys&&Uk.keys.IE_PROTO||""))?"Symbol(src)_1."+gR:"";function oW(t){return!!mR&&mR in t}l(oW,"isMasked");var hde=oW,dde=Function.prototype.toString;function lW(t){if(t!=null){try{return dde.call(t)}catch{}try{return t+""}catch{}}return""}l(lW,"toSource");var nh=lW,pde=/^\[object .+?Constructor\]$/,fde=Function.prototype,gde=Object.prototype,mde=fde.toString,yde=gde.hasOwnProperty,vde=RegExp("^"+mde.call(yde).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function cW(t){return!(!oa(t)||hde(t))&&(Ja(t)?vde:pde).test(nh(t))}l(cW,"baseIsNative");var xde=cW;function uW(t,e){return t?.[e]}l(uW,"getValue");var bde=uW;function hW(t,e){var r=bde(t,e);return xde(r)?r:void 0}l(hW,"getNative");var ih=hW,E2=ih(Object,"create");function dW(){this.__data__=E2?E2(null):{},this.size=0}l(dW,"hashClear");var wde=dW;function pW(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}l(pW,"hashDelete");var kde=pW,Tde=Object.prototype.hasOwnProperty;function fW(t){var e=this.__data__;if(E2){var r=e[t];return r==="__lodash_hash_undefined__"?void 0:r}return Tde.call(e,t)?e[t]:void 0}l(fW,"hashGet");var Ede=fW,_de=Object.prototype.hasOwnProperty;function gW(t){var e=this.__data__;return E2?e[t]!==void 0:_de.call(e,t)}l(gW,"hashHas");var Cde=gW;function mW(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=E2&&e===void 0?"__lodash_hash_undefined__":e,this}l(mW,"hashSet");var Sde=mW;function Mc(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}l(Mc,"Hash"),Mc.prototype.clear=wde,Mc.prototype.delete=kde,Mc.prototype.get=Ede,Mc.prototype.has=Cde,Mc.prototype.set=Sde;var yR=Mc;function yW(){this.__data__=[],this.size=0}l(yW,"listCacheClear");var Ade=yW;function vW(t,e){return t===e||t!=t&&e!=e}l(vW,"eq");var sm=vW;function xW(t,e){for(var r=t.length;r--;)if(sm(t[r][0],e))return r;return-1}l(xW,"assocIndexOf");var O6=xW,Lde=Array.prototype.splice;function bW(t){var e=this.__data__,r=O6(e,t);return!(r<0)&&(r==e.length-1?e.pop():Lde.call(e,r,1),--this.size,!0)}l(bW,"listCacheDelete");var Nde=bW;function wW(t){var e=this.__data__,r=O6(e,t);return r<0?void 0:e[r][1]}l(wW,"listCacheGet");var Ide=wW;function kW(t){return O6(this.__data__,t)>-1}l(kW,"listCacheHas");var Rde=kW;function TW(t,e){var r=this.__data__,n=O6(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}l(TW,"listCacheSet");var Mde=TW;function Dc(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}l(Dc,"ListCache"),Dc.prototype.clear=Ade,Dc.prototype.delete=Nde,Dc.prototype.get=Ide,Dc.prototype.has=Rde,Dc.prototype.set=Mde;var P6=Dc,_2=ih(Ls,"Map");function EW(){this.size=0,this.__data__={hash:new yR,map:new(_2||P6),string:new yR}}l(EW,"mapCacheClear");var Dde=EW;function _W(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}l(_W,"isKeyable");var Ode=_W;function CW(t,e){var r=t.__data__;return Ode(e)?r[typeof e=="string"?"string":"hash"]:r.map}l(CW,"getMapData");var B6=CW;function SW(t){var e=B6(this,t).delete(t);return this.size-=e?1:0,e}l(SW,"mapCacheDelete");var Pde=SW;function AW(t){return B6(this,t).get(t)}l(AW,"mapCacheGet");var Bde=AW;function LW(t){return B6(this,t).has(t)}l(LW,"mapCacheHas");var $de=LW;function NW(t,e){var r=B6(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}l(NW,"mapCacheSet");var Fde=NW;function Oc(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}l(Oc,"MapCache"),Oc.prototype.clear=Dde,Oc.prototype.delete=Pde,Oc.prototype.get=Bde,Oc.prototype.has=$de,Oc.prototype.set=Fde;var $6=Oc;function W4(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var r=l((function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var s=t.apply(this,n);return r.cache=a.set(i,s)||a,s}),"memoized");return r.cache=new(W4.Cache||$6),r}l(W4,"memoize"),W4.Cache=$6;var F6=W4;function IW(t){return function(){return t}}l(IW,"constant");var ed=IW;function RW(){this.__data__=new P6,this.size=0}l(RW,"stackClear");var zde=RW;function MW(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}l(MW,"stackDelete");var Gde=MW;function DW(t){return this.__data__.get(t)}l(DW,"stackGet");var Ude=DW;function OW(t){return this.__data__.has(t)}l(OW,"stackHas");var qde=OW;function PW(t,e){var r=this.__data__;if(r instanceof P6){var n=r.__data__;if(!_2||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new $6(n)}return r.set(t,e),this.size=r.size,this}l(PW,"stackSet");var jde=PW;function Pc(t){var e=this.__data__=new P6(t);this.size=e.size}l(Pc,"Stack"),Pc.prototype.clear=zde,Pc.prototype.delete=Gde,Pc.prototype.get=Ude,Pc.prototype.has=qde,Pc.prototype.set=jde;var Xd=Pc,Y4=(function(){try{var t=ih(Object,"defineProperty");return t({},"",{}),t}catch{}})();function BW(t,e,r){e=="__proto__"&&Y4?Y4(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}l(BW,"baseAssignValue");var wv=BW;function $W(t,e,r){(r!==void 0&&!sm(t[e],r)||r===void 0&&!(e in t))&&wv(t,e,r)}l($W,"assignMergeValue");var r_=$W;function FW(t){return function(e,r,n){for(var i=-1,a=Object(e),s=n(e),o=s.length;o--;){var u=s[t?o:++i];if(r(a[u],u,a)===!1)break}return e}}l(FW,"createBaseFor");var w1=FW(),zW=typeof exports=="object"&&exports&&!exports.nodeType&&exports,vR=zW&&typeof module=="object"&&module&&!module.nodeType&&module,xR=vR&&vR.exports===zW?Ls.Buffer:void 0,bR=xR?xR.allocUnsafe:void 0;function GW(t,e){if(e)return t.slice();var r=t.length,n=bR?bR(r):new t.constructor(r);return t.copy(n),n}l(GW,"cloneBuffer");var UW=GW,V4=Ls.Uint8Array;function qW(t){var e=new t.constructor(t.byteLength);return new V4(e).set(new V4(t)),e}l(qW,"cloneArrayBuffer");var k1=qW;function jW(t,e){var r=e?k1(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}l(jW,"cloneTypedArray");var WW=jW;function YW(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}l(YW,"copyArray");var VW=YW,wR=Object.create,Wde=(function(){function t(){}return l(t,"object"),function(e){if(!oa(e))return{};if(wR)return wR(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}})(),Yde=Wde;function HW(t,e){return function(r){return t(e(r))}}l(HW,"overArg");var XW=HW,T1=XW(Object.getPrototypeOf,Object),Vde=Object.prototype;function KW(t){var e=t&&t.constructor;return t===(typeof e=="function"&&e.prototype||Vde)}l(KW,"isPrototype");var kv=KW;function ZW(t){return typeof t.constructor!="function"||kv(t)?{}:Yde(T1(t))}l(ZW,"initCloneObject");var QW=ZW;function JW(t){return t!=null&&typeof t=="object"}l(JW,"isObjectLike");var es=JW;function eY(t){return es(t)&&rl(t)=="[object Arguments]"}l(eY,"baseIsArguments");var kR=eY,tY=Object.prototype,Hde=tY.hasOwnProperty,Xde=tY.propertyIsEnumerable,Kde=kR((function(){return arguments})())?kR:function(t){return es(t)&&Hde.call(t,"callee")&&!Xde.call(t,"callee")},z0=Kde,rr=Array.isArray;function rY(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=9007199254740991}l(rY,"isLength");var E1=rY;function nY(t){return t!=null&&E1(t.length)&&!Ja(t)}l(nY,"isArrayLike");var Ns=nY;function iY(t){return es(t)&&Ns(t)}l(iY,"isArrayLikeObject");var H4=iY;function aY(){return!1}l(aY,"stubFalse");var Zde=aY,sY=typeof exports=="object"&&exports&&!exports.nodeType&&exports,TR=sY&&typeof module=="object"&&module&&!module.nodeType&&module,ER=TR&&TR.exports===sY?Ls.Buffer:void 0,G0=(ER?ER.isBuffer:void 0)||Zde,Qde=Function.prototype,Jde=Object.prototype,oY=Qde.toString,epe=Jde.hasOwnProperty,tpe=oY.call(Object);function lY(t){if(!es(t)||rl(t)!="[object Object]")return!1;var e=T1(t);if(e===null)return!0;var r=epe.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&oY.call(r)==tpe}l(lY,"isPlainObject");var rpe=lY,Ur={};function cY(t){return es(t)&&E1(t.length)&&!!Ur[rl(t)]}Ur["[object Float32Array]"]=Ur["[object Float64Array]"]=Ur["[object Int8Array]"]=Ur["[object Int16Array]"]=Ur["[object Int32Array]"]=Ur["[object Uint8Array]"]=Ur["[object Uint8ClampedArray]"]=Ur["[object Uint16Array]"]=Ur["[object Uint32Array]"]=!0,Ur["[object Arguments]"]=Ur["[object Array]"]=Ur["[object ArrayBuffer]"]=Ur["[object Boolean]"]=Ur["[object DataView]"]=Ur["[object Date]"]=Ur["[object Error]"]=Ur["[object Function]"]=Ur["[object Map]"]=Ur["[object Number]"]=Ur["[object Object]"]=Ur["[object RegExp]"]=Ur["[object Set]"]=Ur["[object String]"]=Ur["[object WeakMap]"]=!1,l(cY,"baseIsTypedArray");var npe=cY;function uY(t){return function(e){return t(e)}}l(uY,"baseUnary");var om=uY,hY=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ry=hY&&typeof module=="object"&&module&&!module.nodeType&&module,qk=Ry&&Ry.exports===hY&&eW.process,Kl=(function(){try{var t=Ry&&Ry.require&&Ry.require("util").types;return t||qk&&qk.binding&&qk.binding("util")}catch{}})(),_R=Kl&&Kl.isTypedArray,z6=_R?om(_R):npe;function dY(t,e){if((e!=="constructor"||typeof t[e]!="function")&&e!="__proto__")return t[e]}l(dY,"safeGet");var n_=dY,ipe=Object.prototype.hasOwnProperty;function pY(t,e,r){var n=t[e];ipe.call(t,e)&&sm(n,r)&&(r!==void 0||e in t)||wv(t,e,r)}l(pY,"assignValue");var Tv=pY;function fY(t,e,r,n){var i=!r;r||(r={});for(var a=-1,s=e.length;++a<s;){var o=e[a],u=n?n(r[o],t[o],o,r,t):void 0;u===void 0&&(u=t[o]),i?wv(r,o,u):Tv(r,o,u)}return r}l(fY,"copyObject");var lm=fY;function gY(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}l(gY,"baseTimes");var ape=gY,spe=/^(?:0|[1-9]\d*)$/;function mY(t,e){var r=typeof t;return!!(e=e??9007199254740991)&&(r=="number"||r!="symbol"&&spe.test(t))&&t>-1&&t%1==0&&t<e}l(mY,"isIndex");var G6=mY,ope=Object.prototype.hasOwnProperty;function yY(t,e){var r=rr(t),n=!r&&z0(t),i=!r&&!n&&G0(t),a=!r&&!n&&!i&&z6(t),s=r||n||i||a,o=s?ape(t.length,String):[],u=o.length;for(var h in t)!e&&!ope.call(t,h)||s&&(h=="length"||i&&(h=="offset"||h=="parent")||a&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||G6(h,u))||o.push(h);return o}l(yY,"arrayLikeKeys");var vY=yY;function xY(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}l(xY,"nativeKeysIn");var lpe=xY,cpe=Object.prototype.hasOwnProperty;function bY(t){if(!oa(t))return lpe(t);var e=kv(t),r=[];for(var n in t)(n!="constructor"||!e&&cpe.call(t,n))&&r.push(n);return r}l(bY,"baseKeysIn");var upe=bY;function wY(t){return Ns(t)?vY(t,!0):upe(t)}l(wY,"keysIn");var ah=wY;function kY(t){return lm(t,ah(t))}l(kY,"toPlainObject");var hpe=kY;function TY(t,e,r,n,i,a,s){var o=n_(t,r),u=n_(e,r),h=s.get(u);if(h)r_(t,r,h);else{var d=a?a(o,u,r+"",t,e,s):void 0,p=d===void 0;if(p){var f=rr(u),g=!f&&G0(u),m=!f&&!g&&z6(u);d=u,f||g||m?rr(o)?d=o:H4(o)?d=VW(o):g?(p=!1,d=UW(u,!0)):m?(p=!1,d=WW(u,!0)):d=[]:rpe(u)||z0(u)?(d=o,z0(o)?d=hpe(o):oa(o)&&!Ja(o)||(d=QW(u))):p=!1}p&&(s.set(u,d),i(d,u,n,a,s),s.delete(u)),r_(t,r,d)}}l(TY,"baseMergeDeep");var dpe=TY;function _1(t,e,r,n,i){t!==e&&w1(e,(function(a,s){if(i||(i=new Xd),oa(a))dpe(t,e,s,r,_1,n,i);else{var o=n?n(n_(t,s),a,s+"",t,e,i):void 0;o===void 0&&(o=a),r_(t,s,o)}}),ah)}l(_1,"baseMerge");var ppe=_1;function EY(t){return t}l(EY,"identity");var $o=EY;function _Y(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}l(_Y,"apply");var fpe=_Y,CR=Math.max;function CY(t,e,r){return e=CR(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,a=CR(n.length-e,0),s=Array(a);++i<a;)s[i]=n[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=n[i];return o[e]=r(s),fpe(t,this,o)}}l(CY,"overRest");var SY=CY,gpe=Y4?function(t,e){return Y4(t,"toString",{configurable:!0,enumerable:!1,value:ed(e),writable:!0})}:$o,mpe=gpe,ype=Date.now;function AY(t){var e=0,r=0;return function(){var n=ype(),i=16-(n-r);if(r=n,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}l(AY,"shortOut");var LY=AY(mpe);function NY(t,e){return LY(SY(t,e,$o),t+"")}l(NY,"baseRest");var Ev=NY;function IY(t,e,r){if(!oa(r))return!1;var n=typeof e;return!!(n=="number"?Ns(r)&&G6(e,r.length):n=="string"&&e in r)&&sm(r[e],t)}l(IY,"isIterateeCall");var Yu=IY;function RY(t){return Ev((function(e,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,s=i>2?r[2]:void 0;for(a=t.length>3&&typeof a=="function"?(i--,a):void 0,s&&Yu(r[0],r[1],s)&&(a=i<3?void 0:a,i=1),e=Object(e);++n<i;){var o=r[n];o&&t(e,o,n,a)}return e}))}l(RY,"createAssigner");var MY=RY,vpe=MY((function(t,e,r){ppe(t,e,r)})),X4=vpe,xpe=Ci(bv()),bpe={curveBasis:B0,curveBasisClosed:aU,curveBasisOpen:sU,curveBumpX:n1,curveBumpY:i1,curveBundle:Zue,curveCardinalClosed:Que,curveCardinalOpen:Jue,curveCardinal:oU,curveCatmullRomClosed:ehe,curveCatmullRomOpen:the,curveCatmullRom:lU,curveLinear:v2,curveLinearClosed:cU,curveMonotoneX:a1,curveMonotoneY:s1,curveNatural:o1,curveStep:l1,curveStepAfter:u1,curveStepBefore:c1},wpe=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,kpe=l((function(t,e){const r=DY(t,/(?:init\b)|(?:initialize\b)/);let n={};if(Array.isArray(r)){const s=r.map((o=>o.args));w4(s),n=On(n,[...s])}else n=r.args;if(!n)return;let i=y8(t,e);const a="config";return n[a]!==void 0&&(i==="flowchart-v2"&&(i="flowchart"),n[i]=n[a],delete n[a]),n}),"detectInit"),DY=l((function(t,e=null){try{const r=new RegExp(`[%]{2}(?![{]${wpe.source})(?=[}][%]{2}).*
`,"ig");let n;t=t.trim().replace(r,"").replace(/'/gm,'"'),ee.debug(`Detecting diagram directive${e!==null?" type:"+e:""} based on the text:${t}`);const i=[];for(;(n=Cy.exec(t))!==null;)if(n.index===Cy.lastIndex&&Cy.lastIndex++,n&&!e||e&&n[1]?.match(e)||e&&n[2]?.match(e)){const a=n[1]?n[1]:n[2],s=n[3]?n[3].trim():n[4]?JSON.parse(n[4].trim()):null;i.push({type:a,args:s})}return i.length===0?{type:t,args:null}:i.length===1?i[0]:i}catch(r){return ee.error(`ERROR: ${r.message} - Unable to parse directive type: '${e}' based on the text: '${t}'`),{type:void 0,args:null}}}),"detectDirective"),Tpe=l((function(t){return t.replace(Cy,"")}),"removeDirectives"),Epe=l((function(t,e){for(const[r,n]of e.entries())if(n.match(t))return r;return-1}),"isSubstringInArray");function C1(t,e){if(!t)return e;const r=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return bpe[r]??e}function OY(t,e){const r=t.trim();if(r)return e.securityLevel!=="loose"?(0,xpe.sanitizeUrl)(r):r}l(C1,"interpolateToCurve"),l(OY,"formatUrl");var _pe=l(((t,...e)=>{const r=t.split("."),n=r.length-1,i=r[n];let a=window;for(let s=0;s<n;s++)if(a=a[r[s]],!a)return void ee.error(`Function name: ${t} not found in window`);a[i](...e)}),"runFunc");function S1(t,e){return t&&e?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):0}function PY(t){let e,r=0;return t.forEach((n=>{r+=S1(n,e),e=n})),A1(t,r/2)}function BY(t){return t.length===1?t[0]:PY(t)}l(S1,"distance"),l(PY,"traverseEdge"),l(BY,"calcLabelPosition");var SR=l(((t,e=2)=>{const r=Math.pow(10,e);return Math.round(t*r)/r}),"roundNumber"),A1=l(((t,e)=>{let r,n=e;for(const i of t){if(r){const a=S1(i,r);if(a===0)return r;if(a<n)n-=a;else{const s=n/a;if(s<=0)return r;if(s>=1)return{x:i.x,y:i.y};if(s>0&&s<1)return{x:SR((1-s)*r.x+s*i.x,5),y:SR((1-s)*r.y+s*i.y,5)}}}r=i}throw new Error("Could not find a suitable point for the given distance")}),"calculatePoint"),Cpe=l(((t,e,r)=>{ee.info(`our points ${JSON.stringify(e)}`),e[0]!==r&&(e=e.reverse());const n=A1(e,25),i=t?10:5,a=Math.atan2(e[0].y-n.y,e[0].x-n.x),s={x:0,y:0};return s.x=Math.sin(a)*i+(e[0].x+n.x)/2,s.y=-Math.cos(a)*i+(e[0].y+n.y)/2,s}),"calcCardinalityPosition");function $Y(t,e,r){const n=structuredClone(r);ee.info("our points",n),e!=="start_left"&&e!=="start_right"&&n.reverse();const i=A1(n,25+t),a=10+.5*t,s=Math.atan2(n[0].y-i.y,n[0].x-i.x),o={x:0,y:0};return e==="start_left"?(o.x=Math.sin(s+Math.PI)*a+(n[0].x+i.x)/2,o.y=-Math.cos(s+Math.PI)*a+(n[0].y+i.y)/2):e==="end_right"?(o.x=Math.sin(s-Math.PI)*a+(n[0].x+i.x)/2-5,o.y=-Math.cos(s-Math.PI)*a+(n[0].y+i.y)/2-5):e==="end_left"?(o.x=Math.sin(s)*a+(n[0].x+i.x)/2-5,o.y=-Math.cos(s)*a+(n[0].y+i.y)/2-5):(o.x=Math.sin(s)*a+(n[0].x+i.x)/2,o.y=-Math.cos(s)*a+(n[0].y+i.y)/2),o}function L1(t){let e="",r="";for(const n of t)n!==void 0&&(n.startsWith("color:")||n.startsWith("text-align:")?r=r+n+";":e=e+n+";");return{style:e,labelStyle:r}}l($Y,"calcTerminalLabelPosition"),l(L1,"getStylesFromArray");var AR=0,FY=l((()=>(AR++,"id-"+Math.random().toString(36).substr(2,12)+"-"+AR)),"generateId");function zY(t){let e="";const r="0123456789abcdef",n=r.length;for(let i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*n));return e}l(zY,"makeRandomHex");var GY=l((t=>zY(t.length)),"random"),Spe=l((function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}}),"getTextObj"),Ape=l((function(t,e){const r=e.text.replace(He.lineBreakRegex," "),[,n]=fc(e.fontSize),i=t.append("text");i.attr("x",e.x),i.attr("y",e.y),i.style("text-anchor",e.anchor),i.style("font-family",e.fontFamily),i.style("font-size",n),i.style("font-weight",e.fontWeight),i.attr("fill",e.fill),e.class!==void 0&&i.attr("class",e.class);const a=i.append("tspan");return a.attr("x",e.x+2*e.textMargin),a.attr("fill",e.fill),a.text(r),i}),"drawSimpleText"),UY=F6(((t,e,r)=>{if(!t||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),He.lineBreakRegex.test(t)))return t;const n=t.split(" ").filter(Boolean),i=[];let a="";return n.forEach(((s,o)=>{const u=Bi(`${s} `,r),h=Bi(a,r);if(u>e){const{hyphenatedStrings:d,remainingWord:p}=Lpe(s,e,"-",r);i.push(a,...d),a=p}else h+u>=e?(i.push(a),a=s):a=[a,s].filter(Boolean).join(" ");o+1===n.length&&i.push(a)})),i.filter((s=>s!=="")).join(r.joinWith)}),((t,e,r)=>`${t}${e}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`)),Lpe=F6(((t,e,r="-",n)=>{n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},n);const i=[...t],a=[];let s="";return i.forEach(((o,u)=>{const h=`${s}${o}`;if(Bi(h,n)>=e){const d=u+1,p=i.length===d,f=`${h}${r}`;a.push(p?h:f),s=""}else s=h})),{hyphenatedStrings:a,remainingWord:s}}),((t,e,r="-",n)=>`${t}${e}${r}${n.fontSize}${n.fontWeight}${n.fontFamily}`));function K4(t,e){return N1(t,e).height}function Bi(t,e){return N1(t,e).width}l(K4,"calculateTextHeight"),l(Bi,"calculateTextWidth");var xx,N1=F6(((t,e)=>{const{fontSize:r=12,fontFamily:n="Arial",fontWeight:i=400}=e;if(!t)return{width:0,height:0};const[,a]=fc(r),s=["sans-serif",n],o=t.split(He.lineBreakRegex),u=[],h=Ze("body");if(!h.remove)return{width:0,height:0,lineHeight:0};const d=h.append("svg");for(const p of s){let f=0;const g={width:0,height:0,lineHeight:0};for(const m of o){const y=Spe();y.text=m||"";const v=Ape(d,y).style("font-size",a).style("font-weight",i).style("font-family",p),x=(v._groups||v)[0][0].getBBox();if(x.width===0&&x.height===0)throw new Error("svg element not in render tree");g.width=Math.round(Math.max(g.width,x.width)),f=Math.round(x.height),g.height+=f,g.lineHeight=Math.round(Math.max(g.lineHeight,f))}u.push(g)}return d.remove(),u[isNaN(u[1].height)||isNaN(u[1].width)||isNaN(u[1].lineHeight)||u[0].height>u[1].height&&u[0].width>u[1].width&&u[0].lineHeight>u[1].lineHeight?0:1]}),((t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`)),yp,Npe=(yp=class{constructor(e=!1,r){this.count=0,this.count=r?r.length:0,this.next=e?()=>this.count++:()=>Date.now()}},l(yp,"InitIDGenerator"),yp),Ipe=l((function(t){return xx=xx||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),xx.innerHTML=t,unescape(xx.textContent)}),"entityDecode");function I1(t){return"str"in t}l(I1,"isDetailedError");var Rpe=l(((t,e,r,n)=>{if(!n)return;const i=t.node()?.getBBox();i&&t.append("text").text(n).attr("text-anchor","middle").attr("x",i.x+i.width/2).attr("y",-r).attr("class",e)}),"insertTitle"),fc=l((t=>{if(typeof t=="number")return[t,t+"px"];const e=parseInt(t??"",10);return Number.isNaN(e)?[void 0,void 0]:t===String(e)?[e,t+"px"]:[e,t]}),"parseFontSize");function ts(t,e){return X4({},t,e)}l(ts,"cleanAndMerge");var Vt={assignWithDepth:On,wrapLabel:UY,calculateTextHeight:K4,calculateTextWidth:Bi,calculateTextDimensions:N1,cleanAndMerge:ts,detectInit:kpe,detectDirective:DY,isSubstringInArray:Epe,interpolateToCurve:C1,calcLabelPosition:BY,calcCardinalityPosition:Cpe,calcTerminalLabelPosition:$Y,formatUrl:OY,getStylesFromArray:L1,generateId:FY,random:GY,runFunc:_pe,entityDecode:Ipe,insertTitle:Rpe,parseFontSize:fc,InitIDGenerator:Npe},Mpe=l((function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,(function(r){return r.substring(0,r.length-1)})),e=e.replace(/classDef.*:\S*#.*;/g,(function(r){return r.substring(0,r.length-1)})),e=e.replace(/#\w+;/g,(function(r){const n=r.substring(1,r.length-1);return/^\+?\d+$/.test(n)?""+n+"":""+n+""})),e}),"encodeEntities"),io=l((function(t){return t.replace(//g,"&#").replace(//g,"&").replace(//g,";")}),"decodeEntities"),My=l(((t,e,{counter:r=0,prefix:n,suffix:i},a)=>a||`${n?`${n}_`:""}${t}_${e}_${r}${i?`_${i}`:""}`),"getEdgeId");function $i(t){return t??null}function R1(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Array.from(typeof t=="string"?[t]:t);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var i=n.reduce((function(o,u){var h=u.match(/\n([\t ]+|(?!\s).)/g);return h?o.concat(h.map((function(d){var p,f;return(f=(p=d.match(/[\t ]/g))===null||p===void 0?void 0:p.length)!==null&&f!==void 0?f:0}))):o}),[]);if(i.length){var a=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");n=n.map((function(o){return o.replace(a,`
`)}))}n[0]=n[0].replace(/^\r?\n/,"");var s=n[0];return e.forEach((function(o,u){var h=s.match(/(?:^|\n)( *)$/),d=h?h[1]:"",p=o;typeof o=="string"&&o.includes(`
`)&&(p=String(o).split(`
`).map((function(f,g){return g===0?f:""+d+f})).join(`
`)),s+=p+n[u+1]})),s}function qY(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}l($i,"handleUndefinedAttr"),l(R1,"dedent"),l(qY,"_getDefaults");var sh={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function i_(t){sh=t}l(i_,"changeDefaults");var Dy={exec:l((()=>null),"exec")};function vr(t,e=""){let r=typeof t=="string"?t:t.source;const n={replace:l(((i,a)=>{let s=typeof a=="string"?a:a.source;return s=s.replace(Pi.caret,"$1"),r=r.replace(i,s),n}),"replace"),getRegex:l((()=>new RegExp(r,e)),"getRegex")};return n}l(vr,"edit");var Pi={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:l((t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`)),"listItemRegex"),nextBulletRegex:l((t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`)),"nextBulletRegex"),hrRegex:l((t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`)),"hrRegex"),fencesBeginRegex:l((t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`)),"fencesBeginRegex"),headingBeginRegex:l((t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`)),"headingBeginRegex"),htmlBeginRegex:l((t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")),"htmlBeginRegex")},_v=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,M1=/(?:[*+-]|\d{1,9}[.)])/,jY=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,WY=vr(jY).replace(/bull/g,M1).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Dpe=vr(jY).replace(/bull/g,M1).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),D1=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,O1=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Ope=vr(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",O1).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Ppe=vr(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,M1).getRegex(),U6="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",P1=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Bpe=vr("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",P1).replace("tag",U6).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),LR=vr(D1).replace("hr",_v).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",U6).getRegex(),B1={blockquote:vr(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",LR).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:Ope,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:_v,html:Bpe,lheading:WY,list:Ppe,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:LR,table:Dy,text:/^[^\n]+/},NR=vr("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",_v).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",U6).getRegex(),$pe={...B1,lheading:Dpe,table:NR,paragraph:vr(D1).replace("hr",_v).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",NR).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",U6).getRegex()},Fpe={...B1,html:vr(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",P1).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Dy,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:vr(D1).replace("hr",_v).replace("heading",` *#{1,6} *[^
]`).replace("lheading",WY).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},YY=/^( {2,}|\\)\n(?!\s*$)/,q6=/[\p{P}\p{S}]/u,$1=/[\s\p{P}\p{S}]/u,VY=/[^\s\p{P}\p{S}]/u,zpe=vr(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,$1).getRegex(),HY=/(?!~)[\p{P}\p{S}]/u,XY=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Gpe=vr(XY,"u").replace(/punct/g,q6).getRegex(),Upe=vr(XY,"u").replace(/punct/g,HY).getRegex(),KY="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",qpe=vr(KY,"gu").replace(/notPunctSpace/g,VY).replace(/punctSpace/g,$1).replace(/punct/g,q6).getRegex(),jpe=vr(KY,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,HY).getRegex(),Wpe=vr("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,VY).replace(/punctSpace/g,$1).replace(/punct/g,q6).getRegex(),Ype=vr(/\\(punct)/,"gu").replace(/punct/g,q6).getRegex(),Vpe=vr(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Hpe=vr(P1).replace("(?:-->|$)","-->").getRegex(),Xpe=vr("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Hpe).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Z4=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Kpe=vr(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Z4).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),IR=vr(/^!?\[(label)\]\[(ref)\]/).replace("label",Z4).replace("ref",O1).getRegex(),RR=vr(/^!?\[(ref)\](?:\[\])?/).replace("ref",O1).getRegex(),F1={_backpedal:Dy,anyPunctuation:Ype,autolink:Vpe,blockSkip:/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,br:YY,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:Dy,emStrongLDelim:Gpe,emStrongRDelimAst:qpe,emStrongRDelimUnd:Wpe,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:Kpe,nolink:RR,punctuation:zpe,reflink:IR,reflinkSearch:vr("reflink|nolink(?!\\()","g").replace("reflink",IR).replace("nolink",RR).getRegex(),tag:Xpe,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:Dy},Zpe={...F1,link:vr(/^!?\[(label)\]\((.*?)\)/).replace("label",Z4).getRegex(),reflink:vr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Z4).getRegex()},a_={...F1,emStrongRDelimAst:jpe,emStrongLDelim:Upe,url:vr(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Qpe={...a_,br:vr(YY).replace("{2,}","*").getRegex(),text:vr(a_.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},bx={normal:B1,gfm:$pe,pedantic:Fpe},Rm={normal:F1,gfm:a_,breaks:Qpe,pedantic:Zpe},Jpe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},MR=l((t=>Jpe[t]),"getEscapeReplacement");function cs(t,e){if(e){if(Pi.escapeTest.test(t))return t.replace(Pi.escapeReplace,MR)}else if(Pi.escapeTestNoEncode.test(t))return t.replace(Pi.escapeReplaceNoEncode,MR);return t}function s_(t){try{t=encodeURI(t).replace(Pi.percentDecode,"%")}catch{return null}return t}function o_(t,e){const r=t.replace(Pi.findPipe,((a,s,o)=>{let u=!1,h=s;for(;--h>=0&&o[h]==="\\";)u=!u;return u?"|":" |"})),n=r.split(Pi.splitPipe);let i=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(Pi.slashPipe,"|");return n}function Bh(t,e,r){const n=t.length;if(n===0)return"";let i=0;for(;i<n&&t.charAt(n-i-1)===e;)i++;return t.slice(0,n-i)}function ZY(t,e){if(t.indexOf(e[1])===-1)return-1;let r=0;for(let n=0;n<t.length;n++)if(t[n]==="\\")n++;else if(t[n]===e[0])r++;else if(t[n]===e[1]&&(r--,r<0))return n;return-1}function l_(t,e,r,n,i){const a=e.href,s=e.title||null,o=t[1].replace(i.other.outputLinkReplace,"$1");if(t[0].charAt(0)!=="!"){n.state.inLink=!0;const u={type:"link",raw:r,href:a,title:s,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,u}return{type:"image",raw:r,href:a,title:s,text:o}}function QY(t,e,r){const n=t.match(r.other.indentCodeCompensation);if(n===null)return e;const i=n[1];return e.split(`
`).map((a=>{const s=a.match(r.other.beginningSpace);if(s===null)return a;const[o]=s;return o.length>=i.length?a.slice(i.length):a})).join(`
`)}l(cs,"escape"),l(s_,"cleanUrl"),l(o_,"splitCells"),l(Bh,"rtrim"),l(ZY,"findClosingBracket"),l(l_,"outputLink"),l(QY,"indentCodeCompensation");var vp,Q4=(vp=class{options;rules;lexer;constructor(e){this.options=e||sh}space(e){const r=this.rules.block.newline.exec(e);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(e){const r=this.rules.block.code.exec(e);if(r){const n=r[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Bh(n,`
`)}}}fences(e){const r=this.rules.block.fences.exec(e);if(r){const n=r[0],i=QY(n,r[3]||"",this.rules);return{type:"code",raw:n,lang:r[2]?r[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):r[2],text:i}}}heading(e){const r=this.rules.block.heading.exec(e);if(r){let n=r[2].trim();if(this.rules.other.endingHash.test(n)){const i=Bh(n,"#");this.options.pedantic?n=i.trim():i&&!this.rules.other.endingSpaceChar.test(i)||(n=i.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const r=this.rules.block.hr.exec(e);if(r)return{type:"hr",raw:Bh(r[0],`
`)}}blockquote(e){const r=this.rules.block.blockquote.exec(e);if(r){let n=Bh(r[0],`
`).split(`
`),i="",a="";const s=[];for(;n.length>0;){let o=!1;const u=[];let h;for(h=0;h<n.length;h++)if(this.rules.other.blockquoteStart.test(n[h]))u.push(n[h]),o=!0;else{if(o)break;u.push(n[h])}n=n.slice(h);const d=u.join(`
`),p=d.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${d}`:d,a=a?`${a}
${p}`:p;const f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(p,s,!0),this.lexer.state.top=f,n.length===0)break;const g=s.at(-1);if(g?.type==="code")break;if(g?.type==="blockquote"){const m=g,y=m.raw+`
`+n.join(`
`),v=this.blockquote(y);s[s.length-1]=v,i=i.substring(0,i.length-m.raw.length)+v.raw,a=a.substring(0,a.length-m.text.length)+v.text;break}if(g?.type==="list"){const m=g,y=m.raw+`
`+n.join(`
`),v=this.list(y);s[s.length-1]=v,i=i.substring(0,i.length-g.raw.length)+v.raw,a=a.substring(0,a.length-m.raw.length)+v.raw,n=y.substring(s.at(-1).raw.length).split(`
`)}}return{type:"blockquote",raw:i,tokens:s,text:a}}}list(e){let r=this.rules.block.list.exec(e);if(r){let n=r[1].trim();const i=n.length>1,a={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");const s=this.rules.other.listItemRegex(n);let o=!1;for(;e;){let h=!1,d="",p="";if(!(r=s.exec(e))||this.rules.block.hr.test(e))break;d=r[0],e=e.substring(d.length);let f=r[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,(b=>" ".repeat(3*b.length))),g=e.split(`
`,1)[0],m=!f.trim(),y=0;if(this.options.pedantic?(y=2,p=f.trimStart()):m?y=r[1].length+1:(y=r[2].search(this.rules.other.nonSpaceChar),y=y>4?1:y,p=f.slice(y),y+=r[1].length),m&&this.rules.other.blankLine.test(g)&&(d+=g+`
`,e=e.substring(g.length+1),h=!0),!h){const b=this.rules.other.nextBulletRegex(y),w=this.rules.other.hrRegex(y),T=this.rules.other.fencesBeginRegex(y),k=this.rules.other.headingBeginRegex(y),C=this.rules.other.htmlBeginRegex(y);for(;e;){const E=e.split(`
`,1)[0];let _;if(g=E,this.options.pedantic?(g=g.replace(this.rules.other.listReplaceNesting,"  "),_=g):_=g.replace(this.rules.other.tabCharGlobal,"    "),T.test(g)||k.test(g)||C.test(g)||b.test(g)||w.test(g))break;if(_.search(this.rules.other.nonSpaceChar)>=y||!g.trim())p+=`
`+_.slice(y);else{if(m||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||T.test(f)||k.test(f)||w.test(f))break;p+=`
`+g}m||g.trim()||(m=!0),d+=E+`
`,e=e.substring(E.length+1),f=_.slice(y)}}a.loose||(o?a.loose=!0:this.rules.other.doubleBlankLine.test(d)&&(o=!0));let v,x=null;this.options.gfm&&(x=this.rules.other.listIsTask.exec(p),x&&(v=x[0]!=="[ ] ",p=p.replace(this.rules.other.listReplaceTask,""))),a.items.push({type:"list_item",raw:d,task:!!x,checked:v,loose:!1,text:p,tokens:[]}),a.raw+=d}const u=a.items.at(-1);if(!u)return;u.raw=u.raw.trimEnd(),u.text=u.text.trimEnd(),a.raw=a.raw.trimEnd();for(let h=0;h<a.items.length;h++)if(this.lexer.state.top=!1,a.items[h].tokens=this.lexer.blockTokens(a.items[h].text,[]),!a.loose){const d=a.items[h].tokens.filter((f=>f.type==="space")),p=d.length>0&&d.some((f=>this.rules.other.anyLine.test(f.raw)));a.loose=p}if(a.loose)for(let h=0;h<a.items.length;h++)a.items[h].loose=!0;return a}}html(e){const r=this.rules.block.html.exec(e);if(r)return{type:"html",block:!0,raw:r[0],pre:r[1]==="pre"||r[1]==="script"||r[1]==="style",text:r[0]}}def(e){const r=this.rules.block.def.exec(e);if(r){const n=r[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=r[2]?r[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",a=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):r[3];return{type:"def",tag:n,raw:r[0],href:i,title:a}}}table(e){const r=this.rules.block.table.exec(e);if(!r||!this.rules.other.tableDelimiter.test(r[2]))return;const n=o_(r[1]),i=r[2].replace(this.rules.other.tableAlignChars,"").split("|"),a=r[3]?.trim()?r[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:r[0],header:[],align:[],rows:[]};if(n.length===i.length){for(const o of i)this.rules.other.tableAlignRight.test(o)?s.align.push("right"):this.rules.other.tableAlignCenter.test(o)?s.align.push("center"):this.rules.other.tableAlignLeft.test(o)?s.align.push("left"):s.align.push(null);for(let o=0;o<n.length;o++)s.header.push({text:n[o],tokens:this.lexer.inline(n[o]),header:!0,align:s.align[o]});for(const o of a)s.rows.push(o_(o,s.header.length).map(((u,h)=>({text:u,tokens:this.lexer.inline(u),header:!1,align:s.align[h]}))));return s}}lheading(e){const r=this.rules.block.lheading.exec(e);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(e){const r=this.rules.block.paragraph.exec(e);if(r){const n=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:n,tokens:this.lexer.inline(n)}}}text(e){const r=this.rules.block.text.exec(e);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(e){const r=this.rules.inline.escape.exec(e);if(r)return{type:"escape",raw:r[0],text:r[1]}}tag(e){const r=this.rules.inline.tag.exec(e);if(r)return!this.lexer.state.inLink&&this.rules.other.startATag.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:r[0]}}link(e){const r=this.rules.inline.link.exec(e);if(r){const n=r[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const s=Bh(n.slice(0,-1),"\\");if((n.length-s.length)%2==0)return}else{const s=ZY(r[2],"()");if(s>-1){const o=(r[0].indexOf("!")===0?5:4)+r[1].length+s;r[2]=r[2].substring(0,s),r[0]=r[0].substring(0,o).trim(),r[3]=""}}let i=r[2],a="";if(this.options.pedantic){const s=this.rules.other.pedanticHrefTitle.exec(i);s&&(i=s[1],a=s[3])}else a=r[3]?r[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(i=this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?i.slice(1):i.slice(1,-1)),l_(r,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:a&&a.replace(this.rules.inline.anyPunctuation,"$1")},r[0],this.lexer,this.rules)}}reflink(e,r){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const i=r[(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!i){const a=n[0].charAt(0);return{type:"text",raw:a,text:a}}return l_(n,i,n[0],this.lexer,this.rules)}}emStrong(e,r,n=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(i&&!(i[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!n||this.rules.inline.punctuation.exec(n))){const a=[...i[0]].length-1;let s,o,u=a,h=0;const d=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,r=r.slice(-1*e.length+a);(i=d.exec(r))!=null;){if(s=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!s)continue;if(o=[...s].length,i[3]||i[4]){u+=o;continue}if((i[5]||i[6])&&a%3&&!((a+o)%3)){h+=o;continue}if(u-=o,u>0)continue;o=Math.min(o,o+u+h);const p=[...i[0]][0].length,f=e.slice(0,a+i.index+p+o);if(Math.min(a,o)%2){const m=f.slice(1,-1);return{type:"em",raw:f,text:m,tokens:this.lexer.inlineTokens(m)}}const g=f.slice(2,-2);return{type:"strong",raw:f,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(e){const r=this.rules.inline.code.exec(e);if(r){let n=r[2].replace(this.rules.other.newLineCharGlobal," ");const i=this.rules.other.nonSpaceChar.test(n),a=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return i&&a&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:r[0],text:n}}}br(e){const r=this.rules.inline.br.exec(e);if(r)return{type:"br",raw:r[0]}}del(e){const r=this.rules.inline.del.exec(e);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(e){const r=this.rules.inline.autolink.exec(e);if(r){let n,i;return r[2]==="@"?(n=r[1],i="mailto:"+n):(n=r[1],i=n),{type:"link",raw:r[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(e){let r;if(r=this.rules.inline.url.exec(e)){let n,i;if(r[2]==="@")n=r[0],i="mailto:"+n;else{let a;do a=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])?.[0]??"";while(a!==r[0]);n=r[0],i=r[1]==="www."?"http://"+r[0]:r[0]}return{type:"link",raw:r[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e){const r=this.rules.inline.text.exec(e);if(r){const n=this.lexer.state.inRawBlock;return{type:"text",raw:r[0],text:r[0],escaped:n}}}},l(vp,"_Tokenizer"),vp),Wl,So=(Wl=class{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||sh,this.options.tokenizer=this.options.tokenizer||new Q4,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const r={other:Pi,block:bx.normal,inline:Rm.normal};this.options.pedantic?(r.block=bx.pedantic,r.inline=Rm.pedantic):this.options.gfm&&(r.block=bx.gfm,this.options.breaks?r.inline=Rm.breaks:r.inline=Rm.gfm),this.tokenizer.rules=r}static get rules(){return{block:bx,inline:Rm}}static lex(e,r){return new Wl(r).lex(e)}static lexInline(e,r){return new Wl(r).inlineTokens(e)}lex(e){e=e.replace(Pi.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){const n=this.inlineQueue[r];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,r=[],n=!1){for(this.options.pedantic&&(e=e.replace(Pi.tabCharGlobal,"    ").replace(Pi.spaceLine,""));e;){let i;if(this.options.extensions?.block?.some((s=>!!(i=s.call({lexer:this},e,r))&&(e=e.substring(i.raw.length),r.push(i),!0))))continue;if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length);const s=r.at(-1);i.raw.length===1&&s!==void 0?s.raw+=`
`:r.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length);const s=r.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.at(-1).src=s.text):r.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length);const s=r.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=`
`+i.raw,s.text+=`
`+i.raw,this.inlineQueue.at(-1).src=s.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),r.push(i);continue}let a=e;if(this.options.extensions?.startBlock){let s=1/0;const o=e.slice(1);let u;this.options.extensions.startBlock.forEach((h=>{u=h.call({lexer:this},o),typeof u=="number"&&u>=0&&(s=Math.min(s,u))})),s<1/0&&s>=0&&(a=e.substring(0,s+1))}if(this.state.top&&(i=this.tokenizer.paragraph(a))){const s=r.at(-1);n&&s?.type==="paragraph"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):r.push(i),n=a.length!==e.length,e=e.substring(i.raw.length)}else if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length);const s=r.at(-1);s?.type==="text"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):r.push(i)}else if(e){const s="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(s);break}throw new Error(s)}}return this.state.top=!0,r}inline(e,r=[]){return this.inlineQueue.push({src:e,tokens:r}),r}inlineTokens(e,r=[]){let n=e,i=null;if(this.tokens.links){const o=Object.keys(this.tokens.links);if(o.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)o.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,i.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let a=!1,s="";for(;e;){let o;if(a||(s=""),a=!1,this.options.extensions?.inline?.some((h=>!!(o=h.call({lexer:this},e,r))&&(e=e.substring(o.raw.length),r.push(o),!0))))continue;if(o=this.tokenizer.escape(e)){e=e.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.tag(e)){e=e.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.link(e)){e=e.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(o.raw.length);const h=r.at(-1);o.type==="text"&&h?.type==="text"?(h.raw+=o.raw,h.text+=o.text):r.push(o);continue}if(o=this.tokenizer.emStrong(e,n,s)){e=e.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.codespan(e)){e=e.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.br(e)){e=e.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.del(e)){e=e.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.autolink(e)){e=e.substring(o.raw.length),r.push(o);continue}if(!this.state.inLink&&(o=this.tokenizer.url(e))){e=e.substring(o.raw.length),r.push(o);continue}let u=e;if(this.options.extensions?.startInline){let h=1/0;const d=e.slice(1);let p;this.options.extensions.startInline.forEach((f=>{p=f.call({lexer:this},d),typeof p=="number"&&p>=0&&(h=Math.min(h,p))})),h<1/0&&h>=0&&(u=e.substring(0,h+1))}if(o=this.tokenizer.inlineText(u)){e=e.substring(o.raw.length),o.raw.slice(-1)!=="_"&&(s=o.raw.slice(-1)),a=!0;const h=r.at(-1);h?.type==="text"?(h.raw+=o.raw,h.text+=o.text):r.push(o)}else if(e){const h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}throw new Error(h)}}return r}},l(Wl,"_Lexer"),Wl),xp,J4=(xp=class{options;parser;constructor(e){this.options=e||sh}space(e){return""}code({text:e,lang:r,escaped:n}){const i=(r||"").match(Pi.notSpaceStart)?.[0],a=e.replace(Pi.endingNewline,"")+`
`;return i?'<pre><code class="language-'+cs(i)+'">'+(n?a:cs(a,!0))+`</code></pre>
`:"<pre><code>"+(n?a:cs(a,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:r}){return`<h${r}>${this.parser.parseInline(e)}</h${r}>
`}hr(e){return`<hr>
`}list(e){const r=e.ordered,n=e.start;let i="";for(let s=0;s<e.items.length;s++){const o=e.items[s];i+=this.listitem(o)}const a=r?"ol":"ul";return"<"+a+(r&&n!==1?' start="'+n+'"':"")+`>
`+i+"</"+a+`>
`}listitem(e){let r="";if(e.task){const n=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type==="paragraph"?(e.tokens[0].text=n+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=n+" "+cs(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):r+=n+" "}return r+=this.parser.parse(e.tokens,!!e.loose),`<li>${r}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let r="",n="";for(let a=0;a<e.header.length;a++)n+=this.tablecell(e.header[a]);r+=this.tablerow({text:n});let i="";for(let a=0;a<e.rows.length;a++){const s=e.rows[a];n="";for(let o=0;o<s.length;o++)n+=this.tablecell(s[o]);i+=this.tablerow({text:n})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+r+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const r=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+r+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${cs(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:r,tokens:n}){const i=this.parser.parseInline(n),a=s_(e);if(a===null)return i;let s='<a href="'+(e=a)+'"';return r&&(s+=' title="'+cs(r)+'"'),s+=">"+i+"</a>",s}image({href:e,title:r,text:n}){const i=s_(e);if(i===null)return cs(n);let a=`<img src="${e=i}" alt="${n}"`;return r&&(a+=` title="${cs(r)}"`),a+=">",a}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:cs(e.text)}},l(xp,"_Renderer"),xp),bp,z1=(bp=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},l(bp,"_TextRenderer"),bp),Yl,Ao=(Yl=class{options;renderer;textRenderer;constructor(e){this.options=e||sh,this.options.renderer=this.options.renderer||new J4,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new z1}static parse(e,r){return new Yl(r).parse(e)}static parseInline(e,r){return new Yl(r).parseInline(e)}parse(e,r=!0){let n="";for(let i=0;i<e.length;i++){const a=e[i];if(this.options.extensions?.renderers?.[a.type]){const o=a,u=this.options.extensions.renderers[o.type].call({parser:this},o);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){n+=u||"";continue}}const s=a;switch(s.type){case"space":n+=this.renderer.space(s);continue;case"hr":n+=this.renderer.hr(s);continue;case"heading":n+=this.renderer.heading(s);continue;case"code":n+=this.renderer.code(s);continue;case"table":n+=this.renderer.table(s);continue;case"blockquote":n+=this.renderer.blockquote(s);continue;case"list":n+=this.renderer.list(s);continue;case"html":n+=this.renderer.html(s);continue;case"paragraph":n+=this.renderer.paragraph(s);continue;case"text":{let o=s,u=this.renderer.text(o);for(;i+1<e.length&&e[i+1].type==="text";)o=e[++i],u+=`
`+this.renderer.text(o);n+=r?this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):u;continue}default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return n}parseInline(e,r=this.renderer){let n="";for(let i=0;i<e.length;i++){const a=e[i];if(this.options.extensions?.renderers?.[a.type]){const o=this.options.extensions.renderers[a.type].call({parser:this},a);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){n+=o||"";continue}}const s=a;switch(s.type){case"escape":case"text":n+=r.text(s);break;case"html":n+=r.html(s);break;case"link":n+=r.link(s);break;case"image":n+=r.image(s);break;case"strong":n+=r.strong(s);break;case"em":n+=r.em(s);break;case"codespan":n+=r.codespan(s);break;case"br":n+=r.br(s);break;case"del":n+=r.del(s);break;default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return n}},l(Yl,"_Parser"),Yl),hu,Eb=(hu=class{options;block;constructor(e){this.options=e||sh}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?So.lex:So.lexInline}provideParser(){return this.block?Ao.parse:Ao.parseInline}},l(hu,"_Hooks"),xk(hu,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),hu),wp,efe=(wp=class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Ao;Renderer=J4;TextRenderer=z1;Lexer=So;Tokenizer=Q4;Hooks=Eb;constructor(...e){this.use(...e)}walkTokens(e,r){let n=[];for(const i of e)switch(n=n.concat(r.call(this,i)),i.type){case"table":{const a=i;for(const s of a.header)n=n.concat(this.walkTokens(s.tokens,r));for(const s of a.rows)for(const o of s)n=n.concat(this.walkTokens(o.tokens,r));break}case"list":{const a=i;n=n.concat(this.walkTokens(a.items,r));break}default:{const a=i;this.defaults.extensions?.childTokens?.[a.type]?this.defaults.extensions.childTokens[a.type].forEach((s=>{const o=a[s].flat(1/0);n=n.concat(this.walkTokens(o,r))})):a.tokens&&(n=n.concat(this.walkTokens(a.tokens,r)))}}return n}use(...e){const r=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach((n=>{const i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach((a=>{if(!a.name)throw new Error("extension name required");if("renderer"in a){const s=r.renderers[a.name];r.renderers[a.name]=s?function(...o){let u=a.renderer.apply(this,o);return u===!1&&(u=s.apply(this,o)),u}:a.renderer}if("tokenizer"in a){if(!a.level||a.level!=="block"&&a.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=r[a.level];s?s.unshift(a.tokenizer):r[a.level]=[a.tokenizer],a.start&&(a.level==="block"?r.startBlock?r.startBlock.push(a.start):r.startBlock=[a.start]:a.level==="inline"&&(r.startInline?r.startInline.push(a.start):r.startInline=[a.start]))}"childTokens"in a&&a.childTokens&&(r.childTokens[a.name]=a.childTokens)})),i.extensions=r),n.renderer){const a=this.defaults.renderer||new J4(this.defaults);for(const s in n.renderer){if(!(s in a))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;const o=s,u=n.renderer[o],h=a[o];a[o]=(...d)=>{let p=u.apply(a,d);return p===!1&&(p=h.apply(a,d)),p||""}}i.renderer=a}if(n.tokenizer){const a=this.defaults.tokenizer||new Q4(this.defaults);for(const s in n.tokenizer){if(!(s in a))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const o=s,u=n.tokenizer[o],h=a[o];a[o]=(...d)=>{let p=u.apply(a,d);return p===!1&&(p=h.apply(a,d)),p}}i.tokenizer=a}if(n.hooks){const a=this.defaults.hooks||new Eb;for(const s in n.hooks){if(!(s in a))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;const o=s,u=n.hooks[o],h=a[o];Eb.passThroughHooks.has(s)?a[o]=d=>{if(this.defaults.async)return Promise.resolve(u.call(a,d)).then((f=>h.call(a,f)));const p=u.call(a,d);return h.call(a,p)}:a[o]=(...d)=>{let p=u.apply(a,d);return p===!1&&(p=h.apply(a,d)),p}}i.hooks=a}if(n.walkTokens){const a=this.defaults.walkTokens,s=n.walkTokens;i.walkTokens=function(o){let u=[];return u.push(s.call(this,o)),a&&(u=u.concat(a.call(this,o))),u}}this.defaults={...this.defaults,...i}})),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,r){return So.lex(e,r??this.defaults)}parser(e,r){return Ao.parse(e,r??this.defaults)}parseMarkdown(e){return l(((n,i)=>{const a={...i},s={...this.defaults,...a},o=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&a.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(n==null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=e);const u=s.hooks?s.hooks.provideLexer():e?So.lex:So.lexInline,h=s.hooks?s.hooks.provideParser():e?Ao.parse:Ao.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(n):n).then((d=>u(d,s))).then((d=>s.hooks?s.hooks.processAllTokens(d):d)).then((d=>s.walkTokens?Promise.all(this.walkTokens(d,s.walkTokens)).then((()=>d)):d)).then((d=>h(d,s))).then((d=>s.hooks?s.hooks.postprocess(d):d)).catch(o);try{s.hooks&&(n=s.hooks.preprocess(n));let d=u(n,s);s.hooks&&(d=s.hooks.processAllTokens(d)),s.walkTokens&&this.walkTokens(d,s.walkTokens);let p=h(d,s);return s.hooks&&(p=s.hooks.postprocess(p)),p}catch(d){return o(d)}}),"parse")}onError(e,r){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+cs(n.message+"",!0)+"</pre>";return r?Promise.resolve(i):i}if(r)return Promise.reject(n);throw n}}},l(wp,"Marked"),wp),Bc=new efe;function mr(t,e){return Bc.parse(t,e)}function JY(t,{markdownAutoWrap:e}){const r=R1(t.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`));return e===!1?r.replace(/ /g,"&nbsp;"):r}function eV(t,e={}){const r=JY(t,e),n=mr.lexer(r),i=[[]];let a=0;function s(o,u="normal"){o.type==="text"?o.text.split(`
`).forEach(((h,d)=>{d!==0&&(a++,i.push([])),h.split(" ").forEach((p=>{(p=p.replace(/&#39;/g,"'"))&&i[a].push({content:p,type:u})}))})):o.type==="strong"||o.type==="em"?o.tokens.forEach((h=>{s(h,o.type)})):o.type==="html"&&i[a].push({content:o.text,type:"normal"})}return l(s,"processNode"),n.forEach((o=>{o.type==="paragraph"?o.tokens?.forEach((u=>{s(u)})):o.type==="html"&&i[a].push({content:o.text,type:"normal"})})),i}function tV(t,{markdownAutoWrap:e}={}){const r=mr.lexer(t);function n(i){return i.type==="text"?e===!1?i.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):i.text.replace(/\n */g,"<br/>"):i.type==="strong"?`<strong>${i.tokens?.map(n).join("")}</strong>`:i.type==="em"?`<em>${i.tokens?.map(n).join("")}</em>`:i.type==="paragraph"?`<p>${i.tokens?.map(n).join("")}</p>`:i.type==="space"?"":i.type==="html"?`${i.text}`:i.type==="escape"?i.text:`Unsupported markdown: ${i.type}`}return l(n,"output"),r.map(n).join("")}function rV(t){return Intl.Segmenter?[...new Intl.Segmenter().segment(t)].map((e=>e.segment)):[...t]}function nV(t,e){return G1(t,[],rV(e.content),e.type)}function G1(t,e,r,n){if(r.length===0)return[{content:e.join(""),type:n},{content:"",type:n}];const[i,...a]=r,s=[...e,i];return t([{content:s.join(""),type:n}])?G1(t,s,a,n):(e.length===0&&i&&(e.push(i),r.shift()),[{content:e.join(""),type:n},{content:r.join(""),type:n}])}function iV(t,e){if(t.some((({content:r})=>r.includes(`
`))))throw new Error("splitLineToFitWidth does not support newlines in the line");return e5(t,e)}function e5(t,e,r=[],n=[]){if(t.length===0)return n.length>0&&r.push(n),r.length>0?r:[];let i="";t[0].content===" "&&(i=" ",t.shift());const a=t.shift()??{content:" ",type:"normal"},s=[...n];if(i!==""&&s.push({content:i,type:"normal"}),s.push(a),e(s))return e5(t,e,r,s);if(n.length>0)r.push(n),t.unshift(a);else if(a.content){const[o,u]=nV(e,a);r.push([o]),u.content&&t.unshift(u)}return e5(t,e,r)}function c_(t,e){e&&t.attr("style",e)}async function aV(t,e,r,n,i=!1){const a=t.append("foreignObject");a.attr("width",10*r+"px"),a.attr("height",10*r+"px");const s=a.append("xhtml:div");let o=e.label;e.label&&Ei(e.label)&&(o=await dv(e.label.replace(He.lineBreakRegex,`
`),ke()));const u=e.isNode?"nodeLabel":"edgeLabel",h=s.append("span");h.html(o),c_(h,e.labelStyle),h.attr("class",`${u} ${n}`),c_(s,e.labelStyle),s.style("display","table-cell"),s.style("white-space","nowrap"),s.style("line-height","1.5"),s.style("max-width",r+"px"),s.style("text-align","center"),s.attr("xmlns","http://www.w3.org/1999/xhtml"),i&&s.attr("class","labelBkg");let d=s.node().getBoundingClientRect();return d.width===r&&(s.style("display","table"),s.style("white-space","break-spaces"),s.style("width",r+"px"),d=s.node().getBoundingClientRect()),a.node()}function j6(t,e,r){return t.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*r-.1+"em").attr("dy",r+"em")}function sV(t,e,r){const n=t.append("text"),i=j6(n,1,e);W6(i,r);const a=i.node().getComputedTextLength();return n.remove(),a}function oV(t,e,r){const n=t.append("text"),i=j6(n,1,e);W6(i,[{content:r,type:"normal"}]);const a=i.node()?.getBoundingClientRect();return a&&n.remove(),a}function lV(t,e,r,n=!1){const i=e.append("g"),a=i.insert("rect").attr("class","background").attr("style","stroke: none"),s=i.append("text").attr("y","-10.1");let o=0;for(const u of r){const h=l((p=>sV(i,1.1,p)<=t),"checkWidth"),d=h(u)?[u]:iV(u,h);for(const p of d)W6(j6(s,o,1.1),p),o++}if(n){const u=s.node().getBBox(),h=2;return a.attr("x",u.x-h).attr("y",u.y-h).attr("width",u.width+2*h).attr("height",u.height+2*h),i.node()}return s.node()}function W6(t,e){t.text(""),e.forEach(((r,n)=>{const i=t.append("tspan").attr("font-style",r.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",r.type==="strong"?"bold":"normal");n===0?i.text(r.content):i.text(" "+r.content)}))}function U1(t){return t.replace(/fa[bklrs]?:fa-[\w-]+/g,(e=>`<i class='${e.replace(":"," ")}'></i>`))}l(mr,"marked"),mr.options=mr.setOptions=function(t){return Bc.setOptions(t),mr.defaults=Bc.defaults,i_(mr.defaults),mr},mr.getDefaults=qY,mr.defaults=sh,mr.use=function(...t){return Bc.use(...t),mr.defaults=Bc.defaults,i_(mr.defaults),mr},mr.walkTokens=function(t,e){return Bc.walkTokens(t,e)},mr.parseInline=Bc.parseInline,mr.Parser=Ao,mr.parser=Ao.parse,mr.Renderer=J4,mr.TextRenderer=z1,mr.Lexer=So,mr.lexer=So.lex,mr.Tokenizer=Q4,mr.Hooks=Eb,mr.parse=mr,mr.options,mr.setOptions,mr.use,mr.walkTokens,mr.parseInline,Ao.parse,So.lex,l(JY,"preprocessMarkdown"),l(eV,"markdownToLines"),l(tV,"markdownToHTML"),l(rV,"splitTextToChars"),l(nV,"splitWordToFitWidth"),l(G1,"splitWordToFitWidthRecursion"),l(iV,"splitLineToFitWidth"),l(e5,"splitLineToFitWidthRecursion"),l(c_,"applyStyle"),l(aV,"addHtmlSpan"),l(j6,"createTspan"),l(sV,"computeWidthOfText"),l(oV,"computeDimensionOfText"),l(lV,"createFormattedText"),l(W6,"updateTextContentAndStyles"),l(U1,"replaceIconSubstring");var pa=l((async(t,e="",{style:r="",isTitle:n=!1,classes:i="",useHtmlLabels:a=!0,isNode:s=!0,width:o=200,addSvgBackground:u=!1}={},h)=>{if(ee.debug("XYZ createText",e,r,n,i,a,s,"addSvgBackground: ",u),a){const d=tV(e,h),p=U1(io(d)),f=e.replace(/\\\\/g,"\\"),g={isNode:s,label:Ei(e)?f:p,labelStyle:r.replace("fill:","color:")};return await aV(t,g,o,i,u)}{const d=lV(o,t,eV(e.replace(/<br\s*\/?>/g,"<br/>").replace("<br>","<br/>"),h),!!e&&u);if(s){/stroke:/.exec(r)&&(r=r.replace("stroke:","lineColor:"));const p=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Ze(d).attr("style",p)}else{const p=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");Ze(d).select("rect").attr("style",p.replace(/background:/g,"fill:"));const f=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Ze(d).select("text").attr("style",f)}return d}}),"createText"),Wt=l((async(t,e,r)=>{let n;const i=e.useHtmlLabels||Cr(ke()?.htmlLabels);n=r||"node default";const a=t.insert("g").attr("class",n).attr("id",e.domId||e.id),s=a.insert("g").attr("class","label").attr("style",$i(e.labelStyle));let o;o=e.label===void 0?"":typeof e.label=="string"?e.label:e.label[0];const u=await pa(s,Ir(io(o),ke()),{useHtmlLabels:i,width:e.width||ke().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:e.labelStyle,addSvgBackground:!!e.icon||!!e.img});let h=u.getBBox();const d=(e?.padding??0)/2;if(i){const p=u.children[0],f=Ze(u),g=p.getElementsByTagName("img");if(g){const m=o.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...g].map((y=>new Promise((v=>{function x(){if(y.style.display="flex",y.style.flexDirection="column",m){const b=ke().fontSize?ke().fontSize:window.getComputedStyle(document.body).fontSize,w=5,[T=or.fontSize]=fc(b),k=T*w+"px";y.style.minWidth=k,y.style.maxWidth=k}else y.style.width="100%";v(y)}l(x,"setupImage"),setTimeout((()=>{y.complete&&x()})),y.addEventListener("error",x),y.addEventListener("load",x)})))))}h=p.getBoundingClientRect(),f.attr("width",h.width),f.attr("height",h.height)}return i?s.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"):s.attr("transform","translate(0, "+-h.height/2+")"),e.centerLabel&&s.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),s.insert("rect",":first-child"),{shapeSvg:a,bbox:h,halfPadding:d,label:s}}),"labelHelper"),jk=l((async(t,e,r)=>{const n=r.useHtmlLabels||Cr(ke()?.flowchart?.htmlLabels),i=t.insert("g").attr("class","label").attr("style",r.labelStyle||""),a=await pa(i,Ir(io(e),ke()),{useHtmlLabels:n,width:r.width||ke()?.flowchart?.wrappingWidth,style:r.labelStyle,addSvgBackground:!!r.icon||!!r.img});let s=a.getBBox();const o=r.padding/2;if(Cr(ke()?.flowchart?.htmlLabels)){const u=a.children[0],h=Ze(a);s=u.getBoundingClientRect(),h.attr("width",s.width),h.attr("height",s.height)}return n?i.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"):i.attr("transform","translate(0, "+-s.height/2+")"),r.centerLabel&&i.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),i.insert("rect",":first-child"),{shapeSvg:t,bbox:s,halfPadding:o,label:i}}),"insertLabel"),Nt=l(((t,e)=>{const r=e.node().getBBox();t.width=r.width,t.height=r.height}),"updateNodeBounds"),qt=l(((t,e)=>(t.look==="handDrawn"?"rough-node":"node")+" "+t.cssClasses+" "+(e||"")),"getNodeClasses");function lr(t){const e=t.map(((r,n)=>`${n===0?"M":"L"}${r.x},${r.y}`));return e.push("Z"),e.join(" ")}function Zl(t,e,r,n,i,a){const s=[],o=r-t,u=n-e,h=o/a,d=2*Math.PI/h,p=e+u/2;for(let f=0;f<=50;f++){const g=t+f/50*o,m=p+i*Math.sin(d*(g-t));s.push({x:g,y:m})}return s}function q1(t,e,r,n,i,a){const s=[],o=i*Math.PI/180,u=(a*Math.PI/180-o)/(n-1);for(let h=0;h<n;h++){const d=o+h*u,p=t+r*Math.cos(d),f=e+r*Math.sin(d);s.push({x:-p,y:-f})}return s}function _b(t,e,r){if(t&&t.length){const[n,i]=e,a=Math.PI/180*r,s=Math.cos(a),o=Math.sin(a);for(const u of t){const[h,d]=u;u[0]=(h-n)*s-(d-i)*o+n,u[1]=(h-n)*o+(d-i)*s+i}}}function cV(t,e){return t[0]===e[0]&&t[1]===e[1]}function uV(t,e,r,n=1){const i=r,a=Math.max(e,.1),s=t[0]&&t[0][0]&&typeof t[0][0]=="number"?[t]:t,o=[0,0];if(i)for(const h of s)_b(h,o,i);const u=(function(h,d,p){const f=[];for(const b of h){const w=[...b];cV(w[0],w[w.length-1])||w.push([w[0][0],w[0][1]]),w.length>2&&f.push(w)}const g=[];d=Math.max(d,.1);const m=[];for(const b of f)for(let w=0;w<b.length-1;w++){const T=b[w],k=b[w+1];if(T[1]!==k[1]){const C=Math.min(T[1],k[1]);m.push({ymin:C,ymax:Math.max(T[1],k[1]),x:C===T[1]?T[0]:k[0],islope:(k[0]-T[0])/(k[1]-T[1])})}}if(m.sort(((b,w)=>b.ymin<w.ymin?-1:b.ymin>w.ymin?1:b.x<w.x?-1:b.x>w.x?1:b.ymax===w.ymax?0:(b.ymax-w.ymax)/Math.abs(b.ymax-w.ymax))),!m.length)return g;let y=[],v=m[0].ymin,x=0;for(;y.length||m.length;){if(m.length){let b=-1;for(let w=0;w<m.length&&!(m[w].ymin>v);w++)b=w;m.splice(0,b+1).forEach((w=>{y.push({s:v,edge:w})}))}if(y=y.filter((b=>!(b.edge.ymax<=v))),y.sort(((b,w)=>b.edge.x===w.edge.x?0:(b.edge.x-w.edge.x)/Math.abs(b.edge.x-w.edge.x))),(p!==1||x%d==0)&&y.length>1)for(let b=0;b<y.length;b+=2){const w=b+1;if(w>=y.length)break;const T=y[b].edge,k=y[w].edge;g.push([[Math.round(T.x),v],[Math.round(k.x),v]])}v+=p,y.forEach((b=>{b.edge.x=b.edge.x+p*b.edge.islope})),x++}return g})(s,a,n);if(i){for(const h of s)_b(h,o,-i);(function(h,d,p){const f=[];h.forEach((g=>f.push(...g))),_b(f,d,p)})(u,o,-i)}return u}function cm(t,e){var r;const n=e.hachureAngle+90;let i=e.hachureGap;i<0&&(i=4*e.strokeWidth),i=Math.round(Math.max(i,.1));let a=1;return e.roughness>=1&&(((r=e.randomizer)===null||r===void 0?void 0:r.next())||Math.random())>.7&&(a=i),uV(t,i,n,a||1)}l(lr,"createPathFromPoints"),l(Zl,"generateFullSineWavePoints"),l(q1,"generateCirclePoints"),l(_b,"t"),l(cV,"e"),l(uV,"s"),l(cm,"n");var kp,j1=(kp=class{constructor(e){this.helper=e}fillPolygons(e,r){return this._fillPolygons(e,r)}_fillPolygons(e,r){const n=cm(e,r);return{type:"fillSketch",ops:this.renderLines(n,r)}}renderLines(e,r){const n=[];for(const i of e)n.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],r));return n}},l(kp,"o"),kp);function Cv(t){const e=t[0],r=t[1];return Math.sqrt(Math.pow(e[0]-r[0],2)+Math.pow(e[1]-r[1],2))}l(Cv,"a");var Tp,tfe=(Tp=class extends j1{fillPolygons(e,r){let n=r.hachureGap;n<0&&(n=4*r.strokeWidth),n=Math.max(n,.1);const i=cm(e,Object.assign({},r,{hachureGap:n})),a=Math.PI/180*r.hachureAngle,s=[],o=.5*n*Math.cos(a),u=.5*n*Math.sin(a);for(const[h,d]of i)Cv([h,d])&&s.push([[h[0]-o,h[1]+u],[...d]],[[h[0]+o,h[1]-u],[...d]]);return{type:"fillSketch",ops:this.renderLines(s,r)}}},l(Tp,"h"),Tp),Ep,rfe=(Ep=class extends j1{fillPolygons(e,r){const n=this._fillPolygons(e,r),i=Object.assign({},r,{hachureAngle:r.hachureAngle+90}),a=this._fillPolygons(e,i);return n.ops=n.ops.concat(a.ops),n}},l(Ep,"r"),Ep),_p,nfe=(_p=class{constructor(e){this.helper=e}fillPolygons(e,r){const n=cm(e,r=Object.assign({},r,{hachureAngle:0}));return this.dotsOnLines(n,r)}dotsOnLines(e,r){const n=[];let i=r.hachureGap;i<0&&(i=4*r.strokeWidth),i=Math.max(i,.1);let a=r.fillWeight;a<0&&(a=r.strokeWidth/2);const s=i/4;for(const o of e){const u=Cv(o),h=u/i,d=Math.ceil(h)-1,p=u-d*i,f=(o[0][0]+o[1][0])/2-i/4,g=Math.min(o[0][1],o[1][1]);for(let m=0;m<d;m++){const y=g+p+m*i,v=f-s+2*Math.random()*s,x=y-s+2*Math.random()*s,b=this.helper.ellipse(v,x,a,a,r);n.push(...b.ops)}}return{type:"fillSketch",ops:n}}},l(_p,"i"),_p),Cp,ife=(Cp=class{constructor(e){this.helper=e}fillPolygons(e,r){const n=cm(e,r);return{type:"fillSketch",ops:this.dashedLine(n,r)}}dashedLine(e,r){const n=r.dashOffset<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashOffset,i=r.dashGap<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashGap,a=[];return e.forEach((s=>{const o=Cv(s),u=Math.floor(o/(n+i)),h=(o+i-u*(n+i))/2;let d=s[0],p=s[1];d[0]>p[0]&&(d=s[1],p=s[0]);const f=Math.atan((p[1]-d[1])/(p[0]-d[0]));for(let g=0;g<u;g++){const m=g*(n+i),y=m+n,v=[d[0]+m*Math.cos(f)+h*Math.cos(f),d[1]+m*Math.sin(f)+h*Math.sin(f)],x=[d[0]+y*Math.cos(f)+h*Math.cos(f),d[1]+y*Math.sin(f)+h*Math.sin(f)];a.push(...this.helper.doubleLineOps(v[0],v[1],x[0],x[1],r))}})),a}},l(Cp,"c"),Cp),Sp,afe=(Sp=class{constructor(e){this.helper=e}fillPolygons(e,r){const n=r.hachureGap<0?4*r.strokeWidth:r.hachureGap,i=r.zigzagOffset<0?n:r.zigzagOffset,a=cm(e,r=Object.assign({},r,{hachureGap:n+i}));return{type:"fillSketch",ops:this.zigzagLines(a,i,r)}}zigzagLines(e,r,n){const i=[];return e.forEach((a=>{const s=Cv(a),o=Math.round(s/(2*r));let u=a[0],h=a[1];u[0]>h[0]&&(u=a[1],h=a[0]);const d=Math.atan((h[1]-u[1])/(h[0]-u[0]));for(let p=0;p<o;p++){const f=2*p*r,g=2*(p+1)*r,m=Math.sqrt(2*Math.pow(r,2)),y=[u[0]+f*Math.cos(d),u[1]+f*Math.sin(d)],v=[u[0]+g*Math.cos(d),u[1]+g*Math.sin(d)],x=[y[0]+m*Math.cos(d+Math.PI/4),y[1]+m*Math.sin(d+Math.PI/4)];i.push(...this.helper.doubleLineOps(y[0],y[1],x[0],x[1],n),...this.helper.doubleLineOps(x[0],x[1],v[0],v[1],n))}})),i}},l(Sp,"l"),Sp),Hi={},Ap,sfe=(Ap=class{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}},l(Ap,"p"),Ap),wx={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function Cb(t,e){return t.type===e}function Y6(t){const e=[],r=(function(s){const o=new Array;for(;s!=="";)if(s.match(/^([ \t\r\n,]+)/))s=s.substr(RegExp.$1.length);else if(s.match(/^([aAcChHlLmMqQsStTvVzZ])/))o[o.length]={type:0,text:RegExp.$1},s=s.substr(RegExp.$1.length);else{if(!s.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];o[o.length]={type:1,text:`${parseFloat(RegExp.$1)}`},s=s.substr(RegExp.$1.length)}return o[o.length]={type:2,text:""},o})(t);let n="BOD",i=0,a=r[i];for(;!Cb(a,2);){let s=0;const o=[];if(n==="BOD"){if(a.text!=="M"&&a.text!=="m")return Y6("M0,0"+t);i++,s=wx[a.text],n=a.text}else Cb(a,1)?s=wx[n]:(i++,s=wx[a.text],n=a.text);if(!(i+s<r.length))throw new Error("Path data ended short");for(let u=i;u<i+s;u++){const h=r[u];if(!Cb(h,1))throw new Error("Param not a number: "+n+","+h.text);o[o.length]=+h.text}if(typeof wx[n]!="number")throw new Error("Bad segment: "+n);{const u={key:n,data:o};e.push(u),i+=s,a=r[i],n==="M"&&(n="L"),n==="m"&&(n="l")}}return e}function W1(t){let e=0,r=0,n=0,i=0;const a=[];for(const{key:s,data:o}of t)switch(s){case"M":a.push({key:"M",data:[...o]}),[e,r]=o,[n,i]=o;break;case"m":e+=o[0],r+=o[1],a.push({key:"M",data:[e,r]}),n=e,i=r;break;case"L":a.push({key:"L",data:[...o]}),[e,r]=o;break;case"l":e+=o[0],r+=o[1],a.push({key:"L",data:[e,r]});break;case"C":a.push({key:"C",data:[...o]}),e=o[4],r=o[5];break;case"c":{const u=o.map(((h,d)=>d%2?h+r:h+e));a.push({key:"C",data:u}),e=u[4],r=u[5];break}case"Q":a.push({key:"Q",data:[...o]}),e=o[2],r=o[3];break;case"q":{const u=o.map(((h,d)=>d%2?h+r:h+e));a.push({key:"Q",data:u}),e=u[2],r=u[3];break}case"A":a.push({key:"A",data:[...o]}),e=o[5],r=o[6];break;case"a":e+=o[5],r+=o[6],a.push({key:"A",data:[o[0],o[1],o[2],o[3],o[4],e,r]});break;case"H":a.push({key:"H",data:[...o]}),e=o[0];break;case"h":e+=o[0],a.push({key:"H",data:[e]});break;case"V":a.push({key:"V",data:[...o]}),r=o[0];break;case"v":r+=o[0],a.push({key:"V",data:[r]});break;case"S":a.push({key:"S",data:[...o]}),e=o[2],r=o[3];break;case"s":{const u=o.map(((h,d)=>d%2?h+r:h+e));a.push({key:"S",data:u}),e=u[2],r=u[3];break}case"T":a.push({key:"T",data:[...o]}),e=o[0],r=o[1];break;case"t":e+=o[0],r+=o[1],a.push({key:"T",data:[e,r]});break;case"Z":case"z":a.push({key:"Z",data:[]}),e=n,r=i}return a}function Y1(t){const e=[];let r="",n=0,i=0,a=0,s=0,o=0,u=0;for(const{key:h,data:d}of t){switch(h){case"M":e.push({key:"M",data:[...d]}),[n,i]=d,[a,s]=d;break;case"C":e.push({key:"C",data:[...d]}),n=d[4],i=d[5],o=d[2],u=d[3];break;case"L":e.push({key:"L",data:[...d]}),[n,i]=d;break;case"H":n=d[0],e.push({key:"L",data:[n,i]});break;case"V":i=d[0],e.push({key:"L",data:[n,i]});break;case"S":{let p=0,f=0;r==="C"||r==="S"?(p=n+(n-o),f=i+(i-u)):(p=n,f=i),e.push({key:"C",data:[p,f,...d]}),o=d[0],u=d[1],n=d[2],i=d[3];break}case"T":{const[p,f]=d;let g=0,m=0;r==="Q"||r==="T"?(g=n+(n-o),m=i+(i-u)):(g=n,m=i);const y=n+2*(g-n)/3,v=i+2*(m-i)/3,x=p+2*(g-p)/3,b=f+2*(m-f)/3;e.push({key:"C",data:[y,v,x,b,p,f]}),o=g,u=m,n=p,i=f;break}case"Q":{const[p,f,g,m]=d,y=n+2*(p-n)/3,v=i+2*(f-i)/3,x=g+2*(p-g)/3,b=m+2*(f-m)/3;e.push({key:"C",data:[y,v,x,b,g,m]}),o=p,u=f,n=g,i=m;break}case"A":{const p=Math.abs(d[0]),f=Math.abs(d[1]),g=d[2],m=d[3],y=d[4],v=d[5],x=d[6];p===0||f===0?(e.push({key:"C",data:[n,i,v,x,v,x]}),n=v,i=x):n===v&&i===x||(V1(n,i,v,x,p,f,g,m,y).forEach((function(b){e.push({key:"C",data:b})})),n=v,i=x);break}case"Z":e.push({key:"Z",data:[]}),n=a,i=s}r=h}return e}function $h(t,e,r){return[t*Math.cos(r)-e*Math.sin(r),t*Math.sin(r)+e*Math.cos(r)]}function V1(t,e,r,n,i,a,s,o,u,h){const d=(p=s,Math.PI*p/180);var p;let f=[],g=0,m=0,y=0,v=0;if(h)[g,m,y,v]=h;else{[t,e]=$h(t,e,-d),[r,n]=$h(r,n,-d);const L=(t-r)/2,I=(e-n)/2;let A=L*L/(i*i)+I*I/(a*a);A>1&&(A=Math.sqrt(A),i*=A,a*=A);const M=i*i,D=a*a,R=M*D-M*I*I-D*L*L,P=M*I*I+D*L*L,$=(o===u?-1:1)*Math.sqrt(Math.abs(R/P));y=$*i*I/a+(t+r)/2,v=$*-a*L/i+(e+n)/2,g=Math.asin(parseFloat(((e-v)/a).toFixed(9))),m=Math.asin(parseFloat(((n-v)/a).toFixed(9))),t<y&&(g=Math.PI-g),r<y&&(m=Math.PI-m),g<0&&(g=2*Math.PI+g),m<0&&(m=2*Math.PI+m),u&&g>m&&(g-=2*Math.PI),!u&&m>g&&(m-=2*Math.PI)}let x=m-g;if(Math.abs(x)>120*Math.PI/180){const L=m,I=r,A=n;m=u&&m>g?g+120*Math.PI/180*1:g+120*Math.PI/180*-1,f=V1(r=y+i*Math.cos(m),n=v+a*Math.sin(m),I,A,i,a,s,0,u,[m,L,y,v])}x=m-g;const b=Math.cos(g),w=Math.sin(g),T=Math.cos(m),k=Math.sin(m),C=Math.tan(x/4),E=4/3*i*C,_=4/3*a*C,S=[t,e],N=[t+E*w,e-_*b],O=[r+E*k,n-_*T],B=[r,n];if(N[0]=2*S[0]-N[0],N[1]=2*S[1]-N[1],h)return[N,O,B].concat(f);{f=[N,O,B].concat(f);const L=[];for(let I=0;I<f.length;I+=3){const A=$h(f[I][0],f[I][1],d),M=$h(f[I+1][0],f[I+1][1],d),D=$h(f[I+2][0],f[I+2][1],d);L.push([A[0],A[1],M[0],M[1],D[0],D[1]])}return L}}l(Cb,"k"),l(Y6,"b"),l(W1,"y"),l(Y1,"m"),l($h,"w"),l(V1,"x");var ofe={randOffset:l((function(t,e){return Ft(t,e)}),"randOffset"),randOffsetWithRange:l((function(t,e,r){return C2(t,e,r)}),"randOffsetWithRange"),ellipse:l((function(t,e,r,n,i){return t5(t,e,i,X1(r,n,i)).opset}),"ellipse"),doubleLineOps:l((function(t,e,r,n,i){return Fo(t,e,r,n,i,!0)}),"doubleLineOps")};function H1(t,e,r,n,i){return{type:"path",ops:Fo(t,e,r,n,i)}}function Oy(t,e,r){const n=(t||[]).length;if(n>2){const i=[];for(let a=0;a<n-1;a++)i.push(...Fo(t[a][0],t[a][1],t[a+1][0],t[a+1][1],r));return e&&i.push(...Fo(t[n-1][0],t[n-1][1],t[0][0],t[0][1],r)),{type:"path",ops:i}}return n===2?H1(t[0][0],t[0][1],t[1][0],t[1][1],r):{type:"path",ops:[]}}function hV(t,e,r,n,i){return(function(a,s){return Oy(a,!0,s)})([[t,e],[t+r,e],[t+r,e+n],[t,e+n]],i)}function u_(t,e){if(t.length){const r=typeof t[0][0]=="number"?[t]:t,n=Qm(r[0],1*(1+.2*e.roughness),e),i=e.disableMultiStroke?[]:Qm(r[0],1.5*(1+.22*e.roughness),p_(e));for(let a=1;a<r.length;a++){const s=r[a];if(s.length){const o=Qm(s,1*(1+.2*e.roughness),e),u=e.disableMultiStroke?[]:Qm(s,1.5*(1+.22*e.roughness),p_(e));for(const h of o)h.op!=="move"&&n.push(h);for(const h of u)h.op!=="move"&&i.push(h)}}return{type:"path",ops:n.concat(i)}}return{type:"path",ops:[]}}function X1(t,e,r){const n=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),i=Math.ceil(Math.max(r.curveStepCount,r.curveStepCount/Math.sqrt(200)*n)),a=2*Math.PI/i;let s=Math.abs(t/2),o=Math.abs(e/2);const u=1-r.curveFitting;return s+=Ft(s*u,r),o+=Ft(o*u,r),{increment:a,rx:s,ry:o}}function t5(t,e,r,n){const[i,a]=f_(n.increment,t,e,n.rx,n.ry,1,n.increment*C2(.1,C2(.4,1,r),r),r);let s=S2(i,null,r);if(!r.disableMultiStroke&&r.roughness!==0){const[o]=f_(n.increment,t,e,n.rx,n.ry,1.5,0,r),u=S2(o,null,r);s=s.concat(u)}return{estimatedPoints:a,opset:{type:"path",ops:s}}}function h_(t,e,r,n,i,a,s,o,u){const h=t,d=e;let p=Math.abs(r/2),f=Math.abs(n/2);p+=Ft(.01*p,u),f+=Ft(.01*f,u);let g=i,m=a;for(;g<0;)g+=2*Math.PI,m+=2*Math.PI;m-g>2*Math.PI&&(g=0,m=2*Math.PI);const y=2*Math.PI/u.curveStepCount,v=Math.min(y/2,(m-g)/2),x=g_(v,h,d,p,f,g,m,1,u);if(!u.disableMultiStroke){const b=g_(v,h,d,p,f,g,m,1.5,u);x.push(...b)}return s&&(o?x.push(...Fo(h,d,h+p*Math.cos(g),d+f*Math.sin(g),u),...Fo(h,d,h+p*Math.cos(m),d+f*Math.sin(m),u)):x.push({op:"lineTo",data:[h,d]},{op:"lineTo",data:[h+p*Math.cos(g),d+f*Math.sin(g)]})),{type:"path",ops:x}}function d_(t,e){const r=Y1(W1(Y6(t))),n=[];let i=[0,0],a=[0,0];for(const{key:s,data:o}of r)switch(s){case"M":a=[o[0],o[1]],i=[o[0],o[1]];break;case"L":n.push(...Fo(a[0],a[1],o[0],o[1],e)),a=[o[0],o[1]];break;case"C":{const[u,h,d,p,f,g]=o;n.push(...dV(u,h,d,p,f,g,a,e)),a=[f,g];break}case"Z":n.push(...Fo(a[0],a[1],i[0],i[1],e)),a=[i[0],i[1]]}return{type:"path",ops:n}}function Sb(t,e){const r=[];for(const n of t)if(n.length){const i=e.maxRandomnessOffset||0,a=n.length;if(a>2){r.push({op:"move",data:[n[0][0]+Ft(i,e),n[0][1]+Ft(i,e)]});for(let s=1;s<a;s++)r.push({op:"lineTo",data:[n[s][0]+Ft(i,e),n[s][1]+Ft(i,e)]})}}return{type:"fillPath",ops:r}}function $c(t,e){return(function(r,n){let i=r.fillStyle||"hachure";if(!Hi[i])switch(i){case"zigzag":Hi[i]||(Hi[i]=new tfe(n));break;case"cross-hatch":Hi[i]||(Hi[i]=new rfe(n));break;case"dots":Hi[i]||(Hi[i]=new nfe(n));break;case"dashed":Hi[i]||(Hi[i]=new ife(n));break;case"zigzag-line":Hi[i]||(Hi[i]=new afe(n));break;default:i="hachure",Hi[i]||(Hi[i]=new j1(n))}return Hi[i]})(e,ofe).fillPolygons(t,e)}function p_(t){const e=Object.assign({},t);return e.randomizer=void 0,t.seed&&(e.seed=t.seed+1),e}function K1(t){return t.randomizer||(t.randomizer=new sfe(t.seed||0)),t.randomizer.next()}function C2(t,e,r,n=1){return r.roughness*n*(K1(r)*(e-t)+t)}function Ft(t,e,r=1){return C2(-t,t,e,r)}function Fo(t,e,r,n,i,a=!1){const s=a?i.disableMultiStrokeFill:i.disableMultiStroke,o=r5(t,e,r,n,i,!0,!1);if(s)return o;const u=r5(t,e,r,n,i,!0,!0);return o.concat(u)}function r5(t,e,r,n,i,a,s){const o=Math.pow(t-r,2)+Math.pow(e-n,2),u=Math.sqrt(o);let h=1;h=u<200?1:u>500?.4:-.0016668*u+1.233334;let d=i.maxRandomnessOffset||0;d*d*100>o&&(d=u/10);const p=d/2,f=.2+.2*K1(i);let g=i.bowing*i.maxRandomnessOffset*(n-e)/200,m=i.bowing*i.maxRandomnessOffset*(t-r)/200;g=Ft(g,i,h),m=Ft(m,i,h);const y=[],v=l((()=>Ft(p,i,h)),"M"),x=l((()=>Ft(d,i,h)),"k"),b=i.preserveVertices;return a&&(s?y.push({op:"move",data:[t+(b?0:v()),e+(b?0:v())]}):y.push({op:"move",data:[t+(b?0:Ft(d,i,h)),e+(b?0:Ft(d,i,h))]})),s?y.push({op:"bcurveTo",data:[g+t+(r-t)*f+v(),m+e+(n-e)*f+v(),g+t+2*(r-t)*f+v(),m+e+2*(n-e)*f+v(),r+(b?0:v()),n+(b?0:v())]}):y.push({op:"bcurveTo",data:[g+t+(r-t)*f+x(),m+e+(n-e)*f+x(),g+t+2*(r-t)*f+x(),m+e+2*(n-e)*f+x(),r+(b?0:x()),n+(b?0:x())]}),y}function Qm(t,e,r){if(!t.length)return[];const n=[];n.push([t[0][0]+Ft(e,r),t[0][1]+Ft(e,r)]),n.push([t[0][0]+Ft(e,r),t[0][1]+Ft(e,r)]);for(let i=1;i<t.length;i++)n.push([t[i][0]+Ft(e,r),t[i][1]+Ft(e,r)]),i===t.length-1&&n.push([t[i][0]+Ft(e,r),t[i][1]+Ft(e,r)]);return S2(n,null,r)}function S2(t,e,r){const n=t.length,i=[];if(n>3){const a=[],s=1-r.curveTightness;i.push({op:"move",data:[t[1][0],t[1][1]]});for(let o=1;o+2<n;o++){const u=t[o];a[0]=[u[0],u[1]],a[1]=[u[0]+(s*t[o+1][0]-s*t[o-1][0])/6,u[1]+(s*t[o+1][1]-s*t[o-1][1])/6],a[2]=[t[o+1][0]+(s*t[o][0]-s*t[o+2][0])/6,t[o+1][1]+(s*t[o][1]-s*t[o+2][1])/6],a[3]=[t[o+1][0],t[o+1][1]],i.push({op:"bcurveTo",data:[a[1][0],a[1][1],a[2][0],a[2][1],a[3][0],a[3][1]]})}if(e&&e.length===2){const o=r.maxRandomnessOffset;i.push({op:"lineTo",data:[e[0]+Ft(o,r),e[1]+Ft(o,r)]})}}else n===3?(i.push({op:"move",data:[t[1][0],t[1][1]]}),i.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):n===2&&i.push(...r5(t[0][0],t[0][1],t[1][0],t[1][1],r,!0,!0));return i}function f_(t,e,r,n,i,a,s,o){const u=[],h=[];if(o.roughness===0){t/=4,h.push([e+n*Math.cos(-t),r+i*Math.sin(-t)]);for(let d=0;d<=2*Math.PI;d+=t){const p=[e+n*Math.cos(d),r+i*Math.sin(d)];u.push(p),h.push(p)}h.push([e+n*Math.cos(0),r+i*Math.sin(0)]),h.push([e+n*Math.cos(t),r+i*Math.sin(t)])}else{const d=Ft(.5,o)-Math.PI/2;h.push([Ft(a,o)+e+.9*n*Math.cos(d-t),Ft(a,o)+r+.9*i*Math.sin(d-t)]);const p=2*Math.PI+d-.01;for(let f=d;f<p;f+=t){const g=[Ft(a,o)+e+n*Math.cos(f),Ft(a,o)+r+i*Math.sin(f)];u.push(g),h.push(g)}h.push([Ft(a,o)+e+n*Math.cos(d+2*Math.PI+.5*s),Ft(a,o)+r+i*Math.sin(d+2*Math.PI+.5*s)]),h.push([Ft(a,o)+e+.98*n*Math.cos(d+s),Ft(a,o)+r+.98*i*Math.sin(d+s)]),h.push([Ft(a,o)+e+.9*n*Math.cos(d+.5*s),Ft(a,o)+r+.9*i*Math.sin(d+.5*s)])}return[h,u]}function g_(t,e,r,n,i,a,s,o,u){const h=a+Ft(.1,u),d=[];d.push([Ft(o,u)+e+.9*n*Math.cos(h-t),Ft(o,u)+r+.9*i*Math.sin(h-t)]);for(let p=h;p<=s;p+=t)d.push([Ft(o,u)+e+n*Math.cos(p),Ft(o,u)+r+i*Math.sin(p)]);return d.push([e+n*Math.cos(s),r+i*Math.sin(s)]),d.push([e+n*Math.cos(s),r+i*Math.sin(s)]),S2(d,null,u)}function dV(t,e,r,n,i,a,s,o){const u=[],h=[o.maxRandomnessOffset||1,(o.maxRandomnessOffset||1)+.3];let d=[0,0];const p=o.disableMultiStroke?1:2,f=o.preserveVertices;for(let g=0;g<p;g++)g===0?u.push({op:"move",data:[s[0],s[1]]}):u.push({op:"move",data:[s[0]+(f?0:Ft(h[0],o)),s[1]+(f?0:Ft(h[0],o))]}),d=f?[i,a]:[i+Ft(h[g],o),a+Ft(h[g],o)],u.push({op:"bcurveTo",data:[t+Ft(h[g],o),e+Ft(h[g],o),r+Ft(h[g],o),n+Ft(h[g],o),d[0],d[1]]});return u}function Fh(t){return[...t]}function m_(t,e=0){const r=t.length;if(r<3)throw new Error("A curve must have at least three points.");const n=[];if(r===3)n.push(Fh(t[0]),Fh(t[1]),Fh(t[2]),Fh(t[2]));else{const i=[];i.push(t[0],t[0]);for(let o=1;o<t.length;o++)i.push(t[o]),o===t.length-1&&i.push(t[o]);const a=[],s=1-e;n.push(Fh(i[0]));for(let o=1;o+2<i.length;o++){const u=i[o];a[0]=[u[0],u[1]],a[1]=[u[0]+(s*i[o+1][0]-s*i[o-1][0])/6,u[1]+(s*i[o+1][1]-s*i[o-1][1])/6],a[2]=[i[o+1][0]+(s*i[o][0]-s*i[o+2][0])/6,i[o+1][1]+(s*i[o][1]-s*i[o+2][1])/6],a[3]=[i[o+1][0],i[o+1][1]],n.push(a[1],a[2],a[3])}}return n}function Py(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function pV(t,e,r){const n=Py(e,r);if(n===0)return Py(t,e);let i=((t[0]-e[0])*(r[0]-e[0])+(t[1]-e[1])*(r[1]-e[1]))/n;return i=Math.max(0,Math.min(1,i)),Py(t,Cl(e,r,i))}function Cl(t,e,r){return[t[0]+(e[0]-t[0])*r,t[1]+(e[1]-t[1])*r]}function n5(t,e,r,n){const i=n||[];if((function(o,u){const h=o[u+0],d=o[u+1],p=o[u+2],f=o[u+3];let g=3*d[0]-2*h[0]-f[0];g*=g;let m=3*d[1]-2*h[1]-f[1];m*=m;let y=3*p[0]-2*f[0]-h[0];y*=y;let v=3*p[1]-2*f[1]-h[1];return v*=v,g<y&&(g=y),m<v&&(m=v),g+m})(t,e)<r){const o=t[e+0];i.length?(a=i[i.length-1],s=o,Math.sqrt(Py(a,s))>1&&i.push(o)):i.push(o),i.push(t[e+3])}else{const u=t[e+0],h=t[e+1],d=t[e+2],p=t[e+3],f=Cl(u,h,.5),g=Cl(h,d,.5),m=Cl(d,p,.5),y=Cl(f,g,.5),v=Cl(g,m,.5),x=Cl(y,v,.5);n5([u,f,y,x],0,r,i),n5([x,v,m,p],0,r,i)}var a,s;return i}function fV(t,e){return A2(t,0,t.length,e)}function A2(t,e,r,n,i){const a=i||[],s=t[e],o=t[r-1];let u=0,h=1;for(let d=e+1;d<r-1;++d){const p=pV(t[d],s,o);p>u&&(u=p,h=d)}return Math.sqrt(u)>n?(A2(t,e,h+1,n,a),A2(t,h,r,n,a)):(a.length||a.push(s),a.push(o)),a}function Ab(t,e=.15,r){const n=[],i=(t.length-1)/3;for(let a=0;a<i;a++)n5(t,3*a,e,n);return r&&r>0?A2(n,0,n.length,r):n}l(H1,"v"),l(Oy,"S"),l(hV,"O"),l(u_,"L"),l(X1,"T"),l(t5,"D"),l(h_,"A"),l(d_,"_"),l(Sb,"I"),l($c,"C"),l(p_,"z"),l(K1,"W"),l(C2,"E"),l(Ft,"G"),l(Fo,"$"),l(r5,"R"),l(Qm,"j"),l(S2,"q"),l(f_,"F"),l(g_,"V"),l(dV,"Z"),l(Fh,"Q"),l(m_,"H"),l(Py,"N"),l(pV,"B"),l(Cl,"J"),l(n5,"K"),l(fV,"U"),l(A2,"X"),l(Ab,"Y");var va="none",Lp,i5=(Lp=class{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,r,n){return{shape:e,sets:r||[],options:n||this.defaultOptions}}line(e,r,n,i,a){const s=this._o(a);return this._d("line",[H1(e,r,n,i,s)],s)}rectangle(e,r,n,i,a){const s=this._o(a),o=[],u=hV(e,r,n,i,s);if(s.fill){const h=[[e,r],[e+n,r],[e+n,r+i],[e,r+i]];s.fillStyle==="solid"?o.push(Sb([h],s)):o.push($c([h],s))}return s.stroke!==va&&o.push(u),this._d("rectangle",o,s)}ellipse(e,r,n,i,a){const s=this._o(a),o=[],u=X1(n,i,s),h=t5(e,r,s,u);if(s.fill)if(s.fillStyle==="solid"){const d=t5(e,r,s,u).opset;d.type="fillPath",o.push(d)}else o.push($c([h.estimatedPoints],s));return s.stroke!==va&&o.push(h.opset),this._d("ellipse",o,s)}circle(e,r,n,i){const a=this.ellipse(e,r,n,n,i);return a.shape="circle",a}linearPath(e,r){const n=this._o(r);return this._d("linearPath",[Oy(e,!1,n)],n)}arc(e,r,n,i,a,s,o=!1,u){const h=this._o(u),d=[],p=h_(e,r,n,i,a,s,o,!0,h);if(o&&h.fill)if(h.fillStyle==="solid"){const f=Object.assign({},h);f.disableMultiStroke=!0;const g=h_(e,r,n,i,a,s,!0,!1,f);g.type="fillPath",d.push(g)}else d.push((function(f,g,m,y,v,x,b){const w=f,T=g;let k=Math.abs(m/2),C=Math.abs(y/2);k+=Ft(.01*k,b),C+=Ft(.01*C,b);let E=v,_=x;for(;E<0;)E+=2*Math.PI,_+=2*Math.PI;_-E>2*Math.PI&&(E=0,_=2*Math.PI);const S=(_-E)/b.curveStepCount,N=[];for(let O=E;O<=_;O+=S)N.push([w+k*Math.cos(O),T+C*Math.sin(O)]);return N.push([w+k*Math.cos(_),T+C*Math.sin(_)]),N.push([w,T]),$c([N],b)})(e,r,n,i,a,s,h));return h.stroke!==va&&d.push(p),this._d("arc",d,h)}curve(e,r){const n=this._o(r),i=[],a=u_(e,n);if(n.fill&&n.fill!==va)if(n.fillStyle==="solid"){const s=u_(e,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(s.ops)})}else{const s=[],o=e;if(o.length){const u=typeof o[0][0]=="number"?[o]:o;for(const h of u)h.length<3?s.push(...h):h.length===3?s.push(...Ab(m_([h[0],h[0],h[1],h[2]]),10,(1+n.roughness)/2)):s.push(...Ab(m_(h),10,(1+n.roughness)/2))}s.length&&i.push($c([s],n))}return n.stroke!==va&&i.push(a),this._d("curve",i,n)}polygon(e,r){const n=this._o(r),i=[],a=Oy(e,!0,n);return n.fill&&(n.fillStyle==="solid"?i.push(Sb([e],n)):i.push($c([e],n))),n.stroke!==va&&i.push(a),this._d("polygon",i,n)}path(e,r){const n=this._o(r),i=[];if(!e)return this._d("path",i,n);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const a=n.fill&&n.fill!=="transparent"&&n.fill!==va,s=n.stroke!==va,o=!!(n.simplification&&n.simplification<1),u=(function(d,p,f){const g=Y1(W1(Y6(d))),m=[];let y=[],v=[0,0],x=[];const b=l((()=>{x.length>=4&&y.push(...Ab(x,1)),x=[]}),"i"),w=l((()=>{b(),y.length&&(m.push(y),y=[])}),"c");for(const{key:k,data:C}of g)switch(k){case"M":w(),v=[C[0],C[1]],y.push(v);break;case"L":b(),y.push([C[0],C[1]]);break;case"C":if(!x.length){const E=y.length?y[y.length-1]:v;x.push([E[0],E[1]])}x.push([C[0],C[1]]),x.push([C[2],C[3]]),x.push([C[4],C[5]]);break;case"Z":b(),y.push([v[0],v[1]])}if(w(),!f)return m;const T=[];for(const k of m){const C=fV(k,f);C.length&&T.push(C)}return T})(e,0,o?4-4*(n.simplification||1):(1+n.roughness)/2),h=d_(e,n);if(a)if(n.fillStyle==="solid")if(u.length===1){const d=d_(e,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(d.ops)})}else i.push(Sb(u,n));else i.push($c(u,n));return s&&(o?u.forEach((d=>{i.push(Oy(d,!1,n))})):i.push(h)),this._d("path",i,n)}opsToPath(e,r){let n="";for(const i of e.ops){const a=typeof r=="number"&&r>=0?i.data.map((s=>+s.toFixed(r))):i.data;switch(i.op){case"move":n+=`M${a[0]} ${a[1]} `;break;case"bcurveTo":n+=`C${a[0]} ${a[1]}, ${a[2]} ${a[3]}, ${a[4]} ${a[5]} `;break;case"lineTo":n+=`L${a[0]} ${a[1]} `}}return n.trim()}toPaths(e){const r=e.sets||[],n=e.options||this.defaultOptions,i=[];for(const a of r){let s=null;switch(a.type){case"path":s={d:this.opsToPath(a),stroke:n.stroke,strokeWidth:n.strokeWidth,fill:va};break;case"fillPath":s={d:this.opsToPath(a),stroke:va,strokeWidth:0,fill:n.fill||va};break;case"fillSketch":s=this.fillSketch(a,n)}s&&i.push(s)}return i}fillSketch(e,r){let n=r.fillWeight;return n<0&&(n=r.strokeWidth/2),{d:this.opsToPath(e),stroke:r.fill||va,strokeWidth:n,fill:va}}_mergedShape(e){return e.filter(((r,n)=>n===0||r.op!=="move"))}},l(Lp,"et"),Lp),Np,lfe=(Np=class{constructor(e,r){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new i5(r)}draw(e){const r=e.sets||[],n=e.options||this.getDefaultOptions(),i=this.ctx,a=e.options.fixedDecimalPlaceDigits;for(const s of r)switch(s.type){case"path":i.save(),i.strokeStyle=n.stroke==="none"?"transparent":n.stroke,i.lineWidth=n.strokeWidth,n.strokeLineDash&&i.setLineDash(n.strokeLineDash),n.strokeLineDashOffset&&(i.lineDashOffset=n.strokeLineDashOffset),this._drawToContext(i,s,a),i.restore();break;case"fillPath":{i.save(),i.fillStyle=n.fill||"";const o=e.shape==="curve"||e.shape==="polygon"||e.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,s,a,o),i.restore();break}case"fillSketch":this.fillSketch(i,s,n)}}fillSketch(e,r,n){let i=n.fillWeight;i<0&&(i=n.strokeWidth/2),e.save(),n.fillLineDash&&e.setLineDash(n.fillLineDash),n.fillLineDashOffset&&(e.lineDashOffset=n.fillLineDashOffset),e.strokeStyle=n.fill||"",e.lineWidth=i,this._drawToContext(e,r,n.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,r,n,i="nonzero"){e.beginPath();for(const a of r.ops){const s=typeof n=="number"&&n>=0?a.data.map((o=>+o.toFixed(n))):a.data;switch(a.op){case"move":e.moveTo(s[0],s[1]);break;case"bcurveTo":e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"lineTo":e.lineTo(s[0],s[1])}}r.type==="fillPath"?e.fill(i):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,r,n,i,a){const s=this.gen.line(e,r,n,i,a);return this.draw(s),s}rectangle(e,r,n,i,a){const s=this.gen.rectangle(e,r,n,i,a);return this.draw(s),s}ellipse(e,r,n,i,a){const s=this.gen.ellipse(e,r,n,i,a);return this.draw(s),s}circle(e,r,n,i){const a=this.gen.circle(e,r,n,i);return this.draw(a),a}linearPath(e,r){const n=this.gen.linearPath(e,r);return this.draw(n),n}polygon(e,r){const n=this.gen.polygon(e,r);return this.draw(n),n}arc(e,r,n,i,a,s,o=!1,u){const h=this.gen.arc(e,r,n,i,a,s,o,u);return this.draw(h),h}curve(e,r){const n=this.gen.curve(e,r);return this.draw(n),n}path(e,r){const n=this.gen.path(e,r);return this.draw(n),n}},l(Np,"st"),Np),kx="http://www.w3.org/2000/svg",Ip,cfe=(Ip=class{constructor(e,r){this.svg=e,this.gen=new i5(r)}draw(e){const r=e.sets||[],n=e.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,a=i.createElementNS(kx,"g"),s=e.options.fixedDecimalPlaceDigits;for(const o of r){let u=null;switch(o.type){case"path":u=i.createElementNS(kx,"path"),u.setAttribute("d",this.opsToPath(o,s)),u.setAttribute("stroke",n.stroke),u.setAttribute("stroke-width",n.strokeWidth+""),u.setAttribute("fill","none"),n.strokeLineDash&&u.setAttribute("stroke-dasharray",n.strokeLineDash.join(" ").trim()),n.strokeLineDashOffset&&u.setAttribute("stroke-dashoffset",`${n.strokeLineDashOffset}`);break;case"fillPath":u=i.createElementNS(kx,"path"),u.setAttribute("d",this.opsToPath(o,s)),u.setAttribute("stroke","none"),u.setAttribute("stroke-width","0"),u.setAttribute("fill",n.fill||""),e.shape!=="curve"&&e.shape!=="polygon"||u.setAttribute("fill-rule","evenodd");break;case"fillSketch":u=this.fillSketch(i,o,n)}u&&a.appendChild(u)}return a}fillSketch(e,r,n){let i=n.fillWeight;i<0&&(i=n.strokeWidth/2);const a=e.createElementNS(kx,"path");return a.setAttribute("d",this.opsToPath(r,n.fixedDecimalPlaceDigits)),a.setAttribute("stroke",n.fill||""),a.setAttribute("stroke-width",i+""),a.setAttribute("fill","none"),n.fillLineDash&&a.setAttribute("stroke-dasharray",n.fillLineDash.join(" ").trim()),n.fillLineDashOffset&&a.setAttribute("stroke-dashoffset",`${n.fillLineDashOffset}`),a}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,r){return this.gen.opsToPath(e,r)}line(e,r,n,i,a){const s=this.gen.line(e,r,n,i,a);return this.draw(s)}rectangle(e,r,n,i,a){const s=this.gen.rectangle(e,r,n,i,a);return this.draw(s)}ellipse(e,r,n,i,a){const s=this.gen.ellipse(e,r,n,i,a);return this.draw(s)}circle(e,r,n,i){const a=this.gen.circle(e,r,n,i);return this.draw(a)}linearPath(e,r){const n=this.gen.linearPath(e,r);return this.draw(n)}polygon(e,r){const n=this.gen.polygon(e,r);return this.draw(n)}arc(e,r,n,i,a,s,o=!1,u){const h=this.gen.arc(e,r,n,i,a,s,o,u);return this.draw(h)}curve(e,r){const n=this.gen.curve(e,r);return this.draw(n)}path(e,r){const n=this.gen.path(e,r);return this.draw(n)}},l(Ip,"ot"),Ip),Ct={canvas:l(((t,e)=>new lfe(t,e)),"canvas"),svg:l(((t,e)=>new cfe(t,e)),"svg"),generator:l((t=>new i5(t)),"generator"),newSeed:l((()=>i5.newSeed()),"newSeed")},ufe=l(((t,e)=>{var r,n,i=t.x,a=t.y,s=e.x-i,o=e.y-a,u=t.width/2,h=t.height/2;return Math.abs(o)*u>Math.abs(s)*h?(o<0&&(h=-h),r=o===0?0:h*s/o,n=h):(s<0&&(u=-u),r=u,n=s===0?0:u*o/s),{x:i+r,y:a+n}}),"intersectRect"),um=ufe;function gV(t,e){e&&t.attr("style",e)}async function mV(t){const e=Ze(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=e.append("xhtml:div");let n=t.label;t.label&&Ei(t.label)&&(n=await dv(t.label.replace(He.lineBreakRegex,`
`),ke()));const i=t.isNode?"nodeLabel":"edgeLabel";return r.html('<span class="'+i+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+n+"</span>"),gV(r,t.labelStyle),r.style("display","inline-block"),r.style("padding-right","1px"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}l(gV,"applyStyle"),l(mV,"addHtmlLabel");var hfe=l((async(t,e,r,n)=>{let i=t||"";if(typeof i=="object"&&(i=i[0]),Cr(ke().flowchart.htmlLabels)){i=i.replace(/\\n|\n/g,"<br />"),ee.info("vertexText"+i);const a={isNode:n,label:io(i).replace(/fa[blrs]?:fa-[\w-]+/g,(s=>`<i class='${s.replace(":"," ")}'></i>`)),labelStyle:e&&e.replace("fill:","color:")};return await mV(a)}{const a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttribute("style",e.replace("color:","fill:"));let s=[];s=typeof i=="string"?i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?i:[];for(const o of s){const u=document.createElementNS("http://www.w3.org/2000/svg","tspan");u.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),u.setAttribute("dy","1em"),u.setAttribute("x","0"),r?u.setAttribute("class","title-row"):u.setAttribute("class","row"),u.textContent=o.trim(),a.appendChild(u)}return a}}),"createLabel"),au=hfe,nl=l(((t,e,r,n,i)=>["M",t+i,e,"H",t+r-i,"A",i,i,0,0,1,t+r,e+i,"V",e+n-i,"A",i,i,0,0,1,t+r-i,e+n,"H",t+i,"A",i,i,0,0,1,t,e+n-i,"V",e+i,"A",i,i,0,0,1,t+i,e,"Z"].join(" ")),"createRoundedRectPathD"),dfe=l((t=>{const{handDrawnSeed:e}=ke();return{fill:t,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:t,seed:e}}),"solidStateFill"),hm=l((t=>{const e=pfe([...t.cssCompiledStyles||[],...t.cssStyles||[]]);return{stylesMap:e,stylesArray:[...e]}}),"compileStyles"),pfe=l((t=>{const e=new Map;return t.forEach((r=>{const[n,i]=r.split(":");e.set(n.trim(),i?.trim())})),e}),"styles2Map"),yV=l((t=>t==="color"||t==="font-size"||t==="font-family"||t==="font-weight"||t==="font-style"||t==="text-decoration"||t==="text-align"||t==="text-transform"||t==="line-height"||t==="letter-spacing"||t==="word-spacing"||t==="text-shadow"||t==="text-overflow"||t==="white-space"||t==="word-wrap"||t==="word-break"||t==="overflow-wrap"||t==="hyphens"),"isLabelStyle"),Rt=l((t=>{const{stylesArray:e}=hm(t),r=[],n=[],i=[],a=[];return e.forEach((s=>{const o=s[0];yV(o)?r.push(s.join(":")+" !important"):(n.push(s.join(":")+" !important"),o.includes("stroke")&&i.push(s.join(":")+" !important"),o==="fill"&&a.push(s.join(":")+" !important"))})),{labelStyles:r.join(";"),nodeStyles:n.join(";"),stylesArray:e,borderStyles:i,backgroundStyles:a}}),"styles2String"),At=l(((t,e)=>{const{themeVariables:r,handDrawnSeed:n}=ke(),{nodeBorder:i,mainBkg:a}=r,{stylesMap:s}=hm(t);return Object.assign({roughness:.7,fill:s.get("fill")||a,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:s.get("stroke")||i,seed:n,strokeWidth:s.get("stroke-width")?.replace("px","")||1.3,fillLineDash:[0,0]},e)}),"userNodeOverrides"),DR=l((async(t,e)=>{ee.info("Creating subgraph rect for ",e.id,e);const r=ke(),{themeVariables:n,handDrawnSeed:i}=r,{clusterBkg:a,clusterBorder:s}=n,{labelStyles:o,nodeStyles:u,borderStyles:h,backgroundStyles:d}=Rt(e),p=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),f=Cr(r.flowchart.htmlLabels),g=p.insert("g").attr("class","cluster-label "),m=await pa(g,e.label,{style:e.labelStyle,useHtmlLabels:f,isNode:!0});let y=m.getBBox();if(Cr(r.flowchart.htmlLabels)){const E=m.children[0],_=Ze(m);y=E.getBoundingClientRect(),_.attr("width",y.width),_.attr("height",y.height)}const v=e.width<=y.width+e.padding?y.width+e.padding:e.width;e.width<=y.width+e.padding?e.diff=(v-e.width)/2-e.padding:e.diff=-e.padding;const x=e.height,b=e.x-v/2,w=e.y-x/2;let T;if(ee.trace("Data ",e,JSON.stringify(e)),e.look==="handDrawn"){const E=Ct.svg(p),_=At(e,{roughness:.7,fill:a,stroke:s,fillWeight:3,seed:i}),S=E.path(nl(b,w,v,x,0),_);T=p.insert((()=>(ee.debug("Rough node insert CXC",S),S)),":first-child"),T.select("path:nth-child(2)").attr("style",h.join(";")),T.select("path").attr("style",d.join(";").replace("fill","stroke"))}else T=p.insert("rect",":first-child"),T.attr("style",u).attr("rx",e.rx).attr("ry",e.ry).attr("x",b).attr("y",w).attr("width",v).attr("height",x);const{subGraphTitleTopMargin:k}=xv(r);if(g.attr("transform",`translate(${e.x-y.width/2}, ${e.y-e.height/2+k})`),o){const E=g.select("span");E&&E.attr("style",o)}const C=T.node().getBBox();return e.offsetX=0,e.width=C.width,e.height=C.height,e.offsetY=y.height-e.padding/2,e.intersect=function(E){return um(e,E)},{cluster:p,labelBBox:y}}),"rect"),ffe=l(((t,e)=>{const r=t.insert("g").attr("class","note-cluster").attr("id",e.id),n=r.insert("rect",":first-child"),i=0*e.padding,a=i/2;n.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-a).attr("y",e.y-e.height/2-a).attr("width",e.width+i).attr("height",e.height+i).attr("fill","none");const s=n.node().getBBox();return e.width=s.width,e.height=s.height,e.intersect=function(o){return um(e,o)},{cluster:r,labelBBox:{width:0,height:0}}}),"noteGroup"),gfe=l((async(t,e)=>{const r=ke(),{themeVariables:n,handDrawnSeed:i}=r,{altBackground:a,compositeBackground:s,compositeTitleBackground:o,nodeBorder:u}=n,h=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-id",e.id).attr("data-look",e.look),d=h.insert("g",":first-child"),p=h.insert("g").attr("class","cluster-label");let f=h.append("rect");const g=p.node().appendChild(await au(e.label,e.labelStyle,void 0,!0));let m=g.getBBox();if(Cr(r.flowchart.htmlLabels)){const S=g.children[0],N=Ze(g);m=S.getBoundingClientRect(),N.attr("width",m.width),N.attr("height",m.height)}const y=0*e.padding,v=y/2,x=(e.width<=m.width+e.padding?m.width+e.padding:e.width)+y;e.width<=m.width+e.padding?e.diff=(x-e.width)/2-e.padding:e.diff=-e.padding;const b=e.height+y,w=e.height+y-m.height-6,T=e.x-x/2,k=e.y-b/2;e.width=x;const C=e.y-e.height/2-v+m.height+2;let E;if(e.look==="handDrawn"){const S=e.cssClasses.includes("statediagram-cluster-alt"),N=Ct.svg(h),O=e.rx||e.ry?N.path(nl(T,k,x,b,10),{roughness:.7,fill:o,fillStyle:"solid",stroke:u,seed:i}):N.rectangle(T,k,x,b,{seed:i});E=h.insert((()=>O),":first-child");const B=N.rectangle(T,C,x,w,{fill:S?a:s,fillStyle:S?"hachure":"solid",stroke:u,seed:i});E=h.insert((()=>O),":first-child"),f=h.insert((()=>B))}else E=d.insert("rect",":first-child"),E.attr("class","outer").attr("x",T).attr("y",k).attr("width",x).attr("height",b).attr("data-look",e.look),f.attr("class","inner").attr("x",T).attr("y",C).attr("width",x).attr("height",w);p.attr("transform",`translate(${e.x-m.width/2}, ${k+1-(Cr(r.flowchart.htmlLabels)?0:3)})`);const _=E.node().getBBox();return e.height=_.height,e.offsetX=0,e.offsetY=m.height-e.padding/2,e.labelBBox=m,e.intersect=function(S){return um(e,S)},{cluster:h,labelBBox:m}}),"roundedWithTitle"),mfe=l((async(t,e)=>{ee.info("Creating subgraph rect for ",e.id,e);const r=ke(),{themeVariables:n,handDrawnSeed:i}=r,{clusterBkg:a,clusterBorder:s}=n,{labelStyles:o,nodeStyles:u,borderStyles:h,backgroundStyles:d}=Rt(e),p=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),f=Cr(r.flowchart.htmlLabels),g=p.insert("g").attr("class","cluster-label "),m=await pa(g,e.label,{style:e.labelStyle,useHtmlLabels:f,isNode:!0,width:e.width});let y=m.getBBox();if(Cr(r.flowchart.htmlLabels)){const E=m.children[0],_=Ze(m);y=E.getBoundingClientRect(),_.attr("width",y.width),_.attr("height",y.height)}const v=e.width<=y.width+e.padding?y.width+e.padding:e.width;e.width<=y.width+e.padding?e.diff=(v-e.width)/2-e.padding:e.diff=-e.padding;const x=e.height,b=e.x-v/2,w=e.y-x/2;let T;if(ee.trace("Data ",e,JSON.stringify(e)),e.look==="handDrawn"){const E=Ct.svg(p),_=At(e,{roughness:.7,fill:a,stroke:s,fillWeight:4,seed:i}),S=E.path(nl(b,w,v,x,e.rx),_);T=p.insert((()=>(ee.debug("Rough node insert CXC",S),S)),":first-child"),T.select("path:nth-child(2)").attr("style",h.join(";")),T.select("path").attr("style",d.join(";").replace("fill","stroke"))}else T=p.insert("rect",":first-child"),T.attr("style",u).attr("rx",e.rx).attr("ry",e.ry).attr("x",b).attr("y",w).attr("width",v).attr("height",x);const{subGraphTitleTopMargin:k}=xv(r);if(g.attr("transform",`translate(${e.x-y.width/2}, ${e.y-e.height/2+k})`),o){const E=g.select("span");E&&E.attr("style",o)}const C=T.node().getBBox();return e.offsetX=0,e.width=C.width,e.height=C.height,e.offsetY=y.height-e.padding/2,e.intersect=function(E){return um(e,E)},{cluster:p,labelBBox:y}}),"kanbanSection"),yfe=l(((t,e)=>{const r=ke(),{themeVariables:n,handDrawnSeed:i}=r,{nodeBorder:a}=n,s=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-look",e.look),o=s.insert("g",":first-child"),u=0*e.padding,h=e.width+u;e.diff=-e.padding;const d=e.height+u,p=e.x-h/2,f=e.y-d/2;let g;if(e.width=h,e.look==="handDrawn"){const y=Ct.svg(s).rectangle(p,f,h,d,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:a,seed:i});g=s.insert((()=>y),":first-child")}else g=o.insert("rect",":first-child"),g.attr("class","divider").attr("x",p).attr("y",f).attr("width",h).attr("height",d).attr("data-look",e.look);const m=g.node().getBBox();return e.height=m.height,e.offsetX=0,e.offsetY=0,e.intersect=function(y){return um(e,y)},{cluster:s,labelBBox:{}}}),"divider"),vfe={rect:DR,squareRect:DR,roundedWithTitle:gfe,noteGroup:ffe,divider:yfe,kanbanSection:mfe},vV=new Map,Z1=l((async(t,e)=>{const r=e.shape||"rect",n=await vfe[r](t,e);return vV.set(e.id,n),n}),"insertCluster"),xfe=l((()=>{vV=new Map}),"clear");function xV(t,e){return t.intersect(e)}l(xV,"intersectNode");var bfe=xV;function bV(t,e,r,n){var i=t.x,a=t.y,s=i-n.x,o=a-n.y,u=Math.sqrt(e*e*o*o+r*r*s*s),h=Math.abs(e*r*s/u);n.x<i&&(h=-h);var d=Math.abs(e*r*o/u);return n.y<a&&(d=-d),{x:i+h,y:a+d}}l(bV,"intersectEllipse");var wV=bV;function kV(t,e,r){return wV(t,e,e,r)}l(kV,"intersectCircle");var wfe=kV;function TV(t,e,r,n){var i,a,s,o,u,h,d,p,f,g,m,y,v;if(i=e.y-t.y,s=t.x-e.x,u=e.x*t.y-t.x*e.y,f=i*r.x+s*r.y+u,g=i*n.x+s*n.y+u,!(f!==0&&g!==0&&y_(f,g)||(a=n.y-r.y,o=r.x-n.x,h=n.x*r.y-r.x*n.y,d=a*t.x+o*t.y+h,p=a*e.x+o*e.y+h,d!==0&&p!==0&&y_(d,p)||(m=i*o-a*s)==0)))return y=Math.abs(m/2),{x:(v=s*h-o*u)<0?(v-y)/m:(v+y)/m,y:(v=a*u-i*h)<0?(v-y)/m:(v+y)/m}}function y_(t,e){return t*e>0}l(TV,"intersectLine"),l(y_,"sameSign");var kfe=TV;function EV(t,e,r){let n=t.x,i=t.y,a=[],s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;typeof e.forEach=="function"?e.forEach((function(d){s=Math.min(s,d.x),o=Math.min(o,d.y)})):(s=Math.min(s,e.x),o=Math.min(o,e.y));let u=n-t.width/2-s,h=i-t.height/2-o;for(let d=0;d<e.length;d++){let p=e[d],f=e[d<e.length-1?d+1:0],g=kfe(t,r,{x:u+p.x,y:h+p.y},{x:u+f.x,y:h+f.y});g&&a.push(g)}return a.length?(a.length>1&&a.sort((function(d,p){let f=d.x-r.x,g=d.y-r.y,m=Math.sqrt(f*f+g*g),y=p.x-r.x,v=p.y-r.y,x=Math.sqrt(y*y+v*v);return m<x?-1:m===x?0:1})),a[0]):t}l(EV,"intersectPolygon");var kt={node:bfe,circle:wfe,ellipse:wV,polygon:EV,rect:um};function _V(t,e){const{labelStyles:r}=Rt(e);e.labelStyle=r;const n=qt(e);let i=n;n||(i="anchor");const a=t.insert("g").attr("class",i).attr("id",e.domId||e.id),{cssStyles:s}=e,o=Ct.svg(a),u=At(e,{fill:"black",stroke:"none",fillStyle:"solid"});e.look!=="handDrawn"&&(u.roughness=0);const h=o.circle(0,0,2,u),d=a.insert((()=>h),":first-child");return d.attr("class","anchor").attr("style",$i(s)),Nt(e,d),e.intersect=function(p){return ee.info("Circle intersect",e,1,p),kt.circle(e,1,p)},a}function v_(t,e,r,n,i,a,s){const o=(t+r)/2,u=(e+n)/2,h=Math.atan2(n-e,r-t),d=(r-t)/2/i,p=(n-e)/2/a,f=Math.sqrt(d**2+p**2);if(f>1)throw new Error("The given radii are too small to create an arc between the points.");const g=Math.sqrt(1-f**2),m=o+g*a*Math.sin(h)*(s?-1:1),y=u-g*i*Math.cos(h)*(s?-1:1),v=Math.atan2((e-y)/a,(t-m)/i);let x=Math.atan2((n-y)/a,(r-m)/i)-v;s&&x<0&&(x+=2*Math.PI),!s&&x>0&&(x-=2*Math.PI);const b=[];for(let w=0;w<20;w++){const T=v+w/19*x,k=m+i*Math.cos(T),C=y+a*Math.sin(T);b.push({x:k,y:C})}return b}async function CV(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a}=await Wt(t,e,qt(e)),s=a.width+e.padding+20,o=a.height+e.padding,u=o/2,h=u/(2.5+o/50),{cssStyles:d}=e,p=[{x:s/2,y:-o/2},{x:-s/2,y:-o/2},...v_(-s/2,-o/2,-s/2,o/2,h,u,!1),{x:s/2,y:o/2},...v_(s/2,o/2,s/2,-o/2,h,u,!0)],f=Ct.svg(i),g=At(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const m=lr(p),y=f.path(m,g),v=i.insert((()=>y),":first-child");return v.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",d),n&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",n),v.attr("transform",`translate(${h/2}, 0)`),Nt(e,v),e.intersect=function(x){return kt.polygon(e,p,x)},i}function il(t,e,r,n){return t.insert("polygon",":first-child").attr("points",n.map((function(i){return i.x+","+i.y})).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+r/2+")")}async function SV(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a}=await Wt(t,e,qt(e)),s=a.height+e.padding,o=a.width+e.padding+12,u=-s,h=[{x:12,y:u},{x:o,y:u},{x:o,y:0},{x:0,y:0},{x:0,y:u+12},{x:12,y:u}];let d;const{cssStyles:p}=e;if(e.look==="handDrawn"){const f=Ct.svg(i),g=At(e,{}),m=lr(h),y=f.path(m,g);d=i.insert((()=>y),":first-child").attr("transform",`translate(${-o/2}, ${s/2})`),p&&d.attr("style",p)}else d=il(i,o,s,h);return n&&d.attr("style",n),Nt(e,d),e.intersect=function(f){return kt.polygon(e,h,f)},i}function AV(t,e){const{nodeStyles:r}=Rt(e);e.label="";const n=t.insert("g").attr("class",qt(e)).attr("id",e.domId??e.id),{cssStyles:i}=e,a=Math.max(28,e.width??0),s=[{x:0,y:a/2},{x:a/2,y:0},{x:0,y:-a/2},{x:-a/2,y:0}],o=Ct.svg(n),u=At(e,{});e.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const h=lr(s),d=o.path(h,u),p=n.insert((()=>d),":first-child");return i&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",i),r&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",r),e.width=28,e.height=28,e.intersect=function(f){return kt.polygon(e,s,f)},n}async function LV(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a,halfPadding:s}=await Wt(t,e,qt(e)),o=a.width/2+s;let u;const{cssStyles:h}=e;if(e.look==="handDrawn"){const d=Ct.svg(i),p=At(e,{}),f=d.circle(0,0,2*o,p);u=i.insert((()=>f),":first-child"),u.attr("class","basic label-container").attr("style",$i(h))}else u=i.insert("circle",":first-child").attr("class","basic label-container").attr("style",n).attr("r",o).attr("cx",0).attr("cy",0);return Nt(e,u),e.intersect=function(d){return ee.info("Circle intersect",e,o,d),kt.circle(e,o,d)},i}function NV(t){const e=Math.cos(Math.PI/4),r=Math.sin(Math.PI/4),n=2*t;return`M ${-n/2*e},${n/2*r} L ${n/2*e},${-n/2*r}
                   M ${n/2*e},${n/2*r} L ${-n/2*e},${-n/2*r}`}function IV(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r,e.label="";const i=t.insert("g").attr("class",qt(e)).attr("id",e.domId??e.id),a=Math.max(30,e?.width??0),{cssStyles:s}=e,o=Ct.svg(i),u=At(e,{});e.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const h=o.circle(0,0,2*a,u),d=NV(a),p=o.path(d,u),f=i.insert((()=>h),":first-child");return f.insert((()=>p)),s&&e.look!=="handDrawn"&&f.selectAll("path").attr("style",s),n&&e.look!=="handDrawn"&&f.selectAll("path").attr("style",n),Nt(e,f),e.intersect=function(g){return ee.info("crossedCircle intersect",e,{radius:a,point:g}),kt.circle(e,a,g)},i}function wo(t,e,r,n=100,i=0,a=180){const s=[],o=i*Math.PI/180,u=(a*Math.PI/180-o)/(n-1);for(let h=0;h<n;h++){const d=o+h*u,p=t+r*Math.cos(d),f=e+r*Math.sin(d);s.push({x:-p,y:-f})}return s}async function RV(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Wt(t,e,qt(e)),o=a.width+(e.padding??0),u=a.height+(e.padding??0),h=Math.max(5,.1*u),{cssStyles:d}=e,p=[...wo(o/2,-u/2,h,30,-90,0),{x:-o/2-h,y:h},...wo(o/2+2*h,-h,h,20,-180,-270),...wo(o/2+2*h,h,h,20,-90,-180),{x:-o/2-h,y:-u/2},...wo(o/2,u/2,h,20,0,90)],f=[{x:o/2,y:-u/2-h},{x:-o/2,y:-u/2-h},...wo(o/2,-u/2,h,20,-90,0),{x:-o/2-h,y:-h},...wo(o/2+.1*o,-h,h,20,-180,-270),...wo(o/2+.1*o,h,h,20,-90,-180),{x:-o/2-h,y:u/2},...wo(o/2,u/2,h,20,0,90),{x:-o/2,y:u/2+h},{x:o/2,y:u/2+h}],g=Ct.svg(i),m=At(e,{fill:"none"});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=lr(p).replace("Z",""),v=g.path(y,m),x=lr(f),b=g.path(x,{...m}),w=i.insert("g",":first-child");return w.insert((()=>b),":first-child").attr("stroke-opacity",0),w.insert((()=>v),":first-child"),w.attr("class","text"),d&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",d),n&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",n),w.attr("transform",`translate(${h}, 0)`),s.attr("transform",`translate(${-o/2+h-(a.x-(a.left??0))},${-u/2+(e.padding??0)/2-(a.y-(a.top??0))})`),Nt(e,w),e.intersect=function(T){return kt.polygon(e,f,T)},i}function ko(t,e,r,n=100,i=0,a=180){const s=[],o=i*Math.PI/180,u=(a*Math.PI/180-o)/(n-1);for(let h=0;h<n;h++){const d=o+h*u,p=t+r*Math.cos(d),f=e+r*Math.sin(d);s.push({x:p,y:f})}return s}async function MV(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Wt(t,e,qt(e)),o=a.width+(e.padding??0),u=a.height+(e.padding??0),h=Math.max(5,.1*u),{cssStyles:d}=e,p=[...ko(o/2,-u/2,h,20,-90,0),{x:o/2+h,y:-h},...ko(o/2+2*h,-h,h,20,-180,-270),...ko(o/2+2*h,h,h,20,-90,-180),{x:o/2+h,y:u/2},...ko(o/2,u/2,h,20,0,90)],f=[{x:-o/2,y:-u/2-h},{x:o/2,y:-u/2-h},...ko(o/2,-u/2,h,20,-90,0),{x:o/2+h,y:-h},...ko(o/2+2*h,-h,h,20,-180,-270),...ko(o/2+2*h,h,h,20,-90,-180),{x:o/2+h,y:u/2},...ko(o/2,u/2,h,20,0,90),{x:o/2,y:u/2+h},{x:-o/2,y:u/2+h}],g=Ct.svg(i),m=At(e,{fill:"none"});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=lr(p).replace("Z",""),v=g.path(y,m),x=lr(f),b=g.path(x,{...m}),w=i.insert("g",":first-child");return w.insert((()=>b),":first-child").attr("stroke-opacity",0),w.insert((()=>v),":first-child"),w.attr("class","text"),d&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",d),n&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",n),w.attr("transform",`translate(${-h}, 0)`),s.attr("transform",`translate(${-o/2+(e.padding??0)/2-(a.x-(a.left??0))},${-u/2+(e.padding??0)/2-(a.y-(a.top??0))})`),Nt(e,w),e.intersect=function(T){return kt.polygon(e,f,T)},i}function ni(t,e,r,n=100,i=0,a=180){const s=[],o=i*Math.PI/180,u=(a*Math.PI/180-o)/(n-1);for(let h=0;h<n;h++){const d=o+h*u,p=t+r*Math.cos(d),f=e+r*Math.sin(d);s.push({x:-p,y:-f})}return s}async function DV(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Wt(t,e,qt(e)),o=a.width+(e.padding??0),u=a.height+(e.padding??0),h=Math.max(5,.1*u),{cssStyles:d}=e,p=[...ni(o/2,-u/2,h,30,-90,0),{x:-o/2-h,y:h},...ni(o/2+2*h,-h,h,20,-180,-270),...ni(o/2+2*h,h,h,20,-90,-180),{x:-o/2-h,y:-u/2},...ni(o/2,u/2,h,20,0,90)],f=[...ni(-o/2+h+h/2,-u/2,h,20,-90,-180),{x:o/2-h/2,y:h},...ni(-o/2-h/2,-h,h,20,0,90),...ni(-o/2-h/2,h,h,20,-90,0),{x:o/2-h/2,y:-h},...ni(-o/2+h+h/2,u/2,h,30,-180,-270)],g=[{x:o/2,y:-u/2-h},{x:-o/2,y:-u/2-h},...ni(o/2,-u/2,h,20,-90,0),{x:-o/2-h,y:-h},...ni(o/2+2*h,-h,h,20,-180,-270),...ni(o/2+2*h,h,h,20,-90,-180),{x:-o/2-h,y:u/2},...ni(o/2,u/2,h,20,0,90),{x:-o/2,y:u/2+h},{x:o/2-h-h/2,y:u/2+h},...ni(-o/2+h+h/2,-u/2,h,20,-90,-180),{x:o/2-h/2,y:h},...ni(-o/2-h/2,-h,h,20,0,90),...ni(-o/2-h/2,h,h,20,-90,0),{x:o/2-h/2,y:-h},...ni(-o/2+h+h/2,u/2,h,30,-180,-270)],m=Ct.svg(i),y=At(e,{fill:"none"});e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const v=lr(p).replace("Z",""),x=m.path(v,y),b=lr(f).replace("Z",""),w=m.path(b,y),T=lr(g),k=m.path(T,{...y}),C=i.insert("g",":first-child");return C.insert((()=>k),":first-child").attr("stroke-opacity",0),C.insert((()=>x),":first-child"),C.insert((()=>w),":first-child"),C.attr("class","text"),d&&e.look!=="handDrawn"&&C.selectAll("path").attr("style",d),n&&e.look!=="handDrawn"&&C.selectAll("path").attr("style",n),C.attr("transform",`translate(${h-h/4}, 0)`),s.attr("transform",`translate(${-o/2+(e.padding??0)/2-(a.x-(a.left??0))},${-u/2+(e.padding??0)/2-(a.y-(a.top??0))})`),Nt(e,C),e.intersect=function(E){return kt.polygon(e,g,E)},i}async function OV(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a}=await Wt(t,e,qt(e)),s=Math.max(80,1.25*(a.width+2*(e.padding??0)),e?.width??0),o=Math.max(20,a.height+2*(e.padding??0),e?.height??0),u=o/2,{cssStyles:h}=e,d=Ct.svg(i),p=At(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const f=s-u,g=o/4,m=[{x:f,y:0},{x:g,y:0},{x:0,y:o/2},{x:g,y:o},{x:f,y:o},...q1(-f,-o/2,u,50,270,90)],y=lr(m),v=d.path(y,p),x=i.insert((()=>v),":first-child");return x.attr("class","basic label-container"),h&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",h),n&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",n),x.attr("transform",`translate(${-s/2}, ${-o/2})`),Nt(e,x),e.intersect=function(b){return kt.polygon(e,m,b)},i}l(_V,"anchor"),l(v_,"generateArcPoints"),l(CV,"bowTieRect"),l(il,"insertPolygonShape"),l(SV,"card"),l(AV,"choice"),l(LV,"circle"),l(NV,"createLine"),l(IV,"crossedCircle"),l(wo,"generateCirclePoints"),l(RV,"curlyBraceLeft"),l(ko,"generateCirclePoints"),l(MV,"curlyBraceRight"),l(ni,"generateCirclePoints"),l(DV,"curlyBraces"),l(OV,"curvedTrapezoid");var Tfe=l(((t,e,r,n,i,a)=>[`M${t},${e+a}`,`a${i},${a} 0,0,0 ${r},0`,`a${i},${a} 0,0,0 ${-r},0`,`l0,${n}`,`a${i},${a} 0,0,0 ${r},0`,"l0,"+-n].join(" ")),"createCylinderPathD"),Efe=l(((t,e,r,n,i,a)=>[`M${t},${e+a}`,`M${t+r},${e+a}`,`a${i},${a} 0,0,0 ${-r},0`,`l0,${n}`,`a${i},${a} 0,0,0 ${r},0`,"l0,"+-n].join(" ")),"createOuterCylinderPathD"),_fe=l(((t,e,r,n,i,a)=>[`M${t-r/2},${-n/2}`,`a${i},${a} 0,0,0 ${r},0`].join(" ")),"createInnerCylinderPathD");async function PV(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Wt(t,e,qt(e)),o=Math.max(a.width+e.padding,e.width??0),u=o/2,h=u/(2.5+o/50),d=Math.max(a.height+h+e.padding,e.height??0);let p;const{cssStyles:f}=e;if(e.look==="handDrawn"){const g=Ct.svg(i),m=Efe(0,0,o,d,u,h),y=_fe(0,h,o,d,u,h),v=g.path(m,At(e,{})),x=g.path(y,At(e,{fill:"none"}));p=i.insert((()=>x),":first-child"),p=i.insert((()=>v),":first-child"),p.attr("class","basic label-container"),f&&p.attr("style",f)}else{const g=Tfe(0,0,o,d,u,h);p=i.insert("path",":first-child").attr("d",g).attr("class","basic label-container").attr("style",$i(f)).attr("style",n)}return p.attr("label-offset-y",h),p.attr("transform",`translate(${-o/2}, ${-(d/2+h)})`),Nt(e,p),s.attr("transform",`translate(${-a.width/2-(a.x-(a.left??0))}, ${-a.height/2+(e.padding??0)/1.5-(a.y-(a.top??0))})`),e.intersect=function(g){const m=kt.rect(e,g),y=m.x-(e.x??0);if(u!=0&&(Math.abs(y)<(e.width??0)/2||Math.abs(y)==(e.width??0)/2&&Math.abs(m.y-(e.y??0))>(e.height??0)/2-h)){let v=h*h*(1-y*y/(u*u));v>0&&(v=Math.sqrt(v)),v=h-v,g.y-(e.y??0)>0&&(v=-v),m.y+=v}return m},i}async function BV(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Wt(t,e,qt(e)),o=a.width+e.padding,u=a.height+e.padding,h=.2*u,d=-o/2,p=-u/2-h/2,{cssStyles:f}=e,g=Ct.svg(i),m=At(e,{});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=[{x:d,y:p+h},{x:-d,y:p+h},{x:-d,y:-p},{x:d,y:-p},{x:d,y:p},{x:-d,y:p},{x:-d,y:p+h}],v=g.polygon(y.map((b=>[b.x,b.y])),m),x=i.insert((()=>v),":first-child");return x.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",f),n&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",n),s.attr("transform",`translate(${d+(e.padding??0)/2-(a.x-(a.left??0))}, ${p+h+(e.padding??0)/2-(a.y-(a.top??0))})`),Nt(e,x),e.intersect=function(b){return kt.rect(e,b)},i}async function $V(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a,halfPadding:s}=await Wt(t,e,qt(e)),o=a.width/2+s+5,u=a.width/2+s;let h;const{cssStyles:d}=e;if(e.look==="handDrawn"){const p=Ct.svg(i),f=At(e,{roughness:.2,strokeWidth:2.5}),g=At(e,{roughness:.2,strokeWidth:1.5}),m=p.circle(0,0,2*o,f),y=p.circle(0,0,2*u,g);h=i.insert("g",":first-child"),h.attr("class",$i(e.cssClasses)).attr("style",$i(d)),h.node()?.appendChild(m),h.node()?.appendChild(y)}else{h=i.insert("g",":first-child");const p=h.insert("circle",":first-child"),f=h.insert("circle");h.attr("class","basic label-container").attr("style",n),p.attr("class","outer-circle").attr("style",n).attr("r",o).attr("cx",0).attr("cy",0),f.attr("class","inner-circle").attr("style",n).attr("r",u).attr("cx",0).attr("cy",0)}return Nt(e,h),e.intersect=function(p){return ee.info("DoubleCircle intersect",e,o,p),kt.circle(e,o,p)},i}function FV(t,e,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:i}=Rt(e);e.label="",e.labelStyle=n;const a=t.insert("g").attr("class",qt(e)).attr("id",e.domId??e.id),{cssStyles:s}=e,o=Ct.svg(a),{nodeBorder:u}=r,h=At(e,{fillStyle:"solid"});e.look!=="handDrawn"&&(h.roughness=0);const d=o.circle(0,0,14,h),p=a.insert((()=>d),":first-child");return p.selectAll("path").attr("style",`fill: ${u} !important;`),s&&s.length>0&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",s),i&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",i),Nt(e,p),e.intersect=function(f){return ee.info("filledCircle intersect",e,{radius:7,point:f}),kt.circle(e,7,f)},a}async function zV(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Wt(t,e,qt(e)),o=a.width+(e.padding??0),u=o+a.height,h=o+a.height,d=[{x:0,y:-u},{x:h,y:-u},{x:h/2,y:0}],{cssStyles:p}=e,f=Ct.svg(i),g=At(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const m=lr(d),y=f.path(m,g),v=i.insert((()=>y),":first-child").attr("transform",`translate(${-u/2}, ${u/2})`);return p&&e.look!=="handDrawn"&&v.selectChildren("path").attr("style",p),n&&e.look!=="handDrawn"&&v.selectChildren("path").attr("style",n),e.width=o,e.height=u,Nt(e,v),s.attr("transform",`translate(${-a.width/2-(a.x-(a.left??0))}, ${-u/2+(e.padding??0)/2+(a.y-(a.top??0))})`),e.intersect=function(x){return ee.info("Triangle intersect",e,d,x),kt.polygon(e,d,x)},i}function GV(t,e,{dir:r,config:{state:n,themeVariables:i}}){const{nodeStyles:a}=Rt(e);e.label="";const s=t.insert("g").attr("class",qt(e)).attr("id",e.domId??e.id),{cssStyles:o}=e;let u=Math.max(70,e?.width??0),h=Math.max(10,e?.height??0);r==="LR"&&(u=Math.max(10,e?.width??0),h=Math.max(70,e?.height??0));const d=-1*u/2,p=-1*h/2,f=Ct.svg(s),g=At(e,{stroke:i.lineColor,fill:i.lineColor});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const m=f.rectangle(d,p,u,h,g),y=s.insert((()=>m),":first-child");o&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",o),a&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",a),Nt(e,y);const v=n?.padding??0;return e.width&&e.height&&(e.width+=v/2||0,e.height+=v/2||0),e.intersect=function(x){return kt.rect(e,x)},s}async function UV(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a}=await Wt(t,e,qt(e)),s=Math.max(80,a.width+2*(e.padding??0),e?.width??0),o=Math.max(50,a.height+2*(e.padding??0),e?.height??0),u=o/2,{cssStyles:h}=e,d=Ct.svg(i),p=At(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const f=[{x:-s/2,y:-o/2},{x:s/2-u,y:-o/2},...q1(-s/2+u,0,u,50,90,270),{x:s/2-u,y:o/2},{x:-s/2,y:o/2}],g=lr(f),m=d.path(g,p),y=i.insert((()=>m),":first-child");return y.attr("class","basic label-container"),h&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",h),n&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",n),Nt(e,y),e.intersect=function(v){return ee.info("Pill intersect",e,{radius:u,point:v}),kt.polygon(e,f,v)},i}l(PV,"cylinder"),l(BV,"dividedRectangle"),l($V,"doublecircle"),l(FV,"filledCircle"),l(zV,"flippedTriangle"),l(GV,"forkJoin"),l(UV,"halfRoundedRectangle");var Cfe=l(((t,e,r,n,i)=>[`M${t+i},${e}`,`L${t+r-i},${e}`,`L${t+r},${e-n/2}`,`L${t+r-i},${e-n}`,`L${t+i},${e-n}`,`L${t},${e-n/2}`,"Z"].join(" ")),"createHexagonPathD");async function qV(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a}=await Wt(t,e,qt(e)),s=a.height+e.padding,o=s/4,u=a.width+2*o+e.padding,h=[{x:o,y:0},{x:u-o,y:0},{x:u,y:-s/2},{x:u-o,y:-s},{x:o,y:-s},{x:0,y:-s/2}];let d;const{cssStyles:p}=e;if(e.look==="handDrawn"){const f=Ct.svg(i),g=At(e,{}),m=Cfe(0,0,u,s,o),y=f.path(m,g);d=i.insert((()=>y),":first-child").attr("transform",`translate(${-u/2}, ${s/2})`),p&&d.attr("style",p)}else d=il(i,u,s,h);return n&&d.attr("style",n),e.width=u,e.height=s,Nt(e,d),e.intersect=function(f){return kt.polygon(e,h,f)},i}async function jV(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.label="",e.labelStyle=r;const{shapeSvg:i}=await Wt(t,e,qt(e)),a=Math.max(30,e?.width??0),s=Math.max(30,e?.height??0),{cssStyles:o}=e,u=Ct.svg(i),h=At(e,{});e.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const d=[{x:0,y:0},{x:a,y:0},{x:0,y:s},{x:a,y:s}],p=lr(d),f=u.path(p,h),g=i.insert((()=>f),":first-child");return g.attr("class","basic label-container"),o&&e.look!=="handDrawn"&&g.selectChildren("path").attr("style",o),n&&e.look!=="handDrawn"&&g.selectChildren("path").attr("style",n),g.attr("transform",`translate(${-a/2}, ${-s/2})`),Nt(e,g),e.intersect=function(m){return ee.info("Pill intersect",e,{points:d}),kt.polygon(e,d,m)},i}async function WV(t,e,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:i}=Rt(e);e.labelStyle=i;const a=e.assetHeight??48,s=e.assetWidth??48,o=Math.max(a,s),u=n?.wrappingWidth;e.width=Math.max(o,u??0);const{shapeSvg:h,bbox:d,label:p}=await Wt(t,e,"icon-shape default"),f=e.pos==="t",g=o,m=o,{nodeBorder:y}=r,{stylesMap:v}=hm(e),x=-m/2,b=-g/2,w=e.label?8:0,T=Ct.svg(h),k=At(e,{stroke:"none",fill:"none"});e.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const C=T.rectangle(x,b,m,g,k),E=Math.max(m,d.width),_=g+d.height+w,S=T.rectangle(-E/2,-_/2,E,_,{...k,fill:"transparent",stroke:"none"}),N=h.insert((()=>C),":first-child"),O=h.insert((()=>S));if(e.icon){const B=h.append("g");B.html(`<g>${await Wu(e.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const L=B.node().getBBox(),I=L.width,A=L.height,M=L.x,D=L.y;B.attr("transform",`translate(${-I/2-M},${f?d.height/2+w/2-A/2-D:-d.height/2-w/2-A/2-D})`),B.attr("style",`color: ${v.get("stroke")??y};`)}return p.attr("transform",`translate(${-d.width/2-(d.x-(d.left??0))},${f?-_/2:_/2-d.height})`),N.attr("transform",`translate(0,${f?d.height/2+w/2:-d.height/2-w/2})`),Nt(e,O),e.intersect=function(B){if(ee.info("iconSquare intersect",e,B),!e.label)return kt.rect(e,B);const L=e.x??0,I=e.y??0,A=e.height??0;let M=[];return M=f?[{x:L-d.width/2,y:I-A/2},{x:L+d.width/2,y:I-A/2},{x:L+d.width/2,y:I-A/2+d.height+w},{x:L+m/2,y:I-A/2+d.height+w},{x:L+m/2,y:I+A/2},{x:L-m/2,y:I+A/2},{x:L-m/2,y:I-A/2+d.height+w},{x:L-d.width/2,y:I-A/2+d.height+w}]:[{x:L-m/2,y:I-A/2},{x:L+m/2,y:I-A/2},{x:L+m/2,y:I-A/2+g},{x:L+d.width/2,y:I-A/2+g},{x:L+d.width/2/2,y:I+A/2},{x:L-d.width/2,y:I+A/2},{x:L-d.width/2,y:I-A/2+g},{x:L-m/2,y:I-A/2+g}],kt.polygon(e,M,B)},h}async function YV(t,e,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:i}=Rt(e);e.labelStyle=i;const a=e.assetHeight??48,s=e.assetWidth??48,o=Math.max(a,s),u=n?.wrappingWidth;e.width=Math.max(o,u??0);const{shapeSvg:h,bbox:d,label:p}=await Wt(t,e,"icon-shape default"),f=e.label?8:0,g=e.pos==="t",{nodeBorder:m,mainBkg:y}=r,{stylesMap:v}=hm(e),x=Ct.svg(h),b=At(e,{});e.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const w=v.get("fill");b.stroke=w??y;const T=h.append("g");e.icon&&T.html(`<g>${await Wu(e.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const k=T.node().getBBox(),C=k.width,E=k.height,_=k.x,S=k.y,N=Math.max(C,E)*Math.SQRT2+40,O=x.circle(0,0,N,b),B=Math.max(N,d.width),L=N+d.height+f,I=x.rectangle(-B/2,-L/2,B,L,{...b,fill:"transparent",stroke:"none"}),A=h.insert((()=>O),":first-child"),M=h.insert((()=>I));return T.attr("transform",`translate(${-C/2-_},${g?d.height/2+f/2-E/2-S:-d.height/2-f/2-E/2-S})`),T.attr("style",`color: ${v.get("stroke")??m};`),p.attr("transform",`translate(${-d.width/2-(d.x-(d.left??0))},${g?-L/2:L/2-d.height})`),A.attr("transform",`translate(0,${g?d.height/2+f/2:-d.height/2-f/2})`),Nt(e,M),e.intersect=function(D){return ee.info("iconSquare intersect",e,D),kt.rect(e,D)},h}async function VV(t,e,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:i}=Rt(e);e.labelStyle=i;const a=e.assetHeight??48,s=e.assetWidth??48,o=Math.max(a,s),u=n?.wrappingWidth;e.width=Math.max(o,u??0);const{shapeSvg:h,bbox:d,halfPadding:p,label:f}=await Wt(t,e,"icon-shape default"),g=e.pos==="t",m=o+2*p,y=o+2*p,{nodeBorder:v,mainBkg:x}=r,{stylesMap:b}=hm(e),w=-y/2,T=-m/2,k=e.label?8:0,C=Ct.svg(h),E=At(e,{});e.look!=="handDrawn"&&(E.roughness=0,E.fillStyle="solid");const _=b.get("fill");E.stroke=_??x;const S=C.path(nl(w,T,y,m,5),E),N=Math.max(y,d.width),O=m+d.height+k,B=C.rectangle(-N/2,-O/2,N,O,{...E,fill:"transparent",stroke:"none"}),L=h.insert((()=>S),":first-child").attr("class","icon-shape2"),I=h.insert((()=>B));if(e.icon){const A=h.append("g");A.html(`<g>${await Wu(e.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const M=A.node().getBBox(),D=M.width,R=M.height,P=M.x,$=M.y;A.attr("transform",`translate(${-D/2-P},${g?d.height/2+k/2-R/2-$:-d.height/2-k/2-R/2-$})`),A.attr("style",`color: ${b.get("stroke")??v};`)}return f.attr("transform",`translate(${-d.width/2-(d.x-(d.left??0))},${g?-O/2:O/2-d.height})`),L.attr("transform",`translate(0,${g?d.height/2+k/2:-d.height/2-k/2})`),Nt(e,I),e.intersect=function(A){if(ee.info("iconSquare intersect",e,A),!e.label)return kt.rect(e,A);const M=e.x??0,D=e.y??0,R=e.height??0;let P=[];return P=g?[{x:M-d.width/2,y:D-R/2},{x:M+d.width/2,y:D-R/2},{x:M+d.width/2,y:D-R/2+d.height+k},{x:M+y/2,y:D-R/2+d.height+k},{x:M+y/2,y:D+R/2},{x:M-y/2,y:D+R/2},{x:M-y/2,y:D-R/2+d.height+k},{x:M-d.width/2,y:D-R/2+d.height+k}]:[{x:M-y/2,y:D-R/2},{x:M+y/2,y:D-R/2},{x:M+y/2,y:D-R/2+m},{x:M+d.width/2,y:D-R/2+m},{x:M+d.width/2/2,y:D+R/2},{x:M-d.width/2,y:D+R/2},{x:M-d.width/2,y:D-R/2+m},{x:M-y/2,y:D-R/2+m}],kt.polygon(e,P,A)},h}async function HV(t,e,{config:{themeVariables:r,flowchart:n}}){const{labelStyles:i}=Rt(e);e.labelStyle=i;const a=e.assetHeight??48,s=e.assetWidth??48,o=Math.max(a,s),u=n?.wrappingWidth;e.width=Math.max(o,u??0);const{shapeSvg:h,bbox:d,halfPadding:p,label:f}=await Wt(t,e,"icon-shape default"),g=e.pos==="t",m=o+2*p,y=o+2*p,{nodeBorder:v,mainBkg:x}=r,{stylesMap:b}=hm(e),w=-y/2,T=-m/2,k=e.label?8:0,C=Ct.svg(h),E=At(e,{});e.look!=="handDrawn"&&(E.roughness=0,E.fillStyle="solid");const _=b.get("fill");E.stroke=_??x;const S=C.path(nl(w,T,y,m,.1),E),N=Math.max(y,d.width),O=m+d.height+k,B=C.rectangle(-N/2,-O/2,N,O,{...E,fill:"transparent",stroke:"none"}),L=h.insert((()=>S),":first-child"),I=h.insert((()=>B));if(e.icon){const A=h.append("g");A.html(`<g>${await Wu(e.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const M=A.node().getBBox(),D=M.width,R=M.height,P=M.x,$=M.y;A.attr("transform",`translate(${-D/2-P},${g?d.height/2+k/2-R/2-$:-d.height/2-k/2-R/2-$})`),A.attr("style",`color: ${b.get("stroke")??v};`)}return f.attr("transform",`translate(${-d.width/2-(d.x-(d.left??0))},${g?-O/2:O/2-d.height})`),L.attr("transform",`translate(0,${g?d.height/2+k/2:-d.height/2-k/2})`),Nt(e,I),e.intersect=function(A){if(ee.info("iconSquare intersect",e,A),!e.label)return kt.rect(e,A);const M=e.x??0,D=e.y??0,R=e.height??0;let P=[];return P=g?[{x:M-d.width/2,y:D-R/2},{x:M+d.width/2,y:D-R/2},{x:M+d.width/2,y:D-R/2+d.height+k},{x:M+y/2,y:D-R/2+d.height+k},{x:M+y/2,y:D+R/2},{x:M-y/2,y:D+R/2},{x:M-y/2,y:D-R/2+d.height+k},{x:M-d.width/2,y:D-R/2+d.height+k}]:[{x:M-y/2,y:D-R/2},{x:M+y/2,y:D-R/2},{x:M+y/2,y:D-R/2+m},{x:M+d.width/2,y:D-R/2+m},{x:M+d.width/2/2,y:D+R/2},{x:M-d.width/2,y:D+R/2},{x:M-d.width/2,y:D-R/2+m},{x:M-y/2,y:D-R/2+m}],kt.polygon(e,P,A)},h}async function XV(t,e,{config:{flowchart:r}}){const n=new Image;n.src=e?.img??"",await n.decode();const i=Number(n.naturalWidth.toString().replace("px","")),a=Number(n.naturalHeight.toString().replace("px",""));e.imageAspectRatio=i/a;const{labelStyles:s}=Rt(e);e.labelStyle=s;const o=r?.wrappingWidth;e.defaultWidth=r?.wrappingWidth;const u=Math.max(e.label?o??0:0,e?.assetWidth??i),h=e.constraint==="on"&&e?.assetHeight?e.assetHeight*e.imageAspectRatio:u,d=e.constraint==="on"?h/e.imageAspectRatio:e?.assetHeight??a;e.width=Math.max(h,o??0);const{shapeSvg:p,bbox:f,label:g}=await Wt(t,e,"image-shape default"),m=e.pos==="t",y=-h/2,v=-d/2,x=e.label?8:0,b=Ct.svg(p),w=At(e,{});e.look!=="handDrawn"&&(w.roughness=0,w.fillStyle="solid");const T=b.rectangle(y,v,h,d,w),k=Math.max(h,f.width),C=d+f.height+x,E=b.rectangle(-k/2,-C/2,k,C,{...w,fill:"none",stroke:"none"}),_=p.insert((()=>T),":first-child"),S=p.insert((()=>E));if(e.img){const N=p.append("image");N.attr("href",e.img),N.attr("width",h),N.attr("height",d),N.attr("preserveAspectRatio","none"),N.attr("transform",`translate(${-h/2},${m?C/2-d:-C/2})`)}return g.attr("transform",`translate(${-f.width/2-(f.x-(f.left??0))},${m?-d/2-f.height/2-x/2:d/2-f.height/2+x/2})`),_.attr("transform",`translate(0,${m?f.height/2+x/2:-f.height/2-x/2})`),Nt(e,S),e.intersect=function(N){if(ee.info("iconSquare intersect",e,N),!e.label)return kt.rect(e,N);const O=e.x??0,B=e.y??0,L=e.height??0;let I=[];return I=m?[{x:O-f.width/2,y:B-L/2},{x:O+f.width/2,y:B-L/2},{x:O+f.width/2,y:B-L/2+f.height+x},{x:O+h/2,y:B-L/2+f.height+x},{x:O+h/2,y:B+L/2},{x:O-h/2,y:B+L/2},{x:O-h/2,y:B-L/2+f.height+x},{x:O-f.width/2,y:B-L/2+f.height+x}]:[{x:O-h/2,y:B-L/2},{x:O+h/2,y:B-L/2},{x:O+h/2,y:B-L/2+d},{x:O+f.width/2,y:B-L/2+d},{x:O+f.width/2/2,y:B+L/2},{x:O-f.width/2,y:B+L/2},{x:O-f.width/2,y:B-L/2+d},{x:O-h/2,y:B-L/2+d}],kt.polygon(e,I,N)},p}async function KV(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a}=await Wt(t,e,qt(e)),s=Math.max(a.width+2*(e.padding??0),e?.width??0),o=Math.max(a.height+2*(e.padding??0),e?.height??0),u=[{x:0,y:0},{x:s,y:0},{x:s+3*o/6,y:-o},{x:-3*o/6,y:-o}];let h;const{cssStyles:d}=e;if(e.look==="handDrawn"){const p=Ct.svg(i),f=At(e,{}),g=lr(u),m=p.path(g,f);h=i.insert((()=>m),":first-child").attr("transform",`translate(${-s/2}, ${o/2})`),d&&h.attr("style",d)}else h=il(i,s,o,u);return n&&h.attr("style",n),e.width=s,e.height=o,Nt(e,h),e.intersect=function(p){return kt.polygon(e,u,p)},i}async function Sv(t,e,r){const{labelStyles:n,nodeStyles:i}=Rt(e);e.labelStyle=n;const{shapeSvg:a,bbox:s}=await Wt(t,e,qt(e)),o=Math.max(s.width+2*r.labelPaddingX,e?.width||0),u=Math.max(s.height+2*r.labelPaddingY,e?.height||0),h=-o/2,d=-u/2;let p,{rx:f,ry:g}=e;const{cssStyles:m}=e;if(r?.rx&&r.ry&&(f=r.rx,g=r.ry),e.look==="handDrawn"){const y=Ct.svg(a),v=At(e,{}),x=f||g?y.path(nl(h,d,o,u,f||0),v):y.rectangle(h,d,o,u,v);p=a.insert((()=>x),":first-child"),p.attr("class","basic label-container").attr("style",$i(m))}else p=a.insert("rect",":first-child"),p.attr("class","basic label-container").attr("style",i).attr("rx",$i(f)).attr("ry",$i(g)).attr("x",h).attr("y",d).attr("width",o).attr("height",u);return Nt(e,p),e.intersect=function(y){return kt.rect(e,y)},a}async function ZV(t,e){const{shapeSvg:r,bbox:n,label:i}=await Wt(t,e,"label"),a=r.insert("rect",":first-child");return a.attr("width",.1).attr("height",.1),r.attr("class","label edgeLabel"),i.attr("transform",`translate(${-n.width/2-(n.x-(n.left??0))}, ${-n.height/2-(n.y-(n.top??0))})`),Nt(e,a),e.intersect=function(s){return kt.rect(e,s)},r}async function QV(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a}=await Wt(t,e,qt(e)),s=Math.max(a.width+(e.padding??0),e?.width??0),o=Math.max(a.height+(e.padding??0),e?.height??0),u=[{x:0,y:0},{x:s+3*o/6,y:0},{x:s,y:-o},{x:-3*o/6,y:-o}];let h;const{cssStyles:d}=e;if(e.look==="handDrawn"){const p=Ct.svg(i),f=At(e,{}),g=lr(u),m=p.path(g,f);h=i.insert((()=>m),":first-child").attr("transform",`translate(${-s/2}, ${o/2})`),d&&h.attr("style",d)}else h=il(i,s,o,u);return n&&h.attr("style",n),e.width=s,e.height=o,Nt(e,h),e.intersect=function(p){return kt.polygon(e,u,p)},i}async function JV(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a}=await Wt(t,e,qt(e)),s=Math.max(a.width+(e.padding??0),e?.width??0),o=Math.max(a.height+(e.padding??0),e?.height??0),u=[{x:-3*o/6,y:0},{x:s,y:0},{x:s+3*o/6,y:-o},{x:0,y:-o}];let h;const{cssStyles:d}=e;if(e.look==="handDrawn"){const p=Ct.svg(i),f=At(e,{}),g=lr(u),m=p.path(g,f);h=i.insert((()=>m),":first-child").attr("transform",`translate(${-s/2}, ${o/2})`),d&&h.attr("style",d)}else h=il(i,s,o,u);return n&&h.attr("style",n),e.width=s,e.height=o,Nt(e,h),e.intersect=function(p){return kt.polygon(e,u,p)},i}function eH(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.label="",e.labelStyle=r;const i=t.insert("g").attr("class",qt(e)).attr("id",e.domId??e.id),{cssStyles:a}=e,s=Math.max(35,e?.width??0),o=Math.max(35,e?.height??0),u=[{x:s,y:0},{x:0,y:o+3.5},{x:s-14,y:o+3.5},{x:0,y:2*o},{x:s,y:o-3.5},{x:14,y:o-3.5}],h=Ct.svg(i),d=At(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const p=lr(u),f=h.path(p,d),g=i.insert((()=>f),":first-child");return a&&e.look!=="handDrawn"&&g.selectAll("path").attr("style",a),n&&e.look!=="handDrawn"&&g.selectAll("path").attr("style",n),g.attr("transform",`translate(-${s/2},${-o})`),Nt(e,g),e.intersect=function(m){return ee.info("lightningBolt intersect",e,m),kt.polygon(e,u,m)},i}l(qV,"hexagon"),l(jV,"hourglass"),l(WV,"icon"),l(YV,"iconCircle"),l(VV,"iconRounded"),l(HV,"iconSquare"),l(XV,"imageSquare"),l(KV,"inv_trapezoid"),l(Sv,"drawRect"),l(ZV,"labelRect"),l(QV,"lean_left"),l(JV,"lean_right"),l(eH,"lightningBolt");var Sfe=l(((t,e,r,n,i,a,s)=>[`M${t},${e+a}`,`a${i},${a} 0,0,0 ${r},0`,`a${i},${a} 0,0,0 ${-r},0`,`l0,${n}`,`a${i},${a} 0,0,0 ${r},0`,"l0,"+-n,`M${t},${e+a+s}`,`a${i},${a} 0,0,0 ${r},0`].join(" ")),"createCylinderPathD"),Afe=l(((t,e,r,n,i,a,s)=>[`M${t},${e+a}`,`M${t+r},${e+a}`,`a${i},${a} 0,0,0 ${-r},0`,`l0,${n}`,`a${i},${a} 0,0,0 ${r},0`,"l0,"+-n,`M${t},${e+a+s}`,`a${i},${a} 0,0,0 ${r},0`].join(" ")),"createOuterCylinderPathD"),Lfe=l(((t,e,r,n,i,a)=>[`M${t-r/2},${-n/2}`,`a${i},${a} 0,0,0 ${r},0`].join(" ")),"createInnerCylinderPathD");async function tH(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Wt(t,e,qt(e)),o=Math.max(a.width+(e.padding??0),e.width??0),u=o/2,h=u/(2.5+o/50),d=Math.max(a.height+h+(e.padding??0),e.height??0),p=.1*d;let f;const{cssStyles:g}=e;if(e.look==="handDrawn"){const m=Ct.svg(i),y=Afe(0,0,o,d,u,h,p),v=Lfe(0,h,o,d,u,h),x=At(e,{}),b=m.path(y,x),w=m.path(v,x);i.insert((()=>w),":first-child").attr("class","line"),f=i.insert((()=>b),":first-child"),f.attr("class","basic label-container"),g&&f.attr("style",g)}else{const m=Sfe(0,0,o,d,u,h,p);f=i.insert("path",":first-child").attr("d",m).attr("class","basic label-container").attr("style",$i(g)).attr("style",n)}return f.attr("label-offset-y",h),f.attr("transform",`translate(${-o/2}, ${-(d/2+h)})`),Nt(e,f),s.attr("transform",`translate(${-a.width/2-(a.x-(a.left??0))}, ${-a.height/2+h-(a.y-(a.top??0))})`),e.intersect=function(m){const y=kt.rect(e,m),v=y.x-(e.x??0);if(u!=0&&(Math.abs(v)<(e.width??0)/2||Math.abs(v)==(e.width??0)/2&&Math.abs(y.y-(e.y??0))>(e.height??0)/2-h)){let x=h*h*(1-v*v/(u*u));x>0&&(x=Math.sqrt(x)),x=h-x,m.y-(e.y??0)>0&&(x=-x),y.y+=x}return y},i}async function rH(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Wt(t,e,qt(e)),o=Math.max(a.width+2*(e.padding??0),e?.width??0),u=Math.max(a.height+2*(e.padding??0),e?.height??0),h=u/4,d=u+h,{cssStyles:p}=e,f=Ct.svg(i),g=At(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const m=[{x:-o/2-o/2*.1,y:-d/2},{x:-o/2-o/2*.1,y:d/2},...Zl(-o/2-o/2*.1,d/2,o/2+o/2*.1,d/2,h,.8),{x:o/2+o/2*.1,y:-d/2},{x:-o/2-o/2*.1,y:-d/2},{x:-o/2,y:-d/2},{x:-o/2,y:d/2*1.1},{x:-o/2,y:-d/2}],y=f.polygon(m.map((x=>[x.x,x.y])),g),v=i.insert((()=>y),":first-child");return v.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",p),n&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",n),v.attr("transform",`translate(0,${-h/2})`),s.attr("transform",`translate(${-o/2+(e.padding??0)+o/2*.1/2-(a.x-(a.left??0))},${-u/2+(e.padding??0)-h/2-(a.y-(a.top??0))})`),Nt(e,v),e.intersect=function(x){return kt.polygon(e,m,x)},i}async function nH(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Wt(t,e,qt(e)),o=Math.max(a.width+2*(e.padding??0),e?.width??0),u=Math.max(a.height+2*(e.padding??0),e?.height??0),h=-o/2,d=-u/2,{cssStyles:p}=e,f=Ct.svg(i),g=At(e,{}),m=[{x:h-5,y:d+5},{x:h-5,y:d+u+5},{x:h+o-5,y:d+u+5},{x:h+o-5,y:d+u},{x:h+o,y:d+u},{x:h+o,y:d+u-5},{x:h+o+5,y:d+u-5},{x:h+o+5,y:d-5},{x:h+5,y:d-5},{x:h+5,y:d},{x:h,y:d},{x:h,y:d+5}],y=[{x:h,y:d+5},{x:h+o-5,y:d+5},{x:h+o-5,y:d+u},{x:h+o,y:d+u},{x:h+o,y:d},{x:h,y:d}];e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const v=lr(m),x=f.path(v,g),b=lr(y),w=f.path(b,{...g,fill:"none"}),T=i.insert((()=>w),":first-child");return T.insert((()=>x),":first-child"),T.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",p),n&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",n),s.attr("transform",`translate(${-a.width/2-5-(a.x-(a.left??0))}, ${-a.height/2+5-(a.y-(a.top??0))})`),Nt(e,T),e.intersect=function(k){return kt.polygon(e,m,k)},i}async function iH(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Wt(t,e,qt(e)),o=Math.max(a.width+2*(e.padding??0),e?.width??0),u=Math.max(a.height+2*(e.padding??0),e?.height??0),h=u/4,d=u+h,p=-o/2,f=-d/2,{cssStyles:g}=e,m=Zl(p-5,f+d+5,p+o-5,f+d+5,h,.8),y=m?.[m.length-1],v=[{x:p-5,y:f+5},{x:p-5,y:f+d+5},...m,{x:p+o-5,y:y.y-5},{x:p+o,y:y.y-5},{x:p+o,y:y.y-10},{x:p+o+5,y:y.y-10},{x:p+o+5,y:f-5},{x:p+5,y:f-5},{x:p+5,y:f},{x:p,y:f},{x:p,y:f+5}],x=[{x:p,y:f+5},{x:p+o-5,y:f+5},{x:p+o-5,y:y.y-5},{x:p+o,y:y.y-5},{x:p+o,y:f},{x:p,y:f}],b=Ct.svg(i),w=At(e,{});e.look!=="handDrawn"&&(w.roughness=0,w.fillStyle="solid");const T=lr(v),k=b.path(T,w),C=lr(x),E=b.path(C,w),_=i.insert((()=>k),":first-child");return _.insert((()=>E)),_.attr("class","basic label-container"),g&&e.look!=="handDrawn"&&_.selectAll("path").attr("style",g),n&&e.look!=="handDrawn"&&_.selectAll("path").attr("style",n),_.attr("transform",`translate(0,${-h/2})`),s.attr("transform",`translate(${-a.width/2-5-(a.x-(a.left??0))}, ${-a.height/2+5-h/2-(a.y-(a.top??0))})`),Nt(e,_),e.intersect=function(S){return kt.polygon(e,v,S)},i}async function aH(t,e,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:i}=Rt(e);e.labelStyle=n,e.useHtmlLabels||Sr().flowchart?.htmlLabels!==!1||(e.centerLabel=!0);const{shapeSvg:a,bbox:s}=await Wt(t,e,qt(e)),o=Math.max(s.width+2*(e.padding??0),e?.width??0),u=Math.max(s.height+2*(e.padding??0),e?.height??0),h=-o/2,d=-u/2,{cssStyles:p}=e,f=Ct.svg(a),g=At(e,{fill:r.noteBkgColor,stroke:r.noteBorderColor});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const m=f.rectangle(h,d,o,u,g),y=a.insert((()=>m),":first-child");return y.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",p),i&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",i),Nt(e,y),e.intersect=function(v){return kt.rect(e,v)},a}l(tH,"linedCylinder"),l(rH,"linedWaveEdgedRect"),l(nH,"multiRect"),l(iH,"multiWaveEdgedRectangle"),l(aH,"note");var Nfe=l(((t,e,r)=>[`M${t+r/2},${e}`,`L${t+r},${e-r/2}`,`L${t+r/2},${e-r}`,`L${t},${e-r/2}`,"Z"].join(" ")),"createDecisionBoxPathD");async function sH(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a}=await Wt(t,e,qt(e)),s=a.width+e.padding+(a.height+e.padding),o=[{x:s/2,y:0},{x:s,y:-s/2},{x:s/2,y:-s},{x:0,y:-s/2}];let u;const{cssStyles:h}=e;if(e.look==="handDrawn"){const d=Ct.svg(i),p=At(e,{}),f=Nfe(0,0,s),g=d.path(f,p);u=i.insert((()=>g),":first-child").attr("transform",`translate(${-s/2}, ${s/2})`),h&&u.attr("style",h)}else u=il(i,s,s,o);return n&&u.attr("style",n),Nt(e,u),e.intersect=function(d){return ee.debug(`APA12 Intersect called SPLIT
point:`,d,`
node:
`,e,`
res:`,kt.polygon(e,o,d)),kt.polygon(e,o,d)},i}async function oH(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Wt(t,e,qt(e)),o=-Math.max(a.width+(e.padding??0),e?.width??0)/2,u=-Math.max(a.height+(e.padding??0),e?.height??0)/2,h=u/2,d=[{x:o+h,y:u},{x:o,y:0},{x:o+h,y:-u},{x:-o,y:-u},{x:-o,y:u}],{cssStyles:p}=e,f=Ct.svg(i),g=At(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const m=lr(d),y=f.path(m,g),v=i.insert((()=>y),":first-child");return v.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",p),n&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",n),v.attr("transform",`translate(${-h/2},0)`),s.attr("transform",`translate(${-h/2-a.width/2-(a.x-(a.left??0))}, ${-a.height/2-(a.y-(a.top??0))})`),Nt(e,v),e.intersect=function(x){return kt.polygon(e,d,x)},i}async function lH(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);let i;e.labelStyle=r,i=e.cssClasses?"node "+e.cssClasses:"node default";const a=t.insert("g").attr("class",i).attr("id",e.domId||e.id),s=a.insert("g"),o=a.insert("g").attr("class","label").attr("style",n),u=e.description,h=e.label,d=o.node().appendChild(await au(h,e.labelStyle,!0,!0));let p={width:0,height:0};if(Cr(ke()?.flowchart?.htmlLabels)){const _=d.children[0],S=Ze(d);p=_.getBoundingClientRect(),S.attr("width",p.width),S.attr("height",p.height)}ee.info("Text 2",u);const f=u||[],g=d.getBBox(),m=o.node().appendChild(await au(f.join?f.join("<br/>"):f,e.labelStyle,!0,!0)),y=m.children[0],v=Ze(m);p=y.getBoundingClientRect(),v.attr("width",p.width),v.attr("height",p.height);const x=(e.padding||0)/2;Ze(m).attr("transform","translate( "+(p.width>g.width?0:(g.width-p.width)/2)+", "+(g.height+x+5)+")"),Ze(d).attr("transform","translate( "+(p.width<g.width?0:-(g.width-p.width)/2)+", 0)"),p=o.node().getBBox(),o.attr("transform","translate("+-p.width/2+", "+(-p.height/2-x+3)+")");const b=p.width+(e.padding||0),w=p.height+(e.padding||0),T=-p.width/2-x,k=-p.height/2-x;let C,E;if(e.look==="handDrawn"){const _=Ct.svg(a),S=At(e,{}),N=_.path(nl(T,k,b,w,e.rx||0),S),O=_.line(-p.width/2-x,-p.height/2-x+g.height+x,p.width/2+x,-p.height/2-x+g.height+x,S);E=a.insert((()=>(ee.debug("Rough node insert CXC",N),O)),":first-child"),C=a.insert((()=>(ee.debug("Rough node insert CXC",N),N)),":first-child")}else C=s.insert("rect",":first-child"),E=s.insert("line"),C.attr("class","outer title-state").attr("style",n).attr("x",-p.width/2-x).attr("y",-p.height/2-x).attr("width",p.width+(e.padding||0)).attr("height",p.height+(e.padding||0)),E.attr("class","divider").attr("x1",-p.width/2-x).attr("x2",p.width/2+x).attr("y1",-p.height/2-x+g.height+x).attr("y2",-p.height/2-x+g.height+x);return Nt(e,C),e.intersect=function(_){return kt.rect(e,_)},a}async function cH(t,e){return Sv(t,e,{rx:5,ry:5,labelPaddingX:1*(e?.padding||0),labelPaddingY:1*(e?.padding||0)})}async function uH(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Wt(t,e,qt(e)),o=e?.padding??0,u=Math.max(a.width+2*(e.padding??0),e?.width??0),h=Math.max(a.height+2*(e.padding??0),e?.height??0),d=-a.width/2-o,p=-a.height/2-o,{cssStyles:f}=e,g=Ct.svg(i),m=At(e,{});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=[{x:d,y:p},{x:d+u+8,y:p},{x:d+u+8,y:p+h},{x:d-8,y:p+h},{x:d-8,y:p},{x:d,y:p},{x:d,y:p+h}],v=g.polygon(y.map((b=>[b.x,b.y])),m),x=i.insert((()=>v),":first-child");return x.attr("class","basic label-container").attr("style",$i(f)),n&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",n),f&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",n),s.attr("transform",`translate(${-u/2+4+(e.padding??0)-(a.x-(a.left??0))},${-h/2+(e.padding??0)-(a.y-(a.top??0))})`),Nt(e,x),e.intersect=function(b){return kt.rect(e,b)},i}async function hH(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Wt(t,e,qt(e)),o=Math.max(a.width+2*(e.padding??0),e?.width??0),u=Math.max(a.height+2*(e.padding??0),e?.height??0),h=-o/2,d=-u/2,{cssStyles:p}=e,f=Ct.svg(i),g=At(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const m=[{x:h,y:d},{x:h,y:d+u},{x:h+o,y:d+u},{x:h+o,y:d-u/2}],y=lr(m),v=f.path(y,g),x=i.insert((()=>v),":first-child");return x.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",p),n&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",n),x.attr("transform",`translate(0, ${u/4})`),s.attr("transform",`translate(${-o/2+(e.padding??0)-(a.x-(a.left??0))}, ${-u/4+(e.padding??0)-(a.y-(a.top??0))})`),Nt(e,x),e.intersect=function(b){return kt.polygon(e,m,b)},i}async function dH(t,e){return Sv(t,e,{rx:0,ry:0,labelPaddingX:2*(e?.padding||0),labelPaddingY:1*(e?.padding||0)})}async function pH(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a}=await Wt(t,e,qt(e)),s=a.height+e.padding,o=a.width+s/4+e.padding;let u;const{cssStyles:h}=e;if(e.look==="handDrawn"){const d=Ct.svg(i),p=At(e,{}),f=nl(-o/2,-s/2,o,s,s/2),g=d.path(f,p);u=i.insert((()=>g),":first-child"),u.attr("class","basic label-container").attr("style",$i(h))}else u=i.insert("rect",":first-child"),u.attr("class","basic label-container").attr("style",n).attr("rx",s/2).attr("ry",s/2).attr("x",-o/2).attr("y",-s/2).attr("width",o).attr("height",s);return Nt(e,u),e.intersect=function(d){return kt.rect(e,d)},i}async function fH(t,e){return Sv(t,e,{rx:5,ry:5})}function gH(t,e,{config:{themeVariables:r}}){const{labelStyles:n,nodeStyles:i}=Rt(e);e.labelStyle=n;const{cssStyles:a}=e,{lineColor:s,stateBorder:o,nodeBorder:u}=r,h=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),d=Ct.svg(h),p=At(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const f=d.circle(0,0,14,{...p,stroke:s,strokeWidth:2}),g=o??u,m=d.circle(0,0,5,{...p,fill:g,stroke:g,strokeWidth:2,fillStyle:"solid"}),y=h.insert((()=>f),":first-child");return y.insert((()=>m)),a&&y.selectAll("path").attr("style",a),i&&y.selectAll("path").attr("style",i),Nt(e,y),e.intersect=function(v){return kt.circle(e,7,v)},h}function mH(t,e,{config:{themeVariables:r}}){const{lineColor:n}=r,i=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let a;if(e.look==="handDrawn"){const s=Ct.svg(i).circle(0,0,14,dfe(n));a=i.insert((()=>s)),a.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else a=i.insert("circle",":first-child"),a.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return Nt(e,a),e.intersect=function(s){return kt.circle(e,7,s)},i}async function yH(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a}=await Wt(t,e,qt(e)),s=(e?.padding||0)/2,o=a.width+e.padding,u=a.height+e.padding,h=-a.width/2-s,d=-a.height/2-s,p=[{x:0,y:0},{x:o,y:0},{x:o,y:-u},{x:0,y:-u},{x:0,y:0},{x:-8,y:0},{x:o+8,y:0},{x:o+8,y:-u},{x:-8,y:-u},{x:-8,y:0}];if(e.look==="handDrawn"){const f=Ct.svg(i),g=At(e,{}),m=f.rectangle(h-8,d,o+16,u,g),y=f.line(h,d,h,d+u,g),v=f.line(h+o,d,h+o,d+u,g);i.insert((()=>y),":first-child"),i.insert((()=>v),":first-child");const x=i.insert((()=>m),":first-child"),{cssStyles:b}=e;x.attr("class","basic label-container").attr("style",$i(b)),Nt(e,x)}else{const f=il(i,o,u,p);n&&f.attr("style",n),Nt(e,f)}return e.intersect=function(f){return kt.polygon(e,p,f)},i}async function vH(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a}=await Wt(t,e,qt(e)),s=Math.max(a.width+2*(e.padding??0),e?.width??0),o=Math.max(a.height+2*(e.padding??0),e?.height??0),u=-s/2,h=-o/2,d=.2*o,p=.2*o,{cssStyles:f}=e,g=Ct.svg(i),m=At(e,{}),y=[{x:u-d/2,y:h},{x:u+s+d/2,y:h},{x:u+s+d/2,y:h+o},{x:u-d/2,y:h+o}],v=[{x:u+s-d/2,y:h+o},{x:u+s+d/2,y:h+o},{x:u+s+d/2,y:h+o-p}];e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const x=lr(y),b=g.path(x,m),w=lr(v),T=g.path(w,{...m,fillStyle:"solid"}),k=i.insert((()=>T),":first-child");return k.insert((()=>b),":first-child"),k.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&k.selectAll("path").attr("style",f),n&&e.look!=="handDrawn"&&k.selectAll("path").attr("style",n),Nt(e,k),e.intersect=function(C){return kt.polygon(e,y,C)},i}async function xH(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Wt(t,e,qt(e)),o=Math.max(a.width+2*(e.padding??0),e?.width??0),u=Math.max(a.height+2*(e.padding??0),e?.height??0),h=u/4,d=.2*o,p=.2*u,f=u+h,{cssStyles:g}=e,m=Ct.svg(i),y=At(e,{});e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const v=[{x:-o/2-o/2*.1,y:f/2},...Zl(-o/2-o/2*.1,f/2,o/2+o/2*.1,f/2,h,.8),{x:o/2+o/2*.1,y:-f/2},{x:-o/2-o/2*.1,y:-f/2}],x=-o/2+o/2*.1,b=-f/2-.4*p,w=[{x:x+o-d,y:1.4*(b+u)},{x:x+o,y:b+u-p},{x:x+o,y:.9*(b+u)},...Zl(x+o,1.3*(b+u),x+o-d,1.5*(b+u),.03*-u,.5)],T=lr(v),k=m.path(T,y),C=lr(w),E=m.path(C,{...y,fillStyle:"solid"}),_=i.insert((()=>E),":first-child");return _.insert((()=>k),":first-child"),_.attr("class","basic label-container"),g&&e.look!=="handDrawn"&&_.selectAll("path").attr("style",g),n&&e.look!=="handDrawn"&&_.selectAll("path").attr("style",n),_.attr("transform",`translate(0,${-h/2})`),s.attr("transform",`translate(${-o/2+(e.padding??0)-(a.x-(a.left??0))},${-u/2+(e.padding??0)-h/2-(a.y-(a.top??0))})`),Nt(e,_),e.intersect=function(S){return kt.polygon(e,v,S)},i}async function bH(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a}=await Wt(t,e,qt(e)),s=Math.max(a.width+e.padding,e?.width||0),o=Math.max(a.height+e.padding,e?.height||0),u=-s/2,h=-o/2,d=i.insert("rect",":first-child");return d.attr("class","text").attr("style",n).attr("rx",0).attr("ry",0).attr("x",u).attr("y",h).attr("width",s).attr("height",o),Nt(e,d),e.intersect=function(p){return kt.rect(e,p)},i}l(sH,"question"),l(oH,"rect_left_inv_arrow"),l(lH,"rectWithTitle"),l(cH,"roundedRect"),l(uH,"shadedProcess"),l(hH,"slopedRect"),l(dH,"squareRect"),l(pH,"stadium"),l(fH,"state"),l(gH,"stateEnd"),l(mH,"stateStart"),l(yH,"subroutine"),l(vH,"taggedRect"),l(xH,"taggedWaveEdgedRectangle"),l(bH,"text");var Ife=l(((t,e,r,n,i,a)=>`M${t},${e}
    a${i},${a} 0,0,1 0,${-n}
    l${r},0
    a${i},${a} 0,0,1 0,${n}
    M${r},${-n}
    a${i},${a} 0,0,0 0,${n}
    l${-r},0`),"createCylinderPathD"),Rfe=l(((t,e,r,n,i,a)=>[`M${t},${e}`,`M${t+r},${e}`,`a${i},${a} 0,0,0 0,${-n}`,`l${-r},0`,`a${i},${a} 0,0,0 0,${n}`,`l${r},0`].join(" ")),"createOuterCylinderPathD"),Mfe=l(((t,e,r,n,i,a)=>[`M${t+r/2},${-n/2}`,`a${i},${a} 0,0,0 0,${n}`].join(" ")),"createInnerCylinderPathD");async function wH(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a,label:s,halfPadding:o}=await Wt(t,e,qt(e)),u=e.look==="neo"?2*o:o,h=a.height+u,d=h/2,p=d/(2.5+h/50),f=a.width+p+u,{cssStyles:g}=e;let m;if(e.look==="handDrawn"){const y=Ct.svg(i),v=Rfe(0,0,f,h,p,d),x=Mfe(0,0,f,h,p,d),b=y.path(v,At(e,{})),w=y.path(x,At(e,{fill:"none"}));m=i.insert((()=>w),":first-child"),m=i.insert((()=>b),":first-child"),m.attr("class","basic label-container"),g&&m.attr("style",g)}else{const y=Ife(0,0,f,h,p,d);m=i.insert("path",":first-child").attr("d",y).attr("class","basic label-container").attr("style",$i(g)).attr("style",n),m.attr("class","basic label-container"),g&&m.selectAll("path").attr("style",g),n&&m.selectAll("path").attr("style",n)}return m.attr("label-offset-x",p),m.attr("transform",`translate(${-f/2}, ${h/2} )`),s.attr("transform",`translate(${-a.width/2-p-(a.x-(a.left??0))}, ${-a.height/2-(a.y-(a.top??0))})`),Nt(e,m),e.intersect=function(y){const v=kt.rect(e,y),x=v.y-(e.y??0);if(d!=0&&(Math.abs(x)<(e.height??0)/2||Math.abs(x)==(e.height??0)/2&&Math.abs(v.x-(e.x??0))>(e.width??0)/2-p)){let b=p*p*(1-x*x/(d*d));b!=0&&(b=Math.sqrt(Math.abs(b))),b=p-b,y.x-(e.x??0)>0&&(b=-b),v.x+=b}return v},i}async function kH(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a}=await Wt(t,e,qt(e)),s=a.width+e.padding,o=a.height+e.padding,u=[{x:-3*o/6,y:0},{x:s+3*o/6,y:0},{x:s,y:-o},{x:0,y:-o}];let h;const{cssStyles:d}=e;if(e.look==="handDrawn"){const p=Ct.svg(i),f=At(e,{}),g=lr(u),m=p.path(g,f);h=i.insert((()=>m),":first-child").attr("transform",`translate(${-s/2}, ${o/2})`),d&&h.attr("style",d)}else h=il(i,s,o,u);return n&&h.attr("style",n),e.width=s,e.height=o,Nt(e,h),e.intersect=function(p){return kt.polygon(e,u,p)},i}async function TH(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a}=await Wt(t,e,qt(e)),s=Math.max(60,a.width+2*(e.padding??0),e?.width??0),o=Math.max(20,a.height+2*(e.padding??0),e?.height??0),{cssStyles:u}=e,h=Ct.svg(i),d=At(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const p=[{x:-s/2*.8,y:-o/2},{x:s/2*.8,y:-o/2},{x:s/2,y:-o/2*.6},{x:s/2,y:o/2},{x:-s/2,y:o/2},{x:-s/2,y:-o/2*.6}],f=lr(p),g=h.path(f,d),m=i.insert((()=>g),":first-child");return m.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&m.selectChildren("path").attr("style",u),n&&e.look!=="handDrawn"&&m.selectChildren("path").attr("style",n),Nt(e,m),e.intersect=function(y){return kt.polygon(e,p,y)},i}async function EH(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Wt(t,e,qt(e)),o=Cr(ke().flowchart?.htmlLabels),u=a.width+(e.padding??0),h=u+a.height,d=u+a.height,p=[{x:0,y:0},{x:d,y:0},{x:d/2,y:-h}],{cssStyles:f}=e,g=Ct.svg(i),m=At(e,{});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=lr(p),v=g.path(y,m),x=i.insert((()=>v),":first-child").attr("transform",`translate(${-h/2}, ${h/2})`);return f&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",f),n&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",n),e.width=u,e.height=h,Nt(e,x),s.attr("transform",`translate(${-a.width/2-(a.x-(a.left??0))}, ${h/2-(a.height+(e.padding??0)/(o?2:1)-(a.y-(a.top??0)))})`),e.intersect=function(b){return ee.info("Triangle intersect",e,p,b),kt.polygon(e,p,b)},i}async function _H(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Wt(t,e,qt(e)),o=Math.max(a.width+2*(e.padding??0),e?.width??0),u=Math.max(a.height+2*(e.padding??0),e?.height??0),h=u/8,d=u+h,{cssStyles:p}=e,f=70-o,g=f>0?f/2:0,m=Ct.svg(i),y=At(e,{});e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const v=[{x:-o/2-g,y:d/2},...Zl(-o/2-g,d/2,o/2+g,d/2,h,.8),{x:o/2+g,y:-d/2},{x:-o/2-g,y:-d/2}],x=lr(v),b=m.path(x,y),w=i.insert((()=>b),":first-child");return w.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",p),n&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",n),w.attr("transform",`translate(0,${-h/2})`),s.attr("transform",`translate(${-o/2+(e.padding??0)-(a.x-(a.left??0))},${-u/2+(e.padding??0)-h-(a.y-(a.top??0))})`),Nt(e,w),e.intersect=function(T){return kt.polygon(e,v,T)},i}async function CH(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a}=await Wt(t,e,qt(e)),s=Math.max(a.width+2*(e.padding??0),e?.width??0),o=Math.max(a.height+2*(e.padding??0),e?.height??0),u=s/o;let h=s,d=o;h>d*u?d=h/u:h=d*u,h=Math.max(h,100),d=Math.max(d,50);const p=Math.min(.2*d,d/4),f=d+2*p,{cssStyles:g}=e,m=Ct.svg(i),y=At(e,{});e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const v=[{x:-h/2,y:f/2},...Zl(-h/2,f/2,h/2,f/2,p,1),{x:h/2,y:-f/2},...Zl(h/2,-f/2,-h/2,-f/2,p,-1)],x=lr(v),b=m.path(x,y),w=i.insert((()=>b),":first-child");return w.attr("class","basic label-container"),g&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",g),n&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",n),Nt(e,w),e.intersect=function(T){return kt.polygon(e,v,T)},i}async function SH(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const{shapeSvg:i,bbox:a,label:s}=await Wt(t,e,qt(e)),o=Math.max(a.width+2*(e.padding??0),e?.width??0),u=Math.max(a.height+2*(e.padding??0),e?.height??0),h=-o/2,d=-u/2,{cssStyles:p}=e,f=Ct.svg(i),g=At(e,{}),m=[{x:h-5,y:d-5},{x:h-5,y:d+u},{x:h+o,y:d+u},{x:h+o,y:d-5}],y=`M${h-5},${d-5} L${h+o},${d-5} L${h+o},${d+u} L${h-5},${d+u} L${h-5},${d-5}
                M${h-5},${d} L${h+o},${d}
                M${h},${d-5} L${h},${d+u}`;e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const v=f.path(y,g),x=i.insert((()=>v),":first-child");return x.attr("transform","translate(2.5, 2.5)"),x.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",p),n&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",n),s.attr("transform",`translate(${-a.width/2+2.5-(a.x-(a.left??0))}, ${-a.height/2+2.5-(a.y-(a.top??0))})`),Nt(e,x),e.intersect=function(b){return kt.polygon(e,m,b)},i}async function Q1(t,e){const r=e;if(r.alias&&(e.label=r.alias),e.look==="handDrawn"){const{themeVariables:P}=Sr(),{background:$}=P,z={...e,id:e.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${$}`]};await Q1(t,z)}const n=Sr();e.useHtmlLabels=n.htmlLabels;let i=n.er?.diagramPadding??10,a=n.er?.entityPadding??6;const{cssStyles:s}=e,{labelStyles:o}=Rt(e);if(r.attributes.length===0&&e.label){const P={rx:0,ry:0,labelPaddingX:i,labelPaddingY:1.5*i};Bi(e.label,n)+2*P.labelPaddingX<n.er.minEntityWidth&&(e.width=n.er.minEntityWidth);const $=await Sv(t,e,P);if(!Cr(n.htmlLabels)){const z=$.select("text"),q=z.node()?.getBBox();z.attr("transform",`translate(${-q.width/2}, 0)`)}return $}n.htmlLabels||(i*=1.25,a*=1.25);let u=qt(e);u||(u="node default");const h=t.insert("g").attr("class",u).attr("id",e.domId||e.id),d=await zh(h,e.label??"",n,0,0,["name"],o);d.height+=a;let p=0;const f=[];let g=0,m=0,y=0,v=0,x=!0,b=!0;for(const P of r.attributes){const $=await zh(h,P.type,n,0,p,["attribute-type"],o);g=Math.max(g,$.width+i);const z=await zh(h,P.name,n,0,p,["attribute-name"],o);m=Math.max(m,z.width+i);const q=await zh(h,P.keys.join(),n,0,p,["attribute-keys"],o);y=Math.max(y,q.width+i);const W=await zh(h,P.comment,n,0,p,["attribute-comment"],o);v=Math.max(v,W.width+i),p+=Math.max($.height,z.height,q.height,W.height)+a,f.push(p)}f.pop();let w=4;y<=i&&(x=!1,y=0,w--),v<=i&&(b=!1,v=0,w--);const T=h.node().getBBox();if(d.width+2*i-(g+m+y+v)>0){const P=d.width+2*i-(g+m+y+v);g+=P/w,m+=P/w,y>0&&(y+=P/w),v>0&&(v+=P/w)}const k=g+m+y+v,C=Ct.svg(h),E=At(e,{});e.look!=="handDrawn"&&(E.roughness=0,E.fillStyle="solid");const _=Math.max(T.width+2*i,e?.width||0,k),S=Math.max(T.height+(f[0]||p)+a,e?.height||0),N=-_/2,O=-S/2;h.selectAll("g:not(:first-child)").each(((P,$,z)=>{const q=Ze(z[$]),W=q.attr("transform");let Q=0,te=0;if(W){const oe=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(W);oe&&(Q=parseFloat(oe[1]),te=parseFloat(oe[2]),q.attr("class").includes("attribute-name")?Q+=g:q.attr("class").includes("attribute-keys")?Q+=g+m:q.attr("class").includes("attribute-comment")&&(Q+=g+m+y))}q.attr("transform",`translate(${N+i/2+Q}, ${te+O+d.height+a/2})`)})),h.select(".name").attr("transform","translate("+-d.width/2+", "+(O+a/2)+")");const B=C.rectangle(N,O,_,S,E),L=h.insert((()=>B),":first-child").attr("style",s.join("")),{themeVariables:I}=Sr(),{rowEven:A,rowOdd:M,nodeBorder:D}=I;f.push(0);for(const[P,$]of f.entries()){if(P===0&&f.length>1)continue;const z=P%2==0&&$!==0,q=C.rectangle(N,d.height+O+$,_,d.height,{...E,fill:z?A:M,stroke:D});h.insert((()=>q),"g.label").attr("style",s.join("")).attr("class","row-rect-"+(P%2==0?"even":"odd"))}let R=C.line(N,d.height+O,_+N,d.height+O,E);h.insert((()=>R)).attr("class","divider"),R=C.line(g+N,d.height+O,g+N,S+O,E),h.insert((()=>R)).attr("class","divider"),x&&(R=C.line(g+m+N,d.height+O,g+m+N,S+O,E),h.insert((()=>R)).attr("class","divider")),b&&(R=C.line(g+m+y+N,d.height+O,g+m+y+N,S+O,E),h.insert((()=>R)).attr("class","divider"));for(const P of f)R=C.line(N,d.height+O+P,_+N,d.height+O+P,E),h.insert((()=>R)).attr("class","divider");return Nt(e,L),e.intersect=function(P){return kt.rect(e,P)},h}async function zh(t,e,r,n=0,i=0,a=[],s=""){const o=t.insert("g").attr("class",`label ${a.join(" ")}`).attr("transform",`translate(${n}, ${i})`).attr("style",s);e!==_l(e)&&(e=(e=_l(e)).replaceAll("<","&lt;").replaceAll(">","&gt;"));const u=o.node().appendChild(await pa(o,e,{width:Bi(e,r)+100,style:s,useHtmlLabels:r.htmlLabels},r));if(e.includes("&lt;")||e.includes("&gt;")){let d=u.children[0];for(d.textContent=d.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");d.childNodes[0];)d=d.childNodes[0],d.textContent=d.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let h=u.getBBox();if(Cr(r.htmlLabels)){const d=u.children[0];d.style.textAlign="start";const p=Ze(u);h=d.getBoundingClientRect(),p.attr("width",h.width),p.attr("height",h.height)}return h}async function AH(t,e,r,n,i=r.class.padding??12){const a=n?0:3,s=t.insert("g").attr("class",qt(e)).attr("id",e.domId||e.id);let o=null,u=null,h=null,d=null,p=0,f=0,g=0;if(o=s.insert("g").attr("class","annotation-group text"),e.annotations.length>0){const b=e.annotations[0];await Jm(o,{text:`${b}`},0),p=o.node().getBBox().height}u=s.insert("g").attr("class","label-group text"),await Jm(u,e,0,["font-weight: bolder"]);const m=u.node().getBBox();f=m.height,h=s.insert("g").attr("class","members-group text");let y=0;for(const b of e.members)y+=await Jm(h,b,y,[b.parseClassifier()])+a;g=h.node().getBBox().height,g<=0&&(g=i/2),d=s.insert("g").attr("class","methods-group text");let v=0;for(const b of e.methods)v+=await Jm(d,b,v,[b.parseClassifier()])+a;let x=s.node().getBBox();if(o!==null){const b=o.node().getBBox();o.attr("transform",`translate(${-b.width/2})`)}return u.attr("transform",`translate(${-m.width/2}, ${p})`),x=s.node().getBBox(),h.attr("transform",`translate(0, ${p+f+2*i})`),x=s.node().getBBox(),d.attr("transform",`translate(0, ${p+f+(g?g+4*i:2*i)})`),x=s.node().getBBox(),{shapeSvg:s,bbox:x}}async function Jm(t,e,r,n=[]){const i=t.insert("g").attr("class","label").attr("style",n.join("; ")),a=Sr();let s="useHtmlLabels"in e?e.useHtmlLabels:Cr(a.htmlLabels)??!0,o="";o="text"in e?e.text:e.label,!s&&o.startsWith("\\")&&(o=o.substring(1)),Ei(o)&&(s=!0);const u=await pa(i,_8(io(o)),{width:Bi(o,a)+50,classes:"markdown-node-label",useHtmlLabels:s},a);let h,d=1;if(s){const p=u.children[0],f=Ze(u);d=p.innerHTML.split("<br>").length,p.innerHTML.includes("</math>")&&(d+=p.innerHTML.split("<mrow>").length-1);const g=p.getElementsByTagName("img");if(g){const m=o.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...g].map((y=>new Promise((v=>{function x(){if(y.style.display="flex",y.style.flexDirection="column",m){const b=a.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,w=5,T=parseInt(b,10)*w+"px";y.style.minWidth=T,y.style.maxWidth=T}else y.style.width="100%";v(y)}l(x,"setupImage"),setTimeout((()=>{y.complete&&x()})),y.addEventListener("error",x),y.addEventListener("load",x)})))))}h=p.getBoundingClientRect(),f.attr("width",h.width),f.attr("height",h.height)}else{n.includes("font-weight: bolder")&&Ze(u).selectAll("tspan").attr("font-weight",""),d=u.children.length;const p=u.children[0];(u.textContent===""||u.textContent.includes("&gt"))&&(p.textContent=o[0]+o.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),o[1]===" "&&(p.textContent=p.textContent[0]+" "+p.textContent.substring(1))),p.textContent==="undefined"&&(p.textContent=""),h=u.getBBox()}return i.attr("transform","translate(0,"+(-h.height/(2*d)+r)+")"),h.height}async function LH(t,e){const r=ke(),n=r.class.padding??12,i=n,a=e.useHtmlLabels??Cr(r.htmlLabels)??!0,s=e;s.annotations=s.annotations??[],s.members=s.members??[],s.methods=s.methods??[];const{shapeSvg:o,bbox:u}=await AH(t,e,r,a,i),{labelStyles:h,nodeStyles:d}=Rt(e);e.labelStyle=h,e.cssStyles=s.styles||"";const p=s.styles?.join(";")||d||"";e.cssStyles||(e.cssStyles=p.replaceAll("!important","").split(";"));const f=s.members.length===0&&s.methods.length===0&&!r.class?.hideEmptyMembersBox,g=Ct.svg(o),m=At(e,{});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=u.width;let v=u.height;s.members.length===0&&s.methods.length===0?v+=i:s.members.length>0&&s.methods.length===0&&(v+=2*i);const x=-y/2,b=-v/2,w=g.rectangle(x-n,b-n-(f?n:s.members.length===0&&s.methods.length===0?-n/2:0),y+2*n,v+2*n+(f?2*n:s.members.length===0&&s.methods.length===0?-n:0),m),T=o.insert((()=>w),":first-child");T.attr("class","basic label-container");const k=T.node().getBBox();o.selectAll(".text").each(((S,N,O)=>{const B=Ze(O[N]),L=B.attr("transform");let I=0;if(L){const D=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(L);D&&(I=parseFloat(D[2]))}let A=I+b+n-(f?n:s.members.length===0&&s.methods.length===0?-n/2:0);a||(A-=4);let M=x;(B.attr("class").includes("label-group")||B.attr("class").includes("annotation-group"))&&(M=-B.node()?.getBBox().width/2||0,o.selectAll("text").each((function(D,R,P){window.getComputedStyle(P[R]).textAnchor==="middle"&&(M=0)}))),B.attr("transform",`translate(${M}, ${A})`)}));const C=o.select(".annotation-group").node().getBBox().height-(f?n/2:0)||0,E=o.select(".label-group").node().getBBox().height-(f?n/2:0)||0,_=o.select(".members-group").node().getBBox().height-(f?n/2:0)||0;if(s.members.length>0||s.methods.length>0||f){const S=g.line(k.x,C+E+b+n,k.x+k.width,C+E+b+n,m);o.insert((()=>S)).attr("class","divider").attr("style",p)}if(f||s.members.length>0||s.methods.length>0){const S=g.line(k.x,C+E+_+b+2*i+n,k.x+k.width,C+E+_+b+n+2*i,m);o.insert((()=>S)).attr("class","divider").attr("style",p)}if(s.look!=="handDrawn"&&o.selectAll("path").attr("style",p),T.select(":nth-child(2)").attr("style",p),o.selectAll(".divider").select("path").attr("style",p),e.labelStyle?o.selectAll("span").attr("style",e.labelStyle):o.selectAll("span").attr("style",p),!a){const S=RegExp(/color\s*:\s*([^;]*)/),N=S.exec(p);if(N){const O=N[0].replace("color","fill");o.selectAll("tspan").attr("style",O)}else if(h){const O=S.exec(h);if(O){const B=O[0].replace("color","fill");o.selectAll("tspan").attr("style",B)}}}return Nt(e,T),e.intersect=function(S){return kt.rect(e,S)},o}async function NH(t,e){const{labelStyles:r,nodeStyles:n}=Rt(e);e.labelStyle=r;const i=e,a=e,s="verifyMethod"in e,o=qt(e),u=t.insert("g").attr("class",o).attr("id",e.domId??e.id);let h;h=s?await $s(u,`&lt;&lt;${i.type}&gt;&gt;`,0,e.labelStyle):await $s(u,"&lt;&lt;Element&gt;&gt;",0,e.labelStyle);let d=h;const p=await $s(u,i.name,d,e.labelStyle+"; font-weight: bold;");d+=p+20,s?(d+=await $s(u,i.requirementId?`Id: ${i.requirementId}`:"",d,e.labelStyle),d+=await $s(u,i.text?`Text: ${i.text}`:"",d,e.labelStyle),d+=await $s(u,i.risk?`Risk: ${i.risk}`:"",d,e.labelStyle),await $s(u,i.verifyMethod?`Verification: ${i.verifyMethod}`:"",d,e.labelStyle)):(d+=await $s(u,a.type?`Type: ${a.type}`:"",d,e.labelStyle),await $s(u,a.docRef?`Doc Ref: ${a.docRef}`:"",d,e.labelStyle));const f=(u.node()?.getBBox().width??200)+20,g=(u.node()?.getBBox().height??200)+20,m=-f/2,y=-g/2,v=Ct.svg(u),x=At(e,{});e.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const b=v.rectangle(m,y,f,g,x),w=u.insert((()=>b),":first-child");if(w.attr("class","basic label-container").attr("style",n),u.selectAll(".label").each(((T,k,C)=>{const E=Ze(C[k]),_=E.attr("transform");let S=0,N=0;if(_){const L=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(_);L&&(S=parseFloat(L[1]),N=parseFloat(L[2]))}const O=N-g/2;let B=m+10;k!==0&&k!==1||(B=S),E.attr("transform",`translate(${B}, ${O+20})`)})),d>h+p+20){const T=v.line(m,y+h+p+20,m+f,y+h+p+20,x);u.insert((()=>T)).attr("style",n)}return Nt(e,w),e.intersect=function(T){return kt.rect(e,T)},u}async function $s(t,e,r,n=""){if(e==="")return 0;const i=t.insert("g").attr("class","label").attr("style",n),a=ke(),s=a.htmlLabels??!0,o=await pa(i,_8(io(e)),{width:Bi(e,a)+50,classes:"markdown-node-label",useHtmlLabels:s,style:n},a);let u;if(s){const h=o.children[0],d=Ze(o);u=h.getBoundingClientRect(),d.attr("width",u.width),d.attr("height",u.height)}else{const h=o.children[0];for(const d of h.children)d.textContent=d.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),n&&d.setAttribute("style",n);u=o.getBBox(),u.height+=6}return i.attr("transform",`translate(${-u.width/2},${-u.height/2+r})`),u.height}l(wH,"tiltedCylinder"),l(kH,"trapezoid"),l(TH,"trapezoidalPentagon"),l(EH,"triangle"),l(_H,"waveEdgedRectangle"),l(CH,"waveRectangle"),l(SH,"windowPane"),l(Q1,"erBox"),l(zh,"addText"),l(AH,"textHelper"),l(Jm,"addText"),l(LH,"classBox"),l(NH,"requirementBox"),l($s,"addText");var Dfe=l((t=>{switch(t){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}}),"colorFromPriority");async function IH(t,e,{config:r}){const{labelStyles:n,nodeStyles:i}=Rt(e);e.labelStyle=n||"";const a=e.width;e.width=(e.width??200)-10;const{shapeSvg:s,bbox:o,label:u}=await Wt(t,e,qt(e)),h=e.padding||10;let d,p="";"ticket"in e&&e.ticket&&r?.kanban?.ticketBaseUrl&&(p=r?.kanban?.ticketBaseUrl.replace("#TICKET#",e.ticket),d=s.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",p).attr("target","_blank"));const f={useHtmlLabels:e.useHtmlLabels,labelStyle:e.labelStyle||"",width:e.width,img:e.img,padding:e.padding||8,centerLabel:!1};let g,m;({label:g,bbox:m}=d?await jk(d,"ticket"in e&&e.ticket||"",f):await jk(s,"ticket"in e&&e.ticket||"",f));const{label:y,bbox:v}=await jk(s,"assigned"in e&&e.assigned||"",f);e.width=a;const x=e?.width||0,b=Math.max(m.height,v.height)/2,w=Math.max(o.height+20,e?.height||0)+b,T=-x/2,k=-w/2;let C;u.attr("transform","translate("+(h-x/2)+", "+(-b-o.height/2)+")"),g.attr("transform","translate("+(h-x/2)+", "+(-b+o.height/2)+")"),y.attr("transform","translate("+(h+x/2-v.width-20)+", "+(-b+o.height/2)+")");const{rx:E,ry:_}=e,{cssStyles:S}=e;if(e.look==="handDrawn"){const N=Ct.svg(s),O=At(e,{}),B=E||_?N.path(nl(T,k,x,w,E||0),O):N.rectangle(T,k,x,w,O);C=s.insert((()=>B),":first-child"),C.attr("class","basic label-container").attr("style",S||null)}else{C=s.insert("rect",":first-child"),C.attr("class","basic label-container __APA__").attr("style",i).attr("rx",E??5).attr("ry",_??5).attr("x",T).attr("y",k).attr("width",x).attr("height",w);const N="priority"in e&&e.priority;if(N){const O=s.append("line"),B=T+2,L=k+Math.floor((E??0)/2),I=k+w-Math.floor((E??0)/2);O.attr("x1",B).attr("y1",L).attr("x2",B).attr("y2",I).attr("stroke-width","4").attr("stroke",Dfe(N))}}return Nt(e,C),e.height=w,e.intersect=function(N){return kt.rect(e,N)},s}l(IH,"kanbanItem");var Ofe=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:dH},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:cH},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:pH},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:yH},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:PV},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:LV},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:sH},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:qV},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:JV},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:QV},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:kH},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:KV},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:$V},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:bH},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:SV},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:uH},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:mH},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:gH},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:GV},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:jV},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:RV},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:MV},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:DV},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:eH},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:_H},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:UV},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:wH},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:tH},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:OV},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:BV},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:EH},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:SH},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:FV},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:TH},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:zV},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:hH},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:iH},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:nH},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:CV},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:IV},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:xH},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:vH},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:CH},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:oH},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:rH}],Pfe=l((()=>{const t={state:fH,choice:AV,note:aH,rectWithTitle:lH,labelRect:ZV,iconSquare:HV,iconCircle:YV,icon:WV,iconRounded:VV,imageSquare:XV,anchor:_V,kanbanItem:IH,classBox:LH,erBox:Q1,requirementBox:NH},e=[...Object.entries(t),...Ofe.flatMap((r=>[r.shortName,..."aliases"in r?r.aliases:[],..."internalAliases"in r?r.internalAliases:[]].map((n=>[n,r.handler]))))];return Object.fromEntries(e)}),"generateShapeMap"),RH=Pfe();function MH(t){return t in RH}l(MH,"isValidShape");var V6=new Map;async function H6(t,e,r){let n,i;e.shape==="rect"&&(e.rx&&e.ry?e.shape="roundedRect":e.shape="squareRect");const a=e.shape?RH[e.shape]:void 0;if(!a)throw new Error(`No such shape: ${e.shape}. Please check your syntax.`);if(e.link){let s;r.config.securityLevel==="sandbox"?s="_top":e.linkTarget&&(s=e.linkTarget||"_blank"),n=t.insert("svg:a").attr("xlink:href",e.link).attr("target",s??null),i=await a(n,e,r)}else i=await a(t,e,r),n=i;return e.tooltip&&i.attr("title",e.tooltip),V6.set(e.id,n),e.haveCallback&&n.attr("class",n.attr("class")+" clickable"),n}l(H6,"insertNode");var Bfe=l(((t,e)=>{V6.set(e.id,t)}),"setNodeElem"),$fe=l((()=>{V6.clear()}),"clear"),x_=l((t=>{const e=V6.get(t.id);ee.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const r=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+r-t.width/2)+", "+(t.y-t.height/2-8)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),r}),"positionNode"),Ia={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:4};function ey(t,e){if(t===void 0||e===void 0)return{angle:0,deltaX:0,deltaY:0};t=Vr(t),e=Vr(e);const[r,n]=[t.x,t.y],[i,a]=[e.x,e.y],s=i-r,o=a-n;return{angle:Math.atan(o/s),deltaX:s,deltaY:o}}l(ey,"calculateDeltaAndAngle");var Vr=l((t=>Array.isArray(t)?{x:t[0],y:t[1]}:t),"pointTransformer"),DH=l((t=>({x:l((function(e,r,n){let i=0;const a=Vr(n[0]).x<Vr(n[n.length-1]).x?"left":"right";if(r===0&&Object.hasOwn(Ia,t.arrowTypeStart)){const{angle:f,deltaX:g}=ey(n[0],n[1]);i=Ia[t.arrowTypeStart]*Math.cos(f)*(g>=0?1:-1)}else if(r===n.length-1&&Object.hasOwn(Ia,t.arrowTypeEnd)){const{angle:f,deltaX:g}=ey(n[n.length-1],n[n.length-2]);i=Ia[t.arrowTypeEnd]*Math.cos(f)*(g>=0?1:-1)}const s=Math.abs(Vr(e).x-Vr(n[n.length-1]).x),o=Math.abs(Vr(e).y-Vr(n[n.length-1]).y),u=Math.abs(Vr(e).x-Vr(n[0]).x),h=Math.abs(Vr(e).y-Vr(n[0]).y),d=Ia[t.arrowTypeStart],p=Ia[t.arrowTypeEnd];if(s<p&&s>0&&o<p){let f=p+1-s;f*=a==="right"?-1:1,i-=f}if(u<d&&u>0&&h<d){let f=d+1-u;f*=a==="right"?-1:1,i+=f}return Vr(e).x+i}),"x"),y:l((function(e,r,n){let i=0;const a=Vr(n[0]).y<Vr(n[n.length-1]).y?"down":"up";if(r===0&&Object.hasOwn(Ia,t.arrowTypeStart)){const{angle:f,deltaY:g}=ey(n[0],n[1]);i=Ia[t.arrowTypeStart]*Math.abs(Math.sin(f))*(g>=0?1:-1)}else if(r===n.length-1&&Object.hasOwn(Ia,t.arrowTypeEnd)){const{angle:f,deltaY:g}=ey(n[n.length-1],n[n.length-2]);i=Ia[t.arrowTypeEnd]*Math.abs(Math.sin(f))*(g>=0?1:-1)}const s=Math.abs(Vr(e).y-Vr(n[n.length-1]).y),o=Math.abs(Vr(e).x-Vr(n[n.length-1]).x),u=Math.abs(Vr(e).y-Vr(n[0]).y),h=Math.abs(Vr(e).x-Vr(n[0]).x),d=Ia[t.arrowTypeStart],p=Ia[t.arrowTypeEnd];if(s<p&&s>0&&o<p){let f=p+1-s;f*=a==="up"?-1:1,i-=f}if(u<d&&u>0&&h<d){let f=d+1-u;f*=a==="up"?-1:1,i+=f}return Vr(e).y+i}),"y")})),"getLineFunctionsWithOffset"),Ffe=l(((t,e,r,n,i,a)=>{e.arrowTypeStart&&OR(t,"start",e.arrowTypeStart,r,n,i,a),e.arrowTypeEnd&&OR(t,"end",e.arrowTypeEnd,r,n,i,a)}),"addEdgeMarkers"),zfe={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},OR=l(((t,e,r,n,i,a,s)=>{const o=zfe[r];if(!o)return void ee.warn(`Unknown arrow type: ${r}`);const u=`${i}_${a}-${o.type}${e==="start"?"Start":"End"}`;if(s&&s.trim()!==""){const h=`${u}_${s.replace(/[^\dA-Za-z]/g,"_")}`;if(!document.getElementById(h)){const d=document.getElementById(u);if(d){const p=d.cloneNode(!0);p.id=h,p.querySelectorAll("path, circle, line").forEach((f=>{f.setAttribute("stroke",s),o.fill&&f.setAttribute("fill",s)})),d.parentNode?.appendChild(p)}}t.attr(`marker-${e}`,`url(${n}#${h})`)}else t.attr(`marker-${e}`,`url(${n}#${u})`)}),"addEdgeMarker"),a5=new Map,oi=new Map,Gfe=l((()=>{a5.clear(),oi.clear()}),"clear"),Mm=l((t=>t?t.reduce(((e,r)=>e+";"+r),""):""),"getLabelStyles"),OH=l((async(t,e)=>{let r=Cr(ke().flowchart.htmlLabels);const n=await pa(t,e.label,{style:Mm(e.labelStyle),useHtmlLabels:r,addSvgBackground:!0,isNode:!1});ee.info("abc82",e,e.labelType);const i=t.insert("g").attr("class","edgeLabel"),a=i.insert("g").attr("class","label");a.node().appendChild(n);let s,o=n.getBBox();if(r){const u=n.children[0],h=Ze(n);o=u.getBoundingClientRect(),h.attr("width",o.width),h.attr("height",o.height)}if(a.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),a5.set(e.id,i),e.width=o.width,e.height=o.height,e.startLabelLeft){const u=await au(e.startLabelLeft,Mm(e.labelStyle)),h=t.insert("g").attr("class","edgeTerminals"),d=h.insert("g").attr("class","inner");s=d.node().appendChild(u);const p=u.getBBox();d.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),oi.get(e.id)||oi.set(e.id,{}),oi.get(e.id).startLeft=h,ty(s,e.startLabelLeft)}if(e.startLabelRight){const u=await au(e.startLabelRight,Mm(e.labelStyle)),h=t.insert("g").attr("class","edgeTerminals"),d=h.insert("g").attr("class","inner");s=h.node().appendChild(u),d.node().appendChild(u);const p=u.getBBox();d.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),oi.get(e.id)||oi.set(e.id,{}),oi.get(e.id).startRight=h,ty(s,e.startLabelRight)}if(e.endLabelLeft){const u=await au(e.endLabelLeft,Mm(e.labelStyle)),h=t.insert("g").attr("class","edgeTerminals"),d=h.insert("g").attr("class","inner");s=d.node().appendChild(u);const p=u.getBBox();d.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),h.node().appendChild(u),oi.get(e.id)||oi.set(e.id,{}),oi.get(e.id).endLeft=h,ty(s,e.endLabelLeft)}if(e.endLabelRight){const u=await au(e.endLabelRight,Mm(e.labelStyle)),h=t.insert("g").attr("class","edgeTerminals"),d=h.insert("g").attr("class","inner");s=d.node().appendChild(u);const p=u.getBBox();d.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),h.node().appendChild(u),oi.get(e.id)||oi.set(e.id,{}),oi.get(e.id).endRight=h,ty(s,e.endLabelRight)}return n}),"insertEdgeLabel");function ty(t,e){ke().flowchart.htmlLabels&&t&&(t.style.width=9*e.length+"px",t.style.height="12px")}l(ty,"setTerminalWidth");var PH=l(((t,e)=>{ee.debug("Moving label abc88 ",t.id,t.label,a5.get(t.id),e);let r=e.updatedPath?e.updatedPath:e.originalPath;const n=ke(),{subGraphTitleTotalMargin:i}=xv(n);if(t.label){const a=a5.get(t.id);let s=t.x,o=t.y;if(r){const u=Vt.calcLabelPosition(r);ee.debug("Moving label "+t.label+" from (",s,",",o,") to (",u.x,",",u.y,") abc88"),e.updatedPath&&(s=u.x,o=u.y)}a.attr("transform",`translate(${s}, ${o+i/2})`)}if(t.startLabelLeft){const a=oi.get(t.id).startLeft;let s=t.x,o=t.y;if(r){const u=Vt.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",r);s=u.x,o=u.y}a.attr("transform",`translate(${s}, ${o})`)}if(t.startLabelRight){const a=oi.get(t.id).startRight;let s=t.x,o=t.y;if(r){const u=Vt.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",r);s=u.x,o=u.y}a.attr("transform",`translate(${s}, ${o})`)}if(t.endLabelLeft){const a=oi.get(t.id).endLeft;let s=t.x,o=t.y;if(r){const u=Vt.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",r);s=u.x,o=u.y}a.attr("transform",`translate(${s}, ${o})`)}if(t.endLabelRight){const a=oi.get(t.id).endRight;let s=t.x,o=t.y;if(r){const u=Vt.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",r);s=u.x,o=u.y}a.attr("transform",`translate(${s}, ${o})`)}}),"positionEdgeLabel"),Ufe=l(((t,e)=>{const r=t.x,n=t.y,i=Math.abs(e.x-r),a=Math.abs(e.y-n),s=t.width/2,o=t.height/2;return i>=s||a>=o}),"outsideNode"),qfe=l(((t,e,r)=>{ee.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const n=t.x,i=t.y,a=Math.abs(n-r.x),s=t.width/2;let o=r.x<e.x?s-a:s+a;const u=t.height/2,h=Math.abs(e.y-r.y),d=Math.abs(e.x-r.x);if(Math.abs(i-e.y)*s>Math.abs(n-e.x)*u){let p=r.y<e.y?e.y-u-i:i-u-e.y;o=d*p/h;const f={x:r.x<e.x?r.x+o:r.x-d+o,y:r.y<e.y?r.y+h-p:r.y-h+p};return o===0&&(f.x=e.x,f.y=e.y),d===0&&(f.x=e.x),h===0&&(f.y=e.y),ee.debug(`abc89 top/bottom calc, Q ${h}, q ${p}, R ${d}, r ${o}`,f),f}{o=r.x<e.x?e.x-s-n:n-s-e.x;let p=h*o/d,f=r.x<e.x?r.x+d-o:r.x-d+o,g=r.y<e.y?r.y+p:r.y-p;return ee.debug(`sides calc abc89, Q ${h}, q ${p}, R ${d}, r ${o}`,{_x:f,_y:g}),o===0&&(f=e.x,g=e.y),d===0&&(f=e.x),h===0&&(g=e.y),{x:f,y:g}}}),"intersection"),PR=l(((t,e)=>{ee.warn("abc88 cutPathAtIntersect",t,e);let r=[],n=t[0],i=!1;return t.forEach((a=>{if(ee.info("abc88 checking point",a,e),Ufe(e,a)||i)ee.warn("abc88 outside",a,n),n=a,i||r.push(a);else{const s=qfe(e,n,a);ee.debug("abc88 inside",a,n,s),ee.debug("abc88 intersection",s,e);let o=!1;r.forEach((u=>{o=o||u.x===s.x&&u.y===s.y})),r.some((u=>u.x===s.x&&u.y===s.y))?ee.warn("abc88 no intersect",s,r):r.push(s),i=!0}})),ee.debug("returning points",r),r}),"cutPathAtIntersect");function BH(t){const e=[],r=[];for(let n=1;n<t.length-1;n++){const i=t[n-1],a=t[n],s=t[n+1];(i.x===a.x&&a.y===s.y&&Math.abs(a.x-s.x)>5&&Math.abs(a.y-i.y)>5||i.y===a.y&&a.x===s.x&&Math.abs(a.x-i.x)>5&&Math.abs(a.y-s.y)>5)&&(e.push(a),r.push(n))}return{cornerPoints:e,cornerPointPositions:r}}l(BH,"extractCornerPoints");var BR=l((function(t,e,r){const n=e.x-t.x,i=e.y-t.y,a=r/Math.sqrt(n*n+i*i);return{x:e.x-a*n,y:e.y-a*i}}),"findAdjacentPoint"),jfe=l((function(t){const{cornerPointPositions:e}=BH(t),r=[];for(let n=0;n<t.length;n++)if(e.includes(n)){const i=t[n-1],a=t[n+1],s=t[n],o=BR(i,s,5),u=BR(a,s,5),h=u.x-o.x,d=u.y-o.y;r.push(o);const p=2*Math.sqrt(2);let f={x:s.x,y:s.y};if(Math.abs(a.x-i.x)>10&&Math.abs(a.y-i.y)>=10){ee.debug("Corner point fixing",Math.abs(a.x-i.x),Math.abs(a.y-i.y));const g=5;f=s.x===o.x?{x:h<0?o.x-g+p:o.x+g-p,y:d<0?o.y-p:o.y+p}:{x:h<0?o.x-p:o.x+p,y:d<0?o.y-g+p:o.y+g-p}}else ee.debug("Corner point skipping fixing",Math.abs(a.x-i.x),Math.abs(a.y-i.y));r.push(f,u)}else r.push(t[n]);return r}),"fixCorners"),$H=l((function(t,e,r,n,i,a,s){const{handDrawnSeed:o}=ke();let u=e.points,h=!1;const d=i;var p=a;const f=[];for(const S in e.cssCompiledStyles)yV(S)||f.push(e.cssCompiledStyles[S]);p.intersect&&d.intersect&&(u=u.slice(1,e.points.length-1),u.unshift(d.intersect(u[0])),ee.debug("Last point APA12",e.start,"-->",e.end,u[u.length-1],p,p.intersect(u[u.length-1])),u.push(p.intersect(u[u.length-1]))),e.toCluster&&(ee.info("to cluster abc88",r.get(e.toCluster)),u=PR(e.points,r.get(e.toCluster).node),h=!0),e.fromCluster&&(ee.debug("from cluster abc88",r.get(e.fromCluster),JSON.stringify(u,null,2)),u=PR(u.reverse(),r.get(e.fromCluster).node).reverse(),h=!0);let g=u.filter((S=>!Number.isNaN(S.y)));g=jfe(g);let m=B0;switch(m=v2,e.curve){case"linear":m=v2;break;case"basis":default:m=B0;break;case"cardinal":m=oU;break;case"bumpX":m=n1;break;case"bumpY":m=i1;break;case"catmullRom":m=lU;break;case"monotoneX":m=a1;break;case"monotoneY":m=s1;break;case"natural":m=o1;break;case"step":m=l1;break;case"stepAfter":m=u1;break;case"stepBefore":m=c1}const{x:y,y:v}=DH(e),x=P0().x(y).y(v).curve(m);let b,w;switch(e.thickness){case"normal":default:b="edge-thickness-normal";break;case"thick":b="edge-thickness-thick";break;case"invisible":b="edge-thickness-invisible"}switch(e.pattern){case"solid":default:b+=" edge-pattern-solid";break;case"dotted":b+=" edge-pattern-dotted";break;case"dashed":b+=" edge-pattern-dashed"}let T=x(g);const k=Array.isArray(e.style)?e.style:[e.style];let C=k.find((S=>S?.startsWith("stroke:")));if(e.look==="handDrawn"){const S=Ct.svg(t);Object.assign([],g),b+=" transition",w=Ze(S.path(T,{roughness:.3,seed:o})).select("path").attr("id",e.id).attr("class"," "+b+(e.classes?" "+e.classes:"")).attr("style",k?k.reduce(((O,B)=>O+";"+B),""):"");let N=w.attr("d");w.attr("d",N),t.node().appendChild(w.node())}else{const S=f.join(";"),N=k?k.reduce(((L,I)=>L+I+";"),""):"";let O="";e.animate&&(O=" edge-animation-fast"),e.animation&&(O=" edge-animation-"+e.animation);const B=S?S+";"+N+";":N;w=t.append("path").attr("d",T).attr("id",e.id).attr("class"," "+b+(e.classes?" "+e.classes:"")+(O??"")).attr("style",B),C=B.match(/stroke:([^;]+)/)?.[1]}let E="";(ke().flowchart.arrowMarkerAbsolute||ke().state.arrowMarkerAbsolute)&&(E=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,E=E.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),ee.info("arrowTypeStart",e.arrowTypeStart),ee.info("arrowTypeEnd",e.arrowTypeEnd),Ffe(w,e,E,s,n,C);let _={};return h&&(_.updatedPath=u),_.originalPath=e.points,_}),"insertEdge"),Wfe=l(((t,e,r,n)=>{e.forEach((i=>{oge[i](t,r,n)}))}),"insertMarkers"),Yfe=l(((t,e,r)=>{ee.trace("Making markers for ",r),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")}),"extension"),Vfe=l(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")}),"composition"),Hfe=l(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")}),"aggregation"),Xfe=l(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")}),"dependency"),Kfe=l(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)}),"lollipop"),Zfe=l(((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")}),"point"),Qfe=l(((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")}),"circle"),Jfe=l(((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")}),"cross"),ege=l(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}),"barb"),tge=l(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-onlyOneStart").attr("class","marker onlyOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",r+"_"+e+"-onlyOneEnd").attr("class","marker onlyOne "+e).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")}),"only_one"),rge=l(((t,e,r)=>{const n=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrOneStart").attr("class","marker zeroOrOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),n.append("path").attr("d","M9,0 L9,18");const i=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+e).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),i.append("path").attr("d","M21,0 L21,18")}),"zero_or_one"),nge=l(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-oneOrMoreStart").attr("class","marker oneOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",r+"_"+e+"-oneOrMoreEnd").attr("class","marker oneOrMore "+e).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")}),"one_or_more"),ige=l(((t,e,r)=>{const n=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),n.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const i=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+e).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),i.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")}),"zero_or_more"),age=l(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)}),"requirement_arrow"),sge=l(((t,e,r)=>{const n=t.append("defs").append("marker").attr("id",r+"_"+e+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");n.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),n.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),n.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)}),"requirement_contains"),oge={extension:Yfe,composition:Vfe,aggregation:Hfe,dependency:Xfe,lollipop:Kfe,point:Zfe,circle:Qfe,cross:Jfe,barb:ege,only_one:tge,zero_or_one:rge,one_or_more:nge,zero_or_more:ige,requirement_arrow:age,requirement_contains:sge},FH=Wfe,lge={common:He,getConfig:Sr,insertCluster:Z1,insertEdge:$H,insertEdgeLabel:OH,insertMarkers:FH,insertNode:H6,interpolateToCurve:C1,labelHelper:Wt,log:ee,positionEdgeLabel:PH},L2={},zH=l((t=>{for(const e of t)L2[e.name]=e}),"registerLayoutLoaders");l((()=>{zH([{name:"dagre",loader:l((async()=>await Promise.resolve().then((function(){return kve}))),"loader")}])}),"registerDefaultLayoutLoaders")();var Av=l((async(t,e)=>{if(!(t.layoutAlgorithm in L2))throw new Error(`Unknown layout algorithm: ${t.layoutAlgorithm}`);const r=L2[t.layoutAlgorithm];return(await r.loader()).render(t,e,lge,{algorithm:r.algorithm})}),"render"),X6=l(((t="",{fallback:e="dagre"}={})=>{if(t in L2)return t;if(e in L2)return ee.warn(`Layout algorithm ${t} is not registered. Using ${e} as fallback.`),e;throw new Error(`Both layout algorithms ${t} and ${e} are not registered.`)}),"getRegisteredLayoutAlgorithm"),cge=XW(Object.keys,Object),uge=Object.prototype.hasOwnProperty;function GH(t){if(!kv(t))return cge(t);var e=[];for(var r in Object(t))uge.call(t,r)&&r!="constructor"&&e.push(r);return e}l(GH,"baseKeys");var J1=GH,b_=ih(Ls,"DataView"),w_=ih(Ls,"Promise"),Kd=ih(Ls,"Set"),k_=ih(Ls,"WeakMap"),hge=nh(b_),dge=nh(_2),pge=nh(w_),fge=nh(Kd),gge=nh(k_),Fc=rl;(b_&&Fc(new b_(new ArrayBuffer(1)))!="[object DataView]"||_2&&Fc(new _2)!="[object Map]"||w_&&Fc(w_.resolve())!="[object Promise]"||Kd&&Fc(new Kd)!="[object Set]"||k_&&Fc(new k_)!="[object WeakMap]")&&(Fc=l((function(t){var e=rl(t),r=e=="[object Object]"?t.constructor:void 0,n=r?nh(r):"";if(n)switch(n){case hge:return"[object DataView]";case dge:return"[object Map]";case pge:return"[object Promise]";case fge:return"[object Set]";case gge:return"[object WeakMap]"}return e}),"getTag"));var Vu=Fc,mge=Object.prototype.hasOwnProperty;function UH(t){if(t==null)return!0;if(Ns(t)&&(rr(t)||typeof t=="string"||typeof t.splice=="function"||G0(t)||z6(t)||z0(t)))return!t.length;var e=Vu(t);if(e=="[object Map]"||e=="[object Set]")return!t.size;if(kv(t))return!J1(t).length;for(var r in t)if(mge.call(t,r))return!1;return!0}l(UH,"isEmpty");var yr=UH,yge={id:"c4",detector:l((t=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(t)),"detector"),loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return mxe}));return{id:"c4",diagram:t}}),"loader")},vge=l(((t,e)=>e?.flowchart?.defaultRenderer!=="dagre-wrapper"&&e?.flowchart?.defaultRenderer!=="elk"&&/^\s*graph/.test(t)),"detector"),xge={id:"flowchart",detector:vge,loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return HA}));return{id:"flowchart",diagram:t}}),"loader")},$R="flowchart-v2",bge=l(((t,e)=>e?.flowchart?.defaultRenderer!=="dagre-d3"&&(e?.flowchart?.defaultRenderer==="elk"&&(e.layout="elk"),!(!/^\s*graph/.test(t)||e?.flowchart?.defaultRenderer!=="dagre-wrapper")||/^\s*flowchart/.test(t))),"detector"),wge={id:$R,detector:bge,loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return HA}));return{id:$R,diagram:t}}),"loader")},kge={id:"er",detector:l((t=>/^\s*erDiagram/.test(t)),"detector"),loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return Ixe}));return{id:"er",diagram:t}}),"loader")},Tge={id:"gitGraph",detector:l((t=>/^\s*gitGraph/.test(t)),"detector"),loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return H4e}));return{id:"gitGraph",diagram:t}}),"loader")},Ege={id:"gantt",detector:l((t=>/^\s*gantt/.test(t)),"detector"),loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return q5e}));return{id:"gantt",diagram:t}}),"loader")},_ge={id:"info",detector:l((t=>/^\s*info/.test(t)),"detector"),loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return X5e}));return{id:"info",diagram:t}}),"loader")},Cge={id:"pie",detector:l((t=>/^\s*pie/.test(t)),"detector"),loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return o6e}));return{id:"pie",diagram:t}}),"loader")},FR="quadrantChart",Sge={id:FR,detector:l((t=>/^\s*quadrantChart/.test(t)),"detector"),loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return f6e}));return{id:FR,diagram:t}}),"loader")},Age={id:"xychart",detector:l((t=>/^\s*xychart-beta/.test(t)),"detector"),loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return A6e}));return{id:"xychart",diagram:t}}),"loader")},Lge={id:"requirement",detector:l((t=>/^\s*requirement(Diagram)?/.test(t)),"detector"),loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return D6e}));return{id:"requirement",diagram:t}}),"loader")},Nge={id:"sequence",detector:l((t=>/^\s*sequenceDiagram/.test(t)),"detector"),loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return fwe}));return{id:"sequence",diagram:t}}),"loader")},Ige=l(((t,e)=>e?.class?.defaultRenderer!=="dagre-wrapper"&&/^\s*classDiagram/.test(t)),"detector"),Rge={id:"class",detector:Ige,loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return xwe}));return{id:"class",diagram:t}}),"loader")},Mge=l(((t,e)=>!(!/^\s*classDiagram/.test(t)||e?.class?.defaultRenderer!=="dagre-wrapper")||/^\s*classDiagram-v2/.test(t)),"detector"),Dge={id:"classDiagram",detector:Mge,loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return wwe}));return{id:"classDiagram",diagram:t}}),"loader")},Oge=l(((t,e)=>e?.state?.defaultRenderer!=="dagre-wrapper"&&/^\s*stateDiagram/.test(t)),"detector"),Pge={id:"state",detector:Oge,loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return Ywe}));return{id:"state",diagram:t}}),"loader")},Bge=l(((t,e)=>!!/^\s*stateDiagram-v2/.test(t)||!(!/^\s*stateDiagram/.test(t)||e?.state?.defaultRenderer!=="dagre-wrapper")),"detector"),$ge={id:"stateDiagram",detector:Bge,loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return Hwe}));return{id:"stateDiagram",diagram:t}}),"loader")},Fge={id:"journey",detector:l((t=>/^\s*journey/.test(t)),"detector"),loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return fke}));return{id:"journey",diagram:t}}),"loader")},zge=l(((t,e,r)=>{ee.debug(`rendering svg for syntax error
`);const n=tl(e),i=n.append("g");n.attr("viewBox","0 0 2412 512"),da(n,100,512,!0),i.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),i.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),i.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),i.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),i.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),i.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),i.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),i.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)}),"draw"),qH={draw:zge},Gge=qH,Uge={db:{},renderer:qH,parser:{parse:l((()=>{}),"parse")}},zR="flowchart-elk",qge=l(((t,e={})=>!!(/^\s*flowchart-elk/.test(t)||/^\s*flowchart|graph/.test(t)&&e?.flowchart?.defaultRenderer==="elk")&&(e.layout="elk",!0)),"detector"),jge={id:zR,detector:qge,loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return HA}));return{id:zR,diagram:t}}),"loader")},Wge={id:"timeline",detector:l((t=>/^\s*timeline/.test(t)),"detector"),loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return Mke}));return{id:"timeline",diagram:t}}),"loader")},Yge={id:"mindmap",detector:l((t=>/^\s*mindmap/.test(t)),"detector"),loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return w8e}));return{id:"mindmap",diagram:t}}),"loader")},Vge={id:"kanban",detector:l((t=>/^\s*kanban/.test(t)),"detector"),loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return $8e}));return{id:"kanban",diagram:t}}),"loader")},Hge={id:"sankey",detector:l((t=>/^\s*sankey-beta/.test(t)),"detector"),loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return i1e}));return{id:"sankey",diagram:t}}),"loader")},Xge={id:"packet",detector:l((t=>/^\s*packet-beta/.test(t)),"detector"),loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return y1e}));return{id:"packet",diagram:t}}),"loader")},Kge={id:"radar",detector:l((t=>/^\s*radar-beta/.test(t)),"detector"),loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return B1e}));return{id:"radar",diagram:t}}),"loader")},Zge={id:"block",detector:l((t=>/^\s*block-beta/.test(t)),"detector"),loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return n9e}));return{id:"block",diagram:t}}),"loader")},Qge={id:"architecture",detector:l((t=>/^\s*architecture/.test(t)),"detector"),loader:l((async()=>{const{diagram:t}=await Promise.resolve().then((function(){return P9e}));return{id:"architecture",diagram:t}}),"loader")},GR=!1,K6=l((()=>{GR||(GR=!0,_4("error",Uge,(t=>t.toLowerCase().trim()==="error")),_4("---",{db:{clear:l((()=>{}),"clear")},styles:{},renderer:{draw:l((()=>{}),"draw")},parser:{parse:l((()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")}),"parse")},init:l((()=>null),"init")},(t=>t.toLowerCase().trimStart().startsWith("---"))),RB(yge,Vge,Dge,Rge,kge,Ege,_ge,Cge,Lge,Nge,jge,wge,xge,Yge,Wge,Tge,$ge,Pge,Fge,Sge,Hge,Xge,Age,Zge,Qge,Kge))}),"addDiagrams"),Jge=l((async()=>{ee.debug("Loading registered diagrams");const t=(await Promise.allSettled(Object.entries(R0).map((async([e,{detector:r,loader:n}])=>{if(n)try{ZT(e)}catch{try{const{diagram:i,id:a}=await n();_4(a,i,r)}catch(i){throw ee.error(`Failed to load external diagram with key ${e}. Removing from detectors.`),delete R0[e],i}}})))).filter((e=>e.status==="rejected"));if(t.length>0){ee.error(`Failed to load ${t.length} external diagrams`);for(const e of t)ee.error(e);throw new Error(`Failed to load ${t.length} external diagrams`)}}),"loadRegisteredDiagrams"),jH=Math.abs,eA=String.fromCharCode;function tA(t){return t.trim()}function By(t,e,r){return t.replace(e,r)}function WH(t,e,r){return t.indexOf(e,r)}function pu(t,e){return 0|t.charCodeAt(e)}function Hu(t,e,r){return t.slice(e,r)}function us(t){return t.length}function YH(t){return t.length}function ry(t,e){return e.push(t),t}l(tA,"trim"),l(By,"replace"),l(WH,"indexof"),l(pu,"charat"),l(Hu,"substr"),l(us,"strlen"),l(YH,"sizeof"),l(ry,"append");var Z6=1,U0=1,VH=0,rs=0,En=0,dm="";function Q6(t,e,r,n,i,a,s,o){return{value:t,root:e,parent:r,type:n,props:i,children:a,line:Z6,column:U0,length:s,return:"",siblings:o}}function HH(){return En}function XH(){return En=rs>0?pu(dm,--rs):0,U0--,En===10&&(U0=1,Z6--),En}function Ka(){return En=rs<VH?pu(dm,rs++):0,U0++,En===10&&(U0=1,Z6++),En}function Lo(){return pu(dm,rs)}function $y(){return rs}function Lv(t,e){return Hu(dm,t,e)}function q0(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function KH(t){return Z6=U0=1,VH=us(dm=t),rs=0,[]}function ZH(t){return dm="",t}function Lb(t){return tA(Lv(rs-1,s5(t===91?t+2:t===40?t+1:t)))}function QH(t){for(;(En=Lo())&&En<33;)Ka();return q0(t)>2||q0(En)>3?"":" "}function JH(t,e){for(;--e&&Ka()&&!(En<48||En>102||En>57&&En<65||En>70&&En<97););return Lv(t,$y()+(e<6&&Lo()==32&&Ka()==32))}function s5(t){for(;Ka();)switch(En){case t:return rs;case 34:case 39:t!==34&&t!==39&&s5(En);break;case 40:t===41&&s5(t);break;case 92:Ka()}return rs}function eX(t,e){for(;Ka()&&t+En!==57&&(t+En!==84||Lo()!==47););return"/*"+Lv(e,rs-1)+"*"+eA(t===47?t:Ka())}function tX(t){for(;!q0(Lo());)Ka();return Lv(t,rs)}function rX(t){return ZH(Fy("",null,null,null,[""],t=KH(t),0,[0],t))}function Fy(t,e,r,n,i,a,s,o,u){for(var h=0,d=0,p=s,f=0,g=0,m=0,y=1,v=1,x=1,b=0,w="",T=i,k=a,C=n,E=w;v;)switch(m=b,b=Ka()){case 40:if(m!=108&&pu(E,p-1)==58){WH(E+=By(Lb(b),"&","&\f"),"&\f",jH(h?o[h-1]:0))!=-1&&(x=-1);break}case 34:case 39:case 91:E+=Lb(b);break;case 9:case 10:case 13:case 32:E+=QH(m);break;case 92:E+=JH($y()-1,7);continue;case 47:switch(Lo()){case 42:case 47:ry(nX(eX(Ka(),$y()),e,r,u),u),q0(m||1)!=5&&q0(Lo()||1)!=5||!us(E)||Hu(E,-1,void 0)===" "||(E+=" ");break;default:E+="/"}break;case 123*y:o[h++]=us(E)*x;case 125*y:case 59:case 0:switch(b){case 0:case 125:v=0;case 59+d:x==-1&&(E=By(E,/\f/g,"")),g>0&&(us(E)-p||y===0&&m===47)&&ry(g>32?E_(E+";",n,r,p-1,u):E_(By(E," ","")+";",n,r,p-2,u),u);break;case 59:E+=";";default:if(ry(C=T_(E,e,r,h,d,i,o,w,T=[],k=[],p,a),a),b===123)if(d===0)Fy(E,e,C,C,T,a,p,o,k);else{switch(f){case 99:if(pu(E,3)===110)break;case 108:if(pu(E,2)===97)break;default:d=0;case 100:case 109:case 115:}d?Fy(t,C,C,n&&ry(T_(t,C,C,0,0,i,o,w,i,T=[],p,k),k),i,k,p,o,n?T:k):Fy(E,C,C,C,[""],k,0,o,k)}}h=d=g=0,y=x=1,w=E="",p=s;break;case 58:p=1+us(E),g=m;default:if(y<1){if(b==123)--y;else if(b==125&&y++==0&&XH()==125)continue}switch(E+=eA(b),b*y){case 38:x=d>0?1:(E+="\f",-1);break;case 44:o[h++]=(us(E)-1)*x,x=1;break;case 64:Lo()===45&&(E+=Lb(Ka())),f=Lo(),d=p=us(w=E+=tX($y())),b++;break;case 45:m===45&&us(E)==2&&(y=0)}}return a}function T_(t,e,r,n,i,a,s,o,u,h,d,p){for(var f=i-1,g=i===0?a:[""],m=YH(g),y=0,v=0,x=0;y<n;++y)for(var b=0,w=Hu(t,f+1,f=jH(v=s[y])),T=t;b<m;++b)(T=tA(v>0?g[b]+" "+w:By(w,/&\f/g,g[b])))&&(u[x++]=T);return Q6(t,e,r,i===0?"rule":o,u,h,d,p)}function nX(t,e,r,n){return Q6(t,e,r,"comm",eA(HH()),Hu(t,2,-2),0,n)}function E_(t,e,r,n,i){return Q6(t,e,r,"decl",Hu(t,0,n),Hu(t,n+1,-1),n,i)}function o5(t,e){for(var r="",n=0;n<t.length;n++)r+=e(t[n],n,t,e)||"";return r}function iX(t,e,r,n){switch(t.type){case"@layer":if(t.children.length)break;case"@import":case"@namespace":case"decl":return t.return=t.return||t.value;case"comm":return"";case"@keyframes":return t.return=t.value+"{"+o5(t.children,n)+"}";case"rule":if(!us(t.value=t.props.join(",")))return""}return us(r=o5(t.children,n))?t.return=t.value+"{"+r+"}":""}l(Q6,"node"),l(HH,"char"),l(XH,"prev"),l(Ka,"next"),l(Lo,"peek"),l($y,"caret"),l(Lv,"slice"),l(q0,"token"),l(KH,"alloc"),l(ZH,"dealloc"),l(Lb,"delimit"),l(QH,"whitespace"),l(JH,"escaping"),l(s5,"delimiter"),l(eX,"commenter"),l(tX,"identifier"),l(rX,"compile"),l(Fy,"parse"),l(T_,"ruleset"),l(nX,"comment"),l(E_,"declaration"),l(o5,"serialize"),l(iX,"stringify");function aX(t,e){t.attr("role","graphics-document document"),e!==""&&t.attr("aria-roledescription",e)}function sX(t,e,r,n){if(t.insert!==void 0){if(r){const i=`chart-desc-${n}`;t.attr("aria-describedby",i),t.insert("desc",":first-child").attr("id",i).text(r)}if(e){const i=`chart-title-${n}`;t.attr("aria-labelledby",i),t.insert("title",":first-child").attr("id",i).text(e)}}}l(aX,"setA11yDiagramInfo"),l(sX,"addSVGa11yTitleDescription");var mu,__=(mu=class{constructor(e,r,n,i,a){this.type=e,this.text=r,this.db=n,this.parser=i,this.renderer=a}static async fromText(e,r={}){const n=Sr(),i=y8(e,n);e=Mpe(e)+`
`;try{ZT(i)}catch{const h=ace(i);if(!h)throw new IB(`Diagram ${i} not found.`);const{id:d,diagram:p}=await h();_4(d,p)}const{db:a,parser:s,renderer:o,init:u}=ZT(i);return s.parser&&(s.parser.yy=a),a.clear?.(),u?.(n),r.title&&a.setDiagramTitle?.(r.title),await s.parse(e),new mu(i,e,a,s,o)}async render(e,r){await this.renderer.draw(this.text,e,r,this)}getParser(){return this.parser}getType(){return this.type}},l(mu,"Diagram"),mu),UR=[],e0e=l((()=>{UR.forEach((t=>{t()})),UR=[]}),"attachFunctions"),t0e=l((t=>t.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart()),"cleanupComments");function oX(t){const e=t.match(NB);if(!e)return{text:t,metadata:{}};let r=b1(e[1],{schema:x1})??{};r=typeof r!="object"||Array.isArray(r)?{}:r;const n={};return r.displayMode&&(n.displayMode=r.displayMode.toString()),r.title&&(n.title=r.title.toString()),r.config&&(n.config=r.config),{text:t.slice(e[0].length),metadata:n}}l(oX,"extractFrontMatter");var r0e=l((t=>t.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,((e,r,n)=>"<"+r+n.replace(/="([^"]*)"/g,"='$1'")+">"))),"cleanupText"),n0e=l((t=>{const{text:e,metadata:r}=oX(t),{displayMode:n,title:i,config:a={}}=r;return n&&(a.gantt||(a.gantt={}),a.gantt.displayMode=n),{title:i,config:a,text:e}}),"processFrontmatter"),i0e=l((t=>{const e=Vt.detectInit(t)??{},r=Vt.detectDirective(t,"wrap");return Array.isArray(r)?e.wrap=r.some((({type:n})=>n==="wrap")):r?.type==="wrap"&&(e.wrap=!0),{text:Tpe(t),directive:e}}),"processDirectives");function rA(t){const e=r0e(t),r=n0e(e),n=i0e(r.text),i=ts(r.config,n.directive);return{code:t=t0e(n.text),title:r.title,config:i}}function lX(t){const e=new TextEncoder().encode(t),r=Array.from(e,(n=>String.fromCodePoint(n))).join("");return btoa(r)}l(rA,"preprocessDiagram"),l(lX,"toBase64");var a0e=["foreignobject"],s0e=["dominant-baseline"];function nA(t){const e=rA(t);return T4(),Ace(e.config??{}),e}async function cX(t,e){K6();try{const{code:r,config:n}=nA(t);return{diagramType:(await hX(r)).type,config:n}}catch(r){if(e?.suppressErrors)return!1;throw r}}l(nA,"processAndSetConfigs"),l(cX,"parse");var qR=l(((t,e,r=[])=>`
.${t} ${e} { ${r.join(" !important; ")} !important; }`),"cssImportantStyles"),o0e=l(((t,e=new Map)=>{let r="";if(t.themeCSS!==void 0&&(r+=`
${t.themeCSS}`),t.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${t.fontFamily}}`),t.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${t.altFontFamily}}`),e instanceof Map){const n=["> *","span"],i=["rect","polygon","ellipse","circle","path"],a=t.htmlLabels??t.flowchart?.htmlLabels?n:i;e.forEach((s=>{yr(s.styles)||a.forEach((o=>{r+=qR(s.id,o,s.styles)})),yr(s.textStyles)||(r+=qR(s.id,"tspan",(s?.textStyles||[]).map((o=>o.replace("color","fill")))))}))}return r}),"createCssStyles"),l0e=l(((t,e,r,n)=>{const i=o0e(t,r);return o5(rX(`${n}{${mue(e,i,t.themeVariables)}}`),iX)}),"createUserStyles"),c0e=l(((t="",e,r)=>{let n=t;return r||e||(n=n.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),n=io(n),n=n.replace(/<br>/g,"<br/>"),n}),"cleanUpSvgCode"),u0e=l(((t="",e)=>`<iframe style="width:100%;height:${e?.viewBox?.baseVal?.height?e.viewBox.baseVal.height+"px":"100%"};border:0;margin:0;" src="data:text/html;charset=UTF-8;base64,${lX(`<body style="margin:0">${t}</body>`)}" sandbox="allow-top-navigation-by-user-activation allow-popups">
  The "iframe" tag is not supported by your browser.
</iframe>`),"putIntoIFrame"),jR=l(((t,e,r,n,i)=>{const a=t.append("div");a.attr("id",r),n&&a.attr("style",n);const s=a.append("svg").attr("id",e).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg");return i&&s.attr("xmlns:xlink",i),s.append("g"),t}),"appendDivSvgG");function C_(t,e){return t.append("iframe").attr("id",e).attr("style","width: 100%; height: 100%;").attr("sandbox","")}l(C_,"sandboxedIframe");var h0e=l(((t,e,r,n)=>{t.getElementById(e)?.remove(),t.getElementById(r)?.remove(),t.getElementById(n)?.remove()}),"removeExistingElements"),d0e=l((async function(t,e,r){K6();const n=nA(e);e=n.code;const i=Sr();ee.debug(i),e.length>(i?.maxTextSize??5e4)&&(e="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa");const a="#"+t,s="i"+t,o="#"+s,u="d"+t,h="#"+u,d=l((()=>{const B=Ze(f?o:h).node();B&&"remove"in B&&B.remove()}),"removeTempElements");let p=Ze("body");const f=i.securityLevel==="sandbox",g=i.securityLevel==="loose",m=i.fontFamily;if(r!==void 0){if(r&&(r.innerHTML=""),f){const B=C_(Ze(r),s);p=Ze(B.nodes()[0].contentDocument.body),p.node().style.margin=0}else p=Ze(r);jR(p,t,u,`font-family: ${m}`,"http://www.w3.org/1999/xlink")}else{if(h0e(document,t,u,s),f){const B=C_(Ze("body"),s);p=Ze(B.nodes()[0].contentDocument.body),p.node().style.margin=0}else p=Ze("body");jR(p,t,u)}let y,v;try{y=await __.fromText(e,{title:n.title})}catch(B){if(i.suppressErrorRendering)throw d(),B;y=await __.fromText("error"),v=B}const x=p.select(h).node(),b=y.type,w=x.firstChild,T=w.firstChild,k=y.renderer.getClasses?.(e,y),C=l0e(i,b,k,a),E=document.createElement("style");E.innerHTML=C,w.insertBefore(E,T);try{await y.renderer.draw(e,t,qT,y)}catch(B){throw i.suppressErrorRendering?d():Gge.draw(e,t,qT),B}const _=p.select(`${h} svg`),S=y.db.getAccTitle?.(),N=y.db.getAccDescription?.();dX(b,_,S,N),p.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns","http://www.w3.org/1999/xhtml");let O=p.select(h).node().innerHTML;if(ee.debug("config.arrowMarkerAbsolute",i.arrowMarkerAbsolute),O=c0e(O,f,Cr(i.arrowMarkerAbsolute)),f){const B=p.select(h+" svg").node();O=u0e(O,B)}else g||(O=D0.sanitize(O,{ADD_TAGS:a0e,ADD_ATTR:s0e,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(e0e(),v)throw v;return d(),{diagramType:b,svg:O,bindFunctions:y.db.bindFunctions}}),"render");function uX(t={}){const e=On({},t);e?.fontFamily&&!e.themeVariables?.fontFamily&&(e.themeVariables||(e.themeVariables={}),e.themeVariables.fontFamily=e.fontFamily),Cce(e),e?.theme&&e.theme in Mo?e.themeVariables=Mo[e.theme].getThemeVariables(e.themeVariables):e&&(e.themeVariables=Mo.default.getThemeVariables(e.themeVariables));const r=typeof e=="object"?_ce(e):GB();m8(r.logLevel),K6()}l(uX,"initialize");var hX=l(((t,e={})=>{const{code:r}=rA(t);return __.fromText(r,e)}),"getDiagramFromText");function dX(t,e,r,n){aX(e,t),sX(e,r,n,e.attr("id"))}l(dX,"addA11yInfo");var Xu=Object.freeze({render:d0e,parse:cX,getDiagramFromText:hX,initialize:uX,getConfig:Sr,setConfig:UB,getSiteConfig:GB,updateSiteConfig:Sce,reset:l((()=>{T4()}),"reset"),globalReset:l((()=>{T4(M0)}),"globalReset"),defaultConfig:M0});m8(Sr().logLevel),T4(Sr());var p0e=l(((t,e,r)=>{ee.warn(t),I1(t)?(r&&r(t.str,t.hash),e.push({...t,message:t.str,error:t})):(r&&r(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))}),"handleError"),pX=l((async function(t={querySelector:".mermaid"}){try{await f0e(t)}catch(e){if(I1(e)&&ee.error(e.str),zo.parseError&&zo.parseError(e),!t.suppressErrors)throw ee.error("Use the suppressErrors option to suppress these errors"),e}}),"run"),f0e=l((async function({postRenderCallback:t,querySelector:e,nodes:r}={querySelector:".mermaid"}){const n=Xu.getConfig();let i;if(ee.debug((t?"":"No ")+"Callback function found"),r)i=r;else{if(!e)throw new Error("Nodes and querySelector are both undefined");i=document.querySelectorAll(e)}ee.debug(`Found ${i.length} diagrams`),n?.startOnLoad!==void 0&&(ee.debug("Start On Load: "+n?.startOnLoad),Xu.updateSiteConfig({startOnLoad:n?.startOnLoad}));const a=new Vt.InitIDGenerator(n.deterministicIds,n.deterministicIDSeed);let s;const o=[];for(const u of Array.from(i)){if(ee.info("Rendering diagram: "+u.id),u.getAttribute("data-processed"))continue;u.setAttribute("data-processed","true");const h=`mermaid-${a.next()}`;s=u.innerHTML,s=R1(Vt.entityDecode(s)).trim().replace(/<br\s*\/?>/gi,"<br/>");const d=Vt.detectInit(s);d&&ee.debug("Detected early reinit: ",d);try{const{svg:p,bindFunctions:f}=await yX(h,s,u);u.innerHTML=p,t&&await t(h),f&&f(u)}catch(p){p0e(p,o,zo.parseError)}}if(o.length>0)throw o[0]}),"runThrowsErrors"),fX=l((function(t){Xu.initialize(t)}),"initialize"),g0e=l((async function(t,e,r){ee.warn("mermaid.init is deprecated. Please use run instead."),t&&fX(t);const n={postRenderCallback:r,querySelector:".mermaid"};typeof e=="string"?n.querySelector=e:e&&(e instanceof HTMLElement?n.nodes=[e]:n.nodes=e),await pX(n)}),"init"),m0e=l((async(t,{lazyLoad:e=!0}={})=>{K6(),RB(...t),e===!1&&await Jge()}),"registerExternalDiagrams"),gX=l((function(){if(zo.startOnLoad){const{startOnLoad:t}=Xu.getConfig();t&&zo.run().catch((e=>ee.error("Mermaid failed to initialize",e)))}}),"contentLoaded");typeof document<"u"&&window.addEventListener("load",gX,!1);var y0e=l((function(t){zo.parseError=t}),"setParseErrorHandler"),l5=[],Wk=!1,mX=l((async()=>{if(!Wk){for(Wk=!0;l5.length>0;){const t=l5.shift();if(t)try{await t()}catch(e){ee.error("Error executing queue",e)}}Wk=!1}}),"executeQueue"),v0e=l((async(t,e)=>new Promise(((r,n)=>{const i=l((()=>new Promise(((a,s)=>{Xu.parse(t,e).then((o=>{a(o),r(o)}),(o=>{ee.error("Error parsing",o),zo.parseError?.(o),s(o),n(o)}))}))),"performCall");l5.push(i),mX().catch(n)}))),"parse"),yX=l(((t,e,r)=>new Promise(((n,i)=>{const a=l((()=>new Promise(((s,o)=>{Xu.render(t,e,r).then((u=>{s(u),n(u)}),(u=>{ee.error("Error parsing",u),zo.parseError?.(u),o(u),i(u)}))}))),"performCall");l5.push(a),mX().catch(i)}))),"render"),zo={startOnLoad:!0,mermaidAPI:Xu,parse:v0e,render:yX,init:g0e,run:pX,registerExternalDiagrams:m0e,registerLayoutLoaders:zH,initialize:fX,parseError:void 0,contentLoaded:gX,setParseErrorHandler:y0e,detectType:y8,registerIconPacks:Jj},vX=zo;function x0e(t){let{beforeRender:e,afterRender:r}=t;return function(n){return(async function(i){let{el:a,beforeRender:s,afterRender:o}=i;if(await s?.(a)===!1)return;const u=a.textContent.trim();try{const{svg:h}=await vX.render(`mermaid-${Math.random().toString(36).substring(2)}`,u);a.innerHTML=h,await o?.(a)}catch(h){let d="";h!=null&&h.str&&(d=h.str),h!=null&&h.message&&(d=h.message),console.error(d,{error:h,graphDefinition:u,el:a}),a.innerHTML=d}})({el:n,beforeRender:e,afterRender:r})}}const b0e={id:"mermaid",init:function(t){const{...e}=t.getConfig().mermaid||{},{...r}=t.getConfig().mermaidPlugin||{},n=x0e({beforeRender:r.beforeRender,afterRender:r.afterRender});vX.initialize({startOnLoad:!1,...e});const i=t.getRevealElement().querySelectorAll(".mermaid");Array.from(i).forEach((function(a){n(a)}))}};var j9e=()=>b0e,yu,hs=(yu=class{constructor(e,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=r,this.end=n}static range(e,r){return r?e&&e.loc&&r.loc&&e.loc.lexer===r.loc.lexer?new yu(e.loc.lexer,e.loc.start,r.loc.end):null:e&&e.loc}},l(yu,"SourceLocation"),yu),vu,eo=(vu=class{constructor(e,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=r}range(e,r){return new vu(r,hs.range(this,e))}},l(vu,"Token"),vu),xu,tt=(xu=class{constructor(e,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n,i,a="KaTeX parse error: "+e,s=r&&r.loc;if(s&&s.start<=s.end){var o=s.lexer.input;n=s.start,i=s.end,n===o.length?a+=" at end of input: ":a+=" at position "+(n+1)+": ";var u=o.slice(n,i).replace(/[^]/g,"$&");a+=(n>15?""+o.slice(n-15,n):o.slice(0,n))+u+(i+15<o.length?o.slice(i,i+15)+"":o.slice(i))}var h=new Error(a);return h.name="ParseError",h.__proto__=xu.prototype,h.position=n,n!=null&&i!=null&&(h.length=i-n),h.rawMessage=e,h}},l(xu,"ParseError"),xu);tt.prototype.__proto__=Error.prototype;var w0e=l((function(t,e){return t.indexOf(e)!==-1}),"contains"),k0e=l((function(t,e){return t===void 0?e:t}),"deflt"),T0e=/([A-Z])/g,E0e=l((function(t){return t.replace(T0e,"-$1").toLowerCase()}),"hyphenate"),_0e={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},C0e=/[&><"']/g;function xX(t){return String(t).replace(C0e,(e=>_0e[e]))}l(xX,"escape");var bX=l((function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e}),"getBaseElem"),S0e=l((function(t){var e=bX(t);return e.type==="mathord"||e.type==="textord"||e.type==="atom"}),"isCharacterBox"),A0e=l((function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t}),"assert"),Pt={contains:w0e,deflt:k0e,escape:xX,hyphenate:E0e,getBaseElem:bX,isCharacterBox:S0e,protocolFromUrl:l((function(t){var e=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(t);return e?e[2]!==":"?null:/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(e[1])?e[1].toLowerCase():null:"_relative"}),"protocolFromUrl")},Nb={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:l((t=>"#"+t),"cliProcessor")},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:l(((t,e)=>(e.push(t),e)),"cliProcessor")},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:l((t=>Math.max(0,t)),"processor"),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:l((t=>Math.max(0,t)),"processor"),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:l((t=>Math.max(0,t)),"processor"),cli:"-e, --max-expand <n>",cliProcessor:l((t=>t==="Infinity"?1/0:parseInt(t)),"cliProcessor")},globalGroup:{type:"boolean",cli:!1}};function wX(t){if(t.default)return t.default;var e=t.type,r=Array.isArray(e)?e[0]:e;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}l(wX,"getDefaultValue");var Rp,iA=(Rp=class{constructor(e){for(var r in this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{},Nb)if(Nb.hasOwnProperty(r)){var n=Nb[r];this[r]=e[r]!==void 0?n.processor?n.processor(e[r]):e[r]:wX(n)}}reportNonstrict(e,r,n){var i=this.strict;if(typeof i=="function"&&(i=i(e,r,n)),i&&i!=="ignore"){if(i===!0||i==="error")throw new tt("LaTeX-incompatible input and strict mode is set to 'error': "+r+" ["+e+"]",n);i==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+r+" ["+e+"]"):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+i+"': "+r+" ["+e+"]")}}useStrictBehavior(e,r,n){var i=this.strict;if(typeof i=="function")try{i=i(e,r,n)}catch{i="error"}return!(!i||i==="ignore")&&(i===!0||i==="error"||(i==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+r+" ["+e+"]"),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+i+"': "+r+" ["+e+"]"),!1)))}isTrusted(e){if(e.url&&!e.protocol){var r=Pt.protocolFromUrl(e.url);if(r==null)return!1;e.protocol=r}var n=typeof this.trust=="function"?this.trust(e):this.trust;return!!n}},l(Rp,"Settings"),Rp),Mp,hl=(Mp=class{constructor(e,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=r,this.cramped=n}sup(){return Us[L0e[this.id]]}sub(){return Us[N0e[this.id]]}fracNum(){return Us[I0e[this.id]]}fracDen(){return Us[R0e[this.id]]}cramp(){return Us[M0e[this.id]]}text(){return Us[D0e[this.id]]}isTight(){return this.size>=2}},l(Mp,"Style"),Mp),Us=[new hl(0,0,!1),new hl(1,0,!0),new hl(2,1,!1),new hl(3,1,!0),new hl(4,2,!1),new hl(5,2,!0),new hl(6,3,!1),new hl(7,3,!0)],L0e=[4,5,4,5,6,7,6,7],N0e=[5,5,5,5,7,7,7,7],I0e=[2,3,4,5,6,7,6,7],R0e=[3,3,5,5,7,7,7,7],M0e=[1,1,3,3,5,5,7,7],D0e=[0,1,2,3,2,3,2,3],zt={DISPLAY:Us[0],TEXT:Us[2],SCRIPT:Us[4],SCRIPTSCRIPT:Us[6]},S_=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function kX(t){for(var e=0;e<S_.length;e++)for(var r=S_[e],n=0;n<r.blocks.length;n++){var i=r.blocks[n];if(t>=i[0]&&t<=i[1])return r.name}return null}l(kX,"scriptFromCodepoint");var Ib=[];function aA(t){for(var e=0;e<Ib.length;e+=2)if(t>=Ib[e]&&t<=Ib[e+1])return!0;return!1}S_.forEach((t=>t.blocks.forEach((e=>Ib.push(...e))))),l(aA,"supportedCodepoint");var O0e=l((function(t,e){return"M95,"+(622+t+e)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+t/2.075+" -"+t+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+t)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+t)+" "+e+"h400000v"+(40+t)+"h-400000z"}),"sqrtMain"),P0e=l((function(t,e){return"M263,"+(601+t+e)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+t/2.084+" -"+t+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+t)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+t)+" "+e+"h400000v"+(40+t)+"h-400000z"}),"sqrtSize1"),B0e=l((function(t,e){return"M983 "+(10+t+e)+`
l`+t/3.13+" -"+t+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+t)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+t)+" "+e+"h400000v"+(40+t)+"h-400000z"}),"sqrtSize2"),$0e=l((function(t,e){return"M424,"+(2398+t+e)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+t/4.223+" -"+t+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+t)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+t)+" "+e+`
h400000v`+(40+t)+"h-400000z"}),"sqrtSize3"),F0e=l((function(t,e){return"M473,"+(2713+t+e)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+t/5.298+" -"+t+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+t)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+t)+" "+e+"h400000v"+(40+t)+"H1017.7z"}),"sqrtSize4"),z0e=l((function(t){return"M400000 "+t+" H0 L"+t/2+" 0 l65 45 L145 "+(t-80)+" H400000z"}),"phasePath"),G0e=l((function(t,e,r){return"M702 "+(t+e)+"H400000"+(40+t)+`
H742v`+(r-54-e-t)+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+e+"H400000v"+(40+t)+"H742z"}),"sqrtTall"),U0e=l((function(t,e,r){e*=1e3;var n="";switch(t){case"sqrtMain":n=O0e(e,80);break;case"sqrtSize1":n=P0e(e,80);break;case"sqrtSize2":n=B0e(e,80);break;case"sqrtSize3":n=$0e(e,80);break;case"sqrtSize4":n=F0e(e,80);break;case"sqrtTall":n=G0e(e,80,r)}return n}),"sqrtPath"),q0e=l((function(t,e){switch(t){case"":return"M291 0 H417 V"+e+" H291z M291 0 H417 V"+e+" H291z";case"":return"M145 0 H188 V"+e+" H145z M145 0 H188 V"+e+" H145z";case"":return"M145 0 H188 V"+e+" H145z M145 0 H188 V"+e+" H145zM367 0 H410 V"+e+" H367z M367 0 H410 V"+e+" H367z";case"":return"M457 0 H583 V"+e+" H457z M457 0 H583 V"+e+" H457z";case"":return"M319 0 H403 V"+e+" H319z M319 0 H403 V"+e+" H319z";case"":return"M263 0 H347 V"+e+" H263z M263 0 H347 V"+e+" H263z";case"":return"M384 0 H504 V"+e+" H384z M384 0 H504 V"+e+" H384z";case"":return"M312 0 H355 V"+e+" H312z M312 0 H355 V"+e+" H312z";case"":return"M257 0 H300 V"+e+" H257z M257 0 H300 V"+e+" H257zM478 0 H521 V"+e+" H478z M478 0 H521 V"+e+" H478z";default:return""}}),"innerPath"),WR={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},j0e=l((function(t,e){switch(t){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+e+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+e+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+e+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+e+" v1759 h84z";case"vert":return"M145 15 v585 v"+e+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-e+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+e+" v585 h43z";case"doublevert":return"M145 15 v585 v"+e+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-e+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+e+` v585 h43z
M367 15 v585 v`+e+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-e+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+e+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+e+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+e+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+e+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+e+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+e+` v602 h84z
M403 1759 V0 H319 V1759 v`+e+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+e+` v602 h84z
M347 1759 V0 h-84 V1759 v`+e+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(e+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(e+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(e+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(e+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}}),"tallDelim"),Dp,Nv=(Dp=class{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return Pt.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){for(var e="",r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e}toText(){var e=l((r=>r.toText()),"toText");return this.children.map(e).join("")}},l(Dp,"DocumentFragment"),Dp),Hs={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},Tx={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},YR={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function TX(t,e){Hs[t]=e}function J6(t,e,r){if(!Hs[e])throw new Error("Font metrics not found for font: "+e+".");var n=t.charCodeAt(0),i=Hs[e][n];if(!i&&t[0]in YR&&(n=YR[t[0]].charCodeAt(0),i=Hs[e][n]),i||r!=="text"||aA(n)&&(i=Hs[e][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}l(TX,"setFontMetrics"),l(J6,"getCharacterMetrics");var Yk={};function EX(t){var e;if(!Yk[e=t>=5?0:t>=3?1:2]){var r=Yk[e]={cssEmPerMu:Tx.quad[e]/18};for(var n in Tx)Tx.hasOwnProperty(n)&&(r[n]=Tx[n][e])}return Yk[e]}l(EX,"getGlobalMetrics");var W0e=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],VR=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],HR=l((function(t,e){return e.size<2?t:W0e[t-1][e.size-1]}),"sizeAtStyle"),Fa,_X=(Fa=class{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Fa.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=VR[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return new Fa(r)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:HR(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:VR[e-1]})}havingBaseStyle(e){e=e||this.style.text();var r=HR(Fa.BASESIZE,e);return this.size===r&&this.textSize===Fa.BASESIZE&&this.style===e?this:this.extend({style:e,size:r})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Fa.BASESIZE?["sizing","reset-size"+this.size,"size"+Fa.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=EX(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}},l(Fa,"Options"),Fa);_X.BASESIZE=6;var A_={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:1.00375,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:1.00375},Y0e={ex:!0,em:!0,mu:!0},CX=l((function(t){return typeof t!="string"&&(t=t.unit),t in A_||t in Y0e||t==="ex"}),"validUnit"),Qr=l((function(t,e){var r;if(t.unit in A_)r=A_[t.unit]/e.fontMetrics().ptPerEm/e.sizeMultiplier;else if(t.unit==="mu")r=e.fontMetrics().cssEmPerMu;else{var n;if(n=e.style.isTight()?e.havingStyle(e.style.text()):e,t.unit==="ex")r=n.fontMetrics().xHeight;else{if(t.unit!=="em")throw new tt("Invalid unit: '"+t.unit+"'");r=n.fontMetrics().quad}n!==e&&(r*=n.sizeMultiplier/e.sizeMultiplier)}return Math.min(t.number*r,e.maxSize)}),"calculateSize"),st=l((function(t){return+t.toFixed(4)+"em"}),"makeEm"),Ql=l((function(t){return t.filter((e=>e)).join(" ")}),"createClass"),SX=l((function(t,e,r){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=r||{},e){e.style.isTight()&&this.classes.push("mtight");var n=e.getColor();n&&(this.style.color=n)}}),"initNode"),AX=l((function(t){var e=document.createElement(t);for(var r in e.className=Ql(this.classes),this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);for(var n in this.attributes)this.attributes.hasOwnProperty(n)&&e.setAttribute(n,this.attributes[n]);for(var i=0;i<this.children.length;i++)e.appendChild(this.children[i].toNode());return e}),"toNode"),LX=l((function(t){var e="<"+t;this.classes.length&&(e+=' class="'+Pt.escape(Ql(this.classes))+'"');var r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=Pt.hyphenate(n)+":"+this.style[n]+";");for(var i in r&&(e+=' style="'+Pt.escape(r)+'"'),this.attributes)this.attributes.hasOwnProperty(i)&&(e+=" "+i+'="'+Pt.escape(this.attributes[i])+'"');e+=">";for(var a=0;a<this.children.length;a++)e+=this.children[a].toMarkup();return e+="</"+t+">"}),"toMarkup"),Op,Iv=(Op=class{constructor(e,r,n,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,SX.call(this,e,n,i),this.children=r||[]}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return Pt.contains(this.classes,e)}toNode(){return AX.call(this,"span")}toMarkup(){return LX.call(this,"span")}},l(Op,"Span"),Op),Pp,sA=(Pp=class{constructor(e,r,n,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,SX.call(this,r,i),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return Pt.contains(this.classes,e)}toNode(){return AX.call(this,"a")}toMarkup(){return LX.call(this,"a")}},l(Pp,"Anchor"),Pp),Bp,V0e=(Bp=class{constructor(e,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return Pt.contains(this.classes,e)}toNode(){var e=document.createElement("img");for(var r in e.src=this.src,e.alt=this.alt,e.className="mord",this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);return e}toMarkup(){var e='<img src="'+Pt.escape(this.src)+'" alt="'+Pt.escape(this.alt)+'"',r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=Pt.hyphenate(n)+":"+this.style[n]+";");return r&&(e+=' style="'+Pt.escape(r)+'"'),e+="'/>"}},l(Bp,"Img"),Bp),H0e={:"",:"",:"",:""},$p,ns=($p=class{constructor(e,r,n,i,a,s,o,u){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=r||0,this.depth=n||0,this.italic=i||0,this.skew=a||0,this.width=s||0,this.classes=o||[],this.style=u||{},this.maxFontSize=0;var h=kX(this.text.charCodeAt(0));h&&this.classes.push(h+"_fallback"),/[]/.test(this.text)&&(this.text=H0e[this.text])}hasClass(e){return Pt.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),r=null;for(var n in this.italic>0&&((r=document.createElement("span")).style.marginRight=st(this.italic)),this.classes.length>0&&((r=r||document.createElement("span")).className=Ql(this.classes)),this.style)this.style.hasOwnProperty(n)&&((r=r||document.createElement("span")).style[n]=this.style[n]);return r?(r.appendChild(e),r):e}toMarkup(){var e=!1,r="<span";this.classes.length&&(e=!0,r+=' class="',r+=Pt.escape(Ql(this.classes)),r+='"');var n="";for(var i in this.italic>0&&(n+="margin-right:"+this.italic+"em;"),this.style)this.style.hasOwnProperty(i)&&(n+=Pt.hyphenate(i)+":"+this.style[i]+";");n&&(e=!0,r+=' style="'+Pt.escape(n)+'"');var a=Pt.escape(this.text);return e?(r+=">",r+=a,r+="</span>"):a}},l($p,"SymbolNode"),$p),Fp,Go=(Fp=class{constructor(e,r){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=r||{}}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);for(var n=0;n<this.children.length;n++)e.appendChild(this.children[n].toNode());return e}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Pt.escape(this.attributes[r])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>"}},l(Fp,"SvgNode"),Fp),zp,Jl=(zp=class{constructor(e,r){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=r}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?e.setAttribute("d",this.alternate):e.setAttribute("d",WR[this.pathName]),e}toMarkup(){return this.alternate?'<path d="'+Pt.escape(this.alternate)+'"/>':'<path d="'+Pt.escape(WR[this.pathName])+'"/>'}},l(zp,"PathNode"),zp),Gp,L_=(Gp=class{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","line");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);return e}toMarkup(){var e="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Pt.escape(this.attributes[r])+'"');return e+="/>"}},l(Gp,"LineNode"),Gp);function N_(t){if(t instanceof ns)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function NX(t){if(t instanceof Iv)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}l(N_,"assertSymbolDomNode"),l(NX,"assertSpan");var X0e={bin:1,close:1,inner:1,open:1,punct:1,rel:1},K0e={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},zr={math:{},text:{}};function F(t,e,r,n,i,a){zr[t][i]={font:e,group:r,replace:n},a&&n&&(zr[t][n]=zr[t][i])}l(F,"defineSymbol");var U="math",We="text",Z="main",ye="ams",Yr="accent-token",yt="bin",Ai="close",$t="mathord",Tn="op-token",xa="open",be="rel",Se="textord";F(U,Z,be,"","\\equiv",!0),F(U,Z,be,"","\\prec",!0),F(U,Z,be,"","\\succ",!0),F(U,Z,be,"","\\sim",!0),F(U,Z,be,"","\\perp"),F(U,Z,be,"","\\preceq",!0),F(U,Z,be,"","\\succeq",!0),F(U,Z,be,"","\\simeq",!0),F(U,Z,be,"","\\mid",!0),F(U,Z,be,"","\\ll",!0),F(U,Z,be,"","\\gg",!0),F(U,Z,be,"","\\asymp",!0),F(U,Z,be,"","\\parallel"),F(U,Z,be,"","\\bowtie",!0),F(U,Z,be,"","\\smile",!0),F(U,Z,be,"","\\sqsubseteq",!0),F(U,Z,be,"","\\sqsupseteq",!0),F(U,Z,be,"","\\doteq",!0),F(U,Z,be,"","\\frown",!0),F(U,Z,be,"","\\ni",!0),F(U,Z,be,"","\\propto",!0),F(U,Z,be,"","\\vdash",!0),F(U,Z,be,"","\\dashv",!0),F(U,Z,be,"","\\owns"),F(U,Z,"punct",".","\\ldotp"),F(U,Z,"punct","","\\cdotp"),F(U,Z,Se,"#","\\#"),F(We,Z,Se,"#","\\#"),F(U,Z,Se,"&","\\&"),F(We,Z,Se,"&","\\&"),F(U,Z,Se,"","\\aleph",!0),F(U,Z,Se,"","\\forall",!0),F(U,Z,Se,"","\\hbar",!0),F(U,Z,Se,"","\\exists",!0),F(U,Z,Se,"","\\nabla",!0),F(U,Z,Se,"","\\flat",!0),F(U,Z,Se,"","\\ell",!0),F(U,Z,Se,"","\\natural",!0),F(U,Z,Se,"","\\clubsuit",!0),F(U,Z,Se,"","\\wp",!0),F(U,Z,Se,"","\\sharp",!0),F(U,Z,Se,"","\\diamondsuit",!0),F(U,Z,Se,"","\\Re",!0),F(U,Z,Se,"","\\heartsuit",!0),F(U,Z,Se,"","\\Im",!0),F(U,Z,Se,"","\\spadesuit",!0),F(U,Z,Se,"","\\S",!0),F(We,Z,Se,"","\\S"),F(U,Z,Se,"","\\P",!0),F(We,Z,Se,"","\\P"),F(U,Z,Se,"","\\dag"),F(We,Z,Se,"","\\dag"),F(We,Z,Se,"","\\textdagger"),F(U,Z,Se,"","\\ddag"),F(We,Z,Se,"","\\ddag"),F(We,Z,Se,"","\\textdaggerdbl"),F(U,Z,Ai,"","\\rmoustache",!0),F(U,Z,xa,"","\\lmoustache",!0),F(U,Z,Ai,"","\\rgroup",!0),F(U,Z,xa,"","\\lgroup",!0),F(U,Z,yt,"","\\mp",!0),F(U,Z,yt,"","\\ominus",!0),F(U,Z,yt,"","\\uplus",!0),F(U,Z,yt,"","\\sqcap",!0),F(U,Z,yt,"","\\ast"),F(U,Z,yt,"","\\sqcup",!0),F(U,Z,yt,"","\\bigcirc",!0),F(U,Z,yt,"","\\bullet",!0),F(U,Z,yt,"","\\ddagger"),F(U,Z,yt,"","\\wr",!0),F(U,Z,yt,"","\\amalg"),F(U,Z,yt,"&","\\And"),F(U,Z,be,"","\\longleftarrow",!0),F(U,Z,be,"","\\Leftarrow",!0),F(U,Z,be,"","\\Longleftarrow",!0),F(U,Z,be,"","\\longrightarrow",!0),F(U,Z,be,"","\\Rightarrow",!0),F(U,Z,be,"","\\Longrightarrow",!0),F(U,Z,be,"","\\leftrightarrow",!0),F(U,Z,be,"","\\longleftrightarrow",!0),F(U,Z,be,"","\\Leftrightarrow",!0),F(U,Z,be,"","\\Longleftrightarrow",!0),F(U,Z,be,"","\\mapsto",!0),F(U,Z,be,"","\\longmapsto",!0),F(U,Z,be,"","\\nearrow",!0),F(U,Z,be,"","\\hookleftarrow",!0),F(U,Z,be,"","\\hookrightarrow",!0),F(U,Z,be,"","\\searrow",!0),F(U,Z,be,"","\\leftharpoonup",!0),F(U,Z,be,"","\\rightharpoonup",!0),F(U,Z,be,"","\\swarrow",!0),F(U,Z,be,"","\\leftharpoondown",!0),F(U,Z,be,"","\\rightharpoondown",!0),F(U,Z,be,"","\\nwarrow",!0),F(U,Z,be,"","\\rightleftharpoons",!0),F(U,ye,be,"","\\nless",!0),F(U,ye,be,"","\\@nleqslant"),F(U,ye,be,"","\\@nleqq"),F(U,ye,be,"","\\lneq",!0),F(U,ye,be,"","\\lneqq",!0),F(U,ye,be,"","\\@lvertneqq"),F(U,ye,be,"","\\lnsim",!0),F(U,ye,be,"","\\lnapprox",!0),F(U,ye,be,"","\\nprec",!0),F(U,ye,be,"","\\npreceq",!0),F(U,ye,be,"","\\precnsim",!0),F(U,ye,be,"","\\precnapprox",!0),F(U,ye,be,"","\\nsim",!0),F(U,ye,be,"","\\@nshortmid"),F(U,ye,be,"","\\nmid",!0),F(U,ye,be,"","\\nvdash",!0),F(U,ye,be,"","\\nvDash",!0),F(U,ye,be,"","\\ntriangleleft"),F(U,ye,be,"","\\ntrianglelefteq",!0),F(U,ye,be,"","\\subsetneq",!0),F(U,ye,be,"","\\@varsubsetneq"),F(U,ye,be,"","\\subsetneqq",!0),F(U,ye,be,"","\\@varsubsetneqq"),F(U,ye,be,"","\\ngtr",!0),F(U,ye,be,"","\\@ngeqslant"),F(U,ye,be,"","\\@ngeqq"),F(U,ye,be,"","\\gneq",!0),F(U,ye,be,"","\\gneqq",!0),F(U,ye,be,"","\\@gvertneqq"),F(U,ye,be,"","\\gnsim",!0),F(U,ye,be,"","\\gnapprox",!0),F(U,ye,be,"","\\nsucc",!0),F(U,ye,be,"","\\nsucceq",!0),F(U,ye,be,"","\\succnsim",!0),F(U,ye,be,"","\\succnapprox",!0),F(U,ye,be,"","\\ncong",!0),F(U,ye,be,"","\\@nshortparallel"),F(U,ye,be,"","\\nparallel",!0),F(U,ye,be,"","\\nVDash",!0),F(U,ye,be,"","\\ntriangleright"),F(U,ye,be,"","\\ntrianglerighteq",!0),F(U,ye,be,"","\\@nsupseteqq"),F(U,ye,be,"","\\supsetneq",!0),F(U,ye,be,"","\\@varsupsetneq"),F(U,ye,be,"","\\supsetneqq",!0),F(U,ye,be,"","\\@varsupsetneqq"),F(U,ye,be,"","\\nVdash",!0),F(U,ye,be,"","\\precneqq",!0),F(U,ye,be,"","\\succneqq",!0),F(U,ye,be,"","\\@nsubseteqq"),F(U,ye,yt,"","\\unlhd"),F(U,ye,yt,"","\\unrhd"),F(U,ye,be,"","\\nleftarrow",!0),F(U,ye,be,"","\\nrightarrow",!0),F(U,ye,be,"","\\nLeftarrow",!0),F(U,ye,be,"","\\nRightarrow",!0),F(U,ye,be,"","\\nleftrightarrow",!0),F(U,ye,be,"","\\nLeftrightarrow",!0),F(U,ye,be,"","\\vartriangle"),F(U,ye,Se,"","\\hslash"),F(U,ye,Se,"","\\triangledown"),F(U,ye,Se,"","\\lozenge"),F(U,ye,Se,"","\\circledS"),F(U,ye,Se,"","\\circledR"),F(We,ye,Se,"","\\circledR"),F(U,ye,Se,"","\\measuredangle",!0),F(U,ye,Se,"","\\nexists"),F(U,ye,Se,"","\\mho"),F(U,ye,Se,"","\\Finv",!0),F(U,ye,Se,"","\\Game",!0),F(U,ye,Se,"","\\backprime"),F(U,ye,Se,"","\\blacktriangle"),F(U,ye,Se,"","\\blacktriangledown"),F(U,ye,Se,"","\\blacksquare"),F(U,ye,Se,"","\\blacklozenge"),F(U,ye,Se,"","\\bigstar"),F(U,ye,Se,"","\\sphericalangle",!0),F(U,ye,Se,"","\\complement",!0),F(U,ye,Se,"","\\eth",!0),F(We,Z,Se,"",""),F(U,ye,Se,"","\\diagup"),F(U,ye,Se,"","\\diagdown"),F(U,ye,Se,"","\\square"),F(U,ye,Se,"","\\Box"),F(U,ye,Se,"","\\Diamond"),F(U,ye,Se,"","\\yen",!0),F(We,ye,Se,"","\\yen",!0),F(U,ye,Se,"","\\checkmark",!0),F(We,ye,Se,"","\\checkmark"),F(U,ye,Se,"","\\beth",!0),F(U,ye,Se,"","\\daleth",!0),F(U,ye,Se,"","\\gimel",!0),F(U,ye,Se,"","\\digamma",!0),F(U,ye,Se,"","\\varkappa"),F(U,ye,xa,"","\\@ulcorner",!0),F(U,ye,Ai,"","\\@urcorner",!0),F(U,ye,xa,"","\\@llcorner",!0),F(U,ye,Ai,"","\\@lrcorner",!0),F(U,ye,be,"","\\leqq",!0),F(U,ye,be,"","\\leqslant",!0),F(U,ye,be,"","\\eqslantless",!0),F(U,ye,be,"","\\lesssim",!0),F(U,ye,be,"","\\lessapprox",!0),F(U,ye,be,"","\\approxeq",!0),F(U,ye,yt,"","\\lessdot"),F(U,ye,be,"","\\lll",!0),F(U,ye,be,"","\\lessgtr",!0),F(U,ye,be,"","\\lesseqgtr",!0),F(U,ye,be,"","\\lesseqqgtr",!0),F(U,ye,be,"","\\doteqdot"),F(U,ye,be,"","\\risingdotseq",!0),F(U,ye,be,"","\\fallingdotseq",!0),F(U,ye,be,"","\\backsim",!0),F(U,ye,be,"","\\backsimeq",!0),F(U,ye,be,"","\\subseteqq",!0),F(U,ye,be,"","\\Subset",!0),F(U,ye,be,"","\\sqsubset",!0),F(U,ye,be,"","\\preccurlyeq",!0),F(U,ye,be,"","\\curlyeqprec",!0),F(U,ye,be,"","\\precsim",!0),F(U,ye,be,"","\\precapprox",!0),F(U,ye,be,"","\\vartriangleleft"),F(U,ye,be,"","\\trianglelefteq"),F(U,ye,be,"","\\vDash",!0),F(U,ye,be,"","\\Vvdash",!0),F(U,ye,be,"","\\smallsmile"),F(U,ye,be,"","\\smallfrown"),F(U,ye,be,"","\\bumpeq",!0),F(U,ye,be,"","\\Bumpeq",!0),F(U,ye,be,"","\\geqq",!0),F(U,ye,be,"","\\geqslant",!0),F(U,ye,be,"","\\eqslantgtr",!0),F(U,ye,be,"","\\gtrsim",!0),F(U,ye,be,"","\\gtrapprox",!0),F(U,ye,yt,"","\\gtrdot"),F(U,ye,be,"","\\ggg",!0),F(U,ye,be,"","\\gtrless",!0),F(U,ye,be,"","\\gtreqless",!0),F(U,ye,be,"","\\gtreqqless",!0),F(U,ye,be,"","\\eqcirc",!0),F(U,ye,be,"","\\circeq",!0),F(U,ye,be,"","\\triangleq",!0),F(U,ye,be,"","\\thicksim"),F(U,ye,be,"","\\thickapprox"),F(U,ye,be,"","\\supseteqq",!0),F(U,ye,be,"","\\Supset",!0),F(U,ye,be,"","\\sqsupset",!0),F(U,ye,be,"","\\succcurlyeq",!0),F(U,ye,be,"","\\curlyeqsucc",!0),F(U,ye,be,"","\\succsim",!0),F(U,ye,be,"","\\succapprox",!0),F(U,ye,be,"","\\vartriangleright"),F(U,ye,be,"","\\trianglerighteq"),F(U,ye,be,"","\\Vdash",!0),F(U,ye,be,"","\\shortmid"),F(U,ye,be,"","\\shortparallel"),F(U,ye,be,"","\\between",!0),F(U,ye,be,"","\\pitchfork",!0),F(U,ye,be,"","\\varpropto"),F(U,ye,be,"","\\blacktriangleleft"),F(U,ye,be,"","\\therefore",!0),F(U,ye,be,"","\\backepsilon"),F(U,ye,be,"","\\blacktriangleright"),F(U,ye,be,"","\\because",!0),F(U,ye,be,"","\\llless"),F(U,ye,be,"","\\gggtr"),F(U,ye,yt,"","\\lhd"),F(U,ye,yt,"","\\rhd"),F(U,ye,be,"","\\eqsim",!0),F(U,Z,be,"","\\Join"),F(U,ye,be,"","\\Doteq",!0),F(U,ye,yt,"","\\dotplus",!0),F(U,ye,yt,"","\\smallsetminus"),F(U,ye,yt,"","\\Cap",!0),F(U,ye,yt,"","\\Cup",!0),F(U,ye,yt,"","\\doublebarwedge",!0),F(U,ye,yt,"","\\boxminus",!0),F(U,ye,yt,"","\\boxplus",!0),F(U,ye,yt,"","\\divideontimes",!0),F(U,ye,yt,"","\\ltimes",!0),F(U,ye,yt,"","\\rtimes",!0),F(U,ye,yt,"","\\leftthreetimes",!0),F(U,ye,yt,"","\\rightthreetimes",!0),F(U,ye,yt,"","\\curlywedge",!0),F(U,ye,yt,"","\\curlyvee",!0),F(U,ye,yt,"","\\circleddash",!0),F(U,ye,yt,"","\\circledast",!0),F(U,ye,yt,"","\\centerdot"),F(U,ye,yt,"","\\intercal",!0),F(U,ye,yt,"","\\doublecap"),F(U,ye,yt,"","\\doublecup"),F(U,ye,yt,"","\\boxtimes",!0),F(U,ye,be,"","\\dashrightarrow",!0),F(U,ye,be,"","\\dashleftarrow",!0),F(U,ye,be,"","\\leftleftarrows",!0),F(U,ye,be,"","\\leftrightarrows",!0),F(U,ye,be,"","\\Lleftarrow",!0),F(U,ye,be,"","\\twoheadleftarrow",!0),F(U,ye,be,"","\\leftarrowtail",!0),F(U,ye,be,"","\\looparrowleft",!0),F(U,ye,be,"","\\leftrightharpoons",!0),F(U,ye,be,"","\\curvearrowleft",!0),F(U,ye,be,"","\\circlearrowleft",!0),F(U,ye,be,"","\\Lsh",!0),F(U,ye,be,"","\\upuparrows",!0),F(U,ye,be,"","\\upharpoonleft",!0),F(U,ye,be,"","\\downharpoonleft",!0),F(U,Z,be,"","\\origof",!0),F(U,Z,be,"","\\imageof",!0),F(U,ye,be,"","\\multimap",!0),F(U,ye,be,"","\\leftrightsquigarrow",!0),F(U,ye,be,"","\\rightrightarrows",!0),F(U,ye,be,"","\\rightleftarrows",!0),F(U,ye,be,"","\\twoheadrightarrow",!0),F(U,ye,be,"","\\rightarrowtail",!0),F(U,ye,be,"","\\looparrowright",!0),F(U,ye,be,"","\\curvearrowright",!0),F(U,ye,be,"","\\circlearrowright",!0),F(U,ye,be,"","\\Rsh",!0),F(U,ye,be,"","\\downdownarrows",!0),F(U,ye,be,"","\\upharpoonright",!0),F(U,ye,be,"","\\downharpoonright",!0),F(U,ye,be,"","\\rightsquigarrow",!0),F(U,ye,be,"","\\leadsto"),F(U,ye,be,"","\\Rrightarrow",!0),F(U,ye,be,"","\\restriction"),F(U,Z,Se,"","`"),F(U,Z,Se,"$","\\$"),F(We,Z,Se,"$","\\$"),F(We,Z,Se,"$","\\textdollar"),F(U,Z,Se,"%","\\%"),F(We,Z,Se,"%","\\%"),F(U,Z,Se,"_","\\_"),F(We,Z,Se,"_","\\_"),F(We,Z,Se,"_","\\textunderscore"),F(U,Z,Se,"","\\angle",!0),F(U,Z,Se,"","\\infty",!0),F(U,Z,Se,"","\\prime"),F(U,Z,Se,"","\\triangle"),F(U,Z,Se,"","\\Gamma",!0),F(U,Z,Se,"","\\Delta",!0),F(U,Z,Se,"","\\Theta",!0),F(U,Z,Se,"","\\Lambda",!0),F(U,Z,Se,"","\\Xi",!0),F(U,Z,Se,"","\\Pi",!0),F(U,Z,Se,"","\\Sigma",!0),F(U,Z,Se,"","\\Upsilon",!0),F(U,Z,Se,"","\\Phi",!0),F(U,Z,Se,"","\\Psi",!0),F(U,Z,Se,"","\\Omega",!0),F(U,Z,Se,"A",""),F(U,Z,Se,"B",""),F(U,Z,Se,"E",""),F(U,Z,Se,"Z",""),F(U,Z,Se,"H",""),F(U,Z,Se,"I",""),F(U,Z,Se,"K",""),F(U,Z,Se,"M",""),F(U,Z,Se,"N",""),F(U,Z,Se,"O",""),F(U,Z,Se,"P",""),F(U,Z,Se,"T",""),F(U,Z,Se,"X",""),F(U,Z,Se,"","\\neg",!0),F(U,Z,Se,"","\\lnot"),F(U,Z,Se,"","\\top"),F(U,Z,Se,"","\\bot"),F(U,Z,Se,"","\\emptyset"),F(U,ye,Se,"","\\varnothing"),F(U,Z,$t,"","\\alpha",!0),F(U,Z,$t,"","\\beta",!0),F(U,Z,$t,"","\\gamma",!0),F(U,Z,$t,"","\\delta",!0),F(U,Z,$t,"","\\epsilon",!0),F(U,Z,$t,"","\\zeta",!0),F(U,Z,$t,"","\\eta",!0),F(U,Z,$t,"","\\theta",!0),F(U,Z,$t,"","\\iota",!0),F(U,Z,$t,"","\\kappa",!0),F(U,Z,$t,"","\\lambda",!0),F(U,Z,$t,"","\\mu",!0),F(U,Z,$t,"","\\nu",!0),F(U,Z,$t,"","\\xi",!0),F(U,Z,$t,"","\\omicron",!0),F(U,Z,$t,"","\\pi",!0),F(U,Z,$t,"","\\rho",!0),F(U,Z,$t,"","\\sigma",!0),F(U,Z,$t,"","\\tau",!0),F(U,Z,$t,"","\\upsilon",!0),F(U,Z,$t,"","\\phi",!0),F(U,Z,$t,"","\\chi",!0),F(U,Z,$t,"","\\psi",!0),F(U,Z,$t,"","\\omega",!0),F(U,Z,$t,"","\\varepsilon",!0),F(U,Z,$t,"","\\vartheta",!0),F(U,Z,$t,"","\\varpi",!0),F(U,Z,$t,"","\\varrho",!0),F(U,Z,$t,"","\\varsigma",!0),F(U,Z,$t,"","\\varphi",!0),F(U,Z,yt,"","*",!0),F(U,Z,yt,"+","+"),F(U,Z,yt,"","-",!0),F(U,Z,yt,"","\\cdot",!0),F(U,Z,yt,"","\\circ",!0),F(U,Z,yt,"","\\div",!0),F(U,Z,yt,"","\\pm",!0),F(U,Z,yt,"","\\times",!0),F(U,Z,yt,"","\\cap",!0),F(U,Z,yt,"","\\cup",!0),F(U,Z,yt,"","\\setminus",!0),F(U,Z,yt,"","\\land"),F(U,Z,yt,"","\\lor"),F(U,Z,yt,"","\\wedge",!0),F(U,Z,yt,"","\\vee",!0),F(U,Z,Se,"","\\surd"),F(U,Z,xa,"","\\langle",!0),F(U,Z,xa,"","\\lvert"),F(U,Z,xa,"","\\lVert"),F(U,Z,Ai,"?","?"),F(U,Z,Ai,"!","!"),F(U,Z,Ai,"","\\rangle",!0),F(U,Z,Ai,"","\\rvert"),F(U,Z,Ai,"","\\rVert"),F(U,Z,be,"=","="),F(U,Z,be,":",":"),F(U,Z,be,"","\\approx",!0),F(U,Z,be,"","\\cong",!0),F(U,Z,be,"","\\ge"),F(U,Z,be,"","\\geq",!0),F(U,Z,be,"","\\gets"),F(U,Z,be,">","\\gt",!0),F(U,Z,be,"","\\in",!0),F(U,Z,be,"","\\@not"),F(U,Z,be,"","\\subset",!0),F(U,Z,be,"","\\supset",!0),F(U,Z,be,"","\\subseteq",!0),F(U,Z,be,"","\\supseteq",!0),F(U,ye,be,"","\\nsubseteq",!0),F(U,ye,be,"","\\nsupseteq",!0),F(U,Z,be,"","\\models"),F(U,Z,be,"","\\leftarrow",!0),F(U,Z,be,"","\\le"),F(U,Z,be,"","\\leq",!0),F(U,Z,be,"<","\\lt",!0),F(U,Z,be,"","\\rightarrow",!0),F(U,Z,be,"","\\to"),F(U,ye,be,"","\\ngeq",!0),F(U,ye,be,"","\\nleq",!0),F(U,Z,"spacing","","\\ "),F(U,Z,"spacing","","\\space"),F(U,Z,"spacing","","\\nobreakspace"),F(We,Z,"spacing","","\\ "),F(We,Z,"spacing",""," "),F(We,Z,"spacing","","\\space"),F(We,Z,"spacing","","\\nobreakspace"),F(U,Z,"spacing",null,"\\nobreak"),F(U,Z,"spacing",null,"\\allowbreak"),F(U,Z,"punct",",",","),F(U,Z,"punct",";",";"),F(U,ye,yt,"","\\barwedge",!0),F(U,ye,yt,"","\\veebar",!0),F(U,Z,yt,"","\\odot",!0),F(U,Z,yt,"","\\oplus",!0),F(U,Z,yt,"","\\otimes",!0),F(U,Z,Se,"","\\partial",!0),F(U,Z,yt,"","\\oslash",!0),F(U,ye,yt,"","\\circledcirc",!0),F(U,ye,yt,"","\\boxdot",!0),F(U,Z,yt,"","\\bigtriangleup"),F(U,Z,yt,"","\\bigtriangledown"),F(U,Z,yt,"","\\dagger"),F(U,Z,yt,"","\\diamond"),F(U,Z,yt,"","\\star"),F(U,Z,yt,"","\\triangleleft"),F(U,Z,yt,"","\\triangleright"),F(U,Z,xa,"{","\\{"),F(We,Z,Se,"{","\\{"),F(We,Z,Se,"{","\\textbraceleft"),F(U,Z,Ai,"}","\\}"),F(We,Z,Se,"}","\\}"),F(We,Z,Se,"}","\\textbraceright"),F(U,Z,xa,"{","\\lbrace"),F(U,Z,Ai,"}","\\rbrace"),F(U,Z,xa,"[","\\lbrack",!0),F(We,Z,Se,"[","\\lbrack",!0),F(U,Z,Ai,"]","\\rbrack",!0),F(We,Z,Se,"]","\\rbrack",!0),F(U,Z,xa,"(","\\lparen",!0),F(U,Z,Ai,")","\\rparen",!0),F(We,Z,Se,"<","\\textless",!0),F(We,Z,Se,">","\\textgreater",!0),F(U,Z,xa,"","\\lfloor",!0),F(U,Z,Ai,"","\\rfloor",!0),F(U,Z,xa,"","\\lceil",!0),F(U,Z,Ai,"","\\rceil",!0),F(U,Z,Se,"\\","\\backslash"),F(U,Z,Se,"","|"),F(U,Z,Se,"","\\vert"),F(We,Z,Se,"|","\\textbar",!0),F(U,Z,Se,"","\\|"),F(U,Z,Se,"","\\Vert"),F(We,Z,Se,"","\\textbardbl"),F(We,Z,Se,"~","\\textasciitilde"),F(We,Z,Se,"\\","\\textbackslash"),F(We,Z,Se,"^","\\textasciicircum"),F(U,Z,be,"","\\uparrow",!0),F(U,Z,be,"","\\Uparrow",!0),F(U,Z,be,"","\\downarrow",!0),F(U,Z,be,"","\\Downarrow",!0),F(U,Z,be,"","\\updownarrow",!0),F(U,Z,be,"","\\Updownarrow",!0),F(U,Z,Tn,"","\\coprod"),F(U,Z,Tn,"","\\bigvee"),F(U,Z,Tn,"","\\bigwedge"),F(U,Z,Tn,"","\\biguplus"),F(U,Z,Tn,"","\\bigcap"),F(U,Z,Tn,"","\\bigcup"),F(U,Z,Tn,"","\\int"),F(U,Z,Tn,"","\\intop"),F(U,Z,Tn,"","\\iint"),F(U,Z,Tn,"","\\iiint"),F(U,Z,Tn,"","\\prod"),F(U,Z,Tn,"","\\sum"),F(U,Z,Tn,"","\\bigotimes"),F(U,Z,Tn,"","\\bigoplus"),F(U,Z,Tn,"","\\bigodot"),F(U,Z,Tn,"","\\oint"),F(U,Z,Tn,"","\\oiint"),F(U,Z,Tn,"","\\oiiint"),F(U,Z,Tn,"","\\bigsqcup"),F(U,Z,Tn,"","\\smallint"),F(We,Z,"inner","","\\textellipsis"),F(U,Z,"inner","","\\mathellipsis"),F(We,Z,"inner","","\\ldots",!0),F(U,Z,"inner","","\\ldots",!0),F(U,Z,"inner","","\\@cdots",!0),F(U,Z,"inner","","\\ddots",!0),F(U,Z,Se,"","\\varvdots"),F(U,Z,Yr,"","\\acute"),F(U,Z,Yr,"","\\grave"),F(U,Z,Yr,"","\\ddot"),F(U,Z,Yr,"~","\\tilde"),F(U,Z,Yr,"","\\bar"),F(U,Z,Yr,"","\\breve"),F(U,Z,Yr,"","\\check"),F(U,Z,Yr,"^","\\hat"),F(U,Z,Yr,"","\\vec"),F(U,Z,Yr,"","\\dot"),F(U,Z,Yr,"","\\mathring"),F(U,Z,$t,"","\\@imath"),F(U,Z,$t,"","\\@jmath"),F(U,Z,Se,"",""),F(U,Z,Se,"",""),F(We,Z,Se,"","\\i",!0),F(We,Z,Se,"","\\j",!0),F(We,Z,Se,"","\\ss",!0),F(We,Z,Se,"","\\ae",!0),F(We,Z,Se,"","\\oe",!0),F(We,Z,Se,"","\\o",!0),F(We,Z,Se,"","\\AE",!0),F(We,Z,Se,"","\\OE",!0),F(We,Z,Se,"","\\O",!0),F(We,Z,Yr,"","\\'"),F(We,Z,Yr,"","\\`"),F(We,Z,Yr,"","\\^"),F(We,Z,Yr,"","\\~"),F(We,Z,Yr,"","\\="),F(We,Z,Yr,"","\\u"),F(We,Z,Yr,"","\\."),F(We,Z,Yr,"","\\c"),F(We,Z,Yr,"","\\r"),F(We,Z,Yr,"","\\v"),F(We,Z,Yr,"",'\\"'),F(We,Z,Yr,"","\\H"),F(We,Z,Yr,"","\\textcircled");var IX={"--":!0,"---":!0,"``":!0,"''":!0};F(We,Z,Se,"","--",!0),F(We,Z,Se,"","\\textendash"),F(We,Z,Se,"","---",!0),F(We,Z,Se,"","\\textemdash"),F(We,Z,Se,"","`",!0),F(We,Z,Se,"","\\textquoteleft"),F(We,Z,Se,"","'",!0),F(We,Z,Se,"","\\textquoteright"),F(We,Z,Se,"","``",!0),F(We,Z,Se,"","\\textquotedblleft"),F(We,Z,Se,"","''",!0),F(We,Z,Se,"","\\textquotedblright"),F(U,Z,Se,"","\\degree",!0),F(We,Z,Se,"","\\degree"),F(We,Z,Se,"","\\textdegree",!0),F(U,Z,Se,"","\\pounds"),F(U,Z,Se,"","\\mathsterling",!0),F(We,Z,Se,"","\\pounds"),F(We,Z,Se,"","\\textsterling",!0),F(U,ye,Se,"","\\maltese"),F(We,ye,Se,"","\\maltese");var XR,Ex;for(Ex=0;Ex<14;Ex++)F(U,Z,Se,XR='0123456789/@."'.charAt(Ex),XR);var KR,_x;for(_x=0;_x<25;_x++)F(We,Z,Se,KR='0123456789!@*()-=+";:?/.,'.charAt(_x),KR);var Cx,Sx,c5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(Sx=0;Sx<c5.length;Sx++)F(U,Z,$t,Cx=c5.charAt(Sx),Cx),F(We,Z,Se,Cx,Cx);F(U,ye,Se,"C",""),F(We,ye,Se,"C",""),F(U,ye,Se,"H",""),F(We,ye,Se,"H",""),F(U,ye,Se,"N",""),F(We,ye,Se,"N",""),F(U,ye,Se,"P",""),F(We,ye,Se,"P",""),F(U,ye,Se,"Q",""),F(We,ye,Se,"Q",""),F(U,ye,Se,"R",""),F(We,ye,Se,"R",""),F(U,ye,Se,"Z",""),F(We,ye,Se,"Z",""),F(U,Z,$t,"h",""),F(We,Z,$t,"h","");var an,fi,dl,pl,fr="";for(fi=0;fi<c5.length;fi++)F(U,Z,$t,an=c5.charAt(fi),fr=String.fromCharCode(55349,56320+fi)),F(We,Z,Se,an,fr),F(U,Z,$t,an,fr=String.fromCharCode(55349,56372+fi)),F(We,Z,Se,an,fr),F(U,Z,$t,an,fr=String.fromCharCode(55349,56424+fi)),F(We,Z,Se,an,fr),F(U,Z,$t,an,fr=String.fromCharCode(55349,56580+fi)),F(We,Z,Se,an,fr),F(U,Z,$t,an,fr=String.fromCharCode(55349,56684+fi)),F(We,Z,Se,an,fr),F(U,Z,$t,an,fr=String.fromCharCode(55349,56736+fi)),F(We,Z,Se,an,fr),F(U,Z,$t,an,fr=String.fromCharCode(55349,56788+fi)),F(We,Z,Se,an,fr),F(U,Z,$t,an,fr=String.fromCharCode(55349,56840+fi)),F(We,Z,Se,an,fr),F(U,Z,$t,an,fr=String.fromCharCode(55349,56944+fi)),F(We,Z,Se,an,fr),fi<26&&(F(U,Z,$t,an,fr=String.fromCharCode(55349,56632+fi)),F(We,Z,Se,an,fr),F(U,Z,$t,an,fr=String.fromCharCode(55349,56476+fi)),F(We,Z,Se,an,fr));for(F(U,Z,$t,"k",fr=""),F(We,Z,Se,"k",fr),pl=0;pl<10;pl++)F(U,Z,$t,dl=pl.toString(),fr=String.fromCharCode(55349,57294+pl)),F(We,Z,Se,dl,fr),F(U,Z,$t,dl,fr=String.fromCharCode(55349,57314+pl)),F(We,Z,Se,dl,fr),F(U,Z,$t,dl,fr=String.fromCharCode(55349,57324+pl)),F(We,Z,Se,dl,fr),F(U,Z,$t,dl,fr=String.fromCharCode(55349,57334+pl)),F(We,Z,Se,dl,fr);var Ax,Lx;for(Lx=0;Lx<3;Lx++)F(U,Z,$t,Ax="".charAt(Lx),Ax),F(We,Z,Se,Ax,Ax);var Nx=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],ZR=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Z0e=l((function(t,e){var r=1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536,n=e==="math"?0:1;if(119808<=r&&r<120484){var i=Math.floor((r-119808)/26);return[Nx[i][2],Nx[i][n]]}if(120782<=r&&r<=120831){var a=Math.floor((r-120782)/10);return[ZR[a][2],ZR[a][n]]}if(r===120485||r===120486)return[Nx[0][2],Nx[0][n]];if(120486<r&&r<120782)return["",""];throw new tt("Unsupported character: "+t)}),"wideCharacterFont"),ew=l((function(t,e,r){return zr[r][t]&&zr[r][t].replace&&(t=zr[r][t].replace),{value:t,metrics:J6(t,e,r)}}),"lookupSymbol"),ds=l((function(t,e,r,n,i){var a,s=ew(t,e,r),o=s.metrics;if(t=s.value,o){var u=o.italic;(r==="text"||n&&n.font==="mathit")&&(u=0),a=new ns(t,o.height,o.depth,u,o.skew,o.width,i)}else typeof console<"u"&&console.warn("No character metrics for '"+t+"' in style '"+e+"' and mode '"+r+"'"),a=new ns(t,0,0,0,0,0,i);if(n){a.maxFontSize=n.sizeMultiplier,n.style.isTight()&&a.classes.push("mtight");var h=n.getColor();h&&(a.style.color=h)}return a}),"makeSymbol"),Q0e=l((function(t,e,r,n){return n===void 0&&(n=[]),r.font==="boldsymbol"&&ew(t,"Main-Bold",e).metrics?ds(t,"Main-Bold",e,r,n.concat(["mathbf"])):t==="\\"||zr[e][t].font==="main"?ds(t,"Main-Regular",e,r,n):ds(t,"AMS-Regular",e,r,n.concat(["amsrm"]))}),"mathsym"),J0e=l((function(t,e,r,n,i){return i!=="textord"&&ew(t,"Math-BoldItalic",e).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}}),"boldsymbol"),eme=l((function(t,e,r){var n=t.mode,i=t.text,a=["mord"],s=n==="math"||n==="text"&&e.font,o=s?e.font:e.fontFamily,u="",h="";if(i.charCodeAt(0)===55349&&([u,h]=Z0e(i,n)),u.length>0)return ds(i,u,n,e,a.concat(h));if(o){var d,p;if(o==="boldsymbol"){var f=J0e(i,n,e,a,r);d=f.fontName,p=[f.fontClass]}else s?(d=DX[o].fontName,p=[o]):(d=Ix(o,e.fontWeight,e.fontShape),p=[o,e.fontWeight,e.fontShape]);if(ew(i,d,n).metrics)return ds(i,d,n,e,a.concat(p));if(IX.hasOwnProperty(i)&&d.slice(0,10)==="Typewriter"){for(var g=[],m=0;m<i.length;m++)g.push(ds(i[m],d,n,e,a.concat(p)));return MX(g)}}if(r==="mathord")return ds(i,"Math-Italic",n,e,a.concat(["mathnormal"]));if(r==="textord"){var y=zr[n][i]&&zr[n][i].font;if(y==="ams"){var v=Ix("amsrm",e.fontWeight,e.fontShape);return ds(i,v,n,e,a.concat("amsrm",e.fontWeight,e.fontShape))}if(y!=="main"&&y){var x=Ix(y,e.fontWeight,e.fontShape);return ds(i,x,n,e,a.concat(x,e.fontWeight,e.fontShape))}var b=Ix("textrm",e.fontWeight,e.fontShape);return ds(i,b,n,e,a.concat(e.fontWeight,e.fontShape))}throw new Error("unexpected type: "+r+" in makeOrd")}),"makeOrd"),tme=l(((t,e)=>{if(Ql(t.classes)!==Ql(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var r=t.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in t.style)if(t.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;for(var i in e.style)if(e.style.hasOwnProperty(i)&&t.style[i]!==e.style[i])return!1;return!0}),"canCombine"),rme=l((t=>{for(var e=0;e<t.length-1;e++){var r=t[e],n=t[e+1];r instanceof ns&&n instanceof ns&&tme(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,t.splice(e+1,1),e--)}return t}),"tryCombineChars"),oA=l((function(t){for(var e=0,r=0,n=0,i=0;i<t.children.length;i++){var a=t.children[i];a.height>e&&(e=a.height),a.depth>r&&(r=a.depth),a.maxFontSize>n&&(n=a.maxFontSize)}t.height=e,t.depth=r,t.maxFontSize=n}),"sizeElementFromChildren"),Zi=l((function(t,e,r,n){var i=new Iv(t,e,r,n);return oA(i),i}),"makeSpan"),RX=l(((t,e,r,n)=>new Iv(t,e,r,n)),"makeSvgSpan"),nme=l((function(t,e,r){var n=Zi([t],[],e);return n.height=Math.max(r||e.fontMetrics().defaultRuleThickness,e.minRuleThickness),n.style.borderBottomWidth=st(n.height),n.maxFontSize=1,n}),"makeLineSpan"),ime=l((function(t,e,r,n){var i=new sA(t,e,r,n);return oA(i),i}),"makeAnchor"),MX=l((function(t){var e=new Nv(t);return oA(e),e}),"makeFragment"),ame=l((function(t,e){return t instanceof Nv?Zi([],[t],e):t}),"wrapFragment"),sme=l((function(t){if(t.positionType==="individualShift"){for(var e=t.children,r=[e[0]],n=-e[0].shift-e[0].elem.depth,i=n,a=1;a<e.length;a++){var s=-e[a].shift-i-e[a].elem.depth,o=s-(e[a-1].elem.height+e[a-1].elem.depth);i+=s,r.push({type:"kern",size:o}),r.push(e[a])}return{children:r,depth:n}}var u;if(t.positionType==="top"){for(var h=t.positionData,d=0;d<t.children.length;d++){var p=t.children[d];h-=p.type==="kern"?p.size:p.elem.height+p.elem.depth}u=h}else if(t.positionType==="bottom")u=-t.positionData;else{var f=t.children[0];if(f.type!=="elem")throw new Error('First child must have type "elem".');if(t.positionType==="shift")u=-f.elem.depth-t.positionData;else{if(t.positionType!=="firstBaseline")throw new Error("Invalid positionType "+t.positionType+".");u=-f.elem.depth}}return{children:t.children,depth:u}}),"getVListChildrenAndDepth"),ome=l((function(t,e){for(var{children:r,depth:n}=sme(t),i=0,a=0;a<r.length;a++){var s=r[a];if(s.type==="elem"){var o=s.elem;i=Math.max(i,o.maxFontSize,o.height)}}i+=2;var u=Zi(["pstrut"],[]);u.style.height=st(i);for(var h=[],d=n,p=n,f=n,g=0;g<r.length;g++){var m=r[g];if(m.type==="kern")f+=m.size;else{var y=m.elem,v=m.wrapperClasses||[],x=m.wrapperStyle||{},b=Zi(v,[u,y],void 0,x);b.style.top=st(-i-f-y.depth),m.marginLeft&&(b.style.marginLeft=m.marginLeft),m.marginRight&&(b.style.marginRight=m.marginRight),h.push(b),f+=y.height+y.depth}d=Math.min(d,f),p=Math.max(p,f)}var w,T=Zi(["vlist"],h);if(T.style.height=st(p),d<0){var k=Zi([],[]),C=Zi(["vlist"],[k]);C.style.height=st(-d);var E=Zi(["vlist-s"],[new ns("")]);w=[Zi(["vlist-r"],[T,E]),Zi(["vlist-r"],[C])]}else w=[Zi(["vlist-r"],[T])];var _=Zi(["vlist-t"],w);return w.length===2&&_.classes.push("vlist-t2"),_.height=p,_.depth=-d,_}),"makeVList"),lme=l(((t,e)=>{var r=Zi(["mspace"],[],e),n=Qr(t,e);return r.style.marginRight=st(n),r}),"makeGlue"),Ix=l((function(t,e,r){var n="";switch(t){case"amsrm":n="AMS";break;case"textrm":n="Main";break;case"textsf":n="SansSerif";break;case"texttt":n="Typewriter";break;default:n=t}return n+"-"+(e==="textbf"&&r==="textit"?"BoldItalic":e==="textbf"?"Bold":e==="textit"?"Italic":"Regular")}),"retrieveTextFontName"),DX={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},OX={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},cme=l((function(t,e){var[r,n,i]=OX[t],a=new Jl(r),s=new Go([a],{width:st(n),height:st(i),style:"width:"+st(n),viewBox:"0 0 "+1e3*n+" "+1e3*i,preserveAspectRatio:"xMinYMin"}),o=RX(["overlay"],[s],e);return o.height=i,o.style.height=st(i),o.style.width=st(n),o}),"staticSvg"),Me={fontMap:DX,makeSymbol:ds,mathsym:Q0e,makeSpan:Zi,makeSvgSpan:RX,makeLineSpan:nme,makeAnchor:ime,makeFragment:MX,wrapFragment:ame,makeVList:ome,makeOrd:eme,makeGlue:lme,staticSvg:cme,svgData:OX,tryCombineChars:rme},Zr={number:3,unit:"mu"},Tc={number:4,unit:"mu"},mo={number:5,unit:"mu"},ume={mord:{mop:Zr,mbin:Tc,mrel:mo,minner:Zr},mop:{mord:Zr,mop:Zr,mrel:mo,minner:Zr},mbin:{mord:Tc,mop:Tc,mopen:Tc,minner:Tc},mrel:{mord:mo,mop:mo,mopen:mo,minner:mo},mopen:{},mclose:{mop:Zr,mbin:Tc,mrel:mo,minner:Zr},mpunct:{mord:Zr,mop:Zr,mrel:mo,mopen:Zr,mclose:Zr,mpunct:Zr,minner:Zr},minner:{mord:Zr,mop:Zr,mbin:Tc,mrel:mo,mopen:Zr,mpunct:Zr,minner:Zr}},hme={mord:{mop:Zr},mop:{mord:Zr,mop:Zr},mbin:{},mrel:{},mopen:{},mclose:{mop:Zr},mpunct:{},minner:{mop:Zr}},PX={},u5={},h5={};function ft(t){for(var{type:e,names:r,props:n,handler:i,htmlBuilder:a,mathmlBuilder:s}=t,o={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0||n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:i},u=0;u<r.length;++u)PX[r[u]]=o;e&&(a&&(u5[e]=a),s&&(h5[e]=s))}function ec(t){var{type:e,htmlBuilder:r,mathmlBuilder:n}=t;ft({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}l(ft,"defineFunction"),l(ec,"defineFunctionBuilders");var d5=l((function(t){return t.type==="ordgroup"&&t.body.length===1?t.body[0]:t}),"normalizeArgument"),xn=l((function(t){return t.type==="ordgroup"?t.body:[t]}),"ordargument"),Uo=Me.makeSpan,dme=["leftmost","mbin","mopen","mrel","mop","mpunct"],pme=["rightmost","mrel","mclose","mpunct"],fme={display:zt.DISPLAY,text:zt.TEXT,script:zt.SCRIPT,scriptscript:zt.SCRIPTSCRIPT},gme={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Bn=l((function(t,e,r,n){n===void 0&&(n=[null,null]);for(var i=[],a=0;a<t.length;a++){var s=hr(t[a],e);if(s instanceof Nv){var o=s.children;i.push(...o)}else i.push(s)}if(Me.tryCombineChars(i),!r)return i;var u=e;if(t.length===1){var h=t[0];h.type==="sizing"?u=e.havingSize(h.size):h.type==="styling"&&(u=e.havingStyle(fme[h.style]))}var d=Uo([n[0]||"leftmost"],[],e),p=Uo([n[1]||"rightmost"],[],e),f=r==="root";return QR(i,((g,m)=>{var y=m.classes[0],v=g.classes[0];y==="mbin"&&Pt.contains(pme,v)?m.classes[0]="mord":v==="mbin"&&Pt.contains(dme,y)&&(g.classes[0]="mord")}),{node:d},p,f),QR(i,((g,m)=>{var y=I_(m),v=I_(g),x=y&&v?g.hasClass("mtight")?hme[y][v]:ume[y][v]:null;if(x)return Me.makeGlue(x,u)}),{node:d},p,f),i}),"buildExpression"),QR=l((function t(e,r,n,i,a){i&&e.push(i);for(var s=0;s<e.length;s++){var o=e[s],u=BX(o);if(u)t(u.children,r,n,null,a);else{var h=!o.hasClass("mspace");if(h){var d=r(o,n.node);d&&(n.insertAfter?n.insertAfter(d):(e.unshift(d),s++))}h?n.node=o:a&&o.hasClass("newline")&&(n.node=Uo(["leftmost"])),n.insertAfter=(p=>f=>{e.splice(p+1,0,f),s++})(s)}}i&&e.pop()}),"traverseNonSpaceNodes"),BX=l((function(t){return t instanceof Nv||t instanceof sA||t instanceof Iv&&t.hasClass("enclosing")?t:null}),"checkPartialGroup"),mme=l((function t(e,r){var n=BX(e);if(n){var i=n.children;if(i.length){if(r==="right")return t(i[i.length-1],"right");if(r==="left")return t(i[0],"left")}}return e}),"getOutermostNode"),I_=l((function(t,e){return t?(e&&(t=mme(t,e)),gme[t.classes[0]]||null):null}),"getTypeOfDomTree"),zy=l((function(t,e){var r=["nulldelimiter"].concat(t.baseSizingClasses());return Uo(e.concat(r))}),"makeNullDelimiter"),hr=l((function(t,e,r){if(!t)return Uo();if(u5[t.type]){var n=u5[t.type](t,e);if(r&&e.size!==r.size){n=Uo(e.sizingClasses(r),[n],e);var i=e.sizeMultiplier/r.sizeMultiplier;n.height*=i,n.depth*=i}return n}throw new tt("Got group of unknown type: '"+t.type+"'")}),"buildGroup");function ny(t,e){var r=Uo(["base"],t,e),n=Uo(["strut"]);return n.style.height=st(r.height+r.depth),r.depth&&(n.style.verticalAlign=st(-r.depth)),r.children.unshift(n),r}function p5(t,e){var r=null;t.length===1&&t[0].type==="tag"&&(r=t[0].tag,t=t[0].body);var n,i=Bn(t,e,"root");i.length===2&&i[1].hasClass("tag")&&(n=i.pop());for(var a,s=[],o=[],u=0;u<i.length;u++)if(o.push(i[u]),i[u].hasClass("mbin")||i[u].hasClass("mrel")||i[u].hasClass("allowbreak")){for(var h=!1;u<i.length-1&&i[u+1].hasClass("mspace")&&!i[u+1].hasClass("newline");)u++,o.push(i[u]),i[u].hasClass("nobreak")&&(h=!0);h||(s.push(ny(o,e)),o=[])}else i[u].hasClass("newline")&&(o.pop(),o.length>0&&(s.push(ny(o,e)),o=[]),s.push(i[u]));o.length>0&&s.push(ny(o,e)),r?((a=ny(Bn(r,e,!0))).classes=["tag"],s.push(a)):n&&s.push(n);var d=Uo(["katex-html"],s);if(d.setAttribute("aria-hidden","true"),a){var p=a.children[0];p.style.height=st(d.height+d.depth),d.depth&&(p.style.verticalAlign=st(-d.depth))}return d}function lA(t){return new Nv(t)}l(ny,"buildHTMLUnbreakable"),l(p5,"buildHTML"),l(lA,"newDocumentFragment");var Up,ja=(Up=class{constructor(e,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(e,r){this.attributes[e]=r}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);this.classes.length>0&&(e.className=Ql(this.classes));for(var n=0;n<this.children.length;n++)e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="',e+=Pt.escape(this.attributes[r]),e+='"');this.classes.length>0&&(e+=' class ="'+Pt.escape(Ql(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">"}toText(){return this.children.map((e=>e.toText())).join("")}},l(Up,"MathNode"),Up),qp,Gy=(qp=class{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return Pt.escape(this.toText())}toText(){return this.text}},l(qp,"TextNode"),qp),jp,yme=(jp=class{constructor(e){this.width=void 0,this.character=void 0,this.width=e,this.character=e>=.05555&&e<=.05556?"":e>=.1666&&e<=.1667?"":e>=.2222&&e<=.2223?"":e>=.2777&&e<=.2778?"":e>=-.05556&&e<=-.05555?"":e>=-.1667&&e<=-.1666?"":e>=-.2223&&e<=-.2222?"":e>=-.2778&&e<=-.2777?"":null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",st(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+st(this.width)+'"/>'}toText(){return this.character?this.character:" "}},l(jp,"SpaceNode"),jp),Ve={MathNode:ja,TextNode:Gy,SpaceNode:yme,newDocumentFragment:lA},Wa=l((function(t,e,r){return!zr[e][t]||!zr[e][t].replace||t.charCodeAt(0)===55349||IX.hasOwnProperty(t)&&r&&(r.fontFamily&&r.fontFamily.slice(4,6)==="tt"||r.font&&r.font.slice(4,6)==="tt")||(t=zr[e][t].replace),new Ve.TextNode(t)}),"makeText"),cA=l((function(t){return t.length===1?t[0]:new Ve.MathNode("mrow",t)}),"makeRow"),R_=l((function(t,e){if(e.fontFamily==="texttt")return"monospace";if(e.fontFamily==="textsf")return e.fontShape==="textit"&&e.fontWeight==="textbf"?"sans-serif-bold-italic":e.fontShape==="textit"?"sans-serif-italic":e.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(e.fontShape==="textit"&&e.fontWeight==="textbf")return"bold-italic";if(e.fontShape==="textit")return"italic";if(e.fontWeight==="textbf")return"bold";var r=e.font;if(!r||r==="mathnormal")return null;var n=t.mode;if(r==="mathit")return"italic";if(r==="boldsymbol")return t.type==="textord"?"bold":"bold-italic";if(r==="mathbf")return"bold";if(r==="mathbb")return"double-struck";if(r==="mathfrak")return"fraktur";if(r==="mathscr"||r==="mathcal")return"script";if(r==="mathsf")return"sans-serif";if(r==="mathtt")return"monospace";var i=t.text;return Pt.contains(["\\imath","\\jmath"],i)?null:(zr[n][i]&&zr[n][i].replace&&(i=zr[n][i].replace),J6(i,Me.fontMap[r].fontName,n)?Me.fontMap[r].variant:null)}),"getVariant"),aa=l((function(t,e,r){if(t.length===1){var n=Mr(t[0],e);return r&&n instanceof ja&&n.type==="mo"&&(n.setAttribute("lspace","0em"),n.setAttribute("rspace","0em")),[n]}for(var i,a=[],s=0;s<t.length;s++){var o=Mr(t[s],e);if(o instanceof ja&&i instanceof ja){if(o.type==="mtext"&&i.type==="mtext"&&o.getAttribute("mathvariant")===i.getAttribute("mathvariant")){i.children.push(...o.children);continue}if(o.type==="mn"&&i.type==="mn"){i.children.push(...o.children);continue}if(o.type==="mi"&&o.children.length===1&&i.type==="mn"){var u=o.children[0];if(u instanceof Gy&&u.text==="."){i.children.push(...o.children);continue}}else if(i.type==="mi"&&i.children.length===1){var h=i.children[0];if(h instanceof Gy&&h.text===""&&(o.type==="mo"||o.type==="mi"||o.type==="mn")){var d=o.children[0];d instanceof Gy&&d.text.length>0&&(d.text=d.text.slice(0,1)+""+d.text.slice(1),a.pop())}}}a.push(o),i=o}return a}),"buildExpression"),Ul=l((function(t,e,r){return cA(aa(t,e,r))}),"buildExpressionRow"),Mr=l((function(t,e){if(!t)return new Ve.MathNode("mrow");if(h5[t.type])return h5[t.type](t,e);throw new tt("Got group of unknown type: '"+t.type+"'")}),"buildGroup");function M_(t,e,r,n,i){var a,s=aa(t,r);a=s.length===1&&s[0]instanceof ja&&Pt.contains(["mrow","mtable"],s[0].type)?s[0]:new Ve.MathNode("mrow",s);var o=new Ve.MathNode("annotation",[new Ve.TextNode(e)]);o.setAttribute("encoding","application/x-tex");var u=new Ve.MathNode("semantics",[a,o]),h=new Ve.MathNode("math",[u]);h.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&h.setAttribute("display","block");var d=i?"katex":"katex-mathml";return Me.makeSpan([d],[h])}l(M_,"buildMathML");var $X=l((function(t){return new _X({style:t.displayMode?zt.DISPLAY:zt.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})}),"optionsFromSettings"),FX=l((function(t,e){if(e.displayMode){var r=["katex-display"];e.leqno&&r.push("leqno"),e.fleqn&&r.push("fleqn"),t=Me.makeSpan(r,[t])}return t}),"displayWrap"),vme=l((function(t,e,r){var n,i=$X(r);if(r.output==="mathml")return M_(t,e,i,r.displayMode,!0);if(r.output==="html"){var a=p5(t,i);n=Me.makeSpan(["katex"],[a])}else{var s=M_(t,e,i,r.displayMode,!1),o=p5(t,i);n=Me.makeSpan(["katex"],[s,o])}return FX(n,r)}),"buildTree"),xme=l((function(t,e,r){var n=p5(t,$X(r)),i=Me.makeSpan(["katex"],[n]);return FX(i,r)}),"buildHTMLTree"),bme={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},wme=l((function(t){var e=new Ve.MathNode("mo",[new Ve.TextNode(bme[t.replace(/^\\/,"")])]);return e.setAttribute("stretchy","true"),e}),"mathMLnode"),kme={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Tme=l((function(t){return t.type==="ordgroup"?t.body.length:1}),"groupLength"),Eme=l((function(t,e){function r(){var s=4e5,o=t.label.slice(1);if(Pt.contains(["widehat","widecheck","widetilde","utilde"],o)){var u,h,d,p=Tme(t.base);if(p>5)o==="widehat"||o==="widecheck"?(u=420,s=2364,d=.42,h=o+"4"):(u=312,s=2340,d=.34,h="tilde4");else{var f=[1,1,2,2,3,3][p];o==="widehat"||o==="widecheck"?(s=[0,1062,2364,2364,2364][f],u=[0,239,300,360,420][f],d=[0,.24,.3,.3,.36,.42][f],h=o+f):(s=[0,600,1033,2339,2340][f],u=[0,260,286,306,312][f],d=[0,.26,.286,.3,.306,.34][f],h="tilde"+f)}var g=new Jl(h),m=new Go([g],{width:"100%",height:st(d),viewBox:"0 0 "+s+" "+u,preserveAspectRatio:"none"});return{span:Me.makeSvgSpan([],[m],e),minWidth:0,height:d}}var y,v,x=[],b=kme[o],[w,T,k]=b,C=k/1e3,E=w.length;if(E===1)y=["hide-tail"],v=[b[3]];else if(E===2)y=["halfarrow-left","halfarrow-right"],v=["xMinYMin","xMaxYMin"];else{if(E!==3)throw new Error(`Correct katexImagesData or update code here to support
                    `+E+" children.");y=["brace-left","brace-center","brace-right"],v=["xMinYMin","xMidYMin","xMaxYMin"]}for(var _=0;_<E;_++){var S=new Jl(w[_]),N=new Go([S],{width:"400em",height:st(C),viewBox:"0 0 "+s+" "+k,preserveAspectRatio:v[_]+" slice"}),O=Me.makeSvgSpan([y[_]],[N],e);if(E===1)return{span:O,minWidth:T,height:C};O.style.height=st(C),x.push(O)}return{span:Me.makeSpan(["stretchy"],x,e),minWidth:T,height:C}}l(r,"buildSvgSpan_");var{span:n,minWidth:i,height:a}=r();return n.height=a,n.style.height=st(a),i>0&&(n.style.minWidth=st(i)),n}),"svgSpan"),_me=l((function(t,e,r,n,i){var a,s=t.height+t.depth+r+n;if(/fbox|color|angl/.test(e)){if(a=Me.makeSpan(["stretchy",e],[],i),e==="fbox"){var o=i.color&&i.getColor();o&&(a.style.borderColor=o)}}else{var u=[];/^[bx]cancel$/.test(e)&&u.push(new L_({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(e)&&u.push(new L_({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var h=new Go(u,{width:"100%",height:st(s)});a=Me.makeSvgSpan([],[h],i)}return a.height=s,a.style.height=st(s),a}),"encloseSpan"),qo={encloseSpan:_me,mathMLnode:wme,svgSpan:Eme};function Qt(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function f5(t){var e=N2(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function N2(t){return t&&(t.type==="atom"||K0e.hasOwnProperty(t.type))?t:null}l(Qt,"assertNodeType"),l(f5,"assertSymbolNodeType"),l(N2,"checkSymbolNodeType");var D_=l(((t,e)=>{var r,n,i;t&&t.type==="supsub"?(r=(n=Qt(t.base,"accent")).base,t.base=r,i=NX(hr(t,e)),t.base=n):r=(n=Qt(t,"accent")).base;var a=hr(r,e.havingCrampedStyle()),s=0;if(n.isShifty&&Pt.isCharacterBox(r)){var o=Pt.getBaseElem(r);s=N_(hr(o,e.havingCrampedStyle())).skew}var u,h=n.label==="\\c",d=h?a.height+a.depth:Math.min(a.height,e.fontMetrics().xHeight);if(n.isStretchy)u=qo.svgSpan(n,e),u=Me.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"elem",elem:u,wrapperClasses:["svg-align"],wrapperStyle:s>0?{width:"calc(100% - "+st(2*s)+")",marginLeft:st(2*s)}:void 0}]},e);else{var p,f;n.label==="\\vec"?(p=Me.staticSvg("vec",e),f=Me.svgData.vec[1]):((p=N_(p=Me.makeOrd({mode:n.mode,text:n.label},e,"textord"))).italic=0,f=p.width,h&&(d+=p.depth)),u=Me.makeSpan(["accent-body"],[p]);var g=n.label==="\\textcircled";g&&(u.classes.push("accent-full"),d=a.height);var m=s;g||(m-=f/2),u.style.left=st(m),n.label==="\\textcircled"&&(u.style.top=".2em"),u=Me.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:-d},{type:"elem",elem:u}]},e)}var y=Me.makeSpan(["mord","accent"],[u],e);return i?(i.children[0]=y,i.height=Math.max(y.height,i.height),i.classes[0]="mord",i):y}),"htmlBuilder$a"),JR=l(((t,e)=>{var r=t.isStretchy?qo.mathMLnode(t.label):new Ve.MathNode("mo",[Wa(t.label,t.mode)]),n=new Ve.MathNode("mover",[Mr(t.base,e),r]);return n.setAttribute("accent","true"),n}),"mathmlBuilder$9"),Cme=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map((t=>"\\"+t)).join("|"));ft({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:l(((t,e)=>{var r=d5(e[0]),n=!Cme.test(t.funcName),i=!n||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:i,base:r}}),"handler"),htmlBuilder:D_,mathmlBuilder:JR}),ft({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:l(((t,e)=>{var r=e[0],n=t.parser.mode;return n==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:t.funcName,isStretchy:!1,isShifty:!0,base:r}}),"handler"),htmlBuilder:D_,mathmlBuilder:JR}),ft({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:l(((t,e)=>{var{parser:r,funcName:n}=t,i=e[0];return{type:"accentUnder",mode:r.mode,label:n,base:i}}),"handler"),htmlBuilder:l(((t,e)=>{var r=hr(t.base,e),n=qo.svgSpan(t,e),i=t.label==="\\utilde"?.12:0,a=Me.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:r}]},e);return Me.makeSpan(["mord","accentunder"],[a],e)}),"htmlBuilder"),mathmlBuilder:l(((t,e)=>{var r=qo.mathMLnode(t.label),n=new Ve.MathNode("munder",[Mr(t.base,e),r]);return n.setAttribute("accentunder","true"),n}),"mathmlBuilder")});var Rx=l((t=>{var e=new Ve.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e}),"paddedNode");ft({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n,funcName:i}=t;return{type:"xArrow",mode:n.mode,label:i,body:e[0],below:r[0]}},htmlBuilder(t,e){var r,n=e.style,i=e.havingStyle(n.sup()),a=Me.wrapFragment(hr(t.body,i,e),e),s=t.label.slice(0,2)==="\\x"?"x":"cd";a.classes.push(s+"-arrow-pad"),t.below&&(i=e.havingStyle(n.sub()),(r=Me.wrapFragment(hr(t.below,i,e),e)).classes.push(s+"-arrow-pad"));var o,u=qo.svgSpan(t,e),h=-e.fontMetrics().axisHeight+.5*u.height,d=-e.fontMetrics().axisHeight-.5*u.height-.111;if((a.depth>.25||t.label==="\\xleftequilibrium")&&(d-=a.depth),r){var p=-e.fontMetrics().axisHeight+r.height+.5*u.height+.111;o=Me.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:d},{type:"elem",elem:u,shift:h},{type:"elem",elem:r,shift:p}]},e)}else o=Me.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:d},{type:"elem",elem:u,shift:h}]},e);return o.children[0].children[0].children[1].classes.push("svg-align"),Me.makeSpan(["mrel","x-arrow"],[o],e)},mathmlBuilder(t,e){var r,n=qo.mathMLnode(t.label);if(n.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em"),t.body){var i=Rx(Mr(t.body,e));if(t.below){var a=Rx(Mr(t.below,e));r=new Ve.MathNode("munderover",[n,a,i])}else r=new Ve.MathNode("mover",[n,i])}else if(t.below){var s=Rx(Mr(t.below,e));r=new Ve.MathNode("munder",[n,s])}else r=Rx(),r=new Ve.MathNode("mover",[n,r]);return r}});var Sme=Me.makeSpan;function O_(t,e){var r=Bn(t.body,e,!0);return Sme([t.mclass],r,e)}function P_(t,e){var r,n=aa(t.body,e);return t.mclass==="minner"?r=new Ve.MathNode("mpadded",n):t.mclass==="mord"?t.isCharacterBox?(r=n[0]).type="mi":r=new Ve.MathNode("mi",n):(t.isCharacterBox?(r=n[0]).type="mo":r=new Ve.MathNode("mo",n),t.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):t.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):t.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}l(O_,"htmlBuilder$9"),l(P_,"mathmlBuilder$8"),ft({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:xn(i),isCharacterBox:Pt.isCharacterBox(i)}},htmlBuilder:O_,mathmlBuilder:P_});var Rb=l((t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type!=="atom"||e.family!=="bin"&&e.family!=="rel"?"mord":"m"+e.family}),"binrelClass");ft({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:r}=t;return{type:"mclass",mode:r.mode,mclass:Rb(e[0]),body:xn(e[1]),isCharacterBox:Pt.isCharacterBox(e[1])}}}),ft({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var r,{parser:n,funcName:i}=t,a=e[1],s=e[0];r=i!=="\\stackrel"?Rb(a):"mrel";var o={type:"op",mode:a.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:i!=="\\stackrel",body:xn(a)},u={type:"supsub",mode:s.mode,base:o,sup:i==="\\underset"?null:s,sub:i==="\\underset"?s:null};return{type:"mclass",mode:n.mode,mclass:r,body:[u],isCharacterBox:Pt.isCharacterBox(u)}},htmlBuilder:O_,mathmlBuilder:P_}),ft({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"pmb",mode:r.mode,mclass:Rb(e[0]),body:xn(e[0])}},htmlBuilder(t,e){var r=Bn(t.body,e,!0),n=Me.makeSpan([t.mclass],r,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(t,e){var r=aa(t.body,e),n=new Ve.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var Ame={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},eM=l((()=>({type:"styling",body:[],mode:"math",style:"display"})),"newCell"),tM=l((t=>t.type==="textord"&&t.text==="@"),"isStartOfArrow"),Lme=l(((t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e),"isLabelEnd");function zX(t,e,r){var n=Ame[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":var i={type:"atom",text:n,mode:"math",family:"rel"},a={type:"ordgroup",mode:"math",body:[r.callFunction("\\\\cdleft",[e[0]],[]),r.callFunction("\\Big",[i],[]),r.callFunction("\\\\cdright",[e[1]],[])]};return r.callFunction("\\\\cdparent",[a],[]);case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":return r.callFunction("\\Big",[{type:"textord",text:"\\Vert",mode:"math"}],[]);default:return{type:"textord",text:" ",mode:"math"}}}function GX(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var r=t.fetch().text;if(r!=="&"&&r!=="\\\\"){if(r==="\\end"){e[e.length-1].length===0&&e.pop();break}throw new tt("Expected \\\\ or \\cr or \\end",t.nextToken)}t.consume()}for(var n=[],i=[n],a=0;a<e.length;a++){for(var s=e[a],o=eM(),u=0;u<s.length;u++)if(tM(s[u])){n.push(o);var h=f5(s[u+=1]).text,d=new Array(2);if(d[0]={type:"ordgroup",mode:"math",body:[]},d[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(h)>-1)){if(!("<>AV".indexOf(h)>-1))throw new tt('Expected one of "<>AV=|." after @',s[u]);for(var p=0;p<2;p++){for(var f=!0,g=u+1;g<s.length;g++){if(Lme(s[g],h)){f=!1,u=g;break}if(tM(s[g]))throw new tt("Missing a "+h+" character to complete a CD arrow.",s[g]);d[p].body.push(s[g])}if(f)throw new tt("Missing a "+h+" character to complete a CD arrow.",s[u])}}var m={type:"styling",body:[zX(h,d,t)],mode:"math",style:"display"};n.push(m),o=eM()}else o.body.push(s[u]);a%2==0?n.push(o):n.shift(),n=[],i.push(n)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:"math",body:i,arraystretch:1,addJot:!0,rowGaps:[null],cols:new Array(i[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25}),colSeparationType:"CD",hLinesBeforeRow:new Array(i.length+1).fill([])}}l(zX,"cdArrow"),l(GX,"parseCD"),ft({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:e[0]}},htmlBuilder(t,e){var r=e.havingStyle(e.style.sup()),n=Me.wrapFragment(hr(t.label,r,e),e);return n.classes.push("cd-label-"+t.side),n.style.bottom=st(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(t,e){var r=new Ve.MathNode("mrow",[Mr(t.label,e)]);return(r=new Ve.MathNode("mpadded",[r])).setAttribute("width","0"),t.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),(r=new Ve.MathNode("mstyle",[r])).setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}}),ft({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:r}=t;return{type:"cdlabelparent",mode:r.mode,fragment:e[0]}},htmlBuilder(t,e){var r=Me.wrapFragment(hr(t.fragment,e),e);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder:(t,e)=>new Ve.MathNode("mrow",[Mr(t.fragment,e)])}),ft({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:r}=t,n=Qt(e[0],"ordgroup").body,i="",a=0;a<n.length;a++)i+=Qt(n[a],"textord").text;var s,o=parseInt(i);if(isNaN(o))throw new tt("\\@char has non-numeric argument "+i);if(o<0||o>=1114111)throw new tt("\\@char with invalid code point "+i);return o<=65535?s=String.fromCharCode(o):(o-=65536,s=String.fromCharCode(55296+(o>>10),56320+(1023&o))),{type:"textord",mode:r.mode,text:s}}});var rM=l(((t,e)=>{var r=Bn(t.body,e.withColor(t.color),!1);return Me.makeFragment(r)}),"htmlBuilder$8"),nM=l(((t,e)=>{var r=aa(t.body,e.withColor(t.color)),n=new Ve.MathNode("mstyle",r);return n.setAttribute("mathcolor",t.color),n}),"mathmlBuilder$7");ft({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:r}=t,n=Qt(e[0],"color-token").color,i=e[1];return{type:"color",mode:r.mode,color:n,body:xn(i)}},htmlBuilder:rM,mathmlBuilder:nM}),ft({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:r,breakOnTokenText:n}=t,i=Qt(e[0],"color-token").color;r.gullet.macros.set("\\current@color",i);var a=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:i,body:a}},htmlBuilder:rM,mathmlBuilder:nM}),ft({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,r){var{parser:n}=t,i=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,a=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:a,size:i&&Qt(i,"size").value}},htmlBuilder(t,e){var r=Me.makeSpan(["mspace"],[],e);return t.newLine&&(r.classes.push("newline"),t.size&&(r.style.marginTop=st(Qr(t.size,e)))),r},mathmlBuilder(t,e){var r=new Ve.MathNode("mspace");return t.newLine&&(r.setAttribute("linebreak","newline"),t.size&&r.setAttribute("height",st(Qr(t.size,e)))),r}});var Vk={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},iM=l((t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new tt("Expected a control sequence",t);return e}),"checkControlSequence"),Nme=l((t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken()).text===" "&&(e=t.gullet.popToken()),e}),"getRHS"),aM=l(((t,e,r,n)=>{var i=t.gullet.macros.get(r.text);i==null&&(r.noexpand=!0,i={tokens:[r],numArgs:0,unexpandable:!t.gullet.isExpandable(r.text)}),t.gullet.macros.set(e,i,n)}),"letCommand");ft({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:r}=t;e.consumeSpaces();var n=e.fetch();if(Vk[n.text])return r!=="\\global"&&r!=="\\\\globallong"||(n.text=Vk[n.text]),Qt(e.parseFunction(),"internal");throw new tt("Invalid token after macro prefix",n)}}),ft({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=e.gullet.popToken(),i=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new tt("Expected a control sequence",n);for(var a,s=0,o=[[]];e.gullet.future().text!=="{";)if((n=e.gullet.popToken()).text==="#"){if(e.gullet.future().text==="{"){a=e.gullet.future(),o[s].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new tt('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==s+1)throw new tt('Argument number "'+n.text+'" out of order');s++,o.push([])}else{if(n.text==="EOF")throw new tt("Expected a macro definition");o[s].push(n.text)}var{tokens:u}=e.gullet.consumeArg();return a&&u.unshift(a),r!=="\\edef"&&r!=="\\xdef"||(u=e.gullet.expandTokens(u)).reverse(),e.gullet.macros.set(i,{tokens:u,numArgs:s,delimiters:o},r===Vk[r]),{type:"internal",mode:e.mode}}}),ft({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=iM(e.gullet.popToken());e.gullet.consumeSpaces();var i=Nme(e);return aM(e,n,i,r==="\\\\globallet"),{type:"internal",mode:e.mode}}}),ft({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=iM(e.gullet.popToken()),i=e.gullet.popToken(),a=e.gullet.popToken();return aM(e,n,a,r==="\\\\globalfuture"),e.gullet.pushToken(a),e.gullet.pushToken(i),{type:"internal",mode:e.mode}}});var iy=l((function(t,e,r){var n=J6(zr.math[t]&&zr.math[t].replace||t,e,r);if(!n)throw new Error("Unsupported symbol "+t+" and font size "+e+".");return n}),"getMetrics"),uA=l((function(t,e,r,n){var i=r.havingBaseStyle(e),a=Me.makeSpan(n.concat(i.sizingClasses(r)),[t],r),s=i.sizeMultiplier/r.sizeMultiplier;return a.height*=s,a.depth*=s,a.maxFontSize=i.sizeMultiplier,a}),"styleWrap"),UX=l((function(t,e,r){var n=e.havingBaseStyle(r),i=(1-e.sizeMultiplier/n.sizeMultiplier)*e.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=st(i),t.height-=i,t.depth+=i}),"centerSpan"),Ime=l((function(t,e,r,n,i,a){var s=Me.makeSymbol(t,"Main-Regular",i,n),o=uA(s,e,n,a);return r&&UX(o,n,e),o}),"makeSmallDelim"),Rme=l((function(t,e,r,n){return Me.makeSymbol(t,"Size"+e+"-Regular",r,n)}),"mathrmSize"),qX=l((function(t,e,r,n,i,a){var s=Rme(t,e,i,n),o=uA(Me.makeSpan(["delimsizing","size"+e],[s],n),zt.TEXT,n,a);return r&&UX(o,n,zt.TEXT),o}),"makeLargeDelim"),Hk=l((function(t,e,r){var n;return n=e==="Size1-Regular"?"delim-size1":"delim-size4",{type:"elem",elem:Me.makeSpan(["delimsizinginner",n],[Me.makeSpan([],[Me.makeSymbol(t,e,r)])])}}),"makeGlyphSpan"),Xk=l((function(t,e,r){var n=Hs["Size4-Regular"][t.charCodeAt(0)]?Hs["Size4-Regular"][t.charCodeAt(0)][4]:Hs["Size1-Regular"][t.charCodeAt(0)][4],i=new Jl("inner",q0e(t,Math.round(1e3*e))),a=new Go([i],{width:st(n),height:st(e),style:"width:"+st(n),viewBox:"0 0 "+1e3*n+" "+Math.round(1e3*e),preserveAspectRatio:"xMinYMin"}),s=Me.makeSvgSpan([],[a],r);return s.height=e,s.style.height=st(e),s.style.width=st(n),{type:"elem",elem:s}}),"makeInner"),Mx={type:"kern",size:-.008},Mme=["|","\\lvert","\\rvert","\\vert"],Dme=["\\|","\\lVert","\\rVert","\\Vert"],jX=l((function(t,e,r,n,i,a){var s,o,u,h,d="",p=0;s=u=h=t,o=null;var f="Size1-Regular";t==="\\uparrow"?u=h="":t==="\\Uparrow"?u=h="":t==="\\downarrow"?s=u="":t==="\\Downarrow"?s=u="":t==="\\updownarrow"?(s="\\uparrow",u="",h="\\downarrow"):t==="\\Updownarrow"?(s="\\Uparrow",u="",h="\\Downarrow"):Pt.contains(Mme,t)?(u="",d="vert",p=333):Pt.contains(Dme,t)?(u="",d="doublevert",p=556):t==="["||t==="\\lbrack"?(s="",u="",h="",f="Size4-Regular",d="lbrack",p=667):t==="]"||t==="\\rbrack"?(s="",u="",h="",f="Size4-Regular",d="rbrack",p=667):t==="\\lfloor"||t===""?(u=s="",h="",f="Size4-Regular",d="lfloor",p=667):t==="\\lceil"||t===""?(s="",u=h="",f="Size4-Regular",d="lceil",p=667):t==="\\rfloor"||t===""?(u=s="",h="",f="Size4-Regular",d="rfloor",p=667):t==="\\rceil"||t===""?(s="",u=h="",f="Size4-Regular",d="rceil",p=667):t==="("||t==="\\lparen"?(s="",u="",h="",f="Size4-Regular",d="lparen",p=875):t===")"||t==="\\rparen"?(s="",u="",h="",f="Size4-Regular",d="rparen",p=875):t==="\\{"||t==="\\lbrace"?(s="",o="",h="",u="",f="Size4-Regular"):t==="\\}"||t==="\\rbrace"?(s="",o="",h="",u="",f="Size4-Regular"):t==="\\lgroup"||t===""?(s="",h="",u="",f="Size4-Regular"):t==="\\rgroup"||t===""?(s="",h="",u="",f="Size4-Regular"):t==="\\lmoustache"||t===""?(s="",h="",u="",f="Size4-Regular"):t!=="\\rmoustache"&&t!==""||(s="",h="",u="",f="Size4-Regular");var g=iy(s,f,i),m=g.height+g.depth,y=iy(u,f,i),v=y.height+y.depth,x=iy(h,f,i),b=x.height+x.depth,w=0,T=1;if(o!==null){var k=iy(o,f,i);w=k.height+k.depth,T=2}var C=m+b+w,E=C+Math.max(0,Math.ceil((e-C)/(T*v)))*T*v,_=n.fontMetrics().axisHeight;r&&(_*=n.sizeMultiplier);var S=E/2-_,N=[];if(d.length>0){var O=E-m-b,B=Math.round(1e3*E),L=j0e(d,Math.round(1e3*O)),I=new Jl(d,L),A=(p/1e3).toFixed(3)+"em",M=(B/1e3).toFixed(3)+"em",D=new Go([I],{width:A,height:M,viewBox:"0 0 "+p+" "+B}),R=Me.makeSvgSpan([],[D],n);R.height=B/1e3,R.style.width=A,R.style.height=M,N.push({type:"elem",elem:R})}else{if(N.push(Hk(h,f,i)),N.push(Mx),o===null){var P=E-m-b+.016;N.push(Xk(u,P,n))}else{var $=(E-m-b-w)/2+.016;N.push(Xk(u,$,n)),N.push(Mx),N.push(Hk(o,f,i)),N.push(Mx),N.push(Xk(u,$,n))}N.push(Mx),N.push(Hk(s,f,i))}var z=n.havingBaseStyle(zt.TEXT),q=Me.makeVList({positionType:"bottom",positionData:S,children:N},z);return uA(Me.makeSpan(["delimsizing","mult"],[q],z),zt.TEXT,n,a)}),"makeStackedDelim"),Kk=l((function(t,e,r,n,i){var a=U0e(t,n,r),s=new Jl(t,a),o=new Go([s],{width:"400em",height:st(e),viewBox:"0 0 400000 "+r,preserveAspectRatio:"xMinYMin slice"});return Me.makeSvgSpan(["hide-tail"],[o],i)}),"sqrtSvg"),Ome=l((function(t,e){var r,n,i=e.havingBaseSizing(),a=HX("\\surd",t*i.sizeMultiplier,VX,i),s=i.sizeMultiplier,o=Math.max(0,e.minRuleThickness-e.fontMetrics().sqrtRuleThickness),u=0,h=0,d=0;return a.type==="small"?(t<1?s=1:t<1.4&&(s=.7),h=(1+o)/s,(r=Kk("sqrtMain",u=(1+o+.08)/s,d=1e3+1e3*o+80,o,e)).style.minWidth="0.853em",n=.833/s):a.type==="large"?(d=1080*Uy[a.size],h=(Uy[a.size]+o)/s,u=(Uy[a.size]+o+.08)/s,(r=Kk("sqrtSize"+a.size,u,d,o,e)).style.minWidth="1.02em",n=1/s):(u=t+o+.08,h=t+o,d=Math.floor(1e3*t+o)+80,(r=Kk("sqrtTall",u,d,o,e)).style.minWidth="0.742em",n=1.056),r.height=h,r.style.height=st(u),{span:r,advanceWidth:n,ruleWidth:(e.fontMetrics().sqrtRuleThickness+o)*s}}),"makeSqrtImage"),WX=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],Pme=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],YX=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Uy=[0,1.2,1.8,2.4,3],Bme=l((function(t,e,r,n,i){if(t==="<"||t==="\\lt"||t===""?t="\\langle":t!==">"&&t!=="\\gt"&&t!==""||(t="\\rangle"),Pt.contains(WX,t)||Pt.contains(YX,t))return qX(t,e,!1,r,n,i);if(Pt.contains(Pme,t))return jX(t,Uy[e],!1,r,n,i);throw new tt("Illegal delimiter: '"+t+"'")}),"makeSizedDelim"),$me=[{type:"small",style:zt.SCRIPTSCRIPT},{type:"small",style:zt.SCRIPT},{type:"small",style:zt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Fme=[{type:"small",style:zt.SCRIPTSCRIPT},{type:"small",style:zt.SCRIPT},{type:"small",style:zt.TEXT},{type:"stack"}],VX=[{type:"small",style:zt.SCRIPTSCRIPT},{type:"small",style:zt.SCRIPT},{type:"small",style:zt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],zme=l((function(t){if(t.type==="small")return"Main-Regular";if(t.type==="large")return"Size"+t.size+"-Regular";if(t.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")}),"delimTypeToFont"),HX=l((function(t,e,r,n){for(var i=Math.min(2,3-n.style.size);i<r.length&&r[i].type!=="stack";i++){var a=iy(t,zme(r[i]),"math"),s=a.height+a.depth;if(r[i].type==="small"&&(s*=n.havingBaseStyle(r[i].style).sizeMultiplier),s>e)return r[i]}return r[r.length-1]}),"traverseSequence"),XX=l((function(t,e,r,n,i,a){var s;t==="<"||t==="\\lt"||t===""?t="\\langle":t!==">"&&t!=="\\gt"&&t!==""||(t="\\rangle"),s=Pt.contains(YX,t)?$me:Pt.contains(WX,t)?VX:Fme;var o=HX(t,e,s,n);return o.type==="small"?Ime(t,o.style,r,n,i,a):o.type==="large"?qX(t,o.size,r,n,i,a):jX(t,e,r,n,i,a)}),"makeCustomSizedDelim"),Gme=l((function(t,e,r,n,i,a){var s=n.fontMetrics().axisHeight*n.sizeMultiplier,o=5/n.fontMetrics().ptPerEm,u=Math.max(e-s,r+s),h=Math.max(u/500*901,2*u-o);return XX(t,h,!0,n,i,a)}),"makeLeftRightDelim"),_o={sqrtImage:Ome,sizedDelim:Bme,sizeToMaxHeight:Uy,customSizedDelim:XX,leftRightDelim:Gme},sM={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Ume=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function Dm(t,e){var r=N2(t);if(r&&Pt.contains(Ume,r.text))return r;throw new tt(r?"Invalid delimiter '"+r.text+"' after '"+e.funcName+"'":"Invalid delimiter type '"+t.type+"'",t)}function Zk(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}l(Dm,"checkDelimiter"),ft({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:l(((t,e)=>{var r=Dm(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:sM[t.funcName].size,mclass:sM[t.funcName].mclass,delim:r.text}}),"handler"),htmlBuilder:l(((t,e)=>t.delim==="."?Me.makeSpan([t.mclass]):_o.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass])),"htmlBuilder"),mathmlBuilder:l((t=>{var e=[];t.delim!=="."&&e.push(Wa(t.delim,t.mode));var r=new Ve.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=st(_o.sizeToMaxHeight[t.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}),"mathmlBuilder")}),l(Zk,"assertParsed"),ft({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:l(((t,e)=>{var r=t.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new tt("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:Dm(e[0],t).text,color:r}}),"handler")}),ft({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:l(((t,e)=>{var r=Dm(e[0],t),n=t.parser;++n.leftrightDepth;var i=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var a=Qt(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:i,left:r.text,right:a.delim,rightColor:a.color}}),"handler"),htmlBuilder:l(((t,e)=>{Zk(t);for(var r,n,i=Bn(t.body,e,!0,["mopen","mclose"]),a=0,s=0,o=!1,u=0;u<i.length;u++)i[u].isMiddle?o=!0:(a=Math.max(i[u].height,a),s=Math.max(i[u].depth,s));if(a*=e.sizeMultiplier,s*=e.sizeMultiplier,r=t.left==="."?zy(e,["mopen"]):_o.leftRightDelim(t.left,a,s,e,t.mode,["mopen"]),i.unshift(r),o)for(var h=1;h<i.length;h++){var d=i[h].isMiddle;d&&(i[h]=_o.leftRightDelim(d.delim,a,s,d.options,t.mode,[]))}if(t.right===".")n=zy(e,["mclose"]);else{var p=t.rightColor?e.withColor(t.rightColor):e;n=_o.leftRightDelim(t.right,a,s,p,t.mode,["mclose"])}return i.push(n),Me.makeSpan(["minner"],i,e)}),"htmlBuilder"),mathmlBuilder:l(((t,e)=>{Zk(t);var r=aa(t.body,e);if(t.left!=="."){var n=new Ve.MathNode("mo",[Wa(t.left,t.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(t.right!=="."){var i=new Ve.MathNode("mo",[Wa(t.right,t.mode)]);i.setAttribute("fence","true"),t.rightColor&&i.setAttribute("mathcolor",t.rightColor),r.push(i)}return cA(r)}),"mathmlBuilder")}),ft({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:l(((t,e)=>{var r=Dm(e[0],t);if(!t.parser.leftrightDepth)throw new tt("\\middle without preceding \\left",r);return{type:"middle",mode:t.parser.mode,delim:r.text}}),"handler"),htmlBuilder:l(((t,e)=>{var r;if(t.delim===".")r=zy(e,[]);else{r=_o.sizedDelim(t.delim,1,e,t.mode,[]);var n={delim:t.delim,options:e};r.isMiddle=n}return r}),"htmlBuilder"),mathmlBuilder:l(((t,e)=>{var r=t.delim==="\\vert"||t.delim==="|"?Wa("|","text"):Wa(t.delim,t.mode),n=new Ve.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}),"mathmlBuilder")});var Qk=l(((t,e)=>{var r,n,i=Me.wrapFragment(hr(t.body,e),e),a=t.label.slice(1),s=e.sizeMultiplier,o=0,u=Pt.isCharacterBox(t.body);if(a==="sout")(r=Me.makeSpan(["stretchy","sout"])).height=e.fontMetrics().defaultRuleThickness/s,o=-.5*e.fontMetrics().xHeight;else if(a==="phase"){var h=Qr({number:.6,unit:"pt"},e),d=Qr({number:.35,unit:"ex"},e);s/=e.havingBaseSizing().sizeMultiplier;var p=i.height+i.depth+h+d;i.style.paddingLeft=st(p/2+h);var f=Math.floor(1e3*p*s),g=z0e(f),m=new Go([new Jl("phase",g)],{width:"400em",height:st(f/1e3),viewBox:"0 0 400000 "+f,preserveAspectRatio:"xMinYMin slice"});(r=Me.makeSvgSpan(["hide-tail"],[m],e)).style.height=st(p),o=i.depth+h+d}else{/cancel/.test(a)?u||i.classes.push("cancel-pad"):a==="angl"?i.classes.push("anglpad"):i.classes.push("boxpad");var y=0,v=0,x=0;/box/.test(a)?(x=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),v=y=e.fontMetrics().fboxsep+(a==="colorbox"?0:x)):a==="angl"?(y=4*(x=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness)),v=Math.max(0,.25-i.depth)):v=y=u?.2:0,r=qo.encloseSpan(i,a,y,v,e),/fbox|boxed|fcolorbox/.test(a)?(r.style.borderStyle="solid",r.style.borderWidth=st(x)):a==="angl"&&x!==.049&&(r.style.borderTopWidth=st(x),r.style.borderRightWidth=st(x)),o=i.depth+v,t.backgroundColor&&(r.style.backgroundColor=t.backgroundColor,t.borderColor&&(r.style.borderColor=t.borderColor))}if(t.backgroundColor)n=Me.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:o},{type:"elem",elem:i,shift:0}]},e);else{var b=/cancel|phase/.test(a)?["svg-align"]:[];n=Me.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:0},{type:"elem",elem:r,shift:o,wrapperClasses:b}]},e)}return/cancel/.test(a)&&(n.height=i.height,n.depth=i.depth),/cancel/.test(a)&&!u?Me.makeSpan(["mord","cancel-lap"],[n],e):Me.makeSpan(["mord"],[n],e)}),"htmlBuilder$7"),Jk=l(((t,e)=>{var r=0,n=new Ve.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Mr(t.body,e)]);switch(t.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),t.label==="\\fcolorbox"){var i=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+i+"em solid "+String(t.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike")}return t.backgroundColor&&n.setAttribute("mathbackground",t.backgroundColor),n}),"mathmlBuilder$6");ft({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,r){var{parser:n,funcName:i}=t,a=Qt(e[0],"color-token").color,s=e[1];return{type:"enclose",mode:n.mode,label:i,backgroundColor:a,body:s}},htmlBuilder:Qk,mathmlBuilder:Jk}),ft({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,r){var{parser:n,funcName:i}=t,a=Qt(e[0],"color-token").color,s=Qt(e[1],"color-token").color,o=e[2];return{type:"enclose",mode:n.mode,label:i,backgroundColor:s,borderColor:a,body:o}},htmlBuilder:Qk,mathmlBuilder:Jk}),ft({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\fbox",body:e[0]}}}),ft({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];return{type:"enclose",mode:r.mode,label:n,body:i}},htmlBuilder:Qk,mathmlBuilder:Jk}),ft({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\angl",body:e[0]}}});var KX={};function ss(t){for(var{type:e,names:r,props:n,handler:i,htmlBuilder:a,mathmlBuilder:s}=t,o={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},u=0;u<r.length;++u)KX[r[u]]=o;a&&(u5[e]=a),s&&(h5[e]=s)}l(ss,"defineEnvironment");var ZX={};function ae(t,e){ZX[t]=e}function B_(t){var e=[];t.consumeSpaces();var r=t.fetch().text;for(r==="\\relax"&&(t.consume(),t.consumeSpaces(),r=t.fetch().text);r==="\\hline"||r==="\\hdashline";)t.consume(),e.push(r==="\\hdashline"),t.consumeSpaces(),r=t.fetch().text;return e}l(ae,"defineMacro"),l(B_,"getHLines");var Mb=l((t=>{if(!t.parser.settings.displayMode)throw new tt("{"+t.envName+"} can be used only in display mode.")}),"validateAmsEnvironmentContext");function g5(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function Eo(t,e,r){var{hskipBeforeAndAfter:n,addJot:i,cols:a,arraystretch:s,colSeparationType:o,autoTag:u,singleRow:h,emptySingleRow:d,maxNumCols:p,leqno:f}=e;if(t.gullet.beginGroup(),h||t.gullet.macros.set("\\cr","\\\\\\relax"),!s){var g=t.gullet.expandMacroAsText("\\arraystretch");if(g==null)s=1;else if(!(s=parseFloat(g))||s<0)throw new tt("Invalid \\arraystretch: "+g)}t.gullet.beginGroup();var m=[],y=[m],v=[],x=[],b=u!=null?[]:void 0;function w(){u&&t.gullet.macros.set("\\@eqnsw","1",!0)}function T(){b&&(t.gullet.macros.get("\\df@tag")?(b.push(t.subparse([new eo("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):b.push(!!u&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(l(w,"beginRow"),l(T,"endRow"),w(),x.push(B_(t));;){var k=t.parseExpression(!1,h?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),k={type:"ordgroup",mode:t.mode,body:k},r&&(k={type:"styling",mode:t.mode,style:r,body:[k]}),m.push(k);var C=t.fetch().text;if(C==="&"){if(p&&m.length===p){if(h||o)throw new tt("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else{if(C==="\\end"){T(),m.length===1&&k.type==="styling"&&k.body[0].body.length===0&&(y.length>1||!d)&&y.pop(),x.length<y.length+1&&x.push([]);break}if(C!=="\\\\")throw new tt("Expected & or \\\\ or \\cr or \\end",t.nextToken);t.consume();var E=void 0;t.gullet.future().text!==" "&&(E=t.parseSizeGroup(!0)),v.push(E?E.value:null),T(),x.push(B_(t)),m=[],y.push(m),w()}}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:i,arraystretch:s,body:y,cols:a,rowGaps:v,hskipBeforeAndAfter:n,hLinesBeforeRow:x,colSeparationType:o,tags:b,leqno:f}}function Db(t){return t.slice(0,1)==="d"?"display":"text"}l(g5,"getAutoTag"),l(Eo,"parseArray"),l(Db,"dCellStyle");var Os=l((function(t,e){var r,n,i=t.body.length,a=t.hLinesBeforeRow,s=0,o=new Array(i),u=[],h=Math.max(e.fontMetrics().arrayRuleWidth,e.minRuleThickness),d=1/e.fontMetrics().ptPerEm,p=5*d;t.colSeparationType&&t.colSeparationType==="small"&&(p=e.havingStyle(zt.SCRIPT).sizeMultiplier/e.sizeMultiplier*.2778);var f=t.colSeparationType==="CD"?Qr({number:3,unit:"ex"},e):12*d,g=3*d,m=t.arraystretch*f,y=.7*m,v=.3*m,x=0;function b(de){for(var ce=0;ce<de.length;++ce)ce>0&&(x+=.25),u.push({pos:x,isDashed:de[ce]})}for(l(b,"setHLinePos"),b(a[0]),r=0;r<t.body.length;++r){var w=t.body[r],T=y,k=v;s<w.length&&(s=w.length);var C=new Array(w.length);for(n=0;n<w.length;++n){var E=hr(w[n],e);k<E.depth&&(k=E.depth),T<E.height&&(T=E.height),C[n]=E}var _=t.rowGaps[r],S=0;_&&(S=Qr(_,e))>0&&(k<(S+=v)&&(k=S),S=0),t.addJot&&(k+=g),C.height=T,C.depth=k,x+=T,C.pos=x,x+=k+S,o[r]=C,b(a[r+1])}var N,O,B=x/2+e.fontMetrics().axisHeight,L=t.cols||[],I=[],A=[];if(t.tags&&t.tags.some((de=>de)))for(r=0;r<i;++r){var M=o[r],D=M.pos-B,R=t.tags[r],P=void 0;(P=R===!0?Me.makeSpan(["eqn-num"],[],e):R===!1?Me.makeSpan([],[],e):Me.makeSpan([],Bn(R,e,!0),e)).depth=M.depth,P.height=M.height,A.push({type:"elem",elem:P,shift:D})}for(n=0,O=0;n<s||O<L.length;++n,++O){for(var $=L[O]||{},z=!0;$.type==="separator";){if(z||((N=Me.makeSpan(["arraycolsep"],[])).style.width=st(e.fontMetrics().doubleRuleSep),I.push(N)),$.separator!=="|"&&$.separator!==":")throw new tt("Invalid separator type: "+$.separator);var q=$.separator==="|"?"solid":"dashed",W=Me.makeSpan(["vertical-separator"],[],e);W.style.height=st(x),W.style.borderRightWidth=st(h),W.style.borderRightStyle=q,W.style.margin="0 "+st(-h/2);var Q=x-B;Q&&(W.style.verticalAlign=st(-Q)),I.push(W),$=L[++O]||{},z=!1}if(!(n>=s)){var te=void 0;(n>0||t.hskipBeforeAndAfter)&&(te=Pt.deflt($.pregap,p))!==0&&((N=Me.makeSpan(["arraycolsep"],[])).style.width=st(te),I.push(N));var oe=[];for(r=0;r<i;++r){var re=o[r],H=re[n];if(H){var K=re.pos-B;H.depth=re.depth,H.height=re.height,oe.push({type:"elem",elem:H,shift:K})}}oe=Me.makeVList({positionType:"individualShift",children:oe},e),oe=Me.makeSpan(["col-align-"+($.align||"c")],[oe]),I.push(oe),(n<s-1||t.hskipBeforeAndAfter)&&(te=Pt.deflt($.postgap,p))!==0&&((N=Me.makeSpan(["arraycolsep"],[])).style.width=st(te),I.push(N))}}if(o=Me.makeSpan(["mtable"],I),u.length>0){for(var ie=Me.makeLineSpan("hline",e,h),ne=Me.makeLineSpan("hdashline",e,h),J=[{type:"elem",elem:o,shift:0}];u.length>0;){var ue=u.pop(),Y=ue.pos-B;ue.isDashed?J.push({type:"elem",elem:ne,shift:Y}):J.push({type:"elem",elem:ie,shift:Y})}o=Me.makeVList({positionType:"individualShift",children:J},e)}if(A.length===0)return Me.makeSpan(["mord"],[o],e);var se=Me.makeVList({positionType:"individualShift",children:A},e);return se=Me.makeSpan(["tag"],[se],e),Me.makeFragment([o,se])}),"htmlBuilder"),qme={c:"center ",l:"left ",r:"right "},Ps=l((function(t,e){for(var r=[],n=new Ve.MathNode("mtd",[],["mtr-glue"]),i=new Ve.MathNode("mtd",[],["mml-eqn-num"]),a=0;a<t.body.length;a++){for(var s=t.body[a],o=[],u=0;u<s.length;u++)o.push(new Ve.MathNode("mtd",[Mr(s[u],e)]));t.tags&&t.tags[a]&&(o.unshift(n),o.push(n),t.leqno?o.unshift(i):o.push(i)),r.push(new Ve.MathNode("mtr",o))}var h=new Ve.MathNode("mtable",r),d=t.arraystretch===.5?.1:.16+t.arraystretch-1+(t.addJot?.09:0);h.setAttribute("rowspacing",st(d));var p="",f="";if(t.cols&&t.cols.length>0){var g=t.cols,m="",y=!1,v=0,x=g.length;g[0].type==="separator"&&(p+="top ",v=1),g[g.length-1].type==="separator"&&(p+="bottom ",x-=1);for(var b=v;b<x;b++)g[b].type==="align"?(f+=qme[g[b].align],y&&(m+="none "),y=!0):g[b].type==="separator"&&y&&(m+=g[b].separator==="|"?"solid ":"dashed ",y=!1);h.setAttribute("columnalign",f.trim()),/[sd]/.test(m)&&h.setAttribute("columnlines",m.trim())}if(t.colSeparationType==="align"){for(var w=t.cols||[],T="",k=1;k<w.length;k++)T+=k%2?"0em ":"1em ";h.setAttribute("columnspacing",T.trim())}else t.colSeparationType==="alignat"||t.colSeparationType==="gather"?h.setAttribute("columnspacing","0em"):t.colSeparationType==="small"?h.setAttribute("columnspacing","0.2778em"):t.colSeparationType==="CD"?h.setAttribute("columnspacing","0.5em"):h.setAttribute("columnspacing","1em");var C="",E=t.hLinesBeforeRow;p+=E[0].length>0?"left ":"",p+=E[E.length-1].length>0?"right ":"";for(var _=1;_<E.length-1;_++)C+=E[_].length===0?"none ":E[_][0]?"dashed ":"solid ";return/[sd]/.test(C)&&h.setAttribute("rowlines",C.trim()),p!==""&&(h=new Ve.MathNode("menclose",[h])).setAttribute("notation",p.trim()),t.arraystretch&&t.arraystretch<1&&(h=new Ve.MathNode("mstyle",[h])).setAttribute("scriptlevel","1"),h}),"mathmlBuilder"),oM=l((function(t,e){t.envName.indexOf("ed")===-1&&Mb(t);var r,n=[],i=t.envName.indexOf("at")>-1?"alignat":"align",a=t.envName==="split",s=Eo(t.parser,{cols:n,addJot:!0,autoTag:a?void 0:g5(t.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:a?2:void 0,leqno:t.parser.settings.leqno},"display"),o=0,u={type:"ordgroup",mode:t.mode,body:[]};if(e[0]&&e[0].type==="ordgroup"){for(var h="",d=0;d<e[0].body.length;d++)h+=Qt(e[0].body[d],"textord").text;r=Number(h),o=2*r}var p=!o;s.body.forEach((function(y){for(var v=1;v<y.length;v+=2){var x=Qt(y[v],"styling");Qt(x.body[0],"ordgroup").body.unshift(u)}if(p)o<y.length&&(o=y.length);else{var b=y.length/2;if(r<b)throw new tt("Too many math in a row: expected "+r+", but got "+b,y[0])}}));for(var f=0;f<o;++f){var g="r",m=0;f%2==1?g="l":f>0&&p&&(m=1),n[f]={type:"align",align:g,pregap:m,postgap:0}}return s.colSeparationType=p?"align":"alignat",s}),"alignedHandler");ss({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var r=(N2(e[0])?[e[0]]:Qt(e[0],"ordgroup").body).map((function(i){var a=f5(i).text;if("lcr".indexOf(a)!==-1)return{type:"align",align:a};if(a==="|")return{type:"separator",separator:"|"};if(a===":")return{type:"separator",separator:":"};throw new tt("Unknown column alignment: "+a,i)})),n={cols:r,hskipBeforeAndAfter:!0,maxNumCols:r.length};return Eo(t.parser,n,Db(t.envName))},htmlBuilder:Os,mathmlBuilder:Ps}),ss({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(t.envName.charAt(t.envName.length-1)==="*"){var i=t.parser;if(i.consumeSpaces(),i.fetch().text==="["){if(i.consume(),i.consumeSpaces(),r=i.fetch().text,"lcr".indexOf(r)===-1)throw new tt("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),n.cols=[{type:"align",align:r}]}}var a=Eo(t.parser,n,Db(t.envName)),s=Math.max(0,...a.body.map((o=>o.length)));return a.cols=new Array(s).fill({type:"align",align:r}),e?{type:"leftright",mode:t.mode,body:[a],left:e[0],right:e[1],rightColor:void 0}:a},htmlBuilder:Os,mathmlBuilder:Ps}),ss({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e=Eo(t.parser,{arraystretch:.5},"script");return e.colSeparationType="small",e},htmlBuilder:Os,mathmlBuilder:Ps}),ss({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var r=(N2(e[0])?[e[0]]:Qt(e[0],"ordgroup").body).map((function(i){var a=f5(i).text;if("lc".indexOf(a)!==-1)return{type:"align",align:a};throw new tt("Unknown column alignment: "+a,i)}));if(r.length>1)throw new tt("{subarray} can contain only one column");var n={cols:r,hskipBeforeAndAfter:!1,arraystretch:.5};if((n=Eo(t.parser,n,"script")).body.length>0&&n.body[0].length>1)throw new tt("{subarray} can contain only one column");return n},htmlBuilder:Os,mathmlBuilder:Ps}),ss({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e=Eo(t.parser,{arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},Db(t.envName));return{type:"leftright",mode:t.mode,body:[e],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Os,mathmlBuilder:Ps}),ss({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:oM,htmlBuilder:Os,mathmlBuilder:Ps}),ss({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){Pt.contains(["gather","gather*"],t.envName)&&Mb(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:g5(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return Eo(t.parser,e,"display")},htmlBuilder:Os,mathmlBuilder:Ps}),ss({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:oM,htmlBuilder:Os,mathmlBuilder:Ps}),ss({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){Mb(t);var e={autoTag:g5(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return Eo(t.parser,e,"display")},htmlBuilder:Os,mathmlBuilder:Ps}),ss({type:"array",names:["CD"],props:{numArgs:0},handler:t=>(Mb(t),GX(t.parser)),htmlBuilder:Os,mathmlBuilder:Ps}),ae("\\nonumber","\\gdef\\@eqnsw{0}"),ae("\\notag","\\nonumber"),ft({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new tt(t.funcName+" valid only within array environment")}});var lM=KX;ft({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];if(i.type!=="ordgroup")throw new tt("Invalid environment name",i);for(var a="",s=0;s<i.body.length;++s)a+=Qt(i.body[s],"textord").text;if(n==="\\begin"){if(!lM.hasOwnProperty(a))throw new tt("No such environment: "+a,i);var o=lM[a],{args:u,optArgs:h}=r.parseArguments("\\begin{"+a+"}",o),d={mode:r.mode,envName:a,parser:r},p=o.handler(d,u,h);r.expect("\\end",!1);var f=r.nextToken,g=Qt(r.parseFunction(),"environment");if(g.name!==a)throw new tt("Mismatch: \\begin{"+a+"} matched by \\end{"+g.name+"}",f);return p}return{type:"environment",mode:r.mode,name:a,nameGroup:i}}});var cM=l(((t,e)=>{var r=t.font,n=e.withFont(r);return hr(t.body,n)}),"htmlBuilder$5"),uM=l(((t,e)=>{var r=t.font,n=e.withFont(r);return Mr(t.body,n)}),"mathmlBuilder$4"),hM={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};ft({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:l(((t,e)=>{var{parser:r,funcName:n}=t,i=d5(e[0]),a=n;return a in hM&&(a=hM[a]),{type:"font",mode:r.mode,font:a.slice(1),body:i}}),"handler"),htmlBuilder:cM,mathmlBuilder:uM}),ft({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:l(((t,e)=>{var{parser:r}=t,n=e[0],i=Pt.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:Rb(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:i}}),"handler")}),ft({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:l(((t,e)=>{var{parser:r,funcName:n,breakOnTokenText:i}=t,{mode:a}=r,s=r.parseExpression(!0,i);return{type:"font",mode:a,font:"math"+n.slice(1),body:{type:"ordgroup",mode:r.mode,body:s}}}),"handler"),htmlBuilder:cM,mathmlBuilder:uM});var QX=l(((t,e)=>{var r=e;return t==="display"?r=r.id>=zt.SCRIPT.id?r.text():zt.DISPLAY:t==="text"&&r.size===zt.DISPLAY.size?r=zt.TEXT:t==="script"?r=zt.SCRIPT:t==="scriptscript"&&(r=zt.SCRIPTSCRIPT),r}),"adjustStyle"),$_=l(((t,e)=>{var r,n=QX(t.size,e.style),i=n.fracNum(),a=n.fracDen();r=e.havingStyle(i);var s=hr(t.numer,r,e);if(t.continued){var o=8.5/e.fontMetrics().ptPerEm,u=3.5/e.fontMetrics().ptPerEm;s.height=s.height<o?o:s.height,s.depth=s.depth<u?u:s.depth}r=e.havingStyle(a);var h,d,p,f,g,m,y,v,x,b,w=hr(t.denom,r,e);if(t.hasBarLine?(t.barSize?(d=Qr(t.barSize,e),h=Me.makeLineSpan("frac-line",e,d)):h=Me.makeLineSpan("frac-line",e),d=h.height,p=h.height):(h=null,d=0,p=e.fontMetrics().defaultRuleThickness),n.size===zt.DISPLAY.size||t.size==="display"?(f=e.fontMetrics().num1,g=d>0?3*p:7*p,m=e.fontMetrics().denom1):(d>0?(f=e.fontMetrics().num2,g=p):(f=e.fontMetrics().num3,g=3*p),m=e.fontMetrics().denom2),h){var T=e.fontMetrics().axisHeight;f-s.depth-(T+.5*d)<g&&(f+=g-(f-s.depth-(T+.5*d))),T-.5*d-(w.height-m)<g&&(m+=g-(T-.5*d-(w.height-m)));var k=-(T-.5*d);y=Me.makeVList({positionType:"individualShift",children:[{type:"elem",elem:w,shift:m},{type:"elem",elem:h,shift:k},{type:"elem",elem:s,shift:-f}]},e)}else{var C=f-s.depth-(w.height-m);C<g&&(f+=.5*(g-C),m+=.5*(g-C)),y=Me.makeVList({positionType:"individualShift",children:[{type:"elem",elem:w,shift:m},{type:"elem",elem:s,shift:-f}]},e)}return r=e.havingStyle(n),y.height*=r.sizeMultiplier/e.sizeMultiplier,y.depth*=r.sizeMultiplier/e.sizeMultiplier,v=n.size===zt.DISPLAY.size?e.fontMetrics().delim1:n.size===zt.SCRIPTSCRIPT.size?e.havingStyle(zt.SCRIPT).fontMetrics().delim2:e.fontMetrics().delim2,x=t.leftDelim==null?zy(e,["mopen"]):_o.customSizedDelim(t.leftDelim,v,!0,e.havingStyle(n),t.mode,["mopen"]),b=t.continued?Me.makeSpan([]):t.rightDelim==null?zy(e,["mclose"]):_o.customSizedDelim(t.rightDelim,v,!0,e.havingStyle(n),t.mode,["mclose"]),Me.makeSpan(["mord"].concat(r.sizingClasses(e)),[x,Me.makeSpan(["mfrac"],[y]),b],e)}),"htmlBuilder$4"),F_=l(((t,e)=>{var r=new Ve.MathNode("mfrac",[Mr(t.numer,e),Mr(t.denom,e)]);if(t.hasBarLine){if(t.barSize){var n=Qr(t.barSize,e);r.setAttribute("linethickness",st(n))}}else r.setAttribute("linethickness","0px");var i=QX(t.size,e.style);if(i.size!==e.style.size){r=new Ve.MathNode("mstyle",[r]);var a=i.size===zt.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",a),r.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var s=[];if(t.leftDelim!=null){var o=new Ve.MathNode("mo",[new Ve.TextNode(t.leftDelim.replace("\\",""))]);o.setAttribute("fence","true"),s.push(o)}if(s.push(r),t.rightDelim!=null){var u=new Ve.MathNode("mo",[new Ve.TextNode(t.rightDelim.replace("\\",""))]);u.setAttribute("fence","true"),s.push(u)}return cA(s)}return r}),"mathmlBuilder$3");ft({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:l(((t,e)=>{var r,{parser:n,funcName:i}=t,a=e[0],s=e[1],o=null,u=null,h="auto";switch(i){case"\\dfrac":case"\\frac":case"\\tfrac":r=!0;break;case"\\\\atopfrac":r=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":r=!1,o="(",u=")";break;case"\\\\bracefrac":r=!1,o="\\{",u="\\}";break;case"\\\\brackfrac":r=!1,o="[",u="]";break;default:throw new Error("Unrecognized genfrac command")}switch(i){case"\\dfrac":case"\\dbinom":h="display";break;case"\\tfrac":case"\\tbinom":h="text"}return{type:"genfrac",mode:n.mode,continued:!1,numer:a,denom:s,hasBarLine:r,leftDelim:o,rightDelim:u,size:h,barSize:null}}),"handler"),htmlBuilder:$_,mathmlBuilder:F_}),ft({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:l(((t,e)=>{var{parser:r,funcName:n}=t,i=e[0],a=e[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:i,denom:a,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}),"handler")}),ft({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var e,{parser:r,funcName:n,token:i}=t;switch(n){case"\\over":e="\\frac";break;case"\\choose":e="\\binom";break;case"\\atop":e="\\\\atopfrac";break;case"\\brace":e="\\\\bracefrac";break;case"\\brack":e="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:r.mode,replaceWith:e,token:i}}});var dM=["display","text","script","scriptscript"],pM=l((function(t){var e=null;return t.length>0&&(e=(e=t)==="."?null:e),e}),"delimFromValue");ft({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var r,{parser:n}=t,i=e[4],a=e[5],s=d5(e[0]),o=s.type==="atom"&&s.family==="open"?pM(s.text):null,u=d5(e[1]),h=u.type==="atom"&&u.family==="close"?pM(u.text):null,d=Qt(e[2],"size"),p=null;r=!!d.isBlank||(p=d.value).number>0;var f="auto",g=e[3];if(g.type==="ordgroup"){if(g.body.length>0){var m=Qt(g.body[0],"textord");f=dM[Number(m.text)]}}else g=Qt(g,"textord"),f=dM[Number(g.text)];return{type:"genfrac",mode:n.mode,numer:i,denom:a,continued:!1,hasBarLine:r,barSize:p,leftDelim:o,rightDelim:h,size:f}},htmlBuilder:$_,mathmlBuilder:F_}),ft({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:r,funcName:n,token:i}=t;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:Qt(e[0],"size").value,token:i}}}),ft({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:l(((t,e)=>{var{parser:r,funcName:n}=t,i=e[0],a=A0e(Qt(e[1],"infix").size),s=e[2],o=a.number>0;return{type:"genfrac",mode:r.mode,numer:i,denom:s,continued:!1,hasBarLine:o,barSize:a,leftDelim:null,rightDelim:null,size:"auto"}}),"handler"),htmlBuilder:$_,mathmlBuilder:F_});var JX=l(((t,e)=>{var r,n,i=e.style;t.type==="supsub"?(r=t.sup?hr(t.sup,e.havingStyle(i.sup()),e):hr(t.sub,e.havingStyle(i.sub()),e),n=Qt(t.base,"horizBrace")):n=Qt(t,"horizBrace");var a,s=hr(n.base,e.havingBaseStyle(zt.DISPLAY)),o=qo.svgSpan(n,e);if(n.isOver?(a=Me.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:o}]},e)).children[0].children[0].children[1].classes.push("svg-align"):(a=Me.makeVList({positionType:"bottom",positionData:s.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:s}]},e)).children[0].children[0].children[0].classes.push("svg-align"),r){var u=Me.makeSpan(["mord",n.isOver?"mover":"munder"],[a],e);a=n.isOver?Me.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:u},{type:"kern",size:.2},{type:"elem",elem:r}]},e):Me.makeVList({positionType:"bottom",positionData:u.depth+.2+r.height+r.depth,children:[{type:"elem",elem:r},{type:"kern",size:.2},{type:"elem",elem:u}]},e)}return Me.makeSpan(["mord",n.isOver?"mover":"munder"],[a],e)}),"htmlBuilder$3");ft({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:JX,mathmlBuilder:l(((t,e)=>{var r=qo.mathMLnode(t.label);return new Ve.MathNode(t.isOver?"mover":"munder",[Mr(t.base,e),r])}),"mathmlBuilder$2")}),ft({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:l(((t,e)=>{var{parser:r}=t,n=e[1],i=Qt(e[0],"url").url;return r.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:r.mode,href:i,body:xn(n)}:r.formatUnsupportedCmd("\\href")}),"handler"),htmlBuilder:l(((t,e)=>{var r=Bn(t.body,e,!1);return Me.makeAnchor(t.href,[],r,e)}),"htmlBuilder"),mathmlBuilder:l(((t,e)=>{var r=Ul(t.body,e);return r instanceof ja||(r=new ja("mrow",[r])),r.setAttribute("href",t.href),r}),"mathmlBuilder")}),ft({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:l(((t,e)=>{var{parser:r}=t,n=Qt(e[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var i=[],a=0;a<n.length;a++){var s=n[a];s==="~"&&(s="\\textasciitilde"),i.push({type:"textord",mode:"text",text:s})}var o={type:"text",mode:r.mode,font:"\\texttt",body:i};return{type:"href",mode:r.mode,href:n,body:xn(o)}}),"handler")}),ft({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:r}=t;return{type:"hbox",mode:r.mode,body:xn(e[0])}},htmlBuilder(t,e){var r=Bn(t.body,e,!1);return Me.makeFragment(r)},mathmlBuilder:(t,e)=>new Ve.MathNode("mrow",aa(t.body,e))}),ft({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:l(((t,e)=>{var r,{parser:n,funcName:i,token:a}=t,s=Qt(e[0],"raw").string,o=e[1];n.settings.strict&&n.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var u={};switch(i){case"\\htmlClass":u.class=s,r={command:"\\htmlClass",class:s};break;case"\\htmlId":u.id=s,r={command:"\\htmlId",id:s};break;case"\\htmlStyle":u.style=s,r={command:"\\htmlStyle",style:s};break;case"\\htmlData":for(var h=s.split(","),d=0;d<h.length;d++){var p=h[d].split("=");if(p.length!==2)throw new tt("Error parsing key-value for \\htmlData");u["data-"+p[0].trim()]=p[1].trim()}r={command:"\\htmlData",attributes:u};break;default:throw new Error("Unrecognized html command")}return n.settings.isTrusted(r)?{type:"html",mode:n.mode,attributes:u,body:xn(o)}:n.formatUnsupportedCmd(i)}),"handler"),htmlBuilder:l(((t,e)=>{var r=Bn(t.body,e,!1),n=["enclosing"];t.attributes.class&&n.push(...t.attributes.class.trim().split(/\s+/));var i=Me.makeSpan(n,r,e);for(var a in t.attributes)a!=="class"&&t.attributes.hasOwnProperty(a)&&i.setAttribute(a,t.attributes[a]);return i}),"htmlBuilder"),mathmlBuilder:l(((t,e)=>Ul(t.body,e)),"mathmlBuilder")}),ft({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:l(((t,e)=>{var{parser:r}=t;return{type:"htmlmathml",mode:r.mode,html:xn(e[0]),mathml:xn(e[1])}}),"handler"),htmlBuilder:l(((t,e)=>{var r=Bn(t.html,e,!1);return Me.makeFragment(r)}),"htmlBuilder"),mathmlBuilder:l(((t,e)=>Ul(t.mathml,e)),"mathmlBuilder")});var eT=l((function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};var e=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!e)throw new tt("Invalid size: '"+t+"' in \\includegraphics");var r={number:+(e[1]+e[2]),unit:e[3]};if(!CX(r))throw new tt("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r}),"sizeData");ft({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:l(((t,e,r)=>{var{parser:n}=t,i={number:0,unit:"em"},a={number:.9,unit:"em"},s={number:0,unit:"em"},o="";if(r[0])for(var u=Qt(r[0],"raw").string.split(","),h=0;h<u.length;h++){var d=u[h].split("=");if(d.length===2){var p=d[1].trim();switch(d[0].trim()){case"alt":o=p;break;case"width":i=eT(p);break;case"height":a=eT(p);break;case"totalheight":s=eT(p);break;default:throw new tt("Invalid key: '"+d[0]+"' in \\includegraphics.")}}}var f=Qt(e[0],"url").url;return o===""&&(o=(o=(o=f).replace(/^.*[\\/]/,"")).substring(0,o.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:f})?{type:"includegraphics",mode:n.mode,alt:o,width:i,height:a,totalheight:s,src:f}:n.formatUnsupportedCmd("\\includegraphics")}),"handler"),htmlBuilder:l(((t,e)=>{var r=Qr(t.height,e),n=0;t.totalheight.number>0&&(n=Qr(t.totalheight,e)-r);var i=0;t.width.number>0&&(i=Qr(t.width,e));var a={height:st(r+n)};i>0&&(a.width=st(i)),n>0&&(a.verticalAlign=st(-n));var s=new V0e(t.src,t.alt,a);return s.height=r,s.depth=n,s}),"htmlBuilder"),mathmlBuilder:l(((t,e)=>{var r=new Ve.MathNode("mglyph",[]);r.setAttribute("alt",t.alt);var n=Qr(t.height,e),i=0;if(t.totalheight.number>0&&(i=Qr(t.totalheight,e)-n,r.setAttribute("valign",st(-i))),r.setAttribute("height",st(n+i)),t.width.number>0){var a=Qr(t.width,e);r.setAttribute("width",st(a))}return r.setAttribute("src",t.src),r}),"mathmlBuilder")}),ft({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,i=Qt(e[0],"size");if(r.settings.strict){var a=n[1]==="m",s=i.value.unit==="mu";a?(s||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, not "+i.value.unit+" units"),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):s&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:i.value}},htmlBuilder:(t,e)=>Me.makeGlue(t.dimension,e),mathmlBuilder(t,e){var r=Qr(t.dimension,e);return new Ve.SpaceNode(r)}}),ft({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:l(((t,e)=>{var{parser:r,funcName:n}=t,i=e[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:i}}),"handler"),htmlBuilder:l(((t,e)=>{var r;t.alignment==="clap"?(r=Me.makeSpan([],[hr(t.body,e)]),r=Me.makeSpan(["inner"],[r],e)):r=Me.makeSpan(["inner"],[hr(t.body,e)]);var n=Me.makeSpan(["fix"],[]),i=Me.makeSpan([t.alignment],[r,n],e),a=Me.makeSpan(["strut"]);return a.style.height=st(i.height+i.depth),i.depth&&(a.style.verticalAlign=st(-i.depth)),i.children.unshift(a),i=Me.makeSpan(["thinbox"],[i],e),Me.makeSpan(["mord","vbox"],[i],e)}),"htmlBuilder"),mathmlBuilder:l(((t,e)=>{var r=new Ve.MathNode("mpadded",[Mr(t.body,e)]);if(t.alignment!=="rlap"){var n=t.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}),"mathmlBuilder")}),ft({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:r,parser:n}=t,i=n.mode;n.switchMode("math");var a=r==="\\("?"\\)":"$",s=n.parseExpression(!1,a);return n.expect(a),n.switchMode(i),{type:"styling",mode:n.mode,style:"text",body:s}}}),ft({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new tt("Mismatched "+t.funcName)}});var fM=l(((t,e)=>{switch(e.style.size){case zt.DISPLAY.size:return t.display;case zt.TEXT.size:return t.text;case zt.SCRIPT.size:return t.script;case zt.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}}),"chooseMathStyle");ft({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:l(((t,e)=>{var{parser:r}=t;return{type:"mathchoice",mode:r.mode,display:xn(e[0]),text:xn(e[1]),script:xn(e[2]),scriptscript:xn(e[3])}}),"handler"),htmlBuilder:l(((t,e)=>{var r=fM(t,e),n=Bn(r,e,!1);return Me.makeFragment(n)}),"htmlBuilder"),mathmlBuilder:l(((t,e)=>{var r=fM(t,e);return Ul(r,e)}),"mathmlBuilder")});var eK=l(((t,e,r,n,i,a,s)=>{t=Me.makeSpan([],[t]);var o,u,h,d=r&&Pt.isCharacterBox(r);if(e){var p=hr(e,n.havingStyle(i.sup()),n);u={elem:p,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-p.depth)}}if(r){var f=hr(r,n.havingStyle(i.sub()),n);o={elem:f,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-f.height)}}if(u&&o){var g=n.fontMetrics().bigOpSpacing5+o.elem.height+o.elem.depth+o.kern+t.depth+s;h=Me.makeVList({positionType:"bottom",positionData:g,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:o.elem,marginLeft:st(-a)},{type:"kern",size:o.kern},{type:"elem",elem:t},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:st(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(o){var m=t.height-s;h=Me.makeVList({positionType:"top",positionData:m,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:o.elem,marginLeft:st(-a)},{type:"kern",size:o.kern},{type:"elem",elem:t}]},n)}else{if(!u)return t;var y=t.depth+s;h=Me.makeVList({positionType:"bottom",positionData:y,children:[{type:"elem",elem:t},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:st(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}var v=[h];if(o&&a!==0&&!d){var x=Me.makeSpan(["mspace"],[],n);x.style.marginRight=st(a),v.unshift(x)}return Me.makeSpan(["mop","op-limits"],v,n)}),"assembleSupSub"),tK=["\\smallint"],Zd=l(((t,e)=>{var r,n,i,a=!1;t.type==="supsub"?(r=t.sup,n=t.sub,i=Qt(t.base,"op"),a=!0):i=Qt(t,"op");var s,o=e.style,u=!1;if(o.size===zt.DISPLAY.size&&i.symbol&&!Pt.contains(tK,i.name)&&(u=!0),i.symbol){var h=u?"Size2-Regular":"Size1-Regular",d="";if(i.name!=="\\oiint"&&i.name!=="\\oiiint"||(d=i.name.slice(1),i.name=d==="oiint"?"\\iint":"\\iiint"),s=Me.makeSymbol(i.name,h,"math",e,["mop","op-symbol",u?"large-op":"small-op"]),d.length>0){var p=s.italic,f=Me.staticSvg(d+"Size"+(u?"2":"1"),e);s=Me.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:0},{type:"elem",elem:f,shift:u?.08:0}]},e),i.name="\\"+d,s.classes.unshift("mop"),s.italic=p}}else if(i.body){var g=Bn(i.body,e,!0);g.length===1&&g[0]instanceof ns?(s=g[0]).classes[0]="mop":s=Me.makeSpan(["mop"],g,e)}else{for(var m=[],y=1;y<i.name.length;y++)m.push(Me.mathsym(i.name[y],i.mode,e));s=Me.makeSpan(["mop"],m,e)}var v=0,x=0;return(s instanceof ns||i.name==="\\oiint"||i.name==="\\oiiint")&&!i.suppressBaseShift&&(v=(s.height-s.depth)/2-e.fontMetrics().axisHeight,x=s.italic),a?eK(s,r,n,e,o,x,v):(v&&(s.style.position="relative",s.style.top=st(v)),s)}),"htmlBuilder$2"),qy=l(((t,e)=>{var r;if(t.symbol)r=new ja("mo",[Wa(t.name,t.mode)]),Pt.contains(tK,t.name)&&r.setAttribute("largeop","false");else if(t.body)r=new ja("mo",aa(t.body,e));else{r=new ja("mi",[new Gy(t.name.slice(1))]);var n=new ja("mo",[Wa("","text")]);r=t.parentIsSupSub?new ja("mrow",[r,n]):lA([r,n])}return r}),"mathmlBuilder$1"),jme={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};ft({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:l(((t,e)=>{var{parser:r,funcName:n}=t,i=n;return i.length===1&&(i=jme[i]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}}),"handler"),htmlBuilder:Zd,mathmlBuilder:qy}),ft({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:l(((t,e)=>{var{parser:r}=t,n=e[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:xn(n)}}),"handler"),htmlBuilder:Zd,mathmlBuilder:qy});var Wme={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};ft({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Zd,mathmlBuilder:qy}),ft({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Zd,mathmlBuilder:qy}),ft({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t,n=r;return n.length===1&&(n=Wme[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Zd,mathmlBuilder:qy});var rK=l(((t,e)=>{var r,n,i,a,s=!1;if(t.type==="supsub"?(r=t.sup,n=t.sub,i=Qt(t.base,"operatorname"),s=!0):i=Qt(t,"operatorname"),i.body.length>0){for(var o=i.body.map((p=>{var f=p.text;return typeof f=="string"?{type:"textord",mode:p.mode,text:f}:p})),u=Bn(o,e.withFont("mathrm"),!0),h=0;h<u.length;h++){var d=u[h];d instanceof ns&&(d.text=d.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}a=Me.makeSpan(["mop"],u,e)}else a=Me.makeSpan(["mop"],[],e);return s?eK(a,r,n,e,e.style,0,0):a}),"htmlBuilder$1"),Yme=l(((t,e)=>{for(var r=aa(t.body,e.withFont("mathrm")),n=!0,i=0;i<r.length;i++){var a=r[i];if(!(a instanceof Ve.SpaceNode))if(a instanceof Ve.MathNode)switch(a.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":var s=a.children[0];a.children.length===1&&s instanceof Ve.TextNode?s.text=s.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break;default:n=!1}else n=!1}if(n){var o=r.map((d=>d.toText())).join("");r=[new Ve.TextNode(o)]}var u=new Ve.MathNode("mi",r);u.setAttribute("mathvariant","normal");var h=new Ve.MathNode("mo",[Wa("","text")]);return t.parentIsSupSub?new Ve.MathNode("mrow",[u,h]):Ve.newDocumentFragment([u,h])}),"mathmlBuilder");function hA(t,e,r){for(var n=Bn(t,e,!1),i=e.sizeMultiplier/r.sizeMultiplier,a=0;a<n.length;a++){var s=n[a].classes.indexOf("sizing");s<0?Array.prototype.push.apply(n[a].classes,e.sizingClasses(r)):n[a].classes[s+1]==="reset-size"+e.size&&(n[a].classes[s+1]="reset-size"+r.size),n[a].height*=i,n[a].depth*=i}return Me.makeFragment(n)}ft({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:l(((t,e)=>{var{parser:r,funcName:n}=t,i=e[0];return{type:"operatorname",mode:r.mode,body:xn(i),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}}),"handler"),htmlBuilder:rK,mathmlBuilder:Yme}),ae("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),ec({type:"ordgroup",htmlBuilder:(t,e)=>t.semisimple?Me.makeFragment(Bn(t.body,e,!1)):Me.makeSpan(["mord"],Bn(t.body,e,!0),e),mathmlBuilder:(t,e)=>Ul(t.body,e,!0)}),ft({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:r}=t,n=e[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(t,e){var r=hr(t.body,e.havingCrampedStyle()),n=Me.makeLineSpan("overline-line",e),i=e.fontMetrics().defaultRuleThickness,a=Me.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:n},{type:"kern",size:i}]},e);return Me.makeSpan(["mord","overline"],[a],e)},mathmlBuilder(t,e){var r=new Ve.MathNode("mo",[new Ve.TextNode("")]);r.setAttribute("stretchy","true");var n=new Ve.MathNode("mover",[Mr(t.body,e),r]);return n.setAttribute("accent","true"),n}}),ft({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:l(((t,e)=>{var{parser:r}=t,n=e[0];return{type:"phantom",mode:r.mode,body:xn(n)}}),"handler"),htmlBuilder:l(((t,e)=>{var r=Bn(t.body,e.withPhantom(),!1);return Me.makeFragment(r)}),"htmlBuilder"),mathmlBuilder:l(((t,e)=>{var r=aa(t.body,e);return new Ve.MathNode("mphantom",r)}),"mathmlBuilder")}),ft({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:l(((t,e)=>{var{parser:r}=t,n=e[0];return{type:"hphantom",mode:r.mode,body:n}}),"handler"),htmlBuilder:l(((t,e)=>{var r=Me.makeSpan([],[hr(t.body,e.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=Me.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e),Me.makeSpan(["mord"],[r],e)}),"htmlBuilder"),mathmlBuilder:l(((t,e)=>{var r=aa(xn(t.body),e),n=new Ve.MathNode("mphantom",r),i=new Ve.MathNode("mpadded",[n]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}),"mathmlBuilder")}),ft({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:l(((t,e)=>{var{parser:r}=t,n=e[0];return{type:"vphantom",mode:r.mode,body:n}}),"handler"),htmlBuilder:l(((t,e)=>{var r=Me.makeSpan(["inner"],[hr(t.body,e.withPhantom())]),n=Me.makeSpan(["fix"],[]);return Me.makeSpan(["mord","rlap"],[r,n],e)}),"htmlBuilder"),mathmlBuilder:l(((t,e)=>{var r=aa(xn(t.body),e),n=new Ve.MathNode("mphantom",r),i=new Ve.MathNode("mpadded",[n]);return i.setAttribute("width","0px"),i}),"mathmlBuilder")}),ft({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t,n=Qt(e[0],"size").value,i=e[1];return{type:"raisebox",mode:r.mode,dy:n,body:i}},htmlBuilder(t,e){var r=hr(t.body,e),n=Qr(t.dy,e);return Me.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){var r=new Ve.MathNode("mpadded",[Mr(t.body,e)]),n=t.dy.number+t.dy.unit;return r.setAttribute("voffset",n),r}}),ft({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}}),ft({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler(t,e,r){var{parser:n}=t,i=r[0],a=Qt(e[0],"size"),s=Qt(e[1],"size");return{type:"rule",mode:n.mode,shift:i&&Qt(i,"size").value,width:a.value,height:s.value}},htmlBuilder(t,e){var r=Me.makeSpan(["mord","rule"],[],e),n=Qr(t.width,e),i=Qr(t.height,e),a=t.shift?Qr(t.shift,e):0;return r.style.borderRightWidth=st(n),r.style.borderTopWidth=st(i),r.style.bottom=st(a),r.width=n,r.height=i+a,r.depth=-a,r.maxFontSize=1.125*i*e.sizeMultiplier,r},mathmlBuilder(t,e){var r=Qr(t.width,e),n=Qr(t.height,e),i=t.shift?Qr(t.shift,e):0,a=e.color&&e.getColor()||"black",s=new Ve.MathNode("mspace");s.setAttribute("mathbackground",a),s.setAttribute("width",st(r)),s.setAttribute("height",st(n));var o=new Ve.MathNode("mpadded",[s]);return i>=0?o.setAttribute("height",st(i)):(o.setAttribute("height",st(i)),o.setAttribute("depth",st(-i))),o.setAttribute("voffset",st(i)),o}}),l(hA,"sizingGroup");var gM=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Vme=l(((t,e)=>{var r=e.havingSize(t.size);return hA(t.body,r,e)}),"htmlBuilder");ft({type:"sizing",names:gM,props:{numArgs:0,allowedInText:!0},handler:l(((t,e)=>{var{breakOnTokenText:r,funcName:n,parser:i}=t,a=i.parseExpression(!1,r);return{type:"sizing",mode:i.mode,size:gM.indexOf(n)+1,body:a}}),"handler"),htmlBuilder:Vme,mathmlBuilder:l(((t,e)=>{var r=e.havingSize(t.size),n=aa(t.body,r),i=new Ve.MathNode("mstyle",n);return i.setAttribute("mathsize",st(r.sizeMultiplier)),i}),"mathmlBuilder")}),ft({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:l(((t,e,r)=>{var{parser:n}=t,i=!1,a=!1,s=r[0]&&Qt(r[0],"ordgroup");if(s)for(var o="",u=0;u<s.body.length;++u)if((o=s.body[u].text)==="t")i=!0;else{if(o!=="b"){i=!1,a=!1;break}a=!0}else i=!0,a=!0;var h=e[0];return{type:"smash",mode:n.mode,body:h,smashHeight:i,smashDepth:a}}),"handler"),htmlBuilder:l(((t,e)=>{var r=Me.makeSpan([],[hr(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return r;if(t.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(t.smashDepth&&(r.depth=0,r.children))for(var i=0;i<r.children.length;i++)r.children[i].depth=0;var a=Me.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e);return Me.makeSpan(["mord"],[a],e)}),"htmlBuilder"),mathmlBuilder:l(((t,e)=>{var r=new Ve.MathNode("mpadded",[Mr(t.body,e)]);return t.smashHeight&&r.setAttribute("height","0px"),t.smashDepth&&r.setAttribute("depth","0px"),r}),"mathmlBuilder")}),ft({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n}=t,i=r[0],a=e[0];return{type:"sqrt",mode:n.mode,body:a,index:i}},htmlBuilder(t,e){var r=hr(t.body,e.havingCrampedStyle());r.height===0&&(r.height=e.fontMetrics().xHeight),r=Me.wrapFragment(r,e);var n=e.fontMetrics().defaultRuleThickness,i=n;e.style.id<zt.TEXT.id&&(i=e.fontMetrics().xHeight);var a=n+i/4,s=r.height+r.depth+a+n,{span:o,ruleWidth:u,advanceWidth:h}=_o.sqrtImage(s,e),d=o.height-u;d>r.height+r.depth+a&&(a=(a+d-r.height-r.depth)/2);var p=o.height-r.height-a-u;r.style.paddingLeft=st(h);var f=Me.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+p)},{type:"elem",elem:o},{type:"kern",size:u}]},e);if(t.index){var g=e.havingStyle(zt.SCRIPTSCRIPT),m=hr(t.index,g,e),y=.6*(f.height-f.depth),v=Me.makeVList({positionType:"shift",positionData:-y,children:[{type:"elem",elem:m}]},e),x=Me.makeSpan(["root"],[v]);return Me.makeSpan(["mord","sqrt"],[x,f],e)}return Me.makeSpan(["mord","sqrt"],[f],e)},mathmlBuilder(t,e){var{body:r,index:n}=t;return n?new Ve.MathNode("mroot",[Mr(r,e),Mr(n,e)]):new Ve.MathNode("msqrt",[Mr(r,e)])}});var mM={display:zt.DISPLAY,text:zt.TEXT,script:zt.SCRIPT,scriptscript:zt.SCRIPTSCRIPT};ft({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:r,funcName:n,parser:i}=t,a=i.parseExpression(!0,r),s=n.slice(1,n.length-5);return{type:"styling",mode:i.mode,style:s,body:a}},htmlBuilder(t,e){var r=mM[t.style],n=e.havingStyle(r).withFont("");return hA(t.body,n,e)},mathmlBuilder(t,e){var r=mM[t.style],n=e.havingStyle(r),i=aa(t.body,n),a=new Ve.MathNode("mstyle",i),s={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[t.style];return a.setAttribute("scriptlevel",s[0]),a.setAttribute("displaystyle",s[1]),a}});var Hme=l((function(t,e){var r=t.base;return r?r.type==="op"?r.limits&&(e.style.size===zt.DISPLAY.size||r.alwaysHandleSupSub)?Zd:null:r.type==="operatorname"?r.alwaysHandleSupSub&&(e.style.size===zt.DISPLAY.size||r.limits)?rK:null:r.type==="accent"?Pt.isCharacterBox(r.base)?D_:null:r.type==="horizBrace"&&!t.sub===r.isOver?JX:null:null}),"htmlBuilderDelegate");ec({type:"supsub",htmlBuilder(t,e){var r=Hme(t,e);if(r)return r(t,e);var n,i,a,{base:s,sup:o,sub:u}=t,h=hr(s,e),d=e.fontMetrics(),p=0,f=0,g=s&&Pt.isCharacterBox(s);if(o){var m=e.havingStyle(e.style.sup());n=hr(o,m,e),g||(p=h.height-m.fontMetrics().supDrop*m.sizeMultiplier/e.sizeMultiplier)}if(u){var y=e.havingStyle(e.style.sub());i=hr(u,y,e),g||(f=h.depth+y.fontMetrics().subDrop*y.sizeMultiplier/e.sizeMultiplier)}a=e.style===zt.DISPLAY?d.sup1:e.style.cramped?d.sup3:d.sup2;var v,x=e.sizeMultiplier,b=st(.5/d.ptPerEm/x),w=null;if(i){var T=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(h instanceof ns||T)&&(w=st(-h.italic))}if(n&&i){p=Math.max(p,a,n.depth+.25*d.xHeight),f=Math.max(f,d.sub2);var k=4*d.defaultRuleThickness;if(p-n.depth-(i.height-f)<k){f=k-(p-n.depth)+i.height;var C=.8*d.xHeight-(p-n.depth);C>0&&(p+=C,f-=C)}var E=[{type:"elem",elem:i,shift:f,marginRight:b,marginLeft:w},{type:"elem",elem:n,shift:-p,marginRight:b}];v=Me.makeVList({positionType:"individualShift",children:E},e)}else if(i){f=Math.max(f,d.sub1,i.height-.8*d.xHeight);var _=[{type:"elem",elem:i,marginLeft:w,marginRight:b}];v=Me.makeVList({positionType:"shift",positionData:f,children:_},e)}else{if(!n)throw new Error("supsub must have either sup or sub.");p=Math.max(p,a,n.depth+.25*d.xHeight),v=Me.makeVList({positionType:"shift",positionData:-p,children:[{type:"elem",elem:n,marginRight:b}]},e)}var S=I_(h,"right")||"mord";return Me.makeSpan([S],[h,Me.makeSpan(["msupsub"],[v])],e)},mathmlBuilder(t,e){var r,n=!1;t.base&&t.base.type==="horizBrace"&&!!t.sup===t.base.isOver&&(n=!0,r=t.base.isOver),!t.base||t.base.type!=="op"&&t.base.type!=="operatorname"||(t.base.parentIsSupSub=!0);var i,a=[Mr(t.base,e)];if(t.sub&&a.push(Mr(t.sub,e)),t.sup&&a.push(Mr(t.sup,e)),n)i=r?"mover":"munder";else if(t.sub)if(t.sup){var s=t.base;i=s&&s.type==="op"&&s.limits&&e.style===zt.DISPLAY||s&&s.type==="operatorname"&&s.alwaysHandleSupSub&&(e.style===zt.DISPLAY||s.limits)?"munderover":"msubsup"}else{var o=t.base;i=o&&o.type==="op"&&o.limits&&(e.style===zt.DISPLAY||o.alwaysHandleSupSub)||o&&o.type==="operatorname"&&o.alwaysHandleSupSub&&(o.limits||e.style===zt.DISPLAY)?"munder":"msub"}else{var u=t.base;i=u&&u.type==="op"&&u.limits&&(e.style===zt.DISPLAY||u.alwaysHandleSupSub)||u&&u.type==="operatorname"&&u.alwaysHandleSupSub&&(u.limits||e.style===zt.DISPLAY)?"mover":"msup"}return new Ve.MathNode(i,a)}}),ec({type:"atom",htmlBuilder:(t,e)=>Me.mathsym(t.text,t.mode,e,["m"+t.family]),mathmlBuilder(t,e){var r=new Ve.MathNode("mo",[Wa(t.text,t.mode)]);if(t.family==="bin"){var n=R_(t,e);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else t.family==="punct"?r.setAttribute("separator","true"):t.family!=="open"&&t.family!=="close"||r.setAttribute("stretchy","false");return r}});var yM={mi:"italic",mn:"normal",mtext:"normal"};ec({type:"mathord",htmlBuilder:(t,e)=>Me.makeOrd(t,e,"mathord"),mathmlBuilder(t,e){var r=new Ve.MathNode("mi",[Wa(t.text,t.mode,e)]),n=R_(t,e)||"italic";return n!==yM[r.type]&&r.setAttribute("mathvariant",n),r}}),ec({type:"textord",htmlBuilder:(t,e)=>Me.makeOrd(t,e,"textord"),mathmlBuilder(t,e){var r,n=Wa(t.text,t.mode,e),i=R_(t,e)||"normal";return r=t.mode==="text"?new Ve.MathNode("mtext",[n]):/[0-9]/.test(t.text)?new Ve.MathNode("mn",[n]):t.text==="\\prime"?new Ve.MathNode("mo",[n]):new Ve.MathNode("mi",[n]),i!==yM[r.type]&&r.setAttribute("mathvariant",i),r}});var tT={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},rT={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};ec({type:"spacing",htmlBuilder(t,e){if(rT.hasOwnProperty(t.text)){var r=rT[t.text].className||"";if(t.mode==="text"){var n=Me.makeOrd(t,e,"textord");return n.classes.push(r),n}return Me.makeSpan(["mspace",r],[Me.mathsym(t.text,t.mode,e)],e)}if(tT.hasOwnProperty(t.text))return Me.makeSpan(["mspace",tT[t.text]],[],e);throw new tt('Unknown type of space "'+t.text+'"')},mathmlBuilder(t,e){if(!rT.hasOwnProperty(t.text)){if(tT.hasOwnProperty(t.text))return new Ve.MathNode("mspace");throw new tt('Unknown type of space "'+t.text+'"')}return new Ve.MathNode("mtext",[new Ve.TextNode("")])}});var vM=l((()=>{var t=new Ve.MathNode("mtd",[]);return t.setAttribute("width","50%"),t}),"pad");ec({type:"tag",mathmlBuilder(t,e){var r=new Ve.MathNode("mtable",[new Ve.MathNode("mtr",[vM(),new Ve.MathNode("mtd",[Ul(t.body,e)]),vM(),new Ve.MathNode("mtd",[Ul(t.tag,e)])])]);return r.setAttribute("width","100%"),r}});var xM={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},bM={"\\textbf":"textbf","\\textmd":"textmd"},Xme={"\\textit":"textit","\\textup":"textup"},wM=l(((t,e)=>{var r=t.font;return r?xM[r]?e.withTextFontFamily(xM[r]):bM[r]?e.withTextFontWeight(bM[r]):r==="\\emph"?e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit"):e.withTextFontShape(Xme[r]):e}),"optionsWithFont");ft({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];return{type:"text",mode:r.mode,body:xn(i),font:n}},htmlBuilder(t,e){var r=wM(t,e),n=Bn(t.body,r,!0);return Me.makeSpan(["mord","text"],n,r)},mathmlBuilder(t,e){var r=wM(t,e);return Ul(t.body,r)}}),ft({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"underline",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=hr(t.body,e),n=Me.makeLineSpan("underline-line",e),i=e.fontMetrics().defaultRuleThickness,a=Me.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:i},{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:r}]},e);return Me.makeSpan(["mord","underline"],[a],e)},mathmlBuilder(t,e){var r=new Ve.MathNode("mo",[new Ve.TextNode("")]);r.setAttribute("stretchy","true");var n=new Ve.MathNode("munder",[Mr(t.body,e),r]);return n.setAttribute("accentunder","true"),n}}),ft({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"vcenter",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=hr(t.body,e),n=e.fontMetrics().axisHeight,i=.5*(r.height-n-(r.depth+n));return Me.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:r}]},e)},mathmlBuilder:(t,e)=>new Ve.MathNode("mpadded",[Mr(t.body,e)],["vcenter"])}),ft({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,r){throw new tt("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var r=kM(t),n=[],i=e.havingStyle(e.style.text()),a=0;a<r.length;a++){var s=r[a];s==="~"&&(s="\\textasciitilde"),n.push(Me.makeSymbol(s,"Typewriter-Regular",t.mode,i,["mord","texttt"]))}return Me.makeSpan(["mord","text"].concat(i.sizingClasses(e)),Me.tryCombineChars(n),i)},mathmlBuilder(t,e){var r=new Ve.TextNode(kM(t)),n=new Ve.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var kM=l((t=>t.body.replace(/ /g,t.star?"":"")),"makeVerb"),Ml=PX,Kme=new RegExp("[-]+$"),Wp,TM=(Wp=class{constructor(e,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=r,this.tokenRegex=new RegExp(`([ \r
	]+)|\\\\(
|[ \r	]+
?)[ \r	]*|([!-\\[\\]---][-]*|[\uD800-\uDBFF][\uDC00-\uDFFF][-]*|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5|(\\\\[a-zA-Z@]+)[ \r
	]*|\\\\[^\uD800-\uDFFF])`,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,r){this.catcodes[e]=r}lex(){var e=this.input,r=this.tokenRegex.lastIndex;if(r===e.length)return new eo("EOF",new hs(this,r,r));var n=this.tokenRegex.exec(e);if(n===null||n.index!==r)throw new tt("Unexpected character: '"+e[r]+"'",new eo(e[r],new hs(this,r,r+1)));var i=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[i]===14){var a=e.indexOf(`
`,this.tokenRegex.lastIndex);return a===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=a+1,this.lex()}return new eo(i,new hs(this,r,this.tokenRegex.lastIndex))}},l(Wp,"Lexer"),Wp),Yp,Zme=(Yp=class{constructor(e,r){e===void 0&&(e={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new tt("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var r in e)e.hasOwnProperty(r)&&(e[r]==null?delete this.current[r]:this.current[r]=e[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,r,n){if(n===void 0&&(n=!1),n){for(var i=0;i<this.undefStack.length;i++)delete this.undefStack[i][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=r)}else{var a=this.undefStack[this.undefStack.length-1];a&&!a.hasOwnProperty(e)&&(a[e]=this.current[e])}r==null?delete this.current[e]:this.current[e]=r}},l(Yp,"Namespace"),Yp),Qme=ZX;ae("\\noexpand",(function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}})),ae("\\expandafter",(function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}})),ae("\\@firstoftwo",(function(t){return{tokens:t.consumeArgs(2)[0],numArgs:0}})),ae("\\@secondoftwo",(function(t){return{tokens:t.consumeArgs(2)[1],numArgs:0}})),ae("\\@ifnextchar",(function(t){var e=t.consumeArgs(3);t.consumeSpaces();var r=t.future();return e[0].length===1&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}})),ae("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),ae("\\TextOrMath",(function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}}));var EM={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};ae("\\char",(function(t){var e,r=t.popToken(),n="";if(r.text==="'")e=8,r=t.popToken();else if(r.text==='"')e=16,r=t.popToken();else if(r.text==="`")if((r=t.popToken()).text[0]==="\\")n=r.text.charCodeAt(1);else{if(r.text==="EOF")throw new tt("\\char` missing argument");n=r.text.charCodeAt(0)}else e=10;if(e){if((n=EM[r.text])==null||n>=e)throw new tt("Invalid base-"+e+" digit "+r.text);for(var i;(i=EM[t.future().text])!=null&&i<e;)n*=e,n+=i,t.popToken()}return"\\@char{"+n+"}"}));var nT=l(((t,e,r)=>{var n=t.consumeArg().tokens;if(n.length!==1)throw new tt("\\newcommand's first argument must be a macro name");var i=n[0].text,a=t.isDefined(i);if(a&&!e)throw new tt("\\newcommand{"+i+"} attempting to redefine "+i+"; use \\renewcommand");if(!a&&!r)throw new tt("\\renewcommand{"+i+"} when command "+i+" does not yet exist; use \\newcommand");var s=0;if((n=t.consumeArg().tokens).length===1&&n[0].text==="["){for(var o="",u=t.expandNextToken();u.text!=="]"&&u.text!=="EOF";)o+=u.text,u=t.expandNextToken();if(!o.match(/^\s*[0-9]+\s*$/))throw new tt("Invalid number of arguments: "+o);s=parseInt(o),n=t.consumeArg().tokens}return t.macros.set(i,{tokens:n,numArgs:s}),""}),"newcommand");ae("\\newcommand",(t=>nT(t,!1,!0))),ae("\\renewcommand",(t=>nT(t,!0,!1))),ae("\\providecommand",(t=>nT(t,!0,!0))),ae("\\message",(t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map((r=>r.text)).join("")),""})),ae("\\errmessage",(t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map((r=>r.text)).join("")),""})),ae("\\show",(t=>{var e=t.popToken(),r=e.text;return console.log(e,t.macros.get(r),Ml[r],zr.math[r],zr.text[r]),""})),ae("\\bgroup","{"),ae("\\egroup","}"),ae("~","\\nobreakspace"),ae("\\lq","`"),ae("\\rq","'"),ae("\\aa","\\r a"),ae("\\AA","\\r A"),ae("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}"),ae("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),ae("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}"),ae("","\\mathscr{B}"),ae("","\\mathscr{E}"),ae("","\\mathscr{F}"),ae("","\\mathscr{H}"),ae("","\\mathscr{I}"),ae("","\\mathscr{L}"),ae("","\\mathscr{M}"),ae("","\\mathscr{R}"),ae("","\\mathfrak{C}"),ae("","\\mathfrak{H}"),ae("","\\mathfrak{Z}"),ae("\\Bbbk","\\Bbb{k}"),ae("","\\cdotp"),ae("\\llap","\\mathllap{\\textrm{#1}}"),ae("\\rlap","\\mathrlap{\\textrm{#1}}"),ae("\\clap","\\mathclap{\\textrm{#1}}"),ae("\\mathstrut","\\vphantom{(}"),ae("\\underbar","\\underline{\\text{#1}}"),ae("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),ae("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}"),ae("\\ne","\\neq"),ae("","\\neq"),ae("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}"),ae("","\\notin"),ae("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}"),ae("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}"),ae("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}"),ae("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}"),ae("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}"),ae("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}"),ae("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}"),ae("","\\perp"),ae("","\\mathclose{!\\mkern-0.8mu!}"),ae("","\\notni"),ae("","\\ulcorner"),ae("","\\urcorner"),ae("","\\llcorner"),ae("","\\lrcorner"),ae("","\\copyright"),ae("","\\textregistered"),ae("","\\textregistered"),ae("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),ae("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),ae("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),ae("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),ae("\\vdots","\\mathord{\\varvdots\\rule{0pt}{15pt}}"),ae("","\\vdots"),ae("\\varGamma","\\mathit{\\Gamma}"),ae("\\varDelta","\\mathit{\\Delta}"),ae("\\varTheta","\\mathit{\\Theta}"),ae("\\varLambda","\\mathit{\\Lambda}"),ae("\\varXi","\\mathit{\\Xi}"),ae("\\varPi","\\mathit{\\Pi}"),ae("\\varSigma","\\mathit{\\Sigma}"),ae("\\varUpsilon","\\mathit{\\Upsilon}"),ae("\\varPhi","\\mathit{\\Phi}"),ae("\\varPsi","\\mathit{\\Psi}"),ae("\\varOmega","\\mathit{\\Omega}"),ae("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),ae("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax"),ae("\\boxed","\\fbox{$\\displaystyle{#1}$}"),ae("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),ae("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),ae("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");var _M={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};ae("\\dots",(function(t){var e="\\dotso",r=t.expandAfterFuture().text;return r in _M?e=_M[r]:(r.slice(0,4)==="\\not"||r in zr.math&&Pt.contains(["bin","rel"],zr.math[r].group))&&(e="\\dotsb"),e}));var iT={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};ae("\\dotso",(function(t){return t.future().text in iT?"\\ldots\\,":"\\ldots"})),ae("\\dotsc",(function(t){var e=t.future().text;return e in iT&&e!==","?"\\ldots\\,":"\\ldots"})),ae("\\cdots",(function(t){return t.future().text in iT?"\\@cdots\\,":"\\@cdots"})),ae("\\dotsb","\\cdots"),ae("\\dotsm","\\cdots"),ae("\\dotsi","\\!\\cdots"),ae("\\dotsx","\\ldots\\,"),ae("\\DOTSI","\\relax"),ae("\\DOTSB","\\relax"),ae("\\DOTSX","\\relax"),ae("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),ae("\\,","\\tmspace+{3mu}{.1667em}"),ae("\\thinspace","\\,"),ae("\\>","\\mskip{4mu}"),ae("\\:","\\tmspace+{4mu}{.2222em}"),ae("\\medspace","\\:"),ae("\\;","\\tmspace+{5mu}{.2777em}"),ae("\\thickspace","\\;"),ae("\\!","\\tmspace-{3mu}{.1667em}"),ae("\\negthinspace","\\!"),ae("\\negmedspace","\\tmspace-{4mu}{.2222em}"),ae("\\negthickspace","\\tmspace-{5mu}{.277em}"),ae("\\enspace","\\kern.5em "),ae("\\enskip","\\hskip.5em\\relax"),ae("\\quad","\\hskip1em\\relax"),ae("\\qquad","\\hskip2em\\relax"),ae("\\tag","\\@ifstar\\tag@literal\\tag@paren"),ae("\\tag@paren","\\tag@literal{({#1})}"),ae("\\tag@literal",(t=>{if(t.macros.get("\\df@tag"))throw new tt("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"})),ae("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),ae("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),ae("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),ae("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),ae("\\newline","\\\\\\relax"),ae("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var CM=st(Hs["Main-Regular"][84][1]-.7*Hs["Main-Regular"][65][1]);ae("\\LaTeX","\\textrm{\\html@mathml{L\\kern-.36em\\raisebox{"+CM+"}{\\scriptstyle A}\\kern-.15em\\TeX}{LaTeX}}"),ae("\\KaTeX","\\textrm{\\html@mathml{K\\kern-.17em\\raisebox{"+CM+"}{\\scriptstyle A}\\kern-.15em\\TeX}{KaTeX}}"),ae("\\hspace","\\@ifstar\\@hspacer\\@hspace"),ae("\\@hspace","\\hskip #1\\relax"),ae("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),ae("\\ordinarycolon",":"),ae("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),ae("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),ae("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),ae("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),ae("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),ae("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),ae("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),ae("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),ae("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),ae("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),ae("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),ae("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),ae("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),ae("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),ae("","\\dblcolon"),ae("","\\eqcolon"),ae("","\\coloneqq"),ae("","\\eqqcolon"),ae("","\\Coloneqq"),ae("\\ratio","\\vcentcolon"),ae("\\coloncolon","\\dblcolon"),ae("\\colonequals","\\coloneqq"),ae("\\coloncolonequals","\\Coloneqq"),ae("\\equalscolon","\\eqqcolon"),ae("\\equalscoloncolon","\\Eqqcolon"),ae("\\colonminus","\\coloneq"),ae("\\coloncolonminus","\\Coloneq"),ae("\\minuscolon","\\eqcolon"),ae("\\minuscoloncolon","\\Eqcolon"),ae("\\coloncolonapprox","\\Colonapprox"),ae("\\coloncolonsim","\\Colonsim"),ae("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),ae("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),ae("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),ae("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),ae("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}"),ae("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),ae("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),ae("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),ae("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),ae("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),ae("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),ae("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),ae("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),ae("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}"),ae("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}"),ae("\\ngeqq","\\html@mathml{\\@ngeqq}{}"),ae("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}"),ae("\\nleqq","\\html@mathml{\\@nleqq}{}"),ae("\\nleqslant","\\html@mathml{\\@nleqslant}{}"),ae("\\nshortmid","\\html@mathml{\\@nshortmid}{}"),ae("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}"),ae("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}"),ae("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}"),ae("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}"),ae("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}"),ae("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}"),ae("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}"),ae("\\imath","\\html@mathml{\\@imath}{}"),ae("\\jmath","\\html@mathml{\\@jmath}{}"),ae("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}"),ae("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}"),ae("","\\llbracket"),ae("","\\rrbracket"),ae("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}"),ae("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}"),ae("","\\lBrace"),ae("","\\rBrace"),ae("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}"),ae("","\\minuso"),ae("\\darr","\\downarrow"),ae("\\dArr","\\Downarrow"),ae("\\Darr","\\Downarrow"),ae("\\lang","\\langle"),ae("\\rang","\\rangle"),ae("\\uarr","\\uparrow"),ae("\\uArr","\\Uparrow"),ae("\\Uarr","\\Uparrow"),ae("\\N","\\mathbb{N}"),ae("\\R","\\mathbb{R}"),ae("\\Z","\\mathbb{Z}"),ae("\\alef","\\aleph"),ae("\\alefsym","\\aleph"),ae("\\Alpha","\\mathrm{A}"),ae("\\Beta","\\mathrm{B}"),ae("\\bull","\\bullet"),ae("\\Chi","\\mathrm{X}"),ae("\\clubs","\\clubsuit"),ae("\\cnums","\\mathbb{C}"),ae("\\Complex","\\mathbb{C}"),ae("\\Dagger","\\ddagger"),ae("\\diamonds","\\diamondsuit"),ae("\\empty","\\emptyset"),ae("\\Epsilon","\\mathrm{E}"),ae("\\Eta","\\mathrm{H}"),ae("\\exist","\\exists"),ae("\\harr","\\leftrightarrow"),ae("\\hArr","\\Leftrightarrow"),ae("\\Harr","\\Leftrightarrow"),ae("\\hearts","\\heartsuit"),ae("\\image","\\Im"),ae("\\infin","\\infty"),ae("\\Iota","\\mathrm{I}"),ae("\\isin","\\in"),ae("\\Kappa","\\mathrm{K}"),ae("\\larr","\\leftarrow"),ae("\\lArr","\\Leftarrow"),ae("\\Larr","\\Leftarrow"),ae("\\lrarr","\\leftrightarrow"),ae("\\lrArr","\\Leftrightarrow"),ae("\\Lrarr","\\Leftrightarrow"),ae("\\Mu","\\mathrm{M}"),ae("\\natnums","\\mathbb{N}"),ae("\\Nu","\\mathrm{N}"),ae("\\Omicron","\\mathrm{O}"),ae("\\plusmn","\\pm"),ae("\\rarr","\\rightarrow"),ae("\\rArr","\\Rightarrow"),ae("\\Rarr","\\Rightarrow"),ae("\\real","\\Re"),ae("\\reals","\\mathbb{R}"),ae("\\Reals","\\mathbb{R}"),ae("\\Rho","\\mathrm{P}"),ae("\\sdot","\\cdot"),ae("\\sect","\\S"),ae("\\spades","\\spadesuit"),ae("\\sub","\\subset"),ae("\\sube","\\subseteq"),ae("\\supe","\\supseteq"),ae("\\Tau","\\mathrm{T}"),ae("\\thetasym","\\vartheta"),ae("\\weierp","\\wp"),ae("\\Zeta","\\mathrm{Z}"),ae("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),ae("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),ae("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),ae("\\bra","\\mathinner{\\langle{#1}|}"),ae("\\ket","\\mathinner{|{#1}\\rangle}"),ae("\\braket","\\mathinner{\\langle{#1}\\rangle}"),ae("\\Bra","\\left\\langle#1\\right|"),ae("\\Ket","\\left|#1\\right\\rangle");var SM=l((t=>e=>{var r=e.consumeArg().tokens,n=e.consumeArg().tokens,i=e.consumeArg().tokens,a=e.consumeArg().tokens,s=e.macros.get("|"),o=e.macros.get("\\|");e.macros.beginGroup();var u=l((p=>f=>{t&&(f.macros.set("|",s),i.length&&f.macros.set("\\|",o));var g=p;return!p&&i.length&&f.future().text==="|"&&(f.popToken(),g=!0),{tokens:g?i:n,numArgs:0}}),"midMacro");e.macros.set("|",u(!1)),i.length&&e.macros.set("\\|",u(!0));var h=e.consumeArg().tokens,d=e.expandTokens([...a,...h,...r]);return e.macros.endGroup(),{tokens:d.reverse(),numArgs:0}}),"braketHelper");ae("\\bra@ket",SM(!1)),ae("\\bra@set",SM(!0)),ae("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}"),ae("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}"),ae("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}"),ae("\\angln","{\\angl n}"),ae("\\blue","\\textcolor{##6495ed}{#1}"),ae("\\orange","\\textcolor{##ffa500}{#1}"),ae("\\pink","\\textcolor{##ff00af}{#1}"),ae("\\red","\\textcolor{##df0030}{#1}"),ae("\\green","\\textcolor{##28ae7b}{#1}"),ae("\\gray","\\textcolor{gray}{#1}"),ae("\\purple","\\textcolor{##9d38bd}{#1}"),ae("\\blueA","\\textcolor{##ccfaff}{#1}"),ae("\\blueB","\\textcolor{##80f6ff}{#1}"),ae("\\blueC","\\textcolor{##63d9ea}{#1}"),ae("\\blueD","\\textcolor{##11accd}{#1}"),ae("\\blueE","\\textcolor{##0c7f99}{#1}"),ae("\\tealA","\\textcolor{##94fff5}{#1}"),ae("\\tealB","\\textcolor{##26edd5}{#1}"),ae("\\tealC","\\textcolor{##01d1c1}{#1}"),ae("\\tealD","\\textcolor{##01a995}{#1}"),ae("\\tealE","\\textcolor{##208170}{#1}"),ae("\\greenA","\\textcolor{##b6ffb0}{#1}"),ae("\\greenB","\\textcolor{##8af281}{#1}"),ae("\\greenC","\\textcolor{##74cf70}{#1}"),ae("\\greenD","\\textcolor{##1fab54}{#1}"),ae("\\greenE","\\textcolor{##0d923f}{#1}"),ae("\\goldA","\\textcolor{##ffd0a9}{#1}"),ae("\\goldB","\\textcolor{##ffbb71}{#1}"),ae("\\goldC","\\textcolor{##ff9c39}{#1}"),ae("\\goldD","\\textcolor{##e07d10}{#1}"),ae("\\goldE","\\textcolor{##a75a05}{#1}"),ae("\\redA","\\textcolor{##fca9a9}{#1}"),ae("\\redB","\\textcolor{##ff8482}{#1}"),ae("\\redC","\\textcolor{##f9685d}{#1}"),ae("\\redD","\\textcolor{##e84d39}{#1}"),ae("\\redE","\\textcolor{##bc2612}{#1}"),ae("\\maroonA","\\textcolor{##ffbde0}{#1}"),ae("\\maroonB","\\textcolor{##ff92c6}{#1}"),ae("\\maroonC","\\textcolor{##ed5fa6}{#1}"),ae("\\maroonD","\\textcolor{##ca337c}{#1}"),ae("\\maroonE","\\textcolor{##9e034e}{#1}"),ae("\\purpleA","\\textcolor{##ddd7ff}{#1}"),ae("\\purpleB","\\textcolor{##c6b9fc}{#1}"),ae("\\purpleC","\\textcolor{##aa87ff}{#1}"),ae("\\purpleD","\\textcolor{##7854ab}{#1}"),ae("\\purpleE","\\textcolor{##543b78}{#1}"),ae("\\mintA","\\textcolor{##f5f9e8}{#1}"),ae("\\mintB","\\textcolor{##edf2df}{#1}"),ae("\\mintC","\\textcolor{##e0e5cc}{#1}"),ae("\\grayA","\\textcolor{##f6f7f7}{#1}"),ae("\\grayB","\\textcolor{##f0f1f2}{#1}"),ae("\\grayC","\\textcolor{##e3e5e6}{#1}"),ae("\\grayD","\\textcolor{##d6d8da}{#1}"),ae("\\grayE","\\textcolor{##babec2}{#1}"),ae("\\grayF","\\textcolor{##888d93}{#1}"),ae("\\grayG","\\textcolor{##626569}{#1}"),ae("\\grayH","\\textcolor{##3b3e40}{#1}"),ae("\\grayI","\\textcolor{##21242c}{#1}"),ae("\\kaBlue","\\textcolor{##314453}{#1}"),ae("\\kaGreen","\\textcolor{##71B307}{#1}");var nK={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0},Vp,Jme=(Vp=class{constructor(e,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(e),this.macros=new Zme(Qme,r.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new TM(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var r,n,i;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:i,end:n}=this.consumeArg(["]"])}else({tokens:i,start:r,end:n}=this.consumeArg());return this.pushToken(new eo("EOF",n.loc)),this.pushTokens(i),r.range(n,"")}consumeSpaces(){for(;this.future().text===" ";)this.stack.pop()}consumeArg(e){var r=[],n=e&&e.length>0;n||this.consumeSpaces();var i,a=this.future(),s=0,o=0;do{if(i=this.popToken(),r.push(i),i.text==="{")++s;else if(i.text==="}"){if(--s===-1)throw new tt("Extra }",i)}else if(i.text==="EOF")throw new tt("Unexpected end of input in a macro argument, expected '"+(e&&n?e[o]:"}")+"'",i);if(e&&n)if((s===0||s===1&&e[o]==="{")&&i.text===e[o]){if(++o===e.length){r.splice(-o,o);break}}else o=0}while(s!==0||n);return a.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:a,end:i}}consumeArgs(e,r){if(r){if(r.length!==e+1)throw new tt("The length of delimiters doesn't match the number of args!");for(var n=r[0],i=0;i<n.length;i++){var a=this.popToken();if(n[i]!==a.text)throw new tt("Use of the macro doesn't match its definition",a)}}for(var s=[],o=0;o<e;o++)s.push(this.consumeArg(r&&r[o+1]).tokens);return s}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new tt("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var r=this.popToken(),n=r.text,i=r.noexpand?null:this._getExpansion(n);if(i==null||e&&i.unexpandable){if(e&&i==null&&n[0]==="\\"&&!this.isDefined(n))throw new tt("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var a=i.tokens,s=this.consumeArgs(i.numArgs,i.delimiters);if(i.numArgs)for(var o=(a=a.slice()).length-1;o>=0;--o){var u=a[o];if(u.text==="#"){if(o===0)throw new tt("Incomplete placeholder at end of macro body",u);if((u=a[--o]).text==="#")a.splice(o+1,1);else{if(!/^[1-9]$/.test(u.text))throw new tt("Not a valid argument number",u);a.splice(o,2,...s[+u.text-1])}}}return this.pushTokens(a),a.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new eo(e)]):void 0}expandTokens(e){var r=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var i=this.stack.pop();i.treatAsRelax&&(i.noexpand=!1,i.treatAsRelax=!1),r.push(i)}return this.countExpansion(r.length),r}expandMacroAsText(e){var r=this.expandMacro(e);return r&&r.map((n=>n.text)).join("")}_getExpansion(e){var r=this.macros.get(e);if(r==null)return r;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var i=typeof r=="function"?r(this):r;if(typeof i=="string"){var a=0;if(i.indexOf("#")!==-1)for(var s=i.replace(/##/g,"");s.indexOf("#"+(a+1))!==-1;)++a;for(var o=new TM(i,this.settings),u=[],h=o.lex();h.text!=="EOF";)u.push(h),h=o.lex();return u.reverse(),{tokens:u,numArgs:a}}return i}isDefined(e){return this.macros.has(e)||Ml.hasOwnProperty(e)||zr.math.hasOwnProperty(e)||zr.text.hasOwnProperty(e)||nK.hasOwnProperty(e)}isExpandable(e){var r=this.macros.get(e);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:Ml.hasOwnProperty(e)&&!Ml[e].primitive}},l(Vp,"MacroExpander"),Vp),AM=/^[]/,Dx=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),aT={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},LM={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},bu,iK=(bu=class{constructor(e,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Jme(e,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(e,r){if(r===void 0&&(r=!0),this.fetch().text!==e)throw new tt("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var r=this.nextToken;this.consume(),this.gullet.pushToken(new eo("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(e,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var i=this.fetch();if(bu.endOfExpression.indexOf(i.text)!==-1||r&&i.text===r||e&&Ml[i.text]&&Ml[i.text].infix)break;var a=this.parseAtom(r);if(!a)break;a.type!=="internal"&&n.push(a)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var r,n=-1,i=0;i<e.length;i++)if(e[i].type==="infix"){if(n!==-1)throw new tt("only one infix operator per group",e[i].token);n=i,r=e[i].replaceWith}if(n!==-1&&r){var a,s,o=e.slice(0,n),u=e.slice(n+1);return a=o.length===1&&o[0].type==="ordgroup"?o[0]:{type:"ordgroup",mode:this.mode,body:o},s=u.length===1&&u[0].type==="ordgroup"?u[0]:{type:"ordgroup",mode:this.mode,body:u},[r==="\\\\abovefrac"?this.callFunction(r,[a,e[n],s],[]):this.callFunction(r,[a,s],[])]}return e}handleSupSubscript(e){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var i=this.parseGroup(e);if(!i)throw new tt("Expected group after '"+n+"'",r);return i}formatUnsupportedCmd(e){for(var r=[],n=0;n<e.length;n++)r.push({type:"textord",mode:"text",text:e[n]});var i={type:"text",mode:this.mode,body:r};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[i]}}parseAtom(e){var r,n,i=this.parseGroup("atom",e);if(this.mode==="text")return i;for(;;){this.consumeSpaces();var a=this.fetch();if(a.text==="\\limits"||a.text==="\\nolimits"){if(i&&i.type==="op"){var s=a.text==="\\limits";i.limits=s,i.alwaysHandleSupSub=!0}else{if(!i||i.type!=="operatorname")throw new tt("Limit controls must follow a math operator",a);i.alwaysHandleSupSub&&(i.limits=a.text==="\\limits")}this.consume()}else if(a.text==="^"){if(r)throw new tt("Double superscript",a);r=this.handleSupSubscript("superscript")}else if(a.text==="_"){if(n)throw new tt("Double subscript",a);n=this.handleSupSubscript("subscript")}else if(a.text==="'"){if(r)throw new tt("Double superscript",a);var o={type:"textord",mode:this.mode,text:"\\prime"},u=[o];for(this.consume();this.fetch().text==="'";)u.push(o),this.consume();this.fetch().text==="^"&&u.push(this.handleSupSubscript("superscript")),r={type:"ordgroup",mode:this.mode,body:u}}else{if(!Dx[a.text])break;var h=AM.test(a.text),d=[];for(d.push(new eo(Dx[a.text])),this.consume();;){var p=this.fetch().text;if(!Dx[p]||AM.test(p)!==h)break;d.unshift(new eo(Dx[p])),this.consume()}var f=this.subparse(d);h?n={type:"ordgroup",mode:"math",body:f}:r={type:"ordgroup",mode:"math",body:f}}}return r||n?{type:"supsub",mode:this.mode,base:i,sup:r,sub:n}:i}parseFunction(e,r){var n=this.fetch(),i=n.text,a=Ml[i];if(!a)return null;if(this.consume(),r&&r!=="atom"&&!a.allowedInArgument)throw new tt("Got function '"+i+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!a.allowedInText)throw new tt("Can't use function '"+i+"' in text mode",n);if(this.mode==="math"&&a.allowedInMath===!1)throw new tt("Can't use function '"+i+"' in math mode",n);var{args:s,optArgs:o}=this.parseArguments(i,a);return this.callFunction(i,s,o,n,e)}callFunction(e,r,n,i,a){var s={funcName:e,parser:this,token:i,breakOnTokenText:a},o=Ml[e];if(o&&o.handler)return o.handler(s,r,n);throw new tt("No function handler for "+e)}parseArguments(e,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var i=[],a=[],s=0;s<n;s++){var o=r.argTypes&&r.argTypes[s],u=s<r.numOptionalArgs;(r.primitive&&o==null||r.type==="sqrt"&&s===1&&a[0]==null)&&(o="primitive");var h=this.parseGroupOfType("argument to '"+e+"'",o,u);if(u)a.push(h);else{if(h==null)throw new tt("Null argument, please report this as a bug");i.push(h)}}return{args:i,optArgs:a}}parseGroupOfType(e,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":var i=this.parseArgumentGroup(n,"text");return i!=null?{type:"styling",mode:i.mode,body:[i],style:"text"}:null;case"raw":var a=this.parseStringGroup("raw",n);return a!=null?{type:"raw",mode:"text",string:a.text}:null;case"primitive":if(n)throw new tt("A primitive argument cannot be optional");var s=this.parseGroup(e);if(s==null)throw new tt("Expected group as "+e,this.fetch());return s;case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new tt("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var i,a="";(i=this.fetch()).text!=="EOF";)a+=i.text,this.consume();return this.consume(),n.text=a,n}parseRegexGroup(e,r){for(var n,i=this.fetch(),a=i,s="";(n=this.fetch()).text!=="EOF"&&e.test(s+n.text);)s+=(a=n).text,this.consume();if(s==="")throw new tt("Invalid "+r+": '"+i.text+"'",i);return i.range(a,s)}parseColorGroup(e){var r=this.parseStringGroup("color",e);if(r==null)return null;var n=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new tt("Invalid color: '"+r.text+"'",r);var i=n[0];return/^[0-9a-f]{6}$/i.test(i)&&(i="#"+i),{type:"color-token",mode:this.mode,color:i}}parseSizeGroup(e){var r,n=!1;if(this.gullet.consumeSpaces(),!(r=e||this.gullet.future().text==="{"?this.parseStringGroup("size",e):this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size")))return null;e||r.text.length!==0||(r.text="0pt",n=!0);var i=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!i)throw new tt("Invalid size: '"+r.text+"'",r);var a={number:+(i[1]+i[2]),unit:i[3]};if(!CX(a))throw new tt("Invalid unit: '"+a.unit+"'",r);return{type:"size",mode:this.mode,value:a,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,r){var n=this.gullet.scanArgument(e);if(n==null)return null;var i=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var a=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var s={type:"ordgroup",mode:this.mode,loc:n.loc,body:a};return r&&this.switchMode(i),s}parseGroup(e,r){var n,i=this.fetch(),a=i.text;if(a==="{"||a==="\\begingroup"){this.consume();var s=a==="{"?"}":"\\endgroup";this.gullet.beginGroup();var o=this.parseExpression(!1,s),u=this.fetch();this.expect(s),this.gullet.endGroup(),n={type:"ordgroup",mode:this.mode,loc:hs.range(i,u),body:o,semisimple:a==="\\begingroup"||void 0}}else if((n=this.parseFunction(r,e)||this.parseSymbol())==null&&a[0]==="\\"&&!nK.hasOwnProperty(a)){if(this.settings.throwOnError)throw new tt("Undefined control sequence: "+a,i);n=this.formatUnsupportedCmd(a),this.consume()}return n}formLigatures(e){for(var r=e.length-1,n=0;n<r;++n){var i=e[n],a=i.text;a==="-"&&e[n+1].text==="-"&&(n+1<r&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:hs.range(i,e[n+2]),text:"---"}),r-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:hs.range(i,e[n+1]),text:"--"}),r-=1)),a!=="'"&&a!=="`"||e[n+1].text!==a||(e.splice(n,2,{type:"textord",mode:"text",loc:hs.range(i,e[n+1]),text:a+a}),r-=1)}}parseSymbol(){var e=this.fetch(),r=e.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),i=n.charAt(0)==="*";if(i&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new tt(`\\verb assertion failed --
                    please report what input caused this bug`);return{type:"verb",mode:"text",body:n=n.slice(1,-1),star:i}}LM.hasOwnProperty(r[0])&&!zr[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',e),r=LM[r[0]]+r.slice(1));var a,s=Kme.exec(r);if(s&&((r=r.substring(0,s.index))==="i"?r="":r==="j"&&(r="")),zr[this.mode][r]){this.settings.strict&&this.mode==="math"&&"".indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',e);var o,u=zr[this.mode][r].group,h=hs.range(e);if(X0e.hasOwnProperty(u)){var d=u;o={type:"atom",mode:this.mode,family:d,loc:h,text:r}}else o={type:u,mode:this.mode,loc:h,text:r};a=o}else{if(!(r.charCodeAt(0)>=128))return null;this.settings.strict&&(aA(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'" ('+r.charCodeAt(0)+")",e)),a={type:"textord",mode:"text",loc:hs.range(e),text:r}}if(this.consume(),s)for(var p=0;p<s[0].length;p++){var f=s[0][p];if(!aT[f])throw new tt("Unknown accent ' "+f+"'",e);var g=aT[f][this.mode]||aT[f].text;if(!g)throw new tt("Accent "+f+" unsupported in "+this.mode+" mode",e);a={type:"accent",mode:this.mode,loc:hs.range(e),label:g,isStretchy:!1,isShifty:!0,base:a}}return a}},l(bu,"Parser"),bu);iK.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var dA=l((function(t,e){if(!(typeof t=="string"||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var r=new iK(t,e);delete r.gullet.macros.current["\\df@tag"];var n=r.parse();if(delete r.gullet.macros.current["\\current@color"],delete r.gullet.macros.current["\\color"],r.gullet.macros.get("\\df@tag")){if(!e.displayMode)throw new tt("\\tag works only in display equations");n=[{type:"tag",mode:"text",body:n,tag:r.subparse([new eo("\\df@tag")])}]}return n}),"parseTree"),aK=l((function(t,e,r){e.textContent="";var n=pA(t,r).toNode();e.appendChild(n)}),"render");typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),aK=l((function(){throw new tt("KaTeX doesn't work in quirks mode.")}),"render"));var eye=l((function(t,e){return pA(t,e).toMarkup()}),"renderToString"),tye=l((function(t,e){var r=new iA(e);return dA(t,r)}),"generateParseTree"),sK=l((function(t,e,r){if(r.throwOnError||!(t instanceof tt))throw t;var n=Me.makeSpan(["katex-error"],[new ns(e)]);return n.setAttribute("title",t.toString()),n.setAttribute("style","color:"+r.errorColor),n}),"renderError"),pA=l((function(t,e){var r=new iA(e);try{var n=dA(t,r);return vme(n,t,r)}catch(i){return sK(i,t,r)}}),"renderToDomTree"),rye=l((function(t,e){var r=new iA(e);try{var n=dA(t,r);return xme(n,t,r)}catch(i){return sK(i,t,r)}}),"renderToHTMLTree"),nye={version:"0.16.11",render:aK,renderToString:eye,ParseError:tt,SETTINGS_SCHEMA:Nb,__parse:tye,__renderToDomTree:pA,__renderToHTMLTree:rye,__setFontMetrics:TX,__defineSymbol:F,__defineFunction:ft,__defineMacro:ae,__domTree:{Span:Iv,Anchor:sA,SymbolNode:ns,SvgNode:Go,PathNode:Jl,LineNode:L_}},iye=Object.freeze({__proto__:null,default:nye});function oK(t){return Ns(t)?vY(t):J1(t)}l(oK,"keys");var Dn=oK;function lK(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}l(lK,"arrayEach");var cK=lK;function uK(t,e){return t&&lm(e,Dn(e),t)}l(uK,"baseAssign");var aye=uK;function hK(t,e){return t&&lm(e,ah(e),t)}l(hK,"baseAssignIn");var sye=hK;function dK(t,e){for(var r=-1,n=t==null?0:t.length,i=0,a=[];++r<n;){var s=t[r];e(s,r,t)&&(a[i++]=s)}return a}l(dK,"arrayFilter");var fA=dK;function pK(){return[]}l(pK,"stubArray");var fK=pK,oye=Object.prototype.propertyIsEnumerable,NM=Object.getOwnPropertySymbols,lye=NM?function(t){return t==null?[]:(t=Object(t),fA(NM(t),(function(e){return oye.call(t,e)})))}:fK,gA=lye;function gK(t,e){return lm(t,gA(t),e)}l(gK,"copySymbols");var cye=gK;function mK(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}l(mK,"arrayPush");var mA=mK,uye=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)mA(e,gA(t)),t=T1(t);return e}:fK,yK=uye;function vK(t,e){return lm(t,yK(t),e)}l(vK,"copySymbolsIn");var hye=vK;function xK(t,e,r){var n=e(t);return rr(t)?n:mA(n,r(t))}l(xK,"baseGetAllKeys");var bK=xK;function wK(t){return bK(t,Dn,gA)}l(wK,"getAllKeys");var z_=wK;function kK(t){return bK(t,ah,yK)}l(kK,"getAllKeysIn");var TK=kK,dye=Object.prototype.hasOwnProperty;function EK(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&dye.call(t,"index")&&(r.index=t.index,r.input=t.input),r}l(EK,"initCloneArray");var pye=EK;function _K(t,e){var r=e?k1(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}l(_K,"cloneDataView");var fye=_K,gye=/\w*$/;function CK(t){var e=new t.constructor(t.source,gye.exec(t));return e.lastIndex=t.lastIndex,e}l(CK,"cloneRegExp");var mye=CK,IM=Qa?Qa.prototype:void 0,RM=IM?IM.valueOf:void 0;function SK(t){return RM?Object(RM.call(t)):{}}l(SK,"cloneSymbol");var yye=SK;function AK(t,e,r){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return k1(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return fye(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return WW(t,r);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return mye(t);case"[object Symbol]":return yye(t)}}l(AK,"initCloneByTag");var vye=AK;function LK(t){return es(t)&&Vu(t)=="[object Map]"}l(LK,"baseIsMap");var xye=LK,MM=Kl&&Kl.isMap,bye=MM?om(MM):xye;function NK(t){return es(t)&&Vu(t)=="[object Set]"}l(NK,"baseIsSet");var wye=NK,DM=Kl&&Kl.isSet,kye=DM?om(DM):wye,$r={};function jy(t,e,r,n,i,a){var s,o=1&e,u=2&e,h=4&e;if(r&&(s=i?r(t,n,i,a):r(t)),s!==void 0)return s;if(!oa(t))return t;var d=rr(t);if(d){if(s=pye(t),!o)return VW(t,s)}else{var p=Vu(t),f=p=="[object Function]"||p=="[object GeneratorFunction]";if(G0(t))return UW(t,o);if(p=="[object Object]"||p=="[object Arguments]"||f&&!i){if(s=u||f?{}:QW(t),!o)return u?hye(t,sye(s,t)):cye(t,aye(s,t))}else{if(!$r[p])return i?t:{};s=vye(t,p,o)}}a||(a=new Xd);var g=a.get(t);if(g)return g;a.set(t,s),kye(t)?t.forEach((function(y){s.add(jy(y,e,r,y,t,a))})):bye(t)&&t.forEach((function(y,v){s.set(v,jy(y,e,r,v,t,a))}));var m=d?void 0:(h?u?TK:z_:u?ah:Dn)(t);return cK(m||t,(function(y,v){m&&(y=t[v=y]),Tv(s,v,jy(y,e,r,v,t,a))})),s}$r["[object Arguments]"]=$r["[object Array]"]=$r["[object ArrayBuffer]"]=$r["[object DataView]"]=$r["[object Boolean]"]=$r["[object Date]"]=$r["[object Float32Array]"]=$r["[object Float64Array]"]=$r["[object Int8Array]"]=$r["[object Int16Array]"]=$r["[object Int32Array]"]=$r["[object Map]"]=$r["[object Number]"]=$r["[object Object]"]=$r["[object RegExp]"]=$r["[object Set]"]=$r["[object String]"]=$r["[object Symbol]"]=$r["[object Uint8Array]"]=$r["[object Uint8ClampedArray]"]=$r["[object Uint16Array]"]=$r["[object Uint32Array]"]=!0,$r["[object Error]"]=$r["[object Function]"]=$r["[object WeakMap]"]=!1,l(jy,"baseClone");var IK=jy;function RK(t){return IK(t,4)}l(RK,"clone");var Gn=RK,MK=Object.prototype,Tye=MK.hasOwnProperty,Eye=Ev((function(t,e){t=Object(t);var r=-1,n=e.length,i=n>2?e[2]:void 0;for(i&&Yu(e[0],e[1],i)&&(n=1);++r<n;)for(var a=e[r],s=ah(a),o=-1,u=s.length;++o<u;){var h=s[o],d=t[h];(d===void 0||sm(d,MK[h])&&!Tye.call(t,h))&&(t[h]=a[h])}return t})),tw=Eye;function DK(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}l(DK,"last");var ao=DK;function OK(t,e){return t&&w1(t,e,Dn)}l(OK,"baseForOwn");var yA=OK;function PK(t,e){return function(r,n){if(r==null)return r;if(!Ns(r))return t(r,n);for(var i=r.length,a=e?i:-1,s=Object(r);(e?a--:++a<i)&&n(s[a],a,s)!==!1;);return r}}l(PK,"createBaseEach");var oh=PK(yA);function BK(t){return typeof t=="function"?t:$o}l(BK,"castFunction");var vA=BK;function $K(t,e){return(rr(t)?cK:oh)(t,vA(e))}l($K,"forEach");var Ne=$K;function FK(t,e){var r=[];return oh(t,(function(n,i,a){e(n,i,a)&&r.push(n)})),r}l(FK,"baseFilter");var zK=FK;function GK(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}l(GK,"setCacheAdd");var _ye=GK;function UK(t){return this.__data__.has(t)}l(UK,"setCacheHas");var Cye=UK;function ay(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new $6;++e<r;)this.add(t[e])}l(ay,"SetCache"),ay.prototype.add=ay.prototype.push=_ye,ay.prototype.has=Cye;var xA=ay;function qK(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}l(qK,"arraySome");var jK=qK;function WK(t,e){return t.has(e)}l(WK,"cacheHas");var bA=WK;function YK(t,e,r,n,i,a){var s=1&r,o=t.length,u=e.length;if(o!=u&&!(s&&u>o))return!1;var h=a.get(t),d=a.get(e);if(h&&d)return h==e&&d==t;var p=-1,f=!0,g=2&r?new xA:void 0;for(a.set(t,e),a.set(e,t);++p<o;){var m=t[p],y=e[p];if(n)var v=s?n(y,m,p,e,t,a):n(m,y,p,t,e,a);if(v!==void 0){if(v)continue;f=!1;break}if(g){if(!jK(e,(function(x,b){if(!bA(g,b)&&(m===x||i(m,x,r,n,a)))return g.push(b)}))){f=!1;break}}else if(m!==y&&!i(m,y,r,n,a)){f=!1;break}}return a.delete(t),a.delete(e),f}l(YK,"equalArrays");var VK=YK;function HK(t){var e=-1,r=Array(t.size);return t.forEach((function(n,i){r[++e]=[i,n]})),r}l(HK,"mapToArray");var Sye=HK;function XK(t){var e=-1,r=Array(t.size);return t.forEach((function(n){r[++e]=n})),r}l(XK,"setToArray");var wA=XK,OM=Qa?Qa.prototype:void 0,sT=OM?OM.valueOf:void 0;function KK(t,e,r,n,i,a,s){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!a(new V4(t),new V4(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return sm(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var o=Sye;case"[object Set]":var u=1&n;if(o||(o=wA),t.size!=e.size&&!u)return!1;var h=s.get(t);if(h)return h==e;n|=2,s.set(t,e);var d=VK(o(t),o(e),n,i,a,s);return s.delete(t),d;case"[object Symbol]":if(sT)return sT.call(t)==sT.call(e)}return!1}l(KK,"equalByTag");var Aye=KK,Lye=Object.prototype.hasOwnProperty;function ZK(t,e,r,n,i,a){var s=1&r,o=z_(t),u=o.length;if(u!=z_(e).length&&!s)return!1;for(var h=u;h--;){var d=o[h];if(!(s?d in e:Lye.call(e,d)))return!1}var p=a.get(t),f=a.get(e);if(p&&f)return p==e&&f==t;var g=!0;a.set(t,e),a.set(e,t);for(var m=s;++h<u;){var y=t[d=o[h]],v=e[d];if(n)var x=s?n(v,y,d,e,t,a):n(y,v,d,t,e,a);if(!(x===void 0?y===v||i(y,v,r,n,a):x)){g=!1;break}m||(m=d=="constructor")}if(g&&!m){var b=t.constructor,w=e.constructor;b==w||!("constructor"in t)||!("constructor"in e)||typeof b=="function"&&b instanceof b&&typeof w=="function"&&w instanceof w||(g=!1)}return a.delete(t),a.delete(e),g}l(ZK,"equalObjects");var Nye=ZK,PM=Object.prototype.hasOwnProperty;function QK(t,e,r,n,i,a){var s=rr(t),o=rr(e),u=s?"[object Array]":Vu(t),h=o?"[object Array]":Vu(e),d=(u=u=="[object Arguments]"?"[object Object]":u)=="[object Object]",p=(h=h=="[object Arguments]"?"[object Object]":h)=="[object Object]",f=u==h;if(f&&G0(t)){if(!G0(e))return!1;s=!0,d=!1}if(f&&!d)return a||(a=new Xd),s||z6(t)?VK(t,e,r,n,i,a):Aye(t,e,u,r,n,i,a);if(!(1&r)){var g=d&&PM.call(t,"__wrapped__"),m=p&&PM.call(e,"__wrapped__");if(g||m){var y=g?t.value():t,v=m?e.value():e;return a||(a=new Xd),i(y,v,r,n,a)}}return!!f&&(a||(a=new Xd),Nye(t,e,r,n,i,a))}l(QK,"baseIsEqualDeep");var Iye=QK;function kA(t,e,r,n,i){return t===e||(t==null||e==null||!es(t)&&!es(e)?t!=t&&e!=e:Iye(t,e,r,n,kA,i))}l(kA,"baseIsEqual");var JK=kA;function e3(t,e,r,n){var i=r.length,a=i,s=!n;if(t==null)return!a;for(t=Object(t);i--;){var o=r[i];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<a;){var u=(o=r[i])[0],h=t[u],d=o[1];if(s&&o[2]){if(h===void 0&&!(u in t))return!1}else{var p=new Xd;if(n)var f=n(h,d,u,t,e,p);if(!(f===void 0?JK(d,h,3,n,p):f))return!1}}return!0}l(e3,"baseIsMatch");var Rye=e3;function t3(t){return t==t&&!oa(t)}l(t3,"isStrictComparable");var r3=t3;function n3(t){for(var e=Dn(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,r3(i)]}return e}l(n3,"getMatchData");var Mye=n3;function i3(t,e){return function(r){return r!=null&&r[t]===e&&(e!==void 0||t in Object(r))}}l(i3,"matchesStrictComparable");var a3=i3;function s3(t){var e=Mye(t);return e.length==1&&e[0][2]?a3(e[0][0],e[0][1]):function(r){return r===t||Rye(r,t,e)}}l(s3,"baseMatches");var Dye=s3;function o3(t){return typeof t=="symbol"||es(t)&&rl(t)=="[object Symbol]"}l(o3,"isSymbol");var Ku=o3,Oye=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pye=/^\w*$/;function l3(t,e){if(rr(t))return!1;var r=typeof t;return!(r!="number"&&r!="symbol"&&r!="boolean"&&t!=null&&!Ku(t))||Pye.test(t)||!Oye.test(t)||e!=null&&t in Object(e)}l(l3,"isKey");var TA=l3;function c3(t){var e=F6(t,(function(n){return r.size===500&&r.clear(),n})),r=e.cache;return e}l(c3,"memoizeCapped");var Bye=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$ye=/\\(\\)?/g,Fye=c3((function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Bye,(function(r,n,i,a){e.push(i?a.replace($ye,"$1"):n||r)})),e})),zye=Fye;function u3(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}l(u3,"arrayMap");var ql=u3,BM=Qa?Qa.prototype:void 0,$M=BM?BM.toString:void 0;function EA(t){if(typeof t=="string")return t;if(rr(t))return ql(t,EA)+"";if(Ku(t))return $M?$M.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}l(EA,"baseToString");var Gye=EA;function h3(t){return t==null?"":Gye(t)}l(h3,"toString");var d3=h3;function p3(t,e){return rr(t)?t:TA(t,e)?[t]:zye(d3(t))}l(p3,"castPath");var rw=p3;function f3(t){if(typeof t=="string"||Ku(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}l(f3,"toKey");var Rv=f3;function g3(t,e){for(var r=0,n=(e=rw(e,t)).length;t!=null&&r<n;)t=t[Rv(e[r++])];return r&&r==n?t:void 0}l(g3,"baseGet");var nw=g3;function m3(t,e,r){var n=t==null?void 0:nw(t,e);return n===void 0?r:n}l(m3,"get");var Uye=m3;function y3(t,e){return t!=null&&e in Object(t)}l(y3,"baseHasIn");var qye=y3;function v3(t,e,r){for(var n=-1,i=(e=rw(e,t)).length,a=!1;++n<i;){var s=Rv(e[n]);if(!(a=t!=null&&r(t,s)))break;t=t[s]}return a||++n!=i?a:!!(i=t==null?0:t.length)&&E1(i)&&G6(s,i)&&(rr(t)||z0(t))}l(v3,"hasPath");var x3=v3;function b3(t,e){return t!=null&&x3(t,e,qye)}l(b3,"hasIn");var w3=b3;function k3(t,e){return TA(t)&&r3(e)?a3(Rv(t),e):function(r){var n=Uye(r,t);return n===void 0&&n===e?w3(r,t):JK(e,n,3)}}l(k3,"baseMatchesProperty");var jye=k3;function T3(t){return function(e){return e?.[t]}}l(T3,"baseProperty");var E3=T3;function _3(t){return function(e){return nw(e,t)}}l(_3,"basePropertyDeep");var Wye=_3;function C3(t){return TA(t)?E3(Rv(t)):Wye(t)}l(C3,"property");var Yye=C3;function S3(t){return typeof t=="function"?t:t==null?$o:typeof t=="object"?rr(t)?jye(t[0],t[1]):Dye(t):Yye(t)}l(S3,"baseIteratee");var fa=S3;function A3(t,e){return(rr(t)?fA:zK)(t,fa(e))}l(A3,"filter");var un=A3;function L3(t,e){var r=-1,n=Ns(t)?Array(t.length):[];return oh(t,(function(i,a,s){n[++r]=e(i,a,s)})),n}l(L3,"baseMap");var N3=L3;function I3(t,e){return(rr(t)?ql:N3)(t,fa(e))}l(I3,"map");var nt=I3;function R3(t,e){return ql(e,(function(r){return t[r]}))}l(R3,"baseValues");var Vye=R3;function M3(t){return t==null?[]:Vye(t,Dn(t))}l(M3,"values");var Nr=M3;function D3(t){return t===void 0}l(D3,"isUndefined");var wr=D3;function O3(t,e){var r={};return e=fa(e),yA(t,(function(n,i,a){wv(r,i,e(n,i,a))})),r}l(O3,"mapValues");var iw=O3;function P3(t,e,r){for(var n=-1,i=t.length;++n<i;){var a=t[n],s=e(a);if(s!=null&&(o===void 0?s==s&&!Ku(s):r(s,o)))var o=s,u=a}return u}l(P3,"baseExtremum");var _A=P3;function B3(t,e){return t>e}l(B3,"baseGt");var Hye=B3;function $3(t){return t&&t.length?_A(t,$o,Hye):void 0}l($3,"max");var Zu=$3;function F3(t,e,r,n){if(!oa(t))return t;for(var i=-1,a=(e=rw(e,t)).length,s=a-1,o=t;o!=null&&++i<a;){var u=Rv(e[i]),h=r;if(u==="__proto__"||u==="constructor"||u==="prototype")return t;if(i!=s){var d=o[u];(h=n?n(d,u,o):void 0)===void 0&&(h=oa(d)?d:G6(e[i+1])?[]:{})}Tv(o,u,h),o=o[u]}return t}l(F3,"baseSet");var Xye=F3;function z3(t,e,r){for(var n=-1,i=e.length,a={};++n<i;){var s=e[n],o=nw(t,s);r(o,s)&&Xye(a,rw(s,t),o)}return a}l(z3,"basePickBy");var G3=z3;function U3(t,e){return G3(t,e,(function(r,n){return w3(t,n)}))}l(U3,"basePick");var Kye=U3,FM=Qa?Qa.isConcatSpreadable:void 0;function q3(t){return rr(t)||z0(t)||!!(FM&&t&&t[FM])}l(q3,"isFlattenable");var Zye=q3;function CA(t,e,r,n,i){var a=-1,s=t.length;for(r||(r=Zye),i||(i=[]);++a<s;){var o=t[a];e>0&&r(o)?e>1?CA(o,e-1,r,n,i):mA(i,o):n||(i[i.length]=o)}return i}l(CA,"baseFlatten");var Mv=CA;function j3(t){return t!=null&&t.length?Mv(t,1):[]}l(j3,"flatten");var Hn=j3;function W3(t){return LY(SY(t,void 0,Hn),t+"")}l(W3,"flatRest");var Qye=W3((function(t,e){return t==null?{}:Kye(t,e)})),m5=Qye;function Y3(t,e,r,n){var i=-1,a=t==null?0:t.length;for(n&&a&&(r=t[++i]);++i<a;)r=e(r,t[i],i,t);return r}l(Y3,"arrayReduce");var Jye=Y3;function V3(t,e,r,n,i){return i(t,(function(a,s,o){r=n?(n=!1,a):e(r,a,s,o)})),r}l(V3,"baseReduce");var e2e=V3;function H3(t,e,r){var n=rr(t)?Jye:e2e,i=arguments.length<3;return n(t,fa(e),r,i,oh)}l(H3,"reduce");var Cn=H3;function X3(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}l(X3,"baseFindIndex");var K3=X3;function Z3(t){return t!=t}l(Z3,"baseIsNaN");var t2e=Z3;function Q3(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}l(Q3,"strictIndexOf");var r2e=Q3;function J3(t,e,r){return e==e?r2e(t,e,r):K3(t,t2e,r)}l(J3,"baseIndexOf");var SA=J3;function eZ(t,e){return!!(t!=null&&t.length)&&SA(t,e,0)>-1}l(eZ,"arrayIncludes");var tZ=eZ;function rZ(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}l(rZ,"arrayIncludesWith");var nZ=rZ;function iZ(){}l(iZ,"noop");var Ln=iZ,n2e=Kd&&1/wA(new Kd([,-0]))[1]==1/0?function(t){return new Kd(t)}:Ln;function aZ(t,e,r){var n=-1,i=tZ,a=t.length,s=!0,o=[],u=o;if(r)s=!1,i=nZ;else if(a>=200){var h=e?null:n2e(t);if(h)return wA(h);s=!1,i=bA,u=new xA}else u=e?[]:o;e:for(;++n<a;){var d=t[n],p=e?e(d):d;if(d=r||d!==0?d:0,s&&p==p){for(var f=u.length;f--;)if(u[f]===p)continue e;e&&u.push(p),o.push(d)}else i(u,p,r)||(u!==o&&u.push(p),o.push(d))}return o}l(aZ,"baseUniq");var AA=aZ,i2e=Ev((function(t){return AA(Mv(t,1,H4,!0))})),a2e=/\s/;function sZ(t){for(var e=t.length;e--&&a2e.test(t.charAt(e)););return e}l(sZ,"trimmedEndIndex");var s2e=sZ,o2e=/^\s+/;function oZ(t){return t&&t.slice(0,s2e(t)+1).replace(o2e,"")}l(oZ,"baseTrim");var l2e=oZ,c2e=/^[-+]0x[0-9a-f]+$/i,u2e=/^0b[01]+$/i,h2e=/^0o[0-7]+$/i,d2e=parseInt;function lZ(t){if(typeof t=="number")return t;if(Ku(t))return NaN;if(oa(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=oa(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=l2e(t);var r=u2e.test(t);return r||h2e.test(t)?d2e(t.slice(2),r?2:8):c2e.test(t)?NaN:+t}l(lZ,"toNumber");var p2e=lZ;function cZ(t){return t?(t=p2e(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:t===0?t:0}l(cZ,"toFinite");var Ob=cZ;function uZ(t){var e=Ob(t),r=e%1;return e==e?r?e-r:e:0}l(uZ,"toInteger");var Dv=uZ,f2e=Object.prototype.hasOwnProperty,g2e=MY((function(t,e){if(kv(e)||Ns(e))lm(e,Dn(e),t);else for(var r in e)f2e.call(e,r)&&Tv(t,r,e[r])})),Ea=g2e;function hZ(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(r=r>i?i:r)<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var a=Array(i);++n<i;)a[n]=t[n+e];return a}l(hZ,"baseSlice");var dZ=hZ,m2e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function pZ(t){return m2e.test(t)}l(pZ,"hasUnicode");var y2e=pZ;function fZ(t){return IK(t,5)}l(fZ,"cloneDeep");var v2e=fZ;function gZ(t){for(var e=-1,r=t==null?0:t.length,n=0,i=[];++e<r;){var a=t[e];a&&(i[n++]=a)}return i}l(gZ,"compact");var Ov=gZ;function mZ(t,e,r,n){for(var i=-1,a=t==null?0:t.length;++i<a;){var s=t[i];e(n,s,r(s),t)}return n}l(mZ,"arrayAggregator");var x2e=mZ;function yZ(t,e,r,n){return oh(t,(function(i,a,s){e(n,i,r(i),s)})),n}l(yZ,"baseAggregator");var b2e=yZ;function vZ(t,e){return function(r,n){var i=rr(r)?x2e:b2e,a=e?e():{};return i(r,t,fa(n),a)}}l(vZ,"createAggregator");var w2e=vZ,zM=l((function(){return Ls.Date.now()}),"now");function xZ(t,e,r,n){var i=-1,a=tZ,s=!0,o=t.length,u=[],h=e.length;if(!o)return u;r&&(e=ql(e,om(r))),n?(a=nZ,s=!1):e.length>=200&&(a=bA,s=!1,e=new xA(e));e:for(;++i<o;){var d=t[i],p=r==null?d:r(d);if(d=n||d!==0?d:0,s&&p==p){for(var f=h;f--;)if(e[f]===p)continue e;u.push(d)}else a(e,p,n)||u.push(d)}return u}l(xZ,"baseDifference");var k2e=xZ,T2e=Ev((function(t,e){return H4(t)?k2e(t,Mv(e,1,H4,!0)):[]})),aw=T2e;function bZ(t,e,r){var n=t==null?0:t.length;return n?(e=r||e===void 0?1:Dv(e),dZ(t,e<0?0:e,n)):[]}l(bZ,"drop");var ai=bZ;function wZ(t,e,r){var n=t==null?0:t.length;return n?(e=r||e===void 0?1:Dv(e),dZ(t,0,(e=n-e)<0?0:e)):[]}l(wZ,"dropRight");var I2=wZ;function kZ(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}l(kZ,"arrayEvery");var E2e=kZ;function TZ(t,e){var r=!0;return oh(t,(function(n,i,a){return r=!!e(n,i,a)})),r}l(TZ,"baseEvery");var _2e=TZ;function EZ(t,e,r){var n=rr(t)?E2e:_2e;return r&&Yu(t,e,r)&&(e=void 0),n(t,fa(e))}l(EZ,"every");var xs=EZ;function _Z(t){return function(e,r,n){var i=Object(e);if(!Ns(e)){var a=fa(r);e=Dn(e),r=l((function(o){return a(i[o],o,i)}),"predicate")}var s=t(e,r,n);return s>-1?i[a?e[s]:s]:void 0}}l(_Z,"createFind");var C2e=_Z,S2e=Math.max;function CZ(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=r==null?0:Dv(r);return i<0&&(i=S2e(n+i,0)),K3(t,fa(e),i)}l(CZ,"findIndex");var jo=C2e(CZ);function SZ(t){return t&&t.length?t[0]:void 0}l(SZ,"head");var Es=SZ;function AZ(t,e){return Mv(nt(t,e),1)}l(AZ,"flatMap");var ka=AZ;function LZ(t,e){return t==null?t:w1(t,vA(e),ah)}l(LZ,"forIn");var A2e=LZ;function NZ(t,e){return t&&yA(t,vA(e))}l(NZ,"forOwn");var L2e=NZ,N2e=Object.prototype.hasOwnProperty,I2e=w2e((function(t,e,r){N2e.call(t,r)?t[r].push(e):wv(t,r,[e])})),R2e=I2e,M2e=Object.prototype.hasOwnProperty;function IZ(t,e){return t!=null&&M2e.call(t,e)}l(IZ,"baseHas");var D2e=IZ;function RZ(t,e){return t!=null&&x3(t,e,D2e)}l(RZ,"has");var Bt=RZ;function MZ(t){return typeof t=="string"||!rr(t)&&es(t)&&rl(t)=="[object String]"}l(MZ,"isString");var Ui=MZ,O2e=Math.max;function DZ(t,e,r,n){t=Ns(t)?t:Nr(t),r=r&&!n?Dv(r):0;var i=t.length;return r<0&&(r=O2e(i+r,0)),Ui(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&SA(t,e,r)>-1}l(DZ,"includes");var Wi=DZ,P2e=Math.max;function OZ(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=r==null?0:Dv(r);return i<0&&(i=P2e(n+i,0)),SA(t,e,i)}l(OZ,"indexOf");var GM=OZ;function PZ(t){return es(t)&&rl(t)=="[object RegExp]"}l(PZ,"baseIsRegExp");var B2e=PZ,UM=Kl&&Kl.isRegExp,Wo=UM?om(UM):B2e;function BZ(t,e){return t<e}l(BZ,"baseLt");var $Z=BZ;function FZ(t){return t&&t.length?_A(t,$o,$Z):void 0}l(FZ,"min");var j0=FZ;function zZ(t,e){return t&&t.length?_A(t,fa(e),$Z):void 0}l(zZ,"minBy");var LA=zZ;function GZ(t){if(typeof t!="function")throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}l(GZ,"negate");var $2e=GZ;function UZ(t,e){if(t==null)return{};var r=ql(TK(t),(function(n){return[n]}));return e=fa(e),G3(t,r,(function(n,i){return e(n,i[0])}))}l(UZ,"pickBy");var Is=UZ;function qZ(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}l(qZ,"baseSortBy");var F2e=qZ;function jZ(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t==t,a=Ku(t),s=e!==void 0,o=e===null,u=e==e,h=Ku(e);if(!o&&!h&&!a&&t>e||a&&s&&u&&!o&&!h||n&&s&&u||!r&&u||!i)return 1;if(!n&&!a&&!h&&t<e||h&&r&&i&&!n&&!a||o&&r&&i||!s&&i||!u)return-1}return 0}l(jZ,"compareAscending");var z2e=jZ;function WZ(t,e,r){for(var n=-1,i=t.criteria,a=e.criteria,s=i.length,o=r.length;++n<s;){var u=z2e(i[n],a[n]);if(u)return n>=o?u:u*(r[n]=="desc"?-1:1)}return t.index-e.index}l(WZ,"compareMultiple");var G2e=WZ;function YZ(t,e,r){e=e.length?ql(e,(function(a){return rr(a)?function(s){return nw(s,a.length===1?a[0]:a)}:a})):[$o];var n=-1;e=ql(e,om(fa));var i=N3(t,(function(a,s,o){return{criteria:ql(e,(function(u){return u(a)})),index:++n,value:a}}));return F2e(i,(function(a,s){return G2e(a,s,r)}))}l(YZ,"baseOrderBy");var U2e=YZ,q2e=E3("length"),j2e="[\\ud800-\\udfff]",G_="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",U_="\\ud83c[\\udffb-\\udfff]",VZ="[^\\ud800-\\udfff]",HZ="(?:\\ud83c[\\udde6-\\uddff]){2}",XZ="[\\ud800-\\udbff][\\udc00-\\udfff]",qM="(?:"+G_+"|"+U_+")?",W2e="[\\ufe0e\\ufe0f]?"+qM+("(?:\\u200d(?:"+[VZ,HZ,XZ].join("|")+")[\\ufe0e\\ufe0f]?"+qM+")*"),Y2e="(?:"+[VZ+G_+"?",G_,HZ,XZ,j2e].join("|")+")",jM=RegExp(U_+"(?="+U_+")|"+Y2e+W2e,"g");function KZ(t){for(var e=jM.lastIndex=0;jM.test(t);)++e;return e}l(KZ,"unicodeSize");var V2e=KZ;function ZZ(t){return y2e(t)?V2e(t):q2e(t)}l(ZZ,"stringSize");var H2e=ZZ,X2e=Math.ceil,K2e=Math.max;function QZ(t,e,r,n){for(var i=-1,a=K2e(X2e((e-t)/(r||1)),0),s=Array(a);a--;)s[n?a:++i]=t,t+=r;return s}l(QZ,"baseRange");var Z2e=QZ;function JZ(t){return function(e,r,n){return n&&typeof n!="number"&&Yu(e,r,n)&&(r=n=void 0),e=Ob(e),r===void 0?(r=e,e=0):r=Ob(r),n=n===void 0?e<r?1:-1:Ob(n),Z2e(e,r,n,t)}}l(JZ,"createRange");var W0=JZ();function eQ(t,e){return(rr(t)?fA:zK)(t,$2e(fa(e)))}l(eQ,"reject");var sw=eQ;function tQ(t){if(t==null)return 0;if(Ns(t))return Ui(t)?H2e(t):t.length;var e=Vu(t);return e=="[object Map]"||e=="[object Set]"?t.size:J1(t).length}l(tQ,"size");var Q2e=tQ;function rQ(t,e){var r;return oh(t,(function(n,i,a){return!(r=e(n,i,a))})),!!r}l(rQ,"baseSome");var J2e=rQ;function nQ(t,e,r){var n=rr(t)?jK:J2e;return r&&Yu(t,e,r)&&(e=void 0),n(t,fa(e))}l(nQ,"some");var iQ=nQ,eve=Ev((function(t,e){if(t==null)return[];var r=e.length;return r>1&&Yu(t,e[0],e[1])?e=[]:r>2&&Yu(e[0],e[1],e[2])&&(e=[e[0]]),U2e(t,Mv(e,1),[])})),Pv=eve;function aQ(t){return t&&t.length?AA(t):[]}l(aQ,"uniq");var NA=aQ;function sQ(t,e){return t&&t.length?AA(t,fa(e)):[]}l(sQ,"uniqBy");var tve=sQ,rve=0;function oQ(t){var e=++rve;return d3(t)+e}l(oQ,"uniqueId");var IA=oQ;function lQ(t,e,r){for(var n=-1,i=t.length,a=e.length,s={};++n<i;){var o=n<a?e[n]:void 0;r(s,t[n],o)}return s}l(lQ,"baseZipObject");var nve=lQ;function cQ(t,e){return nve(t||[],e||[],Tv)}l(cQ,"zipObject");var ive=cQ,Hp,la=(Hp=class{constructor(e={}){this._isDirected=!Object.prototype.hasOwnProperty.call(e,"directed")||e.directed,this._isMultigraph=!!Object.prototype.hasOwnProperty.call(e,"multigraph")&&e.multigraph,this._isCompound=!!Object.prototype.hasOwnProperty.call(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=ed(void 0),this._defaultEdgeLabelFn=ed(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return Ja(e)||(e=ed(e)),this._defaultNodeLabelFn=e,this}nodeCount(){return this._nodeCount}nodes(){return Dn(this._nodes)}sources(){var e=this;return un(this.nodes(),(function(r){return yr(e._in[r])}))}sinks(){var e=this;return un(this.nodes(),(function(r){return yr(e._out[r])}))}setNodes(e,r){var n=arguments,i=this;return Ne(e,(function(a){n.length>1?i.setNode(a,r):i.setNode(a)})),this}setNode(e,r){return Object.prototype.hasOwnProperty.call(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=r),this):(this._nodes[e]=arguments.length>1?r:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)}node(e){return this._nodes[e]}hasNode(e){return Object.prototype.hasOwnProperty.call(this._nodes,e)}removeNode(e){if(Object.prototype.hasOwnProperty.call(this._nodes,e)){var r=l((n=>this.removeEdge(this._edgeObjs[n])),"removeEdge");delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],Ne(this.children(e),(n=>{this.setParent(n)})),delete this._children[e]),Ne(Dn(this._in[e]),r),delete this._in[e],delete this._preds[e],Ne(Dn(this._out[e]),r),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}setParent(e,r){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(wr(r))r="\0";else{for(var n=r+="";!wr(n);n=this.parent(n))if(n===e)throw new Error("Setting "+r+" as parent of "+e+" would create a cycle");this.setNode(r)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=r,this._children[r][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var r=this._parent[e];if(r!=="\0")return r}}children(e){if(wr(e)&&(e="\0"),this._isCompound){var r=this._children[e];if(r)return Dn(r)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}}predecessors(e){var r=this._preds[e];if(r)return Dn(r)}successors(e){var r=this._sucs[e];if(r)return Dn(r)}neighbors(e){var r=this.predecessors(e);if(r)return i2e(r,this.successors(e))}isLeaf(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0}filterNodes(e){var r=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});r.setGraph(this.graph());var n=this;Ne(this._nodes,(function(s,o){e(o)&&r.setNode(o,s)})),Ne(this._edgeObjs,(function(s){r.hasNode(s.v)&&r.hasNode(s.w)&&r.setEdge(s,n.edge(s))}));var i={};function a(s){var o=n.parent(s);return o===void 0||r.hasNode(o)?(i[s]=o,o):o in i?i[o]:a(o)}return l(a,"findParent"),this._isCompound&&Ne(r.nodes(),(function(s){r.setParent(s,a(s))})),r}setDefaultEdgeLabel(e){return Ja(e)||(e=ed(e)),this._defaultEdgeLabelFn=e,this}edgeCount(){return this._edgeCount}edges(){return Nr(this._edgeObjs)}setPath(e,r){var n=this,i=arguments;return Cn(e,(function(a,s){return i.length>1?n.setEdge(a,s,r):n.setEdge(a,s),s})),this}setEdge(){var e,r,n,i,a=!1,s=arguments[0];typeof s=="object"&&s!==null&&"v"in s?(e=s.v,r=s.w,n=s.name,arguments.length===2&&(i=arguments[1],a=!0)):(e=s,r=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],a=!0)),e=""+e,r=""+r,wr(n)||(n=""+n);var o=td(this._isDirected,e,r,n);if(Object.prototype.hasOwnProperty.call(this._edgeLabels,o))return a&&(this._edgeLabels[o]=i),this;if(!wr(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(r),this._edgeLabels[o]=a?i:this._defaultEdgeLabelFn(e,r,n);var u=uQ(this._isDirected,e,r,n);return e=u.v,r=u.w,Object.freeze(u),this._edgeObjs[o]=u,q_(this._preds[r],e),q_(this._sucs[e],r),this._in[r][o]=u,this._out[e][o]=u,this._edgeCount++,this}edge(e,r,n){var i=arguments.length===1?Pb(this._isDirected,arguments[0]):td(this._isDirected,e,r,n);return this._edgeLabels[i]}hasEdge(e,r,n){var i=arguments.length===1?Pb(this._isDirected,arguments[0]):td(this._isDirected,e,r,n);return Object.prototype.hasOwnProperty.call(this._edgeLabels,i)}removeEdge(e,r,n){var i=arguments.length===1?Pb(this._isDirected,arguments[0]):td(this._isDirected,e,r,n),a=this._edgeObjs[i];return a&&(e=a.v,r=a.w,delete this._edgeLabels[i],delete this._edgeObjs[i],j_(this._preds[r],e),j_(this._sucs[e],r),delete this._in[r][i],delete this._out[e][i],this._edgeCount--),this}inEdges(e,r){var n=this._in[e];if(n){var i=Nr(n);return r?un(i,(function(a){return a.v===r})):i}}outEdges(e,r){var n=this._out[e];if(n){var i=Nr(n);return r?un(i,(function(a){return a.w===r})):i}}nodeEdges(e,r){var n=this.inEdges(e,r);if(n)return n.concat(this.outEdges(e,r))}},l(Hp,"Graph"),Hp);function q_(t,e){t[e]?t[e]++:t[e]=1}function j_(t,e){--t[e]||delete t[e]}function td(t,e,r,n){var i=""+e,a=""+r;if(!t&&i>a){var s=i;i=a,a=s}return i+""+a+""+(wr(n)?"\0":n)}function uQ(t,e,r,n){var i=""+e,a=""+r;if(!t&&i>a){var s=i;i=a,a=s}var o={v:i,w:a};return n&&(o.name=n),o}function Pb(t,e){return td(t,e.v,e.w,e.name)}function lh(t,e,r,n){var i;do i=IA(n);while(t.hasNode(i));return r.dummy=e,t.setNode(i,r),i}function hQ(t){var e=new la().setGraph(t.graph());return Ne(t.nodes(),(function(r){e.setNode(r,t.node(r))})),Ne(t.edges(),(function(r){var n=e.edge(r.v,r.w)||{weight:0,minlen:1},i=t.edge(r);e.setEdge(r.v,r.w,{weight:n.weight+i.weight,minlen:Math.max(n.minlen,i.minlen)})})),e}function RA(t){var e=new la({multigraph:t.isMultigraph()}).setGraph(t.graph());return Ne(t.nodes(),(function(r){t.children(r).length||e.setNode(r,t.node(r))})),Ne(t.edges(),(function(r){e.setEdge(r,t.edge(r))})),e}function W_(t,e){var r,n,i=t.x,a=t.y,s=e.x-i,o=e.y-a,u=t.width/2,h=t.height/2;if(!s&&!o)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(o)*u>Math.abs(s)*h?(o<0&&(h=-h),r=h*s/o,n=h):(s<0&&(u=-u),r=u,n=u*o/s),{x:i+r,y:a+n}}function Bv(t){var e=nt(W0(MA(t)+1),(function(){return[]}));return Ne(t.nodes(),(function(r){var n=t.node(r),i=n.rank;wr(i)||(e[i][n.order]=r)})),e}function dQ(t){var e=j0(nt(t.nodes(),(function(r){return t.node(r).rank})));Ne(t.nodes(),(function(r){var n=t.node(r);Bt(n,"rank")&&(n.rank-=e)}))}function pQ(t){var e=j0(nt(t.nodes(),(function(a){return t.node(a).rank}))),r=[];Ne(t.nodes(),(function(a){var s=t.node(a).rank-e;r[s]||(r[s]=[]),r[s].push(a)}));var n=0,i=t.graph().nodeRankFactor;Ne(r,(function(a,s){wr(a)&&s%i!=0?--n:n&&Ne(a,(function(o){t.node(o).rank+=n}))}))}function Y_(t,e,r,n){var i={width:0,height:0};return arguments.length>=4&&(i.rank=r,i.order=n),lh(t,"border",i,e)}function MA(t){return Zu(nt(t.nodes(),(function(e){var r=t.node(e).rank;if(!wr(r))return r})))}function fQ(t,e){var r={lhs:[],rhs:[]};return Ne(t,(function(n){e(n)?r.lhs.push(n):r.rhs.push(n)})),r}function gQ(t,e){var r=zM();try{return e()}finally{console.log(t+" time: "+(zM()-r)+"ms")}}function mQ(t,e){return e()}function yQ(t){function e(r){var n=t.children(r),i=t.node(r);if(n.length&&Ne(n,e),Object.prototype.hasOwnProperty.call(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,s=i.maxRank+1;a<s;++a)V_(t,"borderLeft","_bl",r,i,a),V_(t,"borderRight","_br",r,i,a)}}l(e,"dfs"),Ne(t.children(),e)}function V_(t,e,r,n,i,a){var s={width:0,height:0,rank:a,borderType:e},o=i[e][a-1],u=lh(t,"border",s,r);i[e][a]=u,t.setParent(u,n),o&&t.setEdge(o,u,{weight:1})}function vQ(t){var e=t.graph().rankdir.toLowerCase();e!=="lr"&&e!=="rl"||DA(t)}function xQ(t){var e=t.graph().rankdir.toLowerCase();e!=="bt"&&e!=="rl"||bQ(t),e!=="lr"&&e!=="rl"||(wQ(t),DA(t))}function DA(t){Ne(t.nodes(),(function(e){H_(t.node(e))})),Ne(t.edges(),(function(e){H_(t.edge(e))}))}function H_(t){var e=t.width;t.width=t.height,t.height=e}function bQ(t){Ne(t.nodes(),(function(e){Bb(t.node(e))})),Ne(t.edges(),(function(e){var r=t.edge(e);Ne(r.points,Bb),Object.prototype.hasOwnProperty.call(r,"y")&&Bb(r)}))}function Bb(t){t.y=-t.y}function wQ(t){Ne(t.nodes(),(function(e){$b(t.node(e))})),Ne(t.edges(),(function(e){var r=t.edge(e);Ne(r.points,$b),Object.prototype.hasOwnProperty.call(r,"x")&&$b(r)}))}function $b(t){var e=t.x;t.x=t.y,t.y=e}la.prototype._nodeCount=0,la.prototype._edgeCount=0,l(q_,"incrementOrInitEntry"),l(j_,"decrementOrRemoveEntry"),l(td,"edgeArgsToId"),l(uQ,"edgeArgsToObj"),l(Pb,"edgeObjToId"),l(lh,"addDummyNode"),l(hQ,"simplify"),l(RA,"asNonCompoundGraph"),l(W_,"intersectRect"),l(Bv,"buildLayerMatrix"),l(dQ,"normalizeRanks"),l(pQ,"removeEmptyRanks"),l(Y_,"addBorderNode"),l(MA,"maxRank"),l(fQ,"partition"),l(gQ,"time"),l(mQ,"notime"),l(yQ,"addBorderSegments"),l(V_,"addBorderNode"),l(vQ,"adjust"),l(xQ,"undo"),l(DA,"swapWidthHeight"),l(H_,"swapWidthHeightOne"),l(bQ,"reverseY"),l(Bb,"reverseYOne"),l(wQ,"swapXY"),l($b,"swapXYOne");var Xp,ave=(Xp=class{constructor(){var e={};e._next=e._prev=e,this._sentinel=e}dequeue(){var e=this._sentinel,r=e._prev;if(r!==e)return X_(r),r}enqueue(e){var r=this._sentinel;e._prev&&e._next&&X_(e),e._next=r._next,r._next._prev=e,r._next=e,e._prev=r}toString(){for(var e=[],r=this._sentinel,n=r._prev;n!==r;)e.push(JSON.stringify(n,kQ)),n=n._prev;return"["+e.join(", ")+"]"}},l(Xp,"List"),Xp);function X_(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function kQ(t,e){if(t!=="_next"&&t!=="_prev")return e}l(X_,"unlink"),l(kQ,"filterOutLinks");var sve=ed(1);function TQ(t,e){if(t.nodeCount()<=1)return[];var r=_Q(t,e||sve),n=EQ(r.graph,r.buckets,r.zeroIdx);return Hn(nt(n,(function(i){return t.outEdges(i.v,i.w)})))}function EQ(t,e,r){for(var n,i=[],a=e[e.length-1],s=e[0];t.nodeCount();){for(;n=s.dequeue();)Fb(t,e,r,n);for(;n=a.dequeue();)Fb(t,e,r,n);if(t.nodeCount()){for(var o=e.length-2;o>0;--o)if(n=e[o].dequeue()){i=i.concat(Fb(t,e,r,n,!0));break}}}return i}function Fb(t,e,r,n,i){var a=i?[]:void 0;return Ne(t.inEdges(n.v),(function(s){var o=t.edge(s),u=t.node(s.v);i&&a.push({v:s.v,w:s.w}),u.out-=o,y5(e,r,u)})),Ne(t.outEdges(n.v),(function(s){var o=t.edge(s),u=s.w,h=t.node(u);h.in-=o,y5(e,r,h)})),t.removeNode(n.v),a}function _Q(t,e){var r=new la,n=0,i=0;Ne(t.nodes(),(function(o){r.setNode(o,{v:o,in:0,out:0})})),Ne(t.edges(),(function(o){var u=r.edge(o.v,o.w)||0,h=e(o),d=u+h;r.setEdge(o.v,o.w,d),i=Math.max(i,r.node(o.v).out+=h),n=Math.max(n,r.node(o.w).in+=h)}));var a=W0(i+n+3).map((function(){return new ave})),s=n+1;return Ne(r.nodes(),(function(o){y5(a,s,r.node(o))})),{graph:r,buckets:a,zeroIdx:s}}function y5(t,e,r){r.out?r.in?t[r.out-r.in+e].enqueue(r):t[t.length-1].enqueue(r):t[0].enqueue(r)}function CQ(t){var e=t.graph().acyclicer==="greedy"?TQ(t,r(t)):SQ(t);function r(n){return function(i){return n.edge(i).weight}}Ne(e,(function(n){var i=t.edge(n);t.removeEdge(n),i.forwardName=n.name,i.reversed=!0,t.setEdge(n.w,n.v,i,IA("rev"))})),l(r,"weightFn")}function SQ(t){var e=[],r={},n={};function i(a){Object.prototype.hasOwnProperty.call(n,a)||(n[a]=!0,r[a]=!0,Ne(t.outEdges(a),(function(s){Object.prototype.hasOwnProperty.call(r,s.w)?e.push(s):i(s.w)})),delete r[a])}return l(i,"dfs"),Ne(t.nodes(),i),e}function AQ(t){Ne(t.edges(),(function(e){var r=t.edge(e);if(r.reversed){t.removeEdge(e);var n=r.forwardName;delete r.reversed,delete r.forwardName,t.setEdge(e.w,e.v,r,n)}}))}function LQ(t){t.graph().dummyChains=[],Ne(t.edges(),(function(e){NQ(t,e)}))}function NQ(t,e){var r=e.v,n=t.node(r).rank,i=e.w,a=t.node(i).rank,s=e.name,o=t.edge(e),u=o.labelRank;if(a!==n+1){t.removeEdge(e);var h,d,p=void 0;for(d=0,++n;n<a;++d,++n)o.points=[],h=lh(t,"edge",p={width:0,height:0,edgeLabel:o,edgeObj:e,rank:n},"_d"),n===u&&(p.width=o.width,p.height=o.height,p.dummy="edge-label",p.labelpos=o.labelpos),t.setEdge(r,h,{weight:o.weight},s),d===0&&t.graph().dummyChains.push(h),r=h;t.setEdge(r,i,{weight:o.weight},s)}}function IQ(t){Ne(t.graph().dummyChains,(function(e){var r,n=t.node(e),i=n.edgeLabel;for(t.setEdge(n.edgeObj,i);n.dummy;)r=t.successors(e)[0],t.removeNode(e),i.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(i.x=n.x,i.y=n.y,i.width=n.width,i.height=n.height),e=r,n=t.node(e)}))}function ow(t){var e={};function r(n){var i=t.node(n);if(Object.prototype.hasOwnProperty.call(e,n))return i.rank;e[n]=!0;var a=j0(nt(t.outEdges(n),(function(s){return r(s.w)-t.edge(s).minlen})));return a!==Number.POSITIVE_INFINITY&&a!=null||(a=0),i.rank=a}l(r,"dfs"),Ne(t.sources(),r)}function Y0(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}function OA(t){var e,r,n=new la({directed:!1}),i=t.nodes()[0],a=t.nodeCount();for(n.setNode(i,{});RQ(n,t)<a;)e=MQ(n,t),r=n.hasNode(e.v)?Y0(t,e):-Y0(t,e),DQ(n,t,r);return n}function RQ(t,e){function r(n){Ne(e.nodeEdges(n),(function(i){var a=i.v,s=n===a?i.w:a;t.hasNode(s)||Y0(e,i)||(t.setNode(s,{}),t.setEdge(n,s,{}),r(s))}))}return l(r,"dfs"),Ne(t.nodes(),r),t.nodeCount()}function MQ(t,e){return LA(e.edges(),(function(r){if(t.hasNode(r.v)!==t.hasNode(r.w))return Y0(e,r)}))}function DQ(t,e,r){Ne(t.nodes(),(function(n){e.node(n).rank+=r}))}function WM(t){var e={},r={},n=[];function i(a){if(Object.prototype.hasOwnProperty.call(r,a))throw new Wy;Object.prototype.hasOwnProperty.call(e,a)||(r[a]=!0,e[a]=!0,Ne(t.predecessors(a),i),delete r[a],n.push(a))}if(l(i,"visit"),Ne(t.sinks(),i),Q2e(e)!==t.nodeCount())throw new Wy;return n}function Wy(){}function PA(t,e,r){rr(e)||(e=[e]);var n=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],a={};return Ne(e,(function(s){if(!t.hasNode(s))throw new Error("Graph does not have node: "+s);BA(t,s,r==="post",a,n,i)})),i}function BA(t,e,r,n,i,a){Object.prototype.hasOwnProperty.call(n,e)||(n[e]=!0,r||a.push(e),Ne(i(e),(function(s){BA(t,s,r,n,i,a)})),r&&a.push(e))}function OQ(t,e){return PA(t,e,"post")}function PQ(t,e){return PA(t,e,"pre")}function wl(t){ow(t=hQ(t));var e,r=OA(t);for(x5(r),v5(r,t);e=Z_(r);)J_(r,t,e,Q_(r,t,e))}function v5(t,e){var r=OQ(t,t.nodes());r=r.slice(0,r.length-1),Ne(r,(function(n){BQ(t,e,n)}))}function BQ(t,e,r){var n=t.node(r).parent;t.edge(r,n).cutvalue=K_(t,e,r)}function K_(t,e,r){var n=t.node(r).parent,i=!0,a=e.edge(r,n),s=0;return a||(i=!1,a=e.edge(n,r)),s=a.weight,Ne(e.nodeEdges(r),(function(o){var u=o.v===r,h=u?o.w:o.v;if(h!==n){var d=u===i,p=e.edge(o).weight;if(s+=d?p:-p,FQ(t,r,h)){var f=t.edge(r,h).cutvalue;s+=d?-f:f}}})),s}function x5(t,e){arguments.length<2&&(e=t.nodes()[0]),$A(t,{},1,e)}function $A(t,e,r,n,i){var a=r,s=t.node(n);return e[n]=!0,Ne(t.neighbors(n),(function(o){Object.prototype.hasOwnProperty.call(e,o)||(r=$A(t,e,r,o,n))})),s.low=a,s.lim=r++,i?s.parent=i:delete s.parent,r}function Z_(t){return jo(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function Q_(t,e,r){var n=r.v,i=r.w;e.hasEdge(n,i)||(n=r.w,i=r.v);var a=t.node(n),s=t.node(i),o=a,u=!1;a.lim>s.lim&&(o=s,u=!0);var h=un(e.edges(),(function(d){return u===eC(t,t.node(d.v),o)&&u!==eC(t,t.node(d.w),o)}));return LA(h,(function(d){return Y0(e,d)}))}function J_(t,e,r,n){var i=r.v,a=r.w;t.removeEdge(i,a),t.setEdge(n.v,n.w,{}),x5(t),v5(t,e),$Q(t,e)}function $Q(t,e){var r=jo(t.nodes(),(function(i){return!e.node(i).parent})),n=PQ(t,r);n=n.slice(1),Ne(n,(function(i){var a=t.node(i).parent,s=e.edge(i,a),o=!1;s||(s=e.edge(a,i),o=!0),e.node(i).rank=e.node(a).rank+(o?s.minlen:-s.minlen)}))}function FQ(t,e,r){return t.hasEdge(e,r)}function eC(t,e,r){return r.low<=e.lim&&e.lim<=r.lim}function zQ(t){switch(t.graph().ranker){case"network-simplex":default:UQ(t);break;case"tight-tree":GQ(t);break;case"longest-path":ove(t)}}l(TQ,"greedyFAS"),l(EQ,"doGreedyFAS"),l(Fb,"removeNode"),l(_Q,"buildState"),l(y5,"assignBucket"),l(CQ,"run"),l(SQ,"dfsFAS"),l(AQ,"undo"),l(LQ,"run"),l(NQ,"normalizeEdge"),l(IQ,"undo"),l(ow,"longestPath"),l(Y0,"slack"),l(OA,"feasibleTree"),l(RQ,"tightTree"),l(MQ,"findMinSlackEdge"),l(DQ,"shiftRanks"),WM.CycleException=Wy,l(WM,"topsort"),l(Wy,"CycleException"),Wy.prototype=new Error,l(PA,"dfs"),l(BA,"doDfs"),l(OQ,"postorder"),l(PQ,"preorder"),wl.initLowLimValues=x5,wl.initCutValues=v5,wl.calcCutValue=K_,wl.leaveEdge=Z_,wl.enterEdge=Q_,wl.exchangeEdges=J_,l(wl,"networkSimplex"),l(v5,"initCutValues"),l(BQ,"assignCutValue"),l(K_,"calcCutValue"),l(x5,"initLowLimValues"),l($A,"dfsAssignLowLim"),l(Z_,"leaveEdge"),l(Q_,"enterEdge"),l(J_,"exchangeEdges"),l($Q,"updateRanks"),l(FQ,"isTreeEdge"),l(eC,"isDescendant"),l(zQ,"rank");var ove=ow;function GQ(t){ow(t),OA(t)}function UQ(t){wl(t)}function qQ(t){var e=lh(t,"root",{},"_root"),r=jQ(t),n=Zu(Nr(r))-1,i=2*n+1;t.graph().nestingRoot=e,Ne(t.edges(),(function(s){t.edge(s).minlen*=i}));var a=WQ(t)+1;Ne(t.children(),(function(s){FA(t,e,i,a,n,r,s)})),t.graph().nodeRankFactor=i}function FA(t,e,r,n,i,a,s){var o=t.children(s);if(o.length){var u=Y_(t,"_bt"),h=Y_(t,"_bb"),d=t.node(s);t.setParent(u,s),d.borderTop=u,t.setParent(h,s),d.borderBottom=h,Ne(o,(function(p){FA(t,e,r,n,i,a,p);var f=t.node(p),g=f.borderTop?f.borderTop:p,m=f.borderBottom?f.borderBottom:p,y=f.borderTop?n:2*n,v=g!==m?1:i-a[s]+1;t.setEdge(u,g,{weight:y,minlen:v,nestingEdge:!0}),t.setEdge(m,h,{weight:y,minlen:v,nestingEdge:!0})})),t.parent(s)||t.setEdge(e,u,{weight:0,minlen:i+a[s]})}else s!==e&&t.setEdge(e,s,{weight:0,minlen:r})}function jQ(t){var e={};function r(n,i){var a=t.children(n);a&&a.length&&Ne(a,(function(s){r(s,i+1)})),e[n]=i}return l(r,"dfs"),Ne(t.children(),(function(n){r(n,1)})),e}function WQ(t){return Cn(t.edges(),(function(e,r){return e+t.edge(r).weight}),0)}function YQ(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,Ne(t.edges(),(function(r){t.edge(r).nestingEdge&&t.removeEdge(r)}))}function VQ(t,e,r){var n,i={};Ne(r,(function(a){for(var s,o,u=t.parent(a);u;){if((s=t.parent(u))?(o=i[s],i[s]=u):(o=n,n=u),o&&o!==u)return void e.setEdge(o,u);u=s}}))}function HQ(t,e,r){var n=XQ(t),i=new la({compound:!0}).setGraph({root:n}).setDefaultNodeLabel((function(a){return t.node(a)}));return Ne(t.nodes(),(function(a){var s=t.node(a),o=t.parent(a);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(i.setNode(a),i.setParent(a,o||n),Ne(t[r](a),(function(u){var h=u.v===a?u.w:u.v,d=i.edge(h,a),p=wr(d)?0:d.weight;i.setEdge(h,a,{weight:t.edge(u).weight+p})})),Object.prototype.hasOwnProperty.call(s,"minRank")&&i.setNode(a,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))})),i}function XQ(t){for(var e;t.hasNode(e=IA("_root")););return e}function KQ(t,e){for(var r=0,n=1;n<e.length;++n)r+=ZQ(t,e[n-1],e[n]);return r}function ZQ(t,e,r){for(var n=ive(r,nt(r,(function(h,d){return d}))),i=Hn(nt(e,(function(h){return Pv(nt(t.outEdges(h),(function(d){return{pos:n[d.w],weight:t.edge(d).weight}})),"pos")}))),a=1;a<r.length;)a<<=1;var s=2*a-1;a-=1;var o=nt(new Array(s),(function(){return 0})),u=0;return Ne(i.forEach((function(h){var d=h.pos+a;o[d]+=h.weight;for(var p=0;d>0;)d%2&&(p+=o[d+1]),o[d=d-1>>1]+=h.weight;u+=h.weight*p}))),u}function QQ(t){var e={},r=un(t.nodes(),(function(o){return!t.children(o).length})),n=Zu(nt(r,(function(o){return t.node(o).rank}))),i=nt(W0(n+1),(function(){return[]}));function a(o){if(!Bt(e,o)){e[o]=!0;var u=t.node(o);i[u.rank].push(o),Ne(t.successors(o),a)}}l(a,"dfs");var s=Pv(r,(function(o){return t.node(o).rank}));return Ne(s,a),i}function JQ(t,e){return nt(e,(function(r){var n=t.inEdges(r);if(n.length){var i=Cn(n,(function(a,s){var o=t.edge(s),u=t.node(s.v);return{sum:a.sum+o.weight*u.order,weight:a.weight+o.weight}}),{sum:0,weight:0});return{v:r,barycenter:i.sum/i.weight,weight:i.weight}}return{v:r}}))}function eJ(t,e){var r={};return Ne(t,(function(n,i){var a=r[n.v]={indegree:0,in:[],out:[],vs:[n.v],i};wr(n.barycenter)||(a.barycenter=n.barycenter,a.weight=n.weight)})),Ne(e.edges(),(function(n){var i=r[n.v],a=r[n.w];wr(i)||wr(a)||(a.indegree++,i.out.push(r[n.w]))})),tJ(un(r,(function(n){return!n.indegree})))}function tJ(t){var e=[];function r(a){return function(s){s.merged||(wr(s.barycenter)||wr(a.barycenter)||s.barycenter>=a.barycenter)&&rJ(a,s)}}function n(a){return function(s){s.in.push(a),--s.indegree==0&&t.push(s)}}for(l(r,"handleIn"),l(n,"handleOut");t.length;){var i=t.pop();e.push(i),Ne(i.in.reverse(),r(i)),Ne(i.out,n(i))}return nt(un(e,(function(a){return!a.merged})),(function(a){return m5(a,["vs","i","barycenter","weight"])}))}function rJ(t,e){var r=0,n=0;t.weight&&(r+=t.barycenter*t.weight,n+=t.weight),e.weight&&(r+=e.barycenter*e.weight,n+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=r/n,t.weight=n,t.i=Math.min(e.i,t.i),e.merged=!0}function nJ(t,e){var r=fQ(t,(function(d){return Object.prototype.hasOwnProperty.call(d,"barycenter")})),n=r.lhs,i=Pv(r.rhs,(function(d){return-d.i})),a=[],s=0,o=0,u=0;n.sort(iJ(!!e)),u=tC(a,i,u),Ne(n,(function(d){u+=d.vs.length,a.push(d.vs),s+=d.barycenter*d.weight,o+=d.weight,u=tC(a,i,u)}));var h={vs:Hn(a)};return o&&(h.barycenter=s/o,h.weight=o),h}function tC(t,e,r){for(var n;e.length&&(n=ao(e)).i<=r;)e.pop(),t.push(n.vs),r++;return r}function iJ(t){return function(e,r){return e.barycenter<r.barycenter?-1:e.barycenter>r.barycenter?1:t?r.i-e.i:e.i-r.i}}function zA(t,e,r,n){var i=t.children(e),a=t.node(e),s=a?a.borderLeft:void 0,o=a?a.borderRight:void 0,u={};s&&(i=un(i,(function(m){return m!==s&&m!==o})));var h=JQ(t,i);Ne(h,(function(m){if(t.children(m.v).length){var y=zA(t,m.v,r,n);u[m.v]=y,Object.prototype.hasOwnProperty.call(y,"barycenter")&&sJ(m,y)}}));var d=eJ(h,r);aJ(d,u);var p=nJ(d,n);if(s&&(p.vs=Hn([s,p.vs,o]),t.predecessors(s).length)){var f=t.node(t.predecessors(s)[0]),g=t.node(t.predecessors(o)[0]);Object.prototype.hasOwnProperty.call(p,"barycenter")||(p.barycenter=0,p.weight=0),p.barycenter=(p.barycenter*p.weight+f.order+g.order)/(p.weight+2),p.weight+=2}return p}function aJ(t,e){Ne(t,(function(r){r.vs=Hn(r.vs.map((function(n){return e[n]?e[n].vs:n})))}))}function sJ(t,e){wr(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}function oJ(t){var e=MA(t),r=rC(t,W0(1,e+1),"inEdges"),n=rC(t,W0(e-1,-1,-1),"outEdges"),i=QQ(t);nC(t,i);for(var a,s=Number.POSITIVE_INFINITY,o=0,u=0;u<4;++o,++u){lJ(o%2?r:n,o%4>=2);var h=KQ(t,i=Bv(t));h<s&&(u=0,a=v2e(i),s=h)}nC(t,a)}function rC(t,e,r){return nt(e,(function(n){return HQ(t,n,r)}))}function lJ(t,e){var r=new la;Ne(t,(function(n){var i=n.graph().root,a=zA(n,i,r,e);Ne(a.vs,(function(s,o){n.node(s).order=o})),VQ(n,r,a.vs)}))}function nC(t,e){Ne(e,(function(r){Ne(r,(function(n,i){t.node(n).order=i}))}))}function cJ(t){var e=hJ(t);Ne(t.graph().dummyChains,(function(r){for(var n=t.node(r),i=n.edgeObj,a=uJ(t,e,i.v,i.w),s=a.path,o=a.lca,u=0,h=s[u],d=!0;r!==i.w;){if(n=t.node(r),d){for(;(h=s[u])!==o&&t.node(h).maxRank<n.rank;)u++;h===o&&(d=!1)}if(!d){for(;u<s.length-1&&t.node(h=s[u+1]).minRank<=n.rank;)u++;h=s[u]}t.setParent(r,h),r=t.successors(r)[0]}}))}function uJ(t,e,r,n){var i,a,s=[],o=[],u=Math.min(e[r].low,e[n].low),h=Math.max(e[r].lim,e[n].lim);i=r;do i=t.parent(i),s.push(i);while(i&&(e[i].low>u||h>e[i].lim));for(a=i,i=n;(i=t.parent(i))!==a;)o.push(i);return{path:s.concat(o.reverse()),lca:a}}function hJ(t){var e={},r=0;function n(i){var a=r;Ne(t.children(i),n),e[i]={low:a,lim:r++}}return l(n,"dfs"),Ne(t.children(),n),e}function dJ(t,e){var r={};function n(i,a){var s=0,o=0,u=i.length,h=ao(a);return Ne(a,(function(d,p){var f=fJ(t,d),g=f?t.node(f).order:u;(f||d===h)&&(Ne(a.slice(o,p+1),(function(m){Ne(t.predecessors(m),(function(y){var v=t.node(y),x=v.order;!(x<s||g<x)||v.dummy&&t.node(m).dummy||GA(r,y,m)}))})),o=p+1,s=g)})),a}return l(n,"visitLayer"),Cn(e,n),r}function pJ(t,e){var r={};function n(a,s,o,u,h){var d;Ne(W0(s,o),(function(p){d=a[p],t.node(d).dummy&&Ne(t.predecessors(d),(function(f){var g=t.node(f);g.dummy&&(g.order<u||g.order>h)&&GA(r,f,d)}))}))}function i(a,s){var o,u=-1,h=0;return Ne(s,(function(d,p){if(t.node(d).dummy==="border"){var f=t.predecessors(d);f.length&&(o=t.node(f[0]).order,n(s,h,p,u,o),h=p,u=o)}n(s,h,s.length,o,a.length)})),s}return l(n,"scan"),l(i,"visitLayer"),Cn(e,i),r}function fJ(t,e){if(t.node(e).dummy)return jo(t.predecessors(e),(function(r){return t.node(r).dummy}))}function GA(t,e,r){if(e>r){var n=e;e=r,r=n}var i=t[e];i||(t[e]=i={}),i[r]=!0}function gJ(t,e,r){if(e>r){var n=e;e=r,r=n}return!!t[e]&&Object.prototype.hasOwnProperty.call(t[e],r)}function mJ(t,e,r,n){var i={},a={},s={};return Ne(e,(function(o){Ne(o,(function(u,h){i[u]=u,a[u]=u,s[u]=h}))})),Ne(e,(function(o){var u=-1;Ne(o,(function(h){var d=n(h);if(d.length)for(var p=((d=Pv(d,(function(y){return s[y]}))).length-1)/2,f=Math.floor(p),g=Math.ceil(p);f<=g;++f){var m=d[f];a[h]===h&&u<s[m]&&!gJ(r,h,m)&&(a[m]=h,a[h]=i[h]=i[m],u=s[m])}}))})),{root:i,align:a}}function yJ(t,e,r,n,i){var a={},s=vJ(t,e,r,i),o=i?"borderLeft":"borderRight";function u(p,f){for(var g=s.nodes(),m=g.pop(),y={};m;)y[m]?p(m):(y[m]=!0,g.push(m),g=g.concat(f(m))),m=g.pop()}function h(p){a[p]=s.inEdges(p).reduce((function(f,g){return Math.max(f,a[g.v]+s.edge(g))}),0)}function d(p){var f=s.outEdges(p).reduce((function(m,y){return Math.min(m,a[y.w]-s.edge(y))}),Number.POSITIVE_INFINITY),g=t.node(p);f!==Number.POSITIVE_INFINITY&&g.borderType!==o&&(a[p]=Math.max(a[p],f))}return l(u,"iterate"),l(h,"pass1"),l(d,"pass2"),u(h,s.predecessors.bind(s)),u(d,s.successors.bind(s)),Ne(n,(function(p){a[p]=a[r[p]]})),a}function vJ(t,e,r,n){var i=new la,a=t.graph(),s=TJ(a.nodesep,a.edgesep,n);return Ne(e,(function(o){var u;Ne(o,(function(h){var d=r[h];if(i.setNode(d),u){var p=r[u],f=i.edge(p,d);i.setEdge(p,d,Math.max(s(t,h,u),f||0))}u=h}))})),i}function xJ(t,e){return LA(Nr(e),(function(r){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return A2e(r,(function(a,s){var o=EJ(t,s)/2;n=Math.max(a+o,n),i=Math.min(a-o,i)})),n-i}))}function bJ(t,e){var r=Nr(e),n=j0(r),i=Zu(r);Ne(["u","d"],(function(a){Ne(["l","r"],(function(s){var o,u=a+s,h=t[u];if(h!==e){var d=Nr(h);(o=s==="l"?n-j0(d):i-Zu(d))&&(t[u]=iw(h,(function(p){return p+o})))}}))}))}function wJ(t,e){return iw(t.ul,(function(r,n){if(e)return t[e.toLowerCase()][n];var i=Pv(nt(t,n));return(i[1]+i[2])/2}))}function kJ(t){var e,r=Bv(t),n=X4(dJ(t,r),pJ(t,r)),i={};Ne(["u","d"],(function(s){e=s==="u"?r:Nr(r).reverse(),Ne(["l","r"],(function(o){o==="r"&&(e=nt(e,(function(p){return Nr(p).reverse()})));var u=(s==="u"?t.predecessors:t.successors).bind(t),h=mJ(0,e,n,u),d=yJ(t,e,h.root,h.align,o==="r");o==="r"&&(d=iw(d,(function(p){return-p}))),i[s+o]=d}))}));var a=xJ(t,i);return bJ(i,a),wJ(i,t.graph().align)}function TJ(t,e,r){return function(n,i,a){var s,o=n.node(i),u=n.node(a),h=0;if(h+=o.width/2,Object.prototype.hasOwnProperty.call(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":s=-o.width/2;break;case"r":s=o.width/2}if(s&&(h+=r?s:-s),s=0,h+=(o.dummy?e:t)/2,h+=(u.dummy?e:t)/2,h+=u.width/2,Object.prototype.hasOwnProperty.call(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":s=u.width/2;break;case"r":s=-u.width/2}return s&&(h+=r?s:-s),s=0,h}}function EJ(t,e){return t.node(e).width}function _J(t){CJ(t=RA(t)),L2e(kJ(t),(function(e,r){t.node(r).x=e}))}function CJ(t){var e=Bv(t),r=t.graph().ranksep,n=0;Ne(e,(function(i){var a=Zu(nt(i,(function(s){return t.node(s).height})));Ne(i,(function(s){t.node(s).y=n+a/2})),n+=a+r}))}function UA(t,e){var r=e&&e.debugTiming?gQ:mQ;r("layout",(()=>{var n=r("  buildLayoutGraph",(()=>LJ(t)));r("  runLayout",(()=>SJ(n,r))),r("  updateInputGraph",(()=>AJ(t,n)))}))}function SJ(t,e){e("    makeSpaceForEdgeLabels",(()=>NJ(t))),e("    removeSelfEdges",(()=>FJ(t))),e("    acyclic",(()=>CQ(t))),e("    nestingGraph.run",(()=>qQ(t))),e("    rank",(()=>zQ(RA(t)))),e("    injectEdgeLabelProxies",(()=>IJ(t))),e("    removeEmptyRanks",(()=>pQ(t))),e("    nestingGraph.cleanup",(()=>YQ(t))),e("    normalizeRanks",(()=>dQ(t))),e("    assignRankMinMax",(()=>RJ(t))),e("    removeEdgeLabelProxies",(()=>MJ(t))),e("    normalize.run",(()=>LQ(t))),e("    parentDummyChains",(()=>cJ(t))),e("    addBorderSegments",(()=>yQ(t))),e("    order",(()=>oJ(t))),e("    insertSelfEdges",(()=>zJ(t))),e("    adjustCoordinateSystem",(()=>vQ(t))),e("    position",(()=>_J(t))),e("    positionSelfEdges",(()=>GJ(t))),e("    removeBorderNodes",(()=>$J(t))),e("    normalize.undo",(()=>IQ(t))),e("    fixupEdgeLabelCoords",(()=>PJ(t))),e("    undoCoordinateSystem",(()=>xQ(t))),e("    translateGraph",(()=>DJ(t))),e("    assignNodeIntersects",(()=>OJ(t))),e("    reversePoints",(()=>BJ(t))),e("    acyclic.undo",(()=>AQ(t)))}function AJ(t,e){Ne(t.nodes(),(function(r){var n=t.node(r),i=e.node(r);n&&(n.x=i.x,n.y=i.y,e.children(r).length&&(n.width=i.width,n.height=i.height))})),Ne(t.edges(),(function(r){var n=t.edge(r),i=e.edge(r);n.points=i.points,Object.prototype.hasOwnProperty.call(i,"x")&&(n.x=i.x,n.y=i.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}l(GQ,"tightTreeRanker"),l(UQ,"networkSimplexRanker"),l(qQ,"run"),l(FA,"dfs"),l(jQ,"treeDepths"),l(WQ,"sumWeights"),l(YQ,"cleanup"),l(VQ,"addSubgraphConstraints"),l(HQ,"buildLayerGraph"),l(XQ,"createRootNode"),l(KQ,"crossCount"),l(ZQ,"twoLayerCrossCount"),l(QQ,"initOrder"),l(JQ,"barycenter"),l(eJ,"resolveConflicts"),l(tJ,"doResolveConflicts"),l(rJ,"mergeEntries"),l(nJ,"sort"),l(tC,"consumeUnsortable"),l(iJ,"compareWithBias"),l(zA,"sortSubgraph"),l(aJ,"expandSubgraphs"),l(sJ,"mergeBarycenters"),l(oJ,"order"),l(rC,"buildLayerGraphs"),l(lJ,"sweepLayerGraphs"),l(nC,"assignOrder"),l(cJ,"parentDummyChains"),l(uJ,"findPath"),l(hJ,"postorder"),l(dJ,"findType1Conflicts"),l(pJ,"findType2Conflicts"),l(fJ,"findOtherInnerSegmentNode"),l(GA,"addConflict"),l(gJ,"hasConflict"),l(mJ,"verticalAlignment"),l(yJ,"horizontalCompaction"),l(vJ,"buildBlockGraph"),l(xJ,"findSmallestWidthAlignment"),l(bJ,"alignCoordinates"),l(wJ,"balance"),l(kJ,"positionX"),l(TJ,"sep"),l(EJ,"width"),l(_J,"position"),l(CJ,"positionY"),l(UA,"layout"),l(SJ,"runLayout"),l(AJ,"updateInputGraph");var lve=["nodesep","edgesep","ranksep","marginx","marginy"],cve={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},uve=["acyclicer","ranker","rankdir","align"],hve=["width","height"],dve={width:0,height:0},pve=["minlen","weight","width","height","labeloffset"],fve={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},gve=["labelpos"];function LJ(t){var e=new la({multigraph:!0,compound:!0}),r=Gb(t.graph());return e.setGraph(X4({},cve,zb(r,lve),m5(r,uve))),Ne(t.nodes(),(function(n){var i=Gb(t.node(n));e.setNode(n,tw(zb(i,hve),dve)),e.setParent(n,t.parent(n))})),Ne(t.edges(),(function(n){var i=Gb(t.edge(n));e.setEdge(n,X4({},fve,zb(i,pve),m5(i,gve)))})),e}function NJ(t){var e=t.graph();e.ranksep/=2,Ne(t.edges(),(function(r){var n=t.edge(r);n.minlen*=2,n.labelpos.toLowerCase()!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?n.width+=n.labeloffset:n.height+=n.labeloffset)}))}function IJ(t){Ne(t.edges(),(function(e){var r=t.edge(e);if(r.width&&r.height){var n=t.node(e.v),i={rank:(t.node(e.w).rank-n.rank)/2+n.rank,e};lh(t,"edge-proxy",i,"_ep")}}))}function RJ(t){var e=0;Ne(t.nodes(),(function(r){var n=t.node(r);n.borderTop&&(n.minRank=t.node(n.borderTop).rank,n.maxRank=t.node(n.borderBottom).rank,e=Zu(e,n.maxRank))})),t.graph().maxRank=e}function MJ(t){Ne(t.nodes(),(function(e){var r=t.node(e);r.dummy==="edge-proxy"&&(t.edge(r.e).labelRank=r.rank,t.removeNode(e))}))}function DJ(t){var e=Number.POSITIVE_INFINITY,r=0,n=Number.POSITIVE_INFINITY,i=0,a=t.graph(),s=a.marginx||0,o=a.marginy||0;function u(h){var d=h.x,p=h.y,f=h.width,g=h.height;e=Math.min(e,d-f/2),r=Math.max(r,d+f/2),n=Math.min(n,p-g/2),i=Math.max(i,p+g/2)}l(u,"getExtremes"),Ne(t.nodes(),(function(h){u(t.node(h))})),Ne(t.edges(),(function(h){var d=t.edge(h);Object.prototype.hasOwnProperty.call(d,"x")&&u(d)})),e-=s,n-=o,Ne(t.nodes(),(function(h){var d=t.node(h);d.x-=e,d.y-=n})),Ne(t.edges(),(function(h){var d=t.edge(h);Ne(d.points,(function(p){p.x-=e,p.y-=n})),Object.prototype.hasOwnProperty.call(d,"x")&&(d.x-=e),Object.prototype.hasOwnProperty.call(d,"y")&&(d.y-=n)})),a.width=r-e+s,a.height=i-n+o}function OJ(t){Ne(t.edges(),(function(e){var r,n,i=t.edge(e),a=t.node(e.v),s=t.node(e.w);i.points?(r=i.points[0],n=i.points[i.points.length-1]):(i.points=[],r=s,n=a),i.points.unshift(W_(a,r)),i.points.push(W_(s,n))}))}function PJ(t){Ne(t.edges(),(function(e){var r=t.edge(e);if(Object.prototype.hasOwnProperty.call(r,"x"))switch(r.labelpos!=="l"&&r.labelpos!=="r"||(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset}}))}function BJ(t){Ne(t.edges(),(function(e){var r=t.edge(e);r.reversed&&r.points.reverse()}))}function $J(t){Ne(t.nodes(),(function(e){if(t.children(e).length){var r=t.node(e),n=t.node(r.borderTop),i=t.node(r.borderBottom),a=t.node(ao(r.borderLeft)),s=t.node(ao(r.borderRight));r.width=Math.abs(s.x-a.x),r.height=Math.abs(i.y-n.y),r.x=a.x+r.width/2,r.y=n.y+r.height/2}})),Ne(t.nodes(),(function(e){t.node(e).dummy==="border"&&t.removeNode(e)}))}function FJ(t){Ne(t.edges(),(function(e){if(e.v===e.w){var r=t.node(e.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e,label:t.edge(e)}),t.removeEdge(e)}}))}function zJ(t){var e=Bv(t);Ne(e,(function(r){var n=0;Ne(r,(function(i,a){var s=t.node(i);s.order=a+n,Ne(s.selfEdges,(function(o){lh(t,"selfedge",{width:o.label.width,height:o.label.height,rank:s.rank,order:a+ ++n,e:o.e,label:o.label},"_se")})),delete s.selfEdges}))}))}function GJ(t){Ne(t.nodes(),(function(e){var r=t.node(e);if(r.dummy==="selfedge"){var n=t.node(r.e.v),i=n.x+n.width/2,a=n.y,s=r.x-i,o=n.height/2;t.setEdge(r.e,r.label),t.removeNode(e),r.label.points=[{x:i+2*s/3,y:a-o},{x:i+5*s/6,y:a-o},{x:i+s,y:a},{x:i+5*s/6,y:a+o},{x:i+2*s/3,y:a+o}],r.label.x=r.x,r.label.y=r.y}}))}function zb(t,e){return iw(m5(t,e),Number)}function Gb(t){var e={};return Ne(t,(function(r,n){e[n.toLowerCase()]=r})),e}function ys(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:UJ(t),edges:qJ(t)};return wr(t.graph())||(e.value=Gn(t.graph())),e}function UJ(t){return nt(t.nodes(),(function(e){var r=t.node(e),n=t.parent(e),i={v:e};return wr(r)||(i.value=r),wr(n)||(i.parent=n),i}))}function qJ(t){return nt(t.edges(),(function(e){var r=t.edge(e),n={v:e.v,w:e.w};return wr(e.name)||(n.name=e.name),wr(r)||(n.value=r),n}))}l(LJ,"buildLayoutGraph"),l(NJ,"makeSpaceForEdgeLabels"),l(IJ,"injectEdgeLabelProxies"),l(RJ,"assignRankMinMax"),l(MJ,"removeEdgeLabelProxies"),l(DJ,"translateGraph"),l(OJ,"assignNodeIntersects"),l(PJ,"fixupEdgeLabelCoords"),l(BJ,"reversePointsForReversedEdges"),l($J,"removeBorderNodes"),l(FJ,"removeSelfEdges"),l(zJ,"insertSelfEdges"),l(GJ,"positionSelfEdges"),l(zb,"selectNumberAttrs"),l(Gb,"canonicalize"),l(ys,"write"),l(UJ,"writeNodes"),l(qJ,"writeEdges");var er=new Map,su=new Map,jJ=new Map,mve=l((()=>{su.clear(),jJ.clear(),er.clear()}),"clear"),b5=l(((t,e)=>{const r=su.get(e)||[];return ee.trace("In isDescendant",e," ",t," = ",r.includes(t)),r.includes(t)}),"isDescendant"),yve=l(((t,e)=>{const r=su.get(e)||[];return ee.info("Descendants of ",e," is ",r),ee.info("Edge is ",t),t.v!==e&&t.w!==e&&(r?r.includes(t.v)||b5(t.v,e)||b5(t.w,e)||r.includes(t.w):(ee.debug("Tilt, ",e,",not in descendants"),!1))}),"edgeInCluster"),WJ=l(((t,e,r,n)=>{ee.warn("Copying children of ",t,"root",n,"data",e.node(t),n);const i=e.children(t)||[];t!==n&&i.push(t),ee.warn("Copying (nodes) clusterId",t,"nodes",i),i.forEach((a=>{if(e.children(a).length>0)WJ(a,e,r,n);else{const s=e.node(a);ee.info("cp ",a," to ",n," with parent ",t),r.setNode(a,s),n!==e.parent(a)&&(ee.warn("Setting parent",a,e.parent(a)),r.setParent(a,e.parent(a))),t!==n&&a!==t?(ee.debug("Setting parent",a,t),r.setParent(a,t)):(ee.info("In copy ",t,"root",n,"data",e.node(t),n),ee.debug("Not Setting parent for node=",a,"cluster!==rootId",t!==n,"node!==clusterId",a!==t));const o=e.edges(a);ee.debug("Copying Edges",o),o.forEach((u=>{ee.info("Edge",u);const h=e.edge(u.v,u.w,u.name);ee.info("Edge data",h,n);try{yve(u,n)?(ee.info("Copying as ",u.v,u.w,h,u.name),r.setEdge(u.v,u.w,h,u.name),ee.info("newGraph edges ",r.edges(),r.edge(r.edges()[0]))):ee.info("Skipping copy of edge ",u.v,"-->",u.w," rootId: ",n," clusterId:",t)}catch(d){ee.error(d)}}))}ee.debug("Removing node",a),e.removeNode(a)}))}),"copy"),YJ=l(((t,e)=>{const r=e.children(t);let n=[...r];for(const i of r)jJ.set(i,t),n=[...n,...YJ(i,e)];return n}),"extractDescendants"),vve=l(((t,e,r)=>{const n=t.edges().filter((o=>o.v===e||o.w===e)),i=t.edges().filter((o=>o.v===r||o.w===r)),a=n.map((o=>({v:o.v===e?r:o.v,w:o.w===e?e:o.w}))),s=i.map((o=>({v:o.v,w:o.w})));return a.filter((o=>s.some((u=>o.v===u.v&&o.w===u.w))))}),"findCommonEdges"),R2=l(((t,e,r)=>{const n=e.children(t);if(ee.trace("Searching children of id ",t,n),n.length<1)return t;let i;for(const a of n){const s=R2(a,e,r),o=vve(e,r,s);if(s){if(!(o.length>0))return s;i=s}}return i}),"findNonClusterChild"),YM=l((t=>er.has(t)&&er.get(t).externalConnections&&er.has(t)?er.get(t).id:t),"getAnchorId"),xve=l(((t,e)=>{if(!t||e>10)ee.debug("Opting out, no graph ");else{ee.debug("Opting in, graph "),t.nodes().forEach((function(r){t.children(r).length>0&&(ee.warn("Cluster identified",r," Replacement id in edges: ",R2(r,t,r)),su.set(r,YJ(r,t)),er.set(r,{id:R2(r,t,r),clusterData:t.node(r)}))})),t.nodes().forEach((function(r){const n=t.children(r),i=t.edges();n.length>0?(ee.debug("Cluster identified",r,su),i.forEach((a=>{b5(a.v,r)^b5(a.w,r)&&(ee.warn("Edge: ",a," leaves cluster ",r),ee.warn("Descendants of XXX ",r,": ",su.get(r)),er.get(r).externalConnections=!0)}))):ee.debug("Not a cluster ",r,su)}));for(let r of er.keys()){const n=er.get(r).id,i=t.parent(n);i!==r&&er.has(i)&&!er.get(i).externalConnections&&(er.get(r).id=i)}t.edges().forEach((function(r){const n=t.edge(r);ee.warn("Edge "+r.v+" -> "+r.w+": "+JSON.stringify(r)),ee.warn("Edge "+r.v+" -> "+r.w+": "+JSON.stringify(t.edge(r)));let i=r.v,a=r.w;if(ee.warn("Fix XXX",er,"ids:",r.v,r.w,"Translating: ",er.get(r.v)," --- ",er.get(r.w)),er.get(r.v)||er.get(r.w)){if(ee.warn("Fixing and trying - removing XXX",r.v,r.w,r.name),i=YM(r.v),a=YM(r.w),t.removeEdge(r.v,r.w,r.name),i!==r.v){const s=t.parent(i);er.get(s).externalConnections=!0,n.fromCluster=r.v}if(a!==r.w){const s=t.parent(a);er.get(s).externalConnections=!0,n.toCluster=r.w}ee.warn("Fix Replacing with XXX",i,a,r.name),t.setEdge(i,a,n,r.name)}})),ee.warn("Adjusted Graph",ys(t)),VJ(t,0),ee.trace(er)}}),"adjustClustersAndEdges"),VJ=l(((t,e)=>{if(ee.warn("extractor - ",e,ys(t),t.children("D")),e>10)return void ee.error("Bailing out");let r=t.nodes(),n=!1;for(const i of r){const a=t.children(i);n=n||a.length>0}if(n){ee.debug("Nodes = ",r,e);for(const i of r)if(ee.debug("Extracting node",i,er,er.has(i)&&!er.get(i).externalConnections,!t.parent(i),t.node(i),t.children("D")," Depth ",e),er.has(i))if(!er.get(i).externalConnections&&t.children(i)&&t.children(i).length>0){ee.warn("Cluster without external connections, without a parent and with children",i,e);let a=t.graph().rankdir==="TB"?"LR":"TB";er.get(i)?.clusterData?.dir&&(a=er.get(i).clusterData.dir,ee.warn("Fixing dir",er.get(i).clusterData.dir,a));const s=new la({multigraph:!0,compound:!0}).setGraph({rankdir:a,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel((function(){return{}}));ee.warn("Old graph before copy",ys(t)),WJ(i,t,s,i),t.setNode(i,{clusterNode:!0,id:i,clusterData:er.get(i).clusterData,label:er.get(i).label,graph:s}),ee.warn("New graph after copy node: (",i,")",ys(s)),ee.debug("Old graph after copy",ys(t))}else ee.warn("Cluster ** ",i," **not meeting the criteria !externalConnections:",!er.get(i).externalConnections," no parent: ",!t.parent(i)," children ",t.children(i)&&t.children(i).length>0,t.children("D"),e),ee.debug(er);else ee.debug("Not a cluster",i,e);r=t.nodes(),ee.warn("New list of nodes",r);for(const i of r){const a=t.node(i);ee.warn(" Now next level",i,a),a?.clusterNode&&VJ(a.graph,e+1)}}else ee.debug("Done, no node has children",t.nodes())}),"extractor"),HJ=l(((t,e)=>{if(e.length===0)return[];let r=Object.assign([],e);return e.forEach((n=>{const i=t.children(n),a=HJ(t,i);r=[...r,...a]})),r}),"sorter"),bve=l((t=>HJ(t,t.children())),"sortNodesByHierarchy"),XJ=l((async(t,e,r,n,i,a)=>{ee.warn("Graph in recursive render:XAX",ys(e),i);const s=e.graph().rankdir;ee.trace("Dir in recursive render - dir:",s);const o=t.insert("g").attr("class","root");e.nodes()?ee.info("Recursive render XXX",e.nodes()):ee.info("No nodes found for",e),e.edges().length>0&&ee.info("Recursive edges",e.edge(e.edges()[0]));const u=o.insert("g").attr("class","clusters"),h=o.insert("g").attr("class","edgePaths"),d=o.insert("g").attr("class","edgeLabels"),p=o.insert("g").attr("class","nodes");await Promise.all(e.nodes().map((async function(y){const v=e.node(y);if(i!==void 0){const x=JSON.parse(JSON.stringify(i.clusterData));ee.trace(`Setting data for parent cluster XXX
 Node.id = `,y,`
 data=`,x.height,`
Parent cluster`,i.height),e.setNode(i.id,x),e.parent(y)||(ee.trace("Setting parent",y,i.id),e.setParent(y,i.id,x))}if(ee.info("(Insert) Node XXX"+y+": "+JSON.stringify(e.node(y))),v?.clusterNode){ee.info("Cluster identified XBX",y,v.width,e.node(y));const{ranksep:x,nodesep:b}=e.graph();v.graph.setGraph({...v.graph.graph(),ranksep:x+25,nodesep:b});const w=await XJ(p,v.graph,r,n,e.node(y),a),T=w.elem;Nt(v,T),v.diff=w.diff||0,ee.info("New compound node after recursive render XAX",y,"width",v.width,"height",v.height),Bfe(T,v)}else e.children(y).length>0?(ee.trace("Cluster - the non recursive path XBX",y,v.id,v,v.width,"Graph:",e),ee.trace(R2(v.id,e)),er.set(v.id,{id:R2(v.id,e),node:v})):(ee.trace("Node - the non recursive path XAX",y,p,e.node(y),s),await H6(p,e.node(y),{config:a,dir:s}))}))),await l((async()=>{const y=e.edges().map((async function(v){const x=e.edge(v.v,v.w,v.name);ee.info("Edge "+v.v+" -> "+v.w+": "+JSON.stringify(v)),ee.info("Edge "+v.v+" -> "+v.w+": ",v," ",JSON.stringify(e.edge(v))),ee.info("Fix",er,"ids:",v.v,v.w,"Translating: ",er.get(v.v),er.get(v.w)),await OH(d,x)}));await Promise.all(y)}),"processEdges")(),ee.info("Graph before layout:",JSON.stringify(ys(e))),ee.info("############################################# XXX"),ee.info("###                Layout                 ### XXX"),ee.info("############################################# XXX"),UA(e),ee.info("Graph after layout:",JSON.stringify(ys(e)));let g=0,{subGraphTitleTotalMargin:m}=xv(a);return await Promise.all(bve(e).map((async function(y){const v=e.node(y);if(ee.info("Position XBX => "+y+": ("+v.x,","+v.y,") width: ",v.width," height: ",v.height),v?.clusterNode)v.y+=m,ee.info("A tainted cluster node XBX1",y,v.id,v.width,v.height,v.x,v.y,e.parent(y)),er.get(v.id).node=v,x_(v);else if(e.children(y).length>0){ee.info("A pure cluster node XBX1",y,v.id,v.x,v.y,v.width,v.height,e.parent(y)),v.height+=m,e.node(v.parentId);const x=v?.padding/2||0,b=v?.labelBBox?.height||0,w=b-x||0;ee.debug("OffsetY",w,"labelHeight",b,"halfPadding",x),await Z1(u,v),er.get(v.id).node=v}else{const x=e.node(v.parentId);v.y+=m/2,ee.info("A regular node XBX1 - using the padding",v.id,"parent",v.parentId,v.width,v.height,v.x,v.y,"offsetY",v.offsetY,"parent",x,x?.offsetY,v),x_(v)}}))),e.edges().forEach((function(y){const v=e.edge(y);ee.info("Edge "+y.v+" -> "+y.w+": "+JSON.stringify(v),v),v.points.forEach((T=>T.y+=m/2));const x=e.node(y.v);var b=e.node(y.w);const w=$H(h,v,er,r,x,b,n);PH(v,w)})),e.nodes().forEach((function(y){const v=e.node(y);ee.info(y,v.type,v.diff),v.isGroup&&(g=v.diff)})),ee.warn("Returning from recursive render XAX",o,g),{elem:o,diff:g}}),"recursiveRender"),wve=l((async(t,e)=>{const r=new la({multigraph:!0,compound:!0}).setGraph({rankdir:t.direction,nodesep:t.config?.nodeSpacing||t.config?.flowchart?.nodeSpacing||t.nodeSpacing,ranksep:t.config?.rankSpacing||t.config?.flowchart?.rankSpacing||t.rankSpacing,marginx:8,marginy:8}).setDefaultEdgeLabel((function(){return{}})),n=e.select("g");FH(n,t.markers,t.type,t.diagramId),$fe(),Gfe(),xfe(),mve(),t.nodes.forEach((a=>{r.setNode(a.id,{...a}),a.parentId&&r.setParent(a.id,a.parentId)})),ee.debug("Edges:",t.edges),t.edges.forEach((a=>{if(a.start===a.end){const s=a.start,o=s+"---"+s+"---1",u=s+"---"+s+"---2",h=r.node(s);r.setNode(o,{domId:o,id:o,parentId:h.parentId,labelStyle:"",label:"",padding:0,shape:"labelRect",style:"",width:10,height:10}),r.setParent(o,h.parentId),r.setNode(u,{domId:u,id:u,parentId:h.parentId,labelStyle:"",padding:0,shape:"labelRect",label:"",style:"",width:10,height:10}),r.setParent(u,h.parentId);const d=structuredClone(a),p=structuredClone(a),f=structuredClone(a);d.label="",d.arrowTypeEnd="none",d.id=s+"-cyclic-special-1",p.arrowTypeStart="none",p.arrowTypeEnd="none",p.id=s+"-cyclic-special-mid",f.label="",h.isGroup&&(d.fromCluster=s,f.toCluster=s),f.id=s+"-cyclic-special-2",f.arrowTypeStart="none",r.setEdge(s,o,d,s+"-cyclic-special-0"),r.setEdge(o,u,p,s+"-cyclic-special-1"),r.setEdge(u,s,f,s+"-cyc<lic-special-2")}else r.setEdge(a.start,a.end,{...a},a.id)})),ee.warn("Graph at first:",JSON.stringify(ys(r))),xve(r),ee.warn("Graph after XAX:",JSON.stringify(ys(r)));const i=ke();await XJ(n,r,t.type,t.diagramId,void 0,i)}),"render"),kve=Object.freeze({__proto__:null,render:wve}),KJ=Ci(bv()),lw=l(((t,e)=>{const r=t.append("rect");if(r.attr("x",e.x),r.attr("y",e.y),r.attr("fill",e.fill),r.attr("stroke",e.stroke),r.attr("width",e.width),r.attr("height",e.height),e.name&&r.attr("name",e.name),e.rx&&r.attr("rx",e.rx),e.ry&&r.attr("ry",e.ry),e.attrs!==void 0)for(const n in e.attrs)r.attr(n,e.attrs[n]);return e.class&&r.attr("class",e.class),r}),"drawRect"),ZJ=l(((t,e)=>{const r={x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,stroke:e.stroke,class:"rect"};lw(t,r).lower()}),"drawBackgroundRect"),Tve=l(((t,e)=>{const r=e.text.replace(im," "),n=t.append("text");n.attr("x",e.x),n.attr("y",e.y),n.attr("class","legend"),n.style("text-anchor",e.anchor),e.class&&n.attr("class",e.class);const i=n.append("tspan");return i.attr("x",e.x+2*e.textMargin),i.text(r),n}),"drawText"),Eve=l(((t,e,r,n)=>{const i=t.append("image");i.attr("x",e),i.attr("y",r);const a=(0,KJ.sanitizeUrl)(n);i.attr("xlink:href",a)}),"drawImage"),_ve=l(((t,e,r,n)=>{const i=t.append("use");i.attr("x",e),i.attr("y",r);const a=(0,KJ.sanitizeUrl)(n);i.attr("xlink:href",`#${a}`)}),"drawEmbeddedImage"),ch=l((()=>({x:0,y:0,width:100,height:100,fill:"#EDF2AE",stroke:"#666",anchor:"start",rx:0,ry:0})),"getNoteRect"),qA=l((()=>({x:0,y:0,width:100,height:100,"text-anchor":"start",style:"#666",textMargin:0,rx:0,ry:0,tspan:!0})),"getTextObj"),w5=(function(){var t=l((function(Ge,$e,Pe,j){for(Pe=Pe||{},j=Ge.length;j--;Pe[Ge[j]]=$e);return Pe}),"o"),e=[1,24],r=[1,25],n=[1,26],i=[1,27],a=[1,28],s=[1,63],o=[1,64],u=[1,65],h=[1,66],d=[1,67],p=[1,68],f=[1,69],g=[1,29],m=[1,30],y=[1,31],v=[1,32],x=[1,33],b=[1,34],w=[1,35],T=[1,36],k=[1,37],C=[1,38],E=[1,39],_=[1,40],S=[1,41],N=[1,42],O=[1,43],B=[1,44],L=[1,45],I=[1,46],A=[1,47],M=[1,48],D=[1,50],R=[1,51],P=[1,52],$=[1,53],z=[1,54],q=[1,55],W=[1,56],Q=[1,57],te=[1,58],oe=[1,59],re=[1,60],H=[14,42],K=[14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],ie=[12,14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],ne=[1,82],J=[1,83],ue=[1,84],Y=[1,85],se=[12,14,42],de=[12,14,33,42],ce=[12,14,33,42,76,77,79,80],Ee=[12,33],ve=[34,36,37,38,39,40,41,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],De={trace:l((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,direction_tb:6,direction_bt:7,direction_rl:8,direction_lr:9,graphConfig:10,C4_CONTEXT:11,NEWLINE:12,statements:13,EOF:14,C4_CONTAINER:15,C4_COMPONENT:16,C4_DYNAMIC:17,C4_DEPLOYMENT:18,otherStatements:19,diagramStatements:20,otherStatement:21,title:22,accDescription:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,boundaryStatement:29,boundaryStartStatement:30,boundaryStopStatement:31,boundaryStart:32,LBRACE:33,ENTERPRISE_BOUNDARY:34,attributes:35,SYSTEM_BOUNDARY:36,BOUNDARY:37,CONTAINER_BOUNDARY:38,NODE:39,NODE_L:40,NODE_R:41,RBRACE:42,diagramStatement:43,PERSON:44,PERSON_EXT:45,SYSTEM:46,SYSTEM_DB:47,SYSTEM_QUEUE:48,SYSTEM_EXT:49,SYSTEM_EXT_DB:50,SYSTEM_EXT_QUEUE:51,CONTAINER:52,CONTAINER_DB:53,CONTAINER_QUEUE:54,CONTAINER_EXT:55,CONTAINER_EXT_DB:56,CONTAINER_EXT_QUEUE:57,COMPONENT:58,COMPONENT_DB:59,COMPONENT_QUEUE:60,COMPONENT_EXT:61,COMPONENT_EXT_DB:62,COMPONENT_EXT_QUEUE:63,REL:64,BIREL:65,REL_U:66,REL_D:67,REL_L:68,REL_R:69,REL_B:70,REL_INDEX:71,UPDATE_EL_STYLE:72,UPDATE_REL_STYLE:73,UPDATE_LAYOUT_CONFIG:74,attribute:75,STR:76,STR_KEY:77,STR_VALUE:78,ATTRIBUTE:79,ATTRIBUTE_EMPTY:80,$accept:0,$end:1},terminals_:{2:"error",6:"direction_tb",7:"direction_bt",8:"direction_rl",9:"direction_lr",11:"C4_CONTEXT",12:"NEWLINE",14:"EOF",15:"C4_CONTAINER",16:"C4_COMPONENT",17:"C4_DYNAMIC",18:"C4_DEPLOYMENT",22:"title",23:"accDescription",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"LBRACE",34:"ENTERPRISE_BOUNDARY",36:"SYSTEM_BOUNDARY",37:"BOUNDARY",38:"CONTAINER_BOUNDARY",39:"NODE",40:"NODE_L",41:"NODE_R",42:"RBRACE",44:"PERSON",45:"PERSON_EXT",46:"SYSTEM",47:"SYSTEM_DB",48:"SYSTEM_QUEUE",49:"SYSTEM_EXT",50:"SYSTEM_EXT_DB",51:"SYSTEM_EXT_QUEUE",52:"CONTAINER",53:"CONTAINER_DB",54:"CONTAINER_QUEUE",55:"CONTAINER_EXT",56:"CONTAINER_EXT_DB",57:"CONTAINER_EXT_QUEUE",58:"COMPONENT",59:"COMPONENT_DB",60:"COMPONENT_QUEUE",61:"COMPONENT_EXT",62:"COMPONENT_EXT_DB",63:"COMPONENT_EXT_QUEUE",64:"REL",65:"BIREL",66:"REL_U",67:"REL_D",68:"REL_L",69:"REL_R",70:"REL_B",71:"REL_INDEX",72:"UPDATE_EL_STYLE",73:"UPDATE_REL_STYLE",74:"UPDATE_LAYOUT_CONFIG",76:"STR",77:"STR_KEY",78:"STR_VALUE",79:"ATTRIBUTE",80:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[5,1],[5,1],[5,1],[5,1],[4,1],[10,4],[10,4],[10,4],[10,4],[10,4],[13,1],[13,1],[13,2],[19,1],[19,2],[19,3],[21,1],[21,1],[21,2],[21,2],[21,1],[29,3],[30,3],[30,3],[30,4],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[31,1],[20,1],[20,2],[20,3],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,1],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[35,1],[35,2],[75,1],[75,2],[75,1],[75,1]],performAction:l((function(Ge,$e,Pe,j,pe,X,ge){var G=X.length-1;switch(pe){case 3:j.setDirection("TB");break;case 4:j.setDirection("BT");break;case 5:j.setDirection("RL");break;case 6:j.setDirection("LR");break;case 8:case 9:case 10:case 11:case 12:j.setC4Type(X[G-3]);break;case 19:j.setTitle(X[G].substring(6)),this.$=X[G].substring(6);break;case 20:j.setAccDescription(X[G].substring(15)),this.$=X[G].substring(15);break;case 21:this.$=X[G].trim(),j.setTitle(this.$);break;case 22:case 23:this.$=X[G].trim(),j.setAccDescription(this.$);break;case 28:X[G].splice(2,0,"ENTERPRISE"),j.addPersonOrSystemBoundary(...X[G]),this.$=X[G];break;case 29:X[G].splice(2,0,"SYSTEM"),j.addPersonOrSystemBoundary(...X[G]),this.$=X[G];break;case 30:j.addPersonOrSystemBoundary(...X[G]),this.$=X[G];break;case 31:X[G].splice(2,0,"CONTAINER"),j.addContainerBoundary(...X[G]),this.$=X[G];break;case 32:j.addDeploymentNode("node",...X[G]),this.$=X[G];break;case 33:j.addDeploymentNode("nodeL",...X[G]),this.$=X[G];break;case 34:j.addDeploymentNode("nodeR",...X[G]),this.$=X[G];break;case 35:j.popBoundaryParseStack();break;case 39:j.addPersonOrSystem("person",...X[G]),this.$=X[G];break;case 40:j.addPersonOrSystem("external_person",...X[G]),this.$=X[G];break;case 41:j.addPersonOrSystem("system",...X[G]),this.$=X[G];break;case 42:j.addPersonOrSystem("system_db",...X[G]),this.$=X[G];break;case 43:j.addPersonOrSystem("system_queue",...X[G]),this.$=X[G];break;case 44:j.addPersonOrSystem("external_system",...X[G]),this.$=X[G];break;case 45:j.addPersonOrSystem("external_system_db",...X[G]),this.$=X[G];break;case 46:j.addPersonOrSystem("external_system_queue",...X[G]),this.$=X[G];break;case 47:j.addContainer("container",...X[G]),this.$=X[G];break;case 48:j.addContainer("container_db",...X[G]),this.$=X[G];break;case 49:j.addContainer("container_queue",...X[G]),this.$=X[G];break;case 50:j.addContainer("external_container",...X[G]),this.$=X[G];break;case 51:j.addContainer("external_container_db",...X[G]),this.$=X[G];break;case 52:j.addContainer("external_container_queue",...X[G]),this.$=X[G];break;case 53:j.addComponent("component",...X[G]),this.$=X[G];break;case 54:j.addComponent("component_db",...X[G]),this.$=X[G];break;case 55:j.addComponent("component_queue",...X[G]),this.$=X[G];break;case 56:j.addComponent("external_component",...X[G]),this.$=X[G];break;case 57:j.addComponent("external_component_db",...X[G]),this.$=X[G];break;case 58:j.addComponent("external_component_queue",...X[G]),this.$=X[G];break;case 60:j.addRel("rel",...X[G]),this.$=X[G];break;case 61:j.addRel("birel",...X[G]),this.$=X[G];break;case 62:j.addRel("rel_u",...X[G]),this.$=X[G];break;case 63:j.addRel("rel_d",...X[G]),this.$=X[G];break;case 64:j.addRel("rel_l",...X[G]),this.$=X[G];break;case 65:j.addRel("rel_r",...X[G]),this.$=X[G];break;case 66:j.addRel("rel_b",...X[G]),this.$=X[G];break;case 67:X[G].splice(0,1),j.addRel("rel",...X[G]),this.$=X[G];break;case 68:j.updateElStyle("update_el_style",...X[G]),this.$=X[G];break;case 69:j.updateRelStyle("update_rel_style",...X[G]),this.$=X[G];break;case 70:j.updateLayoutConfig("update_layout_config",...X[G]),this.$=X[G];break;case 71:this.$=[X[G]];break;case 72:X[G].unshift(X[G-1]),this.$=X[G];break;case 73:case 75:this.$=X[G].trim();break;case 74:let le={};le[X[G-1].trim()]=X[G].trim(),this.$=le;break;case 76:this.$=""}}),"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],7:[1,6],8:[1,7],9:[1,8],10:4,11:[1,9],15:[1,10],16:[1,11],17:[1,12],18:[1,13]},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,7]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{12:[1,14]},{12:[1,15]},{12:[1,16]},{12:[1,17]},{12:[1,18]},{13:19,19:20,20:21,21:22,22:e,23:r,24:n,26:i,28:a,29:49,30:61,32:62,34:s,36:o,37:u,38:h,39:d,40:p,41:f,43:23,44:g,45:m,46:y,47:v,48:x,49:b,50:w,51:T,52:k,53:C,54:E,55:_,56:S,57:N,58:O,59:B,60:L,61:I,62:A,63:M,64:D,65:R,66:P,67:$,68:z,69:q,70:W,71:Q,72:te,73:oe,74:re},{13:70,19:20,20:21,21:22,22:e,23:r,24:n,26:i,28:a,29:49,30:61,32:62,34:s,36:o,37:u,38:h,39:d,40:p,41:f,43:23,44:g,45:m,46:y,47:v,48:x,49:b,50:w,51:T,52:k,53:C,54:E,55:_,56:S,57:N,58:O,59:B,60:L,61:I,62:A,63:M,64:D,65:R,66:P,67:$,68:z,69:q,70:W,71:Q,72:te,73:oe,74:re},{13:71,19:20,20:21,21:22,22:e,23:r,24:n,26:i,28:a,29:49,30:61,32:62,34:s,36:o,37:u,38:h,39:d,40:p,41:f,43:23,44:g,45:m,46:y,47:v,48:x,49:b,50:w,51:T,52:k,53:C,54:E,55:_,56:S,57:N,58:O,59:B,60:L,61:I,62:A,63:M,64:D,65:R,66:P,67:$,68:z,69:q,70:W,71:Q,72:te,73:oe,74:re},{13:72,19:20,20:21,21:22,22:e,23:r,24:n,26:i,28:a,29:49,30:61,32:62,34:s,36:o,37:u,38:h,39:d,40:p,41:f,43:23,44:g,45:m,46:y,47:v,48:x,49:b,50:w,51:T,52:k,53:C,54:E,55:_,56:S,57:N,58:O,59:B,60:L,61:I,62:A,63:M,64:D,65:R,66:P,67:$,68:z,69:q,70:W,71:Q,72:te,73:oe,74:re},{13:73,19:20,20:21,21:22,22:e,23:r,24:n,26:i,28:a,29:49,30:61,32:62,34:s,36:o,37:u,38:h,39:d,40:p,41:f,43:23,44:g,45:m,46:y,47:v,48:x,49:b,50:w,51:T,52:k,53:C,54:E,55:_,56:S,57:N,58:O,59:B,60:L,61:I,62:A,63:M,64:D,65:R,66:P,67:$,68:z,69:q,70:W,71:Q,72:te,73:oe,74:re},{14:[1,74]},t(H,[2,13],{43:23,29:49,30:61,32:62,20:75,34:s,36:o,37:u,38:h,39:d,40:p,41:f,44:g,45:m,46:y,47:v,48:x,49:b,50:w,51:T,52:k,53:C,54:E,55:_,56:S,57:N,58:O,59:B,60:L,61:I,62:A,63:M,64:D,65:R,66:P,67:$,68:z,69:q,70:W,71:Q,72:te,73:oe,74:re}),t(H,[2,14]),t(K,[2,16],{12:[1,76]}),t(H,[2,36],{12:[1,77]}),t(ie,[2,19]),t(ie,[2,20]),{25:[1,78]},{27:[1,79]},t(ie,[2,23]),{35:80,75:81,76:ne,77:J,79:ue,80:Y},{35:86,75:81,76:ne,77:J,79:ue,80:Y},{35:87,75:81,76:ne,77:J,79:ue,80:Y},{35:88,75:81,76:ne,77:J,79:ue,80:Y},{35:89,75:81,76:ne,77:J,79:ue,80:Y},{35:90,75:81,76:ne,77:J,79:ue,80:Y},{35:91,75:81,76:ne,77:J,79:ue,80:Y},{35:92,75:81,76:ne,77:J,79:ue,80:Y},{35:93,75:81,76:ne,77:J,79:ue,80:Y},{35:94,75:81,76:ne,77:J,79:ue,80:Y},{35:95,75:81,76:ne,77:J,79:ue,80:Y},{35:96,75:81,76:ne,77:J,79:ue,80:Y},{35:97,75:81,76:ne,77:J,79:ue,80:Y},{35:98,75:81,76:ne,77:J,79:ue,80:Y},{35:99,75:81,76:ne,77:J,79:ue,80:Y},{35:100,75:81,76:ne,77:J,79:ue,80:Y},{35:101,75:81,76:ne,77:J,79:ue,80:Y},{35:102,75:81,76:ne,77:J,79:ue,80:Y},{35:103,75:81,76:ne,77:J,79:ue,80:Y},{35:104,75:81,76:ne,77:J,79:ue,80:Y},t(se,[2,59]),{35:105,75:81,76:ne,77:J,79:ue,80:Y},{35:106,75:81,76:ne,77:J,79:ue,80:Y},{35:107,75:81,76:ne,77:J,79:ue,80:Y},{35:108,75:81,76:ne,77:J,79:ue,80:Y},{35:109,75:81,76:ne,77:J,79:ue,80:Y},{35:110,75:81,76:ne,77:J,79:ue,80:Y},{35:111,75:81,76:ne,77:J,79:ue,80:Y},{35:112,75:81,76:ne,77:J,79:ue,80:Y},{35:113,75:81,76:ne,77:J,79:ue,80:Y},{35:114,75:81,76:ne,77:J,79:ue,80:Y},{35:115,75:81,76:ne,77:J,79:ue,80:Y},{20:116,29:49,30:61,32:62,34:s,36:o,37:u,38:h,39:d,40:p,41:f,43:23,44:g,45:m,46:y,47:v,48:x,49:b,50:w,51:T,52:k,53:C,54:E,55:_,56:S,57:N,58:O,59:B,60:L,61:I,62:A,63:M,64:D,65:R,66:P,67:$,68:z,69:q,70:W,71:Q,72:te,73:oe,74:re},{12:[1,118],33:[1,117]},{35:119,75:81,76:ne,77:J,79:ue,80:Y},{35:120,75:81,76:ne,77:J,79:ue,80:Y},{35:121,75:81,76:ne,77:J,79:ue,80:Y},{35:122,75:81,76:ne,77:J,79:ue,80:Y},{35:123,75:81,76:ne,77:J,79:ue,80:Y},{35:124,75:81,76:ne,77:J,79:ue,80:Y},{35:125,75:81,76:ne,77:J,79:ue,80:Y},{14:[1,126]},{14:[1,127]},{14:[1,128]},{14:[1,129]},{1:[2,8]},t(H,[2,15]),t(K,[2,17],{21:22,19:130,22:e,23:r,24:n,26:i,28:a}),t(H,[2,37],{19:20,20:21,21:22,43:23,29:49,30:61,32:62,13:131,22:e,23:r,24:n,26:i,28:a,34:s,36:o,37:u,38:h,39:d,40:p,41:f,44:g,45:m,46:y,47:v,48:x,49:b,50:w,51:T,52:k,53:C,54:E,55:_,56:S,57:N,58:O,59:B,60:L,61:I,62:A,63:M,64:D,65:R,66:P,67:$,68:z,69:q,70:W,71:Q,72:te,73:oe,74:re}),t(ie,[2,21]),t(ie,[2,22]),t(se,[2,39]),t(de,[2,71],{75:81,35:132,76:ne,77:J,79:ue,80:Y}),t(ce,[2,73]),{78:[1,133]},t(ce,[2,75]),t(ce,[2,76]),t(se,[2,40]),t(se,[2,41]),t(se,[2,42]),t(se,[2,43]),t(se,[2,44]),t(se,[2,45]),t(se,[2,46]),t(se,[2,47]),t(se,[2,48]),t(se,[2,49]),t(se,[2,50]),t(se,[2,51]),t(se,[2,52]),t(se,[2,53]),t(se,[2,54]),t(se,[2,55]),t(se,[2,56]),t(se,[2,57]),t(se,[2,58]),t(se,[2,60]),t(se,[2,61]),t(se,[2,62]),t(se,[2,63]),t(se,[2,64]),t(se,[2,65]),t(se,[2,66]),t(se,[2,67]),t(se,[2,68]),t(se,[2,69]),t(se,[2,70]),{31:134,42:[1,135]},{12:[1,136]},{33:[1,137]},t(Ee,[2,28]),t(Ee,[2,29]),t(Ee,[2,30]),t(Ee,[2,31]),t(Ee,[2,32]),t(Ee,[2,33]),t(Ee,[2,34]),{1:[2,9]},{1:[2,10]},{1:[2,11]},{1:[2,12]},t(K,[2,18]),t(H,[2,38]),t(de,[2,72]),t(ce,[2,74]),t(se,[2,24]),t(se,[2,35]),t(ve,[2,25]),t(ve,[2,26],{12:[1,138]}),t(ve,[2,27])],defaultActions:{2:[2,1],3:[2,2],4:[2,7],5:[2,3],6:[2,4],7:[2,5],8:[2,6],74:[2,8],126:[2,9],127:[2,10],128:[2,11],129:[2,12]},parseError:l((function(Ge,$e){if(!$e.recoverable){var Pe=new Error(Ge);throw Pe.hash=$e,Pe}this.trace(Ge)}),"parseError"),parse:l((function(Ge){var $e=this,Pe=[0],j=[],pe=[null],X=[],ge=this.table,G="",le=0,V=0,me=2,he=1,_e=X.slice.call(arguments,1),Ce=Object.create(this.lexer),Te={yy:{}};for(var Re in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Re)&&(Te.yy[Re]=this.yy[Re]);Ce.setInput(Ge,Te.yy),Te.yy.lexer=Ce,Te.yy.parser=this,Ce.yylloc===void 0&&(Ce.yylloc={});var Le=Ce.yylloc;X.push(Le);var ot=Ce.options&&Ce.options.ranges;function Tt(je){Pe.length=Pe.length-2*je,pe.length=pe.length-je,X.length=X.length-je}function Fe(){var je;return typeof(je=j.pop()||Ce.lex()||he)!="number"&&(je instanceof Array&&(je=(j=je).pop()),je=$e.symbols_[je]||je),je}typeof Te.yy.parseError=="function"?this.parseError=Te.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,l(Tt,"popStack"),l(Fe,"lex");for(var gt,Qe,Be,rt,lt,Je,_t,it,pt={};;){if(Qe=Pe[Pe.length-1],this.defaultActions[Qe]?Be=this.defaultActions[Qe]:(gt==null&&(gt=Fe()),Be=ge[Qe]&&ge[Qe][gt]),Be===void 0||!Be.length||!Be[0]){var Ye="";for(lt in it=[],ge[Qe])this.terminals_[lt]&&lt>me&&it.push("'"+this.terminals_[lt]+"'");Ye=Ce.showPosition?"Parse error on line "+(le+1)+`:
`+Ce.showPosition()+`
Expecting `+it.join(", ")+", got '"+(this.terminals_[gt]||gt)+"'":"Parse error on line "+(le+1)+": Unexpected "+(gt==he?"end of input":"'"+(this.terminals_[gt]||gt)+"'"),this.parseError(Ye,{text:Ce.match,token:this.terminals_[gt]||gt,line:Ce.yylineno,loc:Le,expected:it})}if(Be[0]instanceof Array&&Be.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Qe+", token: "+gt);switch(Be[0]){case 1:Pe.push(gt),pe.push(Ce.yytext),X.push(Ce.yylloc),Pe.push(Be[1]),gt=null,V=Ce.yyleng,G=Ce.yytext,le=Ce.yylineno,Le=Ce.yylloc;break;case 2:if(Je=this.productions_[Be[1]][1],pt.$=pe[pe.length-Je],pt._$={first_line:X[X.length-(Je||1)].first_line,last_line:X[X.length-1].last_line,first_column:X[X.length-(Je||1)].first_column,last_column:X[X.length-1].last_column},ot&&(pt._$.range=[X[X.length-(Je||1)].range[0],X[X.length-1].range[1]]),(rt=this.performAction.apply(pt,[G,V,le,Te.yy,Be[1],pe,X].concat(_e)))!==void 0)return rt;Je&&(Pe=Pe.slice(0,-1*Je*2),pe=pe.slice(0,-1*Je),X=X.slice(0,-1*Je)),Pe.push(this.productions_[Be[1]][0]),pe.push(pt.$),X.push(pt._$),_t=ge[Pe[Pe.length-2]][Pe[Pe.length-1]],Pe.push(_t);break;case 3:return!0}}return!0}),"parse")},Ue=(function(){var Ge={EOF:1,parseError:l((function($e,Pe){if(!this.yy.parser)throw new Error($e);this.yy.parser.parseError($e,Pe)}),"parseError"),setInput:l((function($e,Pe){return this.yy=Pe||this.yy||{},this._input=$e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:l((function(){var $e=this._input[0];return this.yytext+=$e,this.yyleng++,this.offset++,this.match+=$e,this.matched+=$e,$e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),$e}),"input"),unput:l((function($e){var Pe=$e.length,j=$e.split(/(?:\r\n?|\n)/g);this._input=$e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Pe),this.offset-=Pe;var pe=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),j.length-1&&(this.yylineno-=j.length-1);var X=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:j?(j.length===pe.length?this.yylloc.first_column:0)+pe[pe.length-j.length].length-j[0].length:this.yylloc.first_column-Pe},this.options.ranges&&(this.yylloc.range=[X[0],X[0]+this.yyleng-Pe]),this.yyleng=this.yytext.length,this}),"unput"),more:l((function(){return this._more=!0,this}),"more"),reject:l((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:l((function($e){this.unput(this.match.slice($e))}),"less"),pastInput:l((function(){var $e=this.matched.substr(0,this.matched.length-this.match.length);return($e.length>20?"...":"")+$e.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:l((function(){var $e=this.match;return $e.length<20&&($e+=this._input.substr(0,20-$e.length)),($e.substr(0,20)+($e.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:l((function(){var $e=this.pastInput(),Pe=new Array($e.length+1).join("-");return $e+this.upcomingInput()+`
`+Pe+"^"}),"showPosition"),test_match:l((function($e,Pe){var j,pe,X;if(this.options.backtrack_lexer&&(X={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(X.yylloc.range=this.yylloc.range.slice(0))),(pe=$e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=pe.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:pe?pe[pe.length-1].length-pe[pe.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+$e[0].length},this.yytext+=$e[0],this.match+=$e[0],this.matches=$e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice($e[0].length),this.matched+=$e[0],j=this.performAction.call(this,this.yy,this,Pe,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),j)return j;if(this._backtrack){for(var ge in X)this[ge]=X[ge];return!1}return!1}),"test_match"),next:l((function(){if(this.done)return this.EOF;var $e,Pe,j,pe;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var X=this._currentRules(),ge=0;ge<X.length;ge++)if((j=this._input.match(this.rules[X[ge]]))&&(!Pe||j[0].length>Pe[0].length)){if(Pe=j,pe=ge,this.options.backtrack_lexer){if(($e=this.test_match(j,X[ge]))!==!1)return $e;if(this._backtrack){Pe=!1;continue}return!1}if(!this.options.flex)break}return Pe?($e=this.test_match(Pe,X[pe]))!==!1&&$e:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:l((function(){var $e=this.next();return $e||this.lex()}),"lex"),begin:l((function($e){this.conditionStack.push($e)}),"begin"),popState:l((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:l((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:l((function($e){return($e=this.conditionStack.length-1-Math.abs($e||0))>=0?this.conditionStack[$e]:"INITIAL"}),"topState"),pushState:l((function($e){this.begin($e)}),"pushState"),stateStackSize:l((function(){return this.conditionStack.length}),"stateStackSize"),options:{},performAction:l((function($e,Pe,j,pe){switch(j){case 0:return 6;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 22;case 5:return 23;case 6:return this.begin("acc_title"),24;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),26;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:case 73:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:case 16:case 70:break;case 14:c;break;case 15:return 12;case 17:return 11;case 18:return 15;case 19:return 16;case 20:return 17;case 21:return 18;case 22:return this.begin("person_ext"),45;case 23:return this.begin("person"),44;case 24:return this.begin("system_ext_queue"),51;case 25:return this.begin("system_ext_db"),50;case 26:return this.begin("system_ext"),49;case 27:return this.begin("system_queue"),48;case 28:return this.begin("system_db"),47;case 29:return this.begin("system"),46;case 30:return this.begin("boundary"),37;case 31:return this.begin("enterprise_boundary"),34;case 32:return this.begin("system_boundary"),36;case 33:return this.begin("container_ext_queue"),57;case 34:return this.begin("container_ext_db"),56;case 35:return this.begin("container_ext"),55;case 36:return this.begin("container_queue"),54;case 37:return this.begin("container_db"),53;case 38:return this.begin("container"),52;case 39:return this.begin("container_boundary"),38;case 40:return this.begin("component_ext_queue"),63;case 41:return this.begin("component_ext_db"),62;case 42:return this.begin("component_ext"),61;case 43:return this.begin("component_queue"),60;case 44:return this.begin("component_db"),59;case 45:return this.begin("component"),58;case 46:case 47:return this.begin("node"),39;case 48:return this.begin("node_l"),40;case 49:return this.begin("node_r"),41;case 50:return this.begin("rel"),64;case 51:return this.begin("birel"),65;case 52:case 53:return this.begin("rel_u"),66;case 54:case 55:return this.begin("rel_d"),67;case 56:case 57:return this.begin("rel_l"),68;case 58:case 59:return this.begin("rel_r"),69;case 60:return this.begin("rel_b"),70;case 61:return this.begin("rel_index"),71;case 62:return this.begin("update_el_style"),72;case 63:return this.begin("update_rel_style"),73;case 64:return this.begin("update_layout_config"),74;case 65:return"EOF_IN_STRUCT";case 66:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 67:this.begin("attribute");break;case 68:case 79:this.popState(),this.popState();break;case 69:case 71:return 80;case 72:this.begin("string");break;case 74:case 80:return"STR";case 75:this.begin("string_kv");break;case 76:return this.begin("string_kv_key"),"STR_KEY";case 77:this.popState(),this.begin("string_kv_value");break;case 78:return"STR_VALUE";case 81:return"LBRACE";case 82:return"RBRACE";case 83:return"SPACE";case 84:return"EOL";case 85:return 14}}),"anonymous"),rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},string_kv_value:{rules:[78,79],inclusive:!1},string_kv_key:{rules:[77],inclusive:!1},string_kv:{rules:[76],inclusive:!1},string:{rules:[73,74],inclusive:!1},attribute:{rules:[68,69,70,71,72,75,80],inclusive:!1},update_layout_config:{rules:[65,66,67,68],inclusive:!1},update_rel_style:{rules:[65,66,67,68],inclusive:!1},update_el_style:{rules:[65,66,67,68],inclusive:!1},rel_b:{rules:[65,66,67,68],inclusive:!1},rel_r:{rules:[65,66,67,68],inclusive:!1},rel_l:{rules:[65,66,67,68],inclusive:!1},rel_d:{rules:[65,66,67,68],inclusive:!1},rel_u:{rules:[65,66,67,68],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[65,66,67,68],inclusive:!1},node_r:{rules:[65,66,67,68],inclusive:!1},node_l:{rules:[65,66,67,68],inclusive:!1},node:{rules:[65,66,67,68],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[65,66,67,68],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[65,66,67,68],inclusive:!1},component_ext:{rules:[65,66,67,68],inclusive:!1},component_queue:{rules:[65,66,67,68],inclusive:!1},component_db:{rules:[65,66,67,68],inclusive:!1},component:{rules:[65,66,67,68],inclusive:!1},container_boundary:{rules:[65,66,67,68],inclusive:!1},container_ext_queue:{rules:[65,66,67,68],inclusive:!1},container_ext_db:{rules:[65,66,67,68],inclusive:!1},container_ext:{rules:[65,66,67,68],inclusive:!1},container_queue:{rules:[65,66,67,68],inclusive:!1},container_db:{rules:[65,66,67,68],inclusive:!1},container:{rules:[65,66,67,68],inclusive:!1},birel:{rules:[65,66,67,68],inclusive:!1},system_boundary:{rules:[65,66,67,68],inclusive:!1},enterprise_boundary:{rules:[65,66,67,68],inclusive:!1},boundary:{rules:[65,66,67,68],inclusive:!1},system_ext_queue:{rules:[65,66,67,68],inclusive:!1},system_ext_db:{rules:[65,66,67,68],inclusive:!1},system_ext:{rules:[65,66,67,68],inclusive:!1},system_queue:{rules:[65,66,67,68],inclusive:!1},system_db:{rules:[65,66,67,68],inclusive:!1},system:{rules:[65,66,67,68],inclusive:!1},person_ext:{rules:[65,66,67,68],inclusive:!1},person:{rules:[65,66,67,68],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,81,82,83,84,85],inclusive:!0}}};return Ge})();function ze(){this.yy={}}return De.lexer=Ue,l(ze,"Parser"),ze.prototype=De,De.Parser=ze,new ze})();w5.parser=w5;var QJ,Cve=w5,_s=[],jl=[""],Fi="global",bs="",so=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],M2=[],jA="",WA=!1,k5=4,T5=2,Sve=l((function(){return QJ}),"getC4Type"),Ave=l((function(t){QJ=Ir(t,ke())}),"setC4Type"),Lve=l((function(t,e,r,n,i,a,s,o,u){if(t==null||e==null||r==null||n==null)return;let h={};const d=M2.find((p=>p.from===e&&p.to===r));if(d?h=d:M2.push(h),h.type=t,h.from=e,h.to=r,h.label={text:n},i==null)h.techn={text:""};else if(typeof i=="object"){let[p,f]=Object.entries(i)[0];h[p]={text:f}}else h.techn={text:i};if(a==null)h.descr={text:""};else if(typeof a=="object"){let[p,f]=Object.entries(a)[0];h[p]={text:f}}else h.descr={text:a};if(typeof s=="object"){let[p,f]=Object.entries(s)[0];h[p]=f}else h.sprite=s;if(typeof o=="object"){let[p,f]=Object.entries(o)[0];h[p]=f}else h.tags=o;if(typeof u=="object"){let[p,f]=Object.entries(u)[0];h[p]=f}else h.link=u;h.wrap=gc()}),"addRel"),Nve=l((function(t,e,r,n,i,a,s){if(e===null||r===null)return;let o={};const u=_s.find((h=>h.alias===e));if(u&&e===u.alias?o=u:(o.alias=e,_s.push(o)),o.label=r==null?{text:""}:{text:r},n==null)o.descr={text:""};else if(typeof n=="object"){let[h,d]=Object.entries(n)[0];o[h]={text:d}}else o.descr={text:n};if(typeof i=="object"){let[h,d]=Object.entries(i)[0];o[h]=d}else o.sprite=i;if(typeof a=="object"){let[h,d]=Object.entries(a)[0];o[h]=d}else o.tags=a;if(typeof s=="object"){let[h,d]=Object.entries(s)[0];o[h]=d}else o.link=s;o.typeC4Shape={text:t},o.parentBoundary=Fi,o.wrap=gc()}),"addPersonOrSystem"),Ive=l((function(t,e,r,n,i,a,s,o){if(e===null||r===null)return;let u={};const h=_s.find((d=>d.alias===e));if(h&&e===h.alias?u=h:(u.alias=e,_s.push(u)),u.label=r==null?{text:""}:{text:r},n==null)u.techn={text:""};else if(typeof n=="object"){let[d,p]=Object.entries(n)[0];u[d]={text:p}}else u.techn={text:n};if(i==null)u.descr={text:""};else if(typeof i=="object"){let[d,p]=Object.entries(i)[0];u[d]={text:p}}else u.descr={text:i};if(typeof a=="object"){let[d,p]=Object.entries(a)[0];u[d]=p}else u.sprite=a;if(typeof s=="object"){let[d,p]=Object.entries(s)[0];u[d]=p}else u.tags=s;if(typeof o=="object"){let[d,p]=Object.entries(o)[0];u[d]=p}else u.link=o;u.wrap=gc(),u.typeC4Shape={text:t},u.parentBoundary=Fi}),"addContainer"),Rve=l((function(t,e,r,n,i,a,s,o){if(e===null||r===null)return;let u={};const h=_s.find((d=>d.alias===e));if(h&&e===h.alias?u=h:(u.alias=e,_s.push(u)),u.label=r==null?{text:""}:{text:r},n==null)u.techn={text:""};else if(typeof n=="object"){let[d,p]=Object.entries(n)[0];u[d]={text:p}}else u.techn={text:n};if(i==null)u.descr={text:""};else if(typeof i=="object"){let[d,p]=Object.entries(i)[0];u[d]={text:p}}else u.descr={text:i};if(typeof a=="object"){let[d,p]=Object.entries(a)[0];u[d]=p}else u.sprite=a;if(typeof s=="object"){let[d,p]=Object.entries(s)[0];u[d]=p}else u.tags=s;if(typeof o=="object"){let[d,p]=Object.entries(o)[0];u[d]=p}else u.link=o;u.wrap=gc(),u.typeC4Shape={text:t},u.parentBoundary=Fi}),"addComponent"),Mve=l((function(t,e,r,n,i){if(t===null||e===null)return;let a={};const s=so.find((o=>o.alias===t));if(s&&t===s.alias?a=s:(a.alias=t,so.push(a)),a.label=e==null?{text:""}:{text:e},r==null)a.type={text:"system"};else if(typeof r=="object"){let[o,u]=Object.entries(r)[0];a[o]={text:u}}else a.type={text:r};if(typeof n=="object"){let[o,u]=Object.entries(n)[0];a[o]=u}else a.tags=n;if(typeof i=="object"){let[o,u]=Object.entries(i)[0];a[o]=u}else a.link=i;a.parentBoundary=Fi,a.wrap=gc(),bs=Fi,Fi=t,jl.push(bs)}),"addPersonOrSystemBoundary"),Dve=l((function(t,e,r,n,i){if(t===null||e===null)return;let a={};const s=so.find((o=>o.alias===t));if(s&&t===s.alias?a=s:(a.alias=t,so.push(a)),a.label=e==null?{text:""}:{text:e},r==null)a.type={text:"container"};else if(typeof r=="object"){let[o,u]=Object.entries(r)[0];a[o]={text:u}}else a.type={text:r};if(typeof n=="object"){let[o,u]=Object.entries(n)[0];a[o]=u}else a.tags=n;if(typeof i=="object"){let[o,u]=Object.entries(i)[0];a[o]=u}else a.link=i;a.parentBoundary=Fi,a.wrap=gc(),bs=Fi,Fi=t,jl.push(bs)}),"addContainerBoundary"),Ove=l((function(t,e,r,n,i,a,s,o){if(e===null||r===null)return;let u={};const h=so.find((d=>d.alias===e));if(h&&e===h.alias?u=h:(u.alias=e,so.push(u)),u.label=r==null?{text:""}:{text:r},n==null)u.type={text:"node"};else if(typeof n=="object"){let[d,p]=Object.entries(n)[0];u[d]={text:p}}else u.type={text:n};if(i==null)u.descr={text:""};else if(typeof i=="object"){let[d,p]=Object.entries(i)[0];u[d]={text:p}}else u.descr={text:i};if(typeof s=="object"){let[d,p]=Object.entries(s)[0];u[d]=p}else u.tags=s;if(typeof o=="object"){let[d,p]=Object.entries(o)[0];u[d]=p}else u.link=o;u.nodeType=t,u.parentBoundary=Fi,u.wrap=gc(),bs=Fi,Fi=e,jl.push(bs)}),"addDeploymentNode"),Pve=l((function(){Fi=bs,jl.pop(),bs=jl.pop(),jl.push(bs)}),"popBoundaryParseStack"),Bve=l((function(t,e,r,n,i,a,s,o,u,h,d){let p=_s.find((f=>f.alias===e));if(p!==void 0||(p=so.find((f=>f.alias===e)),p!==void 0)){if(r!=null)if(typeof r=="object"){let[f,g]=Object.entries(r)[0];p[f]=g}else p.bgColor=r;if(n!=null)if(typeof n=="object"){let[f,g]=Object.entries(n)[0];p[f]=g}else p.fontColor=n;if(i!=null)if(typeof i=="object"){let[f,g]=Object.entries(i)[0];p[f]=g}else p.borderColor=i;if(a!=null)if(typeof a=="object"){let[f,g]=Object.entries(a)[0];p[f]=g}else p.shadowing=a;if(s!=null)if(typeof s=="object"){let[f,g]=Object.entries(s)[0];p[f]=g}else p.shape=s;if(o!=null)if(typeof o=="object"){let[f,g]=Object.entries(o)[0];p[f]=g}else p.sprite=o;if(u!=null)if(typeof u=="object"){let[f,g]=Object.entries(u)[0];p[f]=g}else p.techn=u;if(h!=null)if(typeof h=="object"){let[f,g]=Object.entries(h)[0];p[f]=g}else p.legendText=h;if(d!=null)if(typeof d=="object"){let[f,g]=Object.entries(d)[0];p[f]=g}else p.legendSprite=d}}),"updateElStyle"),$ve=l((function(t,e,r,n,i,a,s){const o=M2.find((u=>u.from===e&&u.to===r));if(o!==void 0){if(n!=null)if(typeof n=="object"){let[u,h]=Object.entries(n)[0];o[u]=h}else o.textColor=n;if(i!=null)if(typeof i=="object"){let[u,h]=Object.entries(i)[0];o[u]=h}else o.lineColor=i;if(a!=null)if(typeof a=="object"){let[u,h]=Object.entries(a)[0];o[u]=parseInt(h)}else o.offsetX=parseInt(a);if(s!=null)if(typeof s=="object"){let[u,h]=Object.entries(s)[0];o[u]=parseInt(h)}else o.offsetY=parseInt(s)}}),"updateRelStyle"),Fve=l((function(t,e,r){let n=k5,i=T5;if(typeof e=="object"){const a=Object.values(e)[0];n=parseInt(a)}else n=parseInt(e);if(typeof r=="object"){const a=Object.values(r)[0];i=parseInt(a)}else i=parseInt(r);n>=1&&(k5=n),i>=1&&(T5=i)}),"updateLayoutConfig"),zve=l((function(){return k5}),"getC4ShapeInRow"),Gve=l((function(){return T5}),"getC4BoundaryInRow"),Uve=l((function(){return Fi}),"getCurrentBoundaryParse"),qve=l((function(){return bs}),"getParentBoundaryParse"),JJ=l((function(t){return t==null?_s:_s.filter((e=>e.parentBoundary===t))}),"getC4ShapeArray"),jve=l((function(t){return _s.find((e=>e.alias===t))}),"getC4Shape"),Wve=l((function(t){return Object.keys(JJ(t))}),"getC4ShapeKeys"),e7=l((function(t){return t==null?so:so.filter((e=>e.parentBoundary===t))}),"getBoundaries"),Yve=e7,Vve=l((function(){return M2}),"getRels"),Hve=l((function(){return jA}),"getTitle"),Xve=l((function(t){WA=t}),"setWrap"),gc=l((function(){return WA}),"autoWrap"),Kve=l((function(){_s=[],so=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],bs="",Fi="global",jl=[""],M2=[],jl=[""],jA="",WA=!1,k5=4,T5=2}),"clear"),Zve=l((function(t){jA=Ir(t,ke())}),"setTitle"),iC={addPersonOrSystem:Nve,addPersonOrSystemBoundary:Mve,addContainer:Ive,addContainerBoundary:Dve,addComponent:Rve,addDeploymentNode:Ove,popBoundaryParseStack:Pve,addRel:Lve,updateElStyle:Bve,updateRelStyle:$ve,updateLayoutConfig:Fve,autoWrap:gc,setWrap:Xve,getC4ShapeArray:JJ,getC4Shape:jve,getC4ShapeKeys:Wve,getBoundaries:e7,getBoundarys:Yve,getCurrentBoundaryParse:Uve,getParentBoundaryParse:qve,getRels:Vve,getTitle:Hve,getC4Type:Sve,getC4ShapeInRow:zve,getC4BoundaryInRow:Gve,setAccTitle:zn,getAccTitle:Xn,getAccDescription:Zn,setAccDescription:Kn,getConfig:l((()=>ke().c4),"getConfig"),clear:Kve,LINETYPE:{SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},ARROWTYPE:{FILLED:0,OPEN:1},PLACEMENT:{LEFTOF:0,RIGHTOF:1,OVER:2},setTitle:Zve,setC4Type:Ave},Qve=Ci(bv()),YA=l((function(t,e){return lw(t,e)}),"drawRect"),t7=l((function(t,e,r,n,i,a){const s=t.append("image");s.attr("width",e),s.attr("height",r),s.attr("x",n),s.attr("y",i);let o=a.startsWith("data:image/png;base64")?a:(0,Qve.sanitizeUrl)(a);s.attr("xlink:href",o)}),"drawImage"),Jve=l(((t,e,r)=>{const n=t.append("g");let i=0;for(let a of e){let s=a.textColor?a.textColor:"#444444",o=a.lineColor?a.lineColor:"#444444",u=a.offsetX?parseInt(a.offsetX):0,h=a.offsetY?parseInt(a.offsetY):0,d="";if(i===0){let f=n.append("line");f.attr("x1",a.startPoint.x),f.attr("y1",a.startPoint.y),f.attr("x2",a.endPoint.x),f.attr("y2",a.endPoint.y),f.attr("stroke-width","1"),f.attr("stroke",o),f.style("fill","none"),a.type!=="rel_b"&&f.attr("marker-end","url("+d+"#arrowhead)"),a.type!=="birel"&&a.type!=="rel_b"||f.attr("marker-start","url("+d+"#arrowend)"),i=-1}else{let f=n.append("path");f.attr("fill","none").attr("stroke-width","1").attr("stroke",o).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",a.startPoint.x).replaceAll("starty",a.startPoint.y).replaceAll("controlx",a.startPoint.x+(a.endPoint.x-a.startPoint.x)/2-(a.endPoint.x-a.startPoint.x)/4).replaceAll("controly",a.startPoint.y+(a.endPoint.y-a.startPoint.y)/2).replaceAll("stopx",a.endPoint.x).replaceAll("stopy",a.endPoint.y)),a.type!=="rel_b"&&f.attr("marker-end","url("+d+"#arrowhead)"),a.type!=="birel"&&a.type!=="rel_b"||f.attr("marker-start","url("+d+"#arrowend)")}let p=r.messageFont();No(r)(a.label.text,n,Math.min(a.startPoint.x,a.endPoint.x)+Math.abs(a.endPoint.x-a.startPoint.x)/2+u,Math.min(a.startPoint.y,a.endPoint.y)+Math.abs(a.endPoint.y-a.startPoint.y)/2+h,a.label.width,a.label.height,{fill:s},p),a.techn&&a.techn.text!==""&&(p=r.messageFont(),No(r)("["+a.techn.text+"]",n,Math.min(a.startPoint.x,a.endPoint.x)+Math.abs(a.endPoint.x-a.startPoint.x)/2+u,Math.min(a.startPoint.y,a.endPoint.y)+Math.abs(a.endPoint.y-a.startPoint.y)/2+r.messageFontSize+5+h,Math.max(a.label.width,a.techn.width),a.techn.height,{fill:s,"font-style":"italic"},p))}}),"drawRels"),exe=l((function(t,e,r){const n=t.append("g");let i=e.bgColor?e.bgColor:"none",a=e.borderColor?e.borderColor:"#444444",s=e.fontColor?e.fontColor:"black",o={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};e.nodeType&&(o={"stroke-width":1});let u={x:e.x,y:e.y,fill:i,stroke:a,width:e.width,height:e.height,rx:2.5,ry:2.5,attrs:o};YA(n,u);let h=r.boundaryFont();h.fontWeight="bold",h.fontSize=h.fontSize+2,h.fontColor=s,No(r)(e.label.text,n,e.x,e.y+e.label.Y,e.width,e.height,{fill:"#444444"},h),e.type&&e.type.text!==""&&(h=r.boundaryFont(),h.fontColor=s,No(r)(e.type.text,n,e.x,e.y+e.type.Y,e.width,e.height,{fill:"#444444"},h)),e.descr&&e.descr.text!==""&&(h=r.boundaryFont(),h.fontSize=h.fontSize-2,h.fontColor=s,No(r)(e.descr.text,n,e.x,e.y+e.descr.Y,e.width,e.height,{fill:"#444444"},h))}),"drawBoundary"),txe=l((function(t,e,r){let n=e.bgColor?e.bgColor:r[e.typeC4Shape.text+"_bg_color"],i=e.borderColor?e.borderColor:r[e.typeC4Shape.text+"_border_color"],a=e.fontColor?e.fontColor:"#FFFFFF",s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(e.typeC4Shape.text){case"person":s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII="}const o=t.append("g");o.attr("class","person-man");const u=ch();switch(e.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":u.x=e.x,u.y=e.y,u.fill=n,u.width=e.width,u.height=e.height,u.stroke=i,u.rx=2.5,u.ry=2.5,u.attrs={"stroke-width":.5},YA(o,u);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":o.append("path").attr("fill",n).attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2).replaceAll("height",e.height)),o.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":o.append("path").attr("fill",n).attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("width",e.width).replaceAll("half",e.height/2)),o.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",e.x+e.width).replaceAll("starty",e.y).replaceAll("half",e.height/2))}let h=uxe(r,e.typeC4Shape.text);switch(o.append("text").attr("fill",a).attr("font-family",h.fontFamily).attr("font-size",h.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",e.typeC4Shape.width).attr("x",e.x+e.width/2-e.typeC4Shape.width/2).attr("y",e.y+e.typeC4Shape.Y).text("<<"+e.typeC4Shape.text+">>"),e.typeC4Shape.text){case"person":case"external_person":t7(o,48,48,e.x+e.width/2-24,e.y+e.image.Y,s)}let d=r[e.typeC4Shape.text+"Font"]();return d.fontWeight="bold",d.fontSize=d.fontSize+2,d.fontColor=a,No(r)(e.label.text,o,e.x,e.y+e.label.Y,e.width,e.height,{fill:a},d),d=r[e.typeC4Shape.text+"Font"](),d.fontColor=a,e.techn&&e.techn?.text!==""?No(r)(e.techn.text,o,e.x,e.y+e.techn.Y,e.width,e.height,{fill:a,"font-style":"italic"},d):e.type&&e.type.text!==""&&No(r)(e.type.text,o,e.x,e.y+e.type.Y,e.width,e.height,{fill:a,"font-style":"italic"},d),e.descr&&e.descr.text!==""&&(d=r.personFont(),d.fontColor=a,No(r)(e.descr.text,o,e.x,e.y+e.descr.Y,e.width,e.height,{fill:a},d)),e.height}),"drawC4Shape"),rxe=l((function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")}),"insertDatabaseIcon"),nxe=l((function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")}),"insertComputerIcon"),ixe=l((function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")}),"insertClockIcon"),axe=l((function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")}),"insertArrowHead"),sxe=l((function(t){t.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")}),"insertArrowEnd"),oxe=l((function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")}),"insertArrowFilledHead"),lxe=l((function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)}),"insertDynamicNumber"),cxe=l((function(t){const e=t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);e.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),e.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")}),"insertArrowCrossHead"),uxe=l(((t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]})),"getC4ShapeFont"),No=(function(){function t(i,a,s,o,u,h,d){n(a.append("text").attr("x",s+u/2).attr("y",o+h/2+5).style("text-anchor","middle").text(i),d)}function e(i,a,s,o,u,h,d,p){const{fontSize:f,fontFamily:g,fontWeight:m}=p,y=i.split(He.lineBreakRegex);for(let v=0;v<y.length;v++){const x=v*f-f*(y.length-1)/2,b=a.append("text").attr("x",s+u/2).attr("y",o).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",f).style("font-weight",m).style("font-family",g);b.append("tspan").attr("dy",x).text(y[v]).attr("alignment-baseline","mathematical"),n(b,d)}}function r(i,a,s,o,u,h,d,p){const f=a.append("switch"),g=f.append("foreignObject").attr("x",s).attr("y",o).attr("width",u).attr("height",h).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");g.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),e(i,f,s,o,u,0,d,p),n(g,d)}function n(i,a){for(const s in a)a.hasOwnProperty(s)&&i.attr(s,a[s])}return l(t,"byText"),l(e,"byTspan"),l(r,"byFo"),l(n,"_setTextAttrs"),function(i){return i.textPlacement==="fo"?r:i.textPlacement==="old"?t:e}})(),zs={drawRect:YA,drawBoundary:exe,drawC4Shape:txe,drawRels:Jve,drawImage:t7,insertArrowHead:axe,insertArrowEnd:sxe,insertArrowFilledHead:oxe,insertDynamicNumber:lxe,insertArrowCrossHead:cxe,insertDatabaseIcon:rxe,insertComputerIcon:nxe,insertClockIcon:ixe},E5=0,_5=0,r7=4,aC=2;w5.yy=iC;var St={},Kp,n7=(Kp=class{constructor(e){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,sC(e.db.getConfig())}setData(e,r,n,i){this.nextData.startx=this.data.startx=e,this.nextData.stopx=this.data.stopx=r,this.nextData.starty=this.data.starty=n,this.nextData.stopy=this.data.stopy=i}updateVal(e,r,n,i){e[r]===void 0?e[r]=n:e[r]=i(n,e[r])}insert(e){this.nextData.cnt=this.nextData.cnt+1;let r=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+e.margin:this.nextData.stopx+2*e.margin,n=r+e.width,i=this.nextData.starty+2*e.margin,a=i+e.height;(r>=this.data.widthLimit||n>=this.data.widthLimit||this.nextData.cnt>r7)&&(r=this.nextData.startx+e.margin+St.nextLinePaddingX,i=this.nextData.stopy+2*e.margin,this.nextData.stopx=n=r+e.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=a=i+e.height,this.nextData.cnt=1),e.x=r,e.y=i,this.updateVal(this.data,"startx",r,Math.min),this.updateVal(this.data,"starty",i,Math.min),this.updateVal(this.data,"stopx",n,Math.max),this.updateVal(this.data,"stopy",a,Math.max),this.updateVal(this.nextData,"startx",r,Math.min),this.updateVal(this.nextData,"starty",i,Math.min),this.updateVal(this.nextData,"stopx",n,Math.max),this.updateVal(this.nextData,"stopy",a,Math.max)}init(e){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},sC(e.db.getConfig())}bumpLastMargin(e){this.data.stopx+=e,this.data.stopy+=e}},l(Kp,"Bounds"),Kp),sC=l((function(t){On(St,t),t.fontFamily&&(St.personFontFamily=St.systemFontFamily=St.messageFontFamily=t.fontFamily),t.fontSize&&(St.personFontSize=St.systemFontSize=St.messageFontSize=t.fontSize),t.fontWeight&&(St.personFontWeight=St.systemFontWeight=St.messageFontWeight=t.fontWeight)}),"setConf"),Om=l(((t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]})),"c4ShapeFont"),Ub=l((t=>({fontFamily:t.boundaryFontFamily,fontSize:t.boundaryFontSize,fontWeight:t.boundaryFontWeight})),"boundaryFont"),hxe=l((t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight})),"messageFont");function Ha(t,e,r,n,i){if(!e[t].width)if(r)e[t].text=UY(e[t].text,i,n),e[t].textLines=e[t].text.split(He.lineBreakRegex).length,e[t].width=i,e[t].height=K4(e[t].text,n);else{let a=e[t].text.split(He.lineBreakRegex);e[t].textLines=a.length;let s=0;e[t].height=0,e[t].width=0;for(const o of a)e[t].width=Math.max(Bi(o,n),e[t].width),s=K4(o,n),e[t].height=e[t].height+s}}l(Ha,"calcC4ShapeTextWH");var i7=l((function(t,e,r){e.x=r.data.startx,e.y=r.data.starty,e.width=r.data.stopx-r.data.startx,e.height=r.data.stopy-r.data.starty,e.label.y=St.c4ShapeMargin-35;let n=e.wrap&&St.wrap,i=Ub(St);i.fontSize=i.fontSize+2,i.fontWeight="bold",Ha("label",e,n,i,Bi(e.label.text,i)),zs.drawBoundary(t,e,St)}),"drawBoundary"),a7=l((function(t,e,r,n){let i=0;for(const a of n){i=0;const s=r[a];let o=Om(St,s.typeC4Shape.text);switch(o.fontSize=o.fontSize-2,s.typeC4Shape.width=Bi(""+s.typeC4Shape.text+"",o),s.typeC4Shape.height=o.fontSize+2,s.typeC4Shape.Y=St.c4ShapePadding,i=s.typeC4Shape.Y+s.typeC4Shape.height-4,s.image={width:0,height:0,Y:0},s.typeC4Shape.text){case"person":case"external_person":s.image.width=48,s.image.height=48,s.image.Y=i,i=s.image.Y+s.image.height}s.sprite&&(s.image.width=48,s.image.height=48,s.image.Y=i,i=s.image.Y+s.image.height);let u=s.wrap&&St.wrap,h=St.width-2*St.c4ShapePadding,d=Om(St,s.typeC4Shape.text);d.fontSize=d.fontSize+2,d.fontWeight="bold",Ha("label",s,u,d,h),s.label.Y=i+8,i=s.label.Y+s.label.height,s.type&&s.type.text!==""?(s.type.text="["+s.type.text+"]",Ha("type",s,u,Om(St,s.typeC4Shape.text),h),s.type.Y=i+5,i=s.type.Y+s.type.height):s.techn&&s.techn.text!==""&&(s.techn.text="["+s.techn.text+"]",Ha("techn",s,u,Om(St,s.techn.text),h),s.techn.Y=i+5,i=s.techn.Y+s.techn.height);let p=i,f=s.label.width;s.descr&&s.descr.text!==""&&(Ha("descr",s,u,Om(St,s.typeC4Shape.text),h),s.descr.Y=i+20,i=s.descr.Y+s.descr.height,f=Math.max(s.label.width,s.descr.width),p=i-5*s.descr.textLines),f+=St.c4ShapePadding,s.width=Math.max(s.width||St.width,f,St.width),s.height=Math.max(s.height||St.height,p,St.height),s.margin=s.margin||St.c4ShapeMargin,t.insert(s),zs.drawC4Shape(e,s,St)}t.bumpLastMargin(St.c4ShapeMargin)}),"drawC4ShapeArray"),Zp,Ra=(Zp=class{constructor(e,r){this.x=e,this.y=r}},l(Zp,"Point"),Zp),VM=l((function(t,e){let r=t.x,n=t.y,i=e.x,a=e.y,s=r+t.width/2,o=n+t.height/2,u=Math.abs(r-i),h=Math.abs(n-a),d=h/u,p=t.height/t.width,f=null;return n==a&&r<i?f=new Ra(r+t.width,o):n==a&&r>i?f=new Ra(r,o):r==i&&n<a?f=new Ra(s,n+t.height):r==i&&n>a&&(f=new Ra(s,n)),r>i&&n<a?f=p>=d?new Ra(r,o+d*t.width/2):new Ra(s-u/h*t.height/2,n+t.height):r<i&&n<a?f=p>=d?new Ra(r+t.width,o+d*t.width/2):new Ra(s+u/h*t.height/2,n+t.height):r<i&&n>a?f=p>=d?new Ra(r+t.width,o-d*t.width/2):new Ra(s+t.height/2*u/h,n):r>i&&n>a&&(f=p>=d?new Ra(r,o-t.width/2*d):new Ra(s-t.height/2*u/h,n)),f}),"getIntersectPoint"),dxe=l((function(t,e){let r={x:0,y:0};r.x=e.x+e.width/2,r.y=e.y+e.height/2;let n=VM(t,r);return r.x=t.x+t.width/2,r.y=t.y+t.height/2,{startPoint:n,endPoint:VM(e,r)}}),"getIntersectPoints"),pxe=l((function(t,e,r,n){let i=0;for(let a of e){i+=1;let s=a.wrap&&St.wrap,o=hxe(St);n.db.getC4Type()==="C4Dynamic"&&(a.label.text=i+": "+a.label.text);let u=Bi(a.label.text,o);Ha("label",a,s,o,u),a.techn&&a.techn.text!==""&&(u=Bi(a.techn.text,o),Ha("techn",a,s,o,u)),a.descr&&a.descr.text!==""&&(u=Bi(a.descr.text,o),Ha("descr",a,s,o,u));let h=r(a.from),d=r(a.to),p=dxe(h,d);a.startPoint=p.startPoint,a.endPoint=p.endPoint}zs.drawRels(t,e,St)}),"drawRels");function VA(t,e,r,n,i){let a=new n7(i);a.data.widthLimit=r.data.widthLimit/Math.min(aC,n.length);for(let[s,o]of n.entries()){let u=0;o.image={width:0,height:0,Y:0},o.sprite&&(o.image.width=48,o.image.height=48,o.image.Y=u,u=o.image.Y+o.image.height);let h=o.wrap&&St.wrap,d=Ub(St);if(d.fontSize=d.fontSize+2,d.fontWeight="bold",Ha("label",o,h,d,a.data.widthLimit),o.label.Y=u+8,u=o.label.Y+o.label.height,o.type&&o.type.text!==""&&(o.type.text="["+o.type.text+"]",Ha("type",o,h,Ub(St),a.data.widthLimit),o.type.Y=u+5,u=o.type.Y+o.type.height),o.descr&&o.descr.text!==""){let m=Ub(St);m.fontSize=m.fontSize-2,Ha("descr",o,h,m,a.data.widthLimit),o.descr.Y=u+20,u=o.descr.Y+o.descr.height}if(s==0||s%aC==0){let m=r.data.startx+St.diagramMarginX,y=r.data.stopy+St.diagramMarginY+u;a.setData(m,m,y,y)}else{let m=a.data.stopx!==a.data.startx?a.data.stopx+St.diagramMarginX:a.data.startx,y=a.data.starty;a.setData(m,m,y,y)}a.name=o.alias;let p=i.db.getC4ShapeArray(o.alias),f=i.db.getC4ShapeKeys(o.alias);f.length>0&&a7(a,t,p,f),e=o.alias;let g=i.db.getBoundarys(e);g.length>0&&VA(t,e,a,g,i),o.alias!=="global"&&i7(t,o,a),r.data.stopy=Math.max(a.data.stopy+St.c4ShapeMargin,r.data.stopy),r.data.stopx=Math.max(a.data.stopx+St.c4ShapeMargin,r.data.stopx),E5=Math.max(E5,r.data.stopx),_5=Math.max(_5,r.data.stopy)}}l(VA,"drawInsideBoundary");var fxe=l((function(t,e,r,n){St=ke().c4;const i=ke().securityLevel;let a;i==="sandbox"&&(a=Ze("#i"+e));const s=Ze(i==="sandbox"?a.nodes()[0].contentDocument.body:"body");let o=n.db;n.db.setWrap(St.wrap),r7=o.getC4ShapeInRow(),aC=o.getC4BoundaryInRow(),ee.debug(`C:${JSON.stringify(St,null,2)}`);const u=i==="sandbox"?s.select(`[id="${e}"]`):Ze(`[id="${e}"]`);zs.insertComputerIcon(u),zs.insertDatabaseIcon(u),zs.insertClockIcon(u);let h=new n7(n);h.setData(St.diagramMarginX,St.diagramMarginX,St.diagramMarginY,St.diagramMarginY),h.data.widthLimit=screen.availWidth,E5=St.diagramMarginX,_5=St.diagramMarginY;const d=n.db.getTitle();VA(u,"",h,n.db.getBoundarys(""),n),zs.insertArrowHead(u),zs.insertArrowEnd(u),zs.insertArrowCrossHead(u),zs.insertArrowFilledHead(u),pxe(u,n.db.getRels(),n.db.getC4Shape,n),h.data.stopx=E5,h.data.stopy=_5;const p=h.data;let f=p.stopy-p.starty+2*St.diagramMarginY;const g=p.stopx-p.startx+2*St.diagramMarginX;d&&u.append("text").text(d).attr("x",(p.stopx-p.startx)/2-4*St.diagramMarginX).attr("y",p.starty+St.diagramMarginY),da(u,f,g,St.useMaxWidth);const m=d?60:0;u.attr("viewBox",p.startx-St.diagramMarginX+" -"+(St.diagramMarginY+m)+" "+g+" "+(f+m)),ee.debug("models:",p)}),"draw"),HM={drawPersonOrSystemArray:a7,drawBoundary:i7,setConf:sC,draw:fxe},gxe={parser:Cve,db:iC,renderer:HM,styles:l((t=>`.person {
    stroke: ${t.personBorder};
    fill: ${t.personBkg};
  }
`),"getStyles"),init:l((({c4:t,wrap:e})=>{HM.setConf(t),iC.setWrap(e)}),"init")},mxe=Object.freeze({__proto__:null,diagram:gxe}),$v=l(((t,e)=>{let r;return e==="sandbox"&&(r=Ze("#i"+t)),Ze(e==="sandbox"?r.nodes()[0].contentDocument.body:"body").select(`[id="${t}"]`)}),"getDiagramElement"),Fv=l(((t,e,r,n)=>{t.attr("class",r);const{width:i,height:a,x:s,y:o}=yxe(t,e);da(t,a,i,n);const u=vxe(s,o,i,a,e);t.attr("viewBox",u),ee.debug(`viewBox configured: ${u} with padding: ${e}`)}),"setupViewPortForSVG"),yxe=l(((t,e)=>{const r=t.node()?.getBBox()||{width:0,height:0,x:0,y:0};return{width:r.width+2*e,height:r.height+2*e,x:r.x,y:r.y}}),"calculateDimensionsWithPadding"),vxe=l(((t,e,r,n,i)=>`${t-i} ${e-i} ${r} ${n}`),"createViewBox"),Qp,xxe=(Qp=class{constructor(){this.vertexCounter=0,this.config=ke(),this.vertices=new Map,this.edges=[],this.classes=new Map,this.subGraphs=[],this.subGraphLookup=new Map,this.tooltips=new Map,this.subCount=0,this.firstGraphFlag=!0,this.secCount=-1,this.posCrossRef=[],this.funs=[],this.setAccTitle=zn,this.setAccDescription=Kn,this.setDiagramTitle=di,this.getAccTitle=Xn,this.getAccDescription=Zn,this.getDiagramTitle=Wn,this.funs.push(this.setupToolTips.bind(this)),this.addVertex=this.addVertex.bind(this),this.firstGraph=this.firstGraph.bind(this),this.setDirection=this.setDirection.bind(this),this.addSubGraph=this.addSubGraph.bind(this),this.addLink=this.addLink.bind(this),this.setLink=this.setLink.bind(this),this.updateLink=this.updateLink.bind(this),this.addClass=this.addClass.bind(this),this.setClass=this.setClass.bind(this),this.destructLink=this.destructLink.bind(this),this.setClickEvent=this.setClickEvent.bind(this),this.setTooltip=this.setTooltip.bind(this),this.updateLinkInterpolate=this.updateLinkInterpolate.bind(this),this.setClickFun=this.setClickFun.bind(this),this.bindFunctions=this.bindFunctions.bind(this),this.lex={firstGraph:this.firstGraph.bind(this)},this.clear(),this.setGen("gen-2")}sanitizeText(e){return He.sanitizeText(e,this.config)}lookUpDomId(e){for(const r of this.vertices.values())if(r.id===e)return r.domId;return e}addVertex(e,r,n,i,a,s,o={},u){if(!e||e.trim().length===0)return;let h;if(u!==void 0){let g;g=u.includes(`
`)?u+`
`:`{
`+u+`
}`,h=b1(g,{schema:x1})}const d=this.edges.find((g=>g.id===e));if(d){const g=h;return g?.animate!==void 0&&(d.animate=g.animate),void(g?.animation!==void 0&&(d.animation=g.animation))}let p,f=this.vertices.get(e);if(f===void 0&&(f={id:e,labelType:"text",domId:"flowchart-"+e+"-"+this.vertexCounter,styles:[],classes:[]},this.vertices.set(e,f)),this.vertexCounter++,r!==void 0?(this.config=ke(),p=this.sanitizeText(r.text.trim()),f.labelType=r.type,p.startsWith('"')&&p.endsWith('"')&&(p=p.substring(1,p.length-1)),f.text=p):f.text===void 0&&(f.text=e),n!==void 0&&(f.type=n),i?.forEach((g=>{f.styles.push(g)})),a?.forEach((g=>{f.classes.push(g)})),s!==void 0&&(f.dir=s),f.props===void 0?f.props=o:o!==void 0&&Object.assign(f.props,o),h!==void 0){if(h.shape){if(h.shape!==h.shape.toLowerCase()||h.shape.includes("_"))throw new Error(`No such shape: ${h.shape}. Shape names should be lowercase.`);if(!MH(h.shape))throw new Error(`No such shape: ${h.shape}.`);f.type=h?.shape}h?.label&&(f.text=h?.label),h?.icon&&(f.icon=h?.icon,h.label?.trim()||f.text!==e||(f.text="")),h?.form&&(f.form=h?.form),h?.pos&&(f.pos=h?.pos),h?.img&&(f.img=h?.img,h.label?.trim()||f.text!==e||(f.text="")),h?.constraint&&(f.constraint=h.constraint),h.w&&(f.assetWidth=Number(h.w)),h.h&&(f.assetHeight=Number(h.h))}}addSingleLink(e,r,n,i){const a={start:e,end:r,type:void 0,text:"",labelType:"text",classes:[],isUserDefinedId:!1,interpolate:this.edges.defaultInterpolate};ee.info("abc78 Got edge...",a);const s=n.text;if(s!==void 0&&(a.text=this.sanitizeText(s.text.trim()),a.text.startsWith('"')&&a.text.endsWith('"')&&(a.text=a.text.substring(1,a.text.length-1)),a.labelType=s.type),n!==void 0&&(a.type=n.type,a.stroke=n.stroke,a.length=n.length>10?10:n.length),i&&!this.edges.some((o=>o.id===i)))a.id=i,a.isUserDefinedId=!0;else{const o=this.edges.filter((u=>u.start===a.start&&u.end===a.end));o.length===0?a.id=My(a.start,a.end,{counter:0,prefix:"L"}):a.id=My(a.start,a.end,{counter:o.length+1,prefix:"L"})}if(!(this.edges.length<(this.config.maxEdges??500)))throw new Error(`Edge limit exceeded. ${this.edges.length} edges found, but the limit is ${this.config.maxEdges}.

Initialize mermaid with maxEdges set to a higher number to allow more edges.
You cannot set this config via configuration inside the diagram as it is a secure config.
You have to call mermaid.initialize.`);ee.info("Pushing edge..."),this.edges.push(a)}isLinkData(e){return e!==null&&typeof e=="object"&&"id"in e&&typeof e.id=="string"}addLink(e,r,n){const i=this.isLinkData(n)?n.id.replace("@",""):void 0;ee.info("addLink",e,r,i);for(const a of e)for(const s of r){const o=a===e[e.length-1],u=s===r[0];o&&u?this.addSingleLink(a,s,n,i):this.addSingleLink(a,s,n,void 0)}}updateLinkInterpolate(e,r){e.forEach((n=>{n==="default"?this.edges.defaultInterpolate=r:this.edges[n].interpolate=r}))}updateLink(e,r){e.forEach((n=>{if(typeof n=="number"&&n>=this.edges.length)throw new Error(`The index ${n} for linkStyle is out of bounds. Valid indices for linkStyle are between 0 and ${this.edges.length-1}. (Help: Ensure that the index is within the range of existing edges.)`);n==="default"?this.edges.defaultStyle=r:(this.edges[n].style=r,(this.edges[n]?.style?.length??0)>0&&!this.edges[n]?.style?.some((i=>i?.startsWith("fill")))&&this.edges[n]?.style?.push("fill:none"))}))}addClass(e,r){const n=r.join().replace(/\\,/g,"").replace(/,/g,";").replace(//g,",").split(";");e.split(",").forEach((i=>{let a=this.classes.get(i);a===void 0&&(a={id:i,styles:[],textStyles:[]},this.classes.set(i,a)),n?.forEach((s=>{if(/color/.exec(s)){const o=s.replace("fill","bgFill");a.textStyles.push(o)}a.styles.push(s)}))}))}setDirection(e){this.direction=e,/.*</.exec(this.direction)&&(this.direction="RL"),/.*\^/.exec(this.direction)&&(this.direction="BT"),/.*>/.exec(this.direction)&&(this.direction="LR"),/.*v/.exec(this.direction)&&(this.direction="TB"),this.direction==="TD"&&(this.direction="TB")}setClass(e,r){for(const n of e.split(",")){const i=this.vertices.get(n);i&&i.classes.push(r);const a=this.edges.find((o=>o.id===n));a&&a.classes.push(r);const s=this.subGraphLookup.get(n);s&&s.classes.push(r)}}setTooltip(e,r){if(r!==void 0){r=this.sanitizeText(r);for(const n of e.split(","))this.tooltips.set(this.version==="gen-1"?this.lookUpDomId(n):n,r)}}setClickFun(e,r,n){const i=this.lookUpDomId(e);if(ke().securityLevel!=="loose"||r===void 0)return;let a=[];if(typeof n=="string"){a=n.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let o=0;o<a.length;o++){let u=a[o].trim();u.startsWith('"')&&u.endsWith('"')&&(u=u.substr(1,u.length-2)),a[o]=u}}a.length===0&&a.push(e);const s=this.vertices.get(e);s&&(s.haveCallback=!0,this.funs.push((()=>{const o=document.querySelector(`[id="${i}"]`);o!==null&&o.addEventListener("click",(()=>{Vt.runFunc(r,...a)}),!1)})))}setLink(e,r,n){e.split(",").forEach((i=>{const a=this.vertices.get(i);a!==void 0&&(a.link=Vt.formatUrl(r,this.config),a.linkTarget=n)})),this.setClass(e,"clickable")}getTooltip(e){return this.tooltips.get(e)}setClickEvent(e,r,n){e.split(",").forEach((i=>{this.setClickFun(i,r,n)})),this.setClass(e,"clickable")}bindFunctions(e){this.funs.forEach((r=>{r(e)}))}getDirection(){return this.direction?.trim()}getVertices(){return this.vertices}getEdges(){return this.edges}getClasses(){return this.classes}setupToolTips(e){let r=Ze(".mermaidTooltip");(r._groups||r)[0][0]===null&&(r=Ze("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),Ze(e).select("svg").selectAll("g.node").on("mouseover",(n=>{const i=Ze(n.currentTarget);if(i.attr("title")===null)return;const a=n.currentTarget?.getBoundingClientRect();r.transition().duration(200).style("opacity",".9"),r.text(i.attr("title")).style("left",window.scrollX+a.left+(a.right-a.left)/2+"px").style("top",window.scrollY+a.bottom+"px"),r.html(r.html().replace(/&lt;br\/&gt;/g,"<br/>")),i.classed("hover",!0)})).on("mouseout",(n=>{r.transition().duration(500).style("opacity",0),Ze(n.currentTarget).classed("hover",!1)}))}clear(e="gen-2"){this.vertices=new Map,this.classes=new Map,this.edges=[],this.funs=[this.setupToolTips.bind(this)],this.subGraphs=[],this.subGraphLookup=new Map,this.subCount=0,this.tooltips=new Map,this.firstGraphFlag=!0,this.version=e,this.config=ke(),jn()}setGen(e){this.version=e||"gen-2"}defaultStyle(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"}addSubGraph(e,r,n){let i=e.text.trim(),a=n.text;e===n&&/\s/.exec(n.text)&&(i=void 0);const s=l((d=>{const p={boolean:{},number:{},string:{}},f=[];let g;return{nodeList:d.filter((function(y){const v=typeof y;return y.stmt&&y.stmt==="dir"?(g=y.value,!1):y.trim()!==""&&(v in p?!p[v].hasOwnProperty(y)&&(p[v][y]=!0):!f.includes(y)&&f.push(y))})),dir:g}}),"uniq"),{nodeList:o,dir:u}=s(r.flat());if(this.version==="gen-1")for(let d=0;d<o.length;d++)o[d]=this.lookUpDomId(o[d]);i=i??"subGraph"+this.subCount,a=a||"",a=this.sanitizeText(a),this.subCount=this.subCount+1;const h={id:i,nodes:o,title:a.trim(),classes:[],dir:u,labelType:n.type};return ee.info("Adding",h.id,h.nodes,h.dir),h.nodes=this.makeUniq(h,this.subGraphs).nodes,this.subGraphs.push(h),this.subGraphLookup.set(i,h),i}getPosForId(e){for(const[r,n]of this.subGraphs.entries())if(n.id===e)return r;return-1}indexNodes2(e,r){const n=this.subGraphs[r].nodes;if(this.secCount=this.secCount+1,this.secCount>2e3)return{result:!1,count:0};if(this.posCrossRef[this.secCount]=r,this.subGraphs[r].id===e)return{result:!0,count:0};let i=0,a=1;for(;i<n.length;){const s=this.getPosForId(n[i]);if(s>=0){const o=this.indexNodes2(e,s);if(o.result)return{result:!0,count:a+o.count};a+=o.count}i+=1}return{result:!1,count:a}}getDepthFirstPos(e){return this.posCrossRef[e]}indexNodes(){this.secCount=-1,this.subGraphs.length>0&&this.indexNodes2("none",this.subGraphs.length-1)}getSubGraphs(){return this.subGraphs}firstGraph(){return!!this.firstGraphFlag&&(this.firstGraphFlag=!1,!0)}destructStartLink(e){let r=e.trim(),n="arrow_open";switch(r[0]){case"<":n="arrow_point",r=r.slice(1);break;case"x":n="arrow_cross",r=r.slice(1);break;case"o":n="arrow_circle",r=r.slice(1)}let i="normal";return r.includes("=")&&(i="thick"),r.includes(".")&&(i="dotted"),{type:n,stroke:i}}countChar(e,r){const n=r.length;let i=0;for(let a=0;a<n;++a)r[a]===e&&++i;return i}destructEndLink(e){const r=e.trim();let n=r.slice(0,-1),i="arrow_open";switch(r.slice(-1)){case"x":i="arrow_cross",r.startsWith("x")&&(i="double_"+i,n=n.slice(1));break;case">":i="arrow_point",r.startsWith("<")&&(i="double_"+i,n=n.slice(1));break;case"o":i="arrow_circle",r.startsWith("o")&&(i="double_"+i,n=n.slice(1))}let a="normal",s=n.length-1;n.startsWith("=")&&(a="thick"),n.startsWith("~")&&(a="invisible");const o=this.countChar(".",n);return o&&(a="dotted",s=o),{type:i,stroke:a,length:s}}destructLink(e,r){const n=this.destructEndLink(e);let i;if(r){if(i=this.destructStartLink(r),i.stroke!==n.stroke)return{type:"INVALID",stroke:"INVALID"};if(i.type==="arrow_open")i.type=n.type;else{if(i.type!==n.type)return{type:"INVALID",stroke:"INVALID"};i.type="double_"+i.type}return i.type==="double_arrow"&&(i.type="double_arrow_point"),i.length=n.length,i}return n}exists(e,r){for(const n of e)if(n.nodes.includes(r))return!0;return!1}makeUniq(e,r){const n=[];return e.nodes.forEach(((i,a)=>{this.exists(r,i)||n.push(e.nodes[a])})),{nodes:n}}getTypeFromVertex(e){if(e.img)return"imageSquare";if(e.icon)return e.form==="circle"?"iconCircle":e.form==="square"?"iconSquare":e.form==="rounded"?"iconRounded":"icon";switch(e.type){case"square":case void 0:return"squareRect";case"round":return"roundedRect";case"ellipse":return"ellipse";default:return e.type}}findNode(e,r){return e.find((n=>n.id===r))}destructEdgeType(e){let r="none",n="arrow_point";switch(e){case"arrow_point":case"arrow_circle":case"arrow_cross":n=e;break;case"double_arrow_point":case"double_arrow_circle":case"double_arrow_cross":r=e.replace("double_",""),n=r}return{arrowTypeStart:r,arrowTypeEnd:n}}addNodeFromVertex(e,r,n,i,a,s){const o=n.get(e.id),u=i.get(e.id)??!1,h=this.findNode(r,e.id);if(h)h.cssStyles=e.styles,h.cssCompiledStyles=this.getCompiledStyles(e.classes),h.cssClasses=e.classes.join(" ");else{const d={id:e.id,label:e.text,labelStyle:"",parentId:o,padding:a.flowchart?.padding||8,cssStyles:e.styles,cssCompiledStyles:this.getCompiledStyles(["default","node",...e.classes]),cssClasses:"default "+e.classes.join(" "),dir:e.dir,domId:e.domId,look:s,link:e.link,linkTarget:e.linkTarget,tooltip:this.getTooltip(e.id),icon:e.icon,pos:e.pos,img:e.img,assetWidth:e.assetWidth,assetHeight:e.assetHeight,constraint:e.constraint};u?r.push({...d,isGroup:!0,shape:"rect"}):r.push({...d,isGroup:!1,shape:this.getTypeFromVertex(e)})}}getCompiledStyles(e){let r=[];for(const n of e){const i=this.classes.get(n);i?.styles&&(r=[...r,...i.styles??[]].map((a=>a.trim()))),i?.textStyles&&(r=[...r,...i.textStyles??[]].map((a=>a.trim())))}return r}getData(){const e=ke(),r=[],n=[],i=this.getSubGraphs(),a=new Map,s=new Map;for(let u=i.length-1;u>=0;u--){const h=i[u];h.nodes.length>0&&s.set(h.id,!0);for(const d of h.nodes)a.set(d,h.id)}for(let u=i.length-1;u>=0;u--){const h=i[u];r.push({id:h.id,label:h.title,labelStyle:"",parentId:a.get(h.id),padding:8,cssCompiledStyles:this.getCompiledStyles(h.classes),cssClasses:h.classes.join(" "),shape:"rect",dir:h.dir,isGroup:!0,look:e.look})}this.getVertices().forEach((u=>{this.addNodeFromVertex(u,r,a,s,e,e.look||"classic")}));const o=this.getEdges();return o.forEach(((u,h)=>{const{arrowTypeStart:d,arrowTypeEnd:p}=this.destructEdgeType(u.type),f=[...o.defaultStyle??[]];u.style&&f.push(...u.style);const g={id:My(u.start,u.end,{counter:h,prefix:"L"},u.id),isUserDefinedId:u.isUserDefinedId,start:u.start,end:u.end,type:u.type??"normal",label:u.text,labelpos:"c",thickness:u.stroke,minlen:u.length,classes:u?.stroke==="invisible"?"":"edge-thickness-normal edge-pattern-solid flowchart-link",arrowTypeStart:u?.stroke==="invisible"||u?.type==="arrow_open"?"none":d,arrowTypeEnd:u?.stroke==="invisible"||u?.type==="arrow_open"?"none":p,arrowheadStyle:"fill: #333",cssCompiledStyles:this.getCompiledStyles(u.classes),labelStyle:f,style:f,pattern:u.stroke,look:e.look,animate:u.animate,animation:u.animation,curve:u.interpolate||this.edges.defaultInterpolate||e.flowchart?.curve};n.push(g)})),{nodes:r,edges:n,other:{},config:e}}defaultConfig(){return e$.flowchart}},l(Qp,"FlowDB"),Qp),bxe=l((function(t,e){return e.db.getClasses()}),"getClasses"),wxe=l((async function(t,e,r,n){ee.info("REF0:"),ee.info("Drawing state diagram (v2)",e);const{securityLevel:i,flowchart:a,layout:s}=ke();let o;i==="sandbox"&&(o=Ze("#i"+e));const u=i==="sandbox"?o.nodes()[0].contentDocument:document;ee.debug("Before getData: ");const h=n.db.getData();ee.debug("Data: ",h);const d=$v(e,i),p=n.db.getDirection();h.type=n.type,h.layoutAlgorithm=X6(s),h.layoutAlgorithm==="dagre"&&s==="elk"&&ee.warn("flowchart-elk was moved to an external package in Mermaid v11. Please refer [release notes](https://github.com/mermaid-js/mermaid/releases/tag/v11.0.0) for more details. This diagram will be rendered using `dagre` layout as a fallback."),h.direction=p,h.nodeSpacing=a?.nodeSpacing||50,h.rankSpacing=a?.rankSpacing||50,h.markers=["point","circle","cross"],h.diagramId=e,ee.debug("REF1:",h),await Av(h,d);const f=h.config.flowchart?.diagramPadding??8;Vt.insertTitle(d,"flowchartTitleText",a?.titleTopMargin||0,n.db.getDiagramTitle()),Fv(d,f,"flowchart",a?.useMaxWidth||!1);for(const g of h.nodes){const m=Ze(`#${e} [id="${g.id}"]`);if(!m||!g.link)continue;const y=u.createElementNS("http://www.w3.org/2000/svg","a");y.setAttributeNS("http://www.w3.org/2000/svg","class",g.cssClasses),y.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),i==="sandbox"?y.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):g.linkTarget&&y.setAttributeNS("http://www.w3.org/2000/svg","target",g.linkTarget);const v=m.insert((function(){return y}),":first-child"),x=m.select(".label-container");x&&v.append((function(){return x.node()}));const b=m.select(".label");b&&v.append((function(){return b.node()}))}}),"draw"),kxe={getClasses:bxe,draw:wxe},oC=(function(){var t=l((function(Kt,dt,It,et){for(It=It||{},et=Kt.length;et--;It[Kt[et]]=dt);return It}),"o"),e=[1,4],r=[1,3],n=[1,5],i=[1,8,9,10,11,27,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],a=[2,2],s=[1,13],o=[1,14],u=[1,15],h=[1,16],d=[1,23],p=[1,25],f=[1,26],g=[1,27],m=[1,49],y=[1,48],v=[1,29],x=[1,30],b=[1,31],w=[1,32],T=[1,33],k=[1,44],C=[1,46],E=[1,42],_=[1,47],S=[1,43],N=[1,50],O=[1,45],B=[1,51],L=[1,52],I=[1,34],A=[1,35],M=[1,36],D=[1,37],R=[1,57],P=[1,8,9,10,11,27,32,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],$=[1,61],z=[1,60],q=[1,62],W=[8,9,11,75,77,78],Q=[1,78],te=[1,91],oe=[1,96],re=[1,95],H=[1,92],K=[1,88],ie=[1,94],ne=[1,90],J=[1,97],ue=[1,93],Y=[1,98],se=[1,89],de=[8,9,10,11,40,75,77,78],ce=[8,9,10,11,40,46,75,77,78],Ee=[8,9,10,11,29,40,44,46,48,50,52,54,56,58,60,63,65,67,68,70,75,77,78,89,102,105,106,109,111,114,115,116],ve=[8,9,11,44,60,75,77,78,89,102,105,106,109,111,114,115,116],De=[44,60,89,102,105,106,109,111,114,115,116],Ue=[1,121],ze=[1,122],Ge=[1,124],$e=[1,123],Pe=[44,60,62,74,89,102,105,106,109,111,114,115,116],j=[1,133],pe=[1,147],X=[1,148],ge=[1,149],G=[1,150],le=[1,135],V=[1,137],me=[1,141],he=[1,142],_e=[1,143],Ce=[1,144],Te=[1,145],Re=[1,146],Le=[1,151],ot=[1,152],Tt=[1,131],Fe=[1,132],gt=[1,139],Qe=[1,134],Be=[1,138],rt=[1,136],lt=[8,9,10,11,27,32,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],Je=[1,154],_t=[1,156],it=[8,9,11],pt=[8,9,10,11,14,44,60,89,105,106,109,111,114,115,116],Ye=[1,176],je=[1,172],mt=[1,173],at=[1,177],Et=[1,174],xt=[1,175],rn=[77,116,119],wt=[8,9,10,11,12,14,27,29,32,44,60,75,84,85,86,87,88,89,90,105,109,111,114,115,116],dn=[10,106],gr=[31,49,51,53,55,57,62,64,66,67,69,71,116,117,118],Ht=[1,247],nn=[1,245],pn=[1,249],xe=[1,243],Ke=[1,244],Xe=[1,246],Xt=[1,248],Tr=[1,250],ir=[1,268],Yi=[8,9,11,106],Xr=[8,9,10,11,60,84,105,106,109,110,111,112],ti={trace:l((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,graphConfig:4,document:5,line:6,statement:7,SEMI:8,NEWLINE:9,SPACE:10,EOF:11,GRAPH:12,NODIR:13,DIR:14,FirstStmtSeparator:15,ending:16,endToken:17,spaceList:18,spaceListNewline:19,vertexStatement:20,separator:21,styleStatement:22,linkStyleStatement:23,classDefStatement:24,classStatement:25,clickStatement:26,subgraph:27,textNoTags:28,SQS:29,text:30,SQE:31,end:32,direction:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,shapeData:39,SHAPE_DATA:40,link:41,node:42,styledVertex:43,AMP:44,vertex:45,STYLE_SEPARATOR:46,idString:47,DOUBLECIRCLESTART:48,DOUBLECIRCLEEND:49,PS:50,PE:51,"(-":52,"-)":53,STADIUMSTART:54,STADIUMEND:55,SUBROUTINESTART:56,SUBROUTINEEND:57,VERTEX_WITH_PROPS_START:58,"NODE_STRING[field]":59,COLON:60,"NODE_STRING[value]":61,PIPE:62,CYLINDERSTART:63,CYLINDEREND:64,DIAMOND_START:65,DIAMOND_STOP:66,TAGEND:67,TRAPSTART:68,TRAPEND:69,INVTRAPSTART:70,INVTRAPEND:71,linkStatement:72,arrowText:73,TESTSTR:74,START_LINK:75,edgeText:76,LINK:77,LINK_ID:78,edgeTextToken:79,STR:80,MD_STR:81,textToken:82,keywords:83,STYLE:84,LINKSTYLE:85,CLASSDEF:86,CLASS:87,CLICK:88,DOWN:89,UP:90,textNoTagsToken:91,stylesOpt:92,"idString[vertex]":93,"idString[class]":94,CALLBACKNAME:95,CALLBACKARGS:96,HREF:97,LINK_TARGET:98,"STR[link]":99,"STR[tooltip]":100,alphaNum:101,DEFAULT:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,NODE_STRING:109,UNIT:110,BRKT:111,PCT:112,idStringToken:113,MINUS:114,MULT:115,UNICODE_TEXT:116,TEXT:117,TAGSTART:118,EDGE_TEXT:119,alphaNumToken:120,direction_tb:121,direction_bt:122,direction_rl:123,direction_lr:124,$accept:0,$end:1},terminals_:{2:"error",8:"SEMI",9:"NEWLINE",10:"SPACE",11:"EOF",12:"GRAPH",13:"NODIR",14:"DIR",27:"subgraph",29:"SQS",31:"SQE",32:"end",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",40:"SHAPE_DATA",44:"AMP",46:"STYLE_SEPARATOR",48:"DOUBLECIRCLESTART",49:"DOUBLECIRCLEEND",50:"PS",51:"PE",52:"(-",53:"-)",54:"STADIUMSTART",55:"STADIUMEND",56:"SUBROUTINESTART",57:"SUBROUTINEEND",58:"VERTEX_WITH_PROPS_START",59:"NODE_STRING[field]",60:"COLON",61:"NODE_STRING[value]",62:"PIPE",63:"CYLINDERSTART",64:"CYLINDEREND",65:"DIAMOND_START",66:"DIAMOND_STOP",67:"TAGEND",68:"TRAPSTART",69:"TRAPEND",70:"INVTRAPSTART",71:"INVTRAPEND",74:"TESTSTR",75:"START_LINK",77:"LINK",78:"LINK_ID",80:"STR",81:"MD_STR",84:"STYLE",85:"LINKSTYLE",86:"CLASSDEF",87:"CLASS",88:"CLICK",89:"DOWN",90:"UP",93:"idString[vertex]",94:"idString[class]",95:"CALLBACKNAME",96:"CALLBACKARGS",97:"HREF",98:"LINK_TARGET",99:"STR[link]",100:"STR[tooltip]",102:"DEFAULT",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"NODE_STRING",110:"UNIT",111:"BRKT",112:"PCT",114:"MINUS",115:"MULT",116:"UNICODE_TEXT",117:"TEXT",118:"TAGSTART",119:"EDGE_TEXT",121:"direction_tb",122:"direction_bt",123:"direction_rl",124:"direction_lr"},productions_:[0,[3,2],[5,0],[5,2],[6,1],[6,1],[6,1],[6,1],[6,1],[4,2],[4,2],[4,2],[4,3],[16,2],[16,1],[17,1],[17,1],[17,1],[15,1],[15,1],[15,2],[19,2],[19,2],[19,1],[19,1],[18,2],[18,1],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,9],[7,6],[7,4],[7,1],[7,2],[7,2],[7,1],[21,1],[21,1],[21,1],[39,2],[39,1],[20,4],[20,3],[20,4],[20,2],[20,2],[20,1],[42,1],[42,6],[42,5],[43,1],[43,3],[45,4],[45,4],[45,6],[45,4],[45,4],[45,4],[45,8],[45,4],[45,4],[45,4],[45,6],[45,4],[45,4],[45,4],[45,4],[45,4],[45,1],[41,2],[41,3],[41,3],[41,1],[41,3],[41,4],[76,1],[76,2],[76,1],[76,1],[72,1],[72,2],[73,3],[30,1],[30,2],[30,1],[30,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[28,1],[28,2],[28,1],[28,1],[24,5],[25,5],[26,2],[26,4],[26,3],[26,5],[26,3],[26,5],[26,5],[26,7],[26,2],[26,4],[26,2],[26,4],[26,4],[26,6],[22,5],[23,5],[23,5],[23,9],[23,9],[23,7],[23,7],[103,1],[103,3],[92,1],[92,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[82,1],[82,1],[82,1],[82,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[79,1],[79,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[47,1],[47,2],[101,1],[101,2],[33,1],[33,1],[33,1],[33,1]],performAction:l((function(Kt,dt,It,et,Rr,fe,Vi){var we=fe.length-1;switch(Rr){case 2:case 28:case 29:case 30:case 31:case 32:this.$=[];break;case 3:(!Array.isArray(fe[we])||fe[we].length>0)&&fe[we-1].push(fe[we]),this.$=fe[we-1];break;case 4:case 183:case 44:case 54:case 76:case 181:this.$=fe[we];break;case 11:et.setDirection("TB"),this.$="TB";break;case 12:et.setDirection(fe[we-1]),this.$=fe[we-1];break;case 27:this.$=fe[we-1].nodes;break;case 33:this.$=et.addSubGraph(fe[we-6],fe[we-1],fe[we-4]);break;case 34:this.$=et.addSubGraph(fe[we-3],fe[we-1],fe[we-3]);break;case 35:this.$=et.addSubGraph(void 0,fe[we-1],void 0);break;case 37:this.$=fe[we].trim(),et.setAccTitle(this.$);break;case 38:case 39:this.$=fe[we].trim(),et.setAccDescription(this.$);break;case 43:case 133:this.$=fe[we-1]+fe[we];break;case 45:et.addVertex(fe[we-1][fe[we-1].length-1],void 0,void 0,void 0,void 0,void 0,void 0,fe[we]),et.addLink(fe[we-3].stmt,fe[we-1],fe[we-2]),this.$={stmt:fe[we-1],nodes:fe[we-1].concat(fe[we-3].nodes)};break;case 46:et.addLink(fe[we-2].stmt,fe[we],fe[we-1]),this.$={stmt:fe[we],nodes:fe[we].concat(fe[we-2].nodes)};break;case 47:et.addLink(fe[we-3].stmt,fe[we-1],fe[we-2]),this.$={stmt:fe[we-1],nodes:fe[we-1].concat(fe[we-3].nodes)};break;case 48:this.$={stmt:fe[we-1],nodes:fe[we-1]};break;case 49:et.addVertex(fe[we-1][fe[we-1].length-1],void 0,void 0,void 0,void 0,void 0,void 0,fe[we]),this.$={stmt:fe[we-1],nodes:fe[we-1],shapeData:fe[we]};break;case 50:this.$={stmt:fe[we],nodes:fe[we]};break;case 51:case 128:case 130:this.$=[fe[we]];break;case 52:et.addVertex(fe[we-5][fe[we-5].length-1],void 0,void 0,void 0,void 0,void 0,void 0,fe[we-4]),this.$=fe[we-5].concat(fe[we]);break;case 53:this.$=fe[we-4].concat(fe[we]);break;case 55:this.$=fe[we-2],et.setClass(fe[we-2],fe[we]);break;case 56:this.$=fe[we-3],et.addVertex(fe[we-3],fe[we-1],"square");break;case 57:this.$=fe[we-3],et.addVertex(fe[we-3],fe[we-1],"doublecircle");break;case 58:this.$=fe[we-5],et.addVertex(fe[we-5],fe[we-2],"circle");break;case 59:this.$=fe[we-3],et.addVertex(fe[we-3],fe[we-1],"ellipse");break;case 60:this.$=fe[we-3],et.addVertex(fe[we-3],fe[we-1],"stadium");break;case 61:this.$=fe[we-3],et.addVertex(fe[we-3],fe[we-1],"subroutine");break;case 62:this.$=fe[we-7],et.addVertex(fe[we-7],fe[we-1],"rect",void 0,void 0,void 0,Object.fromEntries([[fe[we-5],fe[we-3]]]));break;case 63:this.$=fe[we-3],et.addVertex(fe[we-3],fe[we-1],"cylinder");break;case 64:this.$=fe[we-3],et.addVertex(fe[we-3],fe[we-1],"round");break;case 65:this.$=fe[we-3],et.addVertex(fe[we-3],fe[we-1],"diamond");break;case 66:this.$=fe[we-5],et.addVertex(fe[we-5],fe[we-2],"hexagon");break;case 67:this.$=fe[we-3],et.addVertex(fe[we-3],fe[we-1],"odd");break;case 68:this.$=fe[we-3],et.addVertex(fe[we-3],fe[we-1],"trapezoid");break;case 69:this.$=fe[we-3],et.addVertex(fe[we-3],fe[we-1],"inv_trapezoid");break;case 70:this.$=fe[we-3],et.addVertex(fe[we-3],fe[we-1],"lean_right");break;case 71:this.$=fe[we-3],et.addVertex(fe[we-3],fe[we-1],"lean_left");break;case 72:this.$=fe[we],et.addVertex(fe[we]);break;case 73:fe[we-1].text=fe[we],this.$=fe[we-1];break;case 74:case 75:fe[we-2].text=fe[we-1],this.$=fe[we-2];break;case 77:var kn=et.destructLink(fe[we],fe[we-2]);this.$={type:kn.type,stroke:kn.stroke,length:kn.length,text:fe[we-1]};break;case 78:kn=et.destructLink(fe[we],fe[we-2]),this.$={type:kn.type,stroke:kn.stroke,length:kn.length,text:fe[we-1],id:fe[we-3]};break;case 79:case 86:case 101:case 103:this.$={text:fe[we],type:"text"};break;case 80:case 87:case 102:this.$={text:fe[we-1].text+""+fe[we],type:fe[we-1].type};break;case 81:case 88:this.$={text:fe[we],type:"string"};break;case 82:case 89:case 104:this.$={text:fe[we],type:"markdown"};break;case 83:kn=et.destructLink(fe[we]),this.$={type:kn.type,stroke:kn.stroke,length:kn.length};break;case 84:kn=et.destructLink(fe[we]),this.$={type:kn.type,stroke:kn.stroke,length:kn.length,id:fe[we-1]};break;case 85:this.$=fe[we-1];break;case 105:this.$=fe[we-4],et.addClass(fe[we-2],fe[we]);break;case 106:this.$=fe[we-4],et.setClass(fe[we-2],fe[we]);break;case 107:case 115:this.$=fe[we-1],et.setClickEvent(fe[we-1],fe[we]);break;case 108:case 116:this.$=fe[we-3],et.setClickEvent(fe[we-3],fe[we-2]),et.setTooltip(fe[we-3],fe[we]);break;case 109:this.$=fe[we-2],et.setClickEvent(fe[we-2],fe[we-1],fe[we]);break;case 110:this.$=fe[we-4],et.setClickEvent(fe[we-4],fe[we-3],fe[we-2]),et.setTooltip(fe[we-4],fe[we]);break;case 111:this.$=fe[we-2],et.setLink(fe[we-2],fe[we]);break;case 112:this.$=fe[we-4],et.setLink(fe[we-4],fe[we-2]),et.setTooltip(fe[we-4],fe[we]);break;case 113:this.$=fe[we-4],et.setLink(fe[we-4],fe[we-2],fe[we]);break;case 114:this.$=fe[we-6],et.setLink(fe[we-6],fe[we-4],fe[we]),et.setTooltip(fe[we-6],fe[we-2]);break;case 117:this.$=fe[we-1],et.setLink(fe[we-1],fe[we]);break;case 118:this.$=fe[we-3],et.setLink(fe[we-3],fe[we-2]),et.setTooltip(fe[we-3],fe[we]);break;case 119:this.$=fe[we-3],et.setLink(fe[we-3],fe[we-2],fe[we]);break;case 120:this.$=fe[we-5],et.setLink(fe[we-5],fe[we-4],fe[we]),et.setTooltip(fe[we-5],fe[we-2]);break;case 121:this.$=fe[we-4],et.addVertex(fe[we-2],void 0,void 0,fe[we]);break;case 122:this.$=fe[we-4],et.updateLink([fe[we-2]],fe[we]);break;case 123:this.$=fe[we-4],et.updateLink(fe[we-2],fe[we]);break;case 124:this.$=fe[we-8],et.updateLinkInterpolate([fe[we-6]],fe[we-2]),et.updateLink([fe[we-6]],fe[we]);break;case 125:this.$=fe[we-8],et.updateLinkInterpolate(fe[we-6],fe[we-2]),et.updateLink(fe[we-6],fe[we]);break;case 126:this.$=fe[we-6],et.updateLinkInterpolate([fe[we-4]],fe[we]);break;case 127:this.$=fe[we-6],et.updateLinkInterpolate(fe[we-4],fe[we]);break;case 129:case 131:fe[we-2].push(fe[we]),this.$=fe[we-2];break;case 182:case 184:this.$=fe[we-1]+""+fe[we];break;case 185:this.$={stmt:"dir",value:"TB"};break;case 186:this.$={stmt:"dir",value:"BT"};break;case 187:this.$={stmt:"dir",value:"RL"};break;case 188:this.$={stmt:"dir",value:"LR"}}}),"anonymous"),table:[{3:1,4:2,9:e,10:r,12:n},{1:[3]},t(i,a,{5:6}),{4:7,9:e,10:r,12:n},{4:8,9:e,10:r,12:n},{13:[1,9],14:[1,10]},{1:[2,1],6:11,7:12,8:s,9:o,10:u,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:d,33:24,34:p,36:f,38:g,42:28,43:38,44:m,45:39,47:40,60:y,84:v,85:x,86:b,87:w,88:T,89:k,102:C,105:E,106:_,109:S,111:N,113:41,114:O,115:B,116:L,121:I,122:A,123:M,124:D},t(i,[2,9]),t(i,[2,10]),t(i,[2,11]),{8:[1,54],9:[1,55],10:R,15:53,18:56},t(P,[2,3]),t(P,[2,4]),t(P,[2,5]),t(P,[2,6]),t(P,[2,7]),t(P,[2,8]),{8:$,9:z,11:q,21:58,41:59,72:63,75:[1,64],77:[1,66],78:[1,65]},{8:$,9:z,11:q,21:67},{8:$,9:z,11:q,21:68},{8:$,9:z,11:q,21:69},{8:$,9:z,11:q,21:70},{8:$,9:z,11:q,21:71},{8:$,9:z,10:[1,72],11:q,21:73},t(P,[2,36]),{35:[1,74]},{37:[1,75]},t(P,[2,39]),t(W,[2,50],{18:76,39:77,10:R,40:Q}),{10:[1,79]},{10:[1,80]},{10:[1,81]},{10:[1,82]},{14:te,44:oe,60:re,80:[1,86],89:H,95:[1,83],97:[1,84],101:85,105:K,106:ie,109:ne,111:J,114:ue,115:Y,116:se,120:87},t(P,[2,185]),t(P,[2,186]),t(P,[2,187]),t(P,[2,188]),t(de,[2,51]),t(de,[2,54],{46:[1,99]}),t(ce,[2,72],{113:112,29:[1,100],44:m,48:[1,101],50:[1,102],52:[1,103],54:[1,104],56:[1,105],58:[1,106],60:y,63:[1,107],65:[1,108],67:[1,109],68:[1,110],70:[1,111],89:k,102:C,105:E,106:_,109:S,111:N,114:O,115:B,116:L}),t(Ee,[2,181]),t(Ee,[2,142]),t(Ee,[2,143]),t(Ee,[2,144]),t(Ee,[2,145]),t(Ee,[2,146]),t(Ee,[2,147]),t(Ee,[2,148]),t(Ee,[2,149]),t(Ee,[2,150]),t(Ee,[2,151]),t(Ee,[2,152]),t(i,[2,12]),t(i,[2,18]),t(i,[2,19]),{9:[1,113]},t(ve,[2,26],{18:114,10:R}),t(P,[2,27]),{42:115,43:38,44:m,45:39,47:40,60:y,89:k,102:C,105:E,106:_,109:S,111:N,113:41,114:O,115:B,116:L},t(P,[2,40]),t(P,[2,41]),t(P,[2,42]),t(De,[2,76],{73:116,62:[1,118],74:[1,117]}),{76:119,79:120,80:Ue,81:ze,116:Ge,119:$e},{75:[1,125],77:[1,126]},t(Pe,[2,83]),t(P,[2,28]),t(P,[2,29]),t(P,[2,30]),t(P,[2,31]),t(P,[2,32]),{10:j,12:pe,14:X,27:ge,28:127,32:G,44:le,60:V,75:me,80:[1,129],81:[1,130],83:140,84:he,85:_e,86:Ce,87:Te,88:Re,89:Le,90:ot,91:128,105:Tt,109:Fe,111:gt,114:Qe,115:Be,116:rt},t(lt,a,{5:153}),t(P,[2,37]),t(P,[2,38]),t(W,[2,48],{44:Je}),t(W,[2,49],{18:155,10:R,40:_t}),t(de,[2,44]),{44:m,47:157,60:y,89:k,102:C,105:E,106:_,109:S,111:N,113:41,114:O,115:B,116:L},{102:[1,158],103:159,105:[1,160]},{44:m,47:161,60:y,89:k,102:C,105:E,106:_,109:S,111:N,113:41,114:O,115:B,116:L},{44:m,47:162,60:y,89:k,102:C,105:E,106:_,109:S,111:N,113:41,114:O,115:B,116:L},t(it,[2,107],{10:[1,163],96:[1,164]}),{80:[1,165]},t(it,[2,115],{120:167,10:[1,166],14:te,44:oe,60:re,89:H,105:K,106:ie,109:ne,111:J,114:ue,115:Y,116:se}),t(it,[2,117],{10:[1,168]}),t(pt,[2,183]),t(pt,[2,170]),t(pt,[2,171]),t(pt,[2,172]),t(pt,[2,173]),t(pt,[2,174]),t(pt,[2,175]),t(pt,[2,176]),t(pt,[2,177]),t(pt,[2,178]),t(pt,[2,179]),t(pt,[2,180]),{44:m,47:169,60:y,89:k,102:C,105:E,106:_,109:S,111:N,113:41,114:O,115:B,116:L},{30:170,67:Ye,80:je,81:mt,82:171,116:at,117:Et,118:xt},{30:178,67:Ye,80:je,81:mt,82:171,116:at,117:Et,118:xt},{30:180,50:[1,179],67:Ye,80:je,81:mt,82:171,116:at,117:Et,118:xt},{30:181,67:Ye,80:je,81:mt,82:171,116:at,117:Et,118:xt},{30:182,67:Ye,80:je,81:mt,82:171,116:at,117:Et,118:xt},{30:183,67:Ye,80:je,81:mt,82:171,116:at,117:Et,118:xt},{109:[1,184]},{30:185,67:Ye,80:je,81:mt,82:171,116:at,117:Et,118:xt},{30:186,65:[1,187],67:Ye,80:je,81:mt,82:171,116:at,117:Et,118:xt},{30:188,67:Ye,80:je,81:mt,82:171,116:at,117:Et,118:xt},{30:189,67:Ye,80:je,81:mt,82:171,116:at,117:Et,118:xt},{30:190,67:Ye,80:je,81:mt,82:171,116:at,117:Et,118:xt},t(Ee,[2,182]),t(i,[2,20]),t(ve,[2,25]),t(W,[2,46],{39:191,18:192,10:R,40:Q}),t(De,[2,73],{10:[1,193]}),{10:[1,194]},{30:195,67:Ye,80:je,81:mt,82:171,116:at,117:Et,118:xt},{77:[1,196],79:197,116:Ge,119:$e},t(rn,[2,79]),t(rn,[2,81]),t(rn,[2,82]),t(rn,[2,168]),t(rn,[2,169]),{76:198,79:120,80:Ue,81:ze,116:Ge,119:$e},t(Pe,[2,84]),{8:$,9:z,10:j,11:q,12:pe,14:X,21:200,27:ge,29:[1,199],32:G,44:le,60:V,75:me,83:140,84:he,85:_e,86:Ce,87:Te,88:Re,89:Le,90:ot,91:201,105:Tt,109:Fe,111:gt,114:Qe,115:Be,116:rt},t(wt,[2,101]),t(wt,[2,103]),t(wt,[2,104]),t(wt,[2,157]),t(wt,[2,158]),t(wt,[2,159]),t(wt,[2,160]),t(wt,[2,161]),t(wt,[2,162]),t(wt,[2,163]),t(wt,[2,164]),t(wt,[2,165]),t(wt,[2,166]),t(wt,[2,167]),t(wt,[2,90]),t(wt,[2,91]),t(wt,[2,92]),t(wt,[2,93]),t(wt,[2,94]),t(wt,[2,95]),t(wt,[2,96]),t(wt,[2,97]),t(wt,[2,98]),t(wt,[2,99]),t(wt,[2,100]),{6:11,7:12,8:s,9:o,10:u,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:d,32:[1,202],33:24,34:p,36:f,38:g,42:28,43:38,44:m,45:39,47:40,60:y,84:v,85:x,86:b,87:w,88:T,89:k,102:C,105:E,106:_,109:S,111:N,113:41,114:O,115:B,116:L,121:I,122:A,123:M,124:D},{10:R,18:203},{44:[1,204]},t(de,[2,43]),{10:[1,205],44:m,60:y,89:k,102:C,105:E,106:_,109:S,111:N,113:112,114:O,115:B,116:L},{10:[1,206]},{10:[1,207],106:[1,208]},t(dn,[2,128]),{10:[1,209],44:m,60:y,89:k,102:C,105:E,106:_,109:S,111:N,113:112,114:O,115:B,116:L},{10:[1,210],44:m,60:y,89:k,102:C,105:E,106:_,109:S,111:N,113:112,114:O,115:B,116:L},{80:[1,211]},t(it,[2,109],{10:[1,212]}),t(it,[2,111],{10:[1,213]}),{80:[1,214]},t(pt,[2,184]),{80:[1,215],98:[1,216]},t(de,[2,55],{113:112,44:m,60:y,89:k,102:C,105:E,106:_,109:S,111:N,114:O,115:B,116:L}),{31:[1,217],67:Ye,82:218,116:at,117:Et,118:xt},t(gr,[2,86]),t(gr,[2,88]),t(gr,[2,89]),t(gr,[2,153]),t(gr,[2,154]),t(gr,[2,155]),t(gr,[2,156]),{49:[1,219],67:Ye,82:218,116:at,117:Et,118:xt},{30:220,67:Ye,80:je,81:mt,82:171,116:at,117:Et,118:xt},{51:[1,221],67:Ye,82:218,116:at,117:Et,118:xt},{53:[1,222],67:Ye,82:218,116:at,117:Et,118:xt},{55:[1,223],67:Ye,82:218,116:at,117:Et,118:xt},{57:[1,224],67:Ye,82:218,116:at,117:Et,118:xt},{60:[1,225]},{64:[1,226],67:Ye,82:218,116:at,117:Et,118:xt},{66:[1,227],67:Ye,82:218,116:at,117:Et,118:xt},{30:228,67:Ye,80:je,81:mt,82:171,116:at,117:Et,118:xt},{31:[1,229],67:Ye,82:218,116:at,117:Et,118:xt},{67:Ye,69:[1,230],71:[1,231],82:218,116:at,117:Et,118:xt},{67:Ye,69:[1,233],71:[1,232],82:218,116:at,117:Et,118:xt},t(W,[2,45],{18:155,10:R,40:_t}),t(W,[2,47],{44:Je}),t(De,[2,75]),t(De,[2,74]),{62:[1,234],67:Ye,82:218,116:at,117:Et,118:xt},t(De,[2,77]),t(rn,[2,80]),{77:[1,235],79:197,116:Ge,119:$e},{30:236,67:Ye,80:je,81:mt,82:171,116:at,117:Et,118:xt},t(lt,a,{5:237}),t(wt,[2,102]),t(P,[2,35]),{43:238,44:m,45:39,47:40,60:y,89:k,102:C,105:E,106:_,109:S,111:N,113:41,114:O,115:B,116:L},{10:R,18:239},{10:Ht,60:nn,84:pn,92:240,105:xe,107:241,108:242,109:Ke,110:Xe,111:Xt,112:Tr},{10:Ht,60:nn,84:pn,92:251,104:[1,252],105:xe,107:241,108:242,109:Ke,110:Xe,111:Xt,112:Tr},{10:Ht,60:nn,84:pn,92:253,104:[1,254],105:xe,107:241,108:242,109:Ke,110:Xe,111:Xt,112:Tr},{105:[1,255]},{10:Ht,60:nn,84:pn,92:256,105:xe,107:241,108:242,109:Ke,110:Xe,111:Xt,112:Tr},{44:m,47:257,60:y,89:k,102:C,105:E,106:_,109:S,111:N,113:41,114:O,115:B,116:L},t(it,[2,108]),{80:[1,258]},{80:[1,259],98:[1,260]},t(it,[2,116]),t(it,[2,118],{10:[1,261]}),t(it,[2,119]),t(ce,[2,56]),t(gr,[2,87]),t(ce,[2,57]),{51:[1,262],67:Ye,82:218,116:at,117:Et,118:xt},t(ce,[2,64]),t(ce,[2,59]),t(ce,[2,60]),t(ce,[2,61]),{109:[1,263]},t(ce,[2,63]),t(ce,[2,65]),{66:[1,264],67:Ye,82:218,116:at,117:Et,118:xt},t(ce,[2,67]),t(ce,[2,68]),t(ce,[2,70]),t(ce,[2,69]),t(ce,[2,71]),t([10,44,60,89,102,105,106,109,111,114,115,116],[2,85]),t(De,[2,78]),{31:[1,265],67:Ye,82:218,116:at,117:Et,118:xt},{6:11,7:12,8:s,9:o,10:u,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:d,32:[1,266],33:24,34:p,36:f,38:g,42:28,43:38,44:m,45:39,47:40,60:y,84:v,85:x,86:b,87:w,88:T,89:k,102:C,105:E,106:_,109:S,111:N,113:41,114:O,115:B,116:L,121:I,122:A,123:M,124:D},t(de,[2,53]),{43:267,44:m,45:39,47:40,60:y,89:k,102:C,105:E,106:_,109:S,111:N,113:41,114:O,115:B,116:L},t(it,[2,121],{106:ir}),t(Yi,[2,130],{108:269,10:Ht,60:nn,84:pn,105:xe,109:Ke,110:Xe,111:Xt,112:Tr}),t(Xr,[2,132]),t(Xr,[2,134]),t(Xr,[2,135]),t(Xr,[2,136]),t(Xr,[2,137]),t(Xr,[2,138]),t(Xr,[2,139]),t(Xr,[2,140]),t(Xr,[2,141]),t(it,[2,122],{106:ir}),{10:[1,270]},t(it,[2,123],{106:ir}),{10:[1,271]},t(dn,[2,129]),t(it,[2,105],{106:ir}),t(it,[2,106],{113:112,44:m,60:y,89:k,102:C,105:E,106:_,109:S,111:N,114:O,115:B,116:L}),t(it,[2,110]),t(it,[2,112],{10:[1,272]}),t(it,[2,113]),{98:[1,273]},{51:[1,274]},{62:[1,275]},{66:[1,276]},{8:$,9:z,11:q,21:277},t(P,[2,34]),t(de,[2,52]),{10:Ht,60:nn,84:pn,105:xe,107:278,108:242,109:Ke,110:Xe,111:Xt,112:Tr},t(Xr,[2,133]),{14:te,44:oe,60:re,89:H,101:279,105:K,106:ie,109:ne,111:J,114:ue,115:Y,116:se,120:87},{14:te,44:oe,60:re,89:H,101:280,105:K,106:ie,109:ne,111:J,114:ue,115:Y,116:se,120:87},{98:[1,281]},t(it,[2,120]),t(ce,[2,58]),{30:282,67:Ye,80:je,81:mt,82:171,116:at,117:Et,118:xt},t(ce,[2,66]),t(lt,a,{5:283}),t(Yi,[2,131],{108:269,10:Ht,60:nn,84:pn,105:xe,109:Ke,110:Xe,111:Xt,112:Tr}),t(it,[2,126],{120:167,10:[1,284],14:te,44:oe,60:re,89:H,105:K,106:ie,109:ne,111:J,114:ue,115:Y,116:se}),t(it,[2,127],{120:167,10:[1,285],14:te,44:oe,60:re,89:H,105:K,106:ie,109:ne,111:J,114:ue,115:Y,116:se}),t(it,[2,114]),{31:[1,286],67:Ye,82:218,116:at,117:Et,118:xt},{6:11,7:12,8:s,9:o,10:u,11:h,20:17,22:18,23:19,24:20,25:21,26:22,27:d,32:[1,287],33:24,34:p,36:f,38:g,42:28,43:38,44:m,45:39,47:40,60:y,84:v,85:x,86:b,87:w,88:T,89:k,102:C,105:E,106:_,109:S,111:N,113:41,114:O,115:B,116:L,121:I,122:A,123:M,124:D},{10:Ht,60:nn,84:pn,92:288,105:xe,107:241,108:242,109:Ke,110:Xe,111:Xt,112:Tr},{10:Ht,60:nn,84:pn,92:289,105:xe,107:241,108:242,109:Ke,110:Xe,111:Xt,112:Tr},t(ce,[2,62]),t(P,[2,33]),t(it,[2,124],{106:ir}),t(it,[2,125],{106:ir})],defaultActions:{},parseError:l((function(Kt,dt){if(!dt.recoverable){var It=new Error(Kt);throw It.hash=dt,It}this.trace(Kt)}),"parseError"),parse:l((function(Kt){var dt=this,It=[0],et=[],Rr=[null],fe=[],Vi=this.table,we="",kn=0,wI=0,Yle=2,kI=1,Vle=fe.slice.call(arguments,1),Yn=Object.create(this.lexer),xc={yy:{}};for(var yk in this.yy)Object.prototype.hasOwnProperty.call(this.yy,yk)&&(xc.yy[yk]=this.yy[yk]);Yn.setInput(Kt,xc.yy),xc.yy.lexer=Yn,xc.yy.parser=this,Yn.yylloc===void 0&&(Yn.yylloc={});var vk=Yn.yylloc;fe.push(vk);var Hle=Yn.options&&Yn.options.ranges;function Xle(La){It.length=It.length-2*La,Rr.length=Rr.length-La,fe.length=fe.length-La}function TI(){var La;return typeof(La=et.pop()||Yn.lex()||kI)!="number"&&(La instanceof Array&&(La=(et=La).pop()),La=dt.symbols_[La]||La),La}typeof xc.yy.parseError=="function"?this.parseError=xc.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,l(Xle,"popStack"),l(TI,"lex");for(var ya,bc,Aa,EI,sx,ho,_I,ox,xh={};;){if(bc=It[It.length-1],this.defaultActions[bc]?Aa=this.defaultActions[bc]:(ya==null&&(ya=TI()),Aa=Vi[bc]&&Vi[bc][ya]),Aa===void 0||!Aa.length||!Aa[0]){var CI="";for(sx in ox=[],Vi[bc])this.terminals_[sx]&&sx>Yle&&ox.push("'"+this.terminals_[sx]+"'");CI=Yn.showPosition?"Parse error on line "+(kn+1)+`:
`+Yn.showPosition()+`
Expecting `+ox.join(", ")+", got '"+(this.terminals_[ya]||ya)+"'":"Parse error on line "+(kn+1)+": Unexpected "+(ya==kI?"end of input":"'"+(this.terminals_[ya]||ya)+"'"),this.parseError(CI,{text:Yn.match,token:this.terminals_[ya]||ya,line:Yn.yylineno,loc:vk,expected:ox})}if(Aa[0]instanceof Array&&Aa.length>1)throw new Error("Parse Error: multiple actions possible at state: "+bc+", token: "+ya);switch(Aa[0]){case 1:It.push(ya),Rr.push(Yn.yytext),fe.push(Yn.yylloc),It.push(Aa[1]),ya=null,wI=Yn.yyleng,we=Yn.yytext,kn=Yn.yylineno,vk=Yn.yylloc;break;case 2:if(ho=this.productions_[Aa[1]][1],xh.$=Rr[Rr.length-ho],xh._$={first_line:fe[fe.length-(ho||1)].first_line,last_line:fe[fe.length-1].last_line,first_column:fe[fe.length-(ho||1)].first_column,last_column:fe[fe.length-1].last_column},Hle&&(xh._$.range=[fe[fe.length-(ho||1)].range[0],fe[fe.length-1].range[1]]),(EI=this.performAction.apply(xh,[we,wI,kn,xc.yy,Aa[1],Rr,fe].concat(Vle)))!==void 0)return EI;ho&&(It=It.slice(0,-1*ho*2),Rr=Rr.slice(0,-1*ho),fe=fe.slice(0,-1*ho)),It.push(this.productions_[Aa[1]][0]),Rr.push(xh.$),fe.push(xh._$),_I=Vi[It[It.length-2]][It[It.length-1]],It.push(_I);break;case 3:return!0}}return!0}),"parse")},fn=(function(){var Kt={EOF:1,parseError:l((function(dt,It){if(!this.yy.parser)throw new Error(dt);this.yy.parser.parseError(dt,It)}),"parseError"),setInput:l((function(dt,It){return this.yy=It||this.yy||{},this._input=dt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:l((function(){var dt=this._input[0];return this.yytext+=dt,this.yyleng++,this.offset++,this.match+=dt,this.matched+=dt,dt.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),dt}),"input"),unput:l((function(dt){var It=dt.length,et=dt.split(/(?:\r\n?|\n)/g);this._input=dt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-It),this.offset-=It;var Rr=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),et.length-1&&(this.yylineno-=et.length-1);var fe=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:et?(et.length===Rr.length?this.yylloc.first_column:0)+Rr[Rr.length-et.length].length-et[0].length:this.yylloc.first_column-It},this.options.ranges&&(this.yylloc.range=[fe[0],fe[0]+this.yyleng-It]),this.yyleng=this.yytext.length,this}),"unput"),more:l((function(){return this._more=!0,this}),"more"),reject:l((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:l((function(dt){this.unput(this.match.slice(dt))}),"less"),pastInput:l((function(){var dt=this.matched.substr(0,this.matched.length-this.match.length);return(dt.length>20?"...":"")+dt.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:l((function(){var dt=this.match;return dt.length<20&&(dt+=this._input.substr(0,20-dt.length)),(dt.substr(0,20)+(dt.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:l((function(){var dt=this.pastInput(),It=new Array(dt.length+1).join("-");return dt+this.upcomingInput()+`
`+It+"^"}),"showPosition"),test_match:l((function(dt,It){var et,Rr,fe;if(this.options.backtrack_lexer&&(fe={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(fe.yylloc.range=this.yylloc.range.slice(0))),(Rr=dt[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Rr.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Rr?Rr[Rr.length-1].length-Rr[Rr.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+dt[0].length},this.yytext+=dt[0],this.match+=dt[0],this.matches=dt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(dt[0].length),this.matched+=dt[0],et=this.performAction.call(this,this.yy,this,It,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),et)return et;if(this._backtrack){for(var Vi in fe)this[Vi]=fe[Vi];return!1}return!1}),"test_match"),next:l((function(){if(this.done)return this.EOF;var dt,It,et,Rr;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var fe=this._currentRules(),Vi=0;Vi<fe.length;Vi++)if((et=this._input.match(this.rules[fe[Vi]]))&&(!It||et[0].length>It[0].length)){if(It=et,Rr=Vi,this.options.backtrack_lexer){if((dt=this.test_match(et,fe[Vi]))!==!1)return dt;if(this._backtrack){It=!1;continue}return!1}if(!this.options.flex)break}return It?(dt=this.test_match(It,fe[Rr]))!==!1&&dt:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:l((function(){var dt=this.next();return dt||this.lex()}),"lex"),begin:l((function(dt){this.conditionStack.push(dt)}),"begin"),popState:l((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:l((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:l((function(dt){return(dt=this.conditionStack.length-1-Math.abs(dt||0))>=0?this.conditionStack[dt]:"INITIAL"}),"topState"),pushState:l((function(dt){this.begin(dt)}),"pushState"),stateStackSize:l((function(){return this.conditionStack.length}),"stateStackSize"),options:{},performAction:l((function(dt,It,et,Rr){switch(et){case 0:return this.begin("acc_title"),34;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),36;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:case 12:case 14:case 17:case 20:case 23:case 33:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.pushState("shapeData"),It.yytext="",40;case 8:return this.pushState("shapeDataStr"),40;case 9:return this.popState(),40;case 10:const fe=/\n\s*/g;return It.yytext=It.yytext.replace(fe,"<br/>"),40;case 11:return 40;case 13:this.begin("callbackname");break;case 15:this.popState(),this.begin("callbackargs");break;case 16:return 95;case 18:return 96;case 19:return"MD_STR";case 21:this.begin("md_string");break;case 22:return"STR";case 24:this.pushState("string");break;case 25:return 84;case 26:return 102;case 27:return 85;case 28:return 104;case 29:return 86;case 30:return 87;case 31:return 97;case 32:this.begin("click");break;case 34:return 88;case 35:case 36:case 37:return dt.lex.firstGraph()&&this.begin("dir"),12;case 38:return 27;case 39:return 32;case 40:case 41:case 42:case 43:return 98;case 44:return this.popState(),13;case 45:case 46:case 47:case 48:case 49:case 50:case 51:case 52:case 53:case 54:return this.popState(),14;case 55:return 121;case 56:return 122;case 57:return 123;case 58:return 124;case 59:return 78;case 60:return 105;case 61:case 102:return 111;case 62:return 46;case 63:return 60;case 64:case 103:return 44;case 65:return 8;case 66:return 106;case 67:case 101:return 115;case 68:case 71:case 74:return this.popState(),77;case 69:return this.pushState("edgeText"),75;case 70:case 73:case 76:return 119;case 72:return this.pushState("thickEdgeText"),75;case 75:return this.pushState("dottedEdgeText"),75;case 77:return 77;case 78:return this.popState(),53;case 79:case 115:return"TEXT";case 80:return this.pushState("ellipseText"),52;case 81:return this.popState(),55;case 82:return this.pushState("text"),54;case 83:return this.popState(),57;case 84:return this.pushState("text"),56;case 85:return 58;case 86:return this.pushState("text"),67;case 87:return this.popState(),64;case 88:return this.pushState("text"),63;case 89:return this.popState(),49;case 90:return this.pushState("text"),48;case 91:return this.popState(),69;case 92:return this.popState(),71;case 93:return 117;case 94:return this.pushState("trapText"),68;case 95:return this.pushState("trapText"),70;case 96:return 118;case 97:return 67;case 98:return 90;case 99:return"SEP";case 100:return 89;case 104:return 109;case 105:return 114;case 106:return 116;case 107:return this.popState(),62;case 108:return this.pushState("text"),62;case 109:return this.popState(),51;case 110:return this.pushState("text"),50;case 111:return this.popState(),31;case 112:return this.pushState("text"),29;case 113:return this.popState(),66;case 114:return this.pushState("text"),65;case 116:return"QUOTE";case 117:return 9;case 118:return 10;case 119:return 11}}),"anonymous"),rules:[/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:@\{)/,/^(?:["])/,/^(?:["])/,/^(?:[^\"]+)/,/^(?:[^}^"]+)/,/^(?:\})/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["][`])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:["])/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s])/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:flowchart-elk\b)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[^\s\"]+@(?=[^\{\"]))/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:[^-]|-(?!-)+)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:[^=]|=(?!))/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:[^\.]|\.(?!))/,/^(?:\s*~~[\~]+\s*)/,/^(?:[-/\)][\)])/,/^(?:[^\(\)\[\]\{\}]|!\)+)/,/^(?:\(-)/,/^(?:\]\))/,/^(?:\(\[)/,/^(?:\]\])/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:>)/,/^(?:\)\])/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\(\(\()/,/^(?:[\\(?=\])][\]])/,/^(?:\/(?=\])\])/,/^(?:\/(?!\])|\\(?!\])|[^\\\[\]\(\)\{\}\/]+)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:\*)/,/^(?:#)/,/^(?:&)/,/^(?:([A-Za-z0-9!"\#$%&'*+\.`?\\_\/]|-(?=[^\>\-\.])|(?!))+)/,/^(?:-)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\|)/,/^(?:\))/,/^(?:\()/,/^(?:\])/,/^(?:\[)/,/^(?:(\}))/,/^(?:\{)/,/^(?:[^\[\]\(\)\{\}\|\"]+)/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{shapeDataEndBracket:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},shapeDataStr:{rules:[9,10,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},shapeData:{rules:[8,11,12,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},callbackargs:{rules:[17,18,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},callbackname:{rules:[14,15,16,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},href:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},click:{rules:[21,24,33,34,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},dottedEdgeText:{rules:[21,24,74,76,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},thickEdgeText:{rules:[21,24,71,73,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},edgeText:{rules:[21,24,68,70,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},trapText:{rules:[21,24,77,80,82,84,88,90,91,92,93,94,95,108,110,112,114],inclusive:!1},ellipseText:{rules:[21,24,77,78,79,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},text:{rules:[21,24,77,80,81,82,83,84,87,88,89,90,94,95,107,108,109,110,111,112,113,114,115],inclusive:!1},vertex:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},dir:{rules:[21,24,44,45,46,47,48,49,50,51,52,53,54,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_descr_multiline:{rules:[5,6,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_descr:{rules:[3,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_title:{rules:[1,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},md_string:{rules:[19,20,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},string:{rules:[21,22,23,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},INITIAL:{rules:[0,2,4,7,13,21,24,25,26,27,28,29,30,31,32,35,36,37,38,39,40,41,42,43,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,71,72,74,75,77,80,82,84,85,86,88,90,94,95,96,97,98,99,100,101,102,103,104,105,106,108,110,112,114,116,117,118,119],inclusive:!0}}};return Kt})();function Dt(){this.yy={}}return ti.lexer=fn,l(Dt,"Parser"),Dt.prototype=ti,ti.Parser=Dt,new Dt})();oC.parser=oC;var s7=oC,o7=Object.assign({},s7);o7.parse=t=>{const e=t.replace(/}\s*\n/g,`}
`);return s7.parse(e)};var Txe=o7,Exe=l(((t,e)=>{const r=v8,n=r(t,"r"),i=r(t,"g"),a=r(t,"b");return $l(n,i,a,e)}),"fade"),_xe={parser:Txe,get db(){return new xxe},renderer:kxe,styles:l((t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .cluster-label text {
    fill: ${t.titleColor};
  }
  .cluster-label span {
    color: ${t.titleColor};
  }
  .cluster-label span p {
    background-color: transparent;
  }

  .label text,span {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }
  .rough-node .label text , .node .label text, .image-shape .label, .icon-shape .label {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .katex path {
    fill: #000;
    stroke: #000;
    stroke-width: 1px;
  }

  .rough-node .label,.node .label, .image-shape .label, .icon-shape .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }


  .root .anchor path {
    fill: ${t.lineColor} !important;
    stroke-width: 0;
    stroke: ${t.lineColor};
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    p {
      background-color: ${t.edgeLabelBackground};
    }
    rect {
      opacity: 0.5;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${Exe(t.edgeLabelBackground,.5)};
    // background-color:
  }

  .cluster rect {
    fill: ${t.clusterBkg};
    stroke: ${t.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  .cluster span {
    color: ${t.titleColor};
  }
  /* .cluster div {
    color: ${t.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }

  rect.text {
    fill: none;
    stroke-width: 0;
  }

  .icon-shape, .image-shape {
    background-color: ${t.edgeLabelBackground};
    p {
      background-color: ${t.edgeLabelBackground};
      padding: 2px;
    }
    rect {
      opacity: 0.5;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }
`),"getStyles"),init:l((t=>{t.flowchart||(t.flowchart={}),t.layout&&KT({layout:t.layout}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,KT({flowchart:{arrowMarkerAbsolute:t.arrowMarkerAbsolute}})}),"init")},HA=Object.freeze({__proto__:null,diagram:_xe}),lC=(function(){var t=l((function(J,ue,Y,se){for(Y=Y||{},se=J.length;se--;Y[J[se]]=ue);return Y}),"o"),e=[6,8,10,22,24,26,28,33,34,35,36,37,40,43,44,50],r=[1,10],n=[1,11],i=[1,12],a=[1,13],s=[1,20],o=[1,21],u=[1,22],h=[1,23],d=[1,24],p=[1,19],f=[1,25],g=[1,26],m=[1,18],y=[1,33],v=[1,34],x=[1,35],b=[1,36],w=[1,37],T=[6,8,10,13,15,17,20,21,22,24,26,28,33,34,35,36,37,40,43,44,50,63,64,65,66,67],k=[1,42],C=[1,43],E=[1,52],_=[40,50,68,69],S=[1,63],N=[1,61],O=[1,58],B=[1,62],L=[1,64],I=[6,8,10,13,17,22,24,26,28,33,34,35,36,37,40,41,42,43,44,48,49,50,63,64,65,66,67],A=[63,64,65,66,67],M=[1,81],D=[1,80],R=[1,78],P=[1,79],$=[6,10,42,47],z=[6,10,13,41,42,47,48,49],q=[1,89],W=[1,88],Q=[1,87],te=[19,56],oe=[1,98],re=[1,97],H=[19,56,58,60],K={trace:l((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,entityName:11,relSpec:12,COLON:13,role:14,STYLE_SEPARATOR:15,idList:16,BLOCK_START:17,attributes:18,BLOCK_STOP:19,SQS:20,SQE:21,title:22,title_value:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,direction:29,classDefStatement:30,classStatement:31,styleStatement:32,direction_tb:33,direction_bt:34,direction_rl:35,direction_lr:36,CLASSDEF:37,stylesOpt:38,separator:39,UNICODE_TEXT:40,STYLE_TEXT:41,COMMA:42,CLASS:43,STYLE:44,style:45,styleComponent:46,SEMI:47,NUM:48,BRKT:49,ENTITY_NAME:50,attribute:51,attributeType:52,attributeName:53,attributeKeyTypeList:54,attributeComment:55,ATTRIBUTE_WORD:56,attributeKeyType:57,",":58,ATTRIBUTE_KEY:59,COMMENT:60,cardinality:61,relType:62,ZERO_OR_ONE:63,ZERO_OR_MORE:64,ONE_OR_MORE:65,ONLY_ONE:66,MD_PARENT:67,NON_IDENTIFYING:68,IDENTIFYING:69,WORD:70,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",8:"SPACE",10:"NEWLINE",13:"COLON",15:"STYLE_SEPARATOR",17:"BLOCK_START",19:"BLOCK_STOP",20:"SQS",21:"SQE",22:"title",23:"title_value",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"direction_tb",34:"direction_bt",35:"direction_rl",36:"direction_lr",37:"CLASSDEF",40:"UNICODE_TEXT",41:"STYLE_TEXT",42:"COMMA",43:"CLASS",44:"STYLE",47:"SEMI",48:"NUM",49:"BRKT",50:"ENTITY_NAME",56:"ATTRIBUTE_WORD",58:",",59:"ATTRIBUTE_KEY",60:"COMMENT",63:"ZERO_OR_ONE",64:"ZERO_OR_MORE",65:"ONE_OR_MORE",66:"ONLY_ONE",67:"MD_PARENT",68:"NON_IDENTIFYING",69:"IDENTIFYING",70:"WORD"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,5],[9,9],[9,7],[9,7],[9,4],[9,6],[9,3],[9,5],[9,1],[9,3],[9,7],[9,9],[9,6],[9,8],[9,4],[9,6],[9,2],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[9,1],[29,1],[29,1],[29,1],[29,1],[30,4],[16,1],[16,1],[16,3],[16,3],[31,3],[32,4],[38,1],[38,3],[45,1],[45,2],[39,1],[39,1],[39,1],[46,1],[46,1],[46,1],[46,1],[11,1],[11,1],[18,1],[18,2],[51,2],[51,3],[51,3],[51,4],[52,1],[53,1],[54,1],[54,3],[57,1],[55,1],[12,3],[61,1],[61,1],[61,1],[61,1],[61,1],[62,1],[62,1],[14,1],[14,1],[14,1]],performAction:l((function(J,ue,Y,se,de,ce,Ee){var ve=ce.length-1;switch(de){case 1:break;case 2:case 6:case 7:this.$=[];break;case 3:ce[ve-1].push(ce[ve]),this.$=ce[ve-1];break;case 4:case 5:case 55:case 78:case 62:case 63:case 66:this.$=ce[ve];break;case 8:se.addEntity(ce[ve-4]),se.addEntity(ce[ve-2]),se.addRelationship(ce[ve-4],ce[ve],ce[ve-2],ce[ve-3]);break;case 9:se.addEntity(ce[ve-8]),se.addEntity(ce[ve-4]),se.addRelationship(ce[ve-8],ce[ve],ce[ve-4],ce[ve-5]),se.setClass([ce[ve-8]],ce[ve-6]),se.setClass([ce[ve-4]],ce[ve-2]);break;case 10:se.addEntity(ce[ve-6]),se.addEntity(ce[ve-2]),se.addRelationship(ce[ve-6],ce[ve],ce[ve-2],ce[ve-3]),se.setClass([ce[ve-6]],ce[ve-4]);break;case 11:se.addEntity(ce[ve-6]),se.addEntity(ce[ve-4]),se.addRelationship(ce[ve-6],ce[ve],ce[ve-4],ce[ve-5]),se.setClass([ce[ve-4]],ce[ve-2]);break;case 12:se.addEntity(ce[ve-3]),se.addAttributes(ce[ve-3],ce[ve-1]);break;case 13:se.addEntity(ce[ve-5]),se.addAttributes(ce[ve-5],ce[ve-1]),se.setClass([ce[ve-5]],ce[ve-3]);break;case 14:se.addEntity(ce[ve-2]);break;case 15:se.addEntity(ce[ve-4]),se.setClass([ce[ve-4]],ce[ve-2]);break;case 16:se.addEntity(ce[ve]);break;case 17:se.addEntity(ce[ve-2]),se.setClass([ce[ve-2]],ce[ve]);break;case 18:se.addEntity(ce[ve-6],ce[ve-4]),se.addAttributes(ce[ve-6],ce[ve-1]);break;case 19:se.addEntity(ce[ve-8],ce[ve-6]),se.addAttributes(ce[ve-8],ce[ve-1]),se.setClass([ce[ve-8]],ce[ve-3]);break;case 20:se.addEntity(ce[ve-5],ce[ve-3]);break;case 21:se.addEntity(ce[ve-7],ce[ve-5]),se.setClass([ce[ve-7]],ce[ve-2]);break;case 22:se.addEntity(ce[ve-3],ce[ve-1]);break;case 23:se.addEntity(ce[ve-5],ce[ve-3]),se.setClass([ce[ve-5]],ce[ve]);break;case 24:case 25:this.$=ce[ve].trim(),se.setAccTitle(this.$);break;case 26:case 27:this.$=ce[ve].trim(),se.setAccDescription(this.$);break;case 32:se.setDirection("TB");break;case 33:se.setDirection("BT");break;case 34:se.setDirection("RL");break;case 35:se.setDirection("LR");break;case 36:this.$=ce[ve-3],se.addClass(ce[ve-2],ce[ve-1]);break;case 37:case 38:case 56:case 64:case 43:this.$=[ce[ve]];break;case 39:case 40:this.$=ce[ve-2].concat([ce[ve]]);break;case 41:this.$=ce[ve-2],se.setClass(ce[ve-1],ce[ve]);break;case 42:this.$=ce[ve-3],se.addCssStyles(ce[ve-2],ce[ve-1]);break;case 44:case 65:ce[ve-2].push(ce[ve]),this.$=ce[ve-2];break;case 46:this.$=ce[ve-1]+ce[ve];break;case 54:case 76:case 77:case 67:this.$=ce[ve].replace(/"/g,"");break;case 57:ce[ve].push(ce[ve-1]),this.$=ce[ve];break;case 58:this.$={type:ce[ve-1],name:ce[ve]};break;case 59:this.$={type:ce[ve-2],name:ce[ve-1],keys:ce[ve]};break;case 60:this.$={type:ce[ve-2],name:ce[ve-1],comment:ce[ve]};break;case 61:this.$={type:ce[ve-3],name:ce[ve-2],keys:ce[ve-1],comment:ce[ve]};break;case 68:this.$={cardA:ce[ve],relType:ce[ve-1],cardB:ce[ve-2]};break;case 69:this.$=se.Cardinality.ZERO_OR_ONE;break;case 70:this.$=se.Cardinality.ZERO_OR_MORE;break;case 71:this.$=se.Cardinality.ONE_OR_MORE;break;case 72:this.$=se.Cardinality.ONLY_ONE;break;case 73:this.$=se.Cardinality.MD_PARENT;break;case 74:this.$=se.Identification.NON_IDENTIFYING;break;case 75:this.$=se.Identification.IDENTIFYING}}),"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:9,22:r,24:n,26:i,28:a,29:14,30:15,31:16,32:17,33:s,34:o,35:u,36:h,37:d,40:p,43:f,44:g,50:m},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:27,11:9,22:r,24:n,26:i,28:a,29:14,30:15,31:16,32:17,33:s,34:o,35:u,36:h,37:d,40:p,43:f,44:g,50:m},t(e,[2,5]),t(e,[2,6]),t(e,[2,16],{12:28,61:32,15:[1,29],17:[1,30],20:[1,31],63:y,64:v,65:x,66:b,67:w}),{23:[1,38]},{25:[1,39]},{27:[1,40]},t(e,[2,27]),t(e,[2,28]),t(e,[2,29]),t(e,[2,30]),t(e,[2,31]),t(T,[2,54]),t(T,[2,55]),t(e,[2,32]),t(e,[2,33]),t(e,[2,34]),t(e,[2,35]),{16:41,40:k,41:C},{16:44,40:k,41:C},{16:45,40:k,41:C},t(e,[2,4]),{11:46,40:p,50:m},{16:47,40:k,41:C},{18:48,19:[1,49],51:50,52:51,56:E},{11:53,40:p,50:m},{62:54,68:[1,55],69:[1,56]},t(_,[2,69]),t(_,[2,70]),t(_,[2,71]),t(_,[2,72]),t(_,[2,73]),t(e,[2,24]),t(e,[2,25]),t(e,[2,26]),{13:S,38:57,41:N,42:O,45:59,46:60,48:B,49:L},t(I,[2,37]),t(I,[2,38]),{16:65,40:k,41:C,42:O},{13:S,38:66,41:N,42:O,45:59,46:60,48:B,49:L},{13:[1,67],15:[1,68]},t(e,[2,17],{61:32,12:69,17:[1,70],42:O,63:y,64:v,65:x,66:b,67:w}),{19:[1,71]},t(e,[2,14]),{18:72,19:[2,56],51:50,52:51,56:E},{53:73,56:[1,74]},{56:[2,62]},{21:[1,75]},{61:76,63:y,64:v,65:x,66:b,67:w},t(A,[2,74]),t(A,[2,75]),{6:M,10:D,39:77,42:R,47:P},{40:[1,82],41:[1,83]},t($,[2,43],{46:84,13:S,41:N,48:B,49:L}),t(z,[2,45]),t(z,[2,50]),t(z,[2,51]),t(z,[2,52]),t(z,[2,53]),t(e,[2,41],{42:O}),{6:M,10:D,39:85,42:R,47:P},{14:86,40:q,50:W,70:Q},{16:90,40:k,41:C},{11:91,40:p,50:m},{18:92,19:[1,93],51:50,52:51,56:E},t(e,[2,12]),{19:[2,57]},t(te,[2,58],{54:94,55:95,57:96,59:oe,60:re}),t([19,56,59,60],[2,63]),t(e,[2,22],{15:[1,100],17:[1,99]}),t([40,50],[2,68]),t(e,[2,36]),{13:S,41:N,45:101,46:60,48:B,49:L},t(e,[2,47]),t(e,[2,48]),t(e,[2,49]),t(I,[2,39]),t(I,[2,40]),t(z,[2,46]),t(e,[2,42]),t(e,[2,8]),t(e,[2,76]),t(e,[2,77]),t(e,[2,78]),{13:[1,102],42:O},{13:[1,104],15:[1,103]},{19:[1,105]},t(e,[2,15]),t(te,[2,59],{55:106,58:[1,107],60:re}),t(te,[2,60]),t(H,[2,64]),t(te,[2,67]),t(H,[2,66]),{18:108,19:[1,109],51:50,52:51,56:E},{16:110,40:k,41:C},t($,[2,44],{46:84,13:S,41:N,48:B,49:L}),{14:111,40:q,50:W,70:Q},{16:112,40:k,41:C},{14:113,40:q,50:W,70:Q},t(e,[2,13]),t(te,[2,61]),{57:114,59:oe},{19:[1,115]},t(e,[2,20]),t(e,[2,23],{17:[1,116],42:O}),t(e,[2,11]),{13:[1,117],42:O},t(e,[2,10]),t(H,[2,65]),t(e,[2,18]),{18:118,19:[1,119],51:50,52:51,56:E},{14:120,40:q,50:W,70:Q},{19:[1,121]},t(e,[2,21]),t(e,[2,9]),t(e,[2,19])],defaultActions:{52:[2,62],72:[2,57]},parseError:l((function(J,ue){if(!ue.recoverable){var Y=new Error(J);throw Y.hash=ue,Y}this.trace(J)}),"parseError"),parse:l((function(J){var ue=this,Y=[0],se=[],de=[null],ce=[],Ee=this.table,ve="",De=0,Ue=0,ze=2,Ge=1,$e=ce.slice.call(arguments,1),Pe=Object.create(this.lexer),j={yy:{}};for(var pe in this.yy)Object.prototype.hasOwnProperty.call(this.yy,pe)&&(j.yy[pe]=this.yy[pe]);Pe.setInput(J,j.yy),j.yy.lexer=Pe,j.yy.parser=this,Pe.yylloc===void 0&&(Pe.yylloc={});var X=Pe.yylloc;ce.push(X);var ge=Pe.options&&Pe.options.ranges;function G(Fe){Y.length=Y.length-2*Fe,de.length=de.length-Fe,ce.length=ce.length-Fe}function le(){var Fe;return typeof(Fe=se.pop()||Pe.lex()||Ge)!="number"&&(Fe instanceof Array&&(Fe=(se=Fe).pop()),Fe=ue.symbols_[Fe]||Fe),Fe}typeof j.yy.parseError=="function"?this.parseError=j.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,l(G,"popStack"),l(le,"lex");for(var V,me,he,_e,Ce,Te,Re,Le,ot={};;){if(me=Y[Y.length-1],this.defaultActions[me]?he=this.defaultActions[me]:(V==null&&(V=le()),he=Ee[me]&&Ee[me][V]),he===void 0||!he.length||!he[0]){var Tt="";for(Ce in Le=[],Ee[me])this.terminals_[Ce]&&Ce>ze&&Le.push("'"+this.terminals_[Ce]+"'");Tt=Pe.showPosition?"Parse error on line "+(De+1)+`:
`+Pe.showPosition()+`
Expecting `+Le.join(", ")+", got '"+(this.terminals_[V]||V)+"'":"Parse error on line "+(De+1)+": Unexpected "+(V==Ge?"end of input":"'"+(this.terminals_[V]||V)+"'"),this.parseError(Tt,{text:Pe.match,token:this.terminals_[V]||V,line:Pe.yylineno,loc:X,expected:Le})}if(he[0]instanceof Array&&he.length>1)throw new Error("Parse Error: multiple actions possible at state: "+me+", token: "+V);switch(he[0]){case 1:Y.push(V),de.push(Pe.yytext),ce.push(Pe.yylloc),Y.push(he[1]),V=null,Ue=Pe.yyleng,ve=Pe.yytext,De=Pe.yylineno,X=Pe.yylloc;break;case 2:if(Te=this.productions_[he[1]][1],ot.$=de[de.length-Te],ot._$={first_line:ce[ce.length-(Te||1)].first_line,last_line:ce[ce.length-1].last_line,first_column:ce[ce.length-(Te||1)].first_column,last_column:ce[ce.length-1].last_column},ge&&(ot._$.range=[ce[ce.length-(Te||1)].range[0],ce[ce.length-1].range[1]]),(_e=this.performAction.apply(ot,[ve,Ue,De,j.yy,he[1],de,ce].concat($e)))!==void 0)return _e;Te&&(Y=Y.slice(0,-1*Te*2),de=de.slice(0,-1*Te),ce=ce.slice(0,-1*Te)),Y.push(this.productions_[he[1]][0]),de.push(ot.$),ce.push(ot._$),Re=Ee[Y[Y.length-2]][Y[Y.length-1]],Y.push(Re);break;case 3:return!0}}return!0}),"parse")},ie=(function(){var J={EOF:1,parseError:l((function(ue,Y){if(!this.yy.parser)throw new Error(ue);this.yy.parser.parseError(ue,Y)}),"parseError"),setInput:l((function(ue,Y){return this.yy=Y||this.yy||{},this._input=ue,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:l((function(){var ue=this._input[0];return this.yytext+=ue,this.yyleng++,this.offset++,this.match+=ue,this.matched+=ue,ue.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ue}),"input"),unput:l((function(ue){var Y=ue.length,se=ue.split(/(?:\r\n?|\n)/g);this._input=ue+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Y),this.offset-=Y;var de=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),se.length-1&&(this.yylineno-=se.length-1);var ce=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:se?(se.length===de.length?this.yylloc.first_column:0)+de[de.length-se.length].length-se[0].length:this.yylloc.first_column-Y},this.options.ranges&&(this.yylloc.range=[ce[0],ce[0]+this.yyleng-Y]),this.yyleng=this.yytext.length,this}),"unput"),more:l((function(){return this._more=!0,this}),"more"),reject:l((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:l((function(ue){this.unput(this.match.slice(ue))}),"less"),pastInput:l((function(){var ue=this.matched.substr(0,this.matched.length-this.match.length);return(ue.length>20?"...":"")+ue.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:l((function(){var ue=this.match;return ue.length<20&&(ue+=this._input.substr(0,20-ue.length)),(ue.substr(0,20)+(ue.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:l((function(){var ue=this.pastInput(),Y=new Array(ue.length+1).join("-");return ue+this.upcomingInput()+`
`+Y+"^"}),"showPosition"),test_match:l((function(ue,Y){var se,de,ce;if(this.options.backtrack_lexer&&(ce={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ce.yylloc.range=this.yylloc.range.slice(0))),(de=ue[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=de.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:de?de[de.length-1].length-de[de.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ue[0].length},this.yytext+=ue[0],this.match+=ue[0],this.matches=ue,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ue[0].length),this.matched+=ue[0],se=this.performAction.call(this,this.yy,this,Y,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),se)return se;if(this._backtrack){for(var Ee in ce)this[Ee]=ce[Ee];return!1}return!1}),"test_match"),next:l((function(){if(this.done)return this.EOF;var ue,Y,se,de;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var ce=this._currentRules(),Ee=0;Ee<ce.length;Ee++)if((se=this._input.match(this.rules[ce[Ee]]))&&(!Y||se[0].length>Y[0].length)){if(Y=se,de=Ee,this.options.backtrack_lexer){if((ue=this.test_match(se,ce[Ee]))!==!1)return ue;if(this._backtrack){Y=!1;continue}return!1}if(!this.options.flex)break}return Y?(ue=this.test_match(Y,ce[de]))!==!1&&ue:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:l((function(){var ue=this.next();return ue||this.lex()}),"lex"),begin:l((function(ue){this.conditionStack.push(ue)}),"begin"),popState:l((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:l((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:l((function(ue){return(ue=this.conditionStack.length-1-Math.abs(ue||0))>=0?this.conditionStack[ue]:"INITIAL"}),"topState"),pushState:l((function(ue){this.begin(ue)}),"pushState"),stateStackSize:l((function(){return this.conditionStack.length}),"stateStackSize"),options:{"case-insensitive":!0},performAction:l((function(ue,Y,se,de){switch(se){case 0:return this.begin("acc_title"),24;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),26;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return 33;case 8:return 34;case 9:return 35;case 10:return 36;case 11:return 10;case 12:case 23:case 28:case 35:break;case 13:return 8;case 14:return 50;case 15:return 70;case 16:return 4;case 17:return this.begin("block"),17;case 18:case 19:case 38:return 49;case 20:case 37:return 42;case 21:return 15;case 22:case 36:return 13;case 24:return 59;case 25:case 26:return 56;case 27:return 60;case 29:return this.popState(),19;case 30:case 73:return Y.yytext[0];case 31:return 20;case 32:return 21;case 33:return this.begin("style"),44;case 34:return this.popState(),10;case 39:return this.begin("style"),37;case 40:return 43;case 41:case 45:case 46:case 59:return 63;case 42:case 43:case 44:case 52:case 54:case 61:return 65;case 47:case 48:case 49:case 50:case 51:case 53:case 60:return 64;case 55:case 56:case 57:case 58:return 66;case 62:return 67;case 63:case 66:case 67:case 68:return 68;case 64:case 65:return 69;case 69:return 41;case 70:return 47;case 71:return 40;case 72:return 48;case 74:return 6}}),"anonymous"),rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:#)/i,/^(?:#)/i,/^(?:,)/i,/^(?::::)/i,/^(?::)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK)|(?:UK))\b)/i,/^(?:([^\s]*)[~].*[~]([^\s]*))/i,/^(?:([\*A-Za-z_\u00C0-\uFFFF][A-Za-z0-9\-\_\[\]\(\)\u00C0-\uFFFF\*]*))/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:style\b)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?::)/i,/^(?:,)/i,/^(?:#)/i,/^(?:classDef\b)/i,/^(?:class\b)/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\s*u\b)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:([^\x00-\x7F]|\w|-|\*)+)/i,/^(?:;)/i,/^(?:([^\x00-\x7F]|\w|-|\*)+)/i,/^(?:[0-9])/i,/^(?:.)/i,/^(?:$)/i],conditions:{style:{rules:[34,35,36,37,38,69,70],inclusive:!1},acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},block:{rules:[23,24,25,26,27,28,29,30],inclusive:!1},INITIAL:{rules:[0,2,4,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,31,32,33,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,71,72,73,74],inclusive:!0}}};return J})();function ne(){this.yy={}}return K.lexer=ie,l(ne,"Parser"),ne.prototype=K,K.Parser=ne,new ne})();lC.parser=lC;var Cxe=lC,Jp,Sxe=(Jp=class{constructor(){this.entities=new Map,this.relationships=[],this.classes=new Map,this.direction="TB",this.Cardinality={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE",MD_PARENT:"MD_PARENT"},this.Identification={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},this.setAccTitle=zn,this.getAccTitle=Xn,this.setAccDescription=Kn,this.getAccDescription=Zn,this.setDiagramTitle=di,this.getDiagramTitle=Wn,this.getConfig=l((()=>ke().er),"getConfig"),this.clear(),this.addEntity=this.addEntity.bind(this),this.addAttributes=this.addAttributes.bind(this),this.addRelationship=this.addRelationship.bind(this),this.setDirection=this.setDirection.bind(this),this.addCssStyles=this.addCssStyles.bind(this),this.addClass=this.addClass.bind(this),this.setClass=this.setClass.bind(this),this.setAccTitle=this.setAccTitle.bind(this),this.setAccDescription=this.setAccDescription.bind(this)}addEntity(e,r=""){return this.entities.has(e)?!this.entities.get(e)?.alias&&r&&(this.entities.get(e).alias=r,ee.info(`Add alias '${r}' to entity '${e}'`)):(this.entities.set(e,{id:`entity-${e}-${this.entities.size}`,label:e,attributes:[],alias:r,shape:"erBox",look:ke().look??"default",cssClasses:"default",cssStyles:[]}),ee.info("Added new entity :",e)),this.entities.get(e)}getEntity(e){return this.entities.get(e)}getEntities(){return this.entities}getClasses(){return this.classes}addAttributes(e,r){const n=this.addEntity(e);let i;for(i=r.length-1;i>=0;i--)r[i].keys||(r[i].keys=[]),r[i].comment||(r[i].comment=""),n.attributes.push(r[i]),ee.debug("Added attribute ",r[i].name)}addRelationship(e,r,n,i){const a=this.entities.get(e),s=this.entities.get(n);if(!a||!s)return;const o={entityA:a.id,roleA:r,entityB:s.id,relSpec:i};this.relationships.push(o),ee.debug("Added new relationship :",o)}getRelationships(){return this.relationships}getDirection(){return this.direction}setDirection(e){this.direction=e}getCompiledStyles(e){let r=[];for(const n of e){const i=this.classes.get(n);i?.styles&&(r=[...r,...i.styles??[]].map((a=>a.trim()))),i?.textStyles&&(r=[...r,...i.textStyles??[]].map((a=>a.trim())))}return r}addCssStyles(e,r){for(const n of e){const i=this.entities.get(n);if(!r||!i)return;for(const a of r)i.cssStyles.push(a)}}addClass(e,r){e.forEach((n=>{let i=this.classes.get(n);i===void 0&&(i={id:n,styles:[],textStyles:[]},this.classes.set(n,i)),r&&r.forEach((function(a){if(/color/.exec(a)){const s=a.replace("fill","bgFill");i.textStyles.push(s)}i.styles.push(a)}))}))}setClass(e,r){for(const n of e){const i=this.entities.get(n);if(i)for(const a of r)i.cssClasses+=" "+a}}clear(){this.entities=new Map,this.classes=new Map,this.relationships=[],jn()}getData(){const e=[],r=[],n=ke();for(const a of this.entities.keys()){const s=this.entities.get(a);s&&(s.cssCompiledStyles=this.getCompiledStyles(s.cssClasses.split(" ")),e.push(s))}let i=0;for(const a of this.relationships){const s={id:My(a.entityA,a.entityB,{prefix:"id",counter:i++}),type:"normal",curve:"basis",start:a.entityA,end:a.entityB,label:a.roleA,labelpos:"c",thickness:"normal",classes:"relationshipLine",arrowTypeStart:a.relSpec.cardB.toLowerCase(),arrowTypeEnd:a.relSpec.cardA.toLowerCase(),pattern:a.relSpec.relType=="IDENTIFYING"?"solid":"dashed",look:n.look};r.push(s)}return{nodes:e,edges:r,other:{},config:n,direction:"TB"}}},l(Jp,"ErDB"),Jp),l7={};Ss(l7,{draw:()=>Axe});var Axe=l((async function(t,e,r,n){ee.info("REF0:"),ee.info("Drawing er diagram (unified)",e);const{securityLevel:i,er:a,layout:s}=ke(),o=n.db.getData(),u=$v(e,i);o.type=n.type,o.layoutAlgorithm=X6(s),o.config.flowchart.nodeSpacing=a?.nodeSpacing||140,o.config.flowchart.rankSpacing=a?.rankSpacing||80,o.direction=n.db.getDirection(),o.markers=["only_one","zero_or_one","one_or_more","zero_or_more"],o.diagramId=e,await Av(o,u),o.layoutAlgorithm==="elk"&&u.select(".edges").lower();const h=u.selectAll('[id*="-background"]');Array.from(h).length>0&&h.each((function(){const d=Ze(this),p=d.attr("id").replace("-background",""),f=u.select(`#${CSS.escape(p)}`);if(!f.empty()){const g=f.attr("transform");d.attr("transform",g)}})),Vt.insertTitle(u,"erDiagramTitleText",a?.titleTopMargin??25,n.db.getDiagramTitle()),Fv(u,8,"erDiagram",a?.useMaxWidth??!0)}),"draw"),Lxe=l(((t,e)=>{const r=v8,n=r(t,"r"),i=r(t,"g"),a=r(t,"b");return $l(n,i,a,e)}),"fade"),Nxe={parser:Cxe,get db(){return new Sxe},renderer:l7,styles:l((t=>`
  .entityBox {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${t.tertiaryColor};
    opacity: 0.7;
    background-color: ${t.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

  .labelBkg {
    background-color: ${Lxe(t.tertiaryColor,.5)};
  }

  .edgeLabel .label {
    fill: ${t.nodeBorder};
    font-size: 14px;
  }

  .label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }

  .edge-pattern-dashed {
    stroke-dasharray: 8,8;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon
  {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .relationshipLine {
    stroke: ${t.lineColor};
    stroke-width: 1;
    fill: none;
  }

  .marker {
    fill: none !important;
    stroke: ${t.lineColor} !important;
    stroke-width: 1;
  }
`),"getStyles")},Ixe=Object.freeze({__proto__:null,diagram:Nxe}),ef,XA=(ef=class{constructor(e){this.init=e,this.records=this.init()}reset(){this.records=this.init()}},l(ef,"ImperativeState"),ef);function pm(t,e){t.accDescr&&e.setAccDescription?.(t.accDescr),t.accTitle&&e.setAccTitle?.(t.accTitle),t.title&&e.setDiagramTitle?.(t.title)}l(pm,"populateCommonDb");var c7=qn({"../../node_modules/.pnpm/vscode-jsonrpc@8.2.0/node_modules/vscode-jsonrpc/lib/common/ral.js"(t){var e;function r(){if(e===void 0)throw new Error("No runtime abstraction layer installed");return e}Object.defineProperty(t,"__esModule",{value:!0}),l(r,"RAL"),(function(n){function i(a){if(a===void 0)throw new Error("No runtime abstraction layer provided");e=a}l(i,"install"),n.install=i})(r||(r={})),t.default=r}}),Rxe=qn({"../../node_modules/.pnpm/vscode-jsonrpc@8.2.0/node_modules/vscode-jsonrpc/lib/common/is.js"(t){function e(u){return u===!0||u===!1}function r(u){return typeof u=="string"||u instanceof String}function n(u){return typeof u=="number"||u instanceof Number}function i(u){return u instanceof Error}function a(u){return typeof u=="function"}function s(u){return Array.isArray(u)}function o(u){return s(u)&&u.every((h=>r(h)))}Object.defineProperty(t,"__esModule",{value:!0}),t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,l(e,"boolean"),t.boolean=e,l(r,"string"),t.string=r,l(n,"number"),t.number=n,l(i,"error"),t.error=i,l(a,"func"),t.func=a,l(s,"array"),t.array=s,l(o,"stringArray"),t.stringArray=o}}),u7=qn({"../../node_modules/.pnpm/vscode-jsonrpc@8.2.0/node_modules/vscode-jsonrpc/lib/common/events.js"(t){var a,s;Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=t.Event=void 0;var e,r=c7();(function(o){const u={dispose(){}};o.None=function(){return u}})(e||(t.Event=e={}));var n=(a=class{add(u,h=null,d){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(u),this._contexts.push(h),Array.isArray(d)&&d.push({dispose:l((()=>this.remove(u,h)),"dispose")})}remove(u,h=null){if(!this._callbacks)return;let d=!1;for(let p=0,f=this._callbacks.length;p<f;p++)if(this._callbacks[p]===u){if(this._contexts[p]===h)return this._callbacks.splice(p,1),void this._contexts.splice(p,1);d=!0}if(d)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...u){if(!this._callbacks)return[];const h=[],d=this._callbacks.slice(0),p=this._contexts.slice(0);for(let f=0,g=d.length;f<g;f++)try{h.push(d[f].apply(p[f],u))}catch(m){(0,r.default)().console.error(m)}return h}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},l(a,"CallbackList"),a),i=(s=class{constructor(u){this._options=u}get event(){return this._event||(this._event=(u,h,d)=>{this._callbacks||(this._callbacks=new n),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(u,h);const p={dispose:l((()=>{this._callbacks&&(this._callbacks.remove(u,h),p.dispose=s._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}),"dispose")};return Array.isArray(d)&&d.push(p),p}),this._event}fire(u){this._callbacks&&this._callbacks.invoke.call(this._callbacks,u)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}},l(s,"Emitter"),s);t.Emitter=i,i._noop=function(){}}}),Mxe=qn({"../../node_modules/.pnpm/vscode-jsonrpc@8.2.0/node_modules/vscode-jsonrpc/lib/common/cancellation.js"(t){var u,h;Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationTokenSource=t.CancellationToken=void 0;var e,r=c7(),n=Rxe(),i=u7();(function(d){function p(f){const g=f;return g&&(g===d.None||g===d.Cancelled||n.boolean(g.isCancellationRequested)&&!!g.onCancellationRequested)}d.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:i.Event.None}),d.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:i.Event.None}),l(p,"is"),d.is=p})(e||(t.CancellationToken=e={}));var a=Object.freeze((function(d,p){const f=(0,r.default)().timer.setTimeout(d.bind(p),0);return{dispose(){f.dispose()}}})),s=(u=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new i.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},l(u,"MutableToken"),u),o=(h=class{get token(){return this._token||(this._token=new s),this._token}cancel(){this._token?this._token.cancel():this._token=e.Cancelled}dispose(){this._token?this._token instanceof s&&this._token.dispose():this._token=e.None}},l(h,"CancellationTokenSource"),h);t.CancellationTokenSource=o}}),h7={};Ss(h7,{AbstractAstReflection:()=>QA,AbstractCstNode:()=>kL,AbstractLangiumParser:()=>EL,AbstractParserErrorMessageProvider:()=>hre,AbstractThreadedAsyncParser:()=>Ebe,AstUtils:()=>S9,BiMap:()=>H5,Cancellation:()=>Fr,CompositeCstNodeImpl:()=>Dw,ContextCache:()=>zw,CstNodeBuilder:()=>lre,CstUtils:()=>KA,DEFAULT_TOKENIZE_OPTIONS:()=>UL,DONE_RESULT:()=>Ri,DatatypeSymbol:()=>j5,DefaultAstNodeDescriptionProvider:()=>Bre,DefaultAstNodeLocator:()=>Fre,DefaultAsyncParser:()=>nne,DefaultCommentProvider:()=>rne,DefaultConfigurationProvider:()=>zre,DefaultDocumentBuilder:()=>Gre,DefaultDocumentValidator:()=>Pre,DefaultHydrator:()=>ane,DefaultIndexManager:()=>Ure,DefaultJsonSerializer:()=>Mre,DefaultLangiumDocumentFactory:()=>Ere,DefaultLangiumDocuments:()=>_re,DefaultLexer:()=>qL,DefaultLexerErrorMessageProvider:()=>jre,DefaultLinker:()=>Cre,DefaultNameProvider:()=>Sre,DefaultReferenceDescriptionProvider:()=>$re,DefaultReferences:()=>Are,DefaultScopeComputation:()=>Lre,DefaultScopeProvider:()=>Rre,DefaultServiceRegistry:()=>Dre,DefaultTokenBuilder:()=>Pw,DefaultValueConverter:()=>RL,DefaultWorkspaceLock:()=>ine,DefaultWorkspaceManager:()=>qre,Deferred:()=>Qo,Disposable:()=>gu,DisposableCache:()=>Fw,DocumentCache:()=>Ire,DocumentState:()=>jr,DocumentValidator:()=>Ya,EMPTY_SCOPE:()=>bbe,EMPTY_STREAM:()=>uw,EmptyFileSystem:()=>vc,EmptyFileSystemProvider:()=>lne,ErrorWithLocation:()=>dw,GrammarAST:()=>x7,GrammarUtils:()=>o9,IndentationAwareLexer:()=>Cbe,IndentationAwareTokenBuilder:()=>one,JSDocDocumentationProvider:()=>tne,LangiumCompletionParser:()=>dre,LangiumParser:()=>ure,LangiumParserErrorMessageProvider:()=>_L,LeafCstNodeImpl:()=>q5,LexingMode:()=>uu,MapScope:()=>Nre,Module:()=>DC,MultiMap:()=>Z0,OperationCancelled:()=>ac,ParserWorker:()=>_be,Reduction:()=>O2,RegExpUtils:()=>L9,RootCstNodeImpl:()=>TL,SimpleCache:()=>BL,StreamImpl:()=>Xs,StreamScope:()=>NC,TextDocument:()=>Y5,TreeStreamImpl:()=>V0,URI:()=>Jo,UriUtils:()=>oo,ValidationCategory:()=>V2,ValidationRegistry:()=>Ore,ValueConverter:()=>Gs,WorkspaceCache:()=>$L,assertUnreachable:()=>mc,createCompletionParser:()=>LL,createDefaultCoreModule:()=>sl,createDefaultSharedCoreModule:()=>ol,createGrammarConfig:()=>H9,createLangiumParser:()=>NL,createParser:()=>Ow,delayNextTick:()=>Bw,diagnosticData:()=>cu,eagerLoad:()=>KL,getDiagnosticRange:()=>zL,indentationBuilderDefaultOptions:()=>PC,inject:()=>_i,interruptAndCheck:()=>wi,isAstNode:()=>_n,isAstNodeDescription:()=>ZA,isAstNodeWithComment:()=>FL,isCompositeCstNode:()=>Yo,isIMultiModeLexerDefinition:()=>qw,isJSDoc:()=>WL,isLeafCstNode:()=>uh,isLinkingError:()=>Qd,isNamed:()=>PL,isOperationCancelled:()=>fh,isReference:()=>na,isRootCstNode:()=>cw,isTokenTypeArray:()=>Uw,isTokenTypeDictionary:()=>X5,loadGrammarFromJson:()=>ll,parseJSDoc:()=>jL,prepareLangiumParser:()=>IL,setInterruptionPeriod:()=>ML,startCancelableOperation:()=>$w,stream:()=>wn,toDiagnosticData:()=>GL,toDiagnosticSeverity:()=>e2});var KA={};function _n(t){return typeof t=="object"&&t!==null&&typeof t.$type=="string"}function na(t){return typeof t=="object"&&t!==null&&typeof t.$refText=="string"}function ZA(t){return typeof t=="object"&&t!==null&&typeof t.name=="string"&&typeof t.type=="string"&&typeof t.path=="string"}function Qd(t){return typeof t=="object"&&t!==null&&_n(t.container)&&na(t.reference)&&typeof t.message=="string"}Ss(KA,{DefaultNameRegexp:()=>r9,RangeComparison:()=>qs,compareRange:()=>e9,findCommentNode:()=>n9,findDeclarationNodeAtOffset:()=>f7,findLeafNodeAtOffset:()=>hw,findLeafNodeBeforeOffset:()=>i9,flattenCst:()=>p7,getInteriorNodes:()=>y7,getNextNode:()=>g7,getPreviousNode:()=>s9,getStartlineNode:()=>m7,inRange:()=>t9,isChildNode:()=>JA,isCommentNode:()=>C5,streamCst:()=>H0,toDocumentSegment:()=>X0,tokenToRange:()=>P2}),l(_n,"isAstNode"),l(na,"isReference"),l(ZA,"isAstNodeDescription"),l(Qd,"isLinkingError");var tf,QA=(tf=class{constructor(){this.subtypes={},this.allSubtypes={}}isInstance(e,r){return _n(e)&&this.isSubtype(e.$type,r)}isSubtype(e,r){if(e===r)return!0;let n=this.subtypes[e];n||(n=this.subtypes[e]={});const i=n[r];if(i!==void 0)return i;{const a=this.computeIsSubtype(e,r);return n[r]=a,a}}getAllSubTypes(e){const r=this.allSubtypes[e];if(r)return r;{const n=this.getAllTypes(),i=[];for(const a of n)this.isSubtype(a,e)&&i.push(a);return this.allSubtypes[e]=i,i}}},l(tf,"AbstractAstReflection"),tf);function Yo(t){return typeof t=="object"&&t!==null&&Array.isArray(t.content)}function uh(t){return typeof t=="object"&&t!==null&&typeof t.tokenType=="object"}function cw(t){return Yo(t)&&typeof t.fullText=="string"}l(Yo,"isCompositeCstNode"),l(uh,"isLeafCstNode"),l(cw,"isRootCstNode");var Qi,Xs=(Qi=class{constructor(e,r){this.startFn=e,this.nextFn=r}iterator(){const e={state:this.startFn(),next:l((()=>this.nextFn(e.state)),"next"),[Symbol.iterator]:()=>e};return e}[Symbol.iterator](){return this.iterator()}isEmpty(){return!!this.iterator().next().done}count(){const e=this.iterator();let r=0,n=e.next();for(;!n.done;)r++,n=e.next();return r}toArray(){const e=[],r=this.iterator();let n;do n=r.next(),n.value!==void 0&&e.push(n.value);while(!n.done);return e}toSet(){return new Set(this)}toMap(e,r){const n=this.map((i=>[e?e(i):i,r?r(i):i]));return new Map(n)}toString(){return this.join()}concat(e){return new Qi((()=>({first:this.startFn(),firstDone:!1,iterator:e[Symbol.iterator]()})),(r=>{let n;if(!r.firstDone){do if(n=this.nextFn(r.first),!n.done)return n;while(!n.done);r.firstDone=!0}do if(n=r.iterator.next(),!n.done)return n;while(!n.done);return Ri}))}join(e=","){const r=this.iterator();let n,i="",a=!1;do n=r.next(),n.done||(a&&(i+=e),i+=d7(n.value)),a=!0;while(!n.done);return i}indexOf(e,r=0){const n=this.iterator();let i=0,a=n.next();for(;!a.done;){if(i>=r&&a.value===e)return i;a=n.next(),i++}return-1}every(e){const r=this.iterator();let n=r.next();for(;!n.done;){if(!e(n.value))return!1;n=r.next()}return!0}some(e){const r=this.iterator();let n=r.next();for(;!n.done;){if(e(n.value))return!0;n=r.next()}return!1}forEach(e){const r=this.iterator();let n=0,i=r.next();for(;!i.done;)e(i.value,n),i=r.next(),n++}map(e){return new Qi(this.startFn,(r=>{const{done:n,value:i}=this.nextFn(r);return n?Ri:{done:!1,value:e(i)}}))}filter(e){return new Qi(this.startFn,(r=>{let n;do if(n=this.nextFn(r),!n.done&&e(n.value))return n;while(!n.done);return Ri}))}nonNullable(){return this.filter((e=>e!=null))}reduce(e,r){const n=this.iterator();let i=r,a=n.next();for(;!a.done;)i=i===void 0?a.value:e(i,a.value),a=n.next();return i}reduceRight(e,r){return this.recursiveReduce(this.iterator(),e,r)}recursiveReduce(e,r,n){const i=e.next();if(i.done)return n;const a=this.recursiveReduce(e,r,n);return a===void 0?i.value:r(a,i.value)}find(e){const r=this.iterator();let n=r.next();for(;!n.done;){if(e(n.value))return n.value;n=r.next()}}findIndex(e){const r=this.iterator();let n=0,i=r.next();for(;!i.done;){if(e(i.value))return n;i=r.next(),n++}return-1}includes(e){const r=this.iterator();let n=r.next();for(;!n.done;){if(n.value===e)return!0;n=r.next()}return!1}flatMap(e){return new Qi((()=>({this:this.startFn()})),(r=>{do{if(r.iterator){const a=r.iterator.next();if(!a.done)return a;r.iterator=void 0}const{done:n,value:i}=this.nextFn(r.this);if(!n){const a=e(i);if(!D2(a))return{done:!1,value:a};r.iterator=a[Symbol.iterator]()}}while(r.iterator);return Ri}))}flat(e){if(e===void 0&&(e=1),e<=0)return this;const r=e>1?this.flat(e-1):this;return new Qi((()=>({this:r.startFn()})),(n=>{do{if(n.iterator){const s=n.iterator.next();if(!s.done)return s;n.iterator=void 0}const{done:i,value:a}=r.nextFn(n.this);if(!i){if(!D2(a))return{done:!1,value:a};n.iterator=a[Symbol.iterator]()}}while(n.iterator);return Ri}))}head(){const e=this.iterator().next();if(!e.done)return e.value}tail(e=1){return new Qi((()=>{const r=this.startFn();for(let n=0;n<e;n++)if(this.nextFn(r).done)return r;return r}),this.nextFn)}limit(e){return new Qi((()=>({size:0,state:this.startFn()})),(r=>(r.size++,r.size>e?Ri:this.nextFn(r.state))))}distinct(e){return new Qi((()=>({set:new Set,internalState:this.startFn()})),(r=>{let n;do if(n=this.nextFn(r.internalState),!n.done){const i=e?e(n.value):n.value;if(!r.set.has(i))return r.set.add(i),n}while(!n.done);return Ri}))}exclude(e,r){const n=new Set;for(const i of e){const a=r?r(i):i;n.add(a)}return this.filter((i=>{const a=r?r(i):i;return!n.has(a)}))}},l(Qi,"StreamImpl"),Qi);function d7(t){return typeof t=="string"?t:t===void 0?"undefined":typeof t.toString=="function"?t.toString():Object.prototype.toString.call(t)}function D2(t){return!!t&&typeof t[Symbol.iterator]=="function"}l(d7,"toString"),l(D2,"isIterable");var uw=new Xs((()=>{}),(()=>Ri)),Ri=Object.freeze({done:!0,value:void 0});function wn(...t){if(t.length===1){const e=t[0];if(e instanceof Xs)return e;if(D2(e))return new Xs((()=>e[Symbol.iterator]()),(r=>r.next()));if(typeof e.length=="number")return new Xs((()=>({index:0})),(r=>r.index<e.length?{done:!1,value:e[r.index++]}:Ri))}return t.length>1?new Xs((()=>({collIndex:0,arrIndex:0})),(e=>{do{if(e.iterator){const r=e.iterator.next();if(!r.done)return r;e.iterator=void 0}if(e.array){if(e.arrIndex<e.array.length)return{done:!1,value:e.array[e.arrIndex++]};e.array=void 0,e.arrIndex=0}if(e.collIndex<t.length){const r=t[e.collIndex++];D2(r)?e.iterator=r[Symbol.iterator]():r&&typeof r.length=="number"&&(e.array=r)}}while(e.iterator||e.array||e.collIndex<t.length);return Ri})):uw}l(wn,"stream");var O2,qs,Ma,rf,V0=(rf=class extends Xs{constructor(e,r,n){super((()=>({iterators:n?.includeRoot?[[e][Symbol.iterator]()]:[r(e)[Symbol.iterator]()],pruned:!1})),(i=>{for(i.pruned&&(i.iterators.pop(),i.pruned=!1);i.iterators.length>0;){const a=i.iterators[i.iterators.length-1].next();if(!a.done)return i.iterators.push(r(a.value)[Symbol.iterator]()),a;i.iterators.pop()}return Ri}))}iterator(){const e={state:this.startFn(),next:l((()=>this.nextFn(e.state)),"next"),prune:l((()=>{e.state.pruned=!0}),"prune"),[Symbol.iterator]:()=>e};return e}},l(rf,"TreeStreamImpl"),rf);function H0(t){return new V0(t,(e=>Yo(e)?e.content:[]),{includeRoot:!0})}function p7(t){return H0(t).filter(uh)}function JA(t,e){for(;t.container;)if((t=t.container)===e)return!0;return!1}function P2(t){return{start:{character:t.startColumn-1,line:t.startLine-1},end:{character:t.endColumn,line:t.endLine-1}}}function X0(t){if(!t)return;const{offset:e,end:r,range:n}=t;return{range:n,offset:e,end:r,length:r-e}}function e9(t,e){if(t.end.line<e.start.line||t.end.line===e.start.line&&t.end.character<=e.start.character)return qs.Before;if(t.start.line>e.end.line||t.start.line===e.end.line&&t.start.character>=e.end.character)return qs.After;const r=t.start.line>e.start.line||t.start.line===e.start.line&&t.start.character>=e.start.character,n=t.end.line<e.end.line||t.end.line===e.end.line&&t.end.character<=e.end.character;return r&&n?qs.Inside:r?qs.OverlapBack:n?qs.OverlapFront:qs.Outside}function t9(t,e){return e9(t,e)>qs.After}(function(t){function e(a){return a.reduce(((s,o)=>s+o),0)}function r(a){return a.reduce(((s,o)=>s*o),0)}function n(a){return a.reduce(((s,o)=>Math.min(s,o)))}function i(a){return a.reduce(((s,o)=>Math.max(s,o)))}l(e,"sum"),t.sum=e,l(r,"product"),t.product=r,l(n,"min"),t.min=n,l(i,"max"),t.max=i})(O2||(O2={})),l(H0,"streamCst"),l(p7,"flattenCst"),l(JA,"isChildNode"),l(P2,"tokenToRange"),l(X0,"toDocumentSegment"),(Ma=qs||(qs={}))[Ma.Before=0]="Before",Ma[Ma.After=1]="After",Ma[Ma.OverlapFront=2]="OverlapFront",Ma[Ma.OverlapBack=3]="OverlapBack",Ma[Ma.Inside=4]="Inside",Ma[Ma.Outside=5]="Outside",l(e9,"compareRange"),l(t9,"inRange");var r9=/^[\w\p{L}]$/u;function f7(t,e,r=r9){if(t){if(e>0){const n=e-t.offset,i=t.text.charAt(n);r.test(i)||e--}return hw(t,e)}}function n9(t,e){if(t){const r=s9(t,!0);if(r&&C5(r,e))return r;if(cw(t)){const n=t.content.findIndex((i=>!i.hidden));for(let i=n-1;i>=0;i--){const a=t.content[i];if(C5(a,e))return a}}}}function C5(t,e){return uh(t)&&e.includes(t.tokenType.name)}function hw(t,e){if(uh(t))return t;if(Yo(t)){const r=a9(t,e,!1);if(r)return hw(r,e)}}function i9(t,e){if(uh(t))return t;if(Yo(t)){const r=a9(t,e,!0);if(r)return i9(r,e)}}function a9(t,e,r){let n,i=0,a=t.content.length-1;for(;i<=a;){const s=Math.floor((i+a)/2),o=t.content[s];if(o.offset<=e&&o.end>e)return o;o.end<=e?(n=r?o:void 0,i=s+1):a=s-1}return n}function s9(t,e=!0){for(;t.container;){const r=t.container;let n=r.content.indexOf(t);for(;n>0;){n--;const i=r.content[n];if(e||!i.hidden)return i}t=r}}function g7(t,e=!0){for(;t.container;){const r=t.container;let n=r.content.indexOf(t);const i=r.content.length-1;for(;n<i;){n++;const a=r.content[n];if(e||!a.hidden)return a}t=r}}function m7(t){if(t.range.start.character===0)return t;const e=t.range.start.line;let r,n=t;for(;t.container;){const i=t.container,a=r??i.content.indexOf(t);if(a===0?(t=i,r=void 0):(r=a-1,t=i.content[r]),t.range.start.line!==e)break;n=t}return n}function y7(t,e){const r=v7(t,e);return r?r.parent.content.slice(r.a+1,r.b):[]}function v7(t,e){const r=cC(t),n=cC(e);let i;for(let a=0;a<r.length&&a<n.length;a++){const s=r[a],o=n[a];if(s.parent!==o.parent)break;i={parent:s.parent,a:s.index,b:o.index}}return i}function cC(t){const e=[];for(;t.container;){const r=t.container,n=r.content.indexOf(t);e.push({parent:r,index:n}),t=r}return e.reverse()}l(f7,"findDeclarationNodeAtOffset"),l(n9,"findCommentNode"),l(C5,"isCommentNode"),l(hw,"findLeafNodeAtOffset"),l(i9,"findLeafNodeBeforeOffset"),l(a9,"binarySearch"),l(s9,"getPreviousNode"),l(g7,"getNextNode"),l(m7,"getStartlineNode"),l(y7,"getInteriorNodes"),l(v7,"getCommonParent"),l(cC,"getParentChain");var o9={};Ss(o9,{findAssignment:()=>G9,findNameAssignment:()=>_w,findNodeForKeyword:()=>z9,findNodeForProperty:()=>kw,findNodesForKeyword:()=>z7,findNodesForKeywordInternal:()=>Ew,findNodesForProperty:()=>F9,getActionAtElement:()=>q9,getActionType:()=>W9,getAllReachableRules:()=>ww,getCrossReferenceTerminal:()=>B9,getEntryRule:()=>D9,getExplicitRuleType:()=>gm,getHiddenRules:()=>O9,getRuleType:()=>Y9,getRuleTypeName:()=>W7,getTypeName:()=>qv,isArrayCardinality:()=>U7,isArrayOperator:()=>q7,isCommentTerminal:()=>$9,isDataType:()=>j7,isDataTypeRule:()=>Uv,isOptionalCardinality:()=>G7,terminalRegex:()=>jv});var nf,dw=(nf=class extends Error{constructor(e,r){super(e?`${r} at ${e.range.start.line}:${e.range.start.character}`:r)}},l(nf,"ErrorWithLocation"),nf);function mc(t){throw new Error("Error! The input value was not handled.")}l(mc,"assertUnreachable");var x7={};Ss(x7,{AbstractElement:()=>id,AbstractRule:()=>rd,AbstractType:()=>nd,Action:()=>Td,Alternatives:()=>Ed,ArrayLiteral:()=>ad,ArrayType:()=>sd,Assignment:()=>_d,BooleanLiteral:()=>od,CharacterRange:()=>Cd,Condition:()=>Yy,Conjunction:()=>ld,CrossReference:()=>Sd,Disjunction:()=>cd,EndOfFile:()=>Ad,Grammar:()=>ud,GrammarImport:()=>Hy,Group:()=>Ld,InferredType:()=>hd,Interface:()=>dd,Keyword:()=>Nd,LangiumGrammarAstReflection:()=>C9,LangiumGrammarTerminals:()=>Dxe,NamedArgument:()=>Xy,NegatedToken:()=>Id,Negation:()=>pd,NumberLiteral:()=>fd,Parameter:()=>gd,ParameterReference:()=>md,ParserRule:()=>yd,ReferenceType:()=>vd,RegexToken:()=>Rd,ReturnType:()=>Ky,RuleCall:()=>Md,SimpleType:()=>xd,StringLiteral:()=>bd,TerminalAlternatives:()=>Dd,TerminalGroup:()=>Od,TerminalRule:()=>Zc,TerminalRuleCall:()=>Pd,Type:()=>wd,TypeAttribute:()=>Zy,TypeDefinition:()=>S5,UnionType:()=>kd,UnorderedGroup:()=>Bd,UntilToken:()=>$d,ValueLiteral:()=>Vy,Wildcard:()=>Fd,isAbstractElement:()=>pw,isAbstractRule:()=>b7,isAbstractType:()=>w7,isAction:()=>tc,isAlternatives:()=>yw,isArrayLiteral:()=>C7,isArrayType:()=>c9,isAssignment:()=>Vo,isBooleanLiteral:()=>u9,isCharacterRange:()=>v9,isCondition:()=>k7,isConjunction:()=>h9,isCrossReference:()=>Gv,isDisjunction:()=>d9,isEndOfFile:()=>x9,isFeatureName:()=>T7,isGrammar:()=>S7,isGrammarImport:()=>A7,isGroup:()=>hh,isInferredType:()=>fw,isInterface:()=>gw,isKeyword:()=>Ho,isNamedArgument:()=>L7,isNegatedToken:()=>b9,isNegation:()=>p9,isNumberLiteral:()=>N7,isParameter:()=>I7,isParameterReference:()=>f9,isParserRule:()=>ca,isPrimitiveType:()=>l9,isReferenceType:()=>g9,isRegexToken:()=>w9,isReturnType:()=>m9,isRuleCall:()=>Xo,isSimpleType:()=>mw,isStringLiteral:()=>R7,isTerminalAlternatives:()=>k9,isTerminalGroup:()=>T9,isTerminalRule:()=>lo,isTerminalRuleCall:()=>vw,isType:()=>zv,isTypeAttribute:()=>M7,isTypeDefinition:()=>E7,isUnionType:()=>y9,isUnorderedGroup:()=>xw,isUntilToken:()=>E9,isValueLiteral:()=>_7,isWildcard:()=>_9,reflection:()=>Yt});var Dxe={ID:/\^?[_a-zA-Z][\w_]*/,STRING:/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'/,NUMBER:/NaN|-?((\d*\.\d+|\d+)([Ee][+-]?\d+)?|Infinity)/,RegexLiteral:/\/(?![*+?])(?:[^\r\n\[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*\])+\/[a-z]*/,WS:/\s+/,ML_COMMENT:/\/\*[\s\S]*?\*\//,SL_COMMENT:/\/\/[^\n\r]*/},rd="AbstractRule";function b7(t){return Yt.isInstance(t,rd)}l(b7,"isAbstractRule");var nd="AbstractType";function w7(t){return Yt.isInstance(t,nd)}l(w7,"isAbstractType");var Yy="Condition";function k7(t){return Yt.isInstance(t,Yy)}function T7(t){return l9(t)||t==="current"||t==="entry"||t==="extends"||t==="false"||t==="fragment"||t==="grammar"||t==="hidden"||t==="import"||t==="interface"||t==="returns"||t==="terminal"||t==="true"||t==="type"||t==="infer"||t==="infers"||t==="with"||typeof t=="string"&&/\^?[_a-zA-Z][\w_]*/.test(t)}function l9(t){return t==="string"||t==="number"||t==="boolean"||t==="Date"||t==="bigint"}l(k7,"isCondition"),l(T7,"isFeatureName"),l(l9,"isPrimitiveType");var S5="TypeDefinition";function E7(t){return Yt.isInstance(t,S5)}l(E7,"isTypeDefinition");var Vy="ValueLiteral";function _7(t){return Yt.isInstance(t,Vy)}l(_7,"isValueLiteral");var id="AbstractElement";function pw(t){return Yt.isInstance(t,id)}l(pw,"isAbstractElement");var ad="ArrayLiteral";function C7(t){return Yt.isInstance(t,ad)}l(C7,"isArrayLiteral");var sd="ArrayType";function c9(t){return Yt.isInstance(t,sd)}l(c9,"isArrayType");var od="BooleanLiteral";function u9(t){return Yt.isInstance(t,od)}l(u9,"isBooleanLiteral");var ld="Conjunction";function h9(t){return Yt.isInstance(t,ld)}l(h9,"isConjunction");var cd="Disjunction";function d9(t){return Yt.isInstance(t,cd)}l(d9,"isDisjunction");var ud="Grammar";function S7(t){return Yt.isInstance(t,ud)}l(S7,"isGrammar");var Hy="GrammarImport";function A7(t){return Yt.isInstance(t,Hy)}l(A7,"isGrammarImport");var hd="InferredType";function fw(t){return Yt.isInstance(t,hd)}l(fw,"isInferredType");var dd="Interface";function gw(t){return Yt.isInstance(t,dd)}l(gw,"isInterface");var Xy="NamedArgument";function L7(t){return Yt.isInstance(t,Xy)}l(L7,"isNamedArgument");var pd="Negation";function p9(t){return Yt.isInstance(t,pd)}l(p9,"isNegation");var fd="NumberLiteral";function N7(t){return Yt.isInstance(t,fd)}l(N7,"isNumberLiteral");var gd="Parameter";function I7(t){return Yt.isInstance(t,gd)}l(I7,"isParameter");var md="ParameterReference";function f9(t){return Yt.isInstance(t,md)}l(f9,"isParameterReference");var yd="ParserRule";function ca(t){return Yt.isInstance(t,yd)}l(ca,"isParserRule");var vd="ReferenceType";function g9(t){return Yt.isInstance(t,vd)}l(g9,"isReferenceType");var Ky="ReturnType";function m9(t){return Yt.isInstance(t,Ky)}l(m9,"isReturnType");var xd="SimpleType";function mw(t){return Yt.isInstance(t,xd)}l(mw,"isSimpleType");var bd="StringLiteral";function R7(t){return Yt.isInstance(t,bd)}l(R7,"isStringLiteral");var Zc="TerminalRule";function lo(t){return Yt.isInstance(t,Zc)}l(lo,"isTerminalRule");var wd="Type";function zv(t){return Yt.isInstance(t,wd)}l(zv,"isType");var Zy="TypeAttribute";function M7(t){return Yt.isInstance(t,Zy)}l(M7,"isTypeAttribute");var kd="UnionType";function y9(t){return Yt.isInstance(t,kd)}l(y9,"isUnionType");var Td="Action";function tc(t){return Yt.isInstance(t,Td)}l(tc,"isAction");var Ed="Alternatives";function yw(t){return Yt.isInstance(t,Ed)}l(yw,"isAlternatives");var _d="Assignment";function Vo(t){return Yt.isInstance(t,_d)}l(Vo,"isAssignment");var Cd="CharacterRange";function v9(t){return Yt.isInstance(t,Cd)}l(v9,"isCharacterRange");var Sd="CrossReference";function Gv(t){return Yt.isInstance(t,Sd)}l(Gv,"isCrossReference");var Ad="EndOfFile";function x9(t){return Yt.isInstance(t,Ad)}l(x9,"isEndOfFile");var Ld="Group";function hh(t){return Yt.isInstance(t,Ld)}l(hh,"isGroup");var Nd="Keyword";function Ho(t){return Yt.isInstance(t,Nd)}l(Ho,"isKeyword");var Id="NegatedToken";function b9(t){return Yt.isInstance(t,Id)}l(b9,"isNegatedToken");var Rd="RegexToken";function w9(t){return Yt.isInstance(t,Rd)}l(w9,"isRegexToken");var Md="RuleCall";function Xo(t){return Yt.isInstance(t,Md)}l(Xo,"isRuleCall");var Dd="TerminalAlternatives";function k9(t){return Yt.isInstance(t,Dd)}l(k9,"isTerminalAlternatives");var Od="TerminalGroup";function T9(t){return Yt.isInstance(t,Od)}l(T9,"isTerminalGroup");var Pd="TerminalRuleCall";function vw(t){return Yt.isInstance(t,Pd)}l(vw,"isTerminalRuleCall");var Bd="UnorderedGroup";function xw(t){return Yt.isInstance(t,Bd)}l(xw,"isUnorderedGroup");var $d="UntilToken";function E9(t){return Yt.isInstance(t,$d)}l(E9,"isUntilToken");var Fd="Wildcard";function _9(t){return Yt.isInstance(t,Fd)}l(_9,"isWildcard");var af,C9=(af=class extends QA{getAllTypes(){return[id,rd,nd,Td,Ed,ad,sd,_d,od,Cd,Yy,ld,Sd,cd,Ad,ud,Hy,Ld,hd,dd,Nd,Xy,Id,pd,fd,gd,md,yd,vd,Rd,Ky,Md,xd,bd,Dd,Od,Zc,Pd,wd,Zy,S5,kd,Bd,$d,Vy,Fd]}computeIsSubtype(e,r){switch(e){case Td:case Ed:case _d:case Cd:case Sd:case Ad:case Ld:case Nd:case Id:case Rd:case Md:case Dd:case Od:case Pd:case Bd:case $d:case Fd:return this.isSubtype(id,r);case ad:case fd:case bd:return this.isSubtype(Vy,r);case sd:case vd:case xd:case kd:return this.isSubtype(S5,r);case od:return this.isSubtype(Yy,r)||this.isSubtype(Vy,r);case ld:case cd:case pd:case md:return this.isSubtype(Yy,r);case hd:case dd:case wd:return this.isSubtype(nd,r);case yd:return this.isSubtype(rd,r)||this.isSubtype(nd,r);case Zc:return this.isSubtype(rd,r);default:return!1}}getReferenceType(e){const r=`${e.container.$type}:${e.property}`;switch(r){case"Action:type":case"CrossReference:type":case"Interface:superTypes":case"ParserRule:returnType":case"SimpleType:typeRef":return nd;case"Grammar:hiddenTokens":case"ParserRule:hiddenTokens":case"RuleCall:rule":return rd;case"Grammar:usedGrammars":return ud;case"NamedArgument:parameter":case"ParameterReference:parameter":return gd;case"TerminalRuleCall:rule":return Zc;default:throw new Error(`${r} is not a valid reference id.`)}}getTypeMetaData(e){switch(e){case id:return{name:id,properties:[{name:"cardinality"},{name:"lookahead"}]};case ad:return{name:ad,properties:[{name:"elements",defaultValue:[]}]};case sd:return{name:sd,properties:[{name:"elementType"}]};case od:return{name:od,properties:[{name:"true",defaultValue:!1}]};case ld:return{name:ld,properties:[{name:"left"},{name:"right"}]};case cd:return{name:cd,properties:[{name:"left"},{name:"right"}]};case ud:return{name:ud,properties:[{name:"definesHiddenTokens",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"imports",defaultValue:[]},{name:"interfaces",defaultValue:[]},{name:"isDeclared",defaultValue:!1},{name:"name"},{name:"rules",defaultValue:[]},{name:"types",defaultValue:[]},{name:"usedGrammars",defaultValue:[]}]};case Hy:return{name:Hy,properties:[{name:"path"}]};case hd:return{name:hd,properties:[{name:"name"}]};case dd:return{name:dd,properties:[{name:"attributes",defaultValue:[]},{name:"name"},{name:"superTypes",defaultValue:[]}]};case Xy:return{name:Xy,properties:[{name:"calledByName",defaultValue:!1},{name:"parameter"},{name:"value"}]};case pd:return{name:pd,properties:[{name:"value"}]};case fd:return{name:fd,properties:[{name:"value"}]};case gd:return{name:gd,properties:[{name:"name"}]};case md:return{name:md,properties:[{name:"parameter"}]};case yd:return{name:yd,properties:[{name:"dataType"},{name:"definesHiddenTokens",defaultValue:!1},{name:"definition"},{name:"entry",defaultValue:!1},{name:"fragment",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"inferredType"},{name:"name"},{name:"parameters",defaultValue:[]},{name:"returnType"},{name:"wildcard",defaultValue:!1}]};case vd:return{name:vd,properties:[{name:"referenceType"}]};case Ky:return{name:Ky,properties:[{name:"name"}]};case xd:return{name:xd,properties:[{name:"primitiveType"},{name:"stringType"},{name:"typeRef"}]};case bd:return{name:bd,properties:[{name:"value"}]};case Zc:return{name:Zc,properties:[{name:"definition"},{name:"fragment",defaultValue:!1},{name:"hidden",defaultValue:!1},{name:"name"},{name:"type"}]};case wd:return{name:wd,properties:[{name:"name"},{name:"type"}]};case Zy:return{name:Zy,properties:[{name:"defaultValue"},{name:"isOptional",defaultValue:!1},{name:"name"},{name:"type"}]};case kd:return{name:kd,properties:[{name:"types",defaultValue:[]}]};case Td:return{name:Td,properties:[{name:"cardinality"},{name:"feature"},{name:"inferredType"},{name:"lookahead"},{name:"operator"},{name:"type"}]};case Ed:return{name:Ed,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case _d:return{name:_d,properties:[{name:"cardinality"},{name:"feature"},{name:"lookahead"},{name:"operator"},{name:"terminal"}]};case Cd:return{name:Cd,properties:[{name:"cardinality"},{name:"left"},{name:"lookahead"},{name:"right"}]};case Sd:return{name:Sd,properties:[{name:"cardinality"},{name:"deprecatedSyntax",defaultValue:!1},{name:"lookahead"},{name:"terminal"},{name:"type"}]};case Ad:return{name:Ad,properties:[{name:"cardinality"},{name:"lookahead"}]};case Ld:return{name:Ld,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"guardCondition"},{name:"lookahead"}]};case Nd:return{name:Nd,properties:[{name:"cardinality"},{name:"lookahead"},{name:"value"}]};case Id:return{name:Id,properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case Rd:return{name:Rd,properties:[{name:"cardinality"},{name:"lookahead"},{name:"regex"}]};case Md:return{name:Md,properties:[{name:"arguments",defaultValue:[]},{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case Dd:return{name:Dd,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case Od:return{name:Od,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case Pd:return{name:Pd,properties:[{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case Bd:return{name:Bd,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case $d:return{name:$d,properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case Fd:return{name:Fd,properties:[{name:"cardinality"},{name:"lookahead"}]};default:return{name:e,properties:[]}}}},l(af,"LangiumGrammarAstReflection"),af),Yt=new C9,S9={};function A5(t){for(const[e,r]of Object.entries(t))e.startsWith("$")||(Array.isArray(r)?r.forEach(((n,i)=>{_n(n)&&(n.$container=t,n.$containerProperty=e,n.$containerIndex=i)})):_n(r)&&(r.$container=t,r.$containerProperty=e))}function K0(t,e){let r=t;for(;r;){if(e(r))return r;r=r.$container}}function XM(t,e){let r=t;for(;r;){if(e(r))return!0;r=r.$container}return!1}function Cs(t){const e=B2(t).$document;if(!e)throw new Error("AST node has no document.");return e}function B2(t){for(;t.$container;)t=t.$container;return t}function $2(t,e){if(!t)throw new Error("Node must be an AstNode.");const r=e?.range;return new Xs((()=>({keys:Object.keys(t),keyIndex:0,arrayIndex:0})),(n=>{for(;n.keyIndex<n.keys.length;){const i=n.keys[n.keyIndex];if(!i.startsWith("$")){const a=t[i];if(_n(a)){if(n.keyIndex++,L5(a,r))return{done:!1,value:a}}else if(Array.isArray(a)){for(;n.arrayIndex<a.length;){const s=a[n.arrayIndex++];if(_n(s)&&L5(s,r))return{done:!1,value:s}}n.arrayIndex=0}}n.keyIndex++}return Ri}))}function rc(t,e){if(!t)throw new Error("Root node must be an AstNode.");return new V0(t,(r=>$2(r,e)))}function Po(t,e){if(!t)throw new Error("Root node must be an AstNode.");return e?.range&&!L5(t,e.range)?new V0(t,(()=>[])):new V0(t,(r=>$2(r,e)),{includeRoot:!0})}function L5(t,e){var r;if(!e)return!0;const n=(r=t.$cstNode)===null||r===void 0?void 0:r.range;return!!n&&t9(n,e)}function F2(t){return new Xs((()=>({keys:Object.keys(t),keyIndex:0,arrayIndex:0})),(e=>{for(;e.keyIndex<e.keys.length;){const r=e.keys[e.keyIndex];if(!r.startsWith("$")){const n=t[r];if(na(n))return e.keyIndex++,{done:!1,value:{reference:n,container:t,property:r}};if(Array.isArray(n)){for(;e.arrayIndex<n.length;){const i=e.arrayIndex++,a=n[i];if(na(a))return{done:!1,value:{reference:a,container:t,property:r,index:i}}}e.arrayIndex=0}}e.keyIndex++}return Ri}))}function KM(t,e=Cs(t).parseResult.value){const r=[];return Po(e).forEach((n=>{F2(n).forEach((i=>{i.reference.ref===t&&r.push(i.reference)}))})),wn(r)}function uC(t,e){const r=t.getTypeMetaData(e.$type),n=e;for(const i of r.properties)i.defaultValue!==void 0&&n[i.name]===void 0&&(n[i.name]=A9(i.defaultValue))}function A9(t){return Array.isArray(t)?[...t.map(A9)]:t}function N5(t,e){const r={$type:t.$type};for(const[n,i]of Object.entries(t))if(!n.startsWith("$"))if(_n(i))r[n]=N5(i,e);else if(na(i))r[n]=e(r,n,i.$refNode,i.$refText);else if(Array.isArray(i)){const a=[];for(const s of i)_n(s)?a.push(N5(s,e)):na(s)?a.push(e(r,n,s.$refNode,s.$refText)):a.push(s);r[n]=a}else r[n]=i;return A5(r),r}Ss(S9,{assignMandatoryProperties:()=>uC,copyAstNode:()=>N5,findLocalReferences:()=>KM,findRootNode:()=>B2,getContainerOfType:()=>K0,getDocument:()=>Cs,hasContainerOfType:()=>XM,linkContentToContainer:()=>A5,streamAllContents:()=>rc,streamAst:()=>Po,streamContents:()=>$2,streamReferences:()=>F2}),l(A5,"linkContentToContainer"),l(K0,"getContainerOfType"),l(XM,"hasContainerOfType"),l(Cs,"getDocument"),l(B2,"findRootNode"),l($2,"streamContents"),l(rc,"streamAllContents"),l(Po,"streamAst"),l(L5,"isAstNodeInRange"),l(F2,"streamReferences"),l(KM,"findLocalReferences"),l(uC,"assignMandatoryProperties"),l(A9,"copyDefaultValue"),l(N5,"copyAstNode");var L9={};function Ut(t){return t.charCodeAt(0)}function qb(t,e){Array.isArray(t)?t.forEach((function(r){e.push(r)})):e.push(t)}function Gh(t,e){if(t[e]===!0)throw"duplicate flag "+e;t[e],t[e]=!0}function zc(t){if(t===void 0)throw Error("Internal Error - Should never get here!");return!0}function D7(){throw Error("Internal Error - Should never get here!")}function hC(t){return t.type==="Character"}Ss(L9,{NEWLINE_REGEXP:()=>P7,escapeRegExp:()=>fm,getCaseInsensitivePattern:()=>I9,getTerminalParts:()=>$7,isMultilineComment:()=>N9,isWhitespace:()=>z2,partialMatches:()=>R9,partialRegExp:()=>M9,whitespaceCharacters:()=>F7}),l(Ut,"cc"),l(qb,"insertToSet"),l(Gh,"addFlag"),l(zc,"ASSERT_EXISTS"),l(D7,"ASSERT_NEVER_REACH_HERE"),l(hC,"isCharacter");var I5=[];for(let t=Ut("0");t<=Ut("9");t++)I5.push(t);var R5=[Ut("_")].concat(I5);for(let t=Ut("a");t<=Ut("z");t++)R5.push(t);for(let t=Ut("A");t<=Ut("Z");t++)R5.push(t);var ZM=[Ut(" "),Ut("\f"),Ut(`
`),Ut("\r"),Ut("	"),Ut("\v"),Ut("	"),Ut(""),Ut(""),Ut(""),Ut(""),Ut(""),Ut(""),Ut(""),Ut(""),Ut(""),Ut(""),Ut(""),Ut(""),Ut(""),Ut("\u2028"),Ut("\u2029"),Ut(""),Ut(""),Ut(""),Ut("\uFEFF")],Oxe=/[0-9a-fA-F]/,Ox=/[0-9]/,Pxe=/[1-9]/,sf,O7=(sf=class{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");const r=this.disjunction();this.consumeChar("/");const n={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":Gh(n,"global");break;case"i":Gh(n,"ignoreCase");break;case"m":Gh(n,"multiLine");break;case"u":Gh(n,"unicode");break;case"y":Gh(n,"sticky")}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:n,value:r,loc:this.loc(0)}}disjunction(){const e=[],r=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(r)}}alternative(){const e=[],r=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(r)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":let r;switch(this.consumeChar("?"),this.popChar()){case"=":r="Lookahead";break;case"!":r="NegativeLookahead"}zc(r);const n=this.disjunction();return this.consumeChar(")"),{type:r,value:n,loc:this.loc(e)}}return D7()}quantifier(e=!1){let r;const n=this.idx;switch(this.popChar()){case"*":r={atLeast:0,atMost:1/0};break;case"+":r={atLeast:1,atMost:1/0};break;case"?":r={atLeast:0,atMost:1};break;case"{":const i=this.integerIncludingZero();switch(this.popChar()){case"}":r={atLeast:i,atMost:i};break;case",":let a;this.isDigit()?(a=this.integerIncludingZero(),r={atLeast:i,atMost:a}):r={atLeast:i,atMost:1/0},this.consumeChar("}")}if(e===!0&&r===void 0)return;zc(r)}if(e!==!0||r!==void 0)return zc(r)?(this.peekChar(0)==="?"?(this.consumeChar("?"),r.greedy=!1):r.greedy=!0,r.type="Quantifier",r.loc=this.loc(n),r):void 0}atom(){let e;const r=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group()}if(e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),zc(e))return e.loc=this.loc(r),this.isQuantifier()&&(e.quantifier=this.quantifier()),e}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[Ut(`
`),Ut("\r"),Ut("\u2028"),Ut("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,r=!1;switch(this.popChar()){case"d":e=I5;break;case"D":e=I5,r=!0;break;case"s":e=ZM;break;case"S":e=ZM,r=!0;break;case"w":e=R5;break;case"W":e=R5,r=!0}if(zc(e))return{type:"Set",value:e,complement:r}}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=Ut("\f");break;case"n":e=Ut(`
`);break;case"r":e=Ut("\r");break;case"t":e=Ut("	");break;case"v":e=Ut("\v")}if(zc(e))return{type:"Character",value:e}}controlLetterEscapeAtom(){this.consumeChar("c");const e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:Ut("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){return{type:"Character",value:Ut(this.popChar())}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:return{type:"Character",value:Ut(this.popChar())}}}characterClass(){const e=[];let r=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),r=!0);this.isClassAtom();){const n=this.classAtom();if(n.type,hC(n)&&this.isRangeDash()){this.consumeChar("-");const i=this.classAtom();if(i.type,hC(i)){if(i.value<n.value)throw Error("Range out of order in character class");e.push({from:n.value,to:i.value})}else qb(n.value,e),e.push(Ut("-")),qb(i.value,e)}else qb(n.value,e)}return this.consumeChar("]"),{type:"Set",complement:r,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:Ut("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;this.consumeChar("("),this.peekChar(0)==="?"?(this.consumeChar("?"),this.consumeChar(":"),e=!1):this.groupIdx++;const r=this.disjunction();this.consumeChar(")");const n={type:"Group",capturing:e,value:r};return e&&(n.idx=this.groupIdx),n}positiveInteger(){let e=this.popChar();if(Pxe.test(e)===!1)throw Error("Expecting a positive integer");for(;Ox.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(Ox.test(e)===!1)throw Error("Expecting an integer");for(;Ox.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){const e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:Ut(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return Ox.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){const e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let r="";for(let n=0;n<e;n++){const i=this.popChar();if(Oxe.test(i)===!1)throw Error("Expecting a HexDecimal digits");r+=i}return{type:"Character",value:parseInt(r,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){const e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}},l(sf,"RegExpParser"),sf),of,bw=(of=class{visitChildren(e){for(const r in e){const n=e[r];e.hasOwnProperty(r)&&(n.type!==void 0?this.visit(n):Array.isArray(n)&&n.forEach((i=>{this.visit(i)}),this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e)}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}},l(of,"BaseRegExpVisitor"),of),P7=/\r?\n/gm,B7=new O7,lf,Bxe=(lf=class extends bw{constructor(){super(...arguments),this.isStarting=!0,this.endRegexpStack=[],this.multiline=!1}get endRegex(){return this.endRegexpStack.join("")}reset(e){this.multiline=!1,this.regex=e,this.startRegexp="",this.isStarting=!0,this.endRegexpStack=[]}visitGroup(e){e.quantifier&&(this.isStarting=!1,this.endRegexpStack=[])}visitCharacter(e){const r=String.fromCharCode(e.value);if(this.multiline||r!==`
`||(this.multiline=!0),e.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{const n=fm(r);this.endRegexpStack.push(n),this.isStarting&&(this.startRegexp+=n)}}visitSet(e){if(!this.multiline){const r=this.regex.substring(e.loc.begin,e.loc.end),n=new RegExp(r);this.multiline=!!`
`.match(n)}if(e.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{const r=this.regex.substring(e.loc.begin,e.loc.end);this.endRegexpStack.push(r),this.isStarting&&(this.startRegexp+=r)}}visitChildren(e){e.type==="Group"&&e.quantifier||super.visitChildren(e)}},l(lf,"TerminalRegExpVisitor"),lf),ou=new Bxe;function $7(t){try{typeof t!="string"&&(t=t.source),t=`/${t}/`;const e=B7.pattern(t),r=[];for(const n of e.value.value)ou.reset(t),ou.visit(n),r.push({start:ou.startRegexp,end:ou.endRegex});return r}catch{return[]}}function N9(t){try{return typeof t=="string"&&(t=new RegExp(t)),t=t.toString(),ou.reset(t),ou.visit(B7.pattern(t)),ou.multiline}catch{return!1}}l($7,"getTerminalParts"),l(N9,"isMultilineComment");var F7=`\f
\r	\v \u2028\u2029\uFEFF`.split("");function z2(t){const e=typeof t=="string"?new RegExp(t):t;return F7.some((r=>e.test(r)))}function fm(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function I9(t){return Array.prototype.map.call(t,(e=>/\w/.test(e)?`[${e.toLowerCase()}${e.toUpperCase()}]`:fm(e))).join("")}function R9(t,e){const r=M9(t),n=e.match(r);return!!n&&n[0].length>0}function M9(t){typeof t=="string"&&(t=new RegExp(t));const e=t,r=t.source;let n=0;function i(){let a,s="";function o(h){s+=r.substr(n,h),n+=h}function u(h){s+="(?:"+r.substr(n,h)+"|$)",n+=h}for(l(o,"appendRaw"),l(u,"appendOptional");n<r.length;)switch(r[n]){case"\\":switch(r[n+1]){case"c":u(3);break;case"x":u(4);break;case"u":e.unicode?r[n+2]==="{"?u(r.indexOf("}",n)-n+1):u(6):u(2);break;case"p":case"P":e.unicode?u(r.indexOf("}",n)-n+1):u(2);break;case"k":u(r.indexOf(">",n)-n+1);break;default:u(2)}break;case"[":a=/\[(?:\\.|.)*?\]/g,a.lastIndex=n,a=a.exec(r)||[],u(a[0].length);break;case"|":case"^":case"$":case"*":case"+":case"?":o(1);break;case"{":a=/\{\d+,?\d*\}/g,a.lastIndex=n,a=a.exec(r),a?o(a[0].length):u(1);break;case"(":if(r[n+1]==="?")switch(r[n+2]){case":":s+="(?:",n+=3,s+=i()+"|$)";break;case"=":s+="(?=",n+=3,s+=i()+")";break;case"!":a=n,n+=3,i(),s+=r.substr(a,n-a);break;case"<":switch(r[n+3]){case"=":case"!":a=n,n+=4,i(),s+=r.substr(a,n-a);break;default:o(r.indexOf(">",n)-n+1),s+=i()+"|$)"}}else o(1),s+=i()+"|$)";break;case")":return++n,s;default:u(1)}return s}return l(i,"process"),new RegExp(i(),t.flags)}function D9(t){return t.rules.find((e=>ca(e)&&e.entry))}function O9(t){return t.rules.filter((e=>lo(e)&&e.hidden))}function ww(t,e){const r=new Set,n=D9(t);if(!n)return new Set(t.rules);const i=[n].concat(O9(t));for(const s of i)P9(s,r,e);const a=new Set;for(const s of t.rules)(r.has(s.name)||lo(s)&&s.hidden)&&a.add(s);return a}function P9(t,e,r){e.add(t.name),rc(t).forEach((n=>{if(Xo(n)||r&&vw(n)){const i=n.rule.ref;i&&!e.has(i.name)&&P9(i,e,r)}}))}function B9(t){if(t.terminal)return t.terminal;if(t.type.ref){const e=_w(t.type.ref);return e?.terminal}}function $9(t){return t.hidden&&!z2(jv(t))}function F9(t,e){return t&&e?Tw(t,e,t.astNode,!0):[]}function kw(t,e,r){if(!t||!e)return;const n=Tw(t,e,t.astNode,!0);return n.length!==0?n[r=r!==void 0?Math.max(0,Math.min(r,n.length-1)):0]:void 0}function Tw(t,e,r,n){if(!n){const i=K0(t.grammarSource,Vo);if(i&&i.feature===e)return[t]}return Yo(t)&&t.astNode===r?t.content.flatMap((i=>Tw(i,e,r,!1))):[]}function z7(t,e){return t?Ew(t,e,t?.astNode):[]}function z9(t,e,r){if(!t)return;const n=Ew(t,e,t?.astNode);return n.length!==0?n[r=r!==void 0?Math.max(0,Math.min(r,n.length-1)):0]:void 0}function Ew(t,e,r){if(t.astNode!==r)return[];if(Ho(t.grammarSource)&&t.grammarSource.value===e)return[t];const n=H0(t).iterator();let i;const a=[];do if(i=n.next(),!i.done){const s=i.value;s.astNode===r?Ho(s.grammarSource)&&s.grammarSource.value===e&&a.push(s):n.prune()}while(!i.done);return a}function G9(t){var e;const r=t.astNode;for(;r===((e=t.container)===null||e===void 0?void 0:e.astNode);){const n=K0(t.grammarSource,Vo);if(n)return n;t=t.container}}function _w(t){let e=t;return fw(e)&&(tc(e.$container)?e=e.$container.$container:ca(e.$container)?e=e.$container:mc(e.$container)),U9(t,e,new Map)}function U9(t,e,r){var n;function i(a,s){let o;return K0(a,Vo)||(o=U9(s,s,r)),r.set(t,o),o}if(l(i,"go"),r.has(t))return r.get(t);r.set(t,void 0);for(const a of rc(e)){if(Vo(a)&&a.feature.toLowerCase()==="name")return r.set(t,a),a;if(Xo(a)&&ca(a.rule.ref))return i(a,a.rule.ref);if(mw(a)&&(!((n=a.typeRef)===null||n===void 0)&&n.ref))return i(a,a.typeRef.ref)}}function q9(t){const e=t.$container;if(hh(e)){const r=e.elements;for(let n=r.indexOf(t)-1;n>=0;n--){const i=r[n];if(tc(i))return i;{const a=rc(r[n]).find(tc);if(a)return a}}}return pw(e)?q9(e):void 0}function G7(t,e){return t==="?"||t==="*"||hh(e)&&!!e.guardCondition}function U7(t){return t==="*"||t==="+"}function q7(t){return t==="+="}function Uv(t){return j9(t,new Set)}function j9(t,e){if(e.has(t))return!0;e.add(t);for(const r of rc(t))if(Xo(r)){if(!r.rule.ref||ca(r.rule.ref)&&!j9(r.rule.ref,e))return!1}else if(Vo(r)||tc(r))return!1;return!!t.definition}function j7(t){return M5(t.type,new Set)}function M5(t,e){if(e.has(t))return!0;if(e.add(t),c9(t)||g9(t))return!1;if(y9(t))return t.types.every((r=>M5(r,e)));if(mw(t)){if(t.primitiveType!==void 0||t.stringType!==void 0)return!0;if(t.typeRef!==void 0){const r=t.typeRef.ref;return!!zv(r)&&M5(r.type,e)}return!1}return!1}function gm(t){if(t.inferredType)return t.inferredType.name;if(t.dataType)return t.dataType;if(t.returnType){const e=t.returnType.ref;if(e&&(ca(e)||gw(e)||zv(e)))return e.name}}function qv(t){var e;if(ca(t))return Uv(t)?t.name:(e=gm(t))!==null&&e!==void 0?e:t.name;if(gw(t)||zv(t)||m9(t))return t.name;if(tc(t)){const r=W9(t);if(r)return r}else if(fw(t))return t.name;throw new Error("Cannot get name of Unknown Type")}function W9(t){var e;return t.inferredType?t.inferredType.name:!((e=t.type)===null||e===void 0)&&e.ref?qv(t.type.ref):void 0}function W7(t){var e,r,n;return lo(t)?(r=(e=t.type)===null||e===void 0?void 0:e.name)!==null&&r!==void 0?r:"string":Uv(t)?t.name:(n=gm(t))!==null&&n!==void 0?n:t.name}function Y9(t){var e,r,n;return lo(t)?(r=(e=t.type)===null||e===void 0?void 0:e.name)!==null&&r!==void 0?r:"string":(n=gm(t))!==null&&n!==void 0?n:t.name}function jv(t){const e={s:!1,i:!1,u:!1},r=dh(t.definition,e),n=Object.entries(e).filter((([,i])=>i)).map((([i])=>i)).join("");return new RegExp(r,n)}l(z2,"isWhitespace"),l(fm,"escapeRegExp"),l(I9,"getCaseInsensitivePattern"),l(R9,"partialMatches"),l(M9,"partialRegExp"),l(D9,"getEntryRule"),l(O9,"getHiddenRules"),l(ww,"getAllReachableRules"),l(P9,"ruleDfs"),l(B9,"getCrossReferenceTerminal"),l($9,"isCommentTerminal"),l(F9,"findNodesForProperty"),l(kw,"findNodeForProperty"),l(Tw,"findNodesForPropertyInternal"),l(z7,"findNodesForKeyword"),l(z9,"findNodeForKeyword"),l(Ew,"findNodesForKeywordInternal"),l(G9,"findAssignment"),l(_w,"findNameAssignment"),l(U9,"findNameAssignmentInternal"),l(q9,"getActionAtElement"),l(G7,"isOptionalCardinality"),l(U7,"isArrayCardinality"),l(q7,"isArrayOperator"),l(Uv,"isDataTypeRule"),l(j9,"isDataTypeRuleInternal"),l(j7,"isDataType"),l(M5,"isDataTypeInternal"),l(gm,"getExplicitRuleType"),l(qv,"getTypeName"),l(W9,"getActionType"),l(W7,"getRuleTypeName"),l(Y9,"getRuleType"),l(jv,"terminalRegex");var V9=/[\s\S]/.source;function dh(t,e){if(k9(t))return Y7(t);if(T9(t))return V7(t);if(v9(t))return K7(t);if(vw(t)){const r=t.rule.ref;if(!r)throw new Error("Missing rule reference.");return to(dh(r.definition),{cardinality:t.cardinality,lookahead:t.lookahead})}if(b9(t))return X7(t);if(E9(t))return H7(t);if(w9(t)){const r=t.regex.lastIndexOf("/"),n=t.regex.substring(1,r),i=t.regex.substring(r+1);return e&&(e.i=i.includes("i"),e.s=i.includes("s"),e.u=i.includes("u")),to(n,{cardinality:t.cardinality,lookahead:t.lookahead,wrap:!1})}if(_9(t))return to(V9,{cardinality:t.cardinality,lookahead:t.lookahead});throw new Error(`Invalid terminal element: ${t?.$type}`)}function Y7(t){return to(t.elements.map((e=>dh(e))).join("|"),{cardinality:t.cardinality,lookahead:t.lookahead})}function V7(t){return to(t.elements.map((e=>dh(e))).join(""),{cardinality:t.cardinality,lookahead:t.lookahead})}function H7(t){return to(`${V9}*?${dh(t.terminal)}`,{cardinality:t.cardinality,lookahead:t.lookahead})}function X7(t){return to(`(?!${dh(t.terminal)})${V9}*?`,{cardinality:t.cardinality,lookahead:t.lookahead})}function K7(t){return t.right?to(`[${jb(t.left)}-${jb(t.right)}]`,{cardinality:t.cardinality,lookahead:t.lookahead,wrap:!1}):to(jb(t.left),{cardinality:t.cardinality,lookahead:t.lookahead,wrap:!1})}function jb(t){return fm(t.value)}function to(t,e){var r;return(e.wrap!==!1||e.lookahead)&&(t=`(${(r=e.lookahead)!==null&&r!==void 0?r:""}${t})`),e.cardinality?`${t}${e.cardinality}`:t}function H9(t){const e=[],r=t.Grammar;for(const n of r.rules)lo(n)&&$9(n)&&N9(jv(n))&&e.push(n.name);return{multilineCommentRules:e,nameRegexp:r9}}function D5(t){console&&console.error&&console.error(`Error: ${t}`)}function X9(t){console&&console.warn&&console.warn(`Warning: ${t}`)}function K9(t){const e=new Date().getTime(),r=t();return{time:new Date().getTime()-e,value:r}}function Z9(t){function e(){}l(e,"FakeConstructor"),e.prototype=t;const r=new e;function n(){return typeof r.bar}return l(n,"fakeAccess"),n(),n(),t}function Z7(t){return Q7(t)?t.LABEL:t.name}function Q7(t){return Ui(t.LABEL)&&t.LABEL!==""}l(dh,"abstractElementToRegex"),l(Y7,"terminalAlternativesToRegex"),l(V7,"terminalGroupToRegex"),l(H7,"untilTokenToRegex"),l(X7,"negateTokenToRegex"),l(K7,"characterRangeToRegex"),l(jb,"keywordToRegex"),l(to,"withCardinality"),l(H9,"createGrammarConfig"),l(D5,"PRINT_ERROR"),l(X9,"PRINT_WARNING"),l(K9,"timer"),l(Z9,"toFastProperties"),l(Z7,"tokenLabel"),l(Q7,"hasTokenLabel");var cf,co=(cf=class{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),Ne(this.definition,(r=>{r.accept(e)}))}},l(cf,"AbstractProduction"),cf),uf,qi=(uf=class extends co{constructor(e){super([]),this.idx=1,Ea(this,Is(e,(r=>r!==void 0)))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}},l(uf,"NonTerminal"),uf),hf,mm=(hf=class extends co{constructor(e){super(e.definition),this.orgText="",Ea(this,Is(e,(r=>r!==void 0)))}},l(hf,"Rule"),hf),df,ua=(df=class extends co{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,Ea(this,Is(e,(r=>r!==void 0)))}},l(df,"Alternative"),df),pf,hi=(pf=class extends co{constructor(e){super(e.definition),this.idx=1,Ea(this,Is(e,(r=>r!==void 0)))}},l(pf,"Option"),pf),ff,_a=(ff=class extends co{constructor(e){super(e.definition),this.idx=1,Ea(this,Is(e,(r=>r!==void 0)))}},l(ff,"RepetitionMandatory"),ff),gf,Ca=(gf=class extends co{constructor(e){super(e.definition),this.idx=1,Ea(this,Is(e,(r=>r!==void 0)))}},l(gf,"RepetitionMandatoryWithSeparator"),gf),mf,ln=(mf=class extends co{constructor(e){super(e.definition),this.idx=1,Ea(this,Is(e,(r=>r!==void 0)))}},l(mf,"Repetition"),mf),yf,ga=(yf=class extends co{constructor(e){super(e.definition),this.idx=1,Ea(this,Is(e,(r=>r!==void 0)))}},l(yf,"RepetitionWithSeparator"),yf),vf,ma=(vf=class extends co{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,Ea(this,Is(e,(r=>r!==void 0)))}},l(vf,"Alternation"),vf),xf,Wr=(xf=class{constructor(e){this.idx=1,Ea(this,Is(e,(r=>r!==void 0)))}accept(e){e.visit(this)}},l(xf,"Terminal"),xf);function J7(t){return nt(t,Qy)}function Qy(t){function e(r){return nt(r,Qy)}if(l(e,"convertDefinition"),t instanceof qi){const r={type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};return Ui(t.label)&&(r.label=t.label),r}if(t instanceof ua)return{type:"Alternative",definition:e(t.definition)};if(t instanceof hi)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof _a)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof Ca)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:Qy(new Wr({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof ga)return{type:"RepetitionWithSeparator",idx:t.idx,separator:Qy(new Wr({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof ln)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof ma)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof Wr){const r={type:"Terminal",name:t.terminalType.name,label:Z7(t.terminalType),idx:t.idx};Ui(t.label)&&(r.terminalLabel=t.label);const n=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(r.pattern=Wo(n)?n.source:n),r}if(t instanceof mm)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}l(J7,"serializeGrammar"),l(Qy,"serializeProduction");var bf,ym=(bf=class{visit(e){const r=e;switch(r.constructor){case qi:return this.visitNonTerminal(r);case ua:return this.visitAlternative(r);case hi:return this.visitOption(r);case _a:return this.visitRepetitionMandatory(r);case Ca:return this.visitRepetitionMandatoryWithSeparator(r);case ga:return this.visitRepetitionWithSeparator(r);case ln:return this.visitRepetition(r);case ma:return this.visitAlternation(r);case Wr:return this.visitTerminal(r);case mm:return this.visitRule(r);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}},l(bf,"GAstVisitor"),bf);function eee(t){return t instanceof ua||t instanceof hi||t instanceof ln||t instanceof _a||t instanceof Ca||t instanceof ga||t instanceof Wr||t instanceof mm}function G2(t,e=[]){return t instanceof hi||t instanceof ln||t instanceof ga||(t instanceof ma?iQ(t.definition,(r=>G2(r,e))):!(t instanceof qi&&Wi(e,t))&&t instanceof co&&(t instanceof qi&&e.push(t),xs(t.definition,(r=>G2(r,e)))))}function tee(t){return t instanceof ma}function gs(t){if(t instanceof qi)return"SUBRULE";if(t instanceof hi)return"OPTION";if(t instanceof ma)return"OR";if(t instanceof _a)return"AT_LEAST_ONE";if(t instanceof Ca)return"AT_LEAST_ONE_SEP";if(t instanceof ga)return"MANY_SEP";if(t instanceof ln)return"MANY";if(t instanceof Wr)return"CONSUME";throw Error("non exhaustive match")}l(eee,"isSequenceProd"),l(G2,"isOptionalProd"),l(tee,"isBranchingProd"),l(gs,"getProductionDslName");var wf,Cw=(wf=class{walk(e,r=[]){Ne(e.definition,((n,i)=>{const a=ai(e.definition,i+1);if(n instanceof qi)this.walkProdRef(n,a,r);else if(n instanceof Wr)this.walkTerminal(n,a,r);else if(n instanceof ua)this.walkFlat(n,a,r);else if(n instanceof hi)this.walkOption(n,a,r);else if(n instanceof _a)this.walkAtLeastOne(n,a,r);else if(n instanceof Ca)this.walkAtLeastOneSep(n,a,r);else if(n instanceof ga)this.walkManySep(n,a,r);else if(n instanceof ln)this.walkMany(n,a,r);else{if(!(n instanceof ma))throw Error("non exhaustive match");this.walkOr(n,a,r)}}))}walkTerminal(e,r,n){}walkProdRef(e,r,n){}walkFlat(e,r,n){const i=r.concat(n);this.walk(e,i)}walkOption(e,r,n){const i=r.concat(n);this.walk(e,i)}walkAtLeastOne(e,r,n){const i=[new hi({definition:e.definition})].concat(r,n);this.walk(e,i)}walkAtLeastOneSep(e,r,n){const i=dC(e,r,n);this.walk(e,i)}walkMany(e,r,n){const i=[new hi({definition:e.definition})].concat(r,n);this.walk(e,i)}walkManySep(e,r,n){const i=dC(e,r,n);this.walk(e,i)}walkOr(e,r,n){const i=r.concat(n);Ne(e.definition,(a=>{const s=new ua({definition:[a]});this.walk(s,i)}))}},l(wf,"RestWalker"),wf);function dC(t,e,r){return[new hi({definition:[new Wr({terminalType:t.separator})].concat(t.definition)})].concat(e,r)}function vm(t){if(t instanceof qi)return vm(t.referencedRule);if(t instanceof Wr)return iee(t);if(eee(t))return ree(t);if(tee(t))return nee(t);throw Error("non exhaustive match")}function ree(t){let e=[];const r=t.definition;let n,i=0,a=r.length>i,s=!0;for(;a&&s;)n=r[i],s=G2(n),e=e.concat(vm(n)),i+=1,a=r.length>i;return NA(e)}function nee(t){const e=nt(t.definition,(r=>vm(r)));return NA(Hn(e))}function iee(t){return[t.terminalType]}l(dC,"restForRepetitionWithSeparator"),l(vm,"first"),l(ree,"firstForSequence"),l(nee,"firstForBranching"),l(iee,"firstForTerminal");var kf,$xe=(kf=class extends Cw{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,r,n){}walkProdRef(e,r,n){const i=see(e.referencedRule,e.idx)+this.topProd.name,a=r.concat(n),s=vm(new ua({definition:a}));this.follows[i]=s}},l(kf,"ResyncFollowsWalker"),kf);function aee(t){const e={};return Ne(t,(r=>{const n=new $xe(r).startWalking();Ea(e,n)})),e}function see(t,e){return t.name+e+"_~IN~_"}l(aee,"computeAllProdsFollows"),l(see,"buildBetweenProdsFollowPrefix");var Wb={},Fxe=new O7;function Wv(t){const e=t.toString();if(Wb.hasOwnProperty(e))return Wb[e];{const r=Fxe.pattern(e);return Wb[e]=r,r}}function oee(){Wb={}}l(Wv,"getRegExpAst"),l(oee,"clearRegExpParserCache");var O5=`Unable to use "first char" lexer optimizations:
`;function lee(t,e=!1){try{const r=Wv(t);return P5(r.value,{},r.flags.ignoreCase)}catch(r){if(r.message==="Complement Sets are not supported for first char optimization")e&&X9(`${O5}	Unable to optimize: < ${t.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let n="";e&&(n=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),D5(`${O5}
	Failed parsing: < ${t.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+n)}}return[]}function P5(t,e,r){switch(t.type){case"Disjunction":for(let i=0;i<t.value.length;i++)P5(t.value[i],e,r);break;case"Alternative":const n=t.value;for(let i=0;i<n.length;i++){const a=n[i];switch(a.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const s=a;switch(s.type){case"Character":sy(s.value,e,r);break;case"Set":if(s.complement===!0)throw Error("Complement Sets are not supported for first char optimization");Ne(s.value,(u=>{if(typeof u=="number")sy(u,e,r);else{const h=u;if(r===!0)for(let d=h.from;d<=h.to;d++)sy(d,e,r);else{for(let d=h.from;d<=h.to&&d<oy;d++)sy(d,e,r);if(h.to>=oy){const d=h.from>=oy?h.from:oy,p=h.to,f=Ko(d),g=Ko(p);for(let m=f;m<=g;m++)e[m]=m}}}}));break;case"Group":P5(s.value,e,r);break;default:throw Error("Non Exhaustive Match")}const o=s.quantifier!==void 0&&s.quantifier.atLeast===0;if(s.type==="Group"&&B5(s)===!1||s.type!=="Group"&&o===!1)break}break;default:throw Error("non exhaustive match!")}return Nr(e)}function sy(t,e,r){const n=Ko(t);e[n]=n,r===!0&&cee(t,e)}function cee(t,e){const r=String.fromCharCode(t),n=r.toUpperCase();if(n!==r){const i=Ko(n.charCodeAt(0));e[i]=i}else{const i=r.toLowerCase();if(i!==r){const a=Ko(i.charCodeAt(0));e[a]=a}}}function pC(t,e){return jo(t.value,(r=>{if(typeof r=="number")return Wi(e,r);{const n=r;return jo(e,(i=>n.from<=i&&i<=n.to))!==void 0}}))}function B5(t){const e=t.quantifier;return!(!e||e.atLeast!==0)||!!t.value&&(rr(t.value)?xs(t.value,B5):B5(t.value))}l(lee,"getOptimizedStartCodesIndices"),l(P5,"firstCharOptimizedIndices"),l(sy,"addOptimizedIdxToResult"),l(cee,"handleIgnoreCase"),l(pC,"findCode"),l(B5,"isWholeOptional");var Tf,zxe=(Tf=class extends bw{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":return void this.visitLookahead(e);case"NegativeLookahead":return void this.visitNegativeLookahead(e)}super.visitChildren(e)}}visitCharacter(e){Wi(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?pC(e,this.targetCharCodes)===void 0&&(this.found=!0):pC(e,this.targetCharCodes)!==void 0&&(this.found=!0)}},l(Tf,"CharCodeFinder"),Tf);function Sw(t,e){if(e instanceof RegExp){const r=Wv(e),n=new zxe(t);return n.visit(r),n.found}return jo(e,(r=>Wi(t,r.charCodeAt(0))))!==void 0}l(Sw,"canMatchCharCode");var uee=typeof new RegExp("(?:)").sticky=="boolean";function hee(t,e){const r=(e=tw(e,{useSticky:uee,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:l(((b,w)=>w()),"tracer")})).tracer;let n;r("initCharCodeToOptimizedIndexMap",(()=>{Iee()})),r("Reject Lexer.NA",(()=>{n=sw(t,(b=>b.PATTERN===zi.NA))}));let i,a,s,o,u,h,d,p,f,g,m,y=!1;r("Transform Patterns",(()=>{y=!1,i=nt(n,(b=>{const w=b.PATTERN;if(Wo(w)){const T=w.source;return T.length!==1||T==="^"||T==="$"||T==="."||w.ignoreCase?T.length!==2||T[0]!=="\\"||Wi(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],T[1])?e.useSticky?gC(w):fC(w):T[1]:T}if(Ja(w))return y=!0,{exec:w};if(typeof w=="object")return y=!0,w;if(typeof w=="string"){if(w.length===1)return w;{const T=w.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),k=new RegExp(T);return e.useSticky?gC(k):fC(k)}}throw Error("non exhaustive match")}))})),r("misc mapping",(()=>{a=nt(n,(b=>b.tokenTypeIdx)),s=nt(n,(b=>{const w=b.GROUP;if(w!==zi.SKIPPED){if(Ui(w))return w;if(wr(w))return!1;throw Error("non exhaustive match")}})),o=nt(n,(b=>{const w=b.LONGER_ALT;if(w)return rr(w)?nt(w,(k=>GM(n,k))):[GM(n,w)]})),u=nt(n,(b=>b.PUSH_MODE)),h=nt(n,(b=>Bt(b,"POP_MODE")))})),r("Line Terminator Handling",(()=>{const b=eL(e.lineTerminatorCharacters);d=nt(n,(w=>!1)),e.positionTracking!=="onlyOffset"&&(d=nt(n,(w=>Bt(w,"LINE_BREAKS")?!!w.LINE_BREAKS:J9(w,b)===!1&&Sw(b,w.PATTERN))))})),r("Misc Mapping #2",(()=>{p=nt(n,Q9),f=nt(i,Lee),g=Cn(n,((b,w)=>{const T=w.GROUP;return Ui(T)&&T!==zi.SKIPPED&&(b[T]=[]),b}),{}),m=nt(i,((b,w)=>({pattern:i[w],longerAlt:o[w],canLineTerminator:d[w],isCustom:p[w],short:f[w],group:s[w],push:u[w],pop:h[w],tokenTypeIdx:a[w],tokenType:n[w]})))}));let v=!0,x=[];return e.safeMode||r("First Char Optimization",(()=>{x=Cn(n,((b,w,T)=>{if(typeof w.PATTERN=="string"){const k=Ko(w.PATTERN.charCodeAt(0));Yb(b,k,m[T])}else if(rr(w.START_CHARS_HINT)){let k;Ne(w.START_CHARS_HINT,(C=>{const E=Ko(typeof C=="string"?C.charCodeAt(0):C);k!==E&&(k=E,Yb(b,E,m[T]))}))}else if(Wo(w.PATTERN))if(w.PATTERN.unicode)v=!1,e.ensureOptimizations&&D5(`${O5}	Unable to analyze < ${w.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const k=lee(w.PATTERN,e.ensureOptimizations);yr(k)&&(v=!1),Ne(k,(C=>{Yb(b,C,m[T])}))}else e.ensureOptimizations&&D5(`${O5}	TokenType: <${w.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),v=!1;return b}),[])})),{emptyGroups:g,patternIdxToConfig:m,charCodeToPatternIdxToConfig:x,hasCustom:y,canBeOptimized:v}}function dee(t,e){let r=[];const n=fee(t);r=r.concat(n.errors);const i=gee(n.valid),a=i.valid;return r=r.concat(i.errors),r=r.concat(pee(a)),r=r.concat(wee(a)),r=r.concat(kee(a,e)),r=r.concat(Tee(a)),r}function pee(t){let e=[];const r=un(t,(n=>Wo(n.PATTERN)));return e=e.concat(mee(r)),e=e.concat(vee(r)),e=e.concat(xee(r)),e=e.concat(bee(r)),e=e.concat(yee(r)),e}function fee(t){const e=un(t,(r=>!Bt(r,"PATTERN")));return{errors:nt(e,(r=>({message:"Token Type: ->"+r.name+"<- missing static 'PATTERN' property",type:cn.MISSING_PATTERN,tokenTypes:[r]}))),valid:aw(t,e)}}function gee(t){const e=un(t,(r=>{const n=r.PATTERN;return!(Wo(n)||Ja(n)||Bt(n,"exec")||Ui(n))}));return{errors:nt(e,(r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:cn.INVALID_PATTERN,tokenTypes:[r]}))),valid:aw(t,e)}}l(hee,"analyzeTokenTypes"),l(dee,"validatePatterns"),l(pee,"validateRegExpPattern"),l(fee,"findMissingPatterns"),l(gee,"findInvalidPatterns");var Gxe=/[^\\][$]/;function mee(t){const n=class n extends bw{constructor(){super(...arguments),this.found=!1}visitEndAnchor(a){this.found=!0}};l(n,"EndAnchorFinder");let e=n;const r=un(t,(i=>{const a=i.PATTERN;try{const s=Wv(a),o=new e;return o.visit(s),o.found}catch{return Gxe.test(a.source)}}));return nt(r,(i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:cn.EOI_ANCHOR_FOUND,tokenTypes:[i]})))}function yee(t){const e=un(t,(r=>r.PATTERN.test("")));return nt(e,(r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' must not match an empty string",type:cn.EMPTY_MATCH_PATTERN,tokenTypes:[r]})))}l(mee,"findEndOfInputAnchor"),l(yee,"findEmptyMatchRegExps");var Uxe=/[^\\[][\^]|^\^/;function vee(t){const n=class n extends bw{constructor(){super(...arguments),this.found=!1}visitStartAnchor(a){this.found=!0}};l(n,"StartAnchorFinder");let e=n;const r=un(t,(i=>{const a=i.PATTERN;try{const s=Wv(a),o=new e;return o.visit(s),o.found}catch{return Uxe.test(a.source)}}));return nt(r,(i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:cn.SOI_ANCHOR_FOUND,tokenTypes:[i]})))}function xee(t){const e=un(t,(r=>{const n=r.PATTERN;return n instanceof RegExp&&(n.multiline||n.global)}));return nt(e,(r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:cn.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[r]})))}function bee(t){const e=[];let r=nt(t,(i=>Cn(t,((a,s)=>(i.PATTERN.source!==s.PATTERN.source||Wi(e,s)||s.PATTERN===zi.NA||(e.push(s),a.push(s)),a)),[])));r=Ov(r);const n=un(r,(i=>i.length>1));return nt(n,(i=>{const a=nt(i,(s=>s.name));return{message:`The same RegExp pattern ->${Es(i).PATTERN}<-has been used in all of the following Token Types: ${a.join(", ")} <-`,type:cn.DUPLICATE_PATTERNS_FOUND,tokenTypes:i}}))}function wee(t){const e=un(t,(r=>{if(!Bt(r,"GROUP"))return!1;const n=r.GROUP;return n!==zi.SKIPPED&&n!==zi.NA&&!Ui(n)}));return nt(e,(r=>({message:"Token Type: ->"+r.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:cn.INVALID_GROUP_TYPE_FOUND,tokenTypes:[r]})))}function kee(t,e){const r=un(t,(n=>n.PUSH_MODE!==void 0&&!Wi(e,n.PUSH_MODE)));return nt(r,(n=>({message:`Token Type: ->${n.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${n.PUSH_MODE}<-which does not exist`,type:cn.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[n]})))}function Tee(t){const e=[],r=Cn(t,((n,i,a)=>{const s=i.PATTERN;return s===zi.NA||(Ui(s)?n.push({str:s,idx:a,tokenType:i}):Wo(s)&&_ee(s)&&n.push({str:s.source,idx:a,tokenType:i})),n}),[]);return Ne(t,((n,i)=>{Ne(r,(({str:a,idx:s,tokenType:o})=>{if(i<s&&Eee(a,n.PATTERN)){const u=`Token: ->${o.name}<- can never be matched.
Because it appears AFTER the Token Type ->${n.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:u,type:cn.UNREACHABLE_PATTERN,tokenTypes:[n,o]})}}))})),e}function Eee(t,e){if(Wo(e)){const r=e.exec(t);return r!==null&&r.index===0}if(Ja(e))return e(t,0,[],{});if(Bt(e,"exec"))return e.exec(t,0,[],{});if(typeof e=="string")return e===t;throw Error("non exhaustive match")}function _ee(t){return jo([".","\\","[","]","|","^","$","(",")","?","*","+","{"],(e=>t.source.indexOf(e)!==-1))===void 0}function fC(t){const e=t.ignoreCase?"i":"";return new RegExp(`^(?:${t.source})`,e)}function gC(t){const e=t.ignoreCase?"iy":"y";return new RegExp(`${t.source}`,e)}function Cee(t,e,r){const n=[];return Bt(t,"defaultMode")||n.push({message:`A MultiMode Lexer cannot be initialized without a <defaultMode> property in its definition
`,type:cn.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),Bt(t,"modes")||n.push({message:`A MultiMode Lexer cannot be initialized without a <modes> property in its definition
`,type:cn.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),Bt(t,"modes")&&Bt(t,"defaultMode")&&!Bt(t.modes,t.defaultMode)&&n.push({message:`A MultiMode Lexer cannot be initialized with a defaultMode: <${t.defaultMode}>which does not exist
`,type:cn.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),Bt(t,"modes")&&Ne(t.modes,((i,a)=>{Ne(i,((s,o)=>{if(wr(s))n.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${a}> at index: <${o}>
`,type:cn.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(Bt(s,"LONGER_ALT")){const u=rr(s.LONGER_ALT)?s.LONGER_ALT:[s.LONGER_ALT];Ne(u,(h=>{wr(h)||Wi(i,h)||n.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${h.name}> on token <${s.name}> outside of mode <${a}>
`,type:cn.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})}))}}))})),n}function See(t,e,r){const n=[];let i=!1;const a=Ov(Hn(Nr(t.modes))),s=sw(a,(u=>u.PATTERN===zi.NA)),o=eL(r);return e&&Ne(s,(u=>{const h=J9(u,o);if(h!==!1){const d={message:Nee(u,h),type:h.issue,tokenType:u};n.push(d)}else Bt(u,"LINE_BREAKS")?u.LINE_BREAKS===!0&&(i=!0):Sw(o,u.PATTERN)&&(i=!0)})),e&&!i&&n.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:cn.NO_LINE_BREAKS_FLAGS}),n}function Aee(t){const e={},r=Dn(t);return Ne(r,(n=>{const i=t[n];if(!rr(i))throw Error("non exhaustive match");e[n]=[]})),e}function Q9(t){const e=t.PATTERN;if(Wo(e))return!1;if(Ja(e)||Bt(e,"exec"))return!0;if(Ui(e))return!1;throw Error("non exhaustive match")}function Lee(t){return!(!Ui(t)||t.length!==1)&&t.charCodeAt(0)}l(vee,"findStartOfInputAnchor"),l(xee,"findUnsupportedFlags"),l(bee,"findDuplicatePatterns"),l(wee,"findInvalidGroupType"),l(kee,"findModesThatDoNotExist"),l(Tee,"findUnreachablePatterns"),l(Eee,"testTokenType"),l(_ee,"noMetaChar"),l(fC,"addStartOfInput"),l(gC,"addStickyFlag"),l(Cee,"performRuntimeChecks"),l(See,"performWarningRuntimeChecks"),l(Aee,"cloneEmptyGroups"),l(Q9,"isCustomPattern"),l(Lee,"isShortPattern");var qxe={test:l((function(t){const e=t.length;for(let r=this.lastIndex;r<e;r++){const n=t.charCodeAt(r);if(n===10)return this.lastIndex=r+1,!0;if(n===13)return t.charCodeAt(r+1)===10?this.lastIndex=r+2:this.lastIndex=r+1,!0}return!1}),"test"),lastIndex:0};function J9(t,e){if(Bt(t,"LINE_BREAKS"))return!1;if(Wo(t.PATTERN)){try{Sw(e,t.PATTERN)}catch(r){return{issue:cn.IDENTIFY_TERMINATOR,errMsg:r.message}}return!1}if(Ui(t.PATTERN))return!1;if(Q9(t))return{issue:cn.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}function Nee(t,e){if(e.issue===cn.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${t.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===cn.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${t.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function eL(t){return nt(t,(e=>Ui(e)?e.charCodeAt(0):e))}function Yb(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}l(J9,"checkLineBreaksIssues"),l(Nee,"buildLineBreakIssueMessage"),l(eL,"getCharCodes"),l(Yb,"addToMapOfArrays");var oy=256,Vb=[];function Ko(t){return t<oy?t:Vb[t]}function Iee(){if(yr(Vb)){Vb=new Array(65536);for(let t=0;t<65536;t++)Vb[t]=t>255?255+~~(t/255):t}}function xm(t,e){const r=t.tokenTypeIdx;return r===e.tokenTypeIdx||e.isParent===!0&&e.categoryMatchesMap[r]===!0}function U2(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}l(Ko,"charCodeToOptimizedIndex"),l(Iee,"initCharCodeToOptimizedIndexMap"),l(xm,"tokenStructuredMatcher"),l(U2,"tokenStructuredMatcherNoCategories");var QM=1,Ree={};function bm(t){const e=Mee(t);Dee(e),Pee(e),Oee(e),Ne(e,(r=>{r.isParent=r.categoryMatches.length>0}))}function Mee(t){let e=Gn(t),r=t,n=!0;for(;n;){r=Ov(Hn(nt(r,(a=>a.CATEGORIES))));const i=aw(r,e);e=e.concat(i),yr(i)?n=!1:r=i}return e}function Dee(t){Ne(t,(e=>{rL(e)||(Ree[QM]=e,e.tokenTypeIdx=QM++),mC(e)&&!rr(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),mC(e)||(e.CATEGORIES=[]),Bee(e)||(e.categoryMatches=[]),$ee(e)||(e.categoryMatchesMap={})}))}function Oee(t){Ne(t,(e=>{e.categoryMatches=[],Ne(e.categoryMatchesMap,((r,n)=>{e.categoryMatches.push(Ree[n].tokenTypeIdx)}))}))}function Pee(t){Ne(t,(e=>{tL([],e)}))}function tL(t,e){Ne(t,(r=>{e.categoryMatchesMap[r.tokenTypeIdx]=!0})),Ne(e.CATEGORIES,(r=>{const n=t.concat(e);Wi(n,r)||tL(n,r)}))}function rL(t){return Bt(t,"tokenTypeIdx")}function mC(t){return Bt(t,"CATEGORIES")}function Bee(t){return Bt(t,"categoryMatches")}function $ee(t){return Bt(t,"categoryMatchesMap")}function Fee(t){return Bt(t,"tokenTypeIdx")}l(bm,"augmentTokenTypes"),l(Mee,"expandCategories"),l(Dee,"assignTokenDefaultProps"),l(Oee,"assignCategoriesTokensProp"),l(Pee,"assignCategoriesMapProp"),l(tL,"singleAssignCategoriesToksMap"),l(rL,"hasShortKeyProperty"),l(mC,"hasCategoriesProperty"),l(Bee,"hasExtendingTokensTypesProperty"),l($ee,"hasExtendingTokensTypesMapProperty"),l(Fee,"isTokenType");var cn,nr,yC={buildUnableToPopLexerModeMessage:t=>`Unable to pop Lexer Mode after encountering Token ->${t.image}<- The Mode Stack is empty`,buildUnexpectedCharactersMessage:(t,e,r,n,i)=>`unexpected character: ->${t.charAt(e)}<- at offset: ${e}, skipped ${r} characters.`};(nr=cn||(cn={}))[nr.MISSING_PATTERN=0]="MISSING_PATTERN",nr[nr.INVALID_PATTERN=1]="INVALID_PATTERN",nr[nr.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",nr[nr.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",nr[nr.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",nr[nr.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",nr[nr.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",nr[nr.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",nr[nr.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",nr[nr.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",nr[nr.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",nr[nr.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",nr[nr.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",nr[nr.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",nr[nr.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",nr[nr.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",nr[nr.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",nr[nr.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE";var ly={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:yC,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(ly);var Ef,zi=(Ef=class{constructor(e,r=ly){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(i,a)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const s=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${s}--> <${i}>`);const{time:o,value:u}=K9(a),h=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&h(`${s}<-- <${i}> time: ${o}ms`),this.traceInitIndent--,u}return a()},typeof r=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=Ea({},ly,r);const n=this.config.traceInitPerf;n===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof n=="number"&&(this.traceInitMaxIdent=n,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",(()=>{let i,a=!0;this.TRACE_INIT("Lexer Config handling",(()=>{if(this.config.lineTerminatorsPattern===ly.lineTerminatorsPattern)this.config.lineTerminatorsPattern=qxe;else if(this.config.lineTerminatorCharacters===ly.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(r.safeMode&&r.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),rr(e)?i={modes:{defaultMode:Gn(e)},defaultMode:"defaultMode"}:(a=!1,i=Gn(e))})),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",(()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Cee(i,this.trackStartLines,this.config.lineTerminatorCharacters))})),this.TRACE_INIT("performWarningRuntimeChecks",(()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(See(i,this.trackStartLines,this.config.lineTerminatorCharacters))}))),i.modes=i.modes?i.modes:{},Ne(i.modes,((o,u)=>{i.modes[u]=sw(o,(h=>wr(h)))}));const s=Dn(i.modes);if(Ne(i.modes,((o,u)=>{this.TRACE_INIT(`Mode: <${u}> processing`,(()=>{if(this.modes.push(u),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",(()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(dee(o,s))})),yr(this.lexerDefinitionErrors)){let h;bm(o),this.TRACE_INIT("analyzeTokenTypes",(()=>{h=hee(o,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:r.positionTracking,ensureOptimizations:r.ensureOptimizations,safeMode:r.safeMode,tracer:this.TRACE_INIT})})),this.patternIdxToConfig[u]=h.patternIdxToConfig,this.charCodeToPatternIdxToConfig[u]=h.charCodeToPatternIdxToConfig,this.emptyGroups=Ea({},this.emptyGroups,h.emptyGroups),this.hasCustom=h.hasCustom||this.hasCustom,this.canModeBeOptimized[u]=h.canBeOptimized}}))})),this.defaultMode=i.defaultMode,!yr(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const o=nt(this.lexerDefinitionErrors,(h=>h.message)),u=o.join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+u)}Ne(this.lexerDefinitionWarning,(o=>{X9(o.message)})),this.TRACE_INIT("Choosing sub-methods implementations",(()=>{if(uee?(this.chopInput=$o,this.match=this.matchWithTest):(this.updateLastIndex=Ln,this.match=this.matchWithExec),a&&(this.handleModes=Ln),this.trackStartLines===!1&&(this.computeNewColumn=$o),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=Ln),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else{if(!/onlyOffset/i.test(this.config.positionTracking))throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.createTokenInstance=this.createOffsetOnlyToken}this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)})),this.TRACE_INIT("Failed Optimization Warnings",(()=>{const o=Cn(this.canModeBeOptimized,((u,h,d)=>(h===!1&&u.push(d),u)),[]);if(r.ensureOptimizations&&!yr(o))throw Error(`Lexer Modes: < ${o.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)})),this.TRACE_INIT("clearRegExpParserCache",(()=>{oee()})),this.TRACE_INIT("toFastProperties",(()=>{Z9(this)}))}))}tokenize(e,r=this.defaultMode){if(!yr(this.lexerDefinitionErrors)){const n=nt(this.lexerDefinitionErrors,(a=>a.message)),i=n.join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+i)}return this.tokenizeInternal(e,r)}tokenizeInternal(e,r){let n,i,a,s,o,u,h,d,p,f,g,m,y,v,x;const b=e,w=b.length;let T=0,k=0;const C=this.hasCustom?0:Math.floor(e.length/10),E=new Array(C),_=[];let S=this.trackStartLines?1:void 0,N=this.trackStartLines?1:void 0;const O=Aee(this.emptyGroups),B=this.trackStartLines,L=this.config.lineTerminatorsPattern;let I=0,A=[],M=[];const D=[],R=[];let P;function $(){return A}function z(oe){const re=Ko(oe),H=M[re];return H===void 0?R:H}Object.freeze(R),l($,"getPossiblePatternsSlow"),l(z,"getPossiblePatternsOptimized");const q=l((oe=>{if(D.length===1&&oe.tokenType.PUSH_MODE===void 0){const re=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(oe);_.push({offset:oe.startOffset,line:oe.startLine,column:oe.startColumn,length:oe.image.length,message:re})}else{D.pop();const re=ao(D);A=this.patternIdxToConfig[re],M=this.charCodeToPatternIdxToConfig[re],I=A.length;const H=this.canModeBeOptimized[re]&&this.config.safeMode===!1;P=M&&H?z:$}}),"pop_mode");function W(oe){D.push(oe),M=this.charCodeToPatternIdxToConfig[oe],A=this.patternIdxToConfig[oe],I=A.length,I=A.length;const re=this.canModeBeOptimized[oe]&&this.config.safeMode===!1;P=M&&re?z:$}let Q;l(W,"push_mode"),W.call(this,r);const te=this.config.recoveryEnabled;for(;T<w;){u=null;const oe=b.charCodeAt(T),re=P(oe),H=re.length;for(n=0;n<H;n++){Q=re[n];const K=Q.pattern;h=null;const ie=Q.short;if(ie!==!1?oe===ie&&(u=K):Q.isCustom===!0?(x=K.exec(b,T,E,O),x!==null?(u=x[0],x.payload!==void 0&&(h=x.payload)):u=null):(this.updateLastIndex(K,T),u=this.match(K,e,T)),u!==null){if(o=Q.longerAlt,o!==void 0){const ne=o.length;for(a=0;a<ne;a++){const J=A[o[a]],ue=J.pattern;if(d=null,J.isCustom===!0?(x=ue.exec(b,T,E,O),x!==null?(s=x[0],x.payload!==void 0&&(d=x.payload)):s=null):(this.updateLastIndex(ue,T),s=this.match(ue,e,T)),s&&s.length>u.length){u=s,h=d,Q=J;break}}}break}}if(u!==null){if(p=u.length,f=Q.group,f!==void 0&&(g=Q.tokenTypeIdx,m=this.createTokenInstance(u,T,g,Q.tokenType,S,N,p),this.handlePayload(m,h),f===!1?k=this.addToken(E,k,m):O[f].push(m)),e=this.chopInput(e,p),T+=p,N=this.computeNewColumn(N,p),B===!0&&Q.canLineTerminator===!0){let K,ie,ne=0;L.lastIndex=0;do K=L.test(u),K===!0&&(ie=L.lastIndex-1,ne++);while(K===!0);ne!==0&&(S+=ne,N=p-ie,this.updateTokenEndLineColumnLocation(m,f,ie,ne,S,N,p))}this.handleModes(Q,q,W,m)}else{const K=T,ie=S,ne=N;let J=te===!1;for(;J===!1&&T<w;)for(e=this.chopInput(e,1),T++,i=0;i<I;i++){const ue=A[i],Y=ue.pattern,se=ue.short;if(se!==!1?b.charCodeAt(T)===se&&(J=!0):ue.isCustom===!0?J=Y.exec(b,T,E,O)!==null:(this.updateLastIndex(Y,T),J=Y.exec(e)!==null),J===!0)break}if(y=T-K,N=this.computeNewColumn(N,y),v=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(b,K,y,ie,ne),_.push({offset:K,line:ie,column:ne,length:y,message:v}),te===!1)break}}return this.hasCustom||(E.length=k),{tokens:E,groups:O,errors:_}}handleModes(e,r,n,i){if(e.pop===!0){const a=e.push;r(i),a!==void 0&&n.call(this,a)}else e.push!==void 0&&n.call(this,e.push)}chopInput(e,r){return e.substring(r)}updateLastIndex(e,r){e.lastIndex=r}updateTokenEndLineColumnLocation(e,r,n,i,a,s,o){let u,h;r!==void 0&&(u=n===o-1,h=u?-1:0,i===1&&u===!0||(e.endLine=a+h,e.endColumn=s-1-h))}computeNewColumn(e,r){return e+r}createOffsetOnlyToken(e,r,n,i){return{image:e,startOffset:r,tokenTypeIdx:n,tokenType:i}}createStartOnlyToken(e,r,n,i,a,s){return{image:e,startOffset:r,startLine:a,startColumn:s,tokenTypeIdx:n,tokenType:i}}createFullToken(e,r,n,i,a,s,o){return{image:e,startOffset:r,endOffset:r+o-1,startLine:a,endLine:a,startColumn:s,endColumn:s+o-1,tokenTypeIdx:n,tokenType:i}}addTokenUsingPush(e,r,n){return e.push(n),r}addTokenUsingMemberAccess(e,r,n){return e[r]=n,++r}handlePayloadNoCustom(e,r){}handlePayloadWithCustom(e,r){r!==null&&(e.payload=r)}matchWithTest(e,r,n){return e.test(r)===!0?r.substring(n,e.lastIndex):null}matchWithExec(e,r){const n=e.exec(r);return n!==null?n[0]:null}},l(Ef,"Lexer"),Ef);function fu(t){return nL(t)?t.LABEL:t.name}function nL(t){return Ui(t.LABEL)&&t.LABEL!==""}zi.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",zi.NA=/NOT_APPLICABLE/,l(fu,"tokenLabel"),l(nL,"hasTokenLabel");function Jd(t){return zee(t)}function zee(t){const e=t.pattern,r={};if(r.name=t.name,wr(e)||(r.PATTERN=e),Bt(t,"parent"))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return Bt(t,"categories")&&(r.CATEGORIES=t.categories),bm([r]),Bt(t,"label")&&(r.LABEL=t.label),Bt(t,"group")&&(r.GROUP=t.group),Bt(t,"pop_mode")&&(r.POP_MODE=t.pop_mode),Bt(t,"push_mode")&&(r.PUSH_MODE=t.push_mode),Bt(t,"longer_alt")&&(r.LONGER_ALT=t.longer_alt),Bt(t,"line_breaks")&&(r.LINE_BREAKS=t.line_breaks),Bt(t,"start_chars_hint")&&(r.START_CHARS_HINT=t.start_chars_hint),r}l(Jd,"createToken"),l(zee,"createTokenInternal");var nc=Jd({name:"EOF",pattern:zi.NA});function Yv(t,e,r,n,i,a,s,o){return{image:e,startOffset:r,endOffset:n,startLine:i,endLine:a,startColumn:s,endColumn:o,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function iL(t,e){return xm(t,e)}bm([nc]),l(Yv,"createTokenInstance"),l(iL,"tokenMatcher");var zd={buildMismatchTokenMessage:({expected:t,actual:e,previous:r,ruleName:n})=>`Expecting ${nL(t)?`--> ${fu(t)} <--`:`token of type --> ${t.name} <--`} but found --> '${e.image}' <--`,buildNotAllInputParsedMessage:({firstRedundant:t,ruleName:e})=>"Redundant input, expecting EOF but found: "+t.image,buildNoViableAltMessage({expectedPathsPerAlt:t,actual:e,previous:r,customUserDescription:n,ruleName:i}){const a="Expecting: ",s=`
but found: '`+Es(e).image+"'";if(n)return a+n+s;{const o=Cn(t,((h,d)=>h.concat(d)),[]),u=nt(o,(h=>`[${nt(h,(d=>fu(d))).join(", ")}]`));return a+`one of these possible Token sequences:
${nt(u,((h,d)=>`  ${d+1}. ${h}`)).join(`
`)}`+s}},buildEarlyExitMessage({expectedIterationPaths:t,actual:e,customUserDescription:r,ruleName:n}){const i="Expecting: ",a=`
but found: '`+Es(e).image+"'";return r?i+r+a:i+`expecting at least one iteration which starts with one of these possible Token sequences::
  <${nt(t,(s=>`[${nt(s,(o=>fu(o))).join(",")}]`)).join(" ,")}>`+a}};Object.freeze(zd);var jxe={buildRuleNotFoundError:(t,e)=>"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+t.name+"<-"},lu={buildDuplicateFoundError(t,e){function r(h){return h instanceof Wr?h.terminalType.name:h instanceof qi?h.nonTerminalName:""}l(r,"getExtraProductionArgument");const n=t.name,i=Es(e),a=i.idx,s=gs(i),o=r(i);let u=`->${s}${a>0?a:""}<- ${o?`with argument: ->${o}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${n}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return u=u.replace(/[ \t]+/g," "),u=u.replace(/\s\s+/g,`
`),u},buildNamespaceConflictError:t=>`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${t.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`,buildAlternationPrefixAmbiguityError(t){const e=nt(t.prefixPath,(n=>fu(n))).join(", "),r=t.alternation.idx===0?"":t.alternation.idx;return`Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${r}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(t){const e=nt(t.prefixPath,(i=>fu(i))).join(", "),r=t.alternation.idx===0?"":t.alternation.idx;let n=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(" ,")}> in <OR${r}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return n+=`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,n},buildEmptyRepetitionError(t){let e=gs(t.repetition);return t.repetition.idx!==0&&(e+=t.repetition.idx),`The repetition <${e}> within Rule <${t.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError:t=>"deprecated",buildEmptyAlternationError:t=>`Ambiguous empty alternative: <${t.emptyChoiceIdx+1}> in <OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`,buildTooManyAlternativesError:t=>`An Alternation cannot have more than 256 alternatives:
<OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
 has ${t.alternation.definition.length+1} alternatives.`,buildLeftRecursionError(t){const e=t.topLevelRule.name;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${`${e} --> ${nt(t.leftRecursionPath,(r=>r.name)).concat([e]).join(" --> ")}`}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError:t=>"deprecated",buildDuplicateRuleNameError(t){let e;return e=t.topLevelRule instanceof mm?t.topLevelRule.name:t.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${t.grammarName}<-`}};function Gee(t,e){const r=new Wxe(t,e);return r.resolveRefs(),r.errors}l(Gee,"resolveGrammar");var Jr,Da,_f,Wxe=(_f=class extends ym{constructor(e,r){super(),this.nameToTopRule=e,this.errMsgProvider=r,this.errors=[]}resolveRefs(){Ne(Nr(this.nameToTopRule),(e=>{this.currTopLevel=e,e.accept(this)}))}visitNonTerminal(e){const r=this.nameToTopRule[e.nonTerminalName];if(r)e.referencedRule=r;else{const n=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:n,type:ji.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}},l(_f,"GastRefResolverVisitor"),_f),Cf,Yxe=(Cf=class extends Cw{constructor(e,r){super(),this.topProd=e,this.path=r,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=Gn(this.path.ruleStack).reverse(),this.occurrenceStack=Gn(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,r=[]){this.found||super.walk(e,r)}walkProdRef(e,r,n){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){const i=r.concat(n);this.updateExpectedNext(),this.walk(e.referencedRule,i)}}updateExpectedNext(){yr(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}},l(Cf,"AbstractNextPossibleTokensWalker"),Cf),Sf,Vxe=(Sf=class extends Yxe{constructor(e,r){super(e,r),this.path=r,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,r,n){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){const i=r.concat(n),a=new ua({definition:i});this.possibleTokTypes=vm(a),this.found=!0}}},l(Sf,"NextAfterTokenWalker"),Sf),Af,Aw=(Af=class extends Cw{constructor(e,r){super(),this.topRule=e,this.occurrence=r,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}},l(Af,"AbstractNextTerminalAfterProductionWalker"),Af),Lf,Hxe=(Lf=class extends Aw{walkMany(e,r,n){if(e.idx===this.occurrence){const i=Es(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof Wr&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkMany(e,r,n)}},l(Lf,"NextTerminalAfterManyWalker"),Lf),Nf,JM=(Nf=class extends Aw{walkManySep(e,r,n){if(e.idx===this.occurrence){const i=Es(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof Wr&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkManySep(e,r,n)}},l(Nf,"NextTerminalAfterManySepWalker"),Nf),If,Xxe=(If=class extends Aw{walkAtLeastOne(e,r,n){if(e.idx===this.occurrence){const i=Es(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof Wr&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOne(e,r,n)}},l(If,"NextTerminalAfterAtLeastOneWalker"),If),Rf,eD=(Rf=class extends Aw{walkAtLeastOneSep(e,r,n){if(e.idx===this.occurrence){const i=Es(r.concat(n));this.result.isEndOfRule=i===void 0,i instanceof Wr&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOneSep(e,r,n)}},l(Rf,"NextTerminalAfterAtLeastOneSepWalker"),Rf);function $5(t,e,r=[]){r=Gn(r);let n=[],i=0;function a(o){return o.concat(ai(t,i+1))}function s(o){const u=$5(a(o),e,r);return n.concat(u)}for(l(a,"remainingPathWith"),l(s,"getAlternativesForProd");r.length<e&&i<t.length;){const o=t[i];if(o instanceof ua||o instanceof qi)return s(o.definition);if(o instanceof hi)n=s(o.definition);else{if(o instanceof _a)return s(o.definition.concat([new ln({definition:o.definition})]));if(o instanceof Ca)return s([new ua({definition:o.definition}),new ln({definition:[new Wr({terminalType:o.separator})].concat(o.definition)})]);if(o instanceof ga){const u=o.definition.concat([new ln({definition:[new Wr({terminalType:o.separator})].concat(o.definition)})]);n=s(u)}else if(o instanceof ln){const u=o.definition.concat([new ln({definition:o.definition})]);n=s(u)}else{if(o instanceof ma)return Ne(o.definition,(u=>{yr(u.definition)===!1&&(n=s(u.definition))})),n;if(!(o instanceof Wr))throw Error("non exhaustive match");r.push(o.terminalType)}}i++}return n.push({partialPath:r,suffixDef:ai(t,i)}),n}function aL(t,e,r,n){const i="EXIT_NONE_TERMINAL",a=[i],s="EXIT_ALTERNATIVE";let o=!1;const u=e.length,h=u-n-1,d=[],p=[];for(p.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!yr(p);){const f=p.pop();if(f===s){o&&ao(p).idx<=h&&p.pop();continue}const g=f.def,m=f.idx,y=f.ruleStack,v=f.occurrenceStack;if(yr(g))continue;const x=g[0];if(x===i){const b={idx:m,def:ai(g),ruleStack:I2(y),occurrenceStack:I2(v)};p.push(b)}else if(x instanceof Wr)if(m<u-1){const b=m+1;if(r(e[b],x.terminalType)){const w={idx:b,def:ai(g),ruleStack:y,occurrenceStack:v};p.push(w)}}else{if(m!==u-1)throw Error("non exhaustive match");d.push({nextTokenType:x.terminalType,nextTokenOccurrence:x.idx,ruleStack:y,occurrenceStack:v}),o=!0}else if(x instanceof qi){const b=Gn(y);b.push(x.nonTerminalName);const w=Gn(v);w.push(x.idx);const T={idx:m,def:x.definition.concat(a,ai(g)),ruleStack:b,occurrenceStack:w};p.push(T)}else if(x instanceof hi){const b={idx:m,def:ai(g),ruleStack:y,occurrenceStack:v};p.push(b),p.push(s);const w={idx:m,def:x.definition.concat(ai(g)),ruleStack:y,occurrenceStack:v};p.push(w)}else if(x instanceof _a){const b=new ln({definition:x.definition,idx:x.idx}),w={idx:m,def:x.definition.concat([b],ai(g)),ruleStack:y,occurrenceStack:v};p.push(w)}else if(x instanceof Ca){const b=new Wr({terminalType:x.separator}),w=new ln({definition:[b].concat(x.definition),idx:x.idx}),T={idx:m,def:x.definition.concat([w],ai(g)),ruleStack:y,occurrenceStack:v};p.push(T)}else if(x instanceof ga){const b={idx:m,def:ai(g),ruleStack:y,occurrenceStack:v};p.push(b),p.push(s);const w=new Wr({terminalType:x.separator}),T=new ln({definition:[w].concat(x.definition),idx:x.idx}),k={idx:m,def:x.definition.concat([T],ai(g)),ruleStack:y,occurrenceStack:v};p.push(k)}else if(x instanceof ln){const b={idx:m,def:ai(g),ruleStack:y,occurrenceStack:v};p.push(b),p.push(s);const w=new ln({definition:x.definition,idx:x.idx}),T={idx:m,def:x.definition.concat([w],ai(g)),ruleStack:y,occurrenceStack:v};p.push(T)}else if(x instanceof ma)for(let b=x.definition.length-1;b>=0;b--){const w={idx:m,def:x.definition[b].definition.concat(ai(g)),ruleStack:y,occurrenceStack:v};p.push(w),p.push(s)}else if(x instanceof ua)p.push({idx:m,def:x.definition.concat(ai(g)),ruleStack:y,occurrenceStack:v});else{if(!(x instanceof mm))throw Error("non exhaustive match");p.push(Uee(x,m,y,v))}}return d}function Uee(t,e,r,n){const i=Gn(r);i.push(t.name);const a=Gn(n);return a.push(1),{idx:e,def:t.definition,ruleStack:i,occurrenceStack:a}}function Lw(t){if(t instanceof hi||t==="Option")return Jr.OPTION;if(t instanceof ln||t==="Repetition")return Jr.REPETITION;if(t instanceof _a||t==="RepetitionMandatory")return Jr.REPETITION_MANDATORY;if(t instanceof Ca||t==="RepetitionMandatoryWithSeparator")return Jr.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof ga||t==="RepetitionWithSeparator")return Jr.REPETITION_WITH_SEPARATOR;if(t instanceof ma||t==="Alternation")return Jr.ALTERNATION;throw Error("non exhaustive match")}function vC(t){const{occurrence:e,rule:r,prodType:n,maxLookahead:i}=t,a=Lw(n);return a===Jr.ALTERNATION?Vv(e,r,i):Hv(e,r,a,i)}function qee(t,e,r,n,i,a){const s=Vv(t,e,r);return a(s,n,oL(s)?U2:xm,i)}function jee(t,e,r,n,i,a){const s=Hv(t,e,i,r),o=oL(s)?U2:xm;return a(s[0],o,n)}function Wee(t,e,r,n){const i=t.length,a=xs(t,(s=>xs(s,(o=>o.length===1))));if(e)return function(s){const o=nt(s,(u=>u.GATE));for(let u=0;u<i;u++){const h=t[u],d=h.length,p=o[u];if(p===void 0||p.call(this)!==!1)e:for(let f=0;f<d;f++){const g=h[f],m=g.length;for(let y=0;y<m;y++){const v=this.LA(y+1);if(r(v,g[y])===!1)continue e}return u}}};if(a&&!n){const s=nt(t,(u=>Hn(u))),o=Cn(s,((u,h,d)=>(Ne(h,(p=>{Bt(u,p.tokenTypeIdx)||(u[p.tokenTypeIdx]=d),Ne(p.categoryMatches,(f=>{Bt(u,f)||(u[f]=d)}))})),u)),{});return function(){const u=this.LA(1);return o[u.tokenTypeIdx]}}return function(){for(let s=0;s<i;s++){const o=t[s],u=o.length;e:for(let h=0;h<u;h++){const d=o[h],p=d.length;for(let f=0;f<p;f++){const g=this.LA(f+1);if(r(g,d[f])===!1)continue e}return s}}}}function Yee(t,e,r){const n=xs(t,(a=>a.length===1)),i=t.length;if(n&&!r){const a=Hn(t);if(a.length===1&&yr(a[0].categoryMatches)){const s=a[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===s}}{const s=Cn(a,((o,u,h)=>(o[u.tokenTypeIdx]=!0,Ne(u.categoryMatches,(d=>{o[d]=!0})),o)),[]);return function(){const o=this.LA(1);return s[o.tokenTypeIdx]===!0}}}return function(){e:for(let a=0;a<i;a++){const s=t[a],o=s.length;for(let u=0;u<o;u++){const h=this.LA(u+1);if(e(h,s[u])===!1)continue e}return!0}return!1}}l($5,"possiblePathsFrom"),l(aL,"nextPossibleTokensAfter"),l(Uee,"expandTopLevelRule"),(Da=Jr||(Jr={}))[Da.OPTION=0]="OPTION",Da[Da.REPETITION=1]="REPETITION",Da[Da.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",Da[Da.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",Da[Da.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",Da[Da.ALTERNATION=5]="ALTERNATION",l(Lw,"getProdType"),l(vC,"getLookaheadPaths"),l(qee,"buildLookaheadFuncForOr"),l(jee,"buildLookaheadFuncForOptionalProd"),l(Wee,"buildAlternativesLookAheadFunc"),l(Yee,"buildSingleAlternativeLookaheadFunction");var Mf,Kxe=(Mf=class extends Cw{constructor(e,r,n){super(),this.topProd=e,this.targetOccurrence=r,this.targetProdType=n}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,r,n,i){return e.idx===this.targetOccurrence&&this.targetProdType===r&&(this.restDef=n.concat(i),!0)}walkOption(e,r,n){this.checkIsTarget(e,Jr.OPTION,r,n)||super.walkOption(e,r,n)}walkAtLeastOne(e,r,n){this.checkIsTarget(e,Jr.REPETITION_MANDATORY,r,n)||super.walkOption(e,r,n)}walkAtLeastOneSep(e,r,n){this.checkIsTarget(e,Jr.REPETITION_MANDATORY_WITH_SEPARATOR,r,n)||super.walkOption(e,r,n)}walkMany(e,r,n){this.checkIsTarget(e,Jr.REPETITION,r,n)||super.walkOption(e,r,n)}walkManySep(e,r,n){this.checkIsTarget(e,Jr.REPETITION_WITH_SEPARATOR,r,n)||super.walkOption(e,r,n)}},l(Mf,"RestDefinitionFinderWalker"),Mf),Df,Vee=(Df=class extends ym{constructor(e,r,n){super(),this.targetOccurrence=e,this.targetProdType=r,this.targetRef=n,this.result=[]}checkIsTarget(e,r){e.idx!==this.targetOccurrence||this.targetProdType!==r||this.targetRef!==void 0&&e!==this.targetRef||(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,Jr.OPTION)}visitRepetition(e){this.checkIsTarget(e,Jr.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,Jr.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,Jr.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,Jr.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,Jr.ALTERNATION)}},l(Df,"InsideDefinitionFinderVisitor"),Df);function xC(t){const e=new Array(t);for(let r=0;r<t;r++)e[r]=[];return e}function Hb(t){let e=[""];for(let r=0;r<t.length;r++){const n=t[r],i=[];for(let a=0;a<e.length;a++){const s=e[a];i.push(s+"_"+n.tokenTypeIdx);for(let o=0;o<n.categoryMatches.length;o++){const u="_"+n.categoryMatches[o];i.push(s+u)}}e=i}return e}function Hee(t,e,r){for(let n=0;n<t.length;n++){if(n===r)continue;const i=t[n];for(let a=0;a<e.length;a++)if(i[e[a]]===!0)return!1}return!0}function sL(t,e){const r=nt(t,(s=>$5([s],1))),n=xC(r.length),i=nt(r,(s=>{const o={};return Ne(s,(u=>{const h=Hb(u.partialPath);Ne(h,(d=>{o[d]=!0}))})),o}));let a=r;for(let s=1;s<=e;s++){const o=a;a=xC(o.length);for(let u=0;u<o.length;u++){const h=o[u];for(let d=0;d<h.length;d++){const p=h[d].partialPath,f=h[d].suffixDef,g=Hb(p);if(Hee(i,g,u)||yr(f)||p.length===e){const m=n[u];if(F5(m,p)===!1){m.push(p);for(let y=0;y<g.length;y++){const v=g[y];i[u][v]=!0}}}else{const m=$5(f,s+1,p);a[u]=a[u].concat(m),Ne(m,(y=>{const v=Hb(y.partialPath);Ne(v,(x=>{i[u][x]=!0}))}))}}}}return n}function Vv(t,e,r,n){const i=new Vee(t,Jr.ALTERNATION,n);return e.accept(i),sL(i.result,r)}function Hv(t,e,r,n){const i=new Vee(t,r);e.accept(i);const a=i.result,s=new Kxe(e,t,r).startWalking();return sL([new ua({definition:a}),new ua({definition:s})],n)}function F5(t,e){e:for(let r=0;r<t.length;r++){const n=t[r];if(n.length===e.length){for(let i=0;i<n.length;i++){const a=e[i],s=n[i];if(!(a===s||s.categoryMatchesMap[a.tokenTypeIdx]!==void 0))continue e}return!0}}return!1}function Xee(t,e){return t.length<e.length&&xs(t,((r,n)=>{const i=e[n];return r===i||i.categoryMatchesMap[r.tokenTypeIdx]}))}function oL(t){return xs(t,(e=>xs(e,(r=>xs(r,(n=>yr(n.categoryMatches)))))))}function Kee(t){const e=t.lookaheadStrategy.validate({rules:t.rules,tokenTypes:t.tokenTypes,grammarName:t.grammarName});return nt(e,(r=>Object.assign({type:ji.CUSTOM_LOOKAHEAD_VALIDATION},r)))}function Zee(t,e,r,n){const i=ka(t,(u=>Qee(u,r))),a=lte(t,e,r),s=ka(t,(u=>ite(u,r))),o=ka(t,(u=>ete(u,t,n,r)));return i.concat(a,s,o)}function Qee(t,e){const r=new Zxe;t.accept(r);const n=r.allProductions,i=R2e(n,Jee),a=Is(i,(s=>s.length>1));return nt(Nr(a),(s=>{const o=Es(s),u=e.buildDuplicateFoundError(t,s),h=gs(o),d={message:u,type:ji.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:h,occurrence:o.idx},p=lL(o);return p&&(d.parameter=p),d}))}function Jee(t){return`${gs(t)}_#_${t.idx}_#_${lL(t)}`}function lL(t){return t instanceof Wr?t.terminalType.name:t instanceof qi?t.nonTerminalName:""}l(xC,"initializeArrayOfArrays"),l(Hb,"pathToHashKeys"),l(Hee,"isUniquePrefixHash"),l(sL,"lookAheadSequenceFromAlternatives"),l(Vv,"getLookaheadPathsForOr"),l(Hv,"getLookaheadPathsForOptionalProd"),l(F5,"containsPath"),l(Xee,"isStrictPrefixOfPath"),l(oL,"areTokenCategoriesNotUsed"),l(Kee,"validateLookahead"),l(Zee,"validateGrammar"),l(Qee,"validateDuplicateProductions"),l(Jee,"identifyProductionForDuplicates"),l(lL,"getExtraProductionArgument");var Of,Zxe=(Of=class extends ym{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}},l(Of,"OccurrenceValidationCollector"),Of);function ete(t,e,r,n){const i=[];if(Cn(e,((a,s)=>s.name===t.name?a+1:a),0)>1){const a=n.buildDuplicateRuleNameError({topLevelRule:t,grammarName:r});i.push({message:a,type:ji.DUPLICATE_RULE_NAME,ruleName:t.name})}return i}function tte(t,e,r){const n=[];let i;return Wi(e,t)||(i=`Invalid rule override, rule: ->${t}<- cannot be overridden in the grammar: ->${r}<-as it is not defined in any of the super grammars `,n.push({message:i,type:ji.INVALID_RULE_OVERRIDE,ruleName:t})),n}function cL(t,e,r,n=[]){const i=[],a=Jy(e.definition);if(yr(a))return[];{const s=t.name;Wi(a,t)&&i.push({message:r.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:n}),type:ji.LEFT_RECURSION,ruleName:s});const o=aw(a,n.concat([t])),u=ka(o,(h=>{const d=Gn(n);return d.push(h),cL(t,h,r,d)}));return i.concat(u)}}function Jy(t){let e=[];if(yr(t))return e;const r=Es(t);if(r instanceof qi)e.push(r.referencedRule);else if(r instanceof ua||r instanceof hi||r instanceof _a||r instanceof Ca||r instanceof ga||r instanceof ln)e=e.concat(Jy(r.definition));else if(r instanceof ma)e=Hn(nt(r.definition,(a=>Jy(a.definition))));else if(!(r instanceof Wr))throw Error("non exhaustive match");const n=G2(r),i=t.length>1;if(n&&i){const a=ai(t);return e.concat(Jy(a))}return e}l(ete,"validateRuleDoesNotAlreadyExist"),l(tte,"validateRuleIsOverridden"),l(cL,"validateNoLeftRecursion"),l(Jy,"getFirstNoneTerminal");var Pf,uL=(Pf=class extends ym{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}},l(Pf,"OrCollector"),Pf);function rte(t,e){const r=new uL;t.accept(r);const n=r.alternations;return ka(n,(i=>{const a=I2(i.definition);return ka(a,((s,o)=>{const u=aL([s],[],xm,1);return yr(u)?[{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:i,emptyChoiceIdx:o}),type:ji.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:i.idx,alternative:o+1}]:[]}))}))}function nte(t,e,r){const n=new uL;t.accept(n);let i=n.alternations;return i=sw(i,(a=>a.ignoreAmbiguities===!0)),ka(i,(a=>{const s=a.idx,o=a.maxLookahead||e,u=Vv(s,t,o,a),h=ste(u,a,t,r),d=ote(u,a,t,r);return h.concat(d)}))}l(rte,"validateEmptyOrAlternative"),l(nte,"validateAmbiguousAlternationAlternatives");var Bf,Qxe=(Bf=class extends ym{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}},l(Bf,"RepetitionCollector"),Bf);function ite(t,e){const r=new uL;t.accept(r);const n=r.alternations;return ka(n,(i=>i.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:i}),type:ji.TOO_MANY_ALTS,ruleName:t.name,occurrence:i.idx}]:[]))}function ate(t,e,r){const n=[];return Ne(t,(i=>{const a=new Qxe;i.accept(a);const s=a.allProductions;Ne(s,(o=>{const u=Lw(o),h=o.maxLookahead||e,d=Hv(o.idx,i,u,h)[0];if(yr(Hn(d))){const p=r.buildEmptyRepetitionError({topLevelRule:i,repetition:o});n.push({message:p,type:ji.NO_NON_EMPTY_LOOKAHEAD,ruleName:i.name})}}))})),n}function ste(t,e,r,n){const i=[],a=Cn(t,((s,o,u)=>(e.definition[u].ignoreAmbiguities===!0||Ne(o,(h=>{const d=[u];Ne(t,((p,f)=>{u!==f&&F5(p,h)&&e.definition[f].ignoreAmbiguities!==!0&&d.push(f)})),d.length>1&&!F5(i,h)&&(i.push(h),s.push({alts:d,path:h}))})),s)),[]);return nt(a,(s=>{const o=nt(s.alts,(u=>u+1));return{message:n.buildAlternationAmbiguityError({topLevelRule:r,alternation:e,ambiguityIndices:o,prefixPath:s.path}),type:ji.AMBIGUOUS_ALTS,ruleName:r.name,occurrence:e.idx,alternatives:s.alts}}))}function ote(t,e,r,n){const i=Cn(t,((a,s,o)=>{const u=nt(s,(h=>({idx:o,path:h})));return a.concat(u)}),[]);return Ov(ka(i,(a=>{if(e.definition[a.idx].ignoreAmbiguities===!0)return[];const s=a.idx,o=a.path,u=un(i,(h=>e.definition[h.idx].ignoreAmbiguities!==!0&&h.idx<s&&Xee(h.path,o)));return nt(u,(h=>{const d=[h.idx+1,s+1],p=e.idx===0?"":e.idx;return{message:n.buildAlternationPrefixAmbiguityError({topLevelRule:r,alternation:e,ambiguityIndices:d,prefixPath:h.path}),type:ji.AMBIGUOUS_PREFIX_ALTS,ruleName:r.name,occurrence:p,alternatives:d}}))})))}function lte(t,e,r){const n=[],i=nt(e,(a=>a.name));return Ne(t,(a=>{const s=a.name;if(Wi(i,s)){const o=r.buildNamespaceConflictError(a);n.push({message:o,type:ji.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:s})}})),n}function cte(t){const e=tw(t,{errMsgProvider:jxe}),r={};return Ne(t.rules,(n=>{r[n.name]=n})),Gee(r,e.errMsgProvider)}function ute(t){return Zee((t=tw(t,{errMsgProvider:lu})).rules,t.tokenTypes,t.errMsgProvider,t.grammarName)}l(ite,"validateTooManyAlts"),l(ate,"validateSomeNonEmptyLookaheadPath"),l(ste,"checkAlternativesAmbiguities"),l(ote,"checkPrefixAlternativesAmbiguities"),l(lte,"checkTerminalAndNoneTerminalsNameSpace"),l(cte,"resolveGrammar"),l(ute,"validateGrammar");var hte=["MismatchedTokenException","NoViableAltException","EarlyExitException","NotAllInputParsedException"];function q2(t){return Wi(hte,t.name)}Object.freeze(hte),l(q2,"isRecognitionException");var $f,Nw=($f=class extends Error{constructor(e,r){super(e),this.token=r,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},l($f,"RecognitionException"),$f),Ff,dte=(Ff=class extends Nw{constructor(e,r,n){super(e,r),this.previousToken=n,this.name="MismatchedTokenException"}},l(Ff,"MismatchedTokenException"),Ff),zf,Jxe=(zf=class extends Nw{constructor(e,r,n){super(e,r),this.previousToken=n,this.name="NoViableAltException"}},l(zf,"NoViableAltException"),zf),Gf,ebe=(Gf=class extends Nw{constructor(e,r){super(e,r),this.name="NotAllInputParsedException"}},l(Gf,"NotAllInputParsedException"),Gf),Uf,tbe=(Uf=class extends Nw{constructor(e,r,n){super(e,r),this.previousToken=n,this.name="EarlyExitException"}},l(Uf,"EarlyExitException"),Uf),oT={},qf,rbe=(qf=class extends Error{constructor(e){super(e),this.name="InRuleRecoveryException"}},l(qf,"InRuleRecoveryException"),qf),jf,nbe=(jf=class{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=Bt(e,"recoveryEnabled")?e.recoveryEnabled:Zo.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=pte)}getTokenToInsert(e){const r=Yv(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return r.isInsertedInRecovery=!0,r}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,r,n,i){const a=this.findReSyncTokenType(),s=this.exportLexerState(),o=[];let u=!1;const h=this.LA(1);let d=this.LA(1);const p=l((()=>{const f=this.LA(0),g=this.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:h,previous:f,ruleName:this.getCurrRuleFullName()}),m=new dte(g,h,this.LA(0));m.resyncedTokens=I2(o),this.SAVE_ERROR(m)}),"generateErrorMessage");for(;!u;){if(this.tokenMatcher(d,i))return void p();if(n.call(this))return p(),void e.apply(this,r);this.tokenMatcher(d,a)?u=!0:(d=this.SKIP_TOKEN(),this.addToResyncTokens(d,o))}this.importLexerState(s)}shouldInRepetitionRecoveryBeTried(e,r,n){return n!==!1&&!this.tokenMatcher(this.LA(1),e)&&!this.isBackTracking()&&!this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,r))}getFollowsForInRuleRecovery(e,r){const n=this.getCurrentGrammarPath(e,r);return this.getNextPossibleTokenTypes(n)}tryInRuleRecovery(e,r){if(this.canRecoverWithSingleTokenInsertion(e,r))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){const n=this.SKIP_TOKEN();return this.consumeToken(),n}throw new rbe("sad sad panda")}canPerformInRuleRecovery(e,r){return this.canRecoverWithSingleTokenInsertion(e,r)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,r){if(!this.canTokenTypeBeInsertedInRecovery(e)||yr(r))return!1;const n=this.LA(1);return jo(r,(i=>this.tokenMatcher(n,i)))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){const r=this.getCurrFollowKey(),n=this.getFollowSetFromFollowKey(r);return Wi(n,e)}findReSyncTokenType(){const e=this.flattenFollowSet();let r=this.LA(1),n=2;for(;;){const i=jo(e,(a=>iL(r,a)));if(i!==void 0)return i;r=this.LA(n),n++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return oT;const e=this.getLastExplicitRuleShortName(),r=this.getLastExplicitRuleOccurrenceIndex(),n=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:r,inRule:this.shortRuleNameToFullName(n)}}buildFullFollowKeyStack(){const e=this.RULE_STACK,r=this.RULE_OCCURRENCE_STACK;return nt(e,((n,i)=>i===0?oT:{ruleName:this.shortRuleNameToFullName(n),idxInCallingRule:r[i],inRule:this.shortRuleNameToFullName(e[i-1])}))}flattenFollowSet(){const e=nt(this.buildFullFollowKeyStack(),(r=>this.getFollowSetFromFollowKey(r)));return Hn(e)}getFollowSetFromFollowKey(e){if(e===oT)return[nc];const r=e.ruleName+e.idxInCallingRule+"_~IN~_"+e.inRule;return this.resyncFollows[r]}addToResyncTokens(e,r){return this.tokenMatcher(e,nc)||r.push(e),r}reSyncTo(e){const r=[];let n=this.LA(1);for(;this.tokenMatcher(n,e)===!1;)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,r);return I2(r)}attemptInRepetitionRecovery(e,r,n,i,a,s,o){}getCurrentGrammarPath(e,r){return{ruleStack:this.getHumanReadableRuleStack(),occurrenceStack:Gn(this.RULE_OCCURRENCE_STACK),lastTok:e,lastTokOccurrence:r}}getHumanReadableRuleStack(){return nt(this.RULE_STACK,(e=>this.shortRuleNameToFullName(e)))}},l(jf,"Recoverable"),jf);function pte(t,e,r,n,i,a,s){const o=this.getKeyForAutomaticLookahead(n,i);let u=this.firstAfterRepMap[o];if(u===void 0){const f=this.getCurrRuleFullName();u=new a(this.getGAstProductions()[f],i).startWalking(),this.firstAfterRepMap[o]=u}let h=u.token,d=u.occurrence;const p=u.isEndOfRule;this.RULE_STACK.length===1&&p&&h===void 0&&(h=nc,d=1),h!==void 0&&d!==void 0&&this.shouldInRepetitionRecoveryBeTried(h,d,s)&&this.tryInRepetitionRecovery(t,e,r,h)}l(pte,"attemptInRepetitionRecovery");function Xb(t,e,r){return r|e|t}l(Xb,"getKeyForAutomaticLookahead");var Wf,hL=(Wf=class{constructor(e){var r;this.maxLookahead=(r=e?.maxLookahead)!==null&&r!==void 0?r:Zo.maxLookahead}validate(e){const r=this.validateNoLeftRecursion(e.rules);if(yr(r)){const n=this.validateEmptyOrAlternatives(e.rules),i=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),a=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...r,...n,...i,...a]}return r}validateNoLeftRecursion(e){return ka(e,(r=>cL(r,r,lu)))}validateEmptyOrAlternatives(e){return ka(e,(r=>rte(r,lu)))}validateAmbiguousAlternationAlternatives(e,r){return ka(e,(n=>nte(n,r,lu)))}validateSomeNonEmptyLookaheadPath(e,r){return ate(e,r,lu)}buildLookaheadForAlternation(e){return qee(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,Wee)}buildLookaheadForOptional(e){return jee(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,Lw(e.prodType),Yee)}},l(Wf,"LLkLookaheadStrategy"),Wf),Yf,ibe=(Yf=class{initLooksAhead(e){this.dynamicTokensEnabled=Bt(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:Zo.dynamicTokensEnabled,this.maxLookahead=Bt(e,"maxLookahead")?e.maxLookahead:Zo.maxLookahead,this.lookaheadStrategy=Bt(e,"lookaheadStrategy")?e.lookaheadStrategy:new hL({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){Ne(e,(r=>{this.TRACE_INIT(`${r.name} Rule Lookahead`,(()=>{const{alternation:n,repetition:i,option:a,repetitionMandatory:s,repetitionMandatoryWithSeparator:o,repetitionWithSeparator:u}=fte(r);Ne(n,(h=>{const d=h.idx===0?"":h.idx;this.TRACE_INIT(`${gs(h)}${d}`,(()=>{const p=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:h.idx,rule:r,maxLookahead:h.maxLookahead||this.maxLookahead,hasPredicates:h.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),f=Xb(this.fullRuleNameToShort[r.name],256,h.idx);this.setLaFuncCache(f,p)}))})),Ne(i,(h=>{this.computeLookaheadFunc(r,h.idx,768,"Repetition",h.maxLookahead,gs(h))})),Ne(a,(h=>{this.computeLookaheadFunc(r,h.idx,512,"Option",h.maxLookahead,gs(h))})),Ne(s,(h=>{this.computeLookaheadFunc(r,h.idx,1024,"RepetitionMandatory",h.maxLookahead,gs(h))})),Ne(o,(h=>{this.computeLookaheadFunc(r,h.idx,1536,"RepetitionMandatoryWithSeparator",h.maxLookahead,gs(h))})),Ne(u,(h=>{this.computeLookaheadFunc(r,h.idx,1280,"RepetitionWithSeparator",h.maxLookahead,gs(h))}))}))}))}computeLookaheadFunc(e,r,n,i,a,s){this.TRACE_INIT(`${s}${r===0?"":r}`,(()=>{const o=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:r,rule:e,maxLookahead:a||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:i}),u=Xb(this.fullRuleNameToShort[e.name],n,r);this.setLaFuncCache(u,o)}))}getKeyForAutomaticLookahead(e,r){return Xb(this.getLastExplicitRuleShortName(),e,r)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,r){this.lookAheadFuncsCache.set(e,r)}},l(Yf,"LooksAhead"),Yf),Vf,Px=new(Vf=class extends ym{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}},l(Vf,"DslMethodsCollectorVisitor"),Vf);function fte(t){Px.reset(),t.accept(Px);const e=Px.dslMethods;return Px.reset(),e}function bC(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset)}function wC(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}function gte(t,e,r){t.children[r]===void 0?t.children[r]=[e]:t.children[r].push(e)}function mte(t,e,r){t.children[e]===void 0?t.children[e]=[r]:t.children[e].push(r)}l(fte,"collectMethods"),l(bC,"setNodeLocationOnlyOffset"),l(wC,"setNodeLocationFull"),l(gte,"addTerminalToCst"),l(mte,"addNoneTerminalToCst");var kC,Bx;function dL(t,e){Object.defineProperty(t,"name",{enumerable:!1,configurable:!0,writable:!1,value:e})}function yte(t,e){const r=Dn(t),n=r.length;for(let i=0;i<n;i++){const a=t[r[i]],s=a.length;for(let o=0;o<s;o++){const u=a[o];u.tokenTypeIdx===void 0&&this[u.name](u.children,e)}}}function vte(t,e){const r=l((function(){}),"derivedConstructor");dL(r,t+"BaseSemantics");const n={visit:l((function(i,a){if(rr(i)&&(i=i[0]),!wr(i))return this[i.name](i.children,a)}),"visit"),validateVisitor:l((function(){const i=bte(this,e);if(!yr(i)){const a=nt(i,(s=>s.msg));throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${a.join(`

`).replace(/\n/g,`
	`)}`)}}),"validateVisitor")};return r.prototype=n,r.prototype.constructor=r,r._RULE_NAMES=e,r}function xte(t,e,r){const n=l((function(){}),"derivedConstructor");dL(n,t+"BaseSemanticsWithDefaults");const i=Object.create(r.prototype);return Ne(e,(a=>{i[a]=yte})),n.prototype=i,n.prototype.constructor=n,n}function bte(t,e){return wte(t,e)}function wte(t,e){const r=un(e,(i=>Ja(t[i])===!1)),n=nt(r,(i=>({msg:`Missing visitor method: <${i}> on ${t.constructor.name} CST Visitor.`,type:kC.MISSING_METHOD,methodName:i})));return Ov(n)}l(dL,"defineNameProp"),l(yte,"defaultVisit"),l(vte,"createBaseSemanticVisitorConstructor"),l(xte,"createBaseVisitorConstructorWithDefaults"),(Bx=kC||(kC={}))[Bx.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",Bx[Bx.MISSING_METHOD=1]="MISSING_METHOD",l(bte,"validateVisitor"),l(wte,"validateMissingCstMethods");var Hf,abe=(Hf=class{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=Bt(e,"nodeLocationTracking")?e.nodeLocationTracking:Zo.nodeLocationTracking,this.outputCst)if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=wC,this.setNodeLocationFromNode=wC,this.cstPostRule=Ln,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=Ln,this.setNodeLocationFromNode=Ln,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=bC,this.setNodeLocationFromNode=bC,this.cstPostRule=Ln,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=Ln,this.setNodeLocationFromNode=Ln,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else{if(!/none/i.test(this.nodeLocationTracking))throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`);this.setNodeLocationFromToken=Ln,this.setNodeLocationFromNode=Ln,this.cstPostRule=Ln,this.setInitialNodeLocation=Ln}else this.cstInvocationStateUpdate=Ln,this.cstFinallyStateUpdate=Ln,this.cstPostTerminal=Ln,this.cstPostNonTerminal=Ln,this.cstPostRule=Ln}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){const r=this.LA(1);e.location={startOffset:r.startOffset,startLine:r.startLine,startColumn:r.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){const r={name:e,children:Object.create(null)};this.setInitialNodeLocation(r),this.CST_STACK.push(r)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){const r=this.LA(0),n=e.location;n.startOffset<=r.startOffset?(n.endOffset=r.endOffset,n.endLine=r.endLine,n.endColumn=r.endColumn):(n.startOffset=NaN,n.startLine=NaN,n.startColumn=NaN)}cstPostRuleOnlyOffset(e){const r=this.LA(0),n=e.location;n.startOffset<=r.startOffset?n.endOffset=r.endOffset:n.startOffset=NaN}cstPostTerminal(e,r){const n=this.CST_STACK[this.CST_STACK.length-1];gte(n,r,e),this.setNodeLocationFromToken(n.location,r)}cstPostNonTerminal(e,r){const n=this.CST_STACK[this.CST_STACK.length-1];mte(n,r,e),this.setNodeLocationFromNode(n.location,e.location)}getBaseCstVisitorConstructor(){if(wr(this.baseCstVisitorConstructor)){const e=vte(this.className,Dn(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(wr(this.baseCstVisitorWithDefaultsConstructor)){const e=xte(this.className,Dn(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){const e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}},l(Hf,"TreeBuilder"),Hf),Xf,sbe=(Xf=class{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):z5}LA(e){const r=this.currIdx+e;return r<0||this.tokVectorLength<=r?z5:this.tokVector[r]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}},l(Xf,"LexerAdapter"),Xf),Kf,obe=(Kf=class{ACTION(e){return e.call(this)}consume(e,r,n){return this.consumeInternal(r,e,n)}subrule(e,r,n){return this.subruleInternal(r,e,n)}option(e,r){return this.optionInternal(r,e)}or(e,r){return this.orInternal(r,e)}many(e,r){return this.manyInternal(e,r)}atLeastOne(e,r){return this.atLeastOneInternal(e,r)}CONSUME(e,r){return this.consumeInternal(e,0,r)}CONSUME1(e,r){return this.consumeInternal(e,1,r)}CONSUME2(e,r){return this.consumeInternal(e,2,r)}CONSUME3(e,r){return this.consumeInternal(e,3,r)}CONSUME4(e,r){return this.consumeInternal(e,4,r)}CONSUME5(e,r){return this.consumeInternal(e,5,r)}CONSUME6(e,r){return this.consumeInternal(e,6,r)}CONSUME7(e,r){return this.consumeInternal(e,7,r)}CONSUME8(e,r){return this.consumeInternal(e,8,r)}CONSUME9(e,r){return this.consumeInternal(e,9,r)}SUBRULE(e,r){return this.subruleInternal(e,0,r)}SUBRULE1(e,r){return this.subruleInternal(e,1,r)}SUBRULE2(e,r){return this.subruleInternal(e,2,r)}SUBRULE3(e,r){return this.subruleInternal(e,3,r)}SUBRULE4(e,r){return this.subruleInternal(e,4,r)}SUBRULE5(e,r){return this.subruleInternal(e,5,r)}SUBRULE6(e,r){return this.subruleInternal(e,6,r)}SUBRULE7(e,r){return this.subruleInternal(e,7,r)}SUBRULE8(e,r){return this.subruleInternal(e,8,r)}SUBRULE9(e,r){return this.subruleInternal(e,9,r)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,r,n=G5){if(Wi(this.definedRulesNames,e)){const a={message:lu.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:ji.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(a)}this.definedRulesNames.push(e);const i=this.defineRule(e,r,n);return this[e]=i,i}OVERRIDE_RULE(e,r,n=G5){const i=tte(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(i);const a=this.defineRule(e,r,n);return this[e]=a,a}BACKTRACK(e,r){return function(){this.isBackTrackingStack.push(1);const n=this.saveRecogState();try{return e.apply(this,r),!0}catch(i){if(q2(i))return!1;throw i}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return J7(Nr(this.gastProductionsCache))}},l(Kf,"RecognizerApi"),Kf),Zf,lbe=(Zf=class{initRecognizerEngine(e,r){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=U2,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},Bt(r,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(rr(e)){if(yr(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(rr(e))this.tokensMap=Cn(e,((a,s)=>(a[s.name]=s,a)),{});else if(Bt(e,"modes")&&xs(Hn(Nr(e.modes)),Fee)){const a=Hn(Nr(e.modes)),s=NA(a);this.tokensMap=Cn(s,((o,u)=>(o[u.name]=u,o)),{})}else{if(!oa(e))throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap=Gn(e)}this.tokensMap.EOF=nc;const n=Bt(e,"modes")?Hn(Nr(e.modes)):Nr(e),i=xs(n,(a=>yr(a.categoryMatches)));this.tokenMatcher=i?U2:xm,bm(Nr(this.tokensMap))}defineRule(e,r,n){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const i=Bt(n,"resyncEnabled")?n.resyncEnabled:G5.resyncEnabled,a=Bt(n,"recoveryValueFunc")?n.recoveryValueFunc:G5.recoveryValueFunc,s=this.ruleShortNameIdx<<12;let o;return this.ruleShortNameIdx++,this.shortRuleNameToFull[s]=e,this.fullRuleNameToShort[e]=s,o=this.outputCst===!0?l((function(...u){try{this.ruleInvocationStateUpdate(s,e,this.subruleIdx),r.apply(this,u);const h=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(h),h}catch(h){return this.invokeRuleCatch(h,i,a)}finally{this.ruleFinallyStateUpdate()}}),"invokeRuleWithTry"):l((function(...u){try{return this.ruleInvocationStateUpdate(s,e,this.subruleIdx),r.apply(this,u)}catch(h){return this.invokeRuleCatch(h,i,a)}finally{this.ruleFinallyStateUpdate()}}),"invokeRuleWithTryCst"),Object.assign(o,{ruleName:e,originalGrammarAction:r})}invokeRuleCatch(e,r,n){const i=this.RULE_STACK.length===1,a=r&&!this.isBackTracking()&&this.recoveryEnabled;if(q2(e)){const s=e;if(a){const o=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(o)){if(s.resyncedTokens=this.reSyncTo(o),this.outputCst){const u=this.CST_STACK[this.CST_STACK.length-1];return u.recoveredNode=!0,u}return n(e)}if(this.outputCst){const u=this.CST_STACK[this.CST_STACK.length-1];u.recoveredNode=!0,s.partialCstResult=u}throw s}if(i)return this.moveToTerminatedState(),n(e);throw s}throw e}optionInternal(e,r){const n=this.getKeyForAutomaticLookahead(512,r);return this.optionInternalLogic(e,r,n)}optionInternalLogic(e,r,n){let i,a=this.getLaFuncFromCache(n);if(typeof e!="function"){i=e.DEF;const s=e.GATE;if(s!==void 0){const o=a;a=l((()=>s.call(this)&&o.call(this)),"lookAheadFunc")}}else i=e;if(a.call(this)===!0)return i.call(this)}atLeastOneInternal(e,r){const n=this.getKeyForAutomaticLookahead(1024,e);return this.atLeastOneInternalLogic(e,r,n)}atLeastOneInternalLogic(e,r,n){let i,a=this.getLaFuncFromCache(n);if(typeof r!="function"){i=r.DEF;const s=r.GATE;if(s!==void 0){const o=a;a=l((()=>s.call(this)&&o.call(this)),"lookAheadFunc")}}else i=r;if(a.call(this)!==!0)throw this.raiseEarlyExitException(e,Jr.REPETITION_MANDATORY,r.ERR_MSG);{let s=this.doSingleRepetition(i);for(;a.call(this)===!0&&s===!0;)s=this.doSingleRepetition(i)}this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,r],a,1024,e,Xxe)}atLeastOneSepFirstInternal(e,r){const n=this.getKeyForAutomaticLookahead(1536,e);this.atLeastOneSepFirstInternalLogic(e,r,n)}atLeastOneSepFirstInternalLogic(e,r,n){const i=r.DEF,a=r.SEP;if(this.getLaFuncFromCache(n).call(this)!==!0)throw this.raiseEarlyExitException(e,Jr.REPETITION_MANDATORY_WITH_SEPARATOR,r.ERR_MSG);{i.call(this);const s=l((()=>this.tokenMatcher(this.LA(1),a)),"separatorLookAheadFunc");for(;this.tokenMatcher(this.LA(1),a)===!0;)this.CONSUME(a),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,a,s,i,eD],s,1536,e,eD)}}manyInternal(e,r){const n=this.getKeyForAutomaticLookahead(768,e);return this.manyInternalLogic(e,r,n)}manyInternalLogic(e,r,n){let i,a=this.getLaFuncFromCache(n);if(typeof r!="function"){i=r.DEF;const o=r.GATE;if(o!==void 0){const u=a;a=l((()=>o.call(this)&&u.call(this)),"lookaheadFunction")}}else i=r;let s=!0;for(;a.call(this)===!0&&s===!0;)s=this.doSingleRepetition(i);this.attemptInRepetitionRecovery(this.manyInternal,[e,r],a,768,e,Hxe,s)}manySepFirstInternal(e,r){const n=this.getKeyForAutomaticLookahead(1280,e);this.manySepFirstInternalLogic(e,r,n)}manySepFirstInternalLogic(e,r,n){const i=r.DEF,a=r.SEP;if(this.getLaFuncFromCache(n).call(this)===!0){i.call(this);const s=l((()=>this.tokenMatcher(this.LA(1),a)),"separatorLookAheadFunc");for(;this.tokenMatcher(this.LA(1),a)===!0;)this.CONSUME(a),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,a,s,i,JM],s,1280,e,JM)}}repetitionSepSecondInternal(e,r,n,i,a){for(;n();)this.CONSUME(r),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,r,n,i,a],n,1536,e,a)}doSingleRepetition(e){const r=this.getLexerPosition();return e.call(this),this.getLexerPosition()>r}orInternal(e,r){const n=this.getKeyForAutomaticLookahead(256,r),i=rr(e)?e:e.DEF,a=this.getLaFuncFromCache(n).call(this,i);if(a!==void 0)return i[a].ALT.call(this);this.raiseNoAltException(r,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const e=this.LA(1),r=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new ebe(r,e))}}subruleInternal(e,r,n){let i;try{const a=n!==void 0?n.ARGS:void 0;return this.subruleIdx=r,i=e.apply(this,a),this.cstPostNonTerminal(i,n!==void 0&&n.LABEL!==void 0?n.LABEL:e.ruleName),i}catch(a){throw this.subruleInternalError(a,n,e.ruleName)}}subruleInternalError(e,r,n){throw q2(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,r!==void 0&&r.LABEL!==void 0?r.LABEL:n),delete e.partialCstResult),e}consumeInternal(e,r,n){let i;try{const a=this.LA(1);this.tokenMatcher(a,e)===!0?(this.consumeToken(),i=a):this.consumeInternalError(e,a,n)}catch(a){i=this.consumeInternalRecovery(e,r,a)}return this.cstPostTerminal(n!==void 0&&n.LABEL!==void 0?n.LABEL:e.name,i),i}consumeInternalError(e,r,n){let i;const a=this.LA(0);throw i=n!==void 0&&n.ERR_MSG?n.ERR_MSG:this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:r,previous:a,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new dte(i,r,a))}consumeInternalRecovery(e,r,n){if(!this.recoveryEnabled||n.name!=="MismatchedTokenException"||this.isBackTracking())throw n;{const i=this.getFollowsForInRuleRecovery(e,r);try{return this.tryInRuleRecovery(e,i)}catch(a){throw a.name==="InRuleRecoveryException"?n:a}}}saveRecogState(){const e=this.errors,r=Gn(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:r,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,r,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(r)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),nc)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}},l(Zf,"RecognizerEngine"),Zf),Qf,cbe=(Qf=class{initErrorHandler(e){this._errors=[],this.errorMessageProvider=Bt(e,"errorMessageProvider")?e.errorMessageProvider:Zo.errorMessageProvider}SAVE_ERROR(e){if(q2(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:Gn(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return Gn(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,r,n){const i=this.getCurrRuleFullName(),a=Hv(e,this.getGAstProductions()[i],r,this.maxLookahead)[0],s=[];for(let u=1;u<=this.maxLookahead;u++)s.push(this.LA(u));const o=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:a,actual:s,previous:this.LA(0),customUserDescription:n,ruleName:i});throw this.SAVE_ERROR(new tbe(o,this.LA(1),this.LA(0)))}raiseNoAltException(e,r){const n=this.getCurrRuleFullName(),i=Vv(e,this.getGAstProductions()[n],this.maxLookahead),a=[];for(let u=1;u<=this.maxLookahead;u++)a.push(this.LA(u));const s=this.LA(0),o=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:i,actual:a,previous:s,customUserDescription:r,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Jxe(o,this.LA(1),s))}},l(Qf,"ErrorHandler"),Qf),Jf,ube=(Jf=class{initContentAssist(){}computeContentAssist(e,r){const n=this.gastProductionsCache[e];if(wr(n))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return aL([n],r,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){const r=Es(e.ruleStack),n=this.getGAstProductions()[r];return new Vxe(n,e).startWalking()}},l(Jf,"ContentAssist"),Jf),Iw={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(Iw);var tD=Math.pow(2,8)-1,kte=Jd({name:"RECORDING_PHASE_TOKEN",pattern:zi.NA});bm([kte]);var Tte=Yv(kte,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(Tte);var hbe={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}},eg,dbe=(eg=class{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",(()=>{for(let e=0;e<10;e++){const r=e>0?e:"";this[`CONSUME${r}`]=function(n,i){return this.consumeInternalRecord(n,e,i)},this[`SUBRULE${r}`]=function(n,i){return this.subruleInternalRecord(n,e,i)},this[`OPTION${r}`]=function(n){return this.optionInternalRecord(n,e)},this[`OR${r}`]=function(n){return this.orInternalRecord(n,e)},this[`MANY${r}`]=function(n){this.manyInternalRecord(e,n)},this[`MANY_SEP${r}`]=function(n){this.manySepFirstInternalRecord(e,n)},this[`AT_LEAST_ONE${r}`]=function(n){this.atLeastOneInternalRecord(e,n)},this[`AT_LEAST_ONE_SEP${r}`]=function(n){this.atLeastOneSepFirstInternalRecord(e,n)}}this.consume=function(e,r,n){return this.consumeInternalRecord(r,e,n)},this.subrule=function(e,r,n){return this.subruleInternalRecord(r,e,n)},this.option=function(e,r){return this.optionInternalRecord(r,e)},this.or=function(e,r){return this.orInternalRecord(r,e)},this.many=function(e,r){this.manyInternalRecord(e,r)},this.atLeastOne=function(e,r){this.atLeastOneInternalRecord(e,r)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD}))}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",(()=>{const e=this;for(let r=0;r<10;r++){const n=r>0?r:"";delete e[`CONSUME${n}`],delete e[`SUBRULE${n}`],delete e[`OPTION${n}`],delete e[`OR${n}`],delete e[`MANY${n}`],delete e[`MANY_SEP${n}`],delete e[`AT_LEAST_ONE${n}`],delete e[`AT_LEAST_ONE_SEP${n}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA}))}ACTION_RECORD(e){}BACKTRACK_RECORD(e,r){return()=>!0}LA_RECORD(e){return z5}topLevelRuleRecord(e,r){try{const n=new mm({definition:[],name:e});return n.name=e,this.recordingProdStack.push(n),r.call(this),this.recordingProdStack.pop(),n}catch(n){if(n.KNOWN_RECORDER_ERROR!==!0)try{n.message=n.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw n}throw n}}optionInternalRecord(e,r){return Uh.call(this,hi,e,r)}atLeastOneInternalRecord(e,r){Uh.call(this,_a,r,e)}atLeastOneSepFirstInternalRecord(e,r){Uh.call(this,Ca,r,e,!0)}manyInternalRecord(e,r){Uh.call(this,ln,r,e)}manySepFirstInternalRecord(e,r){Uh.call(this,ga,r,e,!0)}orInternalRecord(e,r){return Ete.call(this,e,r)}subruleInternalRecord(e,r,n){if(j2(r),!e||Bt(e,"ruleName")===!1){const o=new Error(`<SUBRULE${TC(r)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw o.KNOWN_RECORDER_ERROR=!0,o}const i=ao(this.recordingProdStack),a=e.ruleName,s=new qi({idx:r,nonTerminalName:a,label:n?.LABEL,referencedRule:void 0});return i.definition.push(s),this.outputCst?hbe:Iw}consumeInternalRecord(e,r,n){if(j2(r),!rL(e)){const s=new Error(`<CONSUME${TC(r)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw s.KNOWN_RECORDER_ERROR=!0,s}const i=ao(this.recordingProdStack),a=new Wr({idx:r,terminalType:e,label:n?.LABEL});return i.definition.push(a),Tte}},l(eg,"GastRecorder"),eg);function Uh(t,e,r,n=!1){j2(r);const i=ao(this.recordingProdStack),a=Ja(e)?e:e.DEF,s=new t({definition:[],idx:r});return n&&(s.separator=e.SEP),Bt(e,"MAX_LOOKAHEAD")&&(s.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(s),a.call(this),i.definition.push(s),this.recordingProdStack.pop(),Iw}function Ete(t,e){j2(e);const r=ao(this.recordingProdStack),n=rr(t)===!1,i=n===!1?t:t.DEF,a=new ma({definition:[],idx:e,ignoreAmbiguities:n&&t.IGNORE_AMBIGUITIES===!0});Bt(t,"MAX_LOOKAHEAD")&&(a.maxLookahead=t.MAX_LOOKAHEAD);const s=iQ(i,(o=>Ja(o.GATE)));return a.hasPredicates=s,r.definition.push(a),Ne(i,(o=>{const u=new ua({definition:[]});a.definition.push(u),Bt(o,"IGNORE_AMBIGUITIES")?u.ignoreAmbiguities=o.IGNORE_AMBIGUITIES:Bt(o,"GATE")&&(u.ignoreAmbiguities=!0),this.recordingProdStack.push(u),o.ALT.call(this),this.recordingProdStack.pop()})),Iw}function TC(t){return t===0?"":`${t}`}function j2(t){if(t<0||t>tD){const e=new Error(`Invalid DSL Method idx value: <${t}>
	Idx value must be a none negative value smaller than ${tD+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}l(Uh,"recordProd"),l(Ete,"recordOrProd"),l(TC,"getIdxSuffix"),l(j2,"assertMethodIdxIsValid");var tg,pbe=(tg=class{initPerformanceTracer(e){if(Bt(e,"traceInitPerf")){const r=e.traceInitPerf,n=typeof r=="number";this.traceInitMaxIdent=n?r:1/0,this.traceInitPerf=n?r>0:r}else this.traceInitMaxIdent=0,this.traceInitPerf=Zo.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,r){if(this.traceInitPerf===!0){this.traceInitIndent++;const n=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${n}--> <${e}>`);const{time:i,value:a}=K9(r),s=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&s(`${n}<-- <${e}> time: ${i}ms`),this.traceInitIndent--,a}return r()}},l(tg,"PerformanceTracer"),tg);function _te(t,e){e.forEach((r=>{const n=r.prototype;Object.getOwnPropertyNames(n).forEach((i=>{if(i==="constructor")return;const a=Object.getOwnPropertyDescriptor(n,i);a&&(a.get||a.set)?Object.defineProperty(t.prototype,i,a):t.prototype[i]=r.prototype[i]}))}))}l(_te,"applyMixins");var z5=Yv(nc,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(z5);var ji,Ar,Zo=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:zd,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),G5=Object.freeze({recoveryValueFunc:l((()=>{}),"recoveryValueFunc"),resyncEnabled:!0});function EC(t){return function(){return t}}(Ar=ji||(ji={}))[Ar.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",Ar[Ar.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",Ar[Ar.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",Ar[Ar.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",Ar[Ar.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",Ar[Ar.LEFT_RECURSION=5]="LEFT_RECURSION",Ar[Ar.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",Ar[Ar.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",Ar[Ar.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",Ar[Ar.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",Ar[Ar.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",Ar[Ar.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",Ar[Ar.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",Ar[Ar.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION",l(EC,"EMPTY_ALT");var wu,_C=(wu=class{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",(()=>{let e;this.selfAnalysisDone=!0;const r=this.className;this.TRACE_INIT("toFastProps",(()=>{Z9(this)})),this.TRACE_INIT("Grammar Recording",(()=>{try{this.enableRecording(),Ne(this.definedRulesNames,(i=>{const a=this[i].originalGrammarAction;let s;this.TRACE_INIT(`${i} Rule`,(()=>{s=this.topLevelRuleRecord(i,a)})),this.gastProductionsCache[i]=s}))}finally{this.disableRecording()}}));let n=[];if(this.TRACE_INIT("Grammar Resolving",(()=>{n=cte({rules:Nr(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(n)})),this.TRACE_INIT("Grammar Validations",(()=>{if(yr(n)&&this.skipValidations===!1){const i=ute({rules:Nr(this.gastProductionsCache),tokenTypes:Nr(this.tokensMap),errMsgProvider:lu,grammarName:r}),a=Kee({lookaheadStrategy:this.lookaheadStrategy,rules:Nr(this.gastProductionsCache),tokenTypes:Nr(this.tokensMap),grammarName:r});this.definitionErrors=this.definitionErrors.concat(i,a)}})),yr(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",(()=>{const i=aee(Nr(this.gastProductionsCache));this.resyncFollows=i})),this.TRACE_INIT("ComputeLookaheadFunctions",(()=>{var i,a;(a=(i=this.lookaheadStrategy).initialize)===null||a===void 0||a.call(i,{rules:Nr(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(Nr(this.gastProductionsCache))}))),!wu.DEFER_DEFINITION_ERRORS_HANDLING&&!yr(this.definitionErrors))throw e=nt(this.definitionErrors,(i=>i.message)),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)}))}constructor(e,r){this.definitionErrors=[],this.selfAnalysisDone=!1;const n=this;if(n.initErrorHandler(r),n.initLexerAdapter(),n.initLooksAhead(r),n.initRecognizerEngine(e,r),n.initRecoverable(r),n.initTreeBuilder(r),n.initContentAssist(),n.initGastRecorder(r),n.initPerformanceTracer(r),Bt(r,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=Bt(r,"skipValidations")?r.skipValidations:Zo.skipValidations}},l(wu,"Parser"),wu);_C.DEFER_DEFINITION_ERRORS_HANDLING=!1,_te(_C,[nbe,ibe,abe,sbe,lbe,obe,cbe,ube,dbe,pbe]);var rg,fbe=(rg=class extends _C{constructor(e,r=Zo){const n=Gn(r);n.outputCst=!1,super(e,n)}},l(rg,"EmbeddedActionsParser"),rg);function Qu(t,e,r){return`${t.name}_${e}_${r}`}l(Qu,"buildATNKey");var ng,pL=(ng=class{constructor(e){this.target=e}isEpsilon(){return!1}},l(ng,"AbstractTransition"),ng),ig,fL=(ig=class extends pL{constructor(e,r){super(e),this.tokenType=r}},l(ig,"AtomTransition"),ig),ag,Cte=(ag=class extends pL{constructor(e){super(e)}isEpsilon(){return!0}},l(ag,"EpsilonTransition"),ag),sg,gL=(sg=class extends pL{constructor(e,r,n){super(e),this.rule=r,this.followState=n}isEpsilon(){return!0}},l(sg,"RuleTransition"),sg);function Ste(t){const e={decisionMap:{},decisionStates:[],ruleToStartState:new Map,ruleToStopState:new Map,states:[]};Ate(e,t);const r=t.length;for(let n=0;n<r;n++){const i=t[n],a=yc(e,i,i);a!==void 0&&Fte(e,i,a)}return e}function Ate(t,e){const r=e.length;for(let n=0;n<r;n++){const i=e[n],a=Fn(t,i,void 0,{type:2}),s=Fn(t,i,void 0,{type:7});a.stop=s,t.ruleToStartState.set(i,a),t.ruleToStopState.set(i,s)}}function mL(t,e,r){return r instanceof Wr?Rw(t,e,r.terminalType,r):r instanceof qi?$te(t,e,r):r instanceof ma?Mte(t,e,r):r instanceof hi?Dte(t,e,r):r instanceof ln?Lte(t,e,r):r instanceof ga?Nte(t,e,r):r instanceof _a?Ite(t,e,r):r instanceof Ca?Rte(t,e,r):yc(t,e,r)}function Lte(t,e,r){const n=Fn(t,e,r,{type:5});return al(t,n),vL(t,e,r,ph(t,e,n,r,yc(t,e,r)))}function Nte(t,e,r){const n=Fn(t,e,r,{type:5});return al(t,n),vL(t,e,r,ph(t,e,n,r,yc(t,e,r)),Rw(t,e,r.separator,r))}function Ite(t,e,r){const n=Fn(t,e,r,{type:4});return al(t,n),yL(t,e,r,ph(t,e,n,r,yc(t,e,r)))}function Rte(t,e,r){const n=Fn(t,e,r,{type:4});return al(t,n),yL(t,e,r,ph(t,e,n,r,yc(t,e,r)),Rw(t,e,r.separator,r))}function Mte(t,e,r){const n=Fn(t,e,r,{type:1});al(t,n);const i=nt(r.definition,(a=>mL(t,e,a)));return ph(t,e,n,r,...i)}function Dte(t,e,r){const n=Fn(t,e,r,{type:1});return al(t,n),Ote(t,e,r,ph(t,e,n,r,yc(t,e,r)))}function yc(t,e,r){const n=un(nt(r.definition,(i=>mL(t,e,i))),(i=>i!==void 0));return n.length===1?n[0]:n.length===0?void 0:Bte(t,n)}function yL(t,e,r,n,i){const a=n.left,s=n.right,o=Fn(t,e,r,{type:11});al(t,o);const u=Fn(t,e,r,{type:12});return a.loopback=o,u.loopback=o,t.decisionMap[Qu(e,i?"RepetitionMandatoryWithSeparator":"RepetitionMandatory",r.idx)]=o,vn(s,o),i===void 0?(vn(o,a),vn(o,u)):(vn(o,u),vn(o,i.left),vn(i.right,a)),{left:a,right:u}}function vL(t,e,r,n,i){const a=n.left,s=n.right,o=Fn(t,e,r,{type:10});al(t,o);const u=Fn(t,e,r,{type:12}),h=Fn(t,e,r,{type:9});return o.loopback=h,u.loopback=h,vn(o,a),vn(o,u),vn(s,h),i!==void 0?(vn(h,u),vn(h,i.left),vn(i.right,a)):vn(h,o),t.decisionMap[Qu(e,i?"RepetitionWithSeparator":"Repetition",r.idx)]=o,{left:o,right:u}}function Ote(t,e,r,n){const i=n.left;return vn(i,n.right),t.decisionMap[Qu(e,"Option",r.idx)]=i,n}function al(t,e){return t.decisionStates.push(e),e.decision=t.decisionStates.length-1,e.decision}function ph(t,e,r,n,...i){const a=Fn(t,e,n,{type:8,start:r});r.end=a;for(const o of i)o!==void 0?(vn(r,o.left),vn(o.right,a)):vn(r,a);const s={left:r,right:a};return t.decisionMap[Qu(e,Pte(n),n.idx)]=r,s}function Pte(t){if(t instanceof ma)return"Alternation";if(t instanceof hi)return"Option";if(t instanceof ln)return"Repetition";if(t instanceof ga)return"RepetitionWithSeparator";if(t instanceof _a)return"RepetitionMandatory";if(t instanceof Ca)return"RepetitionMandatoryWithSeparator";throw new Error("Invalid production type encountered")}function Bte(t,e){const r=e.length;for(let a=0;a<r-1;a++){const s=e[a];let o;s.left.transitions.length===1&&(o=s.left.transitions[0]);const u=o instanceof gL,h=o,d=e[a+1].left;s.left.type===1&&s.right.type===1&&o!==void 0&&(u&&h.followState===s.right||o.target===s.right)?(u?h.followState=d:o.target=d,zte(t,s.right)):vn(s.right,d)}const n=e[0],i=e[r-1];return{left:n.left,right:i.right}}function Rw(t,e,r,n){const i=Fn(t,e,n,{type:1}),a=Fn(t,e,n,{type:1});return Mw(i,new fL(a,r)),{left:i,right:a}}function $te(t,e,r){const n=r.referencedRule,i=t.ruleToStartState.get(n),a=Fn(t,e,r,{type:1}),s=Fn(t,e,r,{type:1});return Mw(a,new gL(i,n,s)),{left:a,right:s}}function Fte(t,e,r){const n=t.ruleToStartState.get(e);vn(n,r.left);const i=t.ruleToStopState.get(e);return vn(r.right,i),{left:n,right:i}}function vn(t,e){Mw(t,new Cte(e))}function Fn(t,e,r,n){const i=Object.assign({atn:t,production:r,epsilonOnlyTransitions:!1,rule:e,transitions:[],nextTokenWithinRule:[],stateNumber:t.states.length},n);return t.states.push(i),i}function Mw(t,e){t.transitions.length===0&&(t.epsilonOnlyTransitions=e.isEpsilon()),t.transitions.push(e)}function zte(t,e){t.states.splice(t.states.indexOf(e),1)}l(Ste,"createATN"),l(Ate,"createRuleStartAndStopATNStates"),l(mL,"atom"),l(Lte,"repetition"),l(Nte,"repetitionSep"),l(Ite,"repetitionMandatory"),l(Rte,"repetitionMandatorySep"),l(Mte,"alternation"),l(Dte,"option"),l(yc,"block"),l(yL,"plus"),l(vL,"star"),l(Ote,"optional"),l(al,"defineDecisionState"),l(ph,"makeAlts"),l(Pte,"getProdType"),l(Bte,"makeBlock"),l(Rw,"tokenRef"),l($te,"ruleRef"),l(Fte,"buildRuleHandle"),l(vn,"epsilon"),l(Fn,"newState"),l(Mw,"addTransition"),l(zte,"removeState");var U5={},og,CC=(og=class{constructor(){this.map={},this.configs=[]}get size(){return this.configs.length}finalize(){this.map={}}add(e){const r=xL(e);r in this.map||(this.map[r]=this.configs.length,this.configs.push(e))}get elements(){return this.configs}get alts(){return nt(this.configs,(e=>e.alt))}get key(){let e="";for(const r in this.map)e+=r+":";return e}},l(og,"ATNConfigSet"),og);function xL(t,e=!0){return`${e?`a${t.alt}`:""}s${t.state.stateNumber}:${t.stack.map((r=>r.stateNumber.toString())).join("_")}`}function Gte(t,e){const r={};return n=>{const i=n.toString();let a=r[i];return a!==void 0||(a={atnStartState:t,decision:e,states:{}},r[i]=a),a}}l(xL,"getATNConfigKey"),l(Gte,"createDFACache");var rD,lT,nD,$x,xr,sr,Fx,iD,cT,aD,sD,oD,uT,lD,hT,cD,zx,uD,hD,dD,Gx,kh,Th,dT,Eh,pD,pT,fT,gT,mT,yT,fD,gD,vT,mD,xT,Pm,yD,Gr,vD,xD,bD,wD,kD,TD,ED,_D,CD,Ux,SD,AD,LD,ND,bT,ID,RD,Or,MD,DD,OD,PD,BD,yo,qx,$D,FD,zD,GD,UD,qD,jD,WD,Kr,YD,Bs,VD,HD,XD,KD,ZD,wT,kT,QD,JD,eO,tO,rO,nO,iO,aO,sO,oO,lg,Ute=(lg=class{constructor(){this.predicates=[]}is(e){return e>=this.predicates.length||this.predicates[e]}set(e,r){this.predicates[e]=r}toString(){let e="";const r=this.predicates.length;for(let n=0;n<r;n++)e+=this.predicates[n]===!0?"1":"0";return e}},l(lg,"PredicateSet"),lg),lO=new Ute,cg,gbe=(cg=class extends hL{constructor(e){var r;super(),this.logging=(r=e?.logging)!==null&&r!==void 0?r:n=>console.log(n)}initialize(e){this.atn=Ste(e.rules),this.dfas=qte(this.atn)}validateAmbiguousAlternationAlternatives(){return[]}validateEmptyOrAlternatives(){return[]}buildLookaheadForAlternation(e){const{prodOccurrence:r,rule:n,hasPredicates:i,dynamicTokensEnabled:a}=e,s=this.dfas,o=this.logging,u=Qu(n,"Alternation",r),h=this.atn.decisionMap[u].decision,d=nt(vC({maxLookahead:1,occurrence:r,prodType:"Alternation",rule:n}),(p=>nt(p,(f=>f[0]))));if(SC(d,!1)&&!a){const p=Cn(d,((f,g,m)=>(Ne(g,(y=>{y&&(f[y.tokenTypeIdx]=m,Ne(y.categoryMatches,(v=>{f[v]=m})))})),f)),{});return i?function(f){var g;const m=this.LA(1),y=p[m.tokenTypeIdx];if(f!==void 0&&y!==void 0){const v=(g=f[y])===null||g===void 0?void 0:g.GATE;if(v!==void 0&&v.call(this)===!1)return}return y}:function(){const f=this.LA(1);return p[f.tokenTypeIdx]}}return i?function(p){const f=new Ute,g=p===void 0?0:p.length;for(let y=0;y<g;y++){const v=p?.[y].GATE;f.set(y,v===void 0||v.call(this))}const m=Kb.call(this,s,h,f,o);return typeof m=="number"?m:void 0}:function(){const p=Kb.call(this,s,h,lO,o);return typeof p=="number"?p:void 0}}buildLookaheadForOptional(e){const{prodOccurrence:r,rule:n,prodType:i,dynamicTokensEnabled:a}=e,s=this.dfas,o=this.logging,u=Qu(n,i,r),h=this.atn.decisionMap[u].decision,d=nt(vC({maxLookahead:1,occurrence:r,prodType:i,rule:n}),(p=>nt(p,(f=>f[0]))));if(SC(d)&&d[0][0]&&!a){const p=d[0],f=Hn(p);if(f.length===1&&yr(f[0].categoryMatches)){const g=f[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===g}}{const g=Cn(f,((m,y)=>(y!==void 0&&(m[y.tokenTypeIdx]=!0,Ne(y.categoryMatches,(v=>{m[v]=!0}))),m)),{});return function(){const m=this.LA(1);return g[m.tokenTypeIdx]===!0}}}return function(){const p=Kb.call(this,s,h,lO,o);return typeof p!="object"&&p===0}}},l(cg,"LLStarLookaheadStrategy"),cg);function SC(t,e=!0){const r=new Set;for(const n of t){const i=new Set;for(const a of n){if(a===void 0){if(e)break;return!1}const s=[a.tokenTypeIdx].concat(a.categoryMatches);for(const o of s)if(r.has(o)){if(!i.has(o))return!1}else r.add(o),i.add(o)}}return!0}function qte(t){const e=t.decisionStates.length,r=Array(e);for(let n=0;n<e;n++)r[n]=Gte(t.decisionStates[n],n);return r}function Kb(t,e,r,n){const i=t[e](r);let a=i.start;return a===void 0&&(a=wL(i,bL(ere(i.atnStartState))),i.start=a),jte.apply(this,[i,a,r,n])}function jte(t,e,r,n){let i=e,a=1;const s=[];let o=this.LA(a++);for(;;){let u=Kte(i,o);if(u===void 0&&(u=Wte.apply(this,[t,i,o,a,r,n])),u===U5)return Xte(s,i,o);if(u.isAcceptState===!0)return u.prediction;i=u,s.push(o),o=this.LA(a++)}}function Wte(t,e,r,n,i,a){const s=Zte(e.configs,r,i);if(s.size===0)return AC(t,e,r,U5),U5;let o=bL(s);const u=Jte(s,i);if(u!==void 0)o.isAcceptState=!0,o.prediction=u,o.configs.uniqueAlt=u;else if(ire(s)){const h=j0(s.alts);o.isAcceptState=!0,o.prediction=h,o.configs.uniqueAlt=h,Yte.apply(this,[t,n,s.alts,a])}return o=AC(t,e,r,o),o}function Yte(t,e,r,n){const i=[];for(let s=1;s<=e;s++)i.push(this.LA(s).tokenType);const a=t.atnStartState;n(Vte({topLevelRule:a.rule,ambiguityIndices:r,production:a.production,prefixPath:i}))}function Vte(t){const e=nt(t.prefixPath,(i=>fu(i))).join(", "),r=t.production.idx===0?"":t.production.idx;let n=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(", ")}> in <${Hte(t.production)}${r}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return n+=`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,n}function Hte(t){if(t instanceof qi)return"SUBRULE";if(t instanceof hi)return"OPTION";if(t instanceof ma)return"OR";if(t instanceof _a)return"AT_LEAST_ONE";if(t instanceof Ca)return"AT_LEAST_ONE_SEP";if(t instanceof ga)return"MANY_SEP";if(t instanceof ln)return"MANY";if(t instanceof Wr)return"CONSUME";throw Error("non exhaustive match")}function Xte(t,e,r){const n=ka(e.configs.elements,(a=>a.state.transitions)),i=tve(n.filter((a=>a instanceof fL)).map((a=>a.tokenType)),(a=>a.tokenTypeIdx));return{actualToken:r,possibleTokenTypes:i,tokenPath:t}}function Kte(t,e){return t.edges[e.tokenTypeIdx]}function Zte(t,e,r){const n=new CC,i=[];for(const s of t.elements){if(r.is(s.alt)===!1)continue;if(s.state.type===7){i.push(s);continue}const o=s.state.transitions.length;for(let u=0;u<o;u++){const h=Qte(s.state.transitions[u],e);h!==void 0&&n.add({state:h,alt:s.alt,stack:s.stack})}}let a;if(i.length===0&&n.size===1&&(a=n),a===void 0){a=new CC;for(const s of n.elements)W2(s,a)}if(i.length>0&&!rre(a))for(const s of i)a.add(s);return a}function Qte(t,e){if(t instanceof fL&&iL(e,t.tokenType))return t.target}function Jte(t,e){let r;for(const n of t.elements)if(e.is(n.alt)===!0){if(r===void 0)r=n.alt;else if(r!==n.alt)return}return r}function bL(t){return{configs:t,edges:{},isAcceptState:!1,prediction:-1}}function AC(t,e,r,n){return n=wL(t,n),e.edges[r.tokenTypeIdx]=n,n}function wL(t,e){if(e===U5)return e;const r=e.configs.key,n=t.states[r];return n!==void 0?n:(e.configs.finalize(),t.states[r]=e,e)}function ere(t){const e=new CC,r=t.transitions.length;for(let n=0;n<r;n++)W2({state:t.transitions[n].target,alt:n,stack:[]},e);return e}function W2(t,e){const r=t.state;if(r.type===7){if(t.stack.length>0){const i=[...t.stack];W2({state:i.pop(),alt:t.alt,stack:i},e)}else e.add(t);return}r.epsilonOnlyTransitions||e.add(t);const n=r.transitions.length;for(let i=0;i<n;i++){const a=tre(t,r.transitions[i]);a!==void 0&&W2(a,e)}}function tre(t,e){if(e instanceof Cte)return{state:e.target,alt:t.alt,stack:t.stack};if(e instanceof gL){const r=[...t.stack,e.followState];return{state:e.target,alt:t.alt,stack:r}}}function rre(t){for(const e of t.elements)if(e.state.type===7)return!0;return!1}function nre(t){for(const e of t.elements)if(e.state.type!==7)return!1;return!0}function ire(t){if(nre(t))return!0;const e=are(t.elements);return sre(e)&&!ore(e)}function are(t){const e=new Map;for(const r of t){const n=xL(r,!1);let i=e.get(n);i===void 0&&(i={},e.set(n,i)),i[r.alt]=!0}return e}function sre(t){for(const e of Array.from(t.values()))if(Object.keys(e).length>1)return!0;return!1}function ore(t){for(const e of Array.from(t.values()))if(Object.keys(e).length===1)return!0;return!1}l(SC,"isLL1Sequence"),l(qte,"initATNSimulator"),l(Kb,"adaptivePredict"),l(jte,"performLookahead"),l(Wte,"computeLookaheadTarget"),l(Yte,"reportLookaheadAmbiguity"),l(Vte,"buildAmbiguityError"),l(Hte,"getProductionDslName"),l(Xte,"buildAdaptivePredictError"),l(Kte,"getExistingTargetState"),l(Zte,"computeReachSet"),l(Qte,"getReachableTarget"),l(Jte,"getUniqueAlt"),l(bL,"newDFAState"),l(AC,"addDFAEdge"),l(wL,"addDFAState"),l(ere,"computeStartState"),l(W2,"closure"),l(tre,"getEpsilonTarget"),l(rre,"hasConfigInRuleStopState"),l(nre,"allConfigsInRuleStopStates"),l(ire,"hasConflictTerminatingPrediction"),l(are,"getConflictingAltSets"),l(sre,"hasConflictingAltSet"),l(ore,"hasStateAssociatedWithOneAlt"),(function(t){function e(r){return typeof r=="string"}l(e,"is"),t.is=e})(rD||(rD={})),(function(t){function e(r){return typeof r=="string"}l(e,"is"),t.is=e})(lT||(lT={})),(function(t){function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647,l(e,"is"),t.is=e})(nD||(nD={})),(function(t){function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}t.MIN_VALUE=0,t.MAX_VALUE=2147483647,l(e,"is"),t.is=e})($x||($x={})),(function(t){function e(n,i){return n===Number.MAX_VALUE&&(n=$x.MAX_VALUE),i===Number.MAX_VALUE&&(i=$x.MAX_VALUE),{line:n,character:i}}function r(n){let i=n;return Oe.objectLiteral(i)&&Oe.uinteger(i.line)&&Oe.uinteger(i.character)}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(xr||(xr={})),(function(t){function e(n,i,a,s){if(Oe.uinteger(n)&&Oe.uinteger(i)&&Oe.uinteger(a)&&Oe.uinteger(s))return{start:xr.create(n,i),end:xr.create(a,s)};if(xr.is(n)&&xr.is(i))return{start:n,end:i};throw new Error(`Range#create called with invalid arguments[${n}, ${i}, ${a}, ${s}]`)}function r(n){let i=n;return Oe.objectLiteral(i)&&xr.is(i.start)&&xr.is(i.end)}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(sr||(sr={})),(function(t){function e(n,i){return{uri:n,range:i}}function r(n){let i=n;return Oe.objectLiteral(i)&&sr.is(i.range)&&(Oe.string(i.uri)||Oe.undefined(i.uri))}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(Fx||(Fx={})),(function(t){function e(n,i,a,s){return{targetUri:n,targetRange:i,targetSelectionRange:a,originSelectionRange:s}}function r(n){let i=n;return Oe.objectLiteral(i)&&sr.is(i.targetRange)&&Oe.string(i.targetUri)&&sr.is(i.targetSelectionRange)&&(sr.is(i.originSelectionRange)||Oe.undefined(i.originSelectionRange))}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(iD||(iD={})),(function(t){function e(n,i,a,s){return{red:n,green:i,blue:a,alpha:s}}function r(n){const i=n;return Oe.objectLiteral(i)&&Oe.numberRange(i.red,0,1)&&Oe.numberRange(i.green,0,1)&&Oe.numberRange(i.blue,0,1)&&Oe.numberRange(i.alpha,0,1)}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(cT||(cT={})),(function(t){function e(n,i){return{range:n,color:i}}function r(n){const i=n;return Oe.objectLiteral(i)&&sr.is(i.range)&&cT.is(i.color)}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(aD||(aD={})),(function(t){function e(n,i,a){return{label:n,textEdit:i,additionalTextEdits:a}}function r(n){const i=n;return Oe.objectLiteral(i)&&Oe.string(i.label)&&(Oe.undefined(i.textEdit)||Th.is(i))&&(Oe.undefined(i.additionalTextEdits)||Oe.typedArray(i.additionalTextEdits,Th.is))}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(sD||(sD={})),(uT=oD||(oD={})).Comment="comment",uT.Imports="imports",uT.Region="region",(function(t){function e(n,i,a,s,o,u){const h={startLine:n,endLine:i};return Oe.defined(a)&&(h.startCharacter=a),Oe.defined(s)&&(h.endCharacter=s),Oe.defined(o)&&(h.kind=o),Oe.defined(u)&&(h.collapsedText=u),h}function r(n){const i=n;return Oe.objectLiteral(i)&&Oe.uinteger(i.startLine)&&Oe.uinteger(i.startLine)&&(Oe.undefined(i.startCharacter)||Oe.uinteger(i.startCharacter))&&(Oe.undefined(i.endCharacter)||Oe.uinteger(i.endCharacter))&&(Oe.undefined(i.kind)||Oe.string(i.kind))}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(lD||(lD={})),(function(t){function e(n,i){return{location:n,message:i}}function r(n){let i=n;return Oe.defined(i)&&Fx.is(i.location)&&Oe.string(i.message)}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(hT||(hT={})),(zx=cD||(cD={})).Error=1,zx.Warning=2,zx.Information=3,zx.Hint=4,(hD=uD||(uD={})).Unnecessary=1,hD.Deprecated=2,(function(t){function e(r){const n=r;return Oe.objectLiteral(n)&&Oe.string(n.href)}l(e,"is"),t.is=e})(dD||(dD={})),(function(t){function e(n,i,a,s,o,u){let h={range:n,message:i};return Oe.defined(a)&&(h.severity=a),Oe.defined(s)&&(h.code=s),Oe.defined(o)&&(h.source=o),Oe.defined(u)&&(h.relatedInformation=u),h}function r(n){var i;let a=n;return Oe.defined(a)&&sr.is(a.range)&&Oe.string(a.message)&&(Oe.number(a.severity)||Oe.undefined(a.severity))&&(Oe.integer(a.code)||Oe.string(a.code)||Oe.undefined(a.code))&&(Oe.undefined(a.codeDescription)||Oe.string((i=a.codeDescription)===null||i===void 0?void 0:i.href))&&(Oe.string(a.source)||Oe.undefined(a.source))&&(Oe.undefined(a.relatedInformation)||Oe.typedArray(a.relatedInformation,hT.is))}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(Gx||(Gx={})),(function(t){function e(n,i,...a){let s={title:n,command:i};return Oe.defined(a)&&a.length>0&&(s.arguments=a),s}function r(n){let i=n;return Oe.defined(i)&&Oe.string(i.title)&&Oe.string(i.command)}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(kh||(kh={})),(function(t){function e(a,s){return{range:a,newText:s}}function r(a,s){return{range:{start:a,end:a},newText:s}}function n(a){return{range:a,newText:""}}function i(a){const s=a;return Oe.objectLiteral(s)&&Oe.string(s.newText)&&sr.is(s.range)}l(e,"replace"),t.replace=e,l(r,"insert"),t.insert=r,l(n,"del"),t.del=n,l(i,"is"),t.is=i})(Th||(Th={})),(function(t){function e(n,i,a){const s={label:n};return i!==void 0&&(s.needsConfirmation=i),a!==void 0&&(s.description=a),s}function r(n){const i=n;return Oe.objectLiteral(i)&&Oe.string(i.label)&&(Oe.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(Oe.string(i.description)||i.description===void 0)}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(dT||(dT={})),(function(t){function e(r){const n=r;return Oe.string(n)}l(e,"is"),t.is=e})(Eh||(Eh={})),(function(t){function e(a,s,o){return{range:a,newText:s,annotationId:o}}function r(a,s,o){return{range:{start:a,end:a},newText:s,annotationId:o}}function n(a,s){return{range:a,newText:"",annotationId:s}}function i(a){const s=a;return Th.is(s)&&(dT.is(s.annotationId)||Eh.is(s.annotationId))}l(e,"replace"),t.replace=e,l(r,"insert"),t.insert=r,l(n,"del"),t.del=n,l(i,"is"),t.is=i})(pD||(pD={})),(function(t){function e(n,i){return{textDocument:n,edits:i}}function r(n){let i=n;return Oe.defined(i)&&vT.is(i.textDocument)&&Array.isArray(i.edits)}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(pT||(pT={})),(function(t){function e(n,i,a){let s={kind:"create",uri:n};return i===void 0||i.overwrite===void 0&&i.ignoreIfExists===void 0||(s.options=i),a!==void 0&&(s.annotationId=a),s}function r(n){let i=n;return i&&i.kind==="create"&&Oe.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||Oe.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Oe.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Eh.is(i.annotationId))}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(fT||(fT={})),(function(t){function e(n,i,a,s){let o={kind:"rename",oldUri:n,newUri:i};return a===void 0||a.overwrite===void 0&&a.ignoreIfExists===void 0||(o.options=a),s!==void 0&&(o.annotationId=s),o}function r(n){let i=n;return i&&i.kind==="rename"&&Oe.string(i.oldUri)&&Oe.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||Oe.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Oe.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Eh.is(i.annotationId))}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(gT||(gT={})),(function(t){function e(n,i,a){let s={kind:"delete",uri:n};return i===void 0||i.recursive===void 0&&i.ignoreIfNotExists===void 0||(s.options=i),a!==void 0&&(s.annotationId=a),s}function r(n){let i=n;return i&&i.kind==="delete"&&Oe.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||Oe.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||Oe.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||Eh.is(i.annotationId))}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(mT||(mT={})),(function(t){function e(r){let n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every((i=>Oe.string(i.kind)?fT.is(i)||gT.is(i)||mT.is(i):pT.is(i))))}l(e,"is"),t.is=e})(yT||(yT={})),(function(t){function e(n){return{uri:n}}function r(n){let i=n;return Oe.defined(i)&&Oe.string(i.uri)}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(fD||(fD={})),(function(t){function e(n,i){return{uri:n,version:i}}function r(n){let i=n;return Oe.defined(i)&&Oe.string(i.uri)&&Oe.integer(i.version)}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(gD||(gD={})),(function(t){function e(n,i){return{uri:n,version:i}}function r(n){let i=n;return Oe.defined(i)&&Oe.string(i.uri)&&(i.version===null||Oe.integer(i.version))}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(vT||(vT={})),(function(t){function e(n,i,a,s){return{uri:n,languageId:i,version:a,text:s}}function r(n){let i=n;return Oe.defined(i)&&Oe.string(i.uri)&&Oe.string(i.languageId)&&Oe.integer(i.version)&&Oe.string(i.text)}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(mD||(mD={})),(function(t){function e(r){const n=r;return n===t.PlainText||n===t.Markdown}t.PlainText="plaintext",t.Markdown="markdown",l(e,"is"),t.is=e})(xT||(xT={})),(function(t){function e(r){const n=r;return Oe.objectLiteral(r)&&xT.is(n.kind)&&Oe.string(n.value)}l(e,"is"),t.is=e})(Pm||(Pm={})),(Gr=yD||(yD={})).Text=1,Gr.Method=2,Gr.Function=3,Gr.Constructor=4,Gr.Field=5,Gr.Variable=6,Gr.Class=7,Gr.Interface=8,Gr.Module=9,Gr.Property=10,Gr.Unit=11,Gr.Value=12,Gr.Enum=13,Gr.Keyword=14,Gr.Snippet=15,Gr.Color=16,Gr.File=17,Gr.Reference=18,Gr.Folder=19,Gr.EnumMember=20,Gr.Constant=21,Gr.Struct=22,Gr.Event=23,Gr.Operator=24,Gr.TypeParameter=25,(xD=vD||(vD={})).PlainText=1,xD.Snippet=2,(bD||(bD={})).Deprecated=1,(function(t){function e(n,i,a){return{newText:n,insert:i,replace:a}}function r(n){const i=n;return i&&Oe.string(i.newText)&&sr.is(i.insert)&&sr.is(i.replace)}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(wD||(wD={})),(TD=kD||(kD={})).asIs=1,TD.adjustIndentation=2,(function(t){function e(r){const n=r;return n&&(Oe.string(n.detail)||n.detail===void 0)&&(Oe.string(n.description)||n.description===void 0)}l(e,"is"),t.is=e})(ED||(ED={})),(function(t){function e(r){return{label:r}}l(e,"create"),t.create=e})(_D||(_D={})),(function(t){function e(r,n){return{items:r||[],isIncomplete:!!n}}l(e,"create"),t.create=e})(CD||(CD={})),(function(t){function e(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}function r(n){const i=n;return Oe.string(i)||Oe.objectLiteral(i)&&Oe.string(i.language)&&Oe.string(i.value)}l(e,"fromPlainText"),t.fromPlainText=e,l(r,"is"),t.is=r})(Ux||(Ux={})),(function(t){function e(r){let n=r;return!!n&&Oe.objectLiteral(n)&&(Pm.is(n.contents)||Ux.is(n.contents)||Oe.typedArray(n.contents,Ux.is))&&(r.range===void 0||sr.is(r.range))}l(e,"is"),t.is=e})(SD||(SD={})),(function(t){function e(r,n){return n?{label:r,documentation:n}:{label:r}}l(e,"create"),t.create=e})(AD||(AD={})),(function(t){function e(r,n,...i){let a={label:r};return Oe.defined(n)&&(a.documentation=n),Oe.defined(i)?a.parameters=i:a.parameters=[],a}l(e,"create"),t.create=e})(LD||(LD={})),(bT=ND||(ND={})).Text=1,bT.Read=2,bT.Write=3,(function(t){function e(r,n){let i={range:r};return Oe.number(n)&&(i.kind=n),i}l(e,"create"),t.create=e})(ID||(ID={})),(Or=RD||(RD={})).File=1,Or.Module=2,Or.Namespace=3,Or.Package=4,Or.Class=5,Or.Method=6,Or.Property=7,Or.Field=8,Or.Constructor=9,Or.Enum=10,Or.Interface=11,Or.Function=12,Or.Variable=13,Or.Constant=14,Or.String=15,Or.Number=16,Or.Boolean=17,Or.Array=18,Or.Object=19,Or.Key=20,Or.Null=21,Or.EnumMember=22,Or.Struct=23,Or.Event=24,Or.Operator=25,Or.TypeParameter=26,(MD||(MD={})).Deprecated=1,(function(t){function e(r,n,i,a,s){let o={name:r,kind:n,location:{uri:a,range:i}};return s&&(o.containerName=s),o}l(e,"create"),t.create=e})(DD||(DD={})),(function(t){function e(r,n,i,a){return a!==void 0?{name:r,kind:n,location:{uri:i,range:a}}:{name:r,kind:n,location:{uri:i}}}l(e,"create"),t.create=e})(OD||(OD={})),(function(t){function e(n,i,a,s,o,u){let h={name:n,detail:i,kind:a,range:s,selectionRange:o};return u!==void 0&&(h.children=u),h}function r(n){let i=n;return i&&Oe.string(i.name)&&Oe.number(i.kind)&&sr.is(i.range)&&sr.is(i.selectionRange)&&(i.detail===void 0||Oe.string(i.detail))&&(i.deprecated===void 0||Oe.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(PD||(PD={})),(yo=BD||(BD={})).Empty="",yo.QuickFix="quickfix",yo.Refactor="refactor",yo.RefactorExtract="refactor.extract",yo.RefactorInline="refactor.inline",yo.RefactorRewrite="refactor.rewrite",yo.Source="source",yo.SourceOrganizeImports="source.organizeImports",yo.SourceFixAll="source.fixAll",($D=qx||(qx={})).Invoked=1,$D.Automatic=2,(function(t){function e(n,i,a){let s={diagnostics:n};return i!=null&&(s.only=i),a!=null&&(s.triggerKind=a),s}function r(n){let i=n;return Oe.defined(i)&&Oe.typedArray(i.diagnostics,Gx.is)&&(i.only===void 0||Oe.typedArray(i.only,Oe.string))&&(i.triggerKind===void 0||i.triggerKind===qx.Invoked||i.triggerKind===qx.Automatic)}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(FD||(FD={})),(function(t){function e(n,i,a){let s={title:n},o=!0;return typeof i=="string"?(o=!1,s.kind=i):kh.is(i)?s.command=i:s.edit=i,o&&a!==void 0&&(s.kind=a),s}function r(n){let i=n;return i&&Oe.string(i.title)&&(i.diagnostics===void 0||Oe.typedArray(i.diagnostics,Gx.is))&&(i.kind===void 0||Oe.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||kh.is(i.command))&&(i.isPreferred===void 0||Oe.boolean(i.isPreferred))&&(i.edit===void 0||yT.is(i.edit))}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(zD||(zD={})),(function(t){function e(n,i){let a={range:n};return Oe.defined(i)&&(a.data=i),a}function r(n){let i=n;return Oe.defined(i)&&sr.is(i.range)&&(Oe.undefined(i.command)||kh.is(i.command))}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(GD||(GD={})),(function(t){function e(n,i){return{tabSize:n,insertSpaces:i}}function r(n){let i=n;return Oe.defined(i)&&Oe.uinteger(i.tabSize)&&Oe.boolean(i.insertSpaces)}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(UD||(UD={})),(function(t){function e(n,i,a){return{range:n,target:i,data:a}}function r(n){let i=n;return Oe.defined(i)&&sr.is(i.range)&&(Oe.undefined(i.target)||Oe.string(i.target))}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(qD||(qD={})),(function(t){function e(n,i){return{range:n,parent:i}}function r(n){let i=n;return Oe.objectLiteral(i)&&sr.is(i.range)&&(i.parent===void 0||t.is(i.parent))}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(jD||(jD={})),(Kr=WD||(WD={})).namespace="namespace",Kr.type="type",Kr.class="class",Kr.enum="enum",Kr.interface="interface",Kr.struct="struct",Kr.typeParameter="typeParameter",Kr.parameter="parameter",Kr.variable="variable",Kr.property="property",Kr.enumMember="enumMember",Kr.event="event",Kr.function="function",Kr.method="method",Kr.macro="macro",Kr.keyword="keyword",Kr.modifier="modifier",Kr.comment="comment",Kr.string="string",Kr.number="number",Kr.regexp="regexp",Kr.operator="operator",Kr.decorator="decorator",(Bs=YD||(YD={})).declaration="declaration",Bs.definition="definition",Bs.readonly="readonly",Bs.static="static",Bs.deprecated="deprecated",Bs.abstract="abstract",Bs.async="async",Bs.modification="modification",Bs.documentation="documentation",Bs.defaultLibrary="defaultLibrary",(function(t){function e(r){const n=r;return Oe.objectLiteral(n)&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}l(e,"is"),t.is=e})(VD||(VD={})),(function(t){function e(n,i){return{range:n,text:i}}function r(n){const i=n;return i!=null&&sr.is(i.range)&&Oe.string(i.text)}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(HD||(HD={})),(function(t){function e(n,i,a){return{range:n,variableName:i,caseSensitiveLookup:a}}function r(n){const i=n;return i!=null&&sr.is(i.range)&&Oe.boolean(i.caseSensitiveLookup)&&(Oe.string(i.variableName)||i.variableName===void 0)}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(XD||(XD={})),(function(t){function e(n,i){return{range:n,expression:i}}function r(n){const i=n;return i!=null&&sr.is(i.range)&&(Oe.string(i.expression)||i.expression===void 0)}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(KD||(KD={})),(function(t){function e(n,i){return{frameId:n,stoppedLocation:i}}function r(n){const i=n;return Oe.defined(i)&&sr.is(n.stoppedLocation)}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(ZD||(ZD={})),(function(t){function e(r){return r===1||r===2}t.Type=1,t.Parameter=2,l(e,"is"),t.is=e})(wT||(wT={})),(function(t){function e(n){return{value:n}}function r(n){const i=n;return Oe.objectLiteral(i)&&(i.tooltip===void 0||Oe.string(i.tooltip)||Pm.is(i.tooltip))&&(i.location===void 0||Fx.is(i.location))&&(i.command===void 0||kh.is(i.command))}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(kT||(kT={})),(function(t){function e(n,i,a){const s={position:n,label:i};return a!==void 0&&(s.kind=a),s}function r(n){const i=n;return Oe.objectLiteral(i)&&xr.is(i.position)&&(Oe.string(i.label)||Oe.typedArray(i.label,kT.is))&&(i.kind===void 0||wT.is(i.kind))&&i.textEdits===void 0||Oe.typedArray(i.textEdits,Th.is)&&(i.tooltip===void 0||Oe.string(i.tooltip)||Pm.is(i.tooltip))&&(i.paddingLeft===void 0||Oe.boolean(i.paddingLeft))&&(i.paddingRight===void 0||Oe.boolean(i.paddingRight))}l(e,"create"),t.create=e,l(r,"is"),t.is=r})(QD||(QD={})),(function(t){function e(r){return{kind:"snippet",value:r}}l(e,"createSnippet"),t.createSnippet=e})(JD||(JD={})),(function(t){function e(r,n,i,a){return{insertText:r,filterText:n,range:i,command:a}}l(e,"create"),t.create=e})(eO||(eO={})),(function(t){function e(r){return{items:r}}l(e,"create"),t.create=e})(tO||(tO={})),(nO=rO||(rO={})).Invoked=0,nO.Automatic=1,(function(t){function e(r,n){return{range:r,text:n}}l(e,"create"),t.create=e})(iO||(iO={})),(function(t){function e(r,n){return{triggerKind:r,selectedCompletionInfo:n}}l(e,"create"),t.create=e})(aO||(aO={})),(function(t){function e(r){const n=r;return Oe.objectLiteral(n)&&lT.is(n.uri)&&Oe.string(n.name)}l(e,"is"),t.is=e})(sO||(sO={})),(function(t){function e(a,s,o,u){return new mbe(a,s,o,u)}function r(a){let s=a;return!!(Oe.defined(s)&&Oe.string(s.uri)&&(Oe.undefined(s.languageId)||Oe.string(s.languageId))&&Oe.uinteger(s.lineCount)&&Oe.func(s.getText)&&Oe.func(s.positionAt)&&Oe.func(s.offsetAt))}function n(a,s){let o=a.getText(),u=i(s,((d,p)=>{let f=d.range.start.line-p.range.start.line;return f===0?d.range.start.character-p.range.start.character:f})),h=o.length;for(let d=u.length-1;d>=0;d--){let p=u[d],f=a.offsetAt(p.range.start),g=a.offsetAt(p.range.end);if(!(g<=h))throw new Error("Overlapping edit");o=o.substring(0,f)+p.newText+o.substring(g,o.length),h=f}return o}function i(a,s){if(a.length<=1)return a;const o=a.length/2|0,u=a.slice(0,o),h=a.slice(o);i(u,s),i(h,s);let d=0,p=0,f=0;for(;d<u.length&&p<h.length;){let g=s(u[d],h[p]);a[f++]=g<=0?u[d++]:h[p++]}for(;d<u.length;)a[f++]=u[d++];for(;p<h.length;)a[f++]=h[p++];return a}l(e,"create"),t.create=e,l(r,"is"),t.is=r,l(n,"applyEdits"),t.applyEdits=n,l(i,"mergeSort")})(oO||(oO={}));var Oe,ug,mbe=(ug=class{constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){this._content=e.text,this._version=r,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],r=this._content,n=!0;for(let i=0;i<r.length;i++){n&&(e.push(i),n=!1);let a=r.charAt(i);n=a==="\r"||a===`
`,a==="\r"&&i+1<r.length&&r.charAt(i+1)===`
`&&i++}n&&r.length>0&&e.push(r.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return xr.create(0,e);for(;n<i;){let s=Math.floor((n+i)/2);r[s]>e?i=s:n=s+1}let a=n-1;return xr.create(a,e-r[a])}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line],i=e.line+1<r.length?r[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,i),n)}get lineCount(){return this.getLineOffsets().length}},l(ug,"FullTextDocument"),ug);(function(t){const e=Object.prototype.toString;function r(g){return g!==void 0}function n(g){return g===void 0}function i(g){return g===!0||g===!1}function a(g){return e.call(g)==="[object String]"}function s(g){return e.call(g)==="[object Number]"}function o(g,m,y){return e.call(g)==="[object Number]"&&m<=g&&g<=y}function u(g){return e.call(g)==="[object Number]"&&-2147483648<=g&&g<=2147483647}function h(g){return e.call(g)==="[object Number]"&&0<=g&&g<=2147483647}function d(g){return e.call(g)==="[object Function]"}function p(g){return g!==null&&typeof g=="object"}function f(g,m){return Array.isArray(g)&&g.every(m)}l(r,"defined"),t.defined=r,l(n,"undefined"),t.undefined=n,l(i,"boolean"),t.boolean=i,l(a,"string"),t.string=a,l(s,"number"),t.number=s,l(o,"numberRange"),t.numberRange=o,l(u,"integer"),t.integer=u,l(h,"uinteger"),t.uinteger=h,l(d,"func"),t.func=d,l(p,"objectLiteral"),t.objectLiteral=p,l(f,"typedArray"),t.typedArray=f})(Oe||(Oe={}));var hg,lre=(hg=class{constructor(){this.nodeStack=[]}get current(){var e;return(e=this.nodeStack[this.nodeStack.length-1])!==null&&e!==void 0?e:this.rootNode}buildRootNode(e){return this.rootNode=new TL(e),this.rootNode.root=this.rootNode,this.nodeStack=[this.rootNode],this.rootNode}buildCompositeNode(e){const r=new Dw;return r.grammarSource=e,r.root=this.rootNode,this.current.content.push(r),this.nodeStack.push(r),r}buildLeafNode(e,r){const n=new q5(e.startOffset,e.image.length,P2(e),e.tokenType,!r);return n.grammarSource=r,n.root=this.rootNode,this.current.content.push(n),n}removeNode(e){const r=e.container;if(r){const n=r.content.indexOf(e);n>=0&&r.content.splice(n,1)}}addHiddenNodes(e){const r=[];for(const a of e){const s=new q5(a.startOffset,a.image.length,P2(a),a.tokenType,!0);s.root=this.rootNode,r.push(s)}let n=this.current,i=!1;if(n.content.length>0)n.content.push(...r);else{for(;n.container;){const a=n.container.content.indexOf(n);if(a>0){n.container.content.splice(a,0,...r),i=!0;break}n=n.container}i||this.rootNode.content.unshift(...r)}}construct(e){const r=this.current;typeof e.$type=="string"&&(this.current.astNode=e),e.$cstNode=r;const n=this.nodeStack.pop();n?.content.length===0&&this.removeNode(n)}},l(hg,"CstNodeBuilder"),hg),dg,kL=(dg=class{get parent(){return this.container}get feature(){return this.grammarSource}get hidden(){return!1}get astNode(){var e,r;const n=typeof((e=this._astNode)===null||e===void 0?void 0:e.$type)=="string"?this._astNode:(r=this.container)===null||r===void 0?void 0:r.astNode;if(!n)throw new Error("This node has no associated AST element");return n}set astNode(e){this._astNode=e}get element(){return this.astNode}get text(){return this.root.fullText.substring(this.offset,this.end)}},l(dg,"AbstractCstNode"),dg),pg,q5=(pg=class extends kL{get offset(){return this._offset}get length(){return this._length}get end(){return this._offset+this._length}get hidden(){return this._hidden}get tokenType(){return this._tokenType}get range(){return this._range}constructor(e,r,n,i,a=!1){super(),this._hidden=a,this._offset=e,this._tokenType=i,this._length=r,this._range=n}},l(pg,"LeafCstNodeImpl"),pg),fg,Dw=(fg=class extends kL{constructor(){super(...arguments),this.content=new ybe(this)}get children(){return this.content}get offset(){var e,r;return(r=(e=this.firstNonHiddenNode)===null||e===void 0?void 0:e.offset)!==null&&r!==void 0?r:0}get length(){return this.end-this.offset}get end(){var e,r;return(r=(e=this.lastNonHiddenNode)===null||e===void 0?void 0:e.end)!==null&&r!==void 0?r:0}get range(){const e=this.firstNonHiddenNode,r=this.lastNonHiddenNode;if(e&&r){if(this._rangeCache===void 0){const{range:n}=e,{range:i}=r;this._rangeCache={start:n.start,end:i.end.line<n.start.line?n.start:i.end}}return this._rangeCache}return{start:xr.create(0,0),end:xr.create(0,0)}}get firstNonHiddenNode(){for(const e of this.content)if(!e.hidden)return e;return this.content[0]}get lastNonHiddenNode(){for(let e=this.content.length-1;e>=0;e--){const r=this.content[e];if(!r.hidden)return r}return this.content[this.content.length-1]}},l(fg,"CompositeCstNodeImpl"),fg),ku,ybe=(ku=class extends Array{constructor(e){super(),this.parent=e,Object.setPrototypeOf(this,ku.prototype)}push(...e){return this.addParents(e),super.push(...e)}unshift(...e){return this.addParents(e),super.unshift(...e)}splice(e,r,...n){return this.addParents(n),super.splice(e,r,...n)}addParents(e){for(const r of e)r.container=this.parent}},l(ku,"CstNodeContainer"),ku),gg,TL=(gg=class extends Dw{get text(){return this._text.substring(this.offset,this.end)}get fullText(){return this._text}constructor(e){super(),this._text="",this._text=e??""}},l(gg,"RootCstNodeImpl"),gg),j5=Symbol("Datatype");function Zb(t){return t.$type===j5}l(Zb,"isDataTypeNode");var cre=l((t=>t.endsWith("")?t:t+""),"withRuleSuffix"),mg,EL=(mg=class{constructor(e){this._unorderedGroups=new Map,this.allRules=new Map,this.lexer=e.parser.Lexer;const r=this.lexer.definition,n=e.LanguageMetaData.mode==="production";this.wrapper=new xbe(r,Object.assign(Object.assign({},e.parser.ParserConfig),{skipValidations:n,errorMessageProvider:e.parser.ParserErrorMessageProvider}))}alternatives(e,r){this.wrapper.wrapOr(e,r)}optional(e,r){this.wrapper.wrapOption(e,r)}many(e,r){this.wrapper.wrapMany(e,r)}atLeastOne(e,r){this.wrapper.wrapAtLeastOne(e,r)}getRule(e){return this.allRules.get(e)}isRecording(){return this.wrapper.IS_RECORDING}get unorderedGroups(){return this._unorderedGroups}getRuleStack(){return this.wrapper.RULE_STACK}finalize(){this.wrapper.wrapSelfAnalysis()}},l(mg,"AbstractLangiumParser"),mg),yg,ure=(yg=class extends EL{get current(){return this.stack[this.stack.length-1]}constructor(e){super(e),this.nodeBuilder=new lre,this.stack=[],this.assignmentMap=new Map,this.linker=e.references.Linker,this.converter=e.parser.ValueConverter,this.astReflection=e.shared.AstReflection}rule(e,r){const n=this.computeRuleType(e),i=this.wrapper.DEFINE_RULE(cre(e.name),this.startImplementation(n,r).bind(this));return this.allRules.set(e.name,i),e.entry&&(this.mainRule=i),i}computeRuleType(e){if(!e.fragment){if(Uv(e))return j5;{const r=gm(e);return r??e.name}}}parse(e,r={}){this.nodeBuilder.buildRootNode(e);const n=this.lexerResult=this.lexer.tokenize(e);this.wrapper.input=n.tokens;const i=r.rule?this.allRules.get(r.rule):this.mainRule;if(!i)throw new Error(r.rule?`No rule found with name '${r.rule}'`:"No main rule available.");const a=i.call(this.wrapper,{});return this.nodeBuilder.addHiddenNodes(n.hidden),this.unorderedGroups.clear(),this.lexerResult=void 0,{value:a,lexerErrors:n.errors,lexerReport:n.report,parserErrors:this.wrapper.errors}}startImplementation(e,r){return n=>{const i=!this.isRecording()&&e!==void 0;if(i){const s={$type:e};this.stack.push(s),e===j5&&(s.value="")}let a;try{a=r(n)}catch{a=void 0}return a===void 0&&i&&(a=this.construct()),a}}extractHiddenTokens(e){const r=this.lexerResult.hidden;if(!r.length)return[];const n=e.startOffset;for(let i=0;i<r.length;i++)if(r[i].startOffset>n)return r.splice(0,i);return r.splice(0,r.length)}consume(e,r,n){const i=this.wrapper.wrapConsume(e,r);if(!this.isRecording()&&this.isValidToken(i)){const a=this.extractHiddenTokens(i);this.nodeBuilder.addHiddenNodes(a);const s=this.nodeBuilder.buildLeafNode(i,n),{assignment:o,isCrossRef:u}=this.getAssignment(n),h=this.current;if(o){const d=Ho(n)?i.image:this.converter.convert(i.image,s);this.assign(o.operator,o.feature,d,s,u)}else if(Zb(h)){let d=i.image;Ho(n)||(d=this.converter.convert(d,s).toString()),h.value+=d}}}isValidToken(e){return!e.isInsertedInRecovery&&!isNaN(e.startOffset)&&typeof e.endOffset=="number"&&!isNaN(e.endOffset)}subrule(e,r,n,i,a){let s;this.isRecording()||n||(s=this.nodeBuilder.buildCompositeNode(i));const o=this.wrapper.wrapSubrule(e,r,a);!this.isRecording()&&s&&s.length>0&&this.performSubruleAssignment(o,i,s)}performSubruleAssignment(e,r,n){const{assignment:i,isCrossRef:a}=this.getAssignment(r);if(i)this.assign(i.operator,i.feature,e,n,a);else if(!i){const s=this.current;if(Zb(s))s.value+=e.toString();else if(typeof e=="object"&&e){const o=this.assignWithoutOverride(e,s);this.stack.pop(),this.stack.push(o)}}}action(e,r){if(!this.isRecording()){let n=this.current;if(r.feature&&r.operator){n=this.construct(),this.nodeBuilder.removeNode(n.$cstNode),this.nodeBuilder.buildCompositeNode(r).content.push(n.$cstNode);const i={$type:e};this.stack.push(i),this.assign(r.operator,r.feature,n,n.$cstNode,!1)}else n.$type=e}}construct(){if(this.isRecording())return;const e=this.current;return A5(e),this.nodeBuilder.construct(e),this.stack.pop(),Zb(e)?this.converter.convert(e.value,e.$cstNode):(uC(this.astReflection,e),e)}getAssignment(e){if(!this.assignmentMap.has(e)){const r=K0(e,Vo);this.assignmentMap.set(e,{assignment:r,isCrossRef:!!r&&Gv(r.terminal)})}return this.assignmentMap.get(e)}assign(e,r,n,i,a){const s=this.current;let o;switch(o=a&&typeof n=="string"?this.linker.buildReference(s,r,i,n):n,e){case"=":s[r]=o;break;case"?=":s[r]=!0;break;case"+=":Array.isArray(s[r])||(s[r]=[]),s[r].push(o)}}assignWithoutOverride(e,r){for(const[i,a]of Object.entries(r)){const s=e[i];s===void 0?e[i]=a:Array.isArray(s)&&Array.isArray(a)&&(a.push(...s),e[i]=a)}const n=e.$cstNode;return n&&(n.astNode=void 0,e.$cstNode=void 0),e}get definitionErrors(){return this.wrapper.definitionErrors}},l(yg,"LangiumParser"),yg),vg,hre=(vg=class{buildMismatchTokenMessage(e){return zd.buildMismatchTokenMessage(e)}buildNotAllInputParsedMessage(e){return zd.buildNotAllInputParsedMessage(e)}buildNoViableAltMessage(e){return zd.buildNoViableAltMessage(e)}buildEarlyExitMessage(e){return zd.buildEarlyExitMessage(e)}},l(vg,"AbstractParserErrorMessageProvider"),vg),xg,_L=(xg=class extends hre{buildMismatchTokenMessage({expected:e,actual:r}){return`Expecting ${e.LABEL?"`"+e.LABEL+"`":e.name.endsWith(":KW")?`keyword '${e.name.substring(0,e.name.length-3)}'`:`token of type '${e.name}'`} but found \`${r.image}\`.`}buildNotAllInputParsedMessage({firstRedundant:e}){return`Expecting end of file but found \`${e.image}\`.`}},l(xg,"LangiumParserErrorMessageProvider"),xg),bg,dre=(bg=class extends EL{constructor(){super(...arguments),this.tokens=[],this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}action(){}construct(){}parse(e){this.resetState();const r=this.lexer.tokenize(e,{mode:"partial"});return this.tokens=r.tokens,this.wrapper.input=[...this.tokens],this.mainRule.call(this.wrapper,{}),this.unorderedGroups.clear(),{tokens:this.tokens,elementStack:[...this.lastElementStack],tokenIndex:this.nextTokenIndex}}rule(e,r){const n=this.wrapper.DEFINE_RULE(cre(e.name),this.startImplementation(r).bind(this));return this.allRules.set(e.name,n),e.entry&&(this.mainRule=n),n}resetState(){this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}startImplementation(e){return r=>{const n=this.keepStackSize();try{e(r)}finally{this.resetStackSize(n)}}}removeUnexpectedElements(){this.elementStack.splice(this.stackSize)}keepStackSize(){const e=this.elementStack.length;return this.stackSize=e,e}resetStackSize(e){this.removeUnexpectedElements(),this.stackSize=e}consume(e,r,n){this.wrapper.wrapConsume(e,r),this.isRecording()||(this.lastElementStack=[...this.elementStack,n],this.nextTokenIndex=this.currIdx+1)}subrule(e,r,n,i,a){this.before(i),this.wrapper.wrapSubrule(e,r,a),this.after(i)}before(e){this.isRecording()||this.elementStack.push(e)}after(e){if(!this.isRecording()){const r=this.elementStack.lastIndexOf(e);r>=0&&this.elementStack.splice(r)}}get currIdx(){return this.wrapper.currIdx}},l(bg,"LangiumCompletionParser"),bg),vbe={recoveryEnabled:!0,nodeLocationTracking:"full",skipValidations:!0,errorMessageProvider:new _L},wg,xbe=(wg=class extends fbe{constructor(e,r){const n=r&&"maxLookahead"in r;super(e,Object.assign(Object.assign(Object.assign({},vbe),{lookaheadStrategy:n?new hL({maxLookahead:r.maxLookahead}):new gbe({logging:r.skipValidations?()=>{}:void 0})}),r))}get IS_RECORDING(){return this.RECORDING_PHASE}DEFINE_RULE(e,r){return this.RULE(e,r)}wrapSelfAnalysis(){this.performSelfAnalysis()}wrapConsume(e,r){return this.consume(e,r)}wrapSubrule(e,r,n){return this.subrule(e,r,{ARGS:[n]})}wrapOr(e,r){this.or(e,r)}wrapOption(e,r){this.option(e,r)}wrapMany(e,r){this.many(e,r)}wrapAtLeastOne(e,r){this.atLeastOne(e,r)}},l(wg,"ChevrotainWrapper"),wg);function Ow(t,e,r){return pre({parser:e,tokens:r,ruleNames:new Map},t),e}function pre(t,e){const r=ww(e,!1),n=wn(e.rules).filter(ca).filter((i=>r.has(i)));for(const i of n){const a=Object.assign(Object.assign({},t),{consume:1,optional:1,subrule:1,many:1,or:1});t.parser.rule(i,ic(a,i.definition))}}function ic(t,e,r=!1){let n;if(Ho(e))n=bre(t,e);else if(tc(e))n=fre(t,e);else if(Vo(e))n=ic(t,e.terminal);else if(Gv(e))n=CL(t,e);else if(Xo(e))n=gre(t,e);else if(yw(e))n=yre(t,e);else if(xw(e))n=vre(t,e);else if(hh(e))n=xre(t,e);else{if(!x9(e))throw new dw(e.$cstNode,`Unexpected element type: ${e.$type}`);{const i=t.consume++;n=l((()=>t.parser.consume(i,nc,e)),"method")}}return SL(t,r?void 0:Y2(e),n,e.cardinality)}function fre(t,e){const r=qv(e);return()=>t.parser.action(r,e)}function gre(t,e){const r=e.rule.ref;if(ca(r)){const n=t.subrule++,i=r.fragment,a=e.arguments.length>0?mre(r,e.arguments):()=>({});return s=>t.parser.subrule(n,AL(t,r),i,e,a(s))}if(lo(r)){const n=t.consume++,i=W5(t,r.name);return()=>t.parser.consume(n,i,e)}if(!r)throw new dw(e.$cstNode,`Undefined rule: ${e.rule.$refText}`);mc()}function mre(t,e){const r=e.map((n=>Ws(n.value)));return n=>{const i={};for(let a=0;a<r.length;a++){const s=t.parameters[a],o=r[a];i[s.name]=o(n)}return i}}function Ws(t){if(d9(t)){const e=Ws(t.left),r=Ws(t.right);return n=>e(n)||r(n)}if(h9(t)){const e=Ws(t.left),r=Ws(t.right);return n=>e(n)&&r(n)}if(p9(t)){const e=Ws(t.value);return r=>!e(r)}if(f9(t)){const e=t.parameter.ref.name;return r=>r!==void 0&&r[e]===!0}if(u9(t)){const e=!!t.true;return()=>e}mc()}function yre(t,e){if(e.elements.length===1)return ic(t,e.elements[0]);{const r=[];for(const i of e.elements){const a={ALT:ic(t,i,!0)},s=Y2(i);s&&(a.GATE=Ws(s)),r.push(a)}const n=t.or++;return i=>t.parser.alternatives(n,r.map((a=>{const s={ALT:l((()=>a.ALT(i)),"ALT")},o=a.GATE;return o&&(s.GATE=()=>o(i)),s})))}}function vre(t,e){if(e.elements.length===1)return ic(t,e.elements[0]);const r=[];for(const o of e.elements){const u={ALT:ic(t,o,!0)},h=Y2(o);h&&(u.GATE=Ws(h)),r.push(u)}const n=t.or++,i=l(((o,u)=>`uGroup_${o}_${u.getRuleStack().join("-")}`),"idFunc"),a=l((o=>t.parser.alternatives(n,r.map(((u,h)=>{const d={ALT:l((()=>!0),"ALT")},p=t.parser;d.ALT=()=>{if(u.ALT(o),!p.isRecording()){const g=i(n,p);p.unorderedGroups.get(g)||p.unorderedGroups.set(g,[]);const m=p.unorderedGroups.get(g);m?.[h]===void 0&&(m[h]=!0)}};const f=u.GATE;return d.GATE=f?()=>f(o):()=>{const g=p.unorderedGroups.get(i(n,p));return!g?.[h]},d})))),"alternatives"),s=SL(t,Y2(e),a,"*");return o=>{s(o),t.parser.isRecording()||t.parser.unorderedGroups.delete(i(n,t.parser))}}function xre(t,e){const r=e.elements.map((n=>ic(t,n)));return n=>r.forEach((i=>i(n)))}function Y2(t){if(hh(t))return t.guardCondition}function CL(t,e,r=e.terminal){if(r){if(Xo(r)&&ca(r.rule.ref)){const n=r.rule.ref,i=t.subrule++;return a=>t.parser.subrule(i,AL(t,n),!1,e,a)}if(Xo(r)&&lo(r.rule.ref)){const n=t.consume++,i=W5(t,r.rule.ref.name);return()=>t.parser.consume(n,i,e)}if(Ho(r)){const n=t.consume++,i=W5(t,r.value);return()=>t.parser.consume(n,i,e)}throw new Error("Could not build cross reference parser")}{if(!e.type.ref)throw new Error("Could not resolve reference to type: "+e.type.$refText);const n=_w(e.type.ref),i=n?.terminal;if(!i)throw new Error("Could not find name assignment for type: "+qv(e.type.ref));return CL(t,e,i)}}function bre(t,e){const r=t.consume++,n=t.tokens[e.value];if(!n)throw new Error("Could not find token for keyword: "+e.value);return()=>t.parser.consume(r,n,e)}function SL(t,e,r,n){const i=e&&Ws(e);if(!n){if(i){const a=t.or++;return s=>t.parser.alternatives(a,[{ALT:l((()=>r(s)),"ALT"),GATE:l((()=>i(s)),"GATE")},{ALT:EC(),GATE:l((()=>!i(s)),"GATE")}])}return r}if(n==="*"){const a=t.many++;return s=>t.parser.many(a,{DEF:l((()=>r(s)),"DEF"),GATE:i?()=>i(s):void 0})}if(n==="+"){const a=t.many++;if(i){const s=t.or++;return o=>t.parser.alternatives(s,[{ALT:l((()=>t.parser.atLeastOne(a,{DEF:l((()=>r(o)),"DEF")})),"ALT"),GATE:l((()=>i(o)),"GATE")},{ALT:EC(),GATE:l((()=>!i(o)),"GATE")}])}return s=>t.parser.atLeastOne(a,{DEF:l((()=>r(s)),"DEF")})}if(n==="?"){const a=t.optional++;return s=>t.parser.optional(a,{DEF:l((()=>r(s)),"DEF"),GATE:i?()=>i(s):void 0})}mc()}function AL(t,e){const r=wre(t,e),n=t.parser.getRule(r);if(!n)throw new Error(`Rule "${r}" not found."`);return n}function wre(t,e){if(ca(e))return e.name;if(t.ruleNames.has(e))return t.ruleNames.get(e);{let r=e,n=r.$container,i=e.$type;for(;!ca(n);)(hh(n)||yw(n)||xw(n))&&(i=n.elements.indexOf(r).toString()+":"+i),r=n,n=n.$container;return i=n.name+":"+i,t.ruleNames.set(e,i),i}}function W5(t,e){const r=t.tokens[e];if(!r)throw new Error(`Token "${e}" not found."`);return r}function LL(t){const e=t.Grammar,r=t.parser.Lexer,n=new dre(t);return Ow(e,n,r.definition),n.finalize(),n}function NL(t){const e=IL(t);return e.finalize(),e}function IL(t){const e=t.Grammar,r=t.parser.Lexer;return Ow(e,new ure(t),r.definition)}l(Ow,"createParser"),l(pre,"buildRules"),l(ic,"buildElement"),l(fre,"buildAction"),l(gre,"buildRuleCall"),l(mre,"buildRuleCallPredicate"),l(Ws,"buildPredicate"),l(yre,"buildAlternatives"),l(vre,"buildUnorderedGroup"),l(xre,"buildGroup"),l(Y2,"getGuardCondition"),l(CL,"buildCrossReference"),l(bre,"buildKeyword"),l(SL,"wrap"),l(AL,"getRule"),l(wre,"getRuleName"),l(W5,"getToken"),l(LL,"createCompletionParser"),l(NL,"createLangiumParser"),l(IL,"prepareLangiumParser");var Gs,kg,Pw=(kg=class{constructor(){this.diagnostics=[]}buildTokens(e,r){const n=wn(ww(e,!1)),i=this.buildTerminalTokens(n),a=this.buildKeywordTokens(n,i,r);return i.forEach((s=>{const o=s.PATTERN;typeof o=="object"&&o&&"test"in o&&z2(o)?a.unshift(s):a.push(s)})),a}flushLexingReport(e){return{diagnostics:this.popDiagnostics()}}popDiagnostics(){const e=[...this.diagnostics];return this.diagnostics=[],e}buildTerminalTokens(e){return e.filter(lo).filter((r=>!r.fragment)).map((r=>this.buildTerminalToken(r))).toArray()}buildTerminalToken(e){const r=jv(e),n=this.requiresCustomPattern(r)?this.regexPatternFunction(r):r,i={name:e.name,PATTERN:n};return typeof n=="function"&&(i.LINE_BREAKS=!0),e.hidden&&(i.GROUP=z2(r)?zi.SKIPPED:"hidden"),i}requiresCustomPattern(e){return!(!e.flags.includes("u")&&!e.flags.includes("s"))||!(!e.source.includes("?<=")&&!e.source.includes("?<!"))}regexPatternFunction(e){const r=new RegExp(e,e.flags+"y");return(n,i)=>(r.lastIndex=i,r.exec(n))}buildKeywordTokens(e,r,n){return e.filter(ca).flatMap((i=>rc(i).filter(Ho))).distinct((i=>i.value)).toArray().sort(((i,a)=>a.value.length-i.value.length)).map((i=>this.buildKeywordToken(i,r,!!n?.caseInsensitive)))}buildKeywordToken(e,r,n){const i=this.buildKeywordPattern(e,n),a={name:e.value,PATTERN:i,LONGER_ALT:this.findLongerAlt(e,r)};return typeof i=="function"&&(a.LINE_BREAKS=!0),a}buildKeywordPattern(e,r){return r?new RegExp(I9(e.value)):e.value}findLongerAlt(e,r){return r.reduce(((n,i)=>{const a=i?.PATTERN;return a?.source&&R9("^"+a.source+"$",e.value)&&n.push(i),n}),[])}},l(kg,"DefaultTokenBuilder"),kg),Tg,RL=(Tg=class{convert(e,r){let n=r.grammarSource;if(Gv(n)&&(n=B9(n)),Xo(n)){const i=n.rule.ref;if(!i)throw new Error("This cst node was not parsed by a rule.");return this.runConverter(i,e,r)}return e}runConverter(e,r,n){var i;switch(e.name.toUpperCase()){case"INT":return Gs.convertInt(r);case"STRING":return Gs.convertString(r);case"ID":return Gs.convertID(r)}switch((i=Y9(e))===null||i===void 0?void 0:i.toLowerCase()){case"number":return Gs.convertNumber(r);case"boolean":return Gs.convertBoolean(r);case"bigint":return Gs.convertBigint(r);case"date":return Gs.convertDate(r);default:return r}}},l(Tg,"DefaultValueConverter"),Tg);(function(t){function e(h){let d="";for(let p=1;p<h.length-1;p++){const f=h.charAt(p);f==="\\"?d+=r(h.charAt(++p)):d+=f}return d}function r(h){switch(h){case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";case"v":return"\v";case"0":return"\0";default:return h}}function n(h){return h.charAt(0)==="^"?h.substring(1):h}function i(h){return parseInt(h)}function a(h){return BigInt(h)}function s(h){return new Date(h)}function o(h){return Number(h)}function u(h){return h.toLowerCase()==="true"}l(e,"convertString"),t.convertString=e,l(r,"convertEscapeCharacter"),l(n,"convertID"),t.convertID=n,l(i,"convertInt"),t.convertInt=i,l(a,"convertBigint"),t.convertBigint=a,l(s,"convertDate"),t.convertDate=s,l(o,"convertNumber"),t.convertNumber=o,l(u,"convertBoolean"),t.convertBoolean=u})(Gs||(Gs={}));var Fr={};function Bw(){return new Promise((t=>{typeof setImmediate>"u"?setTimeout(t,0):setImmediate(t)}))}w6(Fr,Ci(Mxe())),l(Bw,"delayNextTick");var Qb=0,kre=10;function $w(){return Qb=performance.now(),new Fr.CancellationTokenSource}function ML(t){kre=t}l($w,"startCancelableOperation"),l(ML,"setInterruptionPeriod");var ac=Symbol("OperationCancelled");function fh(t){return t===ac}async function wi(t){if(t===Fr.CancellationToken.None)return;const e=performance.now();if(e-Qb>=kre&&(Qb=e,await Bw(),Qb=performance.now()),t.isCancellationRequested)throw ac}l(fh,"isOperationCancelled"),l(wi,"interruptAndCheck");var Y5,Tre,Eg,Qo=(Eg=class{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=n=>(e(n),this),this.reject=n=>(r(n),this)}))}},l(Eg,"Deferred"),Eg),Vl,cO=(Vl=class{constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){const r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){for(const n of e)if(Vl.isIncremental(n)){const i=OL(n.range),a=this.offsetAt(i.start),s=this.offsetAt(i.end);this._content=this._content.substring(0,a)+n.text+this._content.substring(s,this._content.length);const o=Math.max(i.start.line,0),u=Math.max(i.end.line,0);let h=this._lineOffsets;const d=LC(n.text,!1,a);if(u-o===d.length)for(let f=0,g=d.length;f<g;f++)h[f+o+1]=d[f];else d.length<1e4?h.splice(o+1,u-o,...d):this._lineOffsets=h=h.slice(0,o+1).concat(d,h.slice(u+1));const p=n.text.length-(s-a);if(p!==0)for(let f=o+1+d.length,g=h.length;f<g;f++)h[f]=h[f]+p}else{if(!Vl.isFull(n))throw new Error("Unknown change event received");this._content=n.text,this._lineOffsets=void 0}this._version=r}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=LC(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);const r=this.getLineOffsets();let n=0,i=r.length;if(i===0)return{line:0,character:e};for(;n<i;){const s=Math.floor((n+i)/2);r[s]>e?i=s:n=s+1}const a=n-1;return{line:a,character:(e=this.ensureBeforeEOL(e,r[a]))-r[a]}}offsetAt(e){const r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;const n=r[e.line];if(e.character<=0)return n;const i=e.line+1<r.length?r[e.line+1]:this._content.length,a=Math.min(n+e.character,i);return this.ensureBeforeEOL(a,n)}ensureBeforeEOL(e,r){for(;e>r&&DL(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){const r=e;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(e){const r=e;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}},l(Vl,"FullTextDocument"),Vl);function V5(t,e){if(t.length<=1)return t;const r=t.length/2|0,n=t.slice(0,r),i=t.slice(r);V5(n,e),V5(i,e);let a=0,s=0,o=0;for(;a<n.length&&s<i.length;){const u=e(n[a],i[s]);t[o++]=u<=0?n[a++]:i[s++]}for(;a<n.length;)t[o++]=n[a++];for(;s<i.length;)t[o++]=i[s++];return t}function LC(t,e,r=0){const n=e?[r]:[];for(let i=0;i<t.length;i++){const a=t.charCodeAt(i);DL(a)&&(a===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,n.push(r+i+1))}return n}function DL(t){return t===13||t===10}function OL(t){const e=t.start,r=t.end;return e.line>r.line||e.line===r.line&&e.character>r.character?{start:r,end:e}:t}function uO(t){const e=OL(t.range);return e!==t.range?{newText:t.newText,range:e}:t}(function(t){function e(i,a,s,o){return new cO(i,a,s,o)}function r(i,a,s){if(i instanceof cO)return i.update(a,s),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}function n(i,a){const s=i.getText(),o=V5(a.map(uO),((d,p)=>{const f=d.range.start.line-p.range.start.line;return f===0?d.range.start.character-p.range.start.character:f}));let u=0;const h=[];for(const d of o){const p=i.offsetAt(d.range.start);if(p<u)throw new Error("Overlapping edit");p>u&&h.push(s.substring(u,p)),d.newText.length&&h.push(d.newText),u=i.offsetAt(d.range.end)}return h.push(s.substr(u)),h.join("")}l(e,"create"),t.create=e,l(r,"update"),t.update=r,l(n,"applyEdits"),t.applyEdits=n})(Y5||(Y5={})),l(V5,"mergeSort"),l(LC,"computeLineOffsets"),l(DL,"isEOL"),l(OL,"getWellformedRange"),l(uO,"getWellformedEdit"),(()=>{var t={470:i=>{function a(u){if(typeof u!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(u))}function s(u,h){for(var d,p="",f=0,g=-1,m=0,y=0;y<=u.length;++y){if(y<u.length)d=u.charCodeAt(y);else{if(d===47)break;d=47}if(d===47){if(!(g===y-1||m===1))if(g!==y-1&&m===2){if(p.length<2||f!==2||p.charCodeAt(p.length-1)!==46||p.charCodeAt(p.length-2)!==46){if(p.length>2){var v=p.lastIndexOf("/");if(v!==p.length-1){v===-1?(p="",f=0):f=(p=p.slice(0,v)).length-1-p.lastIndexOf("/"),g=y,m=0;continue}}else if(p.length===2||p.length===1){p="",f=0,g=y,m=0;continue}}h&&(p.length>0?p+="/..":p="..",f=2)}else p.length>0?p+="/"+u.slice(g+1,y):p=u.slice(g+1,y),f=y-g-1;g=y,m=0}else d===46&&m!==-1?++m:m=-1}return p}l(a,"e"),l(s,"r");var o={resolve:l((function(){for(var u,h="",d=!1,p=arguments.length-1;p>=-1&&!d;p--){var f;p>=0?f=arguments[p]:(u===void 0&&(u=process.cwd()),f=u),a(f),f.length!==0&&(h=f+"/"+h,d=f.charCodeAt(0)===47)}return h=s(h,!d),d?h.length>0?"/"+h:"/":h.length>0?h:"."}),"resolve"),normalize:l((function(u){if(a(u),u.length===0)return".";var h=u.charCodeAt(0)===47,d=u.charCodeAt(u.length-1)===47;return(u=s(u,!h)).length!==0||h||(u="."),u.length>0&&d&&(u+="/"),h?"/"+u:u}),"normalize"),isAbsolute:l((function(u){return a(u),u.length>0&&u.charCodeAt(0)===47}),"isAbsolute"),join:l((function(){if(arguments.length===0)return".";for(var u,h=0;h<arguments.length;++h){var d=arguments[h];a(d),d.length>0&&(u===void 0?u=d:u+="/"+d)}return u===void 0?".":o.normalize(u)}),"join"),relative:l((function(u,h){if(a(u),a(h),u===h||(u=o.resolve(u))===(h=o.resolve(h)))return"";for(var d=1;d<u.length&&u.charCodeAt(d)===47;++d);for(var p=u.length,f=p-d,g=1;g<h.length&&h.charCodeAt(g)===47;++g);for(var m=h.length-g,y=f<m?f:m,v=-1,x=0;x<=y;++x){if(x===y){if(m>y){if(h.charCodeAt(g+x)===47)return h.slice(g+x+1);if(x===0)return h.slice(g+x)}else f>y&&(u.charCodeAt(d+x)===47?v=x:x===0&&(v=0));break}var b=u.charCodeAt(d+x);if(b!==h.charCodeAt(g+x))break;b===47&&(v=x)}var w="";for(x=d+v+1;x<=p;++x)x!==p&&u.charCodeAt(x)!==47||(w.length===0?w+="..":w+="/..");return w.length>0?w+h.slice(g+v):(g+=v,h.charCodeAt(g)===47&&++g,h.slice(g))}),"relative"),_makeLong:l((function(u){return u}),"_makeLong"),dirname:l((function(u){if(a(u),u.length===0)return".";for(var h=u.charCodeAt(0),d=h===47,p=-1,f=!0,g=u.length-1;g>=1;--g)if((h=u.charCodeAt(g))===47){if(!f){p=g;break}}else f=!1;return p===-1?d?"/":".":d&&p===1?"//":u.slice(0,p)}),"dirname"),basename:l((function(u,h){if(h!==void 0&&typeof h!="string")throw new TypeError('"ext" argument must be a string');a(u);var d,p=0,f=-1,g=!0;if(h!==void 0&&h.length>0&&h.length<=u.length){if(h.length===u.length&&h===u)return"";var m=h.length-1,y=-1;for(d=u.length-1;d>=0;--d){var v=u.charCodeAt(d);if(v===47){if(!g){p=d+1;break}}else y===-1&&(g=!1,y=d+1),m>=0&&(v===h.charCodeAt(m)?--m==-1&&(f=d):(m=-1,f=y))}return p===f?f=y:f===-1&&(f=u.length),u.slice(p,f)}for(d=u.length-1;d>=0;--d)if(u.charCodeAt(d)===47){if(!g){p=d+1;break}}else f===-1&&(g=!1,f=d+1);return f===-1?"":u.slice(p,f)}),"basename"),extname:l((function(u){a(u);for(var h=-1,d=0,p=-1,f=!0,g=0,m=u.length-1;m>=0;--m){var y=u.charCodeAt(m);if(y!==47)p===-1&&(f=!1,p=m+1),y===46?h===-1?h=m:g!==1&&(g=1):h!==-1&&(g=-1);else if(!f){d=m+1;break}}return h===-1||p===-1||g===0||g===1&&h===p-1&&h===d+1?"":u.slice(h,p)}),"extname"),format:l((function(u){if(u===null||typeof u!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof u);return d=(h=u).dir||h.root,p=h.base||(h.name||"")+(h.ext||""),d?d===h.root?d+p:d+"/"+p:p;var h,d,p}),"format"),parse:l((function(u){a(u);var h={root:"",dir:"",base:"",ext:"",name:""};if(u.length===0)return h;var d,p=u.charCodeAt(0),f=p===47;f?(h.root="/",d=1):d=0;for(var g=-1,m=0,y=-1,v=!0,x=u.length-1,b=0;x>=d;--x)if((p=u.charCodeAt(x))!==47)y===-1&&(v=!1,y=x+1),p===46?g===-1?g=x:b!==1&&(b=1):g!==-1&&(b=-1);else if(!v){m=x+1;break}return g===-1||y===-1||b===0||b===1&&g===y-1&&g===m+1?y!==-1&&(h.base=h.name=m===0&&f?u.slice(1,y):u.slice(m,y)):(m===0&&f?(h.name=u.slice(1,g),h.base=u.slice(1,y)):(h.name=u.slice(m,g),h.base=u.slice(m,y)),h.ext=u.slice(g,y)),m>0?h.dir=u.slice(0,m-1):f&&(h.dir="/"),h}),"parse"),sep:"/",delimiter:":",win32:null,posix:null};o.posix=o,i.exports=o}},e={};function r(i){var a=e[i];if(a!==void 0)return a.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,r),s.exports}l(r,"r"),r.d=(i,a)=>{for(var s in a)r.o(a,s)&&!r.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:a[s]})},r.o=(i,a)=>Object.prototype.hasOwnProperty.call(i,a),r.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var n={};(()=>{let i;r.r(n),r.d(n,{URI:l((()=>f),"URI"),Utils:l((()=>N),"Utils")}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);const a=/^\w[\w\d+.-]*$/,s=/^\//,o=/^\/\//;function u(L,I){if(!L.scheme&&I)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${L.authority}", path: "${L.path}", query: "${L.query}", fragment: "${L.fragment}"}`);if(L.scheme&&!a.test(L.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(L.path){if(L.authority){if(!s.test(L.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(o.test(L.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}l(u,"s");const h="",d="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,O=class O{static isUri(I){return I instanceof O||!!I&&typeof I.authority=="string"&&typeof I.fragment=="string"&&typeof I.path=="string"&&typeof I.query=="string"&&typeof I.scheme=="string"&&typeof I.fsPath=="string"&&typeof I.with=="function"&&typeof I.toString=="function"}scheme;authority;path;query;fragment;constructor(I,A,M,D,R,P=!1){typeof I=="object"?(this.scheme=I.scheme||h,this.authority=I.authority||h,this.path=I.path||h,this.query=I.query||h,this.fragment=I.fragment||h):(this.scheme=(function($,z){return $||z?$:"file"})(I,P),this.authority=A||h,this.path=(function($,z){switch($){case"https":case"http":case"file":z?z[0]!==d&&(z=d+z):z=d}return z})(this.scheme,M||h),this.query=D||h,this.fragment=R||h,u(this,P))}get fsPath(){return b(this,!1)}with(I){if(!I)return this;let{scheme:A,authority:M,path:D,query:R,fragment:P}=I;return A===void 0?A=this.scheme:A===null&&(A=h),M===void 0?M=this.authority:M===null&&(M=h),D===void 0?D=this.path:D===null&&(D=h),R===void 0?R=this.query:R===null&&(R=h),P===void 0?P=this.fragment:P===null&&(P=h),A===this.scheme&&M===this.authority&&D===this.path&&R===this.query&&P===this.fragment?this:new m(A,M,D,R,P)}static parse(I,A=!1){const M=p.exec(I);return M?new m(M[2]||h,C(M[4]||h),C(M[5]||h),C(M[7]||h),C(M[9]||h),A):new m(h,h,h,h,h)}static file(I){let A=h;if(i&&(I=I.replace(/\\/g,d)),I[0]===d&&I[1]===d){const M=I.indexOf(d,2);M===-1?(A=I.substring(2),I=d):(A=I.substring(2,M),I=I.substring(M)||d)}return new m("file",A,I,h,h)}static from(I){const A=new m(I.scheme,I.authority,I.path,I.query,I.fragment);return u(A,!0),A}toString(I=!1){return w(this,I)}toJSON(){return this}static revive(I){if(I){if(I instanceof O)return I;{const A=new m(I);return A._formatted=I.external,A._fsPath=I._sep===g?I.fsPath:null,A}}return I}};l(O,"f");let f=O;const g=i?1:void 0,B=class B extends f{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=b(this,!1)),this._fsPath}toString(I=!1){return I?w(this,!0):(this._formatted||(this._formatted=w(this,!1)),this._formatted)}toJSON(){const I={$mid:1};return this._fsPath&&(I.fsPath=this._fsPath,I._sep=g),this._formatted&&(I.external=this._formatted),this.path&&(I.path=this.path),this.scheme&&(I.scheme=this.scheme),this.authority&&(I.authority=this.authority),this.query&&(I.query=this.query),this.fragment&&(I.fragment=this.fragment),I}};l(B,"l");let m=B;const y={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function v(L,I,A){let M,D=-1;for(let R=0;R<L.length;R++){const P=L.charCodeAt(R);if(P>=97&&P<=122||P>=65&&P<=90||P>=48&&P<=57||P===45||P===46||P===95||P===126||I&&P===47||A&&P===91||A&&P===93||A&&P===58)D!==-1&&(M+=encodeURIComponent(L.substring(D,R)),D=-1),M!==void 0&&(M+=L.charAt(R));else{M===void 0&&(M=L.substr(0,R));const $=y[P];$!==void 0?(D!==-1&&(M+=encodeURIComponent(L.substring(D,R)),D=-1),M+=$):D===-1&&(D=R)}}return D!==-1&&(M+=encodeURIComponent(L.substring(D))),M!==void 0?M:L}function x(L){let I;for(let A=0;A<L.length;A++){const M=L.charCodeAt(A);M===35||M===63?(I===void 0&&(I=L.substr(0,A)),I+=y[M]):I!==void 0&&(I+=L[A])}return I!==void 0?I:L}function b(L,I){let A;return A=L.authority&&L.path.length>1&&L.scheme==="file"?`//${L.authority}${L.path}`:L.path.charCodeAt(0)===47&&(L.path.charCodeAt(1)>=65&&L.path.charCodeAt(1)<=90||L.path.charCodeAt(1)>=97&&L.path.charCodeAt(1)<=122)&&L.path.charCodeAt(2)===58?I?L.path.substr(1):L.path[1].toLowerCase()+L.path.substr(2):L.path,i&&(A=A.replace(/\//g,"\\")),A}function w(L,I){const A=I?x:v;let M="",{scheme:D,authority:R,path:P,query:$,fragment:z}=L;if(D&&(M+=D,M+=":"),(R||D==="file")&&(M+=d,M+=d),R){let q=R.indexOf("@");if(q!==-1){const W=R.substr(0,q);R=R.substr(q+1),q=W.lastIndexOf(":"),q===-1?M+=A(W,!1,!1):(M+=A(W.substr(0,q),!1,!1),M+=":",M+=A(W.substr(q+1),!1,!0)),M+="@"}R=R.toLowerCase(),q=R.lastIndexOf(":"),q===-1?M+=A(R,!1,!0):(M+=A(R.substr(0,q),!1,!0),M+=R.substr(q))}if(P){if(P.length>=3&&P.charCodeAt(0)===47&&P.charCodeAt(2)===58){const q=P.charCodeAt(1);q>=65&&q<=90&&(P=`/${String.fromCharCode(q+32)}:${P.substr(3)}`)}else if(P.length>=2&&P.charCodeAt(1)===58){const q=P.charCodeAt(0);q>=65&&q<=90&&(P=`${String.fromCharCode(q+32)}:${P.substr(2)}`)}M+=A(P,!0,!1)}return $&&(M+="?",M+=A($,!1,!1)),z&&(M+="#",M+=I?z:v(z,!1,!1)),M}function T(L){try{return decodeURIComponent(L)}catch{return L.length>3?L.substr(0,3)+T(L.substr(3)):L}}l(v,"d"),l(x,"p"),l(b,"m"),l(w,"y"),l(T,"v");const k=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function C(L){return L.match(k)?L.replace(k,(I=>T(I))):L}l(C,"C");var E=r(470);const _=E.posix||E,S="/";var N;(function(L){L.joinPath=function(I,...A){return I.with({path:_.join(I.path,...A)})},L.resolvePath=function(I,...A){let M=I.path,D=!1;M[0]!==S&&(M=S+M,D=!0);let R=_.resolve(M,...A);return D&&R[0]===S&&!I.authority&&(R=R.substring(1)),I.with({path:R})},L.dirname=function(I){if(I.path.length===0||I.path===S)return I;let A=_.dirname(I.path);return A.length===1&&A.charCodeAt(0)===46&&(A=""),I.with({path:A})},L.basename=function(I){return _.basename(I.path)},L.extname=function(I){return _.extname(I.path)}})(N||(N={}))})(),Tre=n})();var oo,jr,Xi,{URI:Jo,Utils:Bm}=Tre;(function(t){function e(i,a){return i?.toString()===a?.toString()}function r(i,a){const s=typeof i=="string"?i:i.path,o=typeof a=="string"?a:a.path,u=s.split("/").filter((p=>p.length>0)),h=o.split("/").filter((p=>p.length>0));let d=0;for(;d<u.length&&u[d]===h[d];d++);return"../".repeat(u.length-d)+h.slice(d).join("/")}function n(i){return Jo.parse(i.toString()).toString()}t.basename=Bm.basename,t.dirname=Bm.dirname,t.extname=Bm.extname,t.joinPath=Bm.joinPath,t.resolvePath=Bm.resolvePath,l(e,"equals"),t.equals=e,l(r,"relative"),t.relative=r,l(n,"normalize"),t.normalize=n})(oo||(oo={})),(Xi=jr||(jr={}))[Xi.Changed=0]="Changed",Xi[Xi.Parsed=1]="Parsed",Xi[Xi.IndexedContent=2]="IndexedContent",Xi[Xi.ComputedScopes=3]="ComputedScopes",Xi[Xi.Linked=4]="Linked",Xi[Xi.IndexedReferences=5]="IndexedReferences",Xi[Xi.Validated=6]="Validated";var _g,Ere=(_g=class{constructor(e){this.serviceRegistry=e.ServiceRegistry,this.textDocuments=e.workspace.TextDocuments,this.fileSystemProvider=e.workspace.FileSystemProvider}async fromUri(e,r=Fr.CancellationToken.None){const n=await this.fileSystemProvider.readFile(e);return this.createAsync(e,n,r)}fromTextDocument(e,r,n){return r=r??Jo.parse(e.uri),Fr.CancellationToken.is(n)?this.createAsync(r,e,n):this.create(r,e,n)}fromString(e,r,n){return Fr.CancellationToken.is(n)?this.createAsync(r,e,n):this.create(r,e,n)}fromModel(e,r){return this.create(r,{$model:e})}create(e,r,n){if(typeof r=="string"){const i=this.parse(e,r,n);return this.createLangiumDocument(i,e,void 0,r)}if("$model"in r){const i={value:r.$model,parserErrors:[],lexerErrors:[]};return this.createLangiumDocument(i,e)}{const i=this.parse(e,r.getText(),n);return this.createLangiumDocument(i,e,r)}}async createAsync(e,r,n){if(typeof r=="string"){const i=await this.parseAsync(e,r,n);return this.createLangiumDocument(i,e,void 0,r)}{const i=await this.parseAsync(e,r.getText(),n);return this.createLangiumDocument(i,e,r)}}createLangiumDocument(e,r,n,i){let a;if(n)a={parseResult:e,uri:r,state:jr.Parsed,references:[],textDocument:n};else{const s=this.createTextDocumentGetter(r,i);a={parseResult:e,uri:r,state:jr.Parsed,references:[],get textDocument(){return s()}}}return e.value.$document=a,a}async update(e,r){var n,i;const a=(n=e.parseResult.value.$cstNode)===null||n===void 0?void 0:n.root.fullText,s=(i=this.textDocuments)===null||i===void 0?void 0:i.get(e.uri.toString()),o=s?s.getText():await this.fileSystemProvider.readFile(e.uri);if(s)Object.defineProperty(e,"textDocument",{value:s});else{const u=this.createTextDocumentGetter(e.uri,o);Object.defineProperty(e,"textDocument",{get:u})}return a!==o&&(e.parseResult=await this.parseAsync(e.uri,o,r),e.parseResult.value.$document=e),e.state=jr.Parsed,e}parse(e,r,n){return this.serviceRegistry.getServices(e).parser.LangiumParser.parse(r,n)}parseAsync(e,r,n){return this.serviceRegistry.getServices(e).parser.AsyncParser.parse(r,n)}createTextDocumentGetter(e,r){const n=this.serviceRegistry;let i;return()=>i??(i=Y5.create(e.toString(),n.getServices(e).LanguageMetaData.languageId,0,r??""))}},l(_g,"DefaultLangiumDocumentFactory"),_g),Cg,_re=(Cg=class{constructor(e){this.documentMap=new Map,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory,this.serviceRegistry=e.ServiceRegistry}get all(){return wn(this.documentMap.values())}addDocument(e){const r=e.uri.toString();if(this.documentMap.has(r))throw new Error(`A document with the URI '${r}' is already present.`);this.documentMap.set(r,e)}getDocument(e){const r=e.toString();return this.documentMap.get(r)}async getOrCreateDocument(e,r){let n=this.getDocument(e);return n||(n=await this.langiumDocumentFactory.fromUri(e,r),this.addDocument(n),n)}createDocument(e,r,n){if(n)return this.langiumDocumentFactory.fromString(r,e,n).then((i=>(this.addDocument(i),i)));{const i=this.langiumDocumentFactory.fromString(r,e);return this.addDocument(i),i}}hasDocument(e){return this.documentMap.has(e.toString())}invalidateDocument(e){const r=e.toString(),n=this.documentMap.get(r);return n&&(this.serviceRegistry.getServices(e).references.Linker.unlink(n),n.state=jr.Changed,n.precomputedScopes=void 0,n.diagnostics=void 0),n}deleteDocument(e){const r=e.toString(),n=this.documentMap.get(r);return n&&(n.state=jr.Changed,this.documentMap.delete(r)),n}},l(Cg,"DefaultLangiumDocuments"),Cg),TT=Symbol("ref_resolving"),Sg,Cre=(Sg=class{constructor(e){this.reflection=e.shared.AstReflection,this.langiumDocuments=()=>e.shared.workspace.LangiumDocuments,this.scopeProvider=e.references.ScopeProvider,this.astNodeLocator=e.workspace.AstNodeLocator}async link(e,r=Fr.CancellationToken.None){for(const n of Po(e.parseResult.value))await wi(r),F2(n).forEach((i=>this.doLink(i,e)))}doLink(e,r){var n;const i=e.reference;if(i._ref===void 0){i._ref=TT;try{const a=this.getCandidate(e);if(Qd(a))i._ref=a;else if(i._nodeDescription=a,this.langiumDocuments().hasDocument(a.documentUri)){const s=this.loadAstNode(a);i._ref=s??this.createLinkingError(e,a)}else i._ref=void 0}catch(a){console.error(`An error occurred while resolving reference to '${i.$refText}':`,a);const s=(n=a.message)!==null&&n!==void 0?n:String(a);i._ref=Object.assign(Object.assign({},e),{message:`An error occurred while resolving reference to '${i.$refText}': ${s}`})}r.references.push(i)}}unlink(e){for(const r of e.references)delete r._ref,delete r._nodeDescription;e.references=[]}getCandidate(e){const r=this.scopeProvider.getScope(e).getElement(e.reference.$refText);return r??this.createLinkingError(e)}buildReference(e,r,n,i){const a=this,s={$refNode:n,$refText:i,get ref(){var o;if(_n(this._ref))return this._ref;if(ZA(this._nodeDescription)){const u=a.loadAstNode(this._nodeDescription);this._ref=u??a.createLinkingError({reference:s,container:e,property:r},this._nodeDescription)}else if(this._ref===void 0){this._ref=TT;const u=B2(e).$document,h=a.getLinkedNode({reference:s,container:e,property:r});if(h.error&&u&&u.state<jr.ComputedScopes)return this._ref=void 0;this._ref=(o=h.node)!==null&&o!==void 0?o:h.error,this._nodeDescription=h.descr,u?.references.push(this)}else if(this._ref===TT)throw new Error(`Cyclic reference resolution detected: ${a.astNodeLocator.getAstNodePath(e)}/${r} (symbol '${i}')`);return _n(this._ref)?this._ref:void 0},get $nodeDescription(){return this._nodeDescription},get error(){return Qd(this._ref)?this._ref:void 0}};return s}getLinkedNode(e){var r;try{const n=this.getCandidate(e);if(Qd(n))return{error:n};const i=this.loadAstNode(n);return i?{node:i,descr:n}:{descr:n,error:this.createLinkingError(e,n)}}catch(n){console.error(`An error occurred while resolving reference to '${e.reference.$refText}':`,n);const i=(r=n.message)!==null&&r!==void 0?r:String(n);return{error:Object.assign(Object.assign({},e),{message:`An error occurred while resolving reference to '${e.reference.$refText}': ${i}`})}}}loadAstNode(e){if(e.node)return e.node;const r=this.langiumDocuments().getDocument(e.documentUri);return r?this.astNodeLocator.getAstNode(r.parseResult.value,e.path):void 0}createLinkingError(e,r){const n=B2(e.container).$document;n&&n.state<jr.ComputedScopes&&console.warn(`Attempted reference resolution before document reached ComputedScopes state (${n.uri}).`);const i=this.reflection.getReferenceType(e);return Object.assign(Object.assign({},e),{message:`Could not resolve reference to ${i} named '${e.reference.$refText}'.`,targetDescription:r})}},l(Sg,"DefaultLinker"),Sg);function PL(t){return typeof t.name=="string"}l(PL,"isNamed");var Ag,Sre=(Ag=class{getName(e){if(PL(e))return e.name}getNameNode(e){return kw(e.$cstNode,"name")}},l(Ag,"DefaultNameProvider"),Ag),Lg,Are=(Lg=class{constructor(e){this.nameProvider=e.references.NameProvider,this.index=e.shared.workspace.IndexManager,this.nodeLocator=e.workspace.AstNodeLocator}findDeclaration(e){if(e){const r=G9(e),n=e.astNode;if(r&&n){const i=n[r.feature];if(na(i))return i.ref;if(Array.isArray(i)){for(const a of i)if(na(a)&&a.$refNode&&a.$refNode.offset<=e.offset&&a.$refNode.end>=e.end)return a.ref}}if(n){const i=this.nameProvider.getNameNode(n);if(i&&(i===e||JA(e,i)))return n}}}findDeclarationNode(e){const r=this.findDeclaration(e);if(r?.$cstNode){const n=this.nameProvider.getNameNode(r);return n??r.$cstNode}}findReferences(e,r){const n=[];if(r.includeDeclaration){const a=this.getReferenceToSelf(e);a&&n.push(a)}let i=this.index.findAllReferences(e,this.nodeLocator.getAstNodePath(e));return r.documentUri&&(i=i.filter((a=>oo.equals(a.sourceUri,r.documentUri)))),n.push(...i),wn(n)}getReferenceToSelf(e){const r=this.nameProvider.getNameNode(e);if(r){const n=Cs(e),i=this.nodeLocator.getAstNodePath(e);return{sourceUri:n.uri,sourcePath:i,targetUri:n.uri,targetPath:i,segment:X0(r),local:!0}}}},l(Lg,"DefaultReferences"),Lg),Ng,Z0=(Ng=class{constructor(e){if(this.map=new Map,e)for(const[r,n]of e)this.add(r,n)}get size(){return O2.sum(wn(this.map.values()).map((e=>e.length)))}clear(){this.map.clear()}delete(e,r){if(r===void 0)return this.map.delete(e);{const n=this.map.get(e);if(n){const i=n.indexOf(r);if(i>=0)return n.length===1?this.map.delete(e):n.splice(i,1),!0}return!1}}get(e){var r;return(r=this.map.get(e))!==null&&r!==void 0?r:[]}has(e,r){if(r===void 0)return this.map.has(e);{const n=this.map.get(e);return!!n&&n.indexOf(r)>=0}}add(e,r){return this.map.has(e)?this.map.get(e).push(r):this.map.set(e,[r]),this}addAll(e,r){return this.map.has(e)?this.map.get(e).push(...r):this.map.set(e,Array.from(r)),this}forEach(e){this.map.forEach(((r,n)=>r.forEach((i=>e(i,n,this)))))}[Symbol.iterator](){return this.entries().iterator()}entries(){return wn(this.map.entries()).flatMap((([e,r])=>r.map((n=>[e,n]))))}keys(){return wn(this.map.keys())}values(){return wn(this.map.values()).flat()}entriesGroupedByKey(){return wn(this.map.entries())}},l(Ng,"MultiMap"),Ng),Ig,H5=(Ig=class{get size(){return this.map.size}constructor(e){if(this.map=new Map,this.inverse=new Map,e)for(const[r,n]of e)this.set(r,n)}clear(){this.map.clear(),this.inverse.clear()}set(e,r){return this.map.set(e,r),this.inverse.set(r,e),this}get(e){return this.map.get(e)}getKey(e){return this.inverse.get(e)}delete(e){const r=this.map.get(e);return r!==void 0&&(this.map.delete(e),this.inverse.delete(r),!0)}},l(Ig,"BiMap"),Ig),Rg,Lre=(Rg=class{constructor(e){this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider}async computeExports(e,r=Fr.CancellationToken.None){return this.computeExportsForNode(e.parseResult.value,e,void 0,r)}async computeExportsForNode(e,r,n=$2,i=Fr.CancellationToken.None){const a=[];this.exportNode(e,a,r);for(const s of n(e))await wi(i),this.exportNode(s,a,r);return a}exportNode(e,r,n){const i=this.nameProvider.getName(e);i&&r.push(this.descriptions.createDescription(e,i,n))}async computeLocalScopes(e,r=Fr.CancellationToken.None){const n=e.parseResult.value,i=new Z0;for(const a of rc(n))await wi(r),this.processNode(a,e,i);return i}processNode(e,r,n){const i=e.$container;if(i){const a=this.nameProvider.getName(e);a&&n.add(i,this.descriptions.createDescription(e,a,r))}}},l(Rg,"DefaultScopeComputation"),Rg),Mg,NC=(Mg=class{constructor(e,r,n){var i;this.elements=e,this.outerScope=r,this.caseInsensitive=(i=n?.caseInsensitive)!==null&&i!==void 0&&i}getAllElements(){return this.outerScope?this.elements.concat(this.outerScope.getAllElements()):this.elements}getElement(e){return(this.caseInsensitive?this.elements.find((n=>n.name.toLowerCase()===e.toLowerCase())):this.elements.find((n=>n.name===e)))||(this.outerScope?this.outerScope.getElement(e):void 0)}},l(Mg,"StreamScope"),Mg),Dg,Nre=(Dg=class{constructor(e,r,n){var i;this.elements=new Map,this.caseInsensitive=(i=n?.caseInsensitive)!==null&&i!==void 0&&i;for(const a of e){const s=this.caseInsensitive?a.name.toLowerCase():a.name;this.elements.set(s,a)}this.outerScope=r}getElement(e){const r=this.caseInsensitive?e.toLowerCase():e;return this.elements.get(r)||(this.outerScope?this.outerScope.getElement(e):void 0)}getAllElements(){let e=wn(this.elements.values());return this.outerScope&&(e=e.concat(this.outerScope.getAllElements())),e}},l(Dg,"MapScope"),Dg),bbe={getElement(){},getAllElements:()=>uw},Og,Fw=(Og=class{constructor(){this.toDispose=[],this.isDisposed=!1}onDispose(e){this.toDispose.push(e)}dispose(){this.throwIfDisposed(),this.clear(),this.isDisposed=!0,this.toDispose.forEach((e=>e.dispose()))}throwIfDisposed(){if(this.isDisposed)throw new Error("This cache has already been disposed")}},l(Og,"DisposableCache"),Og),Pg,BL=(Pg=class extends Fw{constructor(){super(...arguments),this.cache=new Map}has(e){return this.throwIfDisposed(),this.cache.has(e)}set(e,r){this.throwIfDisposed(),this.cache.set(e,r)}get(e,r){if(this.throwIfDisposed(),this.cache.has(e))return this.cache.get(e);if(r){const n=r();return this.cache.set(e,n),n}}delete(e){return this.throwIfDisposed(),this.cache.delete(e)}clear(){this.throwIfDisposed(),this.cache.clear()}},l(Pg,"SimpleCache"),Pg),Bg,zw=(Bg=class extends Fw{constructor(e){super(),this.cache=new Map,this.converter=e??(r=>r)}has(e,r){return this.throwIfDisposed(),this.cacheForContext(e).has(r)}set(e,r,n){this.throwIfDisposed(),this.cacheForContext(e).set(r,n)}get(e,r,n){this.throwIfDisposed();const i=this.cacheForContext(e);if(i.has(r))return i.get(r);if(n){const a=n();return i.set(r,a),a}}delete(e,r){return this.throwIfDisposed(),this.cacheForContext(e).delete(r)}clear(e){if(this.throwIfDisposed(),e){const r=this.converter(e);this.cache.delete(r)}else this.cache.clear()}cacheForContext(e){const r=this.converter(e);let n=this.cache.get(r);return n||(n=new Map,this.cache.set(r,n)),n}},l(Bg,"ContextCache"),Bg),$g,Ire=($g=class extends zw{constructor(e,r){super((n=>n.toString())),r?(this.toDispose.push(e.workspace.DocumentBuilder.onDocumentPhase(r,(n=>{this.clear(n.uri.toString())}))),this.toDispose.push(e.workspace.DocumentBuilder.onUpdate(((n,i)=>{for(const a of i)this.clear(a)})))):this.toDispose.push(e.workspace.DocumentBuilder.onUpdate(((n,i)=>{const a=n.concat(i);for(const s of a)this.clear(s)})))}},l($g,"DocumentCache"),$g),Fg,$L=(Fg=class extends BL{constructor(e,r){super(),r?(this.toDispose.push(e.workspace.DocumentBuilder.onBuildPhase(r,(()=>{this.clear()}))),this.toDispose.push(e.workspace.DocumentBuilder.onUpdate(((n,i)=>{i.length>0&&this.clear()})))):this.toDispose.push(e.workspace.DocumentBuilder.onUpdate((()=>{this.clear()})))}},l(Fg,"WorkspaceCache"),Fg),zg,Rre=(zg=class{constructor(e){this.reflection=e.shared.AstReflection,this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider,this.indexManager=e.shared.workspace.IndexManager,this.globalScopeCache=new $L(e.shared)}getScope(e){const r=[],n=this.reflection.getReferenceType(e),i=Cs(e.container).precomputedScopes;if(i){let s=e.container;do{const o=i.get(s);o.length>0&&r.push(wn(o).filter((u=>this.reflection.isSubtype(u.type,n)))),s=s.$container}while(s)}let a=this.getGlobalScope(n,e);for(let s=r.length-1;s>=0;s--)a=this.createScope(r[s],a);return a}createScope(e,r,n){return new NC(wn(e),r,n)}createScopeForNodes(e,r,n){const i=wn(e).map((a=>{const s=this.nameProvider.getName(a);if(s)return this.descriptions.createDescription(a,s)})).nonNullable();return new NC(i,r,n)}getGlobalScope(e,r){return this.globalScopeCache.get(e,(()=>new Nre(this.indexManager.allElements(e))))}},l(zg,"DefaultScopeProvider"),zg);function FL(t){return typeof t.$comment=="string"}function IC(t){return typeof t=="object"&&!!t&&("$ref"in t||"$error"in t)}l(FL,"isAstNodeWithComment"),l(IC,"isIntermediateReference");var V2,Gg,Mre=(Gg=class{constructor(e){this.ignoreProperties=new Set(["$container","$containerProperty","$containerIndex","$document","$cstNode"]),this.langiumDocuments=e.shared.workspace.LangiumDocuments,this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider,this.commentProvider=e.documentation.CommentProvider}serialize(e,r){const n=r??{},i=r?.replacer,a=l(((o,u)=>this.replacer(o,u,n)),"defaultReplacer"),s=i?(o,u)=>i(o,u,a):a;try{return this.currentDocument=Cs(e),JSON.stringify(e,s,r?.space)}finally{this.currentDocument=void 0}}deserialize(e,r){const n=r??{},i=JSON.parse(e);return this.linkNode(i,i,n),i}replacer(e,r,{refText:n,sourceText:i,textRegions:a,comments:s,uriConverter:o}){var u,h,d,p;if(!this.ignoreProperties.has(e)){if(na(r)){const f=r.ref,g=n?r.$refText:void 0;if(f){const m=Cs(f);let y="";return this.currentDocument&&this.currentDocument!==m&&(y=o?o(m.uri,r):m.uri.toString()),{$ref:`${y}#${this.astNodeLocator.getAstNodePath(f)}`,$refText:g}}return{$error:(h=(u=r.error)===null||u===void 0?void 0:u.message)!==null&&h!==void 0?h:"Could not resolve reference",$refText:g}}if(_n(r)){let f;if(a&&(f=this.addAstNodeRegionWithAssignmentsTo(Object.assign({},r)),e&&!r.$document||!f?.$textRegion||(f.$textRegion.documentURI=(d=this.currentDocument)===null||d===void 0?void 0:d.uri.toString())),i&&!e&&(f!=null||(f=Object.assign({},r)),f.$sourceText=(p=r.$cstNode)===null||p===void 0?void 0:p.text),s){f!=null||(f=Object.assign({},r));const g=this.commentProvider.getComment(r);g&&(f.$comment=g.replace(/\r/g,""))}return f??r}return r}}addAstNodeRegionWithAssignmentsTo(e){const r=l((n=>({offset:n.offset,end:n.end,length:n.length,range:n.range})),"createDocumentSegment");if(e.$cstNode){const n=(e.$textRegion=r(e.$cstNode)).assignments={};return Object.keys(e).filter((i=>!i.startsWith("$"))).forEach((i=>{const a=F9(e.$cstNode,i).map(r);a.length!==0&&(n[i]=a)})),e}}linkNode(e,r,n,i,a,s){for(const[u,h]of Object.entries(e))if(Array.isArray(h))for(let d=0;d<h.length;d++){const p=h[d];IC(p)?h[d]=this.reviveReference(e,u,r,p,n):_n(p)&&this.linkNode(p,r,n,e,u,d)}else IC(h)?e[u]=this.reviveReference(e,u,r,h,n):_n(h)&&this.linkNode(h,r,n,e,u);const o=e;o.$container=i,o.$containerProperty=a,o.$containerIndex=s}reviveReference(e,r,n,i,a){let s=i.$refText,o=i.$error;if(i.$ref){const u=this.getRefNode(n,i.$ref,a.uriConverter);if(_n(u))return s||(s=this.nameProvider.getName(u)),{$refText:s??"",ref:u};o=u}if(o){const u={$refText:s??""};return u.error={container:e,property:r,message:o,reference:u},u}}getRefNode(e,r,n){try{const i=r.indexOf("#");if(i===0)return this.astNodeLocator.getAstNode(e,r.substring(1))||"Could not resolve path: "+r;if(i<0){const u=n?n(r):Jo.parse(r),h=this.langiumDocuments.getDocument(u);return h?h.parseResult.value:"Could not find document for URI: "+r}const a=n?n(r.substring(0,i)):Jo.parse(r.substring(0,i)),s=this.langiumDocuments.getDocument(a);return s?i===r.length-1?s.parseResult.value:this.astNodeLocator.getAstNode(s.parseResult.value,r.substring(i+1))||"Could not resolve URI: "+r:"Could not find document for URI: "+r}catch(i){return String(i)}}},l(Gg,"DefaultJsonSerializer"),Gg),Ug,Dre=(Ug=class{get map(){return this.fileExtensionMap}constructor(e){this.languageIdMap=new Map,this.fileExtensionMap=new Map,this.textDocuments=e?.workspace.TextDocuments}register(e){const r=e.LanguageMetaData;for(const n of r.fileExtensions)this.fileExtensionMap.has(n)&&console.warn(`The file extension ${n} is used by multiple languages. It is now assigned to '${r.languageId}'.`),this.fileExtensionMap.set(n,e);this.languageIdMap.set(r.languageId,e),this.languageIdMap.size===1?this.singleton=e:this.singleton=void 0}getServices(e){var r,n;if(this.singleton!==void 0)return this.singleton;if(this.languageIdMap.size===0)throw new Error("The service registry is empty. Use `register` to register the services of a language.");const i=(n=(r=this.textDocuments)===null||r===void 0?void 0:r.get(e))===null||n===void 0?void 0:n.languageId;if(i!==void 0){const o=this.languageIdMap.get(i);if(o)return o}const a=oo.extname(e),s=this.fileExtensionMap.get(a);if(!s)throw i?new Error(`The service registry contains no services for the extension '${a}' for language '${i}'.`):new Error(`The service registry contains no services for the extension '${a}'.`);return s}hasServices(e){try{return this.getServices(e),!0}catch{return!1}}get all(){return Array.from(this.languageIdMap.values())}},l(Ug,"DefaultServiceRegistry"),Ug);function cu(t){return{code:t}}l(cu,"diagnosticData"),(V2||(V2={})).all=["fast","slow","built-in"];var Ya,_h,qg,Ore=(qg=class{constructor(e){this.entries=new Z0,this.entriesBefore=[],this.entriesAfter=[],this.reflection=e.shared.AstReflection}register(e,r=this,n="fast"){if(n==="built-in")throw new Error("The 'built-in' category is reserved for lexer, parser, and linker errors.");for(const[i,a]of Object.entries(e)){const s=a;if(Array.isArray(s))for(const o of s){const u={check:this.wrapValidationException(o,r),category:n};this.addEntry(i,u)}else if(typeof s=="function"){const o={check:this.wrapValidationException(s,r),category:n};this.addEntry(i,o)}else mc()}}wrapValidationException(e,r){return async(n,i,a)=>{await this.handleException((()=>e.call(r,n,i,a)),"An error occurred during validation",i,n)}}async handleException(e,r,n,i){try{await e()}catch(a){if(fh(a))throw a;console.error(`${r}:`,a),a instanceof Error&&a.stack&&console.error(a.stack),n("error",`${r}: ${a instanceof Error?a.message:String(a)}`,{node:i})}}addEntry(e,r){if(e!=="AstNode")for(const n of this.reflection.getAllSubTypes(e))this.entries.add(n,r);else this.entries.add("AstNode",r)}getChecks(e,r){let n=wn(this.entries.get(e)).concat(this.entries.get("AstNode"));return r&&(n=n.filter((i=>r.includes(i.category)))),n.map((i=>i.check))}registerBeforeDocument(e,r=this){this.entriesBefore.push(this.wrapPreparationException(e,"An error occurred during set-up of the validation",r))}registerAfterDocument(e,r=this){this.entriesAfter.push(this.wrapPreparationException(e,"An error occurred during tear-down of the validation",r))}wrapPreparationException(e,r,n){return async(i,a,s,o)=>{await this.handleException((()=>e.call(n,i,a,s,o)),r,a,i)}}get checksBefore(){return this.entriesBefore}get checksAfter(){return this.entriesAfter}},l(qg,"ValidationRegistry"),qg),jg,Pre=(jg=class{constructor(e){this.validationRegistry=e.validation.ValidationRegistry,this.metadata=e.LanguageMetaData}async validateDocument(e,r={},n=Fr.CancellationToken.None){const i=e.parseResult,a=[];if(await wi(n),(!r.categories||r.categories.includes("built-in"))&&(this.processLexingErrors(i,a,r),r.stopAfterLexingErrors&&a.some((s=>{var o;return((o=s.data)===null||o===void 0?void 0:o.code)===Ya.LexingError}))||(this.processParsingErrors(i,a,r),r.stopAfterParsingErrors&&a.some((s=>{var o;return((o=s.data)===null||o===void 0?void 0:o.code)===Ya.ParsingError})))||(this.processLinkingErrors(e,a,r),r.stopAfterLinkingErrors&&a.some((s=>{var o;return((o=s.data)===null||o===void 0?void 0:o.code)===Ya.LinkingError})))))return a;try{a.push(...await this.validateAst(i.value,r,n))}catch(s){if(fh(s))throw s;console.error("An error occurred during validation:",s)}return await wi(n),a}processLexingErrors(e,r,n){var i,a,s;const o=[...e.lexerErrors,...(a=(i=e.lexerReport)===null||i===void 0?void 0:i.diagnostics)!==null&&a!==void 0?a:[]];for(const u of o){const h=(s=u.severity)!==null&&s!==void 0?s:"error",d={severity:e2(h),range:{start:{line:u.line-1,character:u.column-1},end:{line:u.line-1,character:u.column+u.length-1}},message:u.message,data:GL(h),source:this.getSource()};r.push(d)}}processParsingErrors(e,r,n){for(const i of e.parserErrors){let a;if(isNaN(i.token.startOffset)){if("previousToken"in i){const s=i.previousToken;if(isNaN(s.startOffset)){const o={line:0,character:0};a={start:o,end:o}}else{const o={line:s.endLine-1,character:s.endColumn};a={start:o,end:o}}}}else a=P2(i.token);if(a){const s={severity:e2("error"),range:a,message:i.message,data:cu(Ya.ParsingError),source:this.getSource()};r.push(s)}}}processLinkingErrors(e,r,n){for(const i of e.references){const a=i.error;if(a){const s={node:a.container,property:a.property,index:a.index,data:{code:Ya.LinkingError,containerType:a.container.$type,property:a.property,refText:a.reference.$refText}};r.push(this.toDiagnostic("error",a.message,s))}}}async validateAst(e,r,n=Fr.CancellationToken.None){const i=[],a=l(((s,o,u)=>{i.push(this.toDiagnostic(s,o,u))}),"acceptor");return await this.validateAstBefore(e,r,a,n),await this.validateAstNodes(e,r,a,n),await this.validateAstAfter(e,r,a,n),i}async validateAstBefore(e,r,n,i=Fr.CancellationToken.None){var a;const s=this.validationRegistry.checksBefore;for(const o of s)await wi(i),await o(e,n,(a=r.categories)!==null&&a!==void 0?a:[],i)}async validateAstNodes(e,r,n,i=Fr.CancellationToken.None){await Promise.all(Po(e).map((async a=>{await wi(i);const s=this.validationRegistry.getChecks(a.$type,r.categories);for(const o of s)await o(a,n,i)})))}async validateAstAfter(e,r,n,i=Fr.CancellationToken.None){var a;const s=this.validationRegistry.checksAfter;for(const o of s)await wi(i),await o(e,n,(a=r.categories)!==null&&a!==void 0?a:[],i)}toDiagnostic(e,r,n){return{message:r,range:zL(n),severity:e2(e),code:n.code,codeDescription:n.codeDescription,tags:n.tags,relatedInformation:n.relatedInformation,data:n.data,source:this.getSource()}}getSource(){return this.metadata.languageId}},l(jg,"DefaultDocumentValidator"),jg);function zL(t){if(t.range)return t.range;let e;return typeof t.property=="string"?e=kw(t.node.$cstNode,t.property,t.index):typeof t.keyword=="string"&&(e=z9(t.node.$cstNode,t.keyword,t.index)),e!=null||(e=t.node.$cstNode),e?e.range:{start:{line:0,character:0},end:{line:0,character:0}}}function e2(t){switch(t){case"error":return 1;case"warning":return 2;case"info":return 3;case"hint":return 4;default:throw new Error("Invalid diagnostic severity: "+t)}}function GL(t){switch(t){case"error":return cu(Ya.LexingError);case"warning":return cu(Ya.LexingWarning);case"info":return cu(Ya.LexingInfo);case"hint":return cu(Ya.LexingHint);default:throw new Error("Invalid diagnostic severity: "+t)}}l(zL,"getDiagnosticRange"),l(e2,"toDiagnosticSeverity"),l(GL,"toDiagnosticData"),(_h=Ya||(Ya={})).LexingError="lexing-error",_h.LexingWarning="lexing-warning",_h.LexingInfo="lexing-info",_h.LexingHint="lexing-hint",_h.ParsingError="parsing-error",_h.LinkingError="linking-error";var Wg,Bre=(Wg=class{constructor(e){this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider}createDescription(e,r,n){const i=n??Cs(e);r!=null||(r=this.nameProvider.getName(e));const a=this.astNodeLocator.getAstNodePath(e);if(!r)throw new Error(`Node at path ${a} has no name.`);let s;const o=l((()=>{var u;return s??(s=X0((u=this.nameProvider.getNameNode(e))!==null&&u!==void 0?u:e.$cstNode))}),"nameSegmentGetter");return{node:e,name:r,get nameSegment(){return o()},selectionSegment:X0(e.$cstNode),type:e.$type,documentUri:i.uri,path:a}}},l(Wg,"DefaultAstNodeDescriptionProvider"),Wg),Yg,$re=(Yg=class{constructor(e){this.nodeLocator=e.workspace.AstNodeLocator}async createDescriptions(e,r=Fr.CancellationToken.None){const n=[],i=e.parseResult.value;for(const a of Po(i))await wi(r),F2(a).filter((s=>!Qd(s))).forEach((s=>{const o=this.createDescription(s);o&&n.push(o)}));return n}createDescription(e){const r=e.reference.$nodeDescription,n=e.reference.$refNode;if(!r||!n)return;const i=Cs(e.container).uri;return{sourceUri:i,sourcePath:this.nodeLocator.getAstNodePath(e.container),targetUri:r.documentUri,targetPath:r.path,segment:X0(n),local:oo.equals(r.documentUri,i)}}},l(Yg,"DefaultReferenceDescriptionProvider"),Yg),Vg,Fre=(Vg=class{constructor(){this.segmentSeparator="/",this.indexSeparator="@"}getAstNodePath(e){if(e.$container){const r=this.getAstNodePath(e.$container),n=this.getPathSegment(e);return r+this.segmentSeparator+n}return""}getPathSegment({$containerProperty:e,$containerIndex:r}){if(!e)throw new Error("Missing '$containerProperty' in AST node.");return r!==void 0?e+this.indexSeparator+r:e}getAstNode(e,r){return r.split(this.segmentSeparator).reduce(((n,i)=>{if(!n||i.length===0)return n;const a=i.indexOf(this.indexSeparator);if(a>0){const s=i.substring(0,a),o=parseInt(i.substring(a+1)),u=n[s];return u?.[o]}return n[i]}),e)}},l(Vg,"DefaultAstNodeLocator"),Vg),Gw={};w6(Gw,Ci(u7()));var gu,Hg,zre=(Hg=class{constructor(e){this._ready=new Qo,this.settings={},this.workspaceConfig=!1,this.onConfigurationSectionUpdateEmitter=new Gw.Emitter,this.serviceRegistry=e.ServiceRegistry}get ready(){return this._ready.promise}initialize(e){var r,n;this.workspaceConfig=(n=(r=e.capabilities.workspace)===null||r===void 0?void 0:r.configuration)!==null&&n!==void 0&&n}async initialized(e){if(this.workspaceConfig){if(e.register){const r=this.serviceRegistry.all;e.register({section:r.map((n=>this.toSectionName(n.LanguageMetaData.languageId)))})}if(e.fetchConfiguration){const r=this.serviceRegistry.all.map((i=>({section:this.toSectionName(i.LanguageMetaData.languageId)}))),n=await e.fetchConfiguration(r);r.forEach(((i,a)=>{this.updateSectionConfiguration(i.section,n[a])}))}}this._ready.resolve()}updateConfiguration(e){e.settings&&Object.keys(e.settings).forEach((r=>{const n=e.settings[r];this.updateSectionConfiguration(r,n),this.onConfigurationSectionUpdateEmitter.fire({section:r,configuration:n})}))}updateSectionConfiguration(e,r){this.settings[e]=r}async getConfiguration(e,r){await this.ready;const n=this.toSectionName(e);if(this.settings[n])return this.settings[n][r]}toSectionName(e){return`${e}`}get onConfigurationSectionUpdate(){return this.onConfigurationSectionUpdateEmitter.event}},l(Hg,"DefaultConfigurationProvider"),Hg);(function(t){function e(r){return{dispose:l((async()=>await r()),"dispose")}}l(e,"create"),t.create=e})(gu||(gu={}));var Xg,Gre=(Xg=class{constructor(e){this.updateBuildOptions={validation:{categories:["built-in","fast"]}},this.updateListeners=[],this.buildPhaseListeners=new Z0,this.documentPhaseListeners=new Z0,this.buildState=new Map,this.documentBuildWaiters=new Map,this.currentState=jr.Changed,this.langiumDocuments=e.workspace.LangiumDocuments,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory,this.textDocuments=e.workspace.TextDocuments,this.indexManager=e.workspace.IndexManager,this.serviceRegistry=e.ServiceRegistry}async build(e,r={},n=Fr.CancellationToken.None){var i,a;for(const s of e){const o=s.uri.toString();if(s.state===jr.Validated){if(typeof r.validation=="boolean"&&r.validation)s.state=jr.IndexedReferences,s.diagnostics=void 0,this.buildState.delete(o);else if(typeof r.validation=="object"){const u=this.buildState.get(o),h=(i=u?.result)===null||i===void 0?void 0:i.validationChecks;if(h){const d=((a=r.validation.categories)!==null&&a!==void 0?a:V2.all).filter((p=>!h.includes(p)));d.length>0&&(this.buildState.set(o,{completed:!1,options:{validation:Object.assign(Object.assign({},r.validation),{categories:d})},result:u.result}),s.state=jr.IndexedReferences)}}}else this.buildState.delete(o)}this.currentState=jr.Changed,await this.emitUpdate(e.map((s=>s.uri)),[]),await this.buildDocuments(e,r,n)}async update(e,r,n=Fr.CancellationToken.None){this.currentState=jr.Changed;for(const s of r)this.langiumDocuments.deleteDocument(s),this.buildState.delete(s.toString()),this.indexManager.remove(s);for(const s of e){if(!this.langiumDocuments.invalidateDocument(s)){const o=this.langiumDocumentFactory.fromModel({$type:"INVALID"},s);o.state=jr.Changed,this.langiumDocuments.addDocument(o)}this.buildState.delete(s.toString())}const i=wn(e).concat(r).map((s=>s.toString())).toSet();this.langiumDocuments.all.filter((s=>!i.has(s.uri.toString())&&this.shouldRelink(s,i))).forEach((s=>{this.serviceRegistry.getServices(s.uri).references.Linker.unlink(s),s.state=Math.min(s.state,jr.ComputedScopes),s.diagnostics=void 0})),await this.emitUpdate(e,r),await wi(n);const a=this.sortDocuments(this.langiumDocuments.all.filter((s=>{var o;return s.state<jr.Linked||!(!((o=this.buildState.get(s.uri.toString()))===null||o===void 0)&&o.completed)})).toArray());await this.buildDocuments(a,this.updateBuildOptions,n)}async emitUpdate(e,r){await Promise.all(this.updateListeners.map((n=>n(e,r))))}sortDocuments(e){let r=0,n=e.length-1;for(;r<n;){for(;r<e.length&&this.hasTextDocument(e[r]);)r++;for(;n>=0&&!this.hasTextDocument(e[n]);)n--;r<n&&([e[r],e[n]]=[e[n],e[r]])}return e}hasTextDocument(e){var r;return!!(!((r=this.textDocuments)===null||r===void 0)&&r.get(e.uri))}shouldRelink(e,r){return!!e.references.some((n=>n.error!==void 0))||this.indexManager.isAffected(e,r)}onUpdate(e){return this.updateListeners.push(e),gu.create((()=>{const r=this.updateListeners.indexOf(e);r>=0&&this.updateListeners.splice(r,1)}))}async buildDocuments(e,r,n){this.prepareBuild(e,r),await this.runCancelable(e,jr.Parsed,n,(a=>this.langiumDocumentFactory.update(a,n))),await this.runCancelable(e,jr.IndexedContent,n,(a=>this.indexManager.updateContent(a,n))),await this.runCancelable(e,jr.ComputedScopes,n,(async a=>{const s=this.serviceRegistry.getServices(a.uri).references.ScopeComputation;a.precomputedScopes=await s.computeLocalScopes(a,n)})),await this.runCancelable(e,jr.Linked,n,(a=>this.serviceRegistry.getServices(a.uri).references.Linker.link(a,n))),await this.runCancelable(e,jr.IndexedReferences,n,(a=>this.indexManager.updateReferences(a,n)));const i=e.filter((a=>this.shouldValidate(a)));await this.runCancelable(i,jr.Validated,n,(a=>this.validate(a,n)));for(const a of e){const s=this.buildState.get(a.uri.toString());s&&(s.completed=!0)}}prepareBuild(e,r){for(const n of e){const i=n.uri.toString(),a=this.buildState.get(i);a&&!a.completed||this.buildState.set(i,{completed:!1,options:r,result:a?.result})}}async runCancelable(e,r,n,i){const a=e.filter((o=>o.state<r));for(const o of a)await wi(n),await i(o),o.state=r,await this.notifyDocumentPhase(o,r,n);const s=e.filter((o=>o.state===r));await this.notifyBuildPhase(s,r,n),this.currentState=r}onBuildPhase(e,r){return this.buildPhaseListeners.add(e,r),gu.create((()=>{this.buildPhaseListeners.delete(e,r)}))}onDocumentPhase(e,r){return this.documentPhaseListeners.add(e,r),gu.create((()=>{this.documentPhaseListeners.delete(e,r)}))}waitUntil(e,r,n){let i;if(r&&"path"in r?i=r:n=r,n!=null||(n=Fr.CancellationToken.None),i){const a=this.langiumDocuments.getDocument(i);if(a&&a.state>e)return Promise.resolve(i)}return this.currentState>=e?Promise.resolve(void 0):n.isCancellationRequested?Promise.reject(ac):new Promise(((a,s)=>{const o=this.onBuildPhase(e,(()=>{if(o.dispose(),u.dispose(),i){const h=this.langiumDocuments.getDocument(i);a(h?.uri)}else a(void 0)})),u=n.onCancellationRequested((()=>{o.dispose(),u.dispose(),s(ac)}))}))}async notifyDocumentPhase(e,r,n){const i=this.documentPhaseListeners.get(r).slice();for(const a of i)try{await a(e,n)}catch(s){if(!fh(s))throw s}}async notifyBuildPhase(e,r,n){if(e.length===0)return;const i=this.buildPhaseListeners.get(r).slice();for(const a of i)await wi(n),await a(e,n)}shouldValidate(e){return!!this.getBuildOptions(e).validation}async validate(e,r){var n,i;const a=this.serviceRegistry.getServices(e.uri).validation.DocumentValidator,s=this.getBuildOptions(e).validation,o=typeof s=="object"?s:void 0,u=await a.validateDocument(e,o,r);e.diagnostics?e.diagnostics.push(...u):e.diagnostics=u;const h=this.buildState.get(e.uri.toString());if(h){(n=h.result)!==null&&n!==void 0||(h.result={});const d=(i=o?.categories)!==null&&i!==void 0?i:V2.all;h.result.validationChecks?h.result.validationChecks.push(...d):h.result.validationChecks=[...d]}}getBuildOptions(e){var r,n;return(n=(r=this.buildState.get(e.uri.toString()))===null||r===void 0?void 0:r.options)!==null&&n!==void 0?n:{}}},l(Xg,"DefaultDocumentBuilder"),Xg),Kg,Ure=(Kg=class{constructor(e){this.symbolIndex=new Map,this.symbolByTypeIndex=new zw,this.referenceIndex=new Map,this.documents=e.workspace.LangiumDocuments,this.serviceRegistry=e.ServiceRegistry,this.astReflection=e.AstReflection}findAllReferences(e,r){const n=Cs(e).uri,i=[];return this.referenceIndex.forEach((a=>{a.forEach((s=>{oo.equals(s.targetUri,n)&&s.targetPath===r&&i.push(s)}))})),wn(i)}allElements(e,r){let n=wn(this.symbolIndex.keys());return r&&(n=n.filter((i=>!r||r.has(i)))),n.map((i=>this.getFileDescriptions(i,e))).flat()}getFileDescriptions(e,r){var n;return r?this.symbolByTypeIndex.get(e,r,(()=>{var a;return((a=this.symbolIndex.get(e))!==null&&a!==void 0?a:[]).filter((s=>this.astReflection.isSubtype(s.type,r)))})):(n=this.symbolIndex.get(e))!==null&&n!==void 0?n:[]}remove(e){const r=e.toString();this.symbolIndex.delete(r),this.symbolByTypeIndex.clear(r),this.referenceIndex.delete(r)}async updateContent(e,r=Fr.CancellationToken.None){const n=this.serviceRegistry.getServices(e.uri),i=await n.references.ScopeComputation.computeExports(e,r),a=e.uri.toString();this.symbolIndex.set(a,i),this.symbolByTypeIndex.clear(a)}async updateReferences(e,r=Fr.CancellationToken.None){const n=this.serviceRegistry.getServices(e.uri),i=await n.workspace.ReferenceDescriptionProvider.createDescriptions(e,r);this.referenceIndex.set(e.uri.toString(),i)}isAffected(e,r){const n=this.referenceIndex.get(e.uri.toString());return!!n&&n.some((i=>!i.local&&r.has(i.targetUri.toString())))}},l(Kg,"DefaultIndexManager"),Kg),Zg,qre=(Zg=class{constructor(e){this.initialBuildOptions={},this._ready=new Qo,this.serviceRegistry=e.ServiceRegistry,this.langiumDocuments=e.workspace.LangiumDocuments,this.documentBuilder=e.workspace.DocumentBuilder,this.fileSystemProvider=e.workspace.FileSystemProvider,this.mutex=e.workspace.WorkspaceLock}get ready(){return this._ready.promise}get workspaceFolders(){return this.folders}initialize(e){var r;this.folders=(r=e.workspaceFolders)!==null&&r!==void 0?r:void 0}initialized(e){return this.mutex.write((r=>{var n;return this.initializeWorkspace((n=this.folders)!==null&&n!==void 0?n:[],r)}))}async initializeWorkspace(e,r=Fr.CancellationToken.None){const n=await this.performStartup(e);await wi(r),await this.documentBuilder.build(n,this.initialBuildOptions,r)}async performStartup(e){const r=this.serviceRegistry.all.flatMap((a=>a.LanguageMetaData.fileExtensions)),n=[],i=l((a=>{n.push(a),this.langiumDocuments.hasDocument(a.uri)||this.langiumDocuments.addDocument(a)}),"collector");return await this.loadAdditionalDocuments(e,i),await Promise.all(e.map((a=>[a,this.getRootFolder(a)])).map((async a=>this.traverseFolder(...a,r,i)))),this._ready.resolve(),n}loadAdditionalDocuments(e,r){return Promise.resolve()}getRootFolder(e){return Jo.parse(e.uri)}async traverseFolder(e,r,n,i){const a=await this.fileSystemProvider.readDirectory(r);await Promise.all(a.map((async s=>{if(this.includeEntry(e,s,n)){if(s.isDirectory)await this.traverseFolder(e,s.uri,n,i);else if(s.isFile){const o=await this.langiumDocuments.getOrCreateDocument(s.uri);i(o)}}})))}includeEntry(e,r,n){const i=oo.basename(r.uri);if(i.startsWith("."))return!1;if(r.isDirectory)return i!=="node_modules"&&i!=="out";if(r.isFile){const a=oo.extname(r.uri);return n.includes(a)}return!1}},l(Zg,"DefaultWorkspaceManager"),Zg),Qg,jre=(Qg=class{buildUnexpectedCharactersMessage(e,r,n,i,a){return yC.buildUnexpectedCharactersMessage(e,r,n,i,a)}buildUnableToPopLexerModeMessage(e){return yC.buildUnableToPopLexerModeMessage(e)}},l(Qg,"DefaultLexerErrorMessageProvider"),Qg),UL={mode:"full"},Jg,qL=(Jg=class{constructor(e){this.errorMessageProvider=e.parser.LexerErrorMessageProvider,this.tokenBuilder=e.parser.TokenBuilder;const r=this.tokenBuilder.buildTokens(e.Grammar,{caseInsensitive:e.LanguageMetaData.caseInsensitive});this.tokenTypes=this.toTokenTypeDictionary(r);const n=X5(r)?Object.values(r):r,i=e.LanguageMetaData.mode==="production";this.chevrotainLexer=new zi(n,{positionTracking:"full",skipValidations:i,errorMessageProvider:this.errorMessageProvider})}get definition(){return this.tokenTypes}tokenize(e,r=UL){var n,i,a;const s=this.chevrotainLexer.tokenize(e);return{tokens:s.tokens,errors:s.errors,hidden:(n=s.groups.hidden)!==null&&n!==void 0?n:[],report:(a=(i=this.tokenBuilder).flushLexingReport)===null||a===void 0?void 0:a.call(i,e)}}toTokenTypeDictionary(e){if(X5(e))return e;const r=qw(e)?Object.values(e.modes).flat():e,n={};return r.forEach((i=>n[i.name]=i)),n}},l(Jg,"DefaultLexer"),Jg);function Uw(t){return Array.isArray(t)&&(t.length===0||"name"in t[0])}function qw(t){return t&&"modes"in t&&"defaultMode"in t}function X5(t){return!Uw(t)&&!qw(t)}function jL(t,e,r){let n,i;return typeof t=="string"?(i=e,n=r):(i=t.range.start,n=e),i||(i=xr.create(0,0)),Hre({index:0,tokens:Wre({lines:YL(t),position:i,options:jw(n)}),position:i})}function WL(t,e){const r=jw(e),n=YL(t);if(n.length===0)return!1;const i=n[0],a=n[n.length-1],s=r.start,o=r.end;return!!s?.exec(i)&&!!o?.exec(a)}function YL(t){let e="";return e=typeof t=="string"?t:t.text,e.split(P7)}l(Uw,"isTokenTypeArray"),l(qw,"isIMultiModeLexerDefinition"),l(X5,"isTokenTypeDictionary"),l(jL,"parseJSDoc"),l(WL,"isJSDoc"),l(YL,"getLines");var hO=/\s*(@([\p{L}][\p{L}\p{N}]*)?)/uy,wbe=/\{(@[\p{L}][\p{L}\p{N}]*)(\s*)([^\r\n}]+)?\}/gu;function Wre(t){var e,r,n;const i=[];let a=t.position.line,s=t.position.character;for(let o=0;o<t.lines.length;o++){const u=o===0,h=o===t.lines.length-1;let d=t.lines[o],p=0;if(u&&t.options.start){const f=(e=t.options.start)===null||e===void 0?void 0:e.exec(d);f&&(p=f.index+f[0].length)}else{const f=(r=t.options.line)===null||r===void 0?void 0:r.exec(d);f&&(p=f.index+f[0].length)}if(h){const f=(n=t.options.end)===null||n===void 0?void 0:n.exec(d);f&&(d=d.substring(0,f.index))}if(d=d.substring(0,Vre(d)),K5(d,p)>=d.length){if(i.length>0){const f=xr.create(a,s);i.push({type:"break",content:"",range:sr.create(f,f)})}}else{hO.lastIndex=p;const f=hO.exec(d);if(f){const g=f[0],m=f[1],y=xr.create(a,s+p),v=xr.create(a,s+p+g.length);i.push({type:"tag",content:m,range:sr.create(y,v)}),p+=g.length,p=K5(d,p)}if(p<d.length){const g=d.substring(p),m=Array.from(g.matchAll(wbe));i.push(...Yre(m,g,a,s+p))}}a++,s=0}return i.length>0&&i[i.length-1].type==="break"?i.slice(0,-1):i}function Yre(t,e,r,n){const i=[];if(t.length===0){const a=xr.create(r,n),s=xr.create(r,n+e.length);i.push({type:"text",content:e,range:sr.create(a,s)})}else{let a=0;for(const o of t){const u=o.index,h=e.substring(a,u);h.length>0&&i.push({type:"text",content:e.substring(a,u),range:sr.create(xr.create(r,a+n),xr.create(r,u+n))});let d=h.length+1;const p=o[1];if(i.push({type:"inline-tag",content:p,range:sr.create(xr.create(r,a+d+n),xr.create(r,a+d+p.length+n))}),d+=p.length,o.length===4){d+=o[2].length;const f=o[3];i.push({type:"text",content:f,range:sr.create(xr.create(r,a+d+n),xr.create(r,a+d+f.length+n))})}else i.push({type:"text",content:"",range:sr.create(xr.create(r,a+d+n),xr.create(r,a+d+n))});a=u+o[0].length}const s=e.substring(a);s.length>0&&i.push({type:"text",content:s,range:sr.create(xr.create(r,a+n),xr.create(r,a+n+s.length))})}return i}l(Wre,"tokenize"),l(Yre,"buildInlineTokens");var kbe=/\S/,Tbe=/\s*$/;function K5(t,e){const r=t.substring(e).match(kbe);return r?e+r.index:t.length}function Vre(t){const e=t.match(Tbe);if(e&&typeof e.index=="number")return e.index}function Hre(t){var e,r,n,i;const a=xr.create(t.position.line,t.position.character);if(t.tokens.length===0)return new dO([],sr.create(a,a));const s=[];for(;t.index<t.tokens.length;){const h=Xre(t,s[s.length-1]);h&&s.push(h)}const o=(r=(e=s[0])===null||e===void 0?void 0:e.range.start)!==null&&r!==void 0?r:a,u=(i=(n=s[s.length-1])===null||n===void 0?void 0:n.range.end)!==null&&i!==void 0?i:a;return new dO(s,sr.create(o,u))}function Xre(t,e){const r=t.tokens[t.index];return r.type==="tag"?HL(t,!1):r.type==="text"||r.type==="inline-tag"?VL(t):(Kre(r,e),void t.index++)}function Kre(t,e){if(e){const r=new ene("",t.range);"inlines"in e?e.inlines.push(r):e.content.inlines.push(r)}}function VL(t){let e=t.tokens[t.index];const r=e;let n=e;const i=[];for(;e&&e.type!=="break"&&e.type!=="tag";)i.push(Zre(t)),n=e,e=t.tokens[t.index];return new RC(i,sr.create(r.range.start,n.range.end))}function Zre(t){return t.tokens[t.index].type==="inline-tag"?HL(t,!0):XL(t)}function HL(t,e){const r=t.tokens[t.index++],n=r.content.substring(1),i=t.tokens[t.index];if(i?.type==="text"){if(e){const a=XL(t);return new ET(n,new RC([a],a.range),e,sr.create(r.range.start,a.range.end))}{const a=VL(t);return new ET(n,a,e,sr.create(r.range.start,a.range.end))}}{const a=r.range;return new ET(n,new RC([],a),e,a)}}function XL(t){const e=t.tokens[t.index++];return new ene(e.content,e.range)}function jw(t){if(!t)return jw({start:"/**",end:"*/",line:"*"});const{start:e,end:r,line:n}=t;return{start:Jb(e,!0),end:Jb(r,!1),line:Jb(n,!0)}}function Jb(t,e){if(typeof t=="string"||typeof t=="object"){const r=typeof t=="string"?fm(t):t.source;return e?new RegExp(`^\\s*${r}`):new RegExp(`\\s*${r}\\s*$`)}return t}l(K5,"skipWhitespace"),l(Vre,"lastCharacter"),l(Hre,"parseJSDocComment"),l(Xre,"parseJSDocElement"),l(Kre,"appendEmptyLine"),l(VL,"parseJSDocText"),l(Zre,"parseJSDocInline"),l(HL,"parseJSDocTag"),l(XL,"parseJSDocLine"),l(jw,"normalizeOptions"),l(Jb,"normalizeOption");var e0,dO=(e0=class{constructor(e,r){this.elements=e,this.range=r}getTag(e){return this.getAllTags().find((r=>r.name===e))}getTags(e){return this.getAllTags().filter((r=>r.name===e))}getAllTags(){return this.elements.filter((e=>"name"in e))}toString(){let e="";for(const r of this.elements)if(e.length===0)e=r.toString();else{const n=r.toString();e+=MC(e)+n}return e.trim()}toMarkdown(e){let r="";for(const n of this.elements)if(r.length===0)r=n.toMarkdown(e);else{const i=n.toMarkdown(e);r+=MC(r)+i}return r.trim()}},l(e0,"JSDocCommentImpl"),e0),t0,ET=(t0=class{constructor(e,r,n,i){this.name=e,this.content=r,this.inline=n,this.range=i}toString(){let e=`@${this.name}`;const r=this.content.toString();return this.content.inlines.length===1?e=`${e} ${r}`:this.content.inlines.length>1&&(e=`${e}
${r}`),this.inline?`{${e}}`:e}toMarkdown(e){var r,n;return(n=(r=e?.renderTag)===null||r===void 0?void 0:r.call(e,this))!==null&&n!==void 0?n:this.toMarkdownDefault(e)}toMarkdownDefault(e){const r=this.content.toMarkdown(e);if(this.inline){const a=Qre(this.name,r,e??{});if(typeof a=="string")return a}let n="";e?.tag==="italic"||e?.tag===void 0?n="*":e?.tag==="bold"?n="**":e?.tag==="bold-italic"&&(n="***");let i=`${n}@${this.name}${n}`;return this.content.inlines.length===1?i=`${i}  ${r}`:this.content.inlines.length>1&&(i=`${i}
${r}`),this.inline?`{${i}}`:i}},l(t0,"JSDocTagImpl"),t0);function Qre(t,e,r){var n,i;if(t==="linkplain"||t==="linkcode"||t==="link"){const a=e.indexOf(" ");let s=e;if(a>0){const o=K5(e,a);s=e.substring(o),e=e.substring(0,a)}return(t==="linkcode"||t==="link"&&r.link==="code")&&(s=`\`${s}\``),(i=(n=r.renderLink)===null||n===void 0?void 0:n.call(r,e,s))!==null&&i!==void 0?i:Jre(e,s)}}function Jre(t,e){try{return Jo.parse(t,!0),`[${e}](${t})`}catch{return t}}l(Qre,"renderInlineTag"),l(Jre,"renderLinkDefault");var r0,RC=(r0=class{constructor(e,r){this.inlines=e,this.range=r}toString(){let e="";for(let r=0;r<this.inlines.length;r++){const n=this.inlines[r],i=this.inlines[r+1];e+=n.toString(),i&&i.range.start.line>n.range.start.line&&(e+=`
`)}return e}toMarkdown(e){let r="";for(let n=0;n<this.inlines.length;n++){const i=this.inlines[n],a=this.inlines[n+1];r+=i.toMarkdown(e),a&&a.range.start.line>i.range.start.line&&(r+=`
`)}return r}},l(r0,"JSDocTextImpl"),r0),n0,ene=(n0=class{constructor(e,r){this.text=e,this.range=r}toString(){return this.text}toMarkdown(){return this.text}},l(n0,"JSDocLineImpl"),n0);function MC(t){return t.endsWith(`
`)?`
`:`

`}l(MC,"fillNewlines");var DC,i0,tne=(i0=class{constructor(e){this.indexManager=e.shared.workspace.IndexManager,this.commentProvider=e.documentation.CommentProvider}getDocumentation(e){const r=this.commentProvider.getComment(e);if(r&&WL(r))return jL(r).toMarkdown({renderLink:l(((n,i)=>this.documentationLinkRenderer(e,n,i)),"renderLink"),renderTag:l((n=>this.documentationTagRenderer(e,n)),"renderTag")})}documentationLinkRenderer(e,r,n){var i;const a=(i=this.findNameInPrecomputedScopes(e,r))!==null&&i!==void 0?i:this.findNameInGlobalScope(e,r);if(a&&a.nameSegment){const s=a.nameSegment.range.start.line+1,o=a.nameSegment.range.start.character+1;return`[${n}](${a.documentUri.with({fragment:`L${s},${o}`}).toString()})`}}documentationTagRenderer(e,r){}findNameInPrecomputedScopes(e,r){const n=Cs(e).precomputedScopes;if(!n)return;let i=e;do{const a=n.get(i).find((s=>s.name===r));if(a)return a;i=i.$container}while(i)}findNameInGlobalScope(e,r){return this.indexManager.allElements().find((i=>i.name===r))}},l(i0,"JSDocDocumentationProvider"),i0),a0,rne=(a0=class{constructor(e){this.grammarConfig=()=>e.parser.GrammarConfig}getComment(e){var r;return FL(e)?e.$comment:(r=n9(e.$cstNode,this.grammarConfig().multilineCommentRules))===null||r===void 0?void 0:r.text}},l(a0,"DefaultCommentProvider"),a0),s0,nne=(s0=class{constructor(e){this.syncParser=e.parser.LangiumParser}parse(e,r){return Promise.resolve(this.syncParser.parse(e))}},l(s0,"DefaultAsyncParser"),s0),o0,Ebe=(o0=class{constructor(e){this.threadCount=8,this.terminationDelay=200,this.workerPool=[],this.queue=[],this.hydrator=e.serializer.Hydrator}initializeWorkers(){for(;this.workerPool.length<this.threadCount;){const e=this.createWorker();e.onReady((()=>{if(this.queue.length>0){const r=this.queue.shift();r&&(e.lock(),r.resolve(e))}})),this.workerPool.push(e)}}async parse(e,r){const n=await this.acquireParserWorker(r),i=new Qo;let a;const s=r.onCancellationRequested((()=>{a=setTimeout((()=>{this.terminateWorker(n)}),this.terminationDelay)}));return n.parse(e).then((o=>{const u=this.hydrator.hydrate(o);i.resolve(u)})).catch((o=>{i.reject(o)})).finally((()=>{s.dispose(),clearTimeout(a)})),i.promise}terminateWorker(e){e.terminate();const r=this.workerPool.indexOf(e);r>=0&&this.workerPool.splice(r,1)}async acquireParserWorker(e){this.initializeWorkers();for(const n of this.workerPool)if(n.ready)return n.lock(),n;const r=new Qo;return e.onCancellationRequested((()=>{const n=this.queue.indexOf(r);n>=0&&this.queue.splice(n,1),r.reject(ac)})),this.queue.push(r),r.promise}},l(o0,"AbstractThreadedAsyncParser"),o0),l0,_be=(l0=class{get ready(){return this._ready}get onReady(){return this.onReadyEmitter.event}constructor(e,r,n,i){this.onReadyEmitter=new Gw.Emitter,this.deferred=new Qo,this._ready=!0,this._parsing=!1,this.sendMessage=e,this._terminate=i,r((a=>{const s=a;this.deferred.resolve(s),this.unlock()})),n((a=>{this.deferred.reject(a),this.unlock()}))}terminate(){this.deferred.reject(ac),this._terminate()}lock(){this._ready=!1}unlock(){this._parsing=!1,this._ready=!0,this.onReadyEmitter.fire()}parse(e){if(this._parsing)throw new Error("Parser worker is busy");return this._parsing=!0,this.deferred=new Qo,this.sendMessage(e),this.deferred.promise}},l(l0,"ParserWorker"),l0),c0,ine=(c0=class{constructor(){this.previousTokenSource=new Fr.CancellationTokenSource,this.writeQueue=[],this.readQueue=[],this.done=!0}write(e){this.cancelWrite();const r=$w();return this.previousTokenSource=r,this.enqueue(this.writeQueue,e,r.token)}read(e){return this.enqueue(this.readQueue,e)}enqueue(e,r,n=Fr.CancellationToken.None){const i=new Qo,a={action:r,deferred:i,cancellationToken:n};return e.push(a),this.performNextOperation(),i.promise}async performNextOperation(){if(!this.done)return;const e=[];if(this.writeQueue.length>0)e.push(this.writeQueue.shift());else{if(!(this.readQueue.length>0))return;e.push(...this.readQueue.splice(0,this.readQueue.length))}this.done=!1,await Promise.all(e.map((async({action:r,deferred:n,cancellationToken:i})=>{try{const a=await Promise.resolve().then((()=>r(i)));n.resolve(a)}catch(a){fh(a)?n.resolve(void 0):n.reject(a)}}))),this.done=!0,this.performNextOperation()}cancelWrite(){this.previousTokenSource.cancel()}},l(c0,"DefaultWorkspaceLock"),c0),u0,ane=(u0=class{constructor(e){this.grammarElementIdMap=new H5,this.tokenTypeIdMap=new H5,this.grammar=e.Grammar,this.lexer=e.parser.Lexer,this.linker=e.references.Linker}dehydrate(e){return{lexerErrors:e.lexerErrors,lexerReport:e.lexerReport?this.dehydrateLexerReport(e.lexerReport):void 0,parserErrors:e.parserErrors.map((r=>Object.assign(Object.assign({},r),{message:r.message}))),value:this.dehydrateAstNode(e.value,this.createDehyrationContext(e.value))}}dehydrateLexerReport(e){return e}createDehyrationContext(e){const r=new Map,n=new Map;for(const i of Po(e))r.set(i,{});if(e.$cstNode)for(const i of H0(e.$cstNode))n.set(i,{});return{astNodes:r,cstNodes:n}}dehydrateAstNode(e,r){const n=r.astNodes.get(e);n.$type=e.$type,n.$containerIndex=e.$containerIndex,n.$containerProperty=e.$containerProperty,e.$cstNode!==void 0&&(n.$cstNode=this.dehydrateCstNode(e.$cstNode,r));for(const[i,a]of Object.entries(e))if(!i.startsWith("$"))if(Array.isArray(a)){const s=[];n[i]=s;for(const o of a)_n(o)?s.push(this.dehydrateAstNode(o,r)):na(o)?s.push(this.dehydrateReference(o,r)):s.push(o)}else _n(a)?n[i]=this.dehydrateAstNode(a,r):na(a)?n[i]=this.dehydrateReference(a,r):a!==void 0&&(n[i]=a);return n}dehydrateReference(e,r){const n={};return n.$refText=e.$refText,e.$refNode&&(n.$refNode=r.cstNodes.get(e.$refNode)),n}dehydrateCstNode(e,r){const n=r.cstNodes.get(e);return cw(e)?n.fullText=e.fullText:n.grammarSource=this.getGrammarElementId(e.grammarSource),n.hidden=e.hidden,n.astNode=r.astNodes.get(e.astNode),Yo(e)?n.content=e.content.map((i=>this.dehydrateCstNode(i,r))):uh(e)&&(n.tokenType=e.tokenType.name,n.offset=e.offset,n.length=e.length,n.startLine=e.range.start.line,n.startColumn=e.range.start.character,n.endLine=e.range.end.line,n.endColumn=e.range.end.character),n}hydrate(e){const r=e.value,n=this.createHydrationContext(r);return"$cstNode"in r&&this.hydrateCstNode(r.$cstNode,n),{lexerErrors:e.lexerErrors,lexerReport:e.lexerReport,parserErrors:e.parserErrors,value:this.hydrateAstNode(r,n)}}createHydrationContext(e){const r=new Map,n=new Map;for(const a of Po(e))r.set(a,{});let i;if(e.$cstNode)for(const a of H0(e.$cstNode)){let s;"fullText"in a?(s=new TL(a.fullText),i=s):"content"in a?s=new Dw:"tokenType"in a&&(s=this.hydrateCstLeafNode(a)),s&&(n.set(a,s),s.root=i)}return{astNodes:r,cstNodes:n}}hydrateAstNode(e,r){const n=r.astNodes.get(e);n.$type=e.$type,n.$containerIndex=e.$containerIndex,n.$containerProperty=e.$containerProperty,e.$cstNode&&(n.$cstNode=r.cstNodes.get(e.$cstNode));for(const[i,a]of Object.entries(e))if(!i.startsWith("$"))if(Array.isArray(a)){const s=[];n[i]=s;for(const o of a)_n(o)?s.push(this.setParent(this.hydrateAstNode(o,r),n)):na(o)?s.push(this.hydrateReference(o,n,i,r)):s.push(o)}else _n(a)?n[i]=this.setParent(this.hydrateAstNode(a,r),n):na(a)?n[i]=this.hydrateReference(a,n,i,r):a!==void 0&&(n[i]=a);return n}setParent(e,r){return e.$container=r,e}hydrateReference(e,r,n,i){return this.linker.buildReference(r,n,i.cstNodes.get(e.$refNode),e.$refText)}hydrateCstNode(e,r,n=0){const i=r.cstNodes.get(e);if(typeof e.grammarSource=="number"&&(i.grammarSource=this.getGrammarElement(e.grammarSource)),i.astNode=r.astNodes.get(e.astNode),Yo(i))for(const a of e.content){const s=this.hydrateCstNode(a,r,n++);i.content.push(s)}return i}hydrateCstLeafNode(e){const r=this.getTokenType(e.tokenType),n=e.offset,i=e.length,a=e.startLine,s=e.startColumn,o=e.endLine,u=e.endColumn,h=e.hidden;return new q5(n,i,{start:{line:a,character:s},end:{line:o,character:u}},r,h)}getTokenType(e){return this.lexer.definition[e]}getGrammarElementId(e){if(e)return this.grammarElementIdMap.size===0&&this.createGrammarElementIdMap(),this.grammarElementIdMap.get(e)}getGrammarElement(e){return this.grammarElementIdMap.size===0&&this.createGrammarElementIdMap(),this.grammarElementIdMap.getKey(e)}createGrammarElementIdMap(){let e=0;for(const r of Po(this.grammar))pw(r)&&this.grammarElementIdMap.set(r,e++)}},l(u0,"DefaultHydrator"),u0);function sl(t){return{documentation:{CommentProvider:l((e=>new rne(e)),"CommentProvider"),DocumentationProvider:l((e=>new tne(e)),"DocumentationProvider")},parser:{AsyncParser:l((e=>new nne(e)),"AsyncParser"),GrammarConfig:l((e=>H9(e)),"GrammarConfig"),LangiumParser:l((e=>NL(e)),"LangiumParser"),CompletionParser:l((e=>LL(e)),"CompletionParser"),ValueConverter:l((()=>new RL),"ValueConverter"),TokenBuilder:l((()=>new Pw),"TokenBuilder"),Lexer:l((e=>new qL(e)),"Lexer"),ParserErrorMessageProvider:l((()=>new _L),"ParserErrorMessageProvider"),LexerErrorMessageProvider:l((()=>new jre),"LexerErrorMessageProvider")},workspace:{AstNodeLocator:l((()=>new Fre),"AstNodeLocator"),AstNodeDescriptionProvider:l((e=>new Bre(e)),"AstNodeDescriptionProvider"),ReferenceDescriptionProvider:l((e=>new $re(e)),"ReferenceDescriptionProvider")},references:{Linker:l((e=>new Cre(e)),"Linker"),NameProvider:l((()=>new Sre),"NameProvider"),ScopeProvider:l((e=>new Rre(e)),"ScopeProvider"),ScopeComputation:l((e=>new Lre(e)),"ScopeComputation"),References:l((e=>new Are(e)),"References")},serializer:{Hydrator:l((e=>new ane(e)),"Hydrator"),JsonSerializer:l((e=>new Mre(e)),"JsonSerializer")},validation:{DocumentValidator:l((e=>new Pre(e)),"DocumentValidator"),ValidationRegistry:l((e=>new Ore(e)),"ValidationRegistry")},shared:l((()=>t.shared),"shared")}}function ol(t){return{ServiceRegistry:l((e=>new Dre(e)),"ServiceRegistry"),workspace:{LangiumDocuments:l((e=>new _re(e)),"LangiumDocuments"),LangiumDocumentFactory:l((e=>new Ere(e)),"LangiumDocumentFactory"),DocumentBuilder:l((e=>new Gre(e)),"DocumentBuilder"),IndexManager:l((e=>new Ure(e)),"IndexManager"),WorkspaceManager:l((e=>new qre(e)),"WorkspaceManager"),FileSystemProvider:l((e=>t.fileSystemProvider(e)),"FileSystemProvider"),WorkspaceLock:l((()=>new ine),"WorkspaceLock"),ConfigurationProvider:l((e=>new zre(e)),"ConfigurationProvider")}}}function _i(t,e,r,n,i,a,s,o,u){return ZL([t,e,r,n,i,a,s,o,u].reduce(H2,{}))}l(sl,"createDefaultCoreModule"),l(ol,"createDefaultSharedCoreModule"),(DC||(DC={})).merge=(t,e)=>H2(H2({},t),e),l(_i,"inject");var sne=Symbol("isProxy");function KL(t){if(t&&t[sne])for(const e of Object.values(t))KL(e);return t}function ZL(t,e){const r=new Proxy({},{deleteProperty:l((()=>!1),"deleteProperty"),set:l((()=>{throw new Error("Cannot set property on injected service container")}),"set"),get:l(((n,i)=>i===sne||OC(n,i,t,e||r)),"get"),getOwnPropertyDescriptor:l(((n,i)=>(OC(n,i,t,e||r),Object.getOwnPropertyDescriptor(n,i))),"getOwnPropertyDescriptor"),has:l(((n,i)=>i in t),"has"),ownKeys:l((()=>[...Object.getOwnPropertyNames(t)]),"ownKeys")});return r}l(KL,"eagerLoad"),l(ZL,"_inject");var pO=Symbol();function OC(t,e,r,n){if(e in t){if(t[e]instanceof Error)throw new Error("Construction failure. Please make sure that your dependencies are constructable.",{cause:t[e]});if(t[e]===pO)throw new Error('Cycle detected. Please make "'+String(e)+'" lazy. Visit https://langium.org/docs/reference/configuration-services/#resolving-cyclic-dependencies');return t[e]}if(e in r){const i=r[e];t[e]=pO;try{t[e]=typeof i=="function"?i(n):ZL(i,n)}catch(a){throw t[e]=a instanceof Error?a:void 0,a}return t[e]}}function H2(t,e){if(e){for(const[r,n]of Object.entries(e))if(n!==void 0){const i=t[r];t[r]=i!==null&&n!==null&&typeof i=="object"&&typeof n=="object"?H2(i,n):n}}return t}l(OC,"_resolve"),l(H2,"_merge");var uu,fO,PC={indentTokenName:"INDENT",dedentTokenName:"DEDENT",whitespaceTokenName:"WS",ignoreIndentationDelimiters:[]};(fO=uu||(uu={})).REGULAR="indentation-sensitive",fO.IGNORE_INDENTATION="ignore-indentation";var h0,one=(h0=class extends Pw{constructor(e=PC){super(),this.indentationStack=[0],this.whitespaceRegExp=/[ \t]+/y,this.options=Object.assign(Object.assign({},PC),e),this.indentTokenType=Jd({name:this.options.indentTokenName,pattern:this.indentMatcher.bind(this),line_breaks:!1}),this.dedentTokenType=Jd({name:this.options.dedentTokenName,pattern:this.dedentMatcher.bind(this),line_breaks:!1})}buildTokens(e,r){const n=super.buildTokens(e,r);if(!Uw(n))throw new Error("Invalid tokens built by default builder");const{indentTokenName:i,dedentTokenName:a,whitespaceTokenName:s,ignoreIndentationDelimiters:o}=this.options;let u,h,d;const p=[];for(const f of n){for(const[g,m]of o)f.name===g?f.PUSH_MODE=uu.IGNORE_INDENTATION:f.name===m&&(f.POP_MODE=!0);f.name===a?u=f:f.name===i?h=f:f.name===s?d=f:p.push(f)}if(!u||!h||!d)throw new Error("Some indentation/whitespace tokens not found!");return o.length>0?{modes:{[uu.REGULAR]:[u,h,...p,d],[uu.IGNORE_INDENTATION]:[...p,d]},defaultMode:uu.REGULAR}:[u,h,d,...p]}flushLexingReport(e){const r=super.flushLexingReport(e);return Object.assign(Object.assign({},r),{remainingDedents:this.flushRemainingDedents(e)})}isStartOfLine(e,r){return r===0||`\r
`.includes(e[r-1])}matchWhitespace(e,r,n,i){var a;this.whitespaceRegExp.lastIndex=r;const s=this.whitespaceRegExp.exec(e);return{currIndentLevel:(a=s?.[0].length)!==null&&a!==void 0?a:0,prevIndentLevel:this.indentationStack.at(-1),match:s}}createIndentationTokenInstance(e,r,n,i){const a=this.getLineNumber(r,i);return Yv(e,n,i,i+n.length,a,a,1,n.length)}getLineNumber(e,r){return e.substring(0,r).split(/\r\n|\r|\n/).length}indentMatcher(e,r,n,i){if(!this.isStartOfLine(e,r))return null;const{currIndentLevel:a,prevIndentLevel:s,match:o}=this.matchWhitespace(e,r,n,i);return a<=s?null:(this.indentationStack.push(a),o)}dedentMatcher(e,r,n,i){var a,s,o,u;if(!this.isStartOfLine(e,r))return null;const{currIndentLevel:h,prevIndentLevel:d,match:p}=this.matchWhitespace(e,r,n,i);if(h>=d)return null;const f=this.indentationStack.lastIndexOf(h);if(f===-1)return this.diagnostics.push({severity:"error",message:`Invalid dedent level ${h} at offset: ${r}. Current indentation stack: ${this.indentationStack}`,offset:r,length:(s=(a=p?.[0])===null||a===void 0?void 0:a.length)!==null&&s!==void 0?s:0,line:this.getLineNumber(e,r),column:1}),null;const g=this.indentationStack.length-f-1,m=(u=(o=e.substring(0,r).match(/[\r\n]+$/))===null||o===void 0?void 0:o[0].length)!==null&&u!==void 0?u:1;for(let y=0;y<g;y++){const v=this.createIndentationTokenInstance(this.dedentTokenType,e,"",r-(m-1));n.push(v),this.indentationStack.pop()}return null}buildTerminalToken(e){const r=super.buildTerminalToken(e),{indentTokenName:n,dedentTokenName:i,whitespaceTokenName:a}=this.options;return r.name===n?this.indentTokenType:r.name===i?this.dedentTokenType:r.name===a?Jd({name:a,pattern:this.whitespaceRegExp,group:zi.SKIPPED}):r}flushRemainingDedents(e){const r=[];for(;this.indentationStack.length>1;)r.push(this.createIndentationTokenInstance(this.dedentTokenType,e,"",e.length)),this.indentationStack.pop();return this.indentationStack=[0],r}},l(h0,"IndentationAwareTokenBuilder"),h0),d0,Cbe=(d0=class extends qL{constructor(e){if(super(e),!(e.parser.TokenBuilder instanceof one))throw new Error("IndentationAwareLexer requires an accompanying IndentationAwareTokenBuilder");this.indentationTokenBuilder=e.parser.TokenBuilder}tokenize(e,r=UL){const n=super.tokenize(e),i=n.report;r?.mode==="full"&&n.tokens.push(...i.remainingDedents),i.remainingDedents=[];const{indentTokenType:a,dedentTokenType:s}=this.indentationTokenBuilder,o=a.tokenTypeIdx,u=s.tokenTypeIdx,h=[],d=n.tokens.length-1;for(let p=0;p<d;p++){const f=n.tokens[p],g=n.tokens[p+1];f.tokenTypeIdx!==o||g.tokenTypeIdx!==u?h.push(f):p++}return d>=0&&h.push(n.tokens[d]),n.tokens=h,n}},l(d0,"IndentationAwareLexer"),d0),BC={};Ss(BC,{AstUtils:()=>S9,BiMap:()=>H5,Cancellation:()=>Fr,ContextCache:()=>zw,CstUtils:()=>KA,DONE_RESULT:()=>Ri,Deferred:()=>Qo,Disposable:()=>gu,DisposableCache:()=>Fw,DocumentCache:()=>Ire,EMPTY_STREAM:()=>uw,ErrorWithLocation:()=>dw,GrammarUtils:()=>o9,MultiMap:()=>Z0,OperationCancelled:()=>ac,Reduction:()=>O2,RegExpUtils:()=>L9,SimpleCache:()=>BL,StreamImpl:()=>Xs,TreeStreamImpl:()=>V0,URI:()=>Jo,UriUtils:()=>oo,WorkspaceCache:()=>$L,assertUnreachable:()=>mc,delayNextTick:()=>Bw,interruptAndCheck:()=>wi,isOperationCancelled:()=>fh,loadGrammarFromJson:()=>ll,setInterruptionPeriod:()=>ML,startCancelableOperation:()=>$w,stream:()=>wn}),w6(BC,Gw);var p0,lne=(p0=class{readFile(){throw new Error("No file system is available.")}async readDirectory(){return[]}},l(p0,"EmptyFileSystemProvider"),p0),vc={fileSystemProvider:l((()=>new lne),"fileSystemProvider")},Sbe={Grammar:l((()=>{}),"Grammar"),LanguageMetaData:l((()=>({caseInsensitive:!1,fileExtensions:[".langium"],languageId:"langium"})),"LanguageMetaData")},Abe={AstReflection:l((()=>new C9),"AstReflection")};function cne(){const t=_i(ol(vc),Abe),e=_i(sl({shared:t}),Sbe);return t.ServiceRegistry.register(e),e}function ll(t){var e;const r=cne(),n=r.serializer.JsonSerializer.deserialize(t);return r.shared.workspace.LangiumDocumentFactory.fromModel(n,Jo.parse(`memory://${(e=n.name)!==null&&e!==void 0?e:"grammar"}.langium`)),n}l(cne,"createMinimalGrammarServices"),l(ll,"loadGrammarFromJson"),w6(h7,BC);var Lbe=Object.defineProperty,vt=l(((t,e)=>Lbe(t,"name",{value:e,configurable:!0})),"__name");function gO(t){return Rs.isInstance(t,"Architecture")}l(gO,"isArchitecture"),vt(gO,"isArchitecture");function mO(t){return Rs.isInstance(t,"Branch")}l(mO,"isBranch"),vt(mO,"isBranch");function yO(t){return Rs.isInstance(t,"Commit")}l(yO,"isCommit"),vt(yO,"isCommit");function vO(t){return Rs.isInstance(t,"Common")}l(vO,"isCommon"),vt(vO,"isCommon");function xO(t){return Rs.isInstance(t,"GitGraph")}l(xO,"isGitGraph"),vt(xO,"isGitGraph");function bO(t){return Rs.isInstance(t,"Info")}l(bO,"isInfo"),vt(bO,"isInfo");function wO(t){return Rs.isInstance(t,"Merge")}l(wO,"isMerge"),vt(wO,"isMerge");function kO(t){return Rs.isInstance(t,"Packet")}l(kO,"isPacket"),vt(kO,"isPacket");function TO(t){return Rs.isInstance(t,"PacketBlock")}l(TO,"isPacketBlock"),vt(TO,"isPacketBlock");function EO(t){return Rs.isInstance(t,"Pie")}l(EO,"isPie"),vt(EO,"isPie");function _O(t){return Rs.isInstance(t,"PieSection")}l(_O,"isPieSection"),vt(_O,"isPieSection");var CO,SO,AO,LO,NO,IO,Tu,une=(Tu=class extends QA{getAllTypes(){return["Architecture","Axis","Branch","Checkout","CherryPicking","Commit","Common","Curve","Direction","Edge","Entry","GitGraph","Group","Info","Junction","Merge","Option","Packet","PacketBlock","Pie","PieSection","Radar","Service","Statement"]}computeIsSubtype(e,r){switch(e){case"Branch":case"Checkout":case"CherryPicking":case"Commit":case"Merge":return this.isSubtype("Statement",r);case"Direction":return this.isSubtype("GitGraph",r);default:return!1}}getReferenceType(e){const r=`${e.container.$type}:${e.property}`;if(r==="Entry:axis")return"Axis";throw new Error(`${r} is not a valid reference id.`)}getTypeMetaData(e){switch(e){case"Architecture":return{name:"Architecture",properties:[{name:"accDescr"},{name:"accTitle"},{name:"edges",defaultValue:[]},{name:"groups",defaultValue:[]},{name:"junctions",defaultValue:[]},{name:"services",defaultValue:[]},{name:"title"}]};case"Axis":return{name:"Axis",properties:[{name:"label"},{name:"name"}]};case"Branch":return{name:"Branch",properties:[{name:"name"},{name:"order"}]};case"Checkout":return{name:"Checkout",properties:[{name:"branch"}]};case"CherryPicking":return{name:"CherryPicking",properties:[{name:"id"},{name:"parent"},{name:"tags",defaultValue:[]}]};case"Commit":return{name:"Commit",properties:[{name:"id"},{name:"message"},{name:"tags",defaultValue:[]},{name:"type"}]};case"Common":return{name:"Common",properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"}]};case"Curve":return{name:"Curve",properties:[{name:"entries",defaultValue:[]},{name:"label"},{name:"name"}]};case"Edge":return{name:"Edge",properties:[{name:"lhsDir"},{name:"lhsGroup",defaultValue:!1},{name:"lhsId"},{name:"lhsInto",defaultValue:!1},{name:"rhsDir"},{name:"rhsGroup",defaultValue:!1},{name:"rhsId"},{name:"rhsInto",defaultValue:!1},{name:"title"}]};case"Entry":return{name:"Entry",properties:[{name:"axis"},{name:"value"}]};case"GitGraph":return{name:"GitGraph",properties:[{name:"accDescr"},{name:"accTitle"},{name:"statements",defaultValue:[]},{name:"title"}]};case"Group":return{name:"Group",properties:[{name:"icon"},{name:"id"},{name:"in"},{name:"title"}]};case"Info":return{name:"Info",properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"}]};case"Junction":return{name:"Junction",properties:[{name:"id"},{name:"in"}]};case"Merge":return{name:"Merge",properties:[{name:"branch"},{name:"id"},{name:"tags",defaultValue:[]},{name:"type"}]};case"Option":return{name:"Option",properties:[{name:"name"},{name:"value",defaultValue:!1}]};case"Packet":return{name:"Packet",properties:[{name:"accDescr"},{name:"accTitle"},{name:"blocks",defaultValue:[]},{name:"title"}]};case"PacketBlock":return{name:"PacketBlock",properties:[{name:"end"},{name:"label"},{name:"start"}]};case"Pie":return{name:"Pie",properties:[{name:"accDescr"},{name:"accTitle"},{name:"sections",defaultValue:[]},{name:"showData",defaultValue:!1},{name:"title"}]};case"PieSection":return{name:"PieSection",properties:[{name:"label"},{name:"value"}]};case"Radar":return{name:"Radar",properties:[{name:"accDescr"},{name:"accTitle"},{name:"axes",defaultValue:[]},{name:"curves",defaultValue:[]},{name:"options",defaultValue:[]},{name:"title"}]};case"Service":return{name:"Service",properties:[{name:"icon"},{name:"iconText"},{name:"id"},{name:"in"},{name:"title"}]};case"Direction":return{name:"Direction",properties:[{name:"accDescr"},{name:"accTitle"},{name:"dir"},{name:"statements",defaultValue:[]},{name:"title"}]};default:return{name:e,properties:[]}}}},l(Tu,"MermaidAstReflection"),vt(Tu,"MermaidAstReflection"),Tu),Rs=new une,Nbe=vt((()=>CO??(CO=ll('{"$type":"Grammar","isDeclared":true,"name":"Info","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Info","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"info"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"Keyword","value":"showInfo"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"?"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}'))),"InfoGrammar"),Ibe=vt((()=>SO??(SO=ll(`{"$type":"Grammar","isDeclared":true,"name":"Packet","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Packet","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"packet-beta"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"+"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PacketBlock","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"start","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"end","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}}],"cardinality":"?"},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|'[^']*'/"},"fragment":false,"hidden":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}`))),"PacketGrammar"),Rbe=vt((()=>AO??(AO=ll('{"$type":"Grammar","isDeclared":true,"name":"Pie","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Pie","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"pie"},{"$type":"Assignment","feature":"showData","operator":"?=","terminal":{"$type":"Keyword","value":"showData"},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"+"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PieSection","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"PIE_SECTION_LABEL","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]+\\"/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"PIE_SECTION_VALUE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/(0|[1-9][0-9]*)(\\\\.[0-9]+)?/"},"fragment":false,"hidden":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}'))),"PieGrammar"),Mbe=vt((()=>LO??(LO=ll('{"$type":"Grammar","isDeclared":true,"name":"Architecture","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Architecture","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"architecture-beta"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"*"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"groups","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"services","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Assignment","feature":"junctions","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"edges","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"LeftPort","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"lhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"RightPort","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"rhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Keyword","value":":"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Arrow","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]},{"$type":"Assignment","feature":"lhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"--"},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}},{"$type":"Keyword","value":"-"}]}]},{"$type":"Assignment","feature":"rhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Group","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"group"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]},"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Service","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"service"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"iconText","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}}],"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Junction","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"junction"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Edge","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"lhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"lhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"rhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"rhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"ARROW_DIRECTION","definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"L"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"R"}}]},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"T"}}]},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"B"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_ID","definition":{"$type":"RegexToken","regex":"/[\\\\w]+/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TEXT_ICON","definition":{"$type":"RegexToken","regex":"/\\\\(\\"[^\\"]+\\"\\\\)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_ICON","definition":{"$type":"RegexToken","regex":"/\\\\([\\\\w-:]+\\\\)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TITLE","definition":{"$type":"RegexToken","regex":"/\\\\[[\\\\w ]+\\\\]/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_GROUP","definition":{"$type":"RegexToken","regex":"/\\\\{group\\\\}/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_INTO","definition":{"$type":"RegexToken","regex":"/<|>/"},"fragment":false,"hidden":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}'))),"ArchitectureGrammar"),Dbe=vt((()=>NO??(NO=ll(`{"$type":"Grammar","isDeclared":true,"name":"GitGraph","interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"rules":[{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false},{"$type":"ParserRule","entry":true,"name":"GitGraph","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Keyword","value":":"}]},{"$type":"Keyword","value":"gitGraph:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]},{"$type":"Keyword","value":":"}]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@0"},"arguments":[]},{"$type":"Assignment","feature":"statements","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Direction","definition":{"$type":"Assignment","feature":"dir","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"LR"},{"$type":"Keyword","value":"TB"},{"$type":"Keyword","value":"BT"}]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Commit","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"commit"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"msg:","cardinality":"?"},{"$type":"Assignment","feature":"message","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Branch","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"branch"},{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"order:"},{"$type":"Assignment","feature":"order","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Merge","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"merge"},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Checkout","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"checkout"},{"$type":"Keyword","value":"switch"}]},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"CherryPicking","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"cherry-pick"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"parent:"},{"$type":"Assignment","feature":"parent","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+(?=\\\\s)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\\\w([-\\\\./\\\\w]*[-\\\\w])?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|'[^']*'/"},"fragment":false,"hidden":false}],"definesHiddenTokens":false,"hiddenTokens":[],"imports":[],"types":[],"usedGrammars":[]}`))),"GitGraphGrammar"),Obe=vt((()=>IO??(IO=ll(`{"$type":"Grammar","isDeclared":true,"name":"Radar","interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]},{"$type":"Interface","name":"Entry","attributes":[{"$type":"TypeAttribute","name":"axis","isOptional":true,"type":{"$type":"ReferenceType","referenceType":{"$type":"SimpleType","typeRef":{"$ref":"#/rules@12"}}}},{"$type":"TypeAttribute","name":"value","type":{"$type":"SimpleType","primitiveType":"number"},"isOptional":false}],"superTypes":[]}],"rules":[{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false},{"$type":"ParserRule","entry":true,"name":"Radar","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"radar-beta"},{"$type":"Keyword","value":"radar-beta:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"radar-beta"},{"$type":"Keyword","value":":"}]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@0"},"arguments":[]},{"$type":"Group","elements":[{"$type":"Keyword","value":"axis"},{"$type":"Assignment","feature":"axes","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"axes","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"curve"},{"$type":"Assignment","feature":"curves","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"curves","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"options","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"options","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Label","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"["},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Keyword","value":"]"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Axis","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Curve","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[],"cardinality":"?"},{"$type":"Keyword","value":"{"},{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},{"$type":"Keyword","value":"}"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Entries","definition":{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"DetailedEntry","returnType":{"$ref":"#/interfaces@1"},"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"axis","operator":"=","terminal":{"$type":"CrossReference","type":{"$ref":"#/rules@12"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]},"deprecatedSyntax":false}},{"$type":"Keyword","value":":","cardinality":"?"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"NumberEntry","returnType":{"$ref":"#/interfaces@1"},"definition":{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Option","definition":{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"showLegend"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"ticks"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"max"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"min"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"graticule"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/(0|[1-9][0-9]*)(\\\\.[0-9]+)?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"GRATICULE","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"circle"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"polygon"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[a-zA-Z_][a-zA-Z0-9\\\\-_]*/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|'[^']*'/"},"fragment":false,"hidden":false}],"definesHiddenTokens":false,"hiddenTokens":[],"imports":[],"types":[],"usedGrammars":[]}`))),"RadarGrammar"),Pbe={languageId:"info",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},Bbe={languageId:"packet",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},$be={languageId:"pie",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},Fbe={languageId:"architecture",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},zbe={languageId:"gitGraph",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},Gbe={languageId:"radar",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},wm={AstReflection:vt((()=>new une),"AstReflection")},Ube={Grammar:vt((()=>Nbe()),"Grammar"),LanguageMetaData:vt((()=>Pbe),"LanguageMetaData"),parser:{}},qbe={Grammar:vt((()=>Ibe()),"Grammar"),LanguageMetaData:vt((()=>Bbe),"LanguageMetaData"),parser:{}},jbe={Grammar:vt((()=>Rbe()),"Grammar"),LanguageMetaData:vt((()=>$be),"LanguageMetaData"),parser:{}},Wbe={Grammar:vt((()=>Mbe()),"Grammar"),LanguageMetaData:vt((()=>Fbe),"LanguageMetaData"),parser:{}},Ybe={Grammar:vt((()=>Dbe()),"Grammar"),LanguageMetaData:vt((()=>zbe),"LanguageMetaData"),parser:{}},Vbe={Grammar:vt((()=>Obe()),"Grammar"),LanguageMetaData:vt((()=>Gbe),"LanguageMetaData"),parser:{}},Hbe={ACC_DESCR:/accDescr(?:[\t ]*:([^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/accTitle[\t ]*:([^\n\r]*)/,TITLE:/title([\t ][^\n\r]*|)/},Eu,QL=(Eu=class extends RL{runConverter(e,r,n){let i=this.runCommonConverter(e,r,n);return i===void 0&&(i=this.runCustomConverter(e,r,n)),i===void 0?super.runConverter(e,r,n):i}runCommonConverter(e,r,n){const i=Hbe[e.name];if(i===void 0)return;const a=i.exec(r);return a!==null?a[1]!==void 0?a[1].trim().replace(/[\t ]{2,}/gm," "):a[2]!==void 0?a[2].replace(/^\s*/gm,"").replace(/\s+$/gm,"").replace(/[\t ]{2,}/gm," ").replace(/[\n\r]{2,}/gm,`
`):void 0:void 0}},l(Eu,"AbstractMermaidValueConverter"),vt(Eu,"AbstractMermaidValueConverter"),Eu),_u,Ww=(_u=class extends QL{runCustomConverter(e,r,n){}},l(_u,"CommonValueConverter"),vt(_u,"CommonValueConverter"),_u),Cu,gh=(Cu=class extends Pw{constructor(e){super(),this.keywords=new Set(e)}buildKeywordTokens(e,r,n){const i=super.buildKeywordTokens(e,r,n);return i.forEach((a=>{this.keywords.has(a.name)&&a.PATTERN!==void 0&&(a.PATTERN=new RegExp(a.PATTERN.toString()+"(?:(?=%%)|(?!\\S))"))})),i}},l(Cu,"AbstractMermaidTokenBuilder"),vt(Cu,"AbstractMermaidTokenBuilder"),Cu),Su;Su=class extends gh{},l(Su,"CommonTokenBuilder"),vt(Su,"CommonTokenBuilder");var Sl={},Xbe={info:vt((async()=>{const{createInfoServices:t}=await Promise.resolve().then((function(){return B9e})),e=t().Info.parser.LangiumParser;Sl.info=e}),"info"),packet:vt((async()=>{const{createPacketServices:t}=await Promise.resolve().then((function(){return $9e})),e=t().Packet.parser.LangiumParser;Sl.packet=e}),"packet"),pie:vt((async()=>{const{createPieServices:t}=await Promise.resolve().then((function(){return F9e})),e=t().Pie.parser.LangiumParser;Sl.pie=e}),"pie"),architecture:vt((async()=>{const{createArchitectureServices:t}=await Promise.resolve().then((function(){return z9e})),e=t().Architecture.parser.LangiumParser;Sl.architecture=e}),"architecture"),gitGraph:vt((async()=>{const{createGitGraphServices:t}=await Promise.resolve().then((function(){return G9e})),e=t().GitGraph.parser.LangiumParser;Sl.gitGraph=e}),"gitGraph"),radar:vt((async()=>{const{createRadarServices:t}=await Promise.resolve().then((function(){return U9e})),e=t().Radar.parser.LangiumParser;Sl.radar=e}),"radar")};async function sc(t,e){const r=Xbe[t];if(!r)throw new Error(`Unknown diagram type: ${t}`);Sl[t]||await r();const n=Sl[t].parse(e);if(n.lexerErrors.length>0||n.parserErrors.length>0)throw new Kbe(n);return n.value}l(sc,"parse"),vt(sc,"parse");var Au,Kbe=(Au=class extends Error{constructor(e){super(`Parsing failed: ${e.lexerErrors.map((r=>r.message)).join(`
`)} ${e.parserErrors.map((r=>r.message)).join(`
`)}`),this.result=e}},l(Au,"MermaidParseError"),vt(Au,"MermaidParseError"),Au),Lu,Zbe=(Lu=class extends gh{constructor(){super(["pie","showData"])}},l(Lu,"PieTokenBuilder"),vt(Lu,"PieTokenBuilder"),Lu),Nu,Qbe=(Nu=class extends QL{runCustomConverter(e,r,n){if(e.name==="PIE_SECTION_LABEL")return r.replace(/"/g,"").trim()}},l(Nu,"PieValueConverter"),vt(Nu,"PieValueConverter"),Nu),hne={parser:{TokenBuilder:vt((()=>new Zbe),"TokenBuilder"),ValueConverter:vt((()=>new Qbe),"ValueConverter")}};function $C(t=vc){const e=_i(ol(t),wm),r=_i(sl({shared:e}),jbe,hne);return e.ServiceRegistry.register(r),{shared:e,Pie:r}}l($C,"createPieServices"),vt($C,"createPieServices");var Iu,Jbe=(Iu=class extends gh{constructor(){super(["architecture"])}},l(Iu,"ArchitectureTokenBuilder"),vt(Iu,"ArchitectureTokenBuilder"),Iu),Ru,e4e=(Ru=class extends QL{runCustomConverter(e,r,n){return e.name==="ARCH_ICON"?r.replace(/[()]/g,"").trim():e.name==="ARCH_TEXT_ICON"?r.replace(/["()]/g,""):e.name==="ARCH_TITLE"?r.replace(/[[\]]/g,"").trim():void 0}},l(Ru,"ArchitectureValueConverter"),vt(Ru,"ArchitectureValueConverter"),Ru),dne={parser:{TokenBuilder:vt((()=>new Jbe),"TokenBuilder"),ValueConverter:vt((()=>new e4e),"ValueConverter")}};function FC(t=vc){const e=_i(ol(t),wm),r=_i(sl({shared:e}),Wbe,dne);return e.ServiceRegistry.register(r),{shared:e,Architecture:r}}l(FC,"createArchitectureServices"),vt(FC,"createArchitectureServices");var Mu,t4e=(Mu=class extends gh{constructor(){super(["gitGraph"])}},l(Mu,"GitGraphTokenBuilder"),vt(Mu,"GitGraphTokenBuilder"),Mu),pne={parser:{TokenBuilder:vt((()=>new t4e),"TokenBuilder"),ValueConverter:vt((()=>new Ww),"ValueConverter")}};function zC(t=vc){const e=_i(ol(t),wm),r=_i(sl({shared:e}),Ybe,pne);return e.ServiceRegistry.register(r),{shared:e,GitGraph:r}}l(zC,"createGitGraphServices"),vt(zC,"createGitGraphServices");var Du,r4e=(Du=class extends gh{constructor(){super(["radar-beta"])}},l(Du,"RadarTokenBuilder"),vt(Du,"RadarTokenBuilder"),Du),fne={parser:{TokenBuilder:vt((()=>new r4e),"TokenBuilder"),ValueConverter:vt((()=>new Ww),"ValueConverter")}};function GC(t=vc){const e=_i(ol(t),wm),r=_i(sl({shared:e}),Vbe,fne);return e.ServiceRegistry.register(r),{shared:e,Radar:r}}l(GC,"createRadarServices"),vt(GC,"createRadarServices");var Ou,n4e=(Ou=class extends gh{constructor(){super(["info","showInfo"])}},l(Ou,"InfoTokenBuilder"),vt(Ou,"InfoTokenBuilder"),Ou),gne={parser:{TokenBuilder:vt((()=>new n4e),"TokenBuilder"),ValueConverter:vt((()=>new Ww),"ValueConverter")}};function UC(t=vc){const e=_i(ol(t),wm),r=_i(sl({shared:e}),Ube,gne);return e.ServiceRegistry.register(r),{shared:e,Info:r}}l(UC,"createInfoServices"),vt(UC,"createInfoServices");var Pu,i4e=(Pu=class extends gh{constructor(){super(["packet-beta"])}},l(Pu,"PacketTokenBuilder"),vt(Pu,"PacketTokenBuilder"),Pu),mne={parser:{TokenBuilder:vt((()=>new i4e),"TokenBuilder"),ValueConverter:vt((()=>new Ww),"ValueConverter")}};function qC(t=vc){const e=_i(ol(t),wm),r=_i(sl({shared:e}),qbe,mne);return e.ServiceRegistry.register(r),{shared:e,Packet:r}}l(qC,"createPacketServices"),vt(qC,"createPacketServices");var _r={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},a4e=or.gitGraph,mh=l((()=>ts({...a4e,...Sr().gitGraph})),"getConfig"),ht=new XA((()=>{const t=mh(),e=t.mainBranchName,r=t.mainBranchOrder;return{mainBranchName:e,commits:new Map,head:null,branchConfig:new Map([[e,{name:e,order:r}]]),branches:new Map([[e,null]]),currBranch:e,direction:"LR",seq:0,options:{}}}));function Yw(){return GY({length:7})}function yne(t,e){const r=Object.create(null);return t.reduce(((n,i)=>{const a=e(i);return r[a]||(r[a]=!0,n.push(i)),n}),[])}l(Yw,"getID"),l(yne,"uniqBy");var s4e=l((function(t){ht.records.direction=t}),"setDirection"),o4e=l((function(t){ee.debug("options str",t),t=t?.trim(),t=t||"{}";try{ht.records.options=JSON.parse(t)}catch(e){ee.error("error while parsing gitGraph options",e.message)}}),"setOptions"),l4e=l((function(){return ht.records.options}),"getOptions"),c4e=l((function(t){let e=t.msg,r=t.id;const n=t.type;let i=t.tags;ee.info("commit",e,r,n,i),ee.debug("Entering commit:",e,r,n,i);const a=mh();r=He.sanitizeText(r,a),e=He.sanitizeText(e,a),i=i?.map((o=>He.sanitizeText(o,a)));const s={id:r||ht.records.seq+"-"+Yw(),message:e,seq:ht.records.seq++,type:n??_r.NORMAL,tags:i??[],parents:ht.records.head==null?[]:[ht.records.head.id],branch:ht.records.currBranch};ht.records.head=s,ee.info("main branch",a.mainBranchName),ht.records.commits.set(s.id,s),ht.records.branches.set(ht.records.currBranch,s.id),ee.debug("in pushCommit "+s.id)}),"commit"),u4e=l((function(t){let e=t.name;const r=t.order;if(e=He.sanitizeText(e,mh()),ht.records.branches.has(e))throw new Error(`Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout ${e}")`);ht.records.branches.set(e,ht.records.head!=null?ht.records.head.id:null),ht.records.branchConfig.set(e,{name:e,order:r}),vne(e),ee.debug("in createBranch")}),"branch"),h4e=l((t=>{let e=t.branch,r=t.id;const n=t.type,i=t.tags,a=mh();e=He.sanitizeText(e,a),r&&(r=He.sanitizeText(r,a));const s=ht.records.branches.get(ht.records.currBranch),o=ht.records.branches.get(e),u=s?ht.records.commits.get(s):void 0,h=o?ht.records.commits.get(o):void 0;if(u&&h&&u.branch===e)throw new Error(`Cannot merge branch '${e}' into itself.`);if(ht.records.currBranch===e){const f=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw f.hash={text:`merge ${e}`,token:`merge ${e}`,expected:["branch abc"]},f}if(u===void 0||!u){const f=new Error(`Incorrect usage of "merge". Current branch (${ht.records.currBranch})has no commits`);throw f.hash={text:`merge ${e}`,token:`merge ${e}`,expected:["commit"]},f}if(!ht.records.branches.has(e)){const f=new Error('Incorrect usage of "merge". Branch to be merged ('+e+") does not exist");throw f.hash={text:`merge ${e}`,token:`merge ${e}`,expected:[`branch ${e}`]},f}if(h===void 0||!h){const f=new Error('Incorrect usage of "merge". Branch to be merged ('+e+") has no commits");throw f.hash={text:`merge ${e}`,token:`merge ${e}`,expected:['"commit"']},f}if(u===h){const f=new Error('Incorrect usage of "merge". Both branches have same head');throw f.hash={text:`merge ${e}`,token:`merge ${e}`,expected:["branch abc"]},f}if(r&&ht.records.commits.has(r)){const f=new Error('Incorrect usage of "merge". Commit with id:'+r+" already exists, use different custom Id");throw f.hash={text:`merge ${e} ${r} ${n} ${i?.join(" ")}`,token:`merge ${e} ${r} ${n} ${i?.join(" ")}`,expected:[`merge ${e} ${r}_UNIQUE ${n} ${i?.join(" ")}`]},f}const d=o||"",p={id:r||`${ht.records.seq}-${Yw()}`,message:`merged branch ${e} into ${ht.records.currBranch}`,seq:ht.records.seq++,parents:ht.records.head==null?[]:[ht.records.head.id,d],branch:ht.records.currBranch,type:_r.MERGE,customType:n,customId:!!r,tags:i??[]};ht.records.head=p,ht.records.commits.set(p.id,p),ht.records.branches.set(ht.records.currBranch,p.id),ee.debug(ht.records.branches),ee.debug("in mergeBranch")}),"merge"),d4e=l((function(t){let e=t.id,r=t.targetId,n=t.tags,i=t.parent;ee.debug("Entering cherryPick:",e,r,n);const a=mh();if(e=He.sanitizeText(e,a),r=He.sanitizeText(r,a),n=n?.map((u=>He.sanitizeText(u,a))),i=He.sanitizeText(i,a),!e||!ht.records.commits.has(e)){const u=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw u.hash={text:`cherryPick ${e} ${r}`,token:`cherryPick ${e} ${r}`,expected:["cherry-pick abc"]},u}const s=ht.records.commits.get(e);if(s===void 0||!s)throw new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');if(i&&(!Array.isArray(s.parents)||!s.parents.includes(i)))throw new Error("Invalid operation: The specified parent commit is not an immediate parent of the cherry-picked commit.");const o=s.branch;if(s.type===_r.MERGE&&!i)throw new Error("Incorrect usage of cherry-pick: If the source commit is a merge commit, an immediate parent commit must be specified.");if(!r||!ht.records.commits.has(r)){if(o===ht.records.currBranch){const p=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw p.hash={text:`cherryPick ${e} ${r}`,token:`cherryPick ${e} ${r}`,expected:["cherry-pick abc"]},p}const u=ht.records.branches.get(ht.records.currBranch);if(u===void 0||!u){const p=new Error(`Incorrect usage of "cherry-pick". Current branch (${ht.records.currBranch})has no commits`);throw p.hash={text:`cherryPick ${e} ${r}`,token:`cherryPick ${e} ${r}`,expected:["cherry-pick abc"]},p}const h=ht.records.commits.get(u);if(h===void 0||!h){const p=new Error(`Incorrect usage of "cherry-pick". Current branch (${ht.records.currBranch})has no commits`);throw p.hash={text:`cherryPick ${e} ${r}`,token:`cherryPick ${e} ${r}`,expected:["cherry-pick abc"]},p}const d={id:ht.records.seq+"-"+Yw(),message:`cherry-picked ${s?.message} into ${ht.records.currBranch}`,seq:ht.records.seq++,parents:ht.records.head==null?[]:[ht.records.head.id,s.id],branch:ht.records.currBranch,type:_r.CHERRY_PICK,tags:n?n.filter(Boolean):[`cherry-pick:${s.id}${s.type===_r.MERGE?`|parent:${i}`:""}`]};ht.records.head=d,ht.records.commits.set(d.id,d),ht.records.branches.set(ht.records.currBranch,d.id),ee.debug(ht.records.branches),ee.debug("in cherryPick")}}),"cherryPick"),vne=l((function(t){if(t=He.sanitizeText(t,mh()),!ht.records.branches.has(t)){const e=new Error(`Trying to checkout branch which is not yet created. (Help try using "branch ${t}")`);throw e.hash={text:`checkout ${t}`,token:`checkout ${t}`,expected:[`branch ${t}`]},e}{ht.records.currBranch=t;const e=ht.records.branches.get(ht.records.currBranch);ht.records.head=e!==void 0&&e?ht.records.commits.get(e)??null:null}}),"checkout");function jC(t,e,r){const n=t.indexOf(e);n===-1?t.push(r):t.splice(n,1,r)}function JL(t){const e=t.reduce(((i,a)=>i.seq>a.seq?i:a),t[0]);let r="";t.forEach((function(i){r+=i===e?"	*":"	|"}));const n=[r,e.id,e.seq];for(const i in ht.records.branches)ht.records.branches.get(i)===e.id&&n.push(i);if(ee.debug(n.join(" ")),e.parents&&e.parents.length==2&&e.parents[0]&&e.parents[1]){const i=ht.records.commits.get(e.parents[0]);jC(t,e,i),e.parents[1]&&t.push(ht.records.commits.get(e.parents[1]))}else{if(e.parents.length==0)return;if(e.parents[0]){const i=ht.records.commits.get(e.parents[0]);jC(t,e,i)}}JL(t=yne(t,(i=>i.id)))}l(jC,"upsert"),l(JL,"prettyPrintCommitHistory");var p4e=l((function(){ee.debug(ht.records.commits),JL([xne()[0]])}),"prettyPrint"),f4e=l((function(){ht.reset(),jn()}),"clear"),g4e=l((function(){return[...ht.records.branchConfig.values()].map(((e,r)=>e.order!==null&&e.order!==void 0?e:{...e,order:parseFloat(`0.${r}`)})).sort(((e,r)=>(e.order??0)-(r.order??0))).map((({name:e})=>({name:e})))}),"getBranchesAsObjArray"),m4e=l((function(){return ht.records.branches}),"getBranches"),y4e=l((function(){return ht.records.commits}),"getCommits"),xne=l((function(){const t=[...ht.records.commits.values()];return t.forEach((function(e){ee.debug(e.id)})),t.sort(((e,r)=>e.seq-r.seq)),t}),"getCommitsArray"),bne={commitType:_r,getConfig:mh,setDirection:s4e,setOptions:o4e,getOptions:l4e,commit:c4e,branch:u4e,merge:h4e,cherryPick:d4e,checkout:vne,prettyPrint:p4e,clear:f4e,getBranchesAsObjArray:g4e,getBranches:m4e,getCommits:y4e,getCommitsArray:xne,getCurrentBranch:l((function(){return ht.records.currBranch}),"getCurrentBranch"),getDirection:l((function(){return ht.records.direction}),"getDirection"),getHead:l((function(){return ht.records.head}),"getHead"),setAccTitle:zn,getAccTitle:Xn,getAccDescription:Zn,setAccDescription:Kn,setDiagramTitle:di,getDiagramTitle:Wn},v4e=l(((t,e)=>{pm(t,e),t.dir&&e.setDirection(t.dir);for(const r of t.statements)x4e(r,e)}),"populate"),x4e=l(((t,e)=>{const r={Commit:l((n=>e.commit(b4e(n))),"Commit"),Branch:l((n=>e.branch(w4e(n))),"Branch"),Merge:l((n=>e.merge(k4e(n))),"Merge"),Checkout:l((n=>e.checkout(T4e(n))),"Checkout"),CherryPicking:l((n=>e.cherryPick(E4e(n))),"CherryPicking")}[t.$type];r?r(t):ee.error(`Unknown statement type: ${t.$type}`)}),"parseStatement"),b4e=l((t=>({id:t.id,msg:t.message??"",type:t.type!==void 0?_r[t.type]:_r.NORMAL,tags:t.tags??void 0})),"parseCommit"),w4e=l((t=>({name:t.name,order:t.order??0})),"parseBranch"),k4e=l((t=>({branch:t.branch,id:t.id??"",type:t.type!==void 0?_r[t.type]:void 0,tags:t.tags??void 0})),"parseMerge"),T4e=l((t=>t.branch),"parseCheckout"),E4e=l((t=>({id:t.id,targetId:"",tags:t.tags?.length===0?void 0:t.tags,parent:t.parent})),"parseCherryPicking"),_4e={parse:l((async t=>{const e=await sc("gitGraph",t);ee.debug(e),v4e(e,bne)}),"parse")},Ga=ke()?.gitGraph,ra=new Map,sa=new Map,cy=new Map,Z5=[],Al=0,ar="LR",C4e=l((()=>{ra.clear(),sa.clear(),cy.clear(),Al=0,Z5=[],ar="LR"}),"clear"),wne=l((t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","text");return(typeof t=="string"?t.split(/\\n|\n|<br\s*\/?>/gi):t).forEach((r=>{const n=document.createElementNS("http://www.w3.org/2000/svg","tspan");n.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),n.setAttribute("dy","1em"),n.setAttribute("x","0"),n.setAttribute("class","row"),n.textContent=r.trim(),e.appendChild(n)})),e}),"drawText"),kne=l((t=>{let e,r,n;return ar==="BT"?(r=l(((i,a)=>i<=a),"comparisonFunc"),n=1/0):(r=l(((i,a)=>i>=a),"comparisonFunc"),n=0),t.forEach((i=>{const a=ar==="TB"||ar=="BT"?sa.get(i)?.y:sa.get(i)?.x;a!==void 0&&r(a,n)&&(e=i,n=a)})),e}),"findClosestParent"),S4e=l((t=>{let e="",r=1/0;return t.forEach((n=>{const i=sa.get(n).y;i<=r&&(e=n,r=i)})),e||void 0}),"findClosestParentBT"),A4e=l(((t,e,r)=>{let n=r,i=r;const a=[];t.forEach((s=>{const o=e.get(s);if(!o)throw new Error(`Commit not found for key ${s}`);o.parents.length?(n=N4e(o),i=Math.max(n,i)):a.push(o),I4e(o,n)})),n=i,a.forEach((s=>{R4e(s,n,r)})),t.forEach((s=>{const o=e.get(s);if(o?.parents.length){const u=S4e(o.parents);n=sa.get(u).y-40,n<=i&&(i=n);const h=ra.get(o.branch).pos,d=n-10;sa.set(o.id,{x:h,y:d})}}))}),"setParallelBTPos"),L4e=l((t=>{const e=kne(t.parents.filter((n=>n!==null)));if(!e)throw new Error(`Closest parent not found for commit ${t.id}`);const r=sa.get(e)?.y;if(r===void 0)throw new Error(`Closest parent position not found for commit ${t.id}`);return r}),"findClosestParentPos"),N4e=l((t=>L4e(t)+40),"calculateCommitPosition"),I4e=l(((t,e)=>{const r=ra.get(t.branch);if(!r)throw new Error(`Branch not found for commit ${t.id}`);const n=r.pos,i=e+10;return sa.set(t.id,{x:n,y:i}),{x:n,y:i}}),"setCommitPosition"),R4e=l(((t,e,r)=>{const n=ra.get(t.branch);if(!n)throw new Error(`Branch not found for commit ${t.id}`);const i=e+r,a=n.pos;sa.set(t.id,{x:a,y:i})}),"setRootPosition"),M4e=l(((t,e,r,n,i,a)=>{if(a===_r.HIGHLIGHT)t.append("rect").attr("x",r.x-10).attr("y",r.y-10).attr("width",20).attr("height",20).attr("class",`commit ${e.id} commit-highlight${i%8} ${n}-outer`),t.append("rect").attr("x",r.x-6).attr("y",r.y-6).attr("width",12).attr("height",12).attr("class",`commit ${e.id} commit${i%8} ${n}-inner`);else if(a===_r.CHERRY_PICK)t.append("circle").attr("cx",r.x).attr("cy",r.y).attr("r",10).attr("class",`commit ${e.id} ${n}`),t.append("circle").attr("cx",r.x-3).attr("cy",r.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${e.id} ${n}`),t.append("circle").attr("cx",r.x+3).attr("cy",r.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${e.id} ${n}`),t.append("line").attr("x1",r.x+3).attr("y1",r.y+1).attr("x2",r.x).attr("y2",r.y-5).attr("stroke","#fff").attr("class",`commit ${e.id} ${n}`),t.append("line").attr("x1",r.x-3).attr("y1",r.y+1).attr("x2",r.x).attr("y2",r.y-5).attr("stroke","#fff").attr("class",`commit ${e.id} ${n}`);else{const s=t.append("circle");if(s.attr("cx",r.x),s.attr("cy",r.y),s.attr("r",e.type===_r.MERGE?9:10),s.attr("class",`commit ${e.id} commit${i%8}`),a===_r.MERGE){const o=t.append("circle");o.attr("cx",r.x),o.attr("cy",r.y),o.attr("r",6),o.attr("class",`commit ${n} ${e.id} commit${i%8}`)}a===_r.REVERSE&&t.append("path").attr("d",`M ${r.x-5},${r.y-5}L${r.x+5},${r.y+5}M${r.x-5},${r.y+5}L${r.x+5},${r.y-5}`).attr("class",`commit ${n} ${e.id} commit${i%8}`)}}),"drawCommitBullet"),D4e=l(((t,e,r,n)=>{if(e.type!==_r.CHERRY_PICK&&(e.customId&&e.type===_r.MERGE||e.type!==_r.MERGE)&&Ga?.showCommitLabel){const i=t.append("g"),a=i.insert("rect").attr("class","commit-label-bkg"),s=i.append("text").attr("x",n).attr("y",r.y+25).attr("class","commit-label").text(e.id),o=s.node()?.getBBox();if(o&&(a.attr("x",r.posWithOffset-o.width/2-2).attr("y",r.y+13.5).attr("width",o.width+4).attr("height",o.height+4),ar==="TB"||ar==="BT"?(a.attr("x",r.x-(o.width+16+5)).attr("y",r.y-12),s.attr("x",r.x-(o.width+16)).attr("y",r.y+o.height-12)):s.attr("x",r.posWithOffset-o.width/2),Ga.rotateCommitLabel))if(ar==="TB"||ar==="BT")s.attr("transform","rotate(-45, "+r.x+", "+r.y+")"),a.attr("transform","rotate(-45, "+r.x+", "+r.y+")");else{const u=-7.5-(o.width+10)/25*9.5,h=10+o.width/25*8.5;i.attr("transform","translate("+u+", "+h+") rotate(-45, "+n+", "+r.y+")")}}}),"drawCommitLabel"),O4e=l(((t,e,r,n)=>{if(e.tags.length>0){let i=0,a=0,s=0;const o=[];for(const u of e.tags.reverse()){const h=t.insert("polygon"),d=t.append("circle"),p=t.append("text").attr("y",r.y-16-i).attr("class","tag-label").text(u),f=p.node()?.getBBox();if(!f)throw new Error("Tag bbox not found");a=Math.max(a,f.width),s=Math.max(s,f.height),p.attr("x",r.posWithOffset-f.width/2),o.push({tag:p,hole:d,rect:h,yOffset:i}),i+=20}for(const{tag:u,hole:h,rect:d,yOffset:p}of o){const f=s/2,g=r.y-19.2-p;if(d.attr("class","tag-label-bkg").attr("points",`
      ${n-a/2-2},${g+2}  
      ${n-a/2-2},${g-2}
      ${r.posWithOffset-a/2-4},${g-f-2}
      ${r.posWithOffset+a/2+4},${g-f-2}
      ${r.posWithOffset+a/2+4},${g+f+2}
      ${r.posWithOffset-a/2-4},${g+f+2}`),h.attr("cy",g).attr("cx",n-a/2+2).attr("r",1.5).attr("class","tag-hole"),ar==="TB"||ar==="BT"){const m=n+p;d.attr("class","tag-label-bkg").attr("points",`
        ${r.x},${m+2}
        ${r.x},${m-2}
        ${r.x+10},${m-f-2}
        ${r.x+10+a+4},${m-f-2}
        ${r.x+10+a+4},${m+f+2}
        ${r.x+10},${m+f+2}`).attr("transform","translate(12,12) rotate(45, "+r.x+","+n+")"),h.attr("cx",r.x+2).attr("cy",m).attr("transform","translate(12,12) rotate(45, "+r.x+","+n+")"),u.attr("x",r.x+5).attr("y",m+3).attr("transform","translate(14,14) rotate(45, "+r.x+","+n+")")}}}}),"drawCommitTags"),P4e=l((t=>{switch(t.customType??t.type){case _r.NORMAL:return"commit-normal";case _r.REVERSE:return"commit-reverse";case _r.HIGHLIGHT:return"commit-highlight";case _r.MERGE:return"commit-merge";case _r.CHERRY_PICK:return"commit-cherry-pick";default:return"commit-normal"}}),"getCommitClassType"),B4e=l(((t,e,r,n)=>{const i={x:0,y:0};if(!(t.parents.length>0))return e==="TB"?30:e==="BT"?(n.get(t.id)??i).y-40:0;{const a=kne(t.parents);if(a){const s=n.get(a)??i;return e==="TB"?s.y+40:e==="BT"?(n.get(t.id)??i).y-40:s.x+40}}return 0}),"calculatePosition"),$4e=l(((t,e,r)=>{const n=ar==="BT"&&r?e:e+10,i=ar==="TB"||ar==="BT"?n:ra.get(t.branch)?.pos,a=ar==="TB"||ar==="BT"?ra.get(t.branch)?.pos:n;if(a===void 0||i===void 0)throw new Error(`Position were undefined for commit ${t.id}`);return{x:a,y:i,posWithOffset:n}}),"getCommitPosition"),RO=l(((t,e,r)=>{if(!Ga)throw new Error("GitGraph config not found");const n=t.append("g").attr("class","commit-bullets"),i=t.append("g").attr("class","commit-labels");let a=ar==="TB"||ar==="BT"?30:0;const s=[...e.keys()],o=Ga?.parallelCommits??!1,u=l(((d,p)=>{const f=e.get(d)?.seq,g=e.get(p)?.seq;return f!==void 0&&g!==void 0?f-g:0}),"sortKeys");let h=s.sort(u);ar==="BT"&&(o&&A4e(h,e,a),h=h.reverse()),h.forEach((d=>{const p=e.get(d);if(!p)throw new Error(`Commit not found for key ${d}`);o&&(a=B4e(p,ar,a,sa));const f=$4e(p,a,o);if(r){const g=P4e(p),m=p.customType??p.type,y=ra.get(p.branch)?.index??0;M4e(n,p,f,g,y,m),D4e(i,p,f,a),O4e(i,p,f,a)}ar==="TB"||ar==="BT"?sa.set(p.id,{x:f.x,y:f.posWithOffset}):sa.set(p.id,{x:f.posWithOffset,y:f.y}),a=ar==="BT"&&o?a+40:a+40+10,a>Al&&(Al=a)}))}),"drawCommits"),F4e=l(((t,e,r,n,i)=>{const a=(ar==="TB"||ar==="BT"?r.x<n.x:r.y<n.y)?e.branch:t.branch,s=l((u=>u.branch===a),"isOnBranchToGetCurve"),o=l((u=>u.seq>t.seq&&u.seq<e.seq),"isBetweenCommits");return[...i.values()].some((u=>o(u)&&s(u)))}),"shouldRerouteArrow"),uy=l(((t,e,r=0)=>{const n=t+Math.abs(t-e)/2;if(r>5)return n;if(Z5.every((a=>Math.abs(a-n)>=10)))return Z5.push(n),n;const i=Math.abs(t-e);return uy(t,e-i/5,r+1)}),"findLane"),z4e=l(((t,e,r,n)=>{const i=sa.get(e.id),a=sa.get(r.id);if(i===void 0||a===void 0)throw new Error(`Commit positions not found for commits ${e.id} and ${r.id}`);const s=F4e(e,r,i,a,n);let o,u="",h="",d=0,p=0,f=ra.get(r.branch)?.index;if(r.type===_r.MERGE&&e.id!==r.parents[0]&&(f=ra.get(e.branch)?.index),s){u="A 10 10, 0, 0, 0,",h="A 10 10, 0, 0, 1,",d=10,p=10;const g=i.y<a.y?uy(i.y,a.y):uy(a.y,i.y),m=i.x<a.x?uy(i.x,a.x):uy(a.x,i.x);ar==="TB"?i.x<a.x?o=`M ${i.x} ${i.y} L ${m-d} ${i.y} ${h} ${m} ${i.y+p} L ${m} ${a.y-d} ${u} ${m+p} ${a.y} L ${a.x} ${a.y}`:(f=ra.get(e.branch)?.index,o=`M ${i.x} ${i.y} L ${m+d} ${i.y} ${u} ${m} ${i.y+p} L ${m} ${a.y-d} ${h} ${m-p} ${a.y} L ${a.x} ${a.y}`):ar==="BT"?i.x<a.x?o=`M ${i.x} ${i.y} L ${m-d} ${i.y} ${u} ${m} ${i.y-p} L ${m} ${a.y+d} ${h} ${m+p} ${a.y} L ${a.x} ${a.y}`:(f=ra.get(e.branch)?.index,o=`M ${i.x} ${i.y} L ${m+d} ${i.y} ${h} ${m} ${i.y-p} L ${m} ${a.y+d} ${u} ${m-p} ${a.y} L ${a.x} ${a.y}`):i.y<a.y?o=`M ${i.x} ${i.y} L ${i.x} ${g-d} ${u} ${i.x+p} ${g} L ${a.x-d} ${g} ${h} ${a.x} ${g+p} L ${a.x} ${a.y}`:(f=ra.get(e.branch)?.index,o=`M ${i.x} ${i.y} L ${i.x} ${g+d} ${h} ${i.x+p} ${g} L ${a.x-d} ${g} ${u} ${a.x} ${g-p} L ${a.x} ${a.y}`)}else u="A 20 20, 0, 0, 0,",h="A 20 20, 0, 0, 1,",d=20,p=20,ar==="TB"?(i.x<a.x&&(o=r.type===_r.MERGE&&e.id!==r.parents[0]?`M ${i.x} ${i.y} L ${i.x} ${a.y-d} ${u} ${i.x+p} ${a.y} L ${a.x} ${a.y}`:`M ${i.x} ${i.y} L ${a.x-d} ${i.y} ${h} ${a.x} ${i.y+p} L ${a.x} ${a.y}`),i.x>a.x&&(u="A 20 20, 0, 0, 0,",h="A 20 20, 0, 0, 1,",d=20,p=20,o=r.type===_r.MERGE&&e.id!==r.parents[0]?`M ${i.x} ${i.y} L ${i.x} ${a.y-d} ${h} ${i.x-p} ${a.y} L ${a.x} ${a.y}`:`M ${i.x} ${i.y} L ${a.x+d} ${i.y} ${u} ${a.x} ${i.y+p} L ${a.x} ${a.y}`),i.x===a.x&&(o=`M ${i.x} ${i.y} L ${a.x} ${a.y}`)):ar==="BT"?(i.x<a.x&&(o=r.type===_r.MERGE&&e.id!==r.parents[0]?`M ${i.x} ${i.y} L ${i.x} ${a.y+d} ${h} ${i.x+p} ${a.y} L ${a.x} ${a.y}`:`M ${i.x} ${i.y} L ${a.x-d} ${i.y} ${u} ${a.x} ${i.y-p} L ${a.x} ${a.y}`),i.x>a.x&&(u="A 20 20, 0, 0, 0,",h="A 20 20, 0, 0, 1,",d=20,p=20,o=r.type===_r.MERGE&&e.id!==r.parents[0]?`M ${i.x} ${i.y} L ${i.x} ${a.y+d} ${u} ${i.x-p} ${a.y} L ${a.x} ${a.y}`:`M ${i.x} ${i.y} L ${a.x-d} ${i.y} ${u} ${a.x} ${i.y-p} L ${a.x} ${a.y}`),i.x===a.x&&(o=`M ${i.x} ${i.y} L ${a.x} ${a.y}`)):(i.y<a.y&&(o=r.type===_r.MERGE&&e.id!==r.parents[0]?`M ${i.x} ${i.y} L ${a.x-d} ${i.y} ${h} ${a.x} ${i.y+p} L ${a.x} ${a.y}`:`M ${i.x} ${i.y} L ${i.x} ${a.y-d} ${u} ${i.x+p} ${a.y} L ${a.x} ${a.y}`),i.y>a.y&&(o=r.type===_r.MERGE&&e.id!==r.parents[0]?`M ${i.x} ${i.y} L ${a.x-d} ${i.y} ${u} ${a.x} ${i.y-p} L ${a.x} ${a.y}`:`M ${i.x} ${i.y} L ${i.x} ${a.y+d} ${h} ${i.x+p} ${a.y} L ${a.x} ${a.y}`),i.y===a.y&&(o=`M ${i.x} ${i.y} L ${a.x} ${a.y}`));if(o===void 0)throw new Error("Line definition not found");t.append("path").attr("d",o).attr("class","arrow arrow"+f%8)}),"drawArrow"),G4e=l(((t,e)=>{const r=t.append("g").attr("class","commit-arrows");[...e.keys()].forEach((n=>{const i=e.get(n);i.parents&&i.parents.length>0&&i.parents.forEach((a=>{z4e(r,e.get(a),i,e)}))}))}),"drawArrows"),U4e=l(((t,e)=>{const r=t.append("g");e.forEach(((n,i)=>{const a=i%8,s=ra.get(n.name)?.pos;if(s===void 0)throw new Error(`Position not found for branch ${n.name}`);const o=r.append("line");o.attr("x1",0),o.attr("y1",s),o.attr("x2",Al),o.attr("y2",s),o.attr("class","branch branch"+a),ar==="TB"?(o.attr("y1",30),o.attr("x1",s),o.attr("y2",Al),o.attr("x2",s)):ar==="BT"&&(o.attr("y1",Al),o.attr("x1",s),o.attr("y2",30),o.attr("x2",s)),Z5.push(s);const u=n.name,h=wne(u),d=r.insert("rect"),p=r.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+a);p.node().appendChild(h);const f=h.getBBox();d.attr("class","branchLabelBkg label"+a).attr("rx",4).attr("ry",4).attr("x",-f.width-4-(Ga?.rotateCommitLabel===!0?30:0)).attr("y",-f.height/2+8).attr("width",f.width+18).attr("height",f.height+4),p.attr("transform","translate("+(-f.width-14-(Ga?.rotateCommitLabel===!0?30:0))+", "+(s-f.height/2-1)+")"),ar==="TB"?(d.attr("x",s-f.width/2-10).attr("y",0),p.attr("transform","translate("+(s-f.width/2-5)+", 0)")):ar==="BT"?(d.attr("x",s-f.width/2-10).attr("y",Al),p.attr("transform","translate("+(s-f.width/2-5)+", "+Al+")")):d.attr("transform","translate(-19, "+(s-f.height/2)+")")}))}),"drawBranches"),q4e=l((function(t,e,r,n,i){return ra.set(t,{pos:e,index:r}),e+=50+(i?40:0)+(ar==="TB"||ar==="BT"?n.width/2:0)}),"setBranchPosition"),j4e=l((function(t,e,r,n){if(C4e(),ee.debug("in gitgraph renderer",t+`
`,"id:",e,r),!Ga)throw new Error("GitGraph config not found");const i=Ga.rotateCommitLabel??!1,a=n.db;cy=a.getCommits();const s=a.getBranchesAsObjArray();ar=a.getDirection();const o=Ze(`[id="${e}"]`);let u=0;s.forEach(((h,d)=>{const p=wne(h.name),f=o.append("g"),g=f.insert("g").attr("class","branchLabel"),m=g.insert("g").attr("class","label branch-label");m.node()?.appendChild(p);const y=p.getBBox();u=q4e(h.name,u,d,y,i),m.remove(),g.remove(),f.remove()})),RO(o,cy,!1),Ga.showBranches&&U4e(o,s),G4e(o,cy),RO(o,cy,!0),Vt.insertTitle(o,"gitTitleText",Ga.titleTopMargin??0,a.getDiagramTitle()),t$(void 0,o,Ga.diagramPadding,Ga.useMaxWidth)}),"draw"),W4e={draw:j4e},Y4e=l((t=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map((e=>`
        .branch-label${e} { fill: ${t["gitBranchLabel"+e]}; }
        .commit${e} { stroke: ${t["git"+e]}; fill: ${t["git"+e]}; }
        .commit-highlight${e} { stroke: ${t["gitInv"+e]}; fill: ${t["gitInv"+e]}; }
        .label${e}  { fill: ${t["git"+e]}; }
        .arrow${e} { stroke: ${t["git"+e]}; }
        `)).join(`
`)}

  .branch {
    stroke-width: 1;
    stroke: ${t.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelColor};}
  .commit-label-bkg { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${t.tagLabelFontSize}; fill: ${t.tagLabelColor};}
  .tag-label-bkg { fill: ${t.tagLabelBackground}; stroke: ${t.tagLabelBorder}; }
  .tag-hole { fill: ${t.textColor}; }

  .commit-merge {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
  }
  .commit-reverse {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  .gitTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
`),"getStyles"),V4e={parser:_4e,db:bne,renderer:W4e,styles:Y4e},H4e=Object.freeze({__proto__:null,diagram:V4e}),X4e=qn({"../../node_modules/.pnpm/dayjs@1.11.13/node_modules/dayjs/plugin/isoWeek.js"(t,e){(function(r,n){typeof t=="object"&&e!==void 0?e.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_isoWeek=n()})(t,(function(){var r="day";return function(n,i,a){var s=l((function(h){return h.add(4-h.isoWeekday(),r)}),"a"),o=i.prototype;o.isoWeekYear=function(){return s(this).year()},o.isoWeek=function(h){if(!this.$utils().u(h))return this.add(7*(h-this.isoWeek()),r);var d,p,f,g=s(this),m=(d=this.isoWeekYear(),f=4-(p=(this.$u?a.utc:a)().year(d).startOf("year")).isoWeekday(),p.isoWeekday()>4&&(f+=7),p.add(f,r));return g.diff(m,"week")+1},o.isoWeekday=function(h){return this.$utils().u(h)?this.day()||7:this.day(this.day()%7?h:h-7)};var u=o.startOf;o.startOf=function(h,d){var p=this.$utils(),f=!!p.u(d)||d;return p.p(h)==="isoweek"?f?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):u.bind(this)(h,d)}}}))}}),K4e=qn({"../../node_modules/.pnpm/dayjs@1.11.13/node_modules/dayjs/plugin/customParseFormat.js"(t,e){(function(r,n){typeof t=="object"&&e!==void 0?e.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_customParseFormat=n()})(t,(function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},n=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d/,a=/\d\d/,s=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,u={},h=l((function(v){return(v=+v)+(v>68?1900:2e3)}),"a"),d=l((function(v){return function(x){this[v]=+x}}),"f"),p=[/[+-]\d\d:?(\d\d)?|Z/,function(v){(this.zone||(this.zone={})).offset=(function(x){if(!x||x==="Z")return 0;var b=x.match(/([+-]|\d\d)/g),w=60*b[1]+(+b[2]||0);return w===0?0:b[0]==="+"?-w:w})(v)}],f=l((function(v){var x=u[v];return x&&(x.indexOf?x:x.s.concat(x.f))}),"u"),g=l((function(v,x){var b,w=u.meridiem;if(w){for(var T=1;T<=24;T+=1)if(v.indexOf(w(T,0,x))>-1){b=T>12;break}}else b=v===(x?"pm":"PM");return b}),"d"),m={A:[o,function(v){this.afternoon=g(v,!1)}],a:[o,function(v){this.afternoon=g(v,!0)}],Q:[i,function(v){this.month=3*(v-1)+1}],S:[i,function(v){this.milliseconds=100*+v}],SS:[a,function(v){this.milliseconds=10*+v}],SSS:[/\d{3}/,function(v){this.milliseconds=+v}],s:[s,d("seconds")],ss:[s,d("seconds")],m:[s,d("minutes")],mm:[s,d("minutes")],H:[s,d("hours")],h:[s,d("hours")],HH:[s,d("hours")],hh:[s,d("hours")],D:[s,d("day")],DD:[a,d("day")],Do:[o,function(v){var x=u.ordinal,b=v.match(/\d+/);if(this.day=b[0],x)for(var w=1;w<=31;w+=1)x(w).replace(/\[|\]/g,"")===v&&(this.day=w)}],w:[s,d("week")],ww:[a,d("week")],M:[s,d("month")],MM:[a,d("month")],MMM:[o,function(v){var x=f("months"),b=(f("monthsShort")||x.map((function(w){return w.slice(0,3)}))).indexOf(v)+1;if(b<1)throw new Error;this.month=b%12||b}],MMMM:[o,function(v){var x=f("months").indexOf(v)+1;if(x<1)throw new Error;this.month=x%12||x}],Y:[/[+-]?\d+/,d("year")],YY:[a,function(v){this.year=h(v)}],YYYY:[/\d{4}/,d("year")],Z:p,ZZ:p};function y(v){var x,b;x=v,b=u&&u.formats;for(var w=(v=x.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(N,O,B){var L=B&&B.toUpperCase();return O||b[B]||r[B]||b[L].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(I,A,M){return A||M.slice(1)}))}))).match(n),T=w.length,k=0;k<T;k+=1){var C=w[k],E=m[C],_=E&&E[0],S=E&&E[1];w[k]=S?{regex:_,parser:S}:C.replace(/^\[|\]$/g,"")}return function(N){for(var O={},B=0,L=0;B<T;B+=1){var I=w[B];if(typeof I=="string")L+=I.length;else{var A=I.regex,M=I.parser,D=N.slice(L),R=A.exec(D)[0];M.call(O,R),N=N.replace(R,"")}}return(function(P){var $=P.afternoon;if($!==void 0){var z=P.hours;$?z<12&&(P.hours+=12):z===12&&(P.hours=0),delete P.afternoon}})(O),O}}return l(y,"l"),function(v,x,b){b.p.customParseFormat=!0,v&&v.parseTwoDigitYear&&(h=v.parseTwoDigitYear);var w=x.prototype,T=w.parse;w.parse=function(k){var C=k.date,E=k.utc,_=k.args;this.$u=E;var S=_[1];if(typeof S=="string"){var N=_[2]===!0,O=_[3]===!0,B=N||O,L=_[2];O&&(L=_[2]),u=this.$locale(),!N&&L&&(u=b.Ls[L]),this.$d=(function(D,R,P,$){try{if(["x","X"].indexOf(R)>-1)return new Date((R==="X"?1e3:1)*D);var z=y(R)(D),q=z.year,W=z.month,Q=z.day,te=z.hours,oe=z.minutes,re=z.seconds,H=z.milliseconds,K=z.zone,ie=z.week,ne=new Date,J=Q||(q||W?1:ne.getDate()),ue=q||ne.getFullYear(),Y=0;q&&!W||(Y=W>0?W-1:ne.getMonth());var se,de=te||0,ce=oe||0,Ee=re||0,ve=H||0;return K?new Date(Date.UTC(ue,Y,J,de,ce,Ee,ve+60*K.offset*1e3)):P?new Date(Date.UTC(ue,Y,J,de,ce,Ee,ve)):(se=new Date(ue,Y,J,de,ce,Ee,ve),ie&&(se=$(se).week(ie).toDate()),se)}catch{return new Date("")}})(C,S,E,b),this.init(),L&&L!==!0&&(this.$L=this.locale(L).$L),B&&C!=this.format(S)&&(this.$d=new Date("")),u={}}else if(S instanceof Array)for(var I=S.length,A=1;A<=I;A+=1){_[1]=S[A-1];var M=b.apply(this,_);if(M.isValid()){this.$d=M.$d,this.$L=M.$L,this.init();break}A===I&&(this.$d=new Date(""))}else T.call(this,k)}}}))}}),Z4e=qn({"../../node_modules/.pnpm/dayjs@1.11.13/node_modules/dayjs/plugin/advancedFormat.js"(t,e){(function(r,n){typeof t=="object"&&e!==void 0?e.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_advancedFormat=n()})(t,(function(){return function(r,n){var i=n.prototype,a=i.format;i.format=function(s){var o=this,u=this.$locale();if(!this.isValid())return a.bind(this)(s);var h=this.$utils(),d=(s||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(p){switch(p){case"Q":return Math.ceil((o.$M+1)/3);case"Do":return u.ordinal(o.$D);case"gggg":return o.weekYear();case"GGGG":return o.isoWeekYear();case"wo":return u.ordinal(o.week(),"W");case"w":case"ww":return h.s(o.week(),p==="w"?1:2,"0");case"W":case"WW":return h.s(o.isoWeek(),p==="W"?1:2,"0");case"k":case"kk":return h.s(String(o.$H===0?24:o.$H),p==="k"?1:2,"0");case"X":return Math.floor(o.$d.getTime()/1e3);case"x":return o.$d.getTime();case"z":return"["+o.offsetName()+"]";case"zzz":return"["+o.offsetName("long")+"]";default:return p}}));return a.bind(this)(d)}}}))}}),WC=(function(){var t=l((function(L,I,A,M){for(A=A||{},M=L.length;M--;A[L[M]]=I);return A}),"o"),e=[6,8,10,12,13,14,15,16,17,18,20,21,22,23,24,25,26,27,28,29,30,31,33,35,36,38,40],r=[1,26],n=[1,27],i=[1,28],a=[1,29],s=[1,30],o=[1,31],u=[1,32],h=[1,33],d=[1,34],p=[1,9],f=[1,10],g=[1,11],m=[1,12],y=[1,13],v=[1,14],x=[1,15],b=[1,16],w=[1,19],T=[1,20],k=[1,21],C=[1,22],E=[1,23],_=[1,25],S=[1,35],N={trace:l((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,gantt:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NL:10,weekday:11,weekday_monday:12,weekday_tuesday:13,weekday_wednesday:14,weekday_thursday:15,weekday_friday:16,weekday_saturday:17,weekday_sunday:18,weekend:19,weekend_friday:20,weekend_saturday:21,dateFormat:22,inclusiveEndDates:23,topAxis:24,axisFormat:25,tickInterval:26,excludes:27,includes:28,todayMarker:29,title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,section:36,clickStatement:37,taskTxt:38,taskData:39,click:40,callbackname:41,callbackargs:42,href:43,clickStatementDebug:44,$accept:0,$end:1},terminals_:{2:"error",4:"gantt",6:"EOF",8:"SPACE",10:"NL",12:"weekday_monday",13:"weekday_tuesday",14:"weekday_wednesday",15:"weekday_thursday",16:"weekday_friday",17:"weekday_saturday",18:"weekday_sunday",20:"weekend_friday",21:"weekend_saturday",22:"dateFormat",23:"inclusiveEndDates",24:"topAxis",25:"axisFormat",26:"tickInterval",27:"excludes",28:"includes",29:"todayMarker",30:"title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"section",38:"taskTxt",39:"taskData",40:"click",41:"callbackname",42:"callbackargs",43:"href"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[19,1],[19,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,2],[37,2],[37,3],[37,3],[37,4],[37,3],[37,4],[37,2],[44,2],[44,3],[44,3],[44,4],[44,3],[44,4],[44,2]],performAction:l((function(L,I,A,M,D,R,P){var $=R.length-1;switch(D){case 1:return R[$-1];case 2:case 6:case 7:this.$=[];break;case 3:R[$-1].push(R[$]),this.$=R[$-1];break;case 4:case 5:this.$=R[$];break;case 8:M.setWeekday("monday");break;case 9:M.setWeekday("tuesday");break;case 10:M.setWeekday("wednesday");break;case 11:M.setWeekday("thursday");break;case 12:M.setWeekday("friday");break;case 13:M.setWeekday("saturday");break;case 14:M.setWeekday("sunday");break;case 15:M.setWeekend("friday");break;case 16:M.setWeekend("saturday");break;case 17:M.setDateFormat(R[$].substr(11)),this.$=R[$].substr(11);break;case 18:M.enableInclusiveEndDates(),this.$=R[$].substr(18);break;case 19:M.TopAxis(),this.$=R[$].substr(8);break;case 20:M.setAxisFormat(R[$].substr(11)),this.$=R[$].substr(11);break;case 21:M.setTickInterval(R[$].substr(13)),this.$=R[$].substr(13);break;case 22:M.setExcludes(R[$].substr(9)),this.$=R[$].substr(9);break;case 23:M.setIncludes(R[$].substr(9)),this.$=R[$].substr(9);break;case 24:M.setTodayMarker(R[$].substr(12)),this.$=R[$].substr(12);break;case 27:M.setDiagramTitle(R[$].substr(6)),this.$=R[$].substr(6);break;case 28:this.$=R[$].trim(),M.setAccTitle(this.$);break;case 29:case 30:this.$=R[$].trim(),M.setAccDescription(this.$);break;case 31:M.addSection(R[$].substr(8)),this.$=R[$].substr(8);break;case 33:M.addTask(R[$-1],R[$]),this.$="task";break;case 34:this.$=R[$-1],M.setClickEvent(R[$-1],R[$],null);break;case 35:this.$=R[$-2],M.setClickEvent(R[$-2],R[$-1],R[$]);break;case 36:this.$=R[$-2],M.setClickEvent(R[$-2],R[$-1],null),M.setLink(R[$-2],R[$]);break;case 37:this.$=R[$-3],M.setClickEvent(R[$-3],R[$-2],R[$-1]),M.setLink(R[$-3],R[$]);break;case 38:this.$=R[$-2],M.setClickEvent(R[$-2],R[$],null),M.setLink(R[$-2],R[$-1]);break;case 39:this.$=R[$-3],M.setClickEvent(R[$-3],R[$-1],R[$]),M.setLink(R[$-3],R[$-2]);break;case 40:this.$=R[$-1],M.setLink(R[$-1],R[$]);break;case 41:case 47:this.$=R[$-1]+" "+R[$];break;case 42:case 43:case 45:this.$=R[$-2]+" "+R[$-1]+" "+R[$];break;case 44:case 46:this.$=R[$-3]+" "+R[$-2]+" "+R[$-1]+" "+R[$]}}),"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:17,12:r,13:n,14:i,15:a,16:s,17:o,18:u,19:18,20:h,21:d,22:p,23:f,24:g,25:m,26:y,27:v,28:x,29:b,30:w,31:T,33:k,35:C,36:E,37:24,38:_,40:S},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:36,11:17,12:r,13:n,14:i,15:a,16:s,17:o,18:u,19:18,20:h,21:d,22:p,23:f,24:g,25:m,26:y,27:v,28:x,29:b,30:w,31:T,33:k,35:C,36:E,37:24,38:_,40:S},t(e,[2,5]),t(e,[2,6]),t(e,[2,17]),t(e,[2,18]),t(e,[2,19]),t(e,[2,20]),t(e,[2,21]),t(e,[2,22]),t(e,[2,23]),t(e,[2,24]),t(e,[2,25]),t(e,[2,26]),t(e,[2,27]),{32:[1,37]},{34:[1,38]},t(e,[2,30]),t(e,[2,31]),t(e,[2,32]),{39:[1,39]},t(e,[2,8]),t(e,[2,9]),t(e,[2,10]),t(e,[2,11]),t(e,[2,12]),t(e,[2,13]),t(e,[2,14]),t(e,[2,15]),t(e,[2,16]),{41:[1,40],43:[1,41]},t(e,[2,4]),t(e,[2,28]),t(e,[2,29]),t(e,[2,33]),t(e,[2,34],{42:[1,42],43:[1,43]}),t(e,[2,40],{41:[1,44]}),t(e,[2,35],{43:[1,45]}),t(e,[2,36]),t(e,[2,38],{42:[1,46]}),t(e,[2,37]),t(e,[2,39])],defaultActions:{},parseError:l((function(L,I){if(!I.recoverable){var A=new Error(L);throw A.hash=I,A}this.trace(L)}),"parseError"),parse:l((function(L){var I=this,A=[0],M=[],D=[null],R=[],P=this.table,$="",z=0,q=0,W=2,Q=1,te=R.slice.call(arguments,1),oe=Object.create(this.lexer),re={yy:{}};for(var H in this.yy)Object.prototype.hasOwnProperty.call(this.yy,H)&&(re.yy[H]=this.yy[H]);oe.setInput(L,re.yy),re.yy.lexer=oe,re.yy.parser=this,oe.yylloc===void 0&&(oe.yylloc={});var K=oe.yylloc;R.push(K);var ie=oe.options&&oe.options.ranges;function ne(Ge){A.length=A.length-2*Ge,D.length=D.length-Ge,R.length=R.length-Ge}function J(){var Ge;return typeof(Ge=M.pop()||oe.lex()||Q)!="number"&&(Ge instanceof Array&&(Ge=(M=Ge).pop()),Ge=I.symbols_[Ge]||Ge),Ge}typeof re.yy.parseError=="function"?this.parseError=re.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,l(ne,"popStack"),l(J,"lex");for(var ue,Y,se,de,ce,Ee,ve,De,Ue={};;){if(Y=A[A.length-1],this.defaultActions[Y]?se=this.defaultActions[Y]:(ue==null&&(ue=J()),se=P[Y]&&P[Y][ue]),se===void 0||!se.length||!se[0]){var ze="";for(ce in De=[],P[Y])this.terminals_[ce]&&ce>W&&De.push("'"+this.terminals_[ce]+"'");ze=oe.showPosition?"Parse error on line "+(z+1)+`:
`+oe.showPosition()+`
Expecting `+De.join(", ")+", got '"+(this.terminals_[ue]||ue)+"'":"Parse error on line "+(z+1)+": Unexpected "+(ue==Q?"end of input":"'"+(this.terminals_[ue]||ue)+"'"),this.parseError(ze,{text:oe.match,token:this.terminals_[ue]||ue,line:oe.yylineno,loc:K,expected:De})}if(se[0]instanceof Array&&se.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Y+", token: "+ue);switch(se[0]){case 1:A.push(ue),D.push(oe.yytext),R.push(oe.yylloc),A.push(se[1]),ue=null,q=oe.yyleng,$=oe.yytext,z=oe.yylineno,K=oe.yylloc;break;case 2:if(Ee=this.productions_[se[1]][1],Ue.$=D[D.length-Ee],Ue._$={first_line:R[R.length-(Ee||1)].first_line,last_line:R[R.length-1].last_line,first_column:R[R.length-(Ee||1)].first_column,last_column:R[R.length-1].last_column},ie&&(Ue._$.range=[R[R.length-(Ee||1)].range[0],R[R.length-1].range[1]]),(de=this.performAction.apply(Ue,[$,q,z,re.yy,se[1],D,R].concat(te)))!==void 0)return de;Ee&&(A=A.slice(0,-1*Ee*2),D=D.slice(0,-1*Ee),R=R.slice(0,-1*Ee)),A.push(this.productions_[se[1]][0]),D.push(Ue.$),R.push(Ue._$),ve=P[A[A.length-2]][A[A.length-1]],A.push(ve);break;case 3:return!0}}return!0}),"parse")},O=(function(){var L={EOF:1,parseError:l((function(I,A){if(!this.yy.parser)throw new Error(I);this.yy.parser.parseError(I,A)}),"parseError"),setInput:l((function(I,A){return this.yy=A||this.yy||{},this._input=I,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:l((function(){var I=this._input[0];return this.yytext+=I,this.yyleng++,this.offset++,this.match+=I,this.matched+=I,I.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),I}),"input"),unput:l((function(I){var A=I.length,M=I.split(/(?:\r\n?|\n)/g);this._input=I+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-A),this.offset-=A;var D=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),M.length-1&&(this.yylineno-=M.length-1);var R=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:M?(M.length===D.length?this.yylloc.first_column:0)+D[D.length-M.length].length-M[0].length:this.yylloc.first_column-A},this.options.ranges&&(this.yylloc.range=[R[0],R[0]+this.yyleng-A]),this.yyleng=this.yytext.length,this}),"unput"),more:l((function(){return this._more=!0,this}),"more"),reject:l((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:l((function(I){this.unput(this.match.slice(I))}),"less"),pastInput:l((function(){var I=this.matched.substr(0,this.matched.length-this.match.length);return(I.length>20?"...":"")+I.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:l((function(){var I=this.match;return I.length<20&&(I+=this._input.substr(0,20-I.length)),(I.substr(0,20)+(I.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:l((function(){var I=this.pastInput(),A=new Array(I.length+1).join("-");return I+this.upcomingInput()+`
`+A+"^"}),"showPosition"),test_match:l((function(I,A){var M,D,R;if(this.options.backtrack_lexer&&(R={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(R.yylloc.range=this.yylloc.range.slice(0))),(D=I[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=D.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:D?D[D.length-1].length-D[D.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+I[0].length},this.yytext+=I[0],this.match+=I[0],this.matches=I,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(I[0].length),this.matched+=I[0],M=this.performAction.call(this,this.yy,this,A,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),M)return M;if(this._backtrack){for(var P in R)this[P]=R[P];return!1}return!1}),"test_match"),next:l((function(){if(this.done)return this.EOF;var I,A,M,D;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var R=this._currentRules(),P=0;P<R.length;P++)if((M=this._input.match(this.rules[R[P]]))&&(!A||M[0].length>A[0].length)){if(A=M,D=P,this.options.backtrack_lexer){if((I=this.test_match(M,R[P]))!==!1)return I;if(this._backtrack){A=!1;continue}return!1}if(!this.options.flex)break}return A?(I=this.test_match(A,R[D]))!==!1&&I:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:l((function(){var I=this.next();return I||this.lex()}),"lex"),begin:l((function(I){this.conditionStack.push(I)}),"begin"),popState:l((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:l((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:l((function(I){return(I=this.conditionStack.length-1-Math.abs(I||0))>=0?this.conditionStack[I]:"INITIAL"}),"topState"),pushState:l((function(I){this.begin(I)}),"pushState"),stateStackSize:l((function(){return this.conditionStack.length}),"stateStackSize"),options:{"case-insensitive":!0},performAction:l((function(I,A,M,D){switch(M){case 0:return this.begin("open_directive"),"open_directive";case 1:return this.begin("acc_title"),31;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),33;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:case 15:case 18:case 21:case 24:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:case 9:case 10:case 12:case 13:break;case 11:return 10;case 14:this.begin("href");break;case 16:return 43;case 17:this.begin("callbackname");break;case 19:this.popState(),this.begin("callbackargs");break;case 20:return 41;case 22:return 42;case 23:this.begin("click");break;case 25:return 40;case 26:return 4;case 27:return 22;case 28:return 23;case 29:return 24;case 30:return 25;case 31:return 26;case 32:return 28;case 33:return 27;case 34:return 29;case 35:return 12;case 36:return 13;case 37:return 14;case 38:return 15;case 39:return 16;case 40:return 17;case 41:return 18;case 42:return 20;case 43:return 21;case 44:return"date";case 45:return 30;case 46:return"accDescription";case 47:return 36;case 48:return 38;case 49:return 39;case 50:return":";case 51:return 6;case 52:return"INVALID"}}),"anonymous"),rules:[/^(?:%%\{)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:weekday\s+monday\b)/i,/^(?:weekday\s+tuesday\b)/i,/^(?:weekday\s+wednesday\b)/i,/^(?:weekday\s+thursday\b)/i,/^(?:weekday\s+friday\b)/i,/^(?:weekday\s+saturday\b)/i,/^(?:weekday\s+sunday\b)/i,/^(?:weekend\s+friday\b)/i,/^(?:weekend\s+saturday\b)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^\n]+)/i,/^(?:[^:\n]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[6,7],inclusive:!1},acc_descr:{rules:[4],inclusive:!1},acc_title:{rules:[2],inclusive:!1},callbackargs:{rules:[21,22],inclusive:!1},callbackname:{rules:[18,19,20],inclusive:!1},href:{rules:[15,16],inclusive:!1},click:{rules:[24,25],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,17,23,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52],inclusive:!0}}};return L})();function B(){this.yy={}}return N.lexer=O,l(B,"Parser"),B.prototype=N,N.Parser=B,new B})();WC.parser=WC;var Q4e=WC,J4e=Ci(bv()),Xa=Ci(g8()),e5e=Ci(X4e()),t5e=Ci(K4e()),r5e=Ci(Z4e());Xa.default.extend(e5e.default),Xa.default.extend(t5e.default),Xa.default.extend(r5e.default);var YC,e4,MO={friday:5,saturday:6},Ks="",eN="",tN=void 0,rN="",Xv=[],Kv=[],nN=new Map,iN=[],aN=[],Q0="",sN="",Tne=["active","done","crit","milestone"],oN=[],Zv=!1,lN=!1,cN="sunday",Q5="saturday",VC=0,n5e=l((function(){iN=[],aN=[],Q0="",oN=[],Ane=0,YC=void 0,e4=void 0,Nn=[],Ks="",eN="",sN="",tN=void 0,rN="",Xv=[],Kv=[],Zv=!1,lN=!1,VC=0,nN=new Map,jn(),cN="sunday",Q5="saturday"}),"clear"),i5e=l((function(t){eN=t}),"setAxisFormat"),a5e=l((function(){return eN}),"getAxisFormat"),s5e=l((function(t){tN=t}),"setTickInterval"),o5e=l((function(){return tN}),"getTickInterval"),l5e=l((function(t){rN=t}),"setTodayMarker"),c5e=l((function(){return rN}),"getTodayMarker"),u5e=l((function(t){Ks=t}),"setDateFormat"),h5e=l((function(){Zv=!0}),"enableInclusiveEndDates"),d5e=l((function(){return Zv}),"endDatesAreInclusive"),p5e=l((function(){lN=!0}),"enableTopAxis"),f5e=l((function(){return lN}),"topAxisEnabled"),g5e=l((function(t){sN=t}),"setDisplayMode"),m5e=l((function(){return sN}),"getDisplayMode"),y5e=l((function(){return Ks}),"getDateFormat"),v5e=l((function(t){Xv=t.toLowerCase().split(/[\s,]+/)}),"setIncludes"),x5e=l((function(){return Xv}),"getIncludes"),b5e=l((function(t){Kv=t.toLowerCase().split(/[\s,]+/)}),"setExcludes"),w5e=l((function(){return Kv}),"getExcludes"),k5e=l((function(){return nN}),"getLinks"),T5e=l((function(t){Q0=t,iN.push(t)}),"addSection"),E5e=l((function(){return iN}),"getSections"),_5e=l((function(){let t=DO(),e=0;for(;!t&&e<10;)t=DO(),e++;return aN=Nn}),"getTasks"),Ene=l((function(t,e,r,n){return!n.includes(t.format(e.trim()))&&(!(!r.includes("weekends")||t.isoWeekday()!==MO[Q5]&&t.isoWeekday()!==MO[Q5]+1)||!!r.includes(t.format("dddd").toLowerCase())||r.includes(t.format(e.trim())))}),"isInvalidDate"),C5e=l((function(t){cN=t}),"setWeekday"),S5e=l((function(){return cN}),"getWeekday"),A5e=l((function(t){Q5=t}),"setWeekend"),_ne=l((function(t,e,r,n){if(!r.length||t.manualEndTime)return;let i,a;i=t.startTime instanceof Date?(0,Xa.default)(t.startTime):(0,Xa.default)(t.startTime,e,!0),i=i.add(1,"d"),a=t.endTime instanceof Date?(0,Xa.default)(t.endTime):(0,Xa.default)(t.endTime,e,!0);const[s,o]=L5e(i,a,e,r,n);t.endTime=s.toDate(),t.renderEndTime=o}),"checkTaskDates"),L5e=l((function(t,e,r,n,i){let a=!1,s=null;for(;t<=e;)a||(s=e.toDate()),a=Ene(t,r,n,i),a&&(e=e.add(1,"d")),t=t.add(1,"d");return[e,s]}),"fixTaskDates"),HC=l((function(t,e,r){r=r.trim();const n=/^after\s+(?<ids>[\d\w- ]+)/.exec(r);if(n!==null){let a=null;for(const o of n.groups.ids.split(" ")){let u=yh(o);u!==void 0&&(!a||u.endTime>a.endTime)&&(a=u)}if(a)return a.endTime;const s=new Date;return s.setHours(0,0,0,0),s}let i=(0,Xa.default)(r,e.trim(),!0);if(i.isValid())return i.toDate();{ee.debug("Invalid date:"+r),ee.debug("With date format:"+e.trim());const a=new Date(r);if(a===void 0||isNaN(a.getTime())||a.getFullYear()<-1e4||a.getFullYear()>1e4)throw new Error("Invalid date:"+r);return a}}),"getStartDate"),Cne=l((function(t){const e=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(t.trim());return e!==null?[Number.parseFloat(e[1]),e[2]]:[NaN,"ms"]}),"parseDuration"),Sne=l((function(t,e,r,n=!1){r=r.trim();const i=/^until\s+(?<ids>[\d\w- ]+)/.exec(r);if(i!==null){let h=null;for(const p of i.groups.ids.split(" ")){let f=yh(p);f!==void 0&&(!h||f.startTime<h.startTime)&&(h=f)}if(h)return h.startTime;const d=new Date;return d.setHours(0,0,0,0),d}let a=(0,Xa.default)(r,e.trim(),!0);if(a.isValid())return n&&(a=a.add(1,"d")),a.toDate();let s=(0,Xa.default)(t);const[o,u]=Cne(r);if(!Number.isNaN(o)){const h=s.add(o,u);h.isValid()&&(s=h)}return s.toDate()}),"getEndDate"),Ane=0,ep=l((function(t){return t===void 0?"task"+(Ane+=1):t}),"parseId"),N5e=l((function(t,e){let r;r=e.substr(0,1)===":"?e.substr(1,e.length):e;const n=r.split(","),i={};uN(n,i,Tne);for(let s=0;s<n.length;s++)n[s]=n[s].trim();let a="";switch(n.length){case 1:i.id=ep(),i.startTime=t.endTime,a=n[0];break;case 2:i.id=ep(),i.startTime=HC(void 0,Ks,n[0]),a=n[1];break;case 3:i.id=ep(n[0]),i.startTime=HC(void 0,Ks,n[1]),a=n[2]}return a&&(i.endTime=Sne(i.startTime,Ks,a,Zv),i.manualEndTime=(0,Xa.default)(a,"YYYY-MM-DD",!0).isValid(),_ne(i,Ks,Kv,Xv)),i}),"compileData"),I5e=l((function(t,e){let r;r=e.substr(0,1)===":"?e.substr(1,e.length):e;const n=r.split(","),i={};uN(n,i,Tne);for(let a=0;a<n.length;a++)n[a]=n[a].trim();switch(n.length){case 1:i.id=ep(),i.startTime={type:"prevTaskEnd",id:t},i.endTime={data:n[0]};break;case 2:i.id=ep(),i.startTime={type:"getStartDate",startData:n[0]},i.endTime={data:n[1]};break;case 3:i.id=ep(n[0]),i.startTime={type:"getStartDate",startData:n[1]},i.endTime={data:n[2]}}return i}),"parseData"),Nn=[],Lne={},R5e=l((function(t,e){const r={section:Q0,type:Q0,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:e},task:t,classes:[]},n=I5e(e4,e);r.raw.startTime=n.startTime,r.raw.endTime=n.endTime,r.id=n.id,r.prevTaskId=e4,r.active=n.active,r.done=n.done,r.crit=n.crit,r.milestone=n.milestone,r.order=VC,VC++;const i=Nn.push(r);e4=r.id,Lne[r.id]=i-1}),"addTask"),yh=l((function(t){const e=Lne[t];return Nn[e]}),"findTaskById"),M5e=l((function(t,e){const r={section:Q0,type:Q0,description:t,task:t,classes:[]},n=N5e(YC,e);r.startTime=n.startTime,r.endTime=n.endTime,r.id=n.id,r.active=n.active,r.done=n.done,r.crit=n.crit,r.milestone=n.milestone,YC=r,aN.push(r)}),"addTaskOrg"),DO=l((function(){const t=l((function(r){const n=Nn[r];let i="";switch(Nn[r].raw.startTime.type){case"prevTaskEnd":{const a=yh(n.prevTaskId);n.startTime=a.endTime;break}case"getStartDate":i=HC(void 0,Ks,Nn[r].raw.startTime.startData),i&&(Nn[r].startTime=i)}return Nn[r].startTime&&(Nn[r].endTime=Sne(Nn[r].startTime,Ks,Nn[r].raw.endTime.data,Zv),Nn[r].endTime&&(Nn[r].processed=!0,Nn[r].manualEndTime=(0,Xa.default)(Nn[r].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),_ne(Nn[r],Ks,Kv,Xv))),Nn[r].processed}),"compileTask");let e=!0;for(const[r,n]of Nn.entries())t(r),e=e&&n.processed;return e}),"compileTasks"),D5e=l((function(t,e){let r=e;ke().securityLevel!=="loose"&&(r=(0,J4e.sanitizeUrl)(e)),t.split(",").forEach((function(n){yh(n)!==void 0&&(Ine(n,(()=>{window.open(r,"_self")})),nN.set(n,r))})),Nne(t,"clickable")}),"setLink"),Nne=l((function(t,e){t.split(",").forEach((function(r){let n=yh(r);n!==void 0&&n.classes.push(e)}))}),"setClass"),O5e=l((function(t,e,r){if(ke().securityLevel!=="loose"||e===void 0)return;let n=[];if(typeof r=="string"){n=r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let i=0;i<n.length;i++){let a=n[i].trim();a.startsWith('"')&&a.endsWith('"')&&(a=a.substr(1,a.length-2)),n[i]=a}}n.length===0&&n.push(t),yh(t)!==void 0&&Ine(t,(()=>{Vt.runFunc(e,...n)}))}),"setClickFun"),Ine=l((function(t,e){oN.push((function(){const r=document.querySelector(`[id="${t}"]`);r!==null&&r.addEventListener("click",(function(){e()}))}),(function(){const r=document.querySelector(`[id="${t}-text"]`);r!==null&&r.addEventListener("click",(function(){e()}))}))}),"pushFun"),P5e=l((function(t,e,r){t.split(",").forEach((function(n){O5e(n,e,r)})),Nne(t,"clickable")}),"setClickEvent"),B5e=l((function(t){oN.forEach((function(e){e(t)}))}),"bindFunctions"),$5e={getConfig:l((()=>ke().gantt),"getConfig"),clear:n5e,setDateFormat:u5e,getDateFormat:y5e,enableInclusiveEndDates:h5e,endDatesAreInclusive:d5e,enableTopAxis:p5e,topAxisEnabled:f5e,setAxisFormat:i5e,getAxisFormat:a5e,setTickInterval:s5e,getTickInterval:o5e,setTodayMarker:l5e,getTodayMarker:c5e,setAccTitle:zn,getAccTitle:Xn,setDiagramTitle:di,getDiagramTitle:Wn,setDisplayMode:g5e,getDisplayMode:m5e,setAccDescription:Kn,getAccDescription:Zn,addSection:T5e,getSections:E5e,getTasks:_5e,addTask:R5e,findTaskById:yh,addTaskOrg:M5e,setIncludes:v5e,getIncludes:x5e,setExcludes:b5e,getExcludes:w5e,setClickEvent:P5e,setLink:D5e,getLinks:k5e,bindFunctions:B5e,parseDuration:Cne,isInvalidDate:Ene,setWeekday:C5e,getWeekday:S5e,setWeekend:A5e};function uN(t,e,r){let n=!0;for(;n;)n=!1,r.forEach((function(i){const a=new RegExp("^\\s*"+i+"\\s*$");t[0].match(a)&&(e[i]=!0,t.shift(1),n=!0)}))}l(uN,"getTaskTags");var fl,_T=Ci(g8()),F5e=l((function(){ee.debug("Something is calling, setConf, remove the call")}),"setConf"),OO={monday:g2,tuesday:Bz,wednesday:$z,thursday:Gu,friday:Fz,saturday:zz,sunday:mv},z5e=l(((t,e)=>{let r=[...t].map((()=>-1/0)),n=[...t].sort(((a,s)=>a.startTime-s.startTime||a.order-s.order)),i=0;for(const a of n)for(let s=0;s<r.length;s++)if(a.startTime>=r[s]){r[s]=a.endTime,a.order=s+e,s>i&&(i=s);break}return i}),"getMaxIntersections"),G5e=l((function(t,e,r,n){const i=ke().gantt,a=ke().securityLevel;let s;a==="sandbox"&&(s=Ze("#i"+e));const o=Ze(a==="sandbox"?s.nodes()[0].contentDocument.body:"body"),u=a==="sandbox"?s.nodes()[0].contentDocument:document,h=u.getElementById(e);(fl=h.parentElement.offsetWidth)===void 0&&(fl=1200),i.useWidth!==void 0&&(fl=i.useWidth);const d=n.db.getTasks();let p=[];for(const _ of d)p.push(_.type);p=E(p);const f={};let g=2*i.topPadding;if(n.db.getDisplayMode()==="compact"||i.displayMode==="compact"){const _={};for(const N of d)_[N.section]===void 0?_[N.section]=[N]:_[N.section].push(N);let S=0;for(const N of Object.keys(_)){const O=z5e(_[N],S)+1;S+=O,g+=O*(i.barHeight+i.barGap),f[N]=O}}else{g+=d.length*(i.barHeight+i.barGap);for(const _ of p)f[_]=d.filter((S=>S.type===_)).length}h.setAttribute("viewBox","0 0 "+fl+" "+g);const m=o.select(`[id="${e}"]`),y=qG().domain([n$(d,(function(_){return _.startTime})),r$(d,(function(_){return _.endTime}))]).rangeRound([0,fl-i.leftPadding-i.rightPadding]);function v(_,S){const N=_.startTime,O=S.startTime;let B=0;return N>O?B=1:N<O&&(B=-1),B}function x(_,S,N){const O=i.barHeight,B=O+i.barGap,L=i.topPadding,I=i.leftPadding,A=Fu().domain([0,p.length]).range(["#00B9FA","#F95002"]).interpolate(Pue);w(B,L,I,S,N,_,n.db.getExcludes(),n.db.getIncludes()),T(I,L,S,N),b(_,B,L,I,O,A,S),k(B,L),C(I,L,S,N)}function b(_,S,N,O,B,L,I){const A=[...new Set(_.map((R=>R.order)))].map((R=>_.find((P=>P.order===R))));m.append("g").selectAll("rect").data(A).enter().append("rect").attr("x",0).attr("y",(function(R,P){return R.order*S+N-2})).attr("width",(function(){return I-i.rightPadding/2})).attr("height",S).attr("class",(function(R){for(const[P,$]of p.entries())if(R.type===$)return"section section"+P%i.numberSectionStyles;return"section section0"}));const M=m.append("g").selectAll("rect").data(_).enter(),D=n.db.getLinks();if(M.append("rect").attr("id",(function(R){return R.id})).attr("rx",3).attr("ry",3).attr("x",(function(R){return R.milestone?y(R.startTime)+O+.5*(y(R.endTime)-y(R.startTime))-.5*B:y(R.startTime)+O})).attr("y",(function(R,P){return R.order*S+N})).attr("width",(function(R){return R.milestone?B:y(R.renderEndTime||R.endTime)-y(R.startTime)})).attr("height",B).attr("transform-origin",(function(R,P){return P=R.order,(y(R.startTime)+O+.5*(y(R.endTime)-y(R.startTime))).toString()+"px "+(P*S+N+.5*B).toString()+"px"})).attr("class",(function(R){let P="";R.classes.length>0&&(P=R.classes.join(" "));let $=0;for(const[q,W]of p.entries())R.type===W&&($=q%i.numberSectionStyles);let z="";return R.active?R.crit?z+=" activeCrit":z=" active":R.done?z=R.crit?" doneCrit":" done":R.crit&&(z+=" crit"),z.length===0&&(z=" task"),R.milestone&&(z=" milestone "+z),z+=$,z+=" "+P,"task"+z})),M.append("text").attr("id",(function(R){return R.id+"-text"})).text((function(R){return R.task})).attr("font-size",i.fontSize).attr("x",(function(R){let P=y(R.startTime),$=y(R.renderEndTime||R.endTime);R.milestone&&(P+=.5*(y(R.endTime)-y(R.startTime))-.5*B),R.milestone&&($=P+B);const z=this.getBBox().width;return z>$-P?$+z+1.5*i.leftPadding>I?P+O-5:$+O+5:($-P)/2+P+O})).attr("y",(function(R,P){return R.order*S+i.barHeight/2+(i.fontSize/2-2)+N})).attr("text-height",B).attr("class",(function(R){const P=y(R.startTime);let $=y(R.endTime);R.milestone&&($=P+B);const z=this.getBBox().width;let q="";R.classes.length>0&&(q=R.classes.join(" "));let W=0;for(const[te,oe]of p.entries())R.type===oe&&(W=te%i.numberSectionStyles);let Q="";return R.active&&(Q=R.crit?"activeCritText"+W:"activeText"+W),R.done?Q=R.crit?Q+" doneCritText"+W:Q+" doneText"+W:R.crit&&(Q=Q+" critText"+W),R.milestone&&(Q+=" milestoneText"),z>$-P?$+z+1.5*i.leftPadding>I?q+" taskTextOutsideLeft taskTextOutside"+W+" "+Q:q+" taskTextOutsideRight taskTextOutside"+W+" "+Q+" width-"+z:q+" taskText taskText"+W+" "+Q+" width-"+z})),ke().securityLevel==="sandbox"){let R;R=Ze("#i"+e);const P=R.nodes()[0].contentDocument;M.filter((function($){return D.has($.id)})).each((function($){var z=P.querySelector("#"+$.id),q=P.querySelector("#"+$.id+"-text");const W=z.parentNode;var Q=P.createElement("a");Q.setAttribute("xlink:href",D.get($.id)),Q.setAttribute("target","_top"),W.appendChild(Q),Q.appendChild(z),Q.appendChild(q)}))}}function w(_,S,N,O,B,L,I,A){if(I.length===0&&A.length===0)return;let M,D;for(const{startTime:q,endTime:W}of L)(M===void 0||q<M)&&(M=q),(D===void 0||W>D)&&(D=W);if(!M||!D)return;if((0,_T.default)(D).diff((0,_T.default)(M),"year")>5)return void ee.warn("The difference between the min and max time is more than 5 years. This will cause performance issues. Skipping drawing exclude days.");const R=n.db.getDateFormat(),P=[];let $=null,z=(0,_T.default)(M);for(;z.valueOf()<=D;)n.db.isInvalidDate(z,R,I,A)?$?$.end=z:$={start:z,end:z}:$&&(P.push($),$=null),z=z.add(1,"d");m.append("g").selectAll("rect").data(P).enter().append("rect").attr("id",(function(q){return"exclude-"+q.start.format("YYYY-MM-DD")})).attr("x",(function(q){return y(q.start)+N})).attr("y",i.gridLineStartPadding).attr("width",(function(q){const W=q.end.add(1,"day");return y(W)-y(q.start)})).attr("height",B-S-i.gridLineStartPadding).attr("transform-origin",(function(q,W){return(y(q.start)+N+.5*(y(q.end)-y(q.start))).toString()+"px "+(W*_+.5*B).toString()+"px"})).attr("class","exclude-range")}function T(_,S,N,O){let B=b$(y).tickSize(-O+S+i.gridLineStartPadding).tickFormat(R4(n.db.getAxisFormat()||i.axisFormat||"%Y-%m-%d"));const L=/^([1-9]\d*)(millisecond|second|minute|hour|day|week|month)$/.exec(n.db.getTickInterval()||i.tickInterval);if(L!==null){const I=L[1],A=L[2],M=n.db.getWeekday()||i.weekday;switch(A){case"millisecond":B.ticks(Hd.every(I));break;case"second":B.ticks(Rl.every(I));break;case"minute":B.ticks(p2.every(I));break;case"hour":B.ticks(f2.every(I));break;case"day":B.ticks(zu.every(I));break;case"week":B.ticks(OO[M].every(I));break;case"month":B.ticks(m2.every(I))}}if(m.append("g").attr("class","grid").attr("transform","translate("+_+", "+(O-50)+")").call(B).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),n.db.topAxisEnabled()||i.topAxis){let I=x$(y).tickSize(-O+S+i.gridLineStartPadding).tickFormat(R4(n.db.getAxisFormat()||i.axisFormat||"%Y-%m-%d"));if(L!==null){const A=L[1],M=L[2],D=n.db.getWeekday()||i.weekday;switch(M){case"millisecond":I.ticks(Hd.every(A));break;case"second":I.ticks(Rl.every(A));break;case"minute":I.ticks(p2.every(A));break;case"hour":I.ticks(f2.every(A));break;case"day":I.ticks(zu.every(A));break;case"week":I.ticks(OO[D].every(A));break;case"month":I.ticks(m2.every(A))}}m.append("g").attr("class","grid").attr("transform","translate("+_+", "+S+")").call(I).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}function k(_,S){let N=0;const O=Object.keys(f).map((B=>[B,f[B]]));m.append("g").selectAll("text").data(O).enter().append((function(B){const L=B[0].split(He.lineBreakRegex),I=-(L.length-1)/2,A=u.createElementNS("http://www.w3.org/2000/svg","text");A.setAttribute("dy",I+"em");for(const[M,D]of L.entries()){const R=u.createElementNS("http://www.w3.org/2000/svg","tspan");R.setAttribute("alignment-baseline","central"),R.setAttribute("x","10"),M>0&&R.setAttribute("dy","1em"),R.textContent=D,A.appendChild(R)}return A})).attr("x",10).attr("y",(function(B,L){if(!(L>0))return B[1]*_/2+S;for(let I=0;I<L;I++)return N+=O[L-1][1],B[1]*_/2+N*_+S})).attr("font-size",i.sectionFontSize).attr("class",(function(B){for(const[L,I]of p.entries())if(B[0]===I)return"sectionTitle sectionTitle"+L%i.numberSectionStyles;return"sectionTitle"}))}function C(_,S,N,O){const B=n.db.getTodayMarker();if(B==="off")return;const L=m.append("g").attr("class","today"),I=new Date,A=L.append("line");A.attr("x1",y(I)+_).attr("x2",y(I)+_).attr("y1",i.titleTopMargin).attr("y2",O-i.titleTopMargin).attr("class","today"),B!==""&&A.attr("style",B.replace(/,/g,";"))}function E(_){const S={},N=[];for(let O=0,B=_.length;O<B;++O)Object.prototype.hasOwnProperty.call(S,_[O])||(S[_[O]]=!0,N.push(_[O]));return N}l(v,"taskCompare"),d.sort(v),x(d,fl,g),da(m,g,fl,i.useMaxWidth),m.append("text").text(n.db.getDiagramTitle()).attr("x",fl/2).attr("y",i.titleTopMargin).attr("class","titleText"),l(x,"makeGantt"),l(b,"drawRects"),l(w,"drawExcludeDays"),l(T,"makeGrid"),l(k,"vertLabels"),l(C,"drawToday"),l(E,"checkUnique")}),"draw"),U5e={parser:Q4e,db:$5e,renderer:{setConf:F5e,draw:G5e},styles:l((t=>`
  .mermaid-main-font {
        font-family: ${t.fontFamily};
  }

  .exclude-range {
    fill: ${t.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${t.sectionBkgColor};
  }

  .section2 {
    fill: ${t.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${t.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${t.titleColor};
  }

  .sectionTitle1 {
    fill: ${t.titleColor};
  }

  .sectionTitle2 {
    fill: ${t.titleColor};
  }

  .sectionTitle3 {
    fill: ${t.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    font-family: ${t.fontFamily};
  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${t.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
  }

  .grid .tick text {
    font-family: ${t.fontFamily};
    fill: ${t.textColor};
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${t.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: ${t.fontFamily};
  }

  .taskTextOutsideRight {
    fill: ${t.taskTextDarkColor};
    text-anchor: start;
    font-family: ${t.fontFamily};
  }

  .taskTextOutsideLeft {
    fill: ${t.taskTextDarkColor};
    text-anchor: end;
  }


  /* Special case clickable */

  .task.clickable {
    cursor: pointer;
  }

  .taskText.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }


  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${t.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${t.taskBkgColor};
    stroke: ${t.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${t.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${t.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${t.activeTaskBkgColor};
    stroke: ${t.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${t.doneTaskBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.titleColor||t.textColor};
    font-family: ${t.fontFamily};
  }
`),"getStyles")},q5e=Object.freeze({__proto__:null,diagram:U5e}),j5e={parse:l((async t=>{const e=await sc("info",t);ee.debug(e)}),"parse")},W5e={version:qT},Y5e={getVersion:l((()=>W5e.version),"getVersion")},V5e=l(((t,e,r)=>{ee.debug(`rendering info diagram
`+t);const n=tl(e);da(n,100,400,!0),n.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size",32).style("text-anchor","middle").text(`v${r}`)}),"draw"),H5e={parser:j5e,db:Y5e,renderer:{draw:V5e}},X5e=Object.freeze({__proto__:null,diagram:H5e}),K5e=or.pie,hN={sections:new Map,showData:!1},J5=hN.sections,XC=hN.showData,Z5e=structuredClone(K5e),Q5e=l((()=>structuredClone(Z5e)),"getConfig"),J5e=l((()=>{J5=new Map,XC=hN.showData,jn()}),"clear"),e6e=l((({label:t,value:e})=>{J5.has(t)||(J5.set(t,e),ee.debug(`added new section: ${t}, with value: ${e}`))}),"addSection"),Rne={getConfig:Q5e,clear:J5e,setDiagramTitle:di,getDiagramTitle:Wn,setAccTitle:zn,getAccTitle:Xn,setAccDescription:Kn,getAccDescription:Zn,addSection:e6e,getSections:l((()=>J5),"getSections"),setShowData:l((t=>{XC=t}),"setShowData"),getShowData:l((()=>XC),"getShowData")},t6e=l(((t,e)=>{pm(t,e),e.setShowData(t.showData),t.sections.map(e.addSection)}),"populateDb"),r6e={parse:l((async t=>{const e=await sc("pie",t);ee.debug(e),t6e(e,Rne)}),"parse")},n6e=l((t=>`
  .pieCircle{
    stroke: ${t.pieStrokeColor};
    stroke-width : ${t.pieStrokeWidth};
    opacity : ${t.pieOpacity};
  }
  .pieOuterCircle{
    stroke: ${t.pieOuterStrokeColor};
    stroke-width: ${t.pieOuterStrokeWidth};
    fill: none;
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${t.pieTitleTextSize};
    fill: ${t.pieTitleTextColor};
    font-family: ${t.fontFamily};
  }
  .slice {
    font-family: ${t.fontFamily};
    fill: ${t.pieSectionTextColor};
    font-size:${t.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${t.pieLegendTextColor};
    font-family: ${t.fontFamily};
    font-size: ${t.pieLegendTextSize};
  }
`),"getStyles"),i6e=l((t=>{const e=[...t.entries()].map((r=>({label:r[0],value:r[1]}))).sort(((r,n)=>n.value-r.value));return nU().value((r=>r.value))(e)}),"createPieArcs"),a6e=l(((t,e,r,n)=>{ee.debug(`rendering pie chart
`+t);const i=n.db,a=ke(),s=ts(i.getConfig(),a.pie),o=18,u=450,h=tl(e),d=h.append("g");d.attr("transform","translate(225,225)");const{themeVariables:p}=a;let[f]=fc(p.pieOuterStrokeWidth);f??=2;const g=s.textPosition,m=Math.min(450,u)/2-40,y=Uu().innerRadius(0).outerRadius(m),v=Uu().innerRadius(m*g).outerRadius(m*g);d.append("circle").attr("cx",0).attr("cy",0).attr("r",m+f/2).attr("class","pieOuterCircle");const x=i.getSections(),b=i6e(x),w=gv([p.pie1,p.pie2,p.pie3,p.pie4,p.pie5,p.pie6,p.pie7,p.pie8,p.pie9,p.pie10,p.pie11,p.pie12]);d.selectAll("mySlices").data(b).enter().append("path").attr("d",y).attr("fill",(_=>w(_.data.label))).attr("class","pieCircle");let T=0;x.forEach((_=>{T+=_})),d.selectAll("mySlices").data(b).enter().append("text").text((_=>(_.data.value/T*100).toFixed(0)+"%")).attr("transform",(_=>"translate("+v.centroid(_)+")")).style("text-anchor","middle").attr("class","slice"),d.append("text").text(i.getDiagramTitle()).attr("x",0).attr("y",-200).attr("class","pieTitleText");const k=d.selectAll(".legend").data(w.domain()).enter().append("g").attr("class","legend").attr("transform",((_,S)=>"translate(216,"+(22*S-22*w.domain().length/2)+")"));k.append("rect").attr("width",o).attr("height",o).style("fill",w).style("stroke",w),k.data(b).append("text").attr("x",22).attr("y",14).text((_=>{const{label:S,value:N}=_.data;return i.getShowData()?`${S} [${N}]`:S}));const C=Math.max(...k.selectAll("text").nodes().map((_=>_?.getBoundingClientRect().width??0))),E=512+C;h.attr("viewBox",`0 0 ${E} 450`),da(h,u,E,s.useMaxWidth)}),"draw"),s6e={parser:r6e,db:Rne,renderer:{draw:a6e},styles:n6e},o6e=Object.freeze({__proto__:null,diagram:s6e}),KC=(function(){var t=l((function(V,me,he,_e){for(he=he||{},_e=V.length;_e--;he[V[_e]]=me);return he}),"o"),e=[1,3],r=[1,4],n=[1,5],i=[1,6],a=[1,7],s=[1,4,5,10,12,13,14,18,25,35,37,39,41,42,48,50,51,52,53,54,55,56,57,60,61,63,64,65,66,67],o=[1,4,5,10,12,13,14,18,25,28,35,37,39,41,42,48,50,51,52,53,54,55,56,57,60,61,63,64,65,66,67],u=[55,56,57],h=[2,36],d=[1,37],p=[1,36],f=[1,38],g=[1,35],m=[1,43],y=[1,41],v=[1,14],x=[1,23],b=[1,18],w=[1,19],T=[1,20],k=[1,21],C=[1,22],E=[1,24],_=[1,25],S=[1,26],N=[1,27],O=[1,28],B=[1,29],L=[1,32],I=[1,33],A=[1,34],M=[1,39],D=[1,40],R=[1,42],P=[1,44],$=[1,62],z=[1,61],q=[4,5,8,10,12,13,14,18,44,47,49,55,56,57,63,64,65,66,67],W=[1,65],Q=[1,66],te=[1,67],oe=[1,68],re=[1,69],H=[1,70],K=[1,71],ie=[1,72],ne=[1,73],J=[1,74],ue=[1,75],Y=[1,76],se=[4,5,6,7,8,9,10,11,12,13,14,15,18],de=[1,90],ce=[1,91],Ee=[1,92],ve=[1,99],De=[1,93],Ue=[1,96],ze=[1,94],Ge=[1,95],$e=[1,97],Pe=[1,98],j=[1,102],pe=[10,55,56,57],X=[4,5,6,8,10,11,13,17,18,19,20,55,56,57],ge={trace:l((function(){}),"trace"),yy:{},symbols_:{error:2,idStringToken:3,ALPHA:4,NUM:5,NODE_STRING:6,DOWN:7,MINUS:8,DEFAULT:9,COMMA:10,COLON:11,AMP:12,BRKT:13,MULT:14,UNICODE_TEXT:15,styleComponent:16,UNIT:17,SPACE:18,STYLE:19,PCT:20,idString:21,style:22,stylesOpt:23,classDefStatement:24,CLASSDEF:25,start:26,eol:27,QUADRANT:28,document:29,line:30,statement:31,axisDetails:32,quadrantDetails:33,points:34,title:35,title_value:36,acc_title:37,acc_title_value:38,acc_descr:39,acc_descr_value:40,acc_descr_multiline_value:41,section:42,text:43,point_start:44,point_x:45,point_y:46,class_name:47,"X-AXIS":48,"AXIS-TEXT-DELIMITER":49,"Y-AXIS":50,QUADRANT_1:51,QUADRANT_2:52,QUADRANT_3:53,QUADRANT_4:54,NEWLINE:55,SEMI:56,EOF:57,alphaNumToken:58,textNoTagsToken:59,STR:60,MD_STR:61,alphaNum:62,PUNCTUATION:63,PLUS:64,EQUALS:65,DOT:66,UNDERSCORE:67,$accept:0,$end:1},terminals_:{2:"error",4:"ALPHA",5:"NUM",6:"NODE_STRING",7:"DOWN",8:"MINUS",9:"DEFAULT",10:"COMMA",11:"COLON",12:"AMP",13:"BRKT",14:"MULT",15:"UNICODE_TEXT",17:"UNIT",18:"SPACE",19:"STYLE",20:"PCT",25:"CLASSDEF",28:"QUADRANT",35:"title",36:"title_value",37:"acc_title",38:"acc_title_value",39:"acc_descr",40:"acc_descr_value",41:"acc_descr_multiline_value",42:"section",44:"point_start",45:"point_x",46:"point_y",47:"class_name",48:"X-AXIS",49:"AXIS-TEXT-DELIMITER",50:"Y-AXIS",51:"QUADRANT_1",52:"QUADRANT_2",53:"QUADRANT_3",54:"QUADRANT_4",55:"NEWLINE",56:"SEMI",57:"EOF",60:"STR",61:"MD_STR",63:"PUNCTUATION",64:"PLUS",65:"EQUALS",66:"DOT",67:"UNDERSCORE"},productions_:[0,[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[21,1],[21,2],[22,1],[22,2],[23,1],[23,3],[24,5],[26,2],[26,2],[26,2],[29,0],[29,2],[30,2],[31,0],[31,1],[31,2],[31,1],[31,1],[31,1],[31,2],[31,2],[31,2],[31,1],[31,1],[34,4],[34,5],[34,5],[34,6],[32,4],[32,3],[32,2],[32,4],[32,3],[32,2],[33,2],[33,2],[33,2],[33,2],[27,1],[27,1],[27,1],[43,1],[43,2],[43,1],[43,1],[62,1],[62,2],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[59,1],[59,1],[59,1]],performAction:l((function(V,me,he,_e,Ce,Te,Re){var Le=Te.length-1;switch(Ce){case 23:case 68:this.$=Te[Le];break;case 24:case 69:this.$=Te[Le-1]+""+Te[Le];break;case 26:this.$=Te[Le-1]+Te[Le];break;case 27:this.$=[Te[Le].trim()];break;case 28:Te[Le-2].push(Te[Le].trim()),this.$=Te[Le-2];break;case 29:this.$=Te[Le-4],_e.addClass(Te[Le-2],Te[Le]);break;case 37:this.$=[];break;case 42:this.$=Te[Le].trim(),_e.setDiagramTitle(this.$);break;case 43:this.$=Te[Le].trim(),_e.setAccTitle(this.$);break;case 44:case 45:this.$=Te[Le].trim(),_e.setAccDescription(this.$);break;case 46:_e.addSection(Te[Le].substr(8)),this.$=Te[Le].substr(8);break;case 47:_e.addPoint(Te[Le-3],"",Te[Le-1],Te[Le],[]);break;case 48:_e.addPoint(Te[Le-4],Te[Le-3],Te[Le-1],Te[Le],[]);break;case 49:_e.addPoint(Te[Le-4],"",Te[Le-2],Te[Le-1],Te[Le]);break;case 50:_e.addPoint(Te[Le-5],Te[Le-4],Te[Le-2],Te[Le-1],Te[Le]);break;case 51:_e.setXAxisLeftText(Te[Le-2]),_e.setXAxisRightText(Te[Le]);break;case 52:Te[Le-1].text+="  ",_e.setXAxisLeftText(Te[Le-1]);break;case 53:_e.setXAxisLeftText(Te[Le]);break;case 54:_e.setYAxisBottomText(Te[Le-2]),_e.setYAxisTopText(Te[Le]);break;case 55:Te[Le-1].text+="  ",_e.setYAxisBottomText(Te[Le-1]);break;case 56:_e.setYAxisBottomText(Te[Le]);break;case 57:_e.setQuadrant1Text(Te[Le]);break;case 58:_e.setQuadrant2Text(Te[Le]);break;case 59:_e.setQuadrant3Text(Te[Le]);break;case 60:_e.setQuadrant4Text(Te[Le]);break;case 64:case 66:this.$={text:Te[Le],type:"text"};break;case 65:this.$={text:Te[Le-1].text+""+Te[Le],type:Te[Le-1].type};break;case 67:this.$={text:Te[Le],type:"markdown"}}}),"anonymous"),table:[{18:e,26:1,27:2,28:r,55:n,56:i,57:a},{1:[3]},{18:e,26:8,27:2,28:r,55:n,56:i,57:a},{18:e,26:9,27:2,28:r,55:n,56:i,57:a},t(s,[2,33],{29:10}),t(o,[2,61]),t(o,[2,62]),t(o,[2,63]),{1:[2,30]},{1:[2,31]},t(u,h,{30:11,31:12,24:13,32:15,33:16,34:17,43:30,58:31,1:[2,32],4:d,5:p,10:f,12:g,13:m,14:y,18:v,25:x,35:b,37:w,39:T,41:k,42:C,48:E,50:_,51:S,52:N,53:O,54:B,60:L,61:I,63:A,64:M,65:D,66:R,67:P}),t(s,[2,34]),{27:45,55:n,56:i,57:a},t(u,[2,37]),t(u,h,{24:13,32:15,33:16,34:17,43:30,58:31,31:46,4:d,5:p,10:f,12:g,13:m,14:y,18:v,25:x,35:b,37:w,39:T,41:k,42:C,48:E,50:_,51:S,52:N,53:O,54:B,60:L,61:I,63:A,64:M,65:D,66:R,67:P}),t(u,[2,39]),t(u,[2,40]),t(u,[2,41]),{36:[1,47]},{38:[1,48]},{40:[1,49]},t(u,[2,45]),t(u,[2,46]),{18:[1,50]},{4:d,5:p,10:f,12:g,13:m,14:y,43:51,58:31,60:L,61:I,63:A,64:M,65:D,66:R,67:P},{4:d,5:p,10:f,12:g,13:m,14:y,43:52,58:31,60:L,61:I,63:A,64:M,65:D,66:R,67:P},{4:d,5:p,10:f,12:g,13:m,14:y,43:53,58:31,60:L,61:I,63:A,64:M,65:D,66:R,67:P},{4:d,5:p,10:f,12:g,13:m,14:y,43:54,58:31,60:L,61:I,63:A,64:M,65:D,66:R,67:P},{4:d,5:p,10:f,12:g,13:m,14:y,43:55,58:31,60:L,61:I,63:A,64:M,65:D,66:R,67:P},{4:d,5:p,10:f,12:g,13:m,14:y,43:56,58:31,60:L,61:I,63:A,64:M,65:D,66:R,67:P},{4:d,5:p,8:$,10:f,12:g,13:m,14:y,18:z,44:[1,57],47:[1,58],58:60,59:59,63:A,64:M,65:D,66:R,67:P},t(q,[2,64]),t(q,[2,66]),t(q,[2,67]),t(q,[2,70]),t(q,[2,71]),t(q,[2,72]),t(q,[2,73]),t(q,[2,74]),t(q,[2,75]),t(q,[2,76]),t(q,[2,77]),t(q,[2,78]),t(q,[2,79]),t(q,[2,80]),t(s,[2,35]),t(u,[2,38]),t(u,[2,42]),t(u,[2,43]),t(u,[2,44]),{3:64,4:W,5:Q,6:te,7:oe,8:re,9:H,10:K,11:ie,12:ne,13:J,14:ue,15:Y,21:63},t(u,[2,53],{59:59,58:60,4:d,5:p,8:$,10:f,12:g,13:m,14:y,18:z,49:[1,77],63:A,64:M,65:D,66:R,67:P}),t(u,[2,56],{59:59,58:60,4:d,5:p,8:$,10:f,12:g,13:m,14:y,18:z,49:[1,78],63:A,64:M,65:D,66:R,67:P}),t(u,[2,57],{59:59,58:60,4:d,5:p,8:$,10:f,12:g,13:m,14:y,18:z,63:A,64:M,65:D,66:R,67:P}),t(u,[2,58],{59:59,58:60,4:d,5:p,8:$,10:f,12:g,13:m,14:y,18:z,63:A,64:M,65:D,66:R,67:P}),t(u,[2,59],{59:59,58:60,4:d,5:p,8:$,10:f,12:g,13:m,14:y,18:z,63:A,64:M,65:D,66:R,67:P}),t(u,[2,60],{59:59,58:60,4:d,5:p,8:$,10:f,12:g,13:m,14:y,18:z,63:A,64:M,65:D,66:R,67:P}),{45:[1,79]},{44:[1,80]},t(q,[2,65]),t(q,[2,81]),t(q,[2,82]),t(q,[2,83]),{3:82,4:W,5:Q,6:te,7:oe,8:re,9:H,10:K,11:ie,12:ne,13:J,14:ue,15:Y,18:[1,81]},t(se,[2,23]),t(se,[2,1]),t(se,[2,2]),t(se,[2,3]),t(se,[2,4]),t(se,[2,5]),t(se,[2,6]),t(se,[2,7]),t(se,[2,8]),t(se,[2,9]),t(se,[2,10]),t(se,[2,11]),t(se,[2,12]),t(u,[2,52],{58:31,43:83,4:d,5:p,10:f,12:g,13:m,14:y,60:L,61:I,63:A,64:M,65:D,66:R,67:P}),t(u,[2,55],{58:31,43:84,4:d,5:p,10:f,12:g,13:m,14:y,60:L,61:I,63:A,64:M,65:D,66:R,67:P}),{46:[1,85]},{45:[1,86]},{4:de,5:ce,6:Ee,8:ve,11:De,13:Ue,16:89,17:ze,18:Ge,19:$e,20:Pe,22:88,23:87},t(se,[2,24]),t(u,[2,51],{59:59,58:60,4:d,5:p,8:$,10:f,12:g,13:m,14:y,18:z,63:A,64:M,65:D,66:R,67:P}),t(u,[2,54],{59:59,58:60,4:d,5:p,8:$,10:f,12:g,13:m,14:y,18:z,63:A,64:M,65:D,66:R,67:P}),t(u,[2,47],{22:88,16:89,23:100,4:de,5:ce,6:Ee,8:ve,11:De,13:Ue,17:ze,18:Ge,19:$e,20:Pe}),{46:[1,101]},t(u,[2,29],{10:j}),t(pe,[2,27],{16:103,4:de,5:ce,6:Ee,8:ve,11:De,13:Ue,17:ze,18:Ge,19:$e,20:Pe}),t(X,[2,25]),t(X,[2,13]),t(X,[2,14]),t(X,[2,15]),t(X,[2,16]),t(X,[2,17]),t(X,[2,18]),t(X,[2,19]),t(X,[2,20]),t(X,[2,21]),t(X,[2,22]),t(u,[2,49],{10:j}),t(u,[2,48],{22:88,16:89,23:104,4:de,5:ce,6:Ee,8:ve,11:De,13:Ue,17:ze,18:Ge,19:$e,20:Pe}),{4:de,5:ce,6:Ee,8:ve,11:De,13:Ue,16:89,17:ze,18:Ge,19:$e,20:Pe,22:105},t(X,[2,26]),t(u,[2,50],{10:j}),t(pe,[2,28],{16:103,4:de,5:ce,6:Ee,8:ve,11:De,13:Ue,17:ze,18:Ge,19:$e,20:Pe})],defaultActions:{8:[2,30],9:[2,31]},parseError:l((function(V,me){if(!me.recoverable){var he=new Error(V);throw he.hash=me,he}this.trace(V)}),"parseError"),parse:l((function(V){var me=this,he=[0],_e=[],Ce=[null],Te=[],Re=this.table,Le="",ot=0,Tt=0,Fe=2,gt=1,Qe=Te.slice.call(arguments,1),Be=Object.create(this.lexer),rt={yy:{}};for(var lt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,lt)&&(rt.yy[lt]=this.yy[lt]);Be.setInput(V,rt.yy),rt.yy.lexer=Be,rt.yy.parser=this,Be.yylloc===void 0&&(Be.yylloc={});var Je=Be.yylloc;Te.push(Je);var _t=Be.options&&Be.options.ranges;function it(Ht){he.length=he.length-2*Ht,Ce.length=Ce.length-Ht,Te.length=Te.length-Ht}function pt(){var Ht;return typeof(Ht=_e.pop()||Be.lex()||gt)!="number"&&(Ht instanceof Array&&(Ht=(_e=Ht).pop()),Ht=me.symbols_[Ht]||Ht),Ht}typeof rt.yy.parseError=="function"?this.parseError=rt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,l(it,"popStack"),l(pt,"lex");for(var Ye,je,mt,at,Et,xt,rn,wt,dn={};;){if(je=he[he.length-1],this.defaultActions[je]?mt=this.defaultActions[je]:(Ye==null&&(Ye=pt()),mt=Re[je]&&Re[je][Ye]),mt===void 0||!mt.length||!mt[0]){var gr="";for(Et in wt=[],Re[je])this.terminals_[Et]&&Et>Fe&&wt.push("'"+this.terminals_[Et]+"'");gr=Be.showPosition?"Parse error on line "+(ot+1)+`:
`+Be.showPosition()+`
Expecting `+wt.join(", ")+", got '"+(this.terminals_[Ye]||Ye)+"'":"Parse error on line "+(ot+1)+": Unexpected "+(Ye==gt?"end of input":"'"+(this.terminals_[Ye]||Ye)+"'"),this.parseError(gr,{text:Be.match,token:this.terminals_[Ye]||Ye,line:Be.yylineno,loc:Je,expected:wt})}if(mt[0]instanceof Array&&mt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+je+", token: "+Ye);switch(mt[0]){case 1:he.push(Ye),Ce.push(Be.yytext),Te.push(Be.yylloc),he.push(mt[1]),Ye=null,Tt=Be.yyleng,Le=Be.yytext,ot=Be.yylineno,Je=Be.yylloc;break;case 2:if(xt=this.productions_[mt[1]][1],dn.$=Ce[Ce.length-xt],dn._$={first_line:Te[Te.length-(xt||1)].first_line,last_line:Te[Te.length-1].last_line,first_column:Te[Te.length-(xt||1)].first_column,last_column:Te[Te.length-1].last_column},_t&&(dn._$.range=[Te[Te.length-(xt||1)].range[0],Te[Te.length-1].range[1]]),(at=this.performAction.apply(dn,[Le,Tt,ot,rt.yy,mt[1],Ce,Te].concat(Qe)))!==void 0)return at;xt&&(he=he.slice(0,-1*xt*2),Ce=Ce.slice(0,-1*xt),Te=Te.slice(0,-1*xt)),he.push(this.productions_[mt[1]][0]),Ce.push(dn.$),Te.push(dn._$),rn=Re[he[he.length-2]][he[he.length-1]],he.push(rn);break;case 3:return!0}}return!0}),"parse")},G=(function(){var V={EOF:1,parseError:l((function(me,he){if(!this.yy.parser)throw new Error(me);this.yy.parser.parseError(me,he)}),"parseError"),setInput:l((function(me,he){return this.yy=he||this.yy||{},this._input=me,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:l((function(){var me=this._input[0];return this.yytext+=me,this.yyleng++,this.offset++,this.match+=me,this.matched+=me,me.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),me}),"input"),unput:l((function(me){var he=me.length,_e=me.split(/(?:\r\n?|\n)/g);this._input=me+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-he),this.offset-=he;var Ce=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),_e.length-1&&(this.yylineno-=_e.length-1);var Te=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:_e?(_e.length===Ce.length?this.yylloc.first_column:0)+Ce[Ce.length-_e.length].length-_e[0].length:this.yylloc.first_column-he},this.options.ranges&&(this.yylloc.range=[Te[0],Te[0]+this.yyleng-he]),this.yyleng=this.yytext.length,this}),"unput"),more:l((function(){return this._more=!0,this}),"more"),reject:l((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:l((function(me){this.unput(this.match.slice(me))}),"less"),pastInput:l((function(){var me=this.matched.substr(0,this.matched.length-this.match.length);return(me.length>20?"...":"")+me.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:l((function(){var me=this.match;return me.length<20&&(me+=this._input.substr(0,20-me.length)),(me.substr(0,20)+(me.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:l((function(){var me=this.pastInput(),he=new Array(me.length+1).join("-");return me+this.upcomingInput()+`
`+he+"^"}),"showPosition"),test_match:l((function(me,he){var _e,Ce,Te;if(this.options.backtrack_lexer&&(Te={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Te.yylloc.range=this.yylloc.range.slice(0))),(Ce=me[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=Ce.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Ce?Ce[Ce.length-1].length-Ce[Ce.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+me[0].length},this.yytext+=me[0],this.match+=me[0],this.matches=me,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(me[0].length),this.matched+=me[0],_e=this.performAction.call(this,this.yy,this,he,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),_e)return _e;if(this._backtrack){for(var Re in Te)this[Re]=Te[Re];return!1}return!1}),"test_match"),next:l((function(){if(this.done)return this.EOF;var me,he,_e,Ce;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Te=this._currentRules(),Re=0;Re<Te.length;Re++)if((_e=this._input.match(this.rules[Te[Re]]))&&(!he||_e[0].length>he[0].length)){if(he=_e,Ce=Re,this.options.backtrack_lexer){if((me=this.test_match(_e,Te[Re]))!==!1)return me;if(this._backtrack){he=!1;continue}return!1}if(!this.options.flex)break}return he?(me=this.test_match(he,Te[Ce]))!==!1&&me:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:l((function(){var me=this.next();return me||this.lex()}),"lex"),begin:l((function(me){this.conditionStack.push(me)}),"begin"),popState:l((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:l((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:l((function(me){return(me=this.conditionStack.length-1-Math.abs(me||0))>=0?this.conditionStack[me]:"INITIAL"}),"topState"),pushState:l((function(me){this.begin(me)}),"pushState"),stateStackSize:l((function(){return this.conditionStack.length}),"stateStackSize"),options:{"case-insensitive":!0},performAction:l((function(me,he,_e,Ce){switch(_e){case 0:case 1:case 3:break;case 2:return 55;case 4:return this.begin("title"),35;case 5:return this.popState(),"title_value";case 6:return this.begin("acc_title"),37;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),39;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:case 23:case 25:case 31:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 48;case 14:return 50;case 15:return 49;case 16:return 51;case 17:return 52;case 18:return 53;case 19:return 54;case 20:return 25;case 21:this.begin("md_string");break;case 22:return"MD_STR";case 24:this.begin("string");break;case 26:return"STR";case 27:this.begin("class_name");break;case 28:return this.popState(),47;case 29:return this.begin("point_start"),44;case 30:return this.begin("point_x"),45;case 32:this.popState(),this.begin("point_y");break;case 33:return this.popState(),46;case 34:return 28;case 35:return 4;case 36:return 11;case 37:return 64;case 38:return 10;case 39:case 40:return 65;case 41:return 14;case 42:return 13;case 43:return 67;case 44:return 66;case 45:return 12;case 46:return 8;case 47:return 5;case 48:return 18;case 49:return 56;case 50:return 63;case 51:return 57}}),"anonymous"),rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?: *x-axis *)/i,/^(?: *y-axis *)/i,/^(?: *--+> *)/i,/^(?: *quadrant-1 *)/i,/^(?: *quadrant-2 *)/i,/^(?: *quadrant-3 *)/i,/^(?: *quadrant-4 *)/i,/^(?:classDef\b)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?::::)/i,/^(?:^\w+)/i,/^(?:\s*:\s*\[\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?:\s*\] *)/i,/^(?:\s*,\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?: *quadrantChart *)/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s)/i,/^(?:;)/i,/^(?:[!"#$%&'*+,-.`?\\_/])/i,/^(?:$)/i],conditions:{class_name:{rules:[28],inclusive:!1},point_y:{rules:[33],inclusive:!1},point_x:{rules:[32],inclusive:!1},point_start:{rules:[30,31],inclusive:!1},acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},title:{rules:[5],inclusive:!1},md_string:{rules:[22,23],inclusive:!1},string:{rules:[25,26],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,6,8,10,13,14,15,16,17,18,19,20,21,24,27,29,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],inclusive:!0}}};return V})();function le(){this.yy={}}return ge.lexer=G,l(le,"Parser"),le.prototype=ge,ge.Parser=le,new le})();KC.parser=KC;var l6e=KC,Li=T6(),f0,c6e=(f0=class{constructor(){this.classes=new Map,this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData()}getDefaultData(){return{titleText:"",quadrant1Text:"",quadrant2Text:"",quadrant3Text:"",quadrant4Text:"",xAxisLeftText:"",xAxisRightText:"",yAxisBottomText:"",yAxisTopText:"",points:[]}}getDefaultConfig(){return{showXAxis:!0,showYAxis:!0,showTitle:!0,chartHeight:or.quadrantChart?.chartWidth||500,chartWidth:or.quadrantChart?.chartHeight||500,titlePadding:or.quadrantChart?.titlePadding||10,titleFontSize:or.quadrantChart?.titleFontSize||20,quadrantPadding:or.quadrantChart?.quadrantPadding||5,xAxisLabelPadding:or.quadrantChart?.xAxisLabelPadding||5,yAxisLabelPadding:or.quadrantChart?.yAxisLabelPadding||5,xAxisLabelFontSize:or.quadrantChart?.xAxisLabelFontSize||16,yAxisLabelFontSize:or.quadrantChart?.yAxisLabelFontSize||16,quadrantLabelFontSize:or.quadrantChart?.quadrantLabelFontSize||16,quadrantTextTopPadding:or.quadrantChart?.quadrantTextTopPadding||5,pointTextPadding:or.quadrantChart?.pointTextPadding||5,pointLabelFontSize:or.quadrantChart?.pointLabelFontSize||12,pointRadius:or.quadrantChart?.pointRadius||5,xAxisPosition:or.quadrantChart?.xAxisPosition||"top",yAxisPosition:or.quadrantChart?.yAxisPosition||"left",quadrantInternalBorderStrokeWidth:or.quadrantChart?.quadrantInternalBorderStrokeWidth||1,quadrantExternalBorderStrokeWidth:or.quadrantChart?.quadrantExternalBorderStrokeWidth||2}}getDefaultThemeConfig(){return{quadrant1Fill:Li.quadrant1Fill,quadrant2Fill:Li.quadrant2Fill,quadrant3Fill:Li.quadrant3Fill,quadrant4Fill:Li.quadrant4Fill,quadrant1TextFill:Li.quadrant1TextFill,quadrant2TextFill:Li.quadrant2TextFill,quadrant3TextFill:Li.quadrant3TextFill,quadrant4TextFill:Li.quadrant4TextFill,quadrantPointFill:Li.quadrantPointFill,quadrantPointTextFill:Li.quadrantPointTextFill,quadrantXAxisTextFill:Li.quadrantXAxisTextFill,quadrantYAxisTextFill:Li.quadrantYAxisTextFill,quadrantTitleFill:Li.quadrantTitleFill,quadrantInternalBorderStrokeFill:Li.quadrantInternalBorderStrokeFill,quadrantExternalBorderStrokeFill:Li.quadrantExternalBorderStrokeFill}}clear(){this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData(),this.classes=new Map,ee.info("clear called")}setData(e){this.data={...this.data,...e}}addPoints(e){this.data.points=[...e,...this.data.points]}addClass(e,r){this.classes.set(e,r)}setConfig(e){ee.trace("setConfig called with: ",e),this.config={...this.config,...e}}setThemeConfig(e){ee.trace("setThemeConfig called with: ",e),this.themeConfig={...this.themeConfig,...e}}calculateSpace(e,r,n,i){const a=2*this.config.xAxisLabelPadding+this.config.xAxisLabelFontSize,s={top:e==="top"&&r?a:0,bottom:e==="bottom"&&r?a:0},o=2*this.config.yAxisLabelPadding+this.config.yAxisLabelFontSize,u={left:this.config.yAxisPosition==="left"&&n?o:0,right:this.config.yAxisPosition==="right"&&n?o:0},h=this.config.titleFontSize+2*this.config.titlePadding,d={top:i?h:0},p=this.config.quadrantPadding+u.left,f=this.config.quadrantPadding+s.top+d.top,g=this.config.chartWidth-2*this.config.quadrantPadding-u.left-u.right,m=this.config.chartHeight-2*this.config.quadrantPadding-s.top-s.bottom-d.top;return{xAxisSpace:s,yAxisSpace:u,titleSpace:d,quadrantSpace:{quadrantLeft:p,quadrantTop:f,quadrantWidth:g,quadrantHalfWidth:g/2,quadrantHeight:m,quadrantHalfHeight:m/2}}}getAxisLabels(e,r,n,i){const{quadrantSpace:a,titleSpace:s}=i,{quadrantHalfHeight:o,quadrantHeight:u,quadrantLeft:h,quadrantHalfWidth:d,quadrantTop:p,quadrantWidth:f}=a,g=!!this.data.xAxisRightText,m=!!this.data.yAxisTopText,y=[];return this.data.xAxisLeftText&&r&&y.push({text:this.data.xAxisLeftText,fill:this.themeConfig.quadrantXAxisTextFill,x:h+(g?d/2:0),y:e==="top"?this.config.xAxisLabelPadding+s.top:this.config.xAxisLabelPadding+p+u+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:g?"center":"left",horizontalPos:"top",rotation:0}),this.data.xAxisRightText&&r&&y.push({text:this.data.xAxisRightText,fill:this.themeConfig.quadrantXAxisTextFill,x:h+d+(g?d/2:0),y:e==="top"?this.config.xAxisLabelPadding+s.top:this.config.xAxisLabelPadding+p+u+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:g?"center":"left",horizontalPos:"top",rotation:0}),this.data.yAxisBottomText&&n&&y.push({text:this.data.yAxisBottomText,fill:this.themeConfig.quadrantYAxisTextFill,x:this.config.yAxisPosition==="left"?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+h+f+this.config.quadrantPadding,y:p+u-(m?o/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:m?"center":"left",horizontalPos:"top",rotation:-90}),this.data.yAxisTopText&&n&&y.push({text:this.data.yAxisTopText,fill:this.themeConfig.quadrantYAxisTextFill,x:this.config.yAxisPosition==="left"?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+h+f+this.config.quadrantPadding,y:p+o-(m?o/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:m?"center":"left",horizontalPos:"top",rotation:-90}),y}getQuadrants(e){const{quadrantSpace:r}=e,{quadrantHalfHeight:n,quadrantLeft:i,quadrantHalfWidth:a,quadrantTop:s}=r,o=[{text:{text:this.data.quadrant1Text,fill:this.themeConfig.quadrant1TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i+a,y:s,width:a,height:n,fill:this.themeConfig.quadrant1Fill},{text:{text:this.data.quadrant2Text,fill:this.themeConfig.quadrant2TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i,y:s,width:a,height:n,fill:this.themeConfig.quadrant2Fill},{text:{text:this.data.quadrant3Text,fill:this.themeConfig.quadrant3TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i,y:s+n,width:a,height:n,fill:this.themeConfig.quadrant3Fill},{text:{text:this.data.quadrant4Text,fill:this.themeConfig.quadrant4TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i+a,y:s+n,width:a,height:n,fill:this.themeConfig.quadrant4Fill}];for(const u of o)u.text.x=u.x+u.width/2,this.data.points.length===0?(u.text.y=u.y+u.height/2,u.text.horizontalPos="middle"):(u.text.y=u.y+this.config.quadrantTextTopPadding,u.text.horizontalPos="top");return o}getQuadrantPoints(e){const{quadrantSpace:r}=e,{quadrantHeight:n,quadrantLeft:i,quadrantTop:a,quadrantWidth:s}=r,o=Fu().domain([0,1]).range([i,s+i]),u=Fu().domain([0,1]).range([n+a,a]);return this.data.points.map((d=>{const p=this.classes.get(d.className);return p&&(d={...p,...d}),{x:o(d.x),y:u(d.y),fill:d.color??this.themeConfig.quadrantPointFill,radius:d.radius??this.config.pointRadius,text:{text:d.text,fill:this.themeConfig.quadrantPointTextFill,x:o(d.x),y:u(d.y)+this.config.pointTextPadding,verticalPos:"center",horizontalPos:"top",fontSize:this.config.pointLabelFontSize,rotation:0},strokeColor:d.strokeColor??this.themeConfig.quadrantPointFill,strokeWidth:d.strokeWidth??"0px"}}))}getBorders(e){const r=this.config.quadrantExternalBorderStrokeWidth/2,{quadrantSpace:n}=e,{quadrantHalfHeight:i,quadrantHeight:a,quadrantLeft:s,quadrantHalfWidth:o,quadrantTop:u,quadrantWidth:h}=n;return[{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:s-r,y1:u,x2:s+h+r,y2:u},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:s+h,y1:u+r,x2:s+h,y2:u+a-r},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:s-r,y1:u+a,x2:s+h+r,y2:u+a},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:s,y1:u+r,x2:s,y2:u+a-r},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:s+o,y1:u+r,x2:s+o,y2:u+a-r},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:s+r,y1:u+i,x2:s+h-r,y2:u+i}]}getTitle(e){if(e)return{text:this.data.titleText,fill:this.themeConfig.quadrantTitleFill,fontSize:this.config.titleFontSize,horizontalPos:"top",verticalPos:"center",rotation:0,y:this.config.titlePadding,x:this.config.chartWidth/2}}build(){const e=this.config.showXAxis&&!(!this.data.xAxisLeftText&&!this.data.xAxisRightText),r=this.config.showYAxis&&!(!this.data.yAxisTopText&&!this.data.yAxisBottomText),n=this.config.showTitle&&!!this.data.titleText,i=this.data.points.length>0?"bottom":this.config.xAxisPosition,a=this.calculateSpace(i,e,r,n);return{points:this.getQuadrantPoints(a),quadrants:this.getQuadrants(a),axisLabels:this.getAxisLabels(i,e,r,a),borderLines:this.getBorders(a),title:this.getTitle(n)}}},l(f0,"QuadrantBuilder"),f0),g0,jx=(g0=class extends Error{constructor(e,r,n){super(`value for ${e} ${r} is invalid, please use a valid ${n}`),this.name="InvalidStyleError"}},l(g0,"InvalidStyleError"),g0);function ZC(t){return!/^#?([\dA-Fa-f]{6}|[\dA-Fa-f]{3})$/.test(t)}function Mne(t){return!/^\d+$/.test(t)}function Dne(t){return!/^\d+px$/.test(t)}l(ZC,"validateHexCode"),l(Mne,"validateNumber"),l(Dne,"validateSizeInPixels");var u6e=ke();function uo(t){return Ir(t.trim(),u6e)}l(uo,"textSanitizer");var ui=new c6e;function One(t){ui.setData({quadrant1Text:uo(t.text)})}function Pne(t){ui.setData({quadrant2Text:uo(t.text)})}function Bne(t){ui.setData({quadrant3Text:uo(t.text)})}function $ne(t){ui.setData({quadrant4Text:uo(t.text)})}function Fne(t){ui.setData({xAxisLeftText:uo(t.text)})}function zne(t){ui.setData({xAxisRightText:uo(t.text)})}function Gne(t){ui.setData({yAxisTopText:uo(t.text)})}function Une(t){ui.setData({yAxisBottomText:uo(t.text)})}function Vw(t){const e={};for(const r of t){const[n,i]=r.trim().split(/\s*:\s*/);if(n==="radius"){if(Mne(i))throw new jx(n,i,"number");e.radius=parseInt(i)}else if(n==="color"){if(ZC(i))throw new jx(n,i,"hex code");e.color=i}else if(n==="stroke-color"){if(ZC(i))throw new jx(n,i,"hex code");e.strokeColor=i}else{if(n!=="stroke-width")throw new Error(`style named ${n} is not supported.`);if(Dne(i))throw new jx(n,i,"number of pixels (eg. 10px)");e.strokeWidth=i}}return e}function qne(t,e,r,n,i){const a=Vw(i);ui.addPoints([{x:r,y:n,text:uo(t.text),className:e,...a}])}function jne(t,e){ui.addClass(t,Vw(e))}function Wne(t){ui.setConfig({chartWidth:t})}function Yne(t){ui.setConfig({chartHeight:t})}function Vne(){const t=ke(),{themeVariables:e,quadrantChart:r}=t;return r&&ui.setConfig(r),ui.setThemeConfig({quadrant1Fill:e.quadrant1Fill,quadrant2Fill:e.quadrant2Fill,quadrant3Fill:e.quadrant3Fill,quadrant4Fill:e.quadrant4Fill,quadrant1TextFill:e.quadrant1TextFill,quadrant2TextFill:e.quadrant2TextFill,quadrant3TextFill:e.quadrant3TextFill,quadrant4TextFill:e.quadrant4TextFill,quadrantPointFill:e.quadrantPointFill,quadrantPointTextFill:e.quadrantPointTextFill,quadrantXAxisTextFill:e.quadrantXAxisTextFill,quadrantYAxisTextFill:e.quadrantYAxisTextFill,quadrantExternalBorderStrokeFill:e.quadrantExternalBorderStrokeFill,quadrantInternalBorderStrokeFill:e.quadrantInternalBorderStrokeFill,quadrantTitleFill:e.quadrantTitleFill}),ui.setData({titleText:Wn()}),ui.build()}l(One,"setQuadrant1Text"),l(Pne,"setQuadrant2Text"),l(Bne,"setQuadrant3Text"),l($ne,"setQuadrant4Text"),l(Fne,"setXAxisLeftText"),l(zne,"setXAxisRightText"),l(Gne,"setYAxisTopText"),l(Une,"setYAxisBottomText"),l(Vw,"parseStyles"),l(qne,"addPoint"),l(jne,"addClass"),l(Wne,"setWidth"),l(Yne,"setHeight"),l(Vne,"getQuadrantData");var h6e={setWidth:Wne,setHeight:Yne,setQuadrant1Text:One,setQuadrant2Text:Pne,setQuadrant3Text:Bne,setQuadrant4Text:$ne,setXAxisLeftText:Fne,setXAxisRightText:zne,setYAxisTopText:Gne,setYAxisBottomText:Une,parseStyles:Vw,addPoint:qne,addClass:jne,getQuadrantData:Vne,clear:l((function(){ui.clear(),jn()}),"clear"),setAccTitle:zn,getAccTitle:Xn,setDiagramTitle:di,getDiagramTitle:Wn,getAccDescription:Zn,setAccDescription:Kn},d6e=l(((t,e,r,n)=>{function i(C){return C==="top"?"hanging":"middle"}function a(C){return C==="left"?"start":"middle"}function s(C){return`translate(${C.x}, ${C.y}) rotate(${C.rotation||0})`}l(i,"getDominantBaseLine"),l(a,"getTextAnchor"),l(s,"getTransformation");const o=ke();ee.debug(`Rendering quadrant chart
`+t);const u=o.securityLevel;let h;u==="sandbox"&&(h=Ze("#i"+e));const d=Ze(u==="sandbox"?h.nodes()[0].contentDocument.body:"body").select(`[id="${e}"]`),p=d.append("g").attr("class","main"),f=o.quadrantChart?.chartWidth??500,g=o.quadrantChart?.chartHeight??500;da(d,g,f,o.quadrantChart?.useMaxWidth??!0),d.attr("viewBox","0 0 "+f+" "+g),n.db.setHeight(g),n.db.setWidth(f);const m=n.db.getQuadrantData(),y=p.append("g").attr("class","quadrants"),v=p.append("g").attr("class","border"),x=p.append("g").attr("class","data-points"),b=p.append("g").attr("class","labels"),w=p.append("g").attr("class","title");m.title&&w.append("text").attr("x",0).attr("y",0).attr("fill",m.title.fill).attr("font-size",m.title.fontSize).attr("dominant-baseline",i(m.title.horizontalPos)).attr("text-anchor",a(m.title.verticalPos)).attr("transform",s(m.title)).text(m.title.text),m.borderLines&&v.selectAll("line").data(m.borderLines).enter().append("line").attr("x1",(C=>C.x1)).attr("y1",(C=>C.y1)).attr("x2",(C=>C.x2)).attr("y2",(C=>C.y2)).style("stroke",(C=>C.strokeFill)).style("stroke-width",(C=>C.strokeWidth));const T=y.selectAll("g.quadrant").data(m.quadrants).enter().append("g").attr("class","quadrant");T.append("rect").attr("x",(C=>C.x)).attr("y",(C=>C.y)).attr("width",(C=>C.width)).attr("height",(C=>C.height)).attr("fill",(C=>C.fill)),T.append("text").attr("x",0).attr("y",0).attr("fill",(C=>C.text.fill)).attr("font-size",(C=>C.text.fontSize)).attr("dominant-baseline",(C=>i(C.text.horizontalPos))).attr("text-anchor",(C=>a(C.text.verticalPos))).attr("transform",(C=>s(C.text))).text((C=>C.text.text)),b.selectAll("g.label").data(m.axisLabels).enter().append("g").attr("class","label").append("text").attr("x",0).attr("y",0).text((C=>C.text)).attr("fill",(C=>C.fill)).attr("font-size",(C=>C.fontSize)).attr("dominant-baseline",(C=>i(C.horizontalPos))).attr("text-anchor",(C=>a(C.verticalPos))).attr("transform",(C=>s(C)));const k=x.selectAll("g.data-point").data(m.points).enter().append("g").attr("class","data-point");k.append("circle").attr("cx",(C=>C.x)).attr("cy",(C=>C.y)).attr("r",(C=>C.radius)).attr("fill",(C=>C.fill)).attr("stroke",(C=>C.strokeColor)).attr("stroke-width",(C=>C.strokeWidth)),k.append("text").attr("x",0).attr("y",0).text((C=>C.text.text)).attr("fill",(C=>C.text.fill)).attr("font-size",(C=>C.text.fontSize)).attr("dominant-baseline",(C=>i(C.text.horizontalPos))).attr("text-anchor",(C=>a(C.text.verticalPos))).attr("transform",(C=>s(C.text)))}),"draw"),p6e={parser:l6e,db:h6e,renderer:{draw:d6e},styles:l((()=>""),"styles")},f6e=Object.freeze({__proto__:null,diagram:p6e}),QC=(function(){var t=l((function(A,M,D,R){for(D=D||{},R=A.length;R--;D[A[R]]=M);return D}),"o"),e=[1,10,12,14,16,18,19,21,23],r=[2,6],n=[1,3],i=[1,5],a=[1,6],s=[1,7],o=[1,5,10,12,14,16,18,19,21,23,34,35,36],u=[1,25],h=[1,26],d=[1,28],p=[1,29],f=[1,30],g=[1,31],m=[1,32],y=[1,33],v=[1,34],x=[1,35],b=[1,36],w=[1,37],T=[1,43],k=[1,42],C=[1,47],E=[1,50],_=[1,10,12,14,16,18,19,21,23,34,35,36],S=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36],N=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36,41,42,43,44,45,46,47,48,49,50],O=[1,64],B={trace:l((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,eol:4,XYCHART:5,chartConfig:6,document:7,CHART_ORIENTATION:8,statement:9,title:10,text:11,X_AXIS:12,parseXAxis:13,Y_AXIS:14,parseYAxis:15,LINE:16,plotData:17,BAR:18,acc_title:19,acc_title_value:20,acc_descr:21,acc_descr_value:22,acc_descr_multiline_value:23,SQUARE_BRACES_START:24,commaSeparatedNumbers:25,SQUARE_BRACES_END:26,NUMBER_WITH_DECIMAL:27,COMMA:28,xAxisData:29,bandData:30,ARROW_DELIMITER:31,commaSeparatedTexts:32,yAxisData:33,NEWLINE:34,SEMI:35,EOF:36,alphaNum:37,STR:38,MD_STR:39,alphaNumToken:40,AMP:41,NUM:42,ALPHA:43,PLUS:44,EQUALS:45,MULT:46,DOT:47,BRKT:48,MINUS:49,UNDERSCORE:50,$accept:0,$end:1},terminals_:{2:"error",5:"XYCHART",8:"CHART_ORIENTATION",10:"title",12:"X_AXIS",14:"Y_AXIS",16:"LINE",18:"BAR",19:"acc_title",20:"acc_title_value",21:"acc_descr",22:"acc_descr_value",23:"acc_descr_multiline_value",24:"SQUARE_BRACES_START",26:"SQUARE_BRACES_END",27:"NUMBER_WITH_DECIMAL",28:"COMMA",31:"ARROW_DELIMITER",34:"NEWLINE",35:"SEMI",36:"EOF",38:"STR",39:"MD_STR",41:"AMP",42:"NUM",43:"ALPHA",44:"PLUS",45:"EQUALS",46:"MULT",47:"DOT",48:"BRKT",49:"MINUS",50:"UNDERSCORE"},productions_:[0,[3,2],[3,3],[3,2],[3,1],[6,1],[7,0],[7,2],[9,2],[9,2],[9,2],[9,2],[9,2],[9,3],[9,2],[9,3],[9,2],[9,2],[9,1],[17,3],[25,3],[25,1],[13,1],[13,2],[13,1],[29,1],[29,3],[30,3],[32,3],[32,1],[15,1],[15,2],[15,1],[33,3],[4,1],[4,1],[4,1],[11,1],[11,1],[11,1],[37,1],[37,2],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1]],performAction:l((function(A,M,D,R,P,$,z){var q=$.length-1;switch(P){case 5:R.setOrientation($[q]);break;case 9:R.setDiagramTitle($[q].text.trim());break;case 12:R.setLineData({text:"",type:"text"},$[q]);break;case 13:R.setLineData($[q-1],$[q]);break;case 14:R.setBarData({text:"",type:"text"},$[q]);break;case 15:R.setBarData($[q-1],$[q]);break;case 16:this.$=$[q].trim(),R.setAccTitle(this.$);break;case 17:case 18:this.$=$[q].trim(),R.setAccDescription(this.$);break;case 19:case 27:this.$=$[q-1];break;case 20:this.$=[Number($[q-2]),...$[q]];break;case 21:this.$=[Number($[q])];break;case 22:R.setXAxisTitle($[q]);break;case 23:R.setXAxisTitle($[q-1]);break;case 24:R.setXAxisTitle({type:"text",text:""});break;case 25:R.setXAxisBand($[q]);break;case 26:R.setXAxisRangeData(Number($[q-2]),Number($[q]));break;case 28:this.$=[$[q-2],...$[q]];break;case 29:this.$=[$[q]];break;case 30:R.setYAxisTitle($[q]);break;case 31:R.setYAxisTitle($[q-1]);break;case 32:R.setYAxisTitle({type:"text",text:""});break;case 33:R.setYAxisRangeData(Number($[q-2]),Number($[q]));break;case 37:case 38:this.$={text:$[q],type:"text"};break;case 39:this.$={text:$[q],type:"markdown"};break;case 40:this.$=$[q];break;case 41:this.$=$[q-1]+""+$[q]}}),"anonymous"),table:[t(e,r,{3:1,4:2,7:4,5:n,34:i,35:a,36:s}),{1:[3]},t(e,r,{4:2,7:4,3:8,5:n,34:i,35:a,36:s}),t(e,r,{4:2,7:4,6:9,3:10,5:n,8:[1,11],34:i,35:a,36:s}),{1:[2,4],9:12,10:[1,13],12:[1,14],14:[1,15],16:[1,16],18:[1,17],19:[1,18],21:[1,19],23:[1,20]},t(o,[2,34]),t(o,[2,35]),t(o,[2,36]),{1:[2,1]},t(e,r,{4:2,7:4,3:21,5:n,34:i,35:a,36:s}),{1:[2,3]},t(o,[2,5]),t(e,[2,7],{4:22,34:i,35:a,36:s}),{11:23,37:24,38:u,39:h,40:27,41:d,42:p,43:f,44:g,45:m,46:y,47:v,48:x,49:b,50:w},{11:39,13:38,24:T,27:k,29:40,30:41,37:24,38:u,39:h,40:27,41:d,42:p,43:f,44:g,45:m,46:y,47:v,48:x,49:b,50:w},{11:45,15:44,27:C,33:46,37:24,38:u,39:h,40:27,41:d,42:p,43:f,44:g,45:m,46:y,47:v,48:x,49:b,50:w},{11:49,17:48,24:E,37:24,38:u,39:h,40:27,41:d,42:p,43:f,44:g,45:m,46:y,47:v,48:x,49:b,50:w},{11:52,17:51,24:E,37:24,38:u,39:h,40:27,41:d,42:p,43:f,44:g,45:m,46:y,47:v,48:x,49:b,50:w},{20:[1,53]},{22:[1,54]},t(_,[2,18]),{1:[2,2]},t(_,[2,8]),t(_,[2,9]),t(S,[2,37],{40:55,41:d,42:p,43:f,44:g,45:m,46:y,47:v,48:x,49:b,50:w}),t(S,[2,38]),t(S,[2,39]),t(N,[2,40]),t(N,[2,42]),t(N,[2,43]),t(N,[2,44]),t(N,[2,45]),t(N,[2,46]),t(N,[2,47]),t(N,[2,48]),t(N,[2,49]),t(N,[2,50]),t(N,[2,51]),t(_,[2,10]),t(_,[2,22],{30:41,29:56,24:T,27:k}),t(_,[2,24]),t(_,[2,25]),{31:[1,57]},{11:59,32:58,37:24,38:u,39:h,40:27,41:d,42:p,43:f,44:g,45:m,46:y,47:v,48:x,49:b,50:w},t(_,[2,11]),t(_,[2,30],{33:60,27:C}),t(_,[2,32]),{31:[1,61]},t(_,[2,12]),{17:62,24:E},{25:63,27:O},t(_,[2,14]),{17:65,24:E},t(_,[2,16]),t(_,[2,17]),t(N,[2,41]),t(_,[2,23]),{27:[1,66]},{26:[1,67]},{26:[2,29],28:[1,68]},t(_,[2,31]),{27:[1,69]},t(_,[2,13]),{26:[1,70]},{26:[2,21],28:[1,71]},t(_,[2,15]),t(_,[2,26]),t(_,[2,27]),{11:59,32:72,37:24,38:u,39:h,40:27,41:d,42:p,43:f,44:g,45:m,46:y,47:v,48:x,49:b,50:w},t(_,[2,33]),t(_,[2,19]),{25:73,27:O},{26:[2,28]},{26:[2,20]}],defaultActions:{8:[2,1],10:[2,3],21:[2,2],72:[2,28],73:[2,20]},parseError:l((function(A,M){if(!M.recoverable){var D=new Error(A);throw D.hash=M,D}this.trace(A)}),"parseError"),parse:l((function(A){var M=this,D=[0],R=[],P=[null],$=[],z=this.table,q="",W=0,Q=0,te=2,oe=1,re=$.slice.call(arguments,1),H=Object.create(this.lexer),K={yy:{}};for(var ie in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ie)&&(K.yy[ie]=this.yy[ie]);H.setInput(A,K.yy),K.yy.lexer=H,K.yy.parser=this,H.yylloc===void 0&&(H.yylloc={});var ne=H.yylloc;$.push(ne);var J=H.options&&H.options.ranges;function ue(Pe){D.length=D.length-2*Pe,P.length=P.length-Pe,$.length=$.length-Pe}function Y(){var Pe;return typeof(Pe=R.pop()||H.lex()||oe)!="number"&&(Pe instanceof Array&&(Pe=(R=Pe).pop()),Pe=M.symbols_[Pe]||Pe),Pe}typeof K.yy.parseError=="function"?this.parseError=K.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,l(ue,"popStack"),l(Y,"lex");for(var se,de,ce,Ee,ve,De,Ue,ze,Ge={};;){if(de=D[D.length-1],this.defaultActions[de]?ce=this.defaultActions[de]:(se==null&&(se=Y()),ce=z[de]&&z[de][se]),ce===void 0||!ce.length||!ce[0]){var $e="";for(ve in ze=[],z[de])this.terminals_[ve]&&ve>te&&ze.push("'"+this.terminals_[ve]+"'");$e=H.showPosition?"Parse error on line "+(W+1)+`:
`+H.showPosition()+`
Expecting `+ze.join(", ")+", got '"+(this.terminals_[se]||se)+"'":"Parse error on line "+(W+1)+": Unexpected "+(se==oe?"end of input":"'"+(this.terminals_[se]||se)+"'"),this.parseError($e,{text:H.match,token:this.terminals_[se]||se,line:H.yylineno,loc:ne,expected:ze})}if(ce[0]instanceof Array&&ce.length>1)throw new Error("Parse Error: multiple actions possible at state: "+de+", token: "+se);switch(ce[0]){case 1:D.push(se),P.push(H.yytext),$.push(H.yylloc),D.push(ce[1]),se=null,Q=H.yyleng,q=H.yytext,W=H.yylineno,ne=H.yylloc;break;case 2:if(De=this.productions_[ce[1]][1],Ge.$=P[P.length-De],Ge._$={first_line:$[$.length-(De||1)].first_line,last_line:$[$.length-1].last_line,first_column:$[$.length-(De||1)].first_column,last_column:$[$.length-1].last_column},J&&(Ge._$.range=[$[$.length-(De||1)].range[0],$[$.length-1].range[1]]),(Ee=this.performAction.apply(Ge,[q,Q,W,K.yy,ce[1],P,$].concat(re)))!==void 0)return Ee;De&&(D=D.slice(0,-1*De*2),P=P.slice(0,-1*De),$=$.slice(0,-1*De)),D.push(this.productions_[ce[1]][0]),P.push(Ge.$),$.push(Ge._$),Ue=z[D[D.length-2]][D[D.length-1]],D.push(Ue);break;case 3:return!0}}return!0}),"parse")},L=(function(){var A={EOF:1,parseError:l((function(M,D){if(!this.yy.parser)throw new Error(M);this.yy.parser.parseError(M,D)}),"parseError"),setInput:l((function(M,D){return this.yy=D||this.yy||{},this._input=M,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:l((function(){var M=this._input[0];return this.yytext+=M,this.yyleng++,this.offset++,this.match+=M,this.matched+=M,M.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),M}),"input"),unput:l((function(M){var D=M.length,R=M.split(/(?:\r\n?|\n)/g);this._input=M+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-D),this.offset-=D;var P=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),R.length-1&&(this.yylineno-=R.length-1);var $=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:R?(R.length===P.length?this.yylloc.first_column:0)+P[P.length-R.length].length-R[0].length:this.yylloc.first_column-D},this.options.ranges&&(this.yylloc.range=[$[0],$[0]+this.yyleng-D]),this.yyleng=this.yytext.length,this}),"unput"),more:l((function(){return this._more=!0,this}),"more"),reject:l((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:l((function(M){this.unput(this.match.slice(M))}),"less"),pastInput:l((function(){var M=this.matched.substr(0,this.matched.length-this.match.length);return(M.length>20?"...":"")+M.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:l((function(){var M=this.match;return M.length<20&&(M+=this._input.substr(0,20-M.length)),(M.substr(0,20)+(M.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:l((function(){var M=this.pastInput(),D=new Array(M.length+1).join("-");return M+this.upcomingInput()+`
`+D+"^"}),"showPosition"),test_match:l((function(M,D){var R,P,$;if(this.options.backtrack_lexer&&($={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&($.yylloc.range=this.yylloc.range.slice(0))),(P=M[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=P.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:P?P[P.length-1].length-P[P.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+M[0].length},this.yytext+=M[0],this.match+=M[0],this.matches=M,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(M[0].length),this.matched+=M[0],R=this.performAction.call(this,this.yy,this,D,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),R)return R;if(this._backtrack){for(var z in $)this[z]=$[z];return!1}return!1}),"test_match"),next:l((function(){if(this.done)return this.EOF;var M,D,R,P;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var $=this._currentRules(),z=0;z<$.length;z++)if((R=this._input.match(this.rules[$[z]]))&&(!D||R[0].length>D[0].length)){if(D=R,P=z,this.options.backtrack_lexer){if((M=this.test_match(R,$[z]))!==!1)return M;if(this._backtrack){D=!1;continue}return!1}if(!this.options.flex)break}return D?(M=this.test_match(D,$[P]))!==!1&&M:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:l((function(){var M=this.next();return M||this.lex()}),"lex"),begin:l((function(M){this.conditionStack.push(M)}),"begin"),popState:l((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:l((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:l((function(M){return(M=this.conditionStack.length-1-Math.abs(M||0))>=0?this.conditionStack[M]:"INITIAL"}),"topState"),pushState:l((function(M){this.begin(M)}),"pushState"),stateStackSize:l((function(){return this.conditionStack.length}),"stateStackSize"),options:{"case-insensitive":!0},performAction:l((function(M,D,R,P){switch(R){case 0:case 1:case 5:case 43:break;case 2:case 3:return this.popState(),34;case 4:return 34;case 6:return 10;case 7:return this.pushState("acc_title"),19;case 8:return this.popState(),"acc_title_value";case 9:return this.pushState("acc_descr"),21;case 10:return this.popState(),"acc_descr_value";case 11:this.pushState("acc_descr_multiline");break;case 12:case 25:case 27:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 5;case 15:return 8;case 16:return this.pushState("axis_data"),"X_AXIS";case 17:return this.pushState("axis_data"),"Y_AXIS";case 18:return this.pushState("axis_band_data"),24;case 19:return 31;case 20:return this.pushState("data"),16;case 21:return this.pushState("data"),18;case 22:return this.pushState("data_inner"),24;case 23:return 27;case 24:return this.popState(),26;case 26:this.pushState("string");break;case 28:return"STR";case 29:return 24;case 30:return 26;case 31:return 43;case 32:return"COLON";case 33:return 44;case 34:return 28;case 35:return 45;case 36:return 46;case 37:return 48;case 38:return 50;case 39:return 47;case 40:return 41;case 41:return 49;case 42:return 42;case 44:return 35;case 45:return 36}}),"anonymous"),rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:(\r?\n))/i,/^(?:(\r?\n))/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:\{)/i,/^(?:[^\}]*)/i,/^(?:xychart-beta\b)/i,/^(?:(?:vertical|horizontal))/i,/^(?:x-axis\b)/i,/^(?:y-axis\b)/i,/^(?:\[)/i,/^(?:-->)/i,/^(?:line\b)/i,/^(?:bar\b)/i,/^(?:\[)/i,/^(?:[+-]?(?:\d+(?:\.\d+)?|\.\d+))/i,/^(?:\])/i,/^(?:(?:`\)                                    \{ this\.pushState\(md_string\); \}\n<md_string>\(\?:\(\?!`"\)\.\)\+                  \{ return MD_STR; \}\n<md_string>\(\?:`))/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s+)/i,/^(?:;)/i,/^(?:$)/i],conditions:{data_inner:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,23,24,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},data:{rules:[0,1,3,4,5,6,7,9,11,14,15,16,17,20,21,22,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},axis_band_data:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,24,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},axis_data:{rules:[0,1,2,4,5,6,7,9,11,14,15,16,17,18,19,20,21,23,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},title:{rules:[],inclusive:!1},md_string:{rules:[],inclusive:!1},string:{rules:[27,28],inclusive:!1},INITIAL:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0}}};return A})();function I(){this.yy={}}return B.lexer=L,l(I,"Parser"),I.prototype=B,B.Parser=I,new I})();QC.parser=QC;var g6e=QC;function JC(t){return t.type==="bar"}function dN(t){return t.type==="band"}function tp(t){return t.type==="linear"}l(JC,"isBarPlot"),l(dN,"isBandAxisData"),l(tp,"isLinearAxisData");var m0,Hne=(m0=class{constructor(e){this.parentGroup=e}getMaxDimension(e,r){if(!this.parentGroup)return{width:e.reduce(((a,s)=>Math.max(s.length,a)),0)*r,height:r};const n={width:0,height:0},i=this.parentGroup.append("g").attr("visibility","hidden").attr("font-size",r);for(const a of e){const s=oV(i,1,a),o=s?s.width:a.length*r,u=s?s.height:r;n.width=Math.max(n.width,o),n.height=Math.max(n.height,u)}return i.remove(),n}},l(m0,"TextDimensionCalculatorWithFont"),m0),y0,Xne=(y0=class{constructor(e,r,n,i){this.axisConfig=e,this.title=r,this.textDimensionCalculator=n,this.axisThemeConfig=i,this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left",this.showTitle=!1,this.showLabel=!1,this.showTick=!1,this.showAxisLine=!1,this.outerPadding=0,this.titleTextHeight=0,this.labelTextHeight=0,this.range=[0,10],this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left"}setRange(e){this.range=e,this.axisPosition==="left"||this.axisPosition==="right"?this.boundingRect.height=e[1]-e[0]:this.boundingRect.width=e[1]-e[0],this.recalculateScale()}getRange(){return[this.range[0]+this.outerPadding,this.range[1]-this.outerPadding]}setAxisPosition(e){this.axisPosition=e,this.setRange(this.range)}getTickDistance(){const e=this.getRange();return Math.abs(e[0]-e[1])/this.getTickValues().length}getAxisOuterPadding(){return this.outerPadding}getLabelDimension(){return this.textDimensionCalculator.getMaxDimension(this.getTickValues().map((e=>e.toString())),this.axisConfig.labelFontSize)}recalculateOuterPaddingToDrawBar(){.7*this.getTickDistance()>2*this.outerPadding&&(this.outerPadding=Math.floor(.7*this.getTickDistance()/2)),this.recalculateScale()}calculateSpaceIfDrawnHorizontally(e){let r=e.height;if(this.axisConfig.showAxisLine&&r>this.axisConfig.axisLineWidth&&(r-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const n=this.getLabelDimension(),i=.2*e.width;this.outerPadding=Math.min(n.width/2,i);const a=n.height+2*this.axisConfig.labelPadding;this.labelTextHeight=n.height,a<=r&&(r-=a,this.showLabel=!0)}if(this.axisConfig.showTick&&r>=this.axisConfig.tickLength&&(this.showTick=!0,r-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const n=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),i=n.height+2*this.axisConfig.titlePadding;this.titleTextHeight=n.height,i<=r&&(r-=i,this.showTitle=!0)}this.boundingRect.width=e.width,this.boundingRect.height=e.height-r}calculateSpaceIfDrawnVertical(e){let r=e.width;if(this.axisConfig.showAxisLine&&r>this.axisConfig.axisLineWidth&&(r-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const n=this.getLabelDimension(),i=.2*e.height;this.outerPadding=Math.min(n.height/2,i);const a=n.width+2*this.axisConfig.labelPadding;a<=r&&(r-=a,this.showLabel=!0)}if(this.axisConfig.showTick&&r>=this.axisConfig.tickLength&&(this.showTick=!0,r-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const n=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),i=n.height+2*this.axisConfig.titlePadding;this.titleTextHeight=n.height,i<=r&&(r-=i,this.showTitle=!0)}this.boundingRect.width=e.width-r,this.boundingRect.height=e.height}calculateSpace(e){return this.axisPosition==="left"||this.axisPosition==="right"?this.calculateSpaceIfDrawnVertical(e):this.calculateSpaceIfDrawnHorizontally(e),this.recalculateScale(),{width:this.boundingRect.width,height:this.boundingRect.height}}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}getDrawableElementsForLeftAxis(){const e=[];if(this.showAxisLine){const r=this.boundingRect.x+this.boundingRect.width-this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["left-axis","axisl-line"],data:[{path:`M ${r},${this.boundingRect.y} L ${r},${this.boundingRect.y+this.boundingRect.height} `,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["left-axis","label"],data:this.getTickValues().map((r=>({text:r.toString(),x:this.boundingRect.x+this.boundingRect.width-(this.showLabel?this.axisConfig.labelPadding:0)-(this.showTick?this.axisConfig.tickLength:0)-(this.showAxisLine?this.axisConfig.axisLineWidth:0),y:this.getScaleValue(r),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"middle",horizontalPos:"right"})))}),this.showTick){const r=this.boundingRect.x+this.boundingRect.width-(this.showAxisLine?this.axisConfig.axisLineWidth:0);e.push({type:"path",groupTexts:["left-axis","ticks"],data:this.getTickValues().map((n=>({path:`M ${r},${this.getScaleValue(n)} L ${r-this.axisConfig.tickLength},${this.getScaleValue(n)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth})))})}return this.showTitle&&e.push({type:"text",groupTexts:["left-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.axisConfig.titlePadding,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:270,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElementsForBottomAxis(){const e=[];if(this.showAxisLine){const r=this.boundingRect.y+this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["bottom-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${r} L ${this.boundingRect.x+this.boundingRect.width},${r}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["bottom-axis","label"],data:this.getTickValues().map((r=>({text:r.toString(),x:this.getScaleValue(r),y:this.boundingRect.y+this.axisConfig.labelPadding+(this.showTick?this.axisConfig.tickLength:0)+(this.showAxisLine?this.axisConfig.axisLineWidth:0),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"})))}),this.showTick){const r=this.boundingRect.y+(this.showAxisLine?this.axisConfig.axisLineWidth:0);e.push({type:"path",groupTexts:["bottom-axis","ticks"],data:this.getTickValues().map((n=>({path:`M ${this.getScaleValue(n)},${r} L ${this.getScaleValue(n)},${r+this.axisConfig.tickLength}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth})))})}return this.showTitle&&e.push({type:"text",groupTexts:["bottom-axis","title"],data:[{text:this.title,x:this.range[0]+(this.range[1]-this.range[0])/2,y:this.boundingRect.y+this.boundingRect.height-this.axisConfig.titlePadding-this.titleTextHeight,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElementsForTopAxis(){const e=[];if(this.showAxisLine){const r=this.boundingRect.y+this.boundingRect.height-this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["top-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${r} L ${this.boundingRect.x+this.boundingRect.width},${r}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["top-axis","label"],data:this.getTickValues().map((r=>({text:r.toString(),x:this.getScaleValue(r),y:this.boundingRect.y+(this.showTitle?this.titleTextHeight+2*this.axisConfig.titlePadding:0)+this.axisConfig.labelPadding,fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"})))}),this.showTick){const r=this.boundingRect.y;e.push({type:"path",groupTexts:["top-axis","ticks"],data:this.getTickValues().map((n=>({path:`M ${this.getScaleValue(n)},${r+this.boundingRect.height-(this.showAxisLine?this.axisConfig.axisLineWidth:0)} L ${this.getScaleValue(n)},${r+this.boundingRect.height-this.axisConfig.tickLength-(this.showAxisLine?this.axisConfig.axisLineWidth:0)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth})))})}return this.showTitle&&e.push({type:"text",groupTexts:["top-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.axisConfig.titlePadding,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElements(){if(this.axisPosition==="left")return this.getDrawableElementsForLeftAxis();if(this.axisPosition==="right")throw Error("Drawing of right axis is not implemented");return this.axisPosition==="bottom"?this.getDrawableElementsForBottomAxis():this.axisPosition==="top"?this.getDrawableElementsForTopAxis():[]}},l(y0,"BaseAxis"),y0),v0,m6e=(v0=class extends Xne{constructor(e,r,n,i,a){super(e,i,a,r),this.categories=n,this.scale=M4().domain(this.categories).range(this.getRange())}setRange(e){super.setRange(e)}recalculateScale(){this.scale=M4().domain(this.categories).range(this.getRange()).paddingInner(1).paddingOuter(0).align(.5),ee.trace("BandAxis axis final categories, range: ",this.categories,this.getRange())}getTickValues(){return this.categories}getScaleValue(e){return this.scale(e)??this.getRange()[0]}},l(v0,"BandAxis"),v0),x0,y6e=(x0=class extends Xne{constructor(e,r,n,i,a){super(e,i,a,r),this.domain=n,this.scale=Fu().domain(this.domain).range(this.getRange())}getTickValues(){return this.scale.ticks()}recalculateScale(){const e=[...this.domain];this.axisPosition==="left"&&e.reverse(),this.scale=Fu().domain(e).range(this.getRange())}getScaleValue(e){return this.scale(e)}},l(x0,"LinearAxis"),x0);function eS(t,e,r,n){const i=new Hne(n);return dN(t)?new m6e(e,r,t.categories,t.title,i):new y6e(e,r,[t.min,t.max],t.title,i)}l(eS,"getAxis");var b0,v6e=(b0=class{constructor(e,r,n,i){this.textDimensionCalculator=e,this.chartConfig=r,this.chartData=n,this.chartThemeConfig=i,this.boundingRect={x:0,y:0,width:0,height:0},this.showChartTitle=!1}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}calculateSpace(e){const r=this.textDimensionCalculator.getMaxDimension([this.chartData.title],this.chartConfig.titleFontSize),n=Math.max(r.width,e.width),i=r.height+2*this.chartConfig.titlePadding;return r.width<=n&&r.height<=i&&this.chartConfig.showTitle&&this.chartData.title&&(this.boundingRect.width=n,this.boundingRect.height=i,this.showChartTitle=!0),{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){const e=[];return this.showChartTitle&&e.push({groupTexts:["chart-title"],type:"text",data:[{fontSize:this.chartConfig.titleFontSize,text:this.chartData.title,verticalPos:"middle",horizontalPos:"center",x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.chartThemeConfig.titleColor,rotation:0}]}),e}},l(b0,"ChartTitle"),b0);function Kne(t,e,r,n){const i=new Hne(n);return new v6e(i,t,e,r)}l(Kne,"getChartTitleComponent");var w0,x6e=(w0=class{constructor(e,r,n,i,a){this.plotData=e,this.xAxis=r,this.yAxis=n,this.orientation=i,this.plotIndex=a}getDrawableElement(){const e=this.plotData.data.map((n=>[this.xAxis.getScaleValue(n[0]),this.yAxis.getScaleValue(n[1])]));let r;return r=this.orientation==="horizontal"?P0().y((n=>n[0])).x((n=>n[1]))(e):P0().x((n=>n[0])).y((n=>n[1]))(e),r?[{groupTexts:["plot",`line-plot-${this.plotIndex}`],type:"path",data:[{path:r,strokeFill:this.plotData.strokeFill,strokeWidth:this.plotData.strokeWidth}]}]:[]}},l(w0,"LinePlot"),w0),k0,b6e=(k0=class{constructor(e,r,n,i,a,s){this.barData=e,this.boundingRect=r,this.xAxis=n,this.yAxis=i,this.orientation=a,this.plotIndex=s}getDrawableElement(){const e=this.barData.data.map((i=>[this.xAxis.getScaleValue(i[0]),this.yAxis.getScaleValue(i[1])])),r=.95*Math.min(2*this.xAxis.getAxisOuterPadding(),this.xAxis.getTickDistance()),n=r/2;return this.orientation==="horizontal"?[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:e.map((i=>({x:this.boundingRect.x,y:i[0]-n,height:r,width:i[1]-this.boundingRect.x,fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill})))}]:[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:e.map((i=>({x:i[0]-n,y:i[1],width:r,height:this.boundingRect.y+this.boundingRect.height-i[1],fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill})))}]}},l(k0,"BarPlot"),k0),T0,w6e=(T0=class{constructor(e,r,n){this.chartConfig=e,this.chartData=r,this.chartThemeConfig=n,this.boundingRect={x:0,y:0,width:0,height:0}}setAxes(e,r){this.xAxis=e,this.yAxis=r}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}calculateSpace(e){return this.boundingRect.width=e.width,this.boundingRect.height=e.height,{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){if(!this.xAxis||!this.yAxis)throw Error("Axes must be passed to render Plots");const e=[];for(const[r,n]of this.chartData.plots.entries())switch(n.type){case"line":{const i=new x6e(n,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,r);e.push(...i.getDrawableElement())}break;case"bar":{const i=new b6e(n,this.boundingRect,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,r);e.push(...i.getDrawableElement())}}return e}},l(T0,"BasePlot"),T0);function Zne(t,e,r){return new w6e(t,e,r)}l(Zne,"getPlotComponent");var Qne,E0,k6e=(E0=class{constructor(e,r,n,i){this.chartConfig=e,this.chartData=r,this.componentStore={title:Kne(e,r,n,i),plot:Zne(e,r,n),xAxis:eS(r.xAxis,e.xAxis,{titleColor:n.xAxisTitleColor,labelColor:n.xAxisLabelColor,tickColor:n.xAxisTickColor,axisLineColor:n.xAxisLineColor},i),yAxis:eS(r.yAxis,e.yAxis,{titleColor:n.yAxisTitleColor,labelColor:n.yAxisLabelColor,tickColor:n.yAxisTickColor,axisLineColor:n.yAxisLineColor},i)}}calculateVerticalSpace(){let e=this.chartConfig.width,r=this.chartConfig.height,n=0,i=0,a=Math.floor(e*this.chartConfig.plotReservedSpacePercent/100),s=Math.floor(r*this.chartConfig.plotReservedSpacePercent/100),o=this.componentStore.plot.calculateSpace({width:a,height:s});e-=o.width,r-=o.height,o=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:r}),i=o.height,r-=o.height,this.componentStore.xAxis.setAxisPosition("bottom"),o=this.componentStore.xAxis.calculateSpace({width:e,height:r}),r-=o.height,this.componentStore.yAxis.setAxisPosition("left"),o=this.componentStore.yAxis.calculateSpace({width:e,height:r}),n=o.width,e-=o.width,e>0&&(a+=e,e=0),r>0&&(s+=r,r=0),this.componentStore.plot.calculateSpace({width:a,height:s}),this.componentStore.plot.setBoundingBoxXY({x:n,y:i}),this.componentStore.xAxis.setRange([n,n+a]),this.componentStore.xAxis.setBoundingBoxXY({x:n,y:i+s}),this.componentStore.yAxis.setRange([i,i+s]),this.componentStore.yAxis.setBoundingBoxXY({x:0,y:i}),this.chartData.plots.some((u=>JC(u)))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateHorizontalSpace(){let e=this.chartConfig.width,r=this.chartConfig.height,n=0,i=0,a=0,s=Math.floor(e*this.chartConfig.plotReservedSpacePercent/100),o=Math.floor(r*this.chartConfig.plotReservedSpacePercent/100),u=this.componentStore.plot.calculateSpace({width:s,height:o});e-=u.width,r-=u.height,u=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:r}),n=u.height,r-=u.height,this.componentStore.xAxis.setAxisPosition("left"),u=this.componentStore.xAxis.calculateSpace({width:e,height:r}),e-=u.width,i=u.width,this.componentStore.yAxis.setAxisPosition("top"),u=this.componentStore.yAxis.calculateSpace({width:e,height:r}),r-=u.height,a=n+u.height,e>0&&(s+=e,e=0),r>0&&(o+=r,r=0),this.componentStore.plot.calculateSpace({width:s,height:o}),this.componentStore.plot.setBoundingBoxXY({x:i,y:a}),this.componentStore.yAxis.setRange([i,i+s]),this.componentStore.yAxis.setBoundingBoxXY({x:i,y:n}),this.componentStore.xAxis.setRange([a,a+o]),this.componentStore.xAxis.setBoundingBoxXY({x:0,y:a}),this.chartData.plots.some((h=>JC(h)))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateSpace(){this.chartConfig.chartOrientation==="horizontal"?this.calculateHorizontalSpace():this.calculateVerticalSpace()}getDrawableElement(){this.calculateSpace();const e=[];this.componentStore.plot.setAxes(this.componentStore.xAxis,this.componentStore.yAxis);for(const r of Object.values(this.componentStore))e.push(...r.getDrawableElements());return e}},l(E0,"Orchestrator"),E0),_0,T6e=(_0=class{static build(e,r,n,i){return new k6e(e,r,n,i).getDrawableElement()}},l(_0,"XYChartBuilder"),_0),X2=0,Hw=gN(),K2=fN(),Er=Jne(),tS=K2.plotColorPalette.split(",").map((t=>t.trim())),Xw=!1,pN=!1;function fN(){const t=T6(),e=Sr();return ts(t.xyChart,e.themeVariables.xyChart)}function gN(){const t=Sr();return ts(or.xyChart,t.xyChart)}function Jne(){return{yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]}}function Kw(t){const e=Sr();return Ir(t.trim(),e)}function eie(t){Qne=t}function tie(t){Hw.chartOrientation=t==="horizontal"?"horizontal":"vertical"}function rie(t){Er.xAxis.title=Kw(t.text)}function mN(t,e){Er.xAxis={type:"linear",title:Er.xAxis.title,min:t,max:e},Xw=!0}function nie(t){Er.xAxis={type:"band",title:Er.xAxis.title,categories:t.map((e=>Kw(e.text)))},Xw=!0}function iie(t){Er.yAxis.title=Kw(t.text)}function aie(t,e){Er.yAxis={type:"linear",title:Er.yAxis.title,min:t,max:e},pN=!0}function sie(t){const e=Math.min(...t),r=Math.max(...t),n=tp(Er.yAxis)?Er.yAxis.min:1/0,i=tp(Er.yAxis)?Er.yAxis.max:-1/0;Er.yAxis={type:"linear",title:Er.yAxis.title,min:Math.min(n,e),max:Math.max(i,r)}}function yN(t){let e=[];if(t.length===0)return e;if(!Xw){const r=tp(Er.xAxis)?Er.xAxis.min:1/0,n=tp(Er.xAxis)?Er.xAxis.max:-1/0;mN(Math.min(r,1),Math.max(n,t.length))}if(pN||sie(t),dN(Er.xAxis)&&(e=Er.xAxis.categories.map(((r,n)=>[r,t[n]]))),tp(Er.xAxis)){const r=Er.xAxis.min,n=Er.xAxis.max,i=(n-r)/(t.length-1),a=[];for(let s=r;s<=n;s+=i)a.push(`${s}`);e=a.map(((s,o)=>[s,t[o]]))}return e}function vN(t){return tS[t===0?0:t%tS.length]}function oie(t,e){const r=yN(e);Er.plots.push({type:"line",strokeFill:vN(X2),strokeWidth:2,data:r}),X2++}function lie(t,e){const r=yN(e);Er.plots.push({type:"bar",fill:vN(X2),data:r}),X2++}function cie(){if(Er.plots.length===0)throw Error("No Plot to render, please provide a plot with some data");return Er.title=Wn(),T6e.build(Hw,Er,K2,Qne)}function uie(){return K2}function hie(){return Hw}l(fN,"getChartDefaultThemeConfig"),l(gN,"getChartDefaultConfig"),l(Jne,"getChartDefaultData"),l(Kw,"textSanitizer"),l(eie,"setTmpSVGG"),l(tie,"setOrientation"),l(rie,"setXAxisTitle"),l(mN,"setXAxisRangeData"),l(nie,"setXAxisBand"),l(iie,"setYAxisTitle"),l(aie,"setYAxisRangeData"),l(sie,"setYAxisRangeFromPlotData"),l(yN,"transformDataWithoutCategory"),l(vN,"getPlotColorFromPalette"),l(oie,"setLineData"),l(lie,"setBarData"),l(cie,"getDrawableElem"),l(uie,"getChartThemeConfig"),l(hie,"getChartConfig");var E6e=l((function(){jn(),X2=0,Hw=gN(),Er={yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]},K2=fN(),tS=K2.plotColorPalette.split(",").map((t=>t.trim())),Xw=!1,pN=!1}),"clear"),_6e={getDrawableElem:cie,clear:E6e,setAccTitle:zn,getAccTitle:Xn,setDiagramTitle:di,getDiagramTitle:Wn,getAccDescription:Zn,setAccDescription:Kn,setOrientation:tie,setXAxisTitle:rie,setXAxisRangeData:mN,setXAxisBand:nie,setYAxisTitle:iie,setYAxisRangeData:aie,setLineData:oie,setBarData:lie,setTmpSVGG:eie,getChartThemeConfig:uie,getChartConfig:hie},C6e=l(((t,e,r,n)=>{const i=n.db,a=i.getChartThemeConfig(),s=i.getChartConfig();function o(v){return v==="top"?"text-before-edge":"middle"}function u(v){return v==="left"?"start":v==="right"?"end":"middle"}function h(v){return`translate(${v.x}, ${v.y}) rotate(${v.rotation||0})`}l(o,"getDominantBaseLine"),l(u,"getTextAnchor"),l(h,"getTextTransformation"),ee.debug(`Rendering xychart chart
`+t);const d=tl(e),p=d.append("g").attr("class","main"),f=p.append("rect").attr("width",s.width).attr("height",s.height).attr("class","background");da(d,s.height,s.width,!0),d.attr("viewBox",`0 0 ${s.width} ${s.height}`),f.attr("fill",a.backgroundColor),i.setTmpSVGG(d.append("g").attr("class","mermaid-tmp-group"));const g=i.getDrawableElem(),m={};function y(v){let x=p,b="";for(const[w]of v.entries()){let T=p;w>0&&m[b]&&(T=m[b]),b+=v[w],x=m[b],x||(x=m[b]=T.append("g").attr("class",v[w]))}return x}l(y,"getGroup");for(const v of g){if(v.data.length===0)continue;const x=y(v.groupTexts);switch(v.type){case"rect":x.selectAll("rect").data(v.data).enter().append("rect").attr("x",(b=>b.x)).attr("y",(b=>b.y)).attr("width",(b=>b.width)).attr("height",(b=>b.height)).attr("fill",(b=>b.fill)).attr("stroke",(b=>b.strokeFill)).attr("stroke-width",(b=>b.strokeWidth));break;case"text":x.selectAll("text").data(v.data).enter().append("text").attr("x",0).attr("y",0).attr("fill",(b=>b.fill)).attr("font-size",(b=>b.fontSize)).attr("dominant-baseline",(b=>o(b.verticalPos))).attr("text-anchor",(b=>u(b.horizontalPos))).attr("transform",(b=>h(b))).text((b=>b.text));break;case"path":x.selectAll("path").data(v.data).enter().append("path").attr("d",(b=>b.path)).attr("fill",(b=>b.fill?b.fill:"none")).attr("stroke",(b=>b.strokeFill)).attr("stroke-width",(b=>b.strokeWidth))}}}),"draw"),S6e={parser:g6e,db:_6e,renderer:{draw:C6e}},A6e=Object.freeze({__proto__:null,diagram:S6e}),rS=(function(){var t=l((function(ge,G,le,V){for(le=le||{},V=ge.length;V--;le[ge[V]]=G);return le}),"o"),e=[1,3],r=[1,4],n=[1,5],i=[1,6],a=[5,6,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,77,89,90],s=[1,22],o=[2,7],u=[1,26],h=[1,27],d=[1,28],p=[1,29],f=[1,33],g=[1,34],m=[1,35],y=[1,36],v=[1,37],x=[1,38],b=[1,24],w=[1,31],T=[1,32],k=[1,30],C=[1,39],E=[1,40],_=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,77,89,90],S=[1,61],N=[89,90],O=[5,8,9,11,13,21,22,23,24,27,29,41,42,43,44,45,46,54,61,63,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],B=[27,29],L=[1,70],I=[1,71],A=[1,72],M=[1,73],D=[1,74],R=[1,75],P=[1,76],$=[1,83],z=[1,80],q=[1,84],W=[1,85],Q=[1,86],te=[1,87],oe=[1,88],re=[1,89],H=[1,90],K=[1,91],ie=[1,92],ne=[5,8,9,11,13,21,22,23,24,27,41,42,43,44,45,46,54,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],J=[63,64],ue=[1,101],Y=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,76,77,89,90],se=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],de=[1,110],ce=[1,106],Ee=[1,107],ve=[1,108],De=[1,109],Ue=[1,111],ze=[1,116],Ge=[1,117],$e=[1,114],Pe=[1,115],j={trace:l((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,acc_title:9,acc_title_value:10,acc_descr:11,acc_descr_value:12,acc_descr_multiline_value:13,requirementDef:14,elementDef:15,relationshipDef:16,direction:17,styleStatement:18,classDefStatement:19,classStatement:20,direction_tb:21,direction_bt:22,direction_rl:23,direction_lr:24,requirementType:25,requirementName:26,STRUCT_START:27,requirementBody:28,STYLE_SEPARATOR:29,idList:30,ID:31,COLONSEP:32,id:33,TEXT:34,text:35,RISK:36,riskLevel:37,VERIFYMTHD:38,verifyType:39,STRUCT_STOP:40,REQUIREMENT:41,FUNCTIONAL_REQUIREMENT:42,INTERFACE_REQUIREMENT:43,PERFORMANCE_REQUIREMENT:44,PHYSICAL_REQUIREMENT:45,DESIGN_CONSTRAINT:46,LOW_RISK:47,MED_RISK:48,HIGH_RISK:49,VERIFY_ANALYSIS:50,VERIFY_DEMONSTRATION:51,VERIFY_INSPECTION:52,VERIFY_TEST:53,ELEMENT:54,elementName:55,elementBody:56,TYPE:57,type:58,DOCREF:59,ref:60,END_ARROW_L:61,relationship:62,LINE:63,END_ARROW_R:64,CONTAINS:65,COPIES:66,DERIVES:67,SATISFIES:68,VERIFIES:69,REFINES:70,TRACES:71,CLASSDEF:72,stylesOpt:73,CLASS:74,ALPHA:75,COMMA:76,STYLE:77,style:78,styleComponent:79,NUM:80,COLON:81,UNIT:82,SPACE:83,BRKT:84,PCT:85,MINUS:86,LABEL:87,SEMICOLON:88,unqString:89,qString:90,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",9:"acc_title",10:"acc_title_value",11:"acc_descr",12:"acc_descr_value",13:"acc_descr_multiline_value",21:"direction_tb",22:"direction_bt",23:"direction_rl",24:"direction_lr",27:"STRUCT_START",29:"STYLE_SEPARATOR",31:"ID",32:"COLONSEP",34:"TEXT",36:"RISK",38:"VERIFYMTHD",40:"STRUCT_STOP",41:"REQUIREMENT",42:"FUNCTIONAL_REQUIREMENT",43:"INTERFACE_REQUIREMENT",44:"PERFORMANCE_REQUIREMENT",45:"PHYSICAL_REQUIREMENT",46:"DESIGN_CONSTRAINT",47:"LOW_RISK",48:"MED_RISK",49:"HIGH_RISK",50:"VERIFY_ANALYSIS",51:"VERIFY_DEMONSTRATION",52:"VERIFY_INSPECTION",53:"VERIFY_TEST",54:"ELEMENT",57:"TYPE",59:"DOCREF",61:"END_ARROW_L",63:"LINE",64:"END_ARROW_R",65:"CONTAINS",66:"COPIES",67:"DERIVES",68:"SATISFIES",69:"VERIFIES",70:"REFINES",71:"TRACES",72:"CLASSDEF",74:"CLASS",75:"ALPHA",76:"COMMA",77:"STYLE",80:"NUM",81:"COLON",82:"UNIT",83:"SPACE",84:"BRKT",85:"PCT",86:"MINUS",87:"LABEL",88:"SEMICOLON",89:"unqString",90:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,2],[4,2],[4,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[17,1],[17,1],[17,1],[17,1],[14,5],[14,7],[28,5],[28,5],[28,5],[28,5],[28,2],[28,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[37,1],[37,1],[37,1],[39,1],[39,1],[39,1],[39,1],[15,5],[15,7],[56,5],[56,5],[56,2],[56,1],[16,5],[16,5],[62,1],[62,1],[62,1],[62,1],[62,1],[62,1],[62,1],[19,3],[20,3],[20,3],[30,1],[30,3],[30,1],[30,3],[18,3],[73,1],[73,3],[78,1],[78,2],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[26,1],[26,1],[33,1],[33,1],[35,1],[35,1],[55,1],[55,1],[58,1],[58,1],[60,1],[60,1]],performAction:l((function(ge,G,le,V,me,he,_e){var Ce=he.length-1;switch(me){case 4:this.$=he[Ce].trim(),V.setAccTitle(this.$);break;case 5:case 6:this.$=he[Ce].trim(),V.setAccDescription(this.$);break;case 7:this.$=[];break;case 17:V.setDirection("TB");break;case 18:V.setDirection("BT");break;case 19:V.setDirection("RL");break;case 20:V.setDirection("LR");break;case 21:V.addRequirement(he[Ce-3],he[Ce-4]);break;case 22:V.addRequirement(he[Ce-5],he[Ce-6]),V.setClass([he[Ce-5]],he[Ce-3]);break;case 23:V.setNewReqId(he[Ce-2]);break;case 24:V.setNewReqText(he[Ce-2]);break;case 25:V.setNewReqRisk(he[Ce-2]);break;case 26:V.setNewReqVerifyMethod(he[Ce-2]);break;case 29:this.$=V.RequirementType.REQUIREMENT;break;case 30:this.$=V.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 31:this.$=V.RequirementType.INTERFACE_REQUIREMENT;break;case 32:this.$=V.RequirementType.PERFORMANCE_REQUIREMENT;break;case 33:this.$=V.RequirementType.PHYSICAL_REQUIREMENT;break;case 34:this.$=V.RequirementType.DESIGN_CONSTRAINT;break;case 35:this.$=V.RiskLevel.LOW_RISK;break;case 36:this.$=V.RiskLevel.MED_RISK;break;case 37:this.$=V.RiskLevel.HIGH_RISK;break;case 38:this.$=V.VerifyType.VERIFY_ANALYSIS;break;case 39:this.$=V.VerifyType.VERIFY_DEMONSTRATION;break;case 40:this.$=V.VerifyType.VERIFY_INSPECTION;break;case 41:this.$=V.VerifyType.VERIFY_TEST;break;case 42:V.addElement(he[Ce-3]);break;case 43:V.addElement(he[Ce-5]),V.setClass([he[Ce-5]],he[Ce-3]);break;case 44:V.setNewElementType(he[Ce-2]);break;case 45:V.setNewElementDocRef(he[Ce-2]);break;case 48:V.addRelationship(he[Ce-2],he[Ce],he[Ce-4]);break;case 49:V.addRelationship(he[Ce-2],he[Ce-4],he[Ce]);break;case 50:this.$=V.Relationships.CONTAINS;break;case 51:this.$=V.Relationships.COPIES;break;case 52:this.$=V.Relationships.DERIVES;break;case 53:this.$=V.Relationships.SATISFIES;break;case 54:this.$=V.Relationships.VERIFIES;break;case 55:this.$=V.Relationships.REFINES;break;case 56:this.$=V.Relationships.TRACES;break;case 57:this.$=he[Ce-2],V.defineClass(he[Ce-1],he[Ce]);break;case 58:V.setClass(he[Ce-1],he[Ce]);break;case 59:V.setClass([he[Ce-2]],he[Ce]);break;case 60:case 62:case 65:this.$=[he[Ce]];break;case 61:case 63:this.$=he[Ce-2].concat([he[Ce]]);break;case 64:this.$=he[Ce-2],V.setCssStyle(he[Ce-1],he[Ce]);break;case 66:he[Ce-2].push(he[Ce]),this.$=he[Ce-2];break;case 68:this.$=he[Ce-1]+he[Ce]}}),"anonymous"),table:[{3:1,4:2,6:e,9:r,11:n,13:i},{1:[3]},{3:8,4:2,5:[1,7],6:e,9:r,11:n,13:i},{5:[1,9]},{10:[1,10]},{12:[1,11]},t(a,[2,6]),{3:12,4:2,6:e,9:r,11:n,13:i},{1:[2,2]},{4:17,5:s,7:13,8:o,9:r,11:n,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:u,22:h,23:d,24:p,25:23,33:25,41:f,42:g,43:m,44:y,45:v,46:x,54:b,72:w,74:T,77:k,89:C,90:E},t(a,[2,4]),t(a,[2,5]),{1:[2,1]},{8:[1,41]},{4:17,5:s,7:42,8:o,9:r,11:n,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:u,22:h,23:d,24:p,25:23,33:25,41:f,42:g,43:m,44:y,45:v,46:x,54:b,72:w,74:T,77:k,89:C,90:E},{4:17,5:s,7:43,8:o,9:r,11:n,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:u,22:h,23:d,24:p,25:23,33:25,41:f,42:g,43:m,44:y,45:v,46:x,54:b,72:w,74:T,77:k,89:C,90:E},{4:17,5:s,7:44,8:o,9:r,11:n,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:u,22:h,23:d,24:p,25:23,33:25,41:f,42:g,43:m,44:y,45:v,46:x,54:b,72:w,74:T,77:k,89:C,90:E},{4:17,5:s,7:45,8:o,9:r,11:n,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:u,22:h,23:d,24:p,25:23,33:25,41:f,42:g,43:m,44:y,45:v,46:x,54:b,72:w,74:T,77:k,89:C,90:E},{4:17,5:s,7:46,8:o,9:r,11:n,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:u,22:h,23:d,24:p,25:23,33:25,41:f,42:g,43:m,44:y,45:v,46:x,54:b,72:w,74:T,77:k,89:C,90:E},{4:17,5:s,7:47,8:o,9:r,11:n,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:u,22:h,23:d,24:p,25:23,33:25,41:f,42:g,43:m,44:y,45:v,46:x,54:b,72:w,74:T,77:k,89:C,90:E},{4:17,5:s,7:48,8:o,9:r,11:n,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:u,22:h,23:d,24:p,25:23,33:25,41:f,42:g,43:m,44:y,45:v,46:x,54:b,72:w,74:T,77:k,89:C,90:E},{4:17,5:s,7:49,8:o,9:r,11:n,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:u,22:h,23:d,24:p,25:23,33:25,41:f,42:g,43:m,44:y,45:v,46:x,54:b,72:w,74:T,77:k,89:C,90:E},{4:17,5:s,7:50,8:o,9:r,11:n,13:i,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:u,22:h,23:d,24:p,25:23,33:25,41:f,42:g,43:m,44:y,45:v,46:x,54:b,72:w,74:T,77:k,89:C,90:E},{26:51,89:[1,52],90:[1,53]},{55:54,89:[1,55],90:[1,56]},{29:[1,59],61:[1,57],63:[1,58]},t(_,[2,17]),t(_,[2,18]),t(_,[2,19]),t(_,[2,20]),{30:60,33:62,75:S,89:C,90:E},{30:63,33:62,75:S,89:C,90:E},{30:64,33:62,75:S,89:C,90:E},t(N,[2,29]),t(N,[2,30]),t(N,[2,31]),t(N,[2,32]),t(N,[2,33]),t(N,[2,34]),t(O,[2,81]),t(O,[2,82]),{1:[2,3]},{8:[2,8]},{8:[2,9]},{8:[2,10]},{8:[2,11]},{8:[2,12]},{8:[2,13]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{27:[1,65],29:[1,66]},t(B,[2,79]),t(B,[2,80]),{27:[1,67],29:[1,68]},t(B,[2,85]),t(B,[2,86]),{62:69,65:L,66:I,67:A,68:M,69:D,70:R,71:P},{62:77,65:L,66:I,67:A,68:M,69:D,70:R,71:P},{30:78,33:62,75:S,89:C,90:E},{73:79,75:$,76:z,78:81,79:82,80:q,81:W,82:Q,83:te,84:oe,85:re,86:H,87:K,88:ie},t(ne,[2,60]),t(ne,[2,62]),{73:93,75:$,76:z,78:81,79:82,80:q,81:W,82:Q,83:te,84:oe,85:re,86:H,87:K,88:ie},{30:94,33:62,75:S,76:z,89:C,90:E},{5:[1,95]},{30:96,33:62,75:S,89:C,90:E},{5:[1,97]},{30:98,33:62,75:S,89:C,90:E},{63:[1,99]},t(J,[2,50]),t(J,[2,51]),t(J,[2,52]),t(J,[2,53]),t(J,[2,54]),t(J,[2,55]),t(J,[2,56]),{64:[1,100]},t(_,[2,59],{76:z}),t(_,[2,64],{76:ue}),{33:103,75:[1,102],89:C,90:E},t(Y,[2,65],{79:104,75:$,80:q,81:W,82:Q,83:te,84:oe,85:re,86:H,87:K,88:ie}),t(se,[2,67]),t(se,[2,69]),t(se,[2,70]),t(se,[2,71]),t(se,[2,72]),t(se,[2,73]),t(se,[2,74]),t(se,[2,75]),t(se,[2,76]),t(se,[2,77]),t(se,[2,78]),t(_,[2,57],{76:ue}),t(_,[2,58],{76:z}),{5:de,28:105,31:ce,34:Ee,36:ve,38:De,40:Ue},{27:[1,112],76:z},{5:ze,40:Ge,56:113,57:$e,59:Pe},{27:[1,118],76:z},{33:119,89:C,90:E},{33:120,89:C,90:E},{75:$,78:121,79:82,80:q,81:W,82:Q,83:te,84:oe,85:re,86:H,87:K,88:ie},t(ne,[2,61]),t(ne,[2,63]),t(se,[2,68]),t(_,[2,21]),{32:[1,122]},{32:[1,123]},{32:[1,124]},{32:[1,125]},{5:de,28:126,31:ce,34:Ee,36:ve,38:De,40:Ue},t(_,[2,28]),{5:[1,127]},t(_,[2,42]),{32:[1,128]},{32:[1,129]},{5:ze,40:Ge,56:130,57:$e,59:Pe},t(_,[2,47]),{5:[1,131]},t(_,[2,48]),t(_,[2,49]),t(Y,[2,66],{79:104,75:$,80:q,81:W,82:Q,83:te,84:oe,85:re,86:H,87:K,88:ie}),{33:132,89:C,90:E},{35:133,89:[1,134],90:[1,135]},{37:136,47:[1,137],48:[1,138],49:[1,139]},{39:140,50:[1,141],51:[1,142],52:[1,143],53:[1,144]},t(_,[2,27]),{5:de,28:145,31:ce,34:Ee,36:ve,38:De,40:Ue},{58:146,89:[1,147],90:[1,148]},{60:149,89:[1,150],90:[1,151]},t(_,[2,46]),{5:ze,40:Ge,56:152,57:$e,59:Pe},{5:[1,153]},{5:[1,154]},{5:[2,83]},{5:[2,84]},{5:[1,155]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[1,156]},{5:[2,38]},{5:[2,39]},{5:[2,40]},{5:[2,41]},t(_,[2,22]),{5:[1,157]},{5:[2,87]},{5:[2,88]},{5:[1,158]},{5:[2,89]},{5:[2,90]},t(_,[2,43]),{5:de,28:159,31:ce,34:Ee,36:ve,38:De,40:Ue},{5:de,28:160,31:ce,34:Ee,36:ve,38:De,40:Ue},{5:de,28:161,31:ce,34:Ee,36:ve,38:De,40:Ue},{5:de,28:162,31:ce,34:Ee,36:ve,38:De,40:Ue},{5:ze,40:Ge,56:163,57:$e,59:Pe},{5:ze,40:Ge,56:164,57:$e,59:Pe},t(_,[2,23]),t(_,[2,24]),t(_,[2,25]),t(_,[2,26]),t(_,[2,44]),t(_,[2,45])],defaultActions:{8:[2,2],12:[2,1],41:[2,3],42:[2,8],43:[2,9],44:[2,10],45:[2,11],46:[2,12],47:[2,13],48:[2,14],49:[2,15],50:[2,16],134:[2,83],135:[2,84],137:[2,35],138:[2,36],139:[2,37],141:[2,38],142:[2,39],143:[2,40],144:[2,41],147:[2,87],148:[2,88],150:[2,89],151:[2,90]},parseError:l((function(ge,G){if(!G.recoverable){var le=new Error(ge);throw le.hash=G,le}this.trace(ge)}),"parseError"),parse:l((function(ge){var G=this,le=[0],V=[],me=[null],he=[],_e=this.table,Ce="",Te=0,Re=0,Le=2,ot=1,Tt=he.slice.call(arguments,1),Fe=Object.create(this.lexer),gt={yy:{}};for(var Qe in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Qe)&&(gt.yy[Qe]=this.yy[Qe]);Fe.setInput(ge,gt.yy),gt.yy.lexer=Fe,gt.yy.parser=this,Fe.yylloc===void 0&&(Fe.yylloc={});var Be=Fe.yylloc;he.push(Be);var rt=Fe.options&&Fe.options.ranges;function lt(wt){le.length=le.length-2*wt,me.length=me.length-wt,he.length=he.length-wt}function Je(){var wt;return typeof(wt=V.pop()||Fe.lex()||ot)!="number"&&(wt instanceof Array&&(wt=(V=wt).pop()),wt=G.symbols_[wt]||wt),wt}typeof gt.yy.parseError=="function"?this.parseError=gt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,l(lt,"popStack"),l(Je,"lex");for(var _t,it,pt,Ye,je,mt,at,Et,xt={};;){if(it=le[le.length-1],this.defaultActions[it]?pt=this.defaultActions[it]:(_t==null&&(_t=Je()),pt=_e[it]&&_e[it][_t]),pt===void 0||!pt.length||!pt[0]){var rn="";for(je in Et=[],_e[it])this.terminals_[je]&&je>Le&&Et.push("'"+this.terminals_[je]+"'");rn=Fe.showPosition?"Parse error on line "+(Te+1)+`:
`+Fe.showPosition()+`
Expecting `+Et.join(", ")+", got '"+(this.terminals_[_t]||_t)+"'":"Parse error on line "+(Te+1)+": Unexpected "+(_t==ot?"end of input":"'"+(this.terminals_[_t]||_t)+"'"),this.parseError(rn,{text:Fe.match,token:this.terminals_[_t]||_t,line:Fe.yylineno,loc:Be,expected:Et})}if(pt[0]instanceof Array&&pt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+it+", token: "+_t);switch(pt[0]){case 1:le.push(_t),me.push(Fe.yytext),he.push(Fe.yylloc),le.push(pt[1]),_t=null,Re=Fe.yyleng,Ce=Fe.yytext,Te=Fe.yylineno,Be=Fe.yylloc;break;case 2:if(mt=this.productions_[pt[1]][1],xt.$=me[me.length-mt],xt._$={first_line:he[he.length-(mt||1)].first_line,last_line:he[he.length-1].last_line,first_column:he[he.length-(mt||1)].first_column,last_column:he[he.length-1].last_column},rt&&(xt._$.range=[he[he.length-(mt||1)].range[0],he[he.length-1].range[1]]),(Ye=this.performAction.apply(xt,[Ce,Re,Te,gt.yy,pt[1],me,he].concat(Tt)))!==void 0)return Ye;mt&&(le=le.slice(0,-1*mt*2),me=me.slice(0,-1*mt),he=he.slice(0,-1*mt)),le.push(this.productions_[pt[1]][0]),me.push(xt.$),he.push(xt._$),at=_e[le[le.length-2]][le[le.length-1]],le.push(at);break;case 3:return!0}}return!0}),"parse")},pe=(function(){var ge={EOF:1,parseError:l((function(G,le){if(!this.yy.parser)throw new Error(G);this.yy.parser.parseError(G,le)}),"parseError"),setInput:l((function(G,le){return this.yy=le||this.yy||{},this._input=G,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:l((function(){var G=this._input[0];return this.yytext+=G,this.yyleng++,this.offset++,this.match+=G,this.matched+=G,G.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),G}),"input"),unput:l((function(G){var le=G.length,V=G.split(/(?:\r\n?|\n)/g);this._input=G+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-le),this.offset-=le;var me=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),V.length-1&&(this.yylineno-=V.length-1);var he=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:V?(V.length===me.length?this.yylloc.first_column:0)+me[me.length-V.length].length-V[0].length:this.yylloc.first_column-le},this.options.ranges&&(this.yylloc.range=[he[0],he[0]+this.yyleng-le]),this.yyleng=this.yytext.length,this}),"unput"),more:l((function(){return this._more=!0,this}),"more"),reject:l((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:l((function(G){this.unput(this.match.slice(G))}),"less"),pastInput:l((function(){var G=this.matched.substr(0,this.matched.length-this.match.length);return(G.length>20?"...":"")+G.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:l((function(){var G=this.match;return G.length<20&&(G+=this._input.substr(0,20-G.length)),(G.substr(0,20)+(G.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:l((function(){var G=this.pastInput(),le=new Array(G.length+1).join("-");return G+this.upcomingInput()+`
`+le+"^"}),"showPosition"),test_match:l((function(G,le){var V,me,he;if(this.options.backtrack_lexer&&(he={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(he.yylloc.range=this.yylloc.range.slice(0))),(me=G[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=me.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:me?me[me.length-1].length-me[me.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+G[0].length},this.yytext+=G[0],this.match+=G[0],this.matches=G,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(G[0].length),this.matched+=G[0],V=this.performAction.call(this,this.yy,this,le,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),V)return V;if(this._backtrack){for(var _e in he)this[_e]=he[_e];return!1}return!1}),"test_match"),next:l((function(){if(this.done)return this.EOF;var G,le,V,me;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var he=this._currentRules(),_e=0;_e<he.length;_e++)if((V=this._input.match(this.rules[he[_e]]))&&(!le||V[0].length>le[0].length)){if(le=V,me=_e,this.options.backtrack_lexer){if((G=this.test_match(V,he[_e]))!==!1)return G;if(this._backtrack){le=!1;continue}return!1}if(!this.options.flex)break}return le?(G=this.test_match(le,he[me]))!==!1&&G:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:l((function(){var G=this.next();return G||this.lex()}),"lex"),begin:l((function(G){this.conditionStack.push(G)}),"begin"),popState:l((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:l((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:l((function(G){return(G=this.conditionStack.length-1-Math.abs(G||0))>=0?this.conditionStack[G]:"INITIAL"}),"topState"),pushState:l((function(G){this.begin(G)}),"pushState"),stateStackSize:l((function(){return this.conditionStack.length}),"stateStackSize"),options:{"case-insensitive":!0},performAction:l((function(G,le,V,me){switch(V){case 0:return"title";case 1:return this.begin("acc_title"),9;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),11;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:case 58:case 65:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:return 21;case 9:return 22;case 10:return 23;case 11:return 24;case 12:return 5;case 13:case 14:case 15:case 56:break;case 16:return 8;case 17:return 6;case 18:return 27;case 19:return 40;case 20:return 29;case 21:return 32;case 22:return 31;case 23:return 34;case 24:return 36;case 25:return 38;case 26:return 41;case 27:return 42;case 28:return 43;case 29:return 44;case 30:return 45;case 31:return 46;case 32:return 47;case 33:return 48;case 34:return 49;case 35:return 50;case 36:return 51;case 37:return 52;case 38:return 53;case 39:return 54;case 40:return 65;case 41:return 66;case 42:return 67;case 43:return 68;case 44:return 69;case 45:return 70;case 46:return 71;case 47:return 57;case 48:return 59;case 49:return this.begin("style"),77;case 50:case 68:return 75;case 51:return 81;case 52:return 88;case 53:return"PERCENT";case 54:return 86;case 55:return 84;case 57:case 64:this.begin("string");break;case 59:return this.begin("style"),72;case 60:return this.begin("style"),74;case 61:return 61;case 62:return 64;case 63:return 63;case 66:return"qString";case 67:return le.yytext=le.yytext.trim(),89;case 69:return 80;case 70:return 76}}),"anonymous"),rules:[/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::{3})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:style\b)/i,/^(?:\w+)/i,/^(?::)/i,/^(?:;)/i,/^(?:%)/i,/^(?:-)/i,/^(?:#)/i,/^(?: )/i,/^(?:["])/i,/^(?:\n)/i,/^(?:classDef\b)/i,/^(?:class\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^:,\r\n\{\<\>\-\=]*)/i,/^(?:\w+)/i,/^(?:[0-9]+)/i,/^(?:,)/i],conditions:{acc_descr_multiline:{rules:[6,7,68,69,70],inclusive:!1},acc_descr:{rules:[4,68,69,70],inclusive:!1},acc_title:{rules:[2,68,69,70],inclusive:!1},style:{rules:[50,51,52,53,54,55,56,57,58,68,69,70],inclusive:!1},unqString:{rules:[68,69,70],inclusive:!1},token:{rules:[68,69,70],inclusive:!1},string:{rules:[65,66,68,69,70],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,59,60,61,62,63,64,67,68,69,70],inclusive:!0}}};return ge})();function X(){this.yy={}}return j.lexer=pe,l(X,"Parser"),X.prototype=j,j.Parser=X,new X})();rS.parser=rS;var L6e=rS,C0,N6e=(C0=class{constructor(){this.relations=[],this.latestRequirement=this.getInitialRequirement(),this.requirements=new Map,this.latestElement=this.getInitialElement(),this.elements=new Map,this.classes=new Map,this.direction="TB",this.RequirementType={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},this.RiskLevel={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},this.VerifyType={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},this.Relationships={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},this.setAccTitle=zn,this.getAccTitle=Xn,this.setAccDescription=Kn,this.getAccDescription=Zn,this.setDiagramTitle=di,this.getDiagramTitle=Wn,this.getConfig=l((()=>ke().requirement),"getConfig"),this.clear(),this.setDirection=this.setDirection.bind(this),this.addRequirement=this.addRequirement.bind(this),this.setNewReqId=this.setNewReqId.bind(this),this.setNewReqRisk=this.setNewReqRisk.bind(this),this.setNewReqText=this.setNewReqText.bind(this),this.setNewReqVerifyMethod=this.setNewReqVerifyMethod.bind(this),this.addElement=this.addElement.bind(this),this.setNewElementType=this.setNewElementType.bind(this),this.setNewElementDocRef=this.setNewElementDocRef.bind(this),this.addRelationship=this.addRelationship.bind(this),this.setCssStyle=this.setCssStyle.bind(this),this.setClass=this.setClass.bind(this),this.defineClass=this.defineClass.bind(this),this.setAccTitle=this.setAccTitle.bind(this),this.setAccDescription=this.setAccDescription.bind(this)}getDirection(){return this.direction}setDirection(e){this.direction=e}resetLatestRequirement(){this.latestRequirement=this.getInitialRequirement()}resetLatestElement(){this.latestElement=this.getInitialElement()}getInitialRequirement(){return{requirementId:"",text:"",risk:"",verifyMethod:"",name:"",type:"",cssStyles:[],classes:["default"]}}getInitialElement(){return{name:"",type:"",docRef:"",cssStyles:[],classes:["default"]}}addRequirement(e,r){return this.requirements.has(e)||this.requirements.set(e,{name:e,type:r,requirementId:this.latestRequirement.requirementId,text:this.latestRequirement.text,risk:this.latestRequirement.risk,verifyMethod:this.latestRequirement.verifyMethod,cssStyles:[],classes:["default"]}),this.resetLatestRequirement(),this.requirements.get(e)}getRequirements(){return this.requirements}setNewReqId(e){this.latestRequirement!==void 0&&(this.latestRequirement.requirementId=e)}setNewReqText(e){this.latestRequirement!==void 0&&(this.latestRequirement.text=e)}setNewReqRisk(e){this.latestRequirement!==void 0&&(this.latestRequirement.risk=e)}setNewReqVerifyMethod(e){this.latestRequirement!==void 0&&(this.latestRequirement.verifyMethod=e)}addElement(e){return this.elements.has(e)||(this.elements.set(e,{name:e,type:this.latestElement.type,docRef:this.latestElement.docRef,cssStyles:[],classes:["default"]}),ee.info("Added new element: ",e)),this.resetLatestElement(),this.elements.get(e)}getElements(){return this.elements}setNewElementType(e){this.latestElement!==void 0&&(this.latestElement.type=e)}setNewElementDocRef(e){this.latestElement!==void 0&&(this.latestElement.docRef=e)}addRelationship(e,r,n){this.relations.push({type:e,src:r,dst:n})}getRelationships(){return this.relations}clear(){this.relations=[],this.resetLatestRequirement(),this.requirements=new Map,this.resetLatestElement(),this.elements=new Map,this.classes=new Map,jn()}setCssStyle(e,r){for(const n of e){const i=this.requirements.get(n)??this.elements.get(n);if(!r||!i)return;for(const a of r)a.includes(",")?i.cssStyles.push(...a.split(",")):i.cssStyles.push(a)}}setClass(e,r){for(const n of e){const i=this.requirements.get(n)??this.elements.get(n);if(i)for(const a of r){i.classes.push(a);const s=this.classes.get(a)?.styles;s&&i.cssStyles.push(...s)}}}defineClass(e,r){for(const n of e){let i=this.classes.get(n);i===void 0&&(i={id:n,styles:[],textStyles:[]},this.classes.set(n,i)),r&&r.forEach((function(a){if(/color/.exec(a)){const s=a.replace("fill","bgFill");i.textStyles.push(s)}i.styles.push(a)})),this.requirements.forEach((a=>{a.classes.includes(n)&&a.cssStyles.push(...r.flatMap((s=>s.split(","))))})),this.elements.forEach((a=>{a.classes.includes(n)&&a.cssStyles.push(...r.flatMap((s=>s.split(","))))}))}}getClasses(){return this.classes}getData(){const e=ke(),r=[],n=[];for(const i of this.requirements.values()){const a=i;a.id=i.name,a.cssStyles=i.cssStyles,a.cssClasses=i.classes.join(" "),a.shape="requirementBox",a.look=e.look,r.push(a)}for(const i of this.elements.values()){const a=i;a.shape="requirementBox",a.look=e.look,a.id=i.name,a.cssStyles=i.cssStyles,a.cssClasses=i.classes.join(" "),r.push(a)}for(const i of this.relations){let a=0;const s=i.type===this.Relationships.CONTAINS,o={id:`${i.src}-${i.dst}-${a}`,start:this.requirements.get(i.src)?.name??this.elements.get(i.src)?.name,end:this.requirements.get(i.dst)?.name??this.elements.get(i.dst)?.name,label:`&lt;&lt;${i.type}&gt;&gt;`,classes:"relationshipLine",style:["fill:none",s?"":"stroke-dasharray: 10,7"],labelpos:"c",thickness:"normal",type:"normal",pattern:s?"normal":"dashed",arrowTypeStart:s?"requirement_contains":"",arrowTypeEnd:s?"":"requirement_arrow",look:e.look};n.push(o),a++}return{nodes:r,edges:n,other:{},config:e,direction:this.getDirection()}}},l(C0,"RequirementDB"),C0),I6e=l((t=>`

  marker {
    fill: ${t.relationColor};
    stroke: ${t.relationColor};
  }

  marker.cross {
    stroke: ${t.lineColor};
  }

  svg {
    font-family: ${t.fontFamily};
    font-size: ${t.fontSize};
  }

  .reqBox {
    fill: ${t.requirementBackground};
    fill-opacity: 1.0;
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${t.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${t.relationLabelBackground};
    fill-opacity: 1.0;
  }

  .req-title-line {
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${t.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${t.relationLabelColor};
  }
  .divider {
    stroke: ${t.nodeBorder};
    stroke-width: 1;
  }
  .label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .label text,span {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }
  .labelBkg {
    background-color: ${t.edgeLabelBackground};
  }

`),"getStyles"),die={};Ss(die,{draw:()=>R6e});var R6e=l((async function(t,e,r,n){ee.info("REF0:"),ee.info("Drawing requirement diagram (unified)",e);const{securityLevel:i,state:a,layout:s}=ke(),o=n.db.getData(),u=$v(e,i);o.type=n.type,o.layoutAlgorithm=X6(s),o.nodeSpacing=a?.nodeSpacing??50,o.rankSpacing=a?.rankSpacing??50,o.markers=["requirement_contains","requirement_arrow"],o.diagramId=e,await Av(o,u),Vt.insertTitle(u,"requirementDiagramTitleText",a?.titleTopMargin??25,n.db.getDiagramTitle()),Fv(u,8,"requirementDiagram",a?.useMaxWidth??!0)}),"draw"),M6e={parser:L6e,get db(){return new N6e},renderer:die,styles:I6e},D6e=Object.freeze({__proto__:null,diagram:M6e}),nS=(function(){var t=l((function(K,ie,ne,J){for(ne=ne||{},J=K.length;J--;ne[K[J]]=ie);return ne}),"o"),e=[1,2],r=[1,3],n=[1,4],i=[2,4],a=[1,9],s=[1,11],o=[1,13],u=[1,14],h=[1,16],d=[1,17],p=[1,18],f=[1,24],g=[1,25],m=[1,26],y=[1,27],v=[1,28],x=[1,29],b=[1,30],w=[1,31],T=[1,32],k=[1,33],C=[1,34],E=[1,35],_=[1,36],S=[1,37],N=[1,38],O=[1,39],B=[1,41],L=[1,42],I=[1,43],A=[1,44],M=[1,45],D=[1,46],R=[1,4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,48,49,50,52,53,54,59,60,61,62,70],P=[4,5,16,50,52,53],$=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,54,59,60,61,62,70],z=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,49,50,52,53,54,59,60,61,62,70],q=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,48,50,52,53,54,59,60,61,62,70],W=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,50,52,53,54,59,60,61,62,70],Q=[68,69,70],te=[1,122],oe={trace:l((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,SD:6,document:7,line:8,statement:9,box_section:10,box_line:11,participant_statement:12,create:13,box:14,restOfLine:15,end:16,signal:17,autonumber:18,NUM:19,off:20,activate:21,actor:22,deactivate:23,note_statement:24,links_statement:25,link_statement:26,properties_statement:27,details_statement:28,title:29,legacy_title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,loop:36,rect:37,opt:38,alt:39,else_sections:40,par:41,par_sections:42,par_over:43,critical:44,option_sections:45,break:46,option:47,and:48,else:49,participant:50,AS:51,participant_actor:52,destroy:53,note:54,placement:55,text2:56,over:57,actor_pair:58,links:59,link:60,properties:61,details:62,spaceList:63,",":64,left_of:65,right_of:66,signaltype:67,"+":68,"-":69,ACTOR:70,SOLID_OPEN_ARROW:71,DOTTED_OPEN_ARROW:72,SOLID_ARROW:73,BIDIRECTIONAL_SOLID_ARROW:74,DOTTED_ARROW:75,BIDIRECTIONAL_DOTTED_ARROW:76,SOLID_CROSS:77,DOTTED_CROSS:78,SOLID_POINT:79,DOTTED_POINT:80,TXT:81,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",6:"SD",13:"create",14:"box",15:"restOfLine",16:"end",18:"autonumber",19:"NUM",20:"off",21:"activate",23:"deactivate",29:"title",30:"legacy_title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"loop",37:"rect",38:"opt",39:"alt",41:"par",43:"par_over",44:"critical",46:"break",47:"option",48:"and",49:"else",50:"participant",51:"AS",52:"participant_actor",53:"destroy",54:"note",57:"over",59:"links",60:"link",61:"properties",62:"details",64:",",65:"left_of",66:"right_of",68:"+",69:"-",70:"ACTOR",71:"SOLID_OPEN_ARROW",72:"DOTTED_OPEN_ARROW",73:"SOLID_ARROW",74:"BIDIRECTIONAL_SOLID_ARROW",75:"DOTTED_ARROW",76:"BIDIRECTIONAL_DOTTED_ARROW",77:"SOLID_CROSS",78:"DOTTED_CROSS",79:"SOLID_POINT",80:"DOTTED_POINT",81:"TXT"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[10,0],[10,2],[11,2],[11,1],[11,1],[9,1],[9,2],[9,4],[9,2],[9,4],[9,3],[9,3],[9,2],[9,3],[9,3],[9,2],[9,2],[9,2],[9,2],[9,2],[9,1],[9,1],[9,2],[9,2],[9,1],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[45,1],[45,4],[42,1],[42,4],[40,1],[40,4],[12,5],[12,3],[12,5],[12,3],[12,3],[24,4],[24,4],[25,3],[26,3],[27,3],[28,3],[63,2],[63,1],[58,3],[58,1],[55,1],[55,1],[17,5],[17,5],[17,4],[22,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[56,1]],performAction:l((function(K,ie,ne,J,ue,Y,se){var de=Y.length-1;switch(ue){case 3:return J.apply(Y[de]),Y[de];case 4:case 9:case 8:case 13:this.$=[];break;case 5:case 10:Y[de-1].push(Y[de]),this.$=Y[de-1];break;case 6:case 7:case 11:case 12:case 62:this.$=Y[de];break;case 15:Y[de].type="createParticipant",this.$=Y[de];break;case 16:Y[de-1].unshift({type:"boxStart",boxData:J.parseBoxData(Y[de-2])}),Y[de-1].push({type:"boxEnd",boxText:Y[de-2]}),this.$=Y[de-1];break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(Y[de-2]),sequenceIndexStep:Number(Y[de-1]),sequenceVisible:!0,signalType:J.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceIndex:Number(Y[de-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:J.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:J.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:J.LINETYPE.AUTONUMBER};break;case 22:this.$={type:"activeStart",signalType:J.LINETYPE.ACTIVE_START,actor:Y[de-1].actor};break;case 23:this.$={type:"activeEnd",signalType:J.LINETYPE.ACTIVE_END,actor:Y[de-1].actor};break;case 29:J.setDiagramTitle(Y[de].substring(6)),this.$=Y[de].substring(6);break;case 30:J.setDiagramTitle(Y[de].substring(7)),this.$=Y[de].substring(7);break;case 31:this.$=Y[de].trim(),J.setAccTitle(this.$);break;case 32:case 33:this.$=Y[de].trim(),J.setAccDescription(this.$);break;case 34:Y[de-1].unshift({type:"loopStart",loopText:J.parseMessage(Y[de-2]),signalType:J.LINETYPE.LOOP_START}),Y[de-1].push({type:"loopEnd",loopText:Y[de-2],signalType:J.LINETYPE.LOOP_END}),this.$=Y[de-1];break;case 35:Y[de-1].unshift({type:"rectStart",color:J.parseMessage(Y[de-2]),signalType:J.LINETYPE.RECT_START}),Y[de-1].push({type:"rectEnd",color:J.parseMessage(Y[de-2]),signalType:J.LINETYPE.RECT_END}),this.$=Y[de-1];break;case 36:Y[de-1].unshift({type:"optStart",optText:J.parseMessage(Y[de-2]),signalType:J.LINETYPE.OPT_START}),Y[de-1].push({type:"optEnd",optText:J.parseMessage(Y[de-2]),signalType:J.LINETYPE.OPT_END}),this.$=Y[de-1];break;case 37:Y[de-1].unshift({type:"altStart",altText:J.parseMessage(Y[de-2]),signalType:J.LINETYPE.ALT_START}),Y[de-1].push({type:"altEnd",signalType:J.LINETYPE.ALT_END}),this.$=Y[de-1];break;case 38:Y[de-1].unshift({type:"parStart",parText:J.parseMessage(Y[de-2]),signalType:J.LINETYPE.PAR_START}),Y[de-1].push({type:"parEnd",signalType:J.LINETYPE.PAR_END}),this.$=Y[de-1];break;case 39:Y[de-1].unshift({type:"parStart",parText:J.parseMessage(Y[de-2]),signalType:J.LINETYPE.PAR_OVER_START}),Y[de-1].push({type:"parEnd",signalType:J.LINETYPE.PAR_END}),this.$=Y[de-1];break;case 40:Y[de-1].unshift({type:"criticalStart",criticalText:J.parseMessage(Y[de-2]),signalType:J.LINETYPE.CRITICAL_START}),Y[de-1].push({type:"criticalEnd",signalType:J.LINETYPE.CRITICAL_END}),this.$=Y[de-1];break;case 41:Y[de-1].unshift({type:"breakStart",breakText:J.parseMessage(Y[de-2]),signalType:J.LINETYPE.BREAK_START}),Y[de-1].push({type:"breakEnd",optText:J.parseMessage(Y[de-2]),signalType:J.LINETYPE.BREAK_END}),this.$=Y[de-1];break;case 43:this.$=Y[de-3].concat([{type:"option",optionText:J.parseMessage(Y[de-1]),signalType:J.LINETYPE.CRITICAL_OPTION},Y[de]]);break;case 45:this.$=Y[de-3].concat([{type:"and",parText:J.parseMessage(Y[de-1]),signalType:J.LINETYPE.PAR_AND},Y[de]]);break;case 47:this.$=Y[de-3].concat([{type:"else",altText:J.parseMessage(Y[de-1]),signalType:J.LINETYPE.ALT_ELSE},Y[de]]);break;case 48:Y[de-3].draw="participant",Y[de-3].type="addParticipant",Y[de-3].description=J.parseMessage(Y[de-1]),this.$=Y[de-3];break;case 49:Y[de-1].draw="participant",Y[de-1].type="addParticipant",this.$=Y[de-1];break;case 50:Y[de-3].draw="actor",Y[de-3].type="addParticipant",Y[de-3].description=J.parseMessage(Y[de-1]),this.$=Y[de-3];break;case 51:Y[de-1].draw="actor",Y[de-1].type="addParticipant",this.$=Y[de-1];break;case 52:Y[de-1].type="destroyParticipant",this.$=Y[de-1];break;case 53:this.$=[Y[de-1],{type:"addNote",placement:Y[de-2],actor:Y[de-1].actor,text:Y[de]}];break;case 54:Y[de-2]=[].concat(Y[de-1],Y[de-1]).slice(0,2),Y[de-2][0]=Y[de-2][0].actor,Y[de-2][1]=Y[de-2][1].actor,this.$=[Y[de-1],{type:"addNote",placement:J.PLACEMENT.OVER,actor:Y[de-2].slice(0,2),text:Y[de]}];break;case 55:this.$=[Y[de-1],{type:"addLinks",actor:Y[de-1].actor,text:Y[de]}];break;case 56:this.$=[Y[de-1],{type:"addALink",actor:Y[de-1].actor,text:Y[de]}];break;case 57:this.$=[Y[de-1],{type:"addProperties",actor:Y[de-1].actor,text:Y[de]}];break;case 58:this.$=[Y[de-1],{type:"addDetails",actor:Y[de-1].actor,text:Y[de]}];break;case 61:this.$=[Y[de-2],Y[de]];break;case 63:this.$=J.PLACEMENT.LEFTOF;break;case 64:this.$=J.PLACEMENT.RIGHTOF;break;case 65:this.$=[Y[de-4],Y[de-1],{type:"addMessage",from:Y[de-4].actor,to:Y[de-1].actor,signalType:Y[de-3],msg:Y[de],activate:!0},{type:"activeStart",signalType:J.LINETYPE.ACTIVE_START,actor:Y[de-1].actor}];break;case 66:this.$=[Y[de-4],Y[de-1],{type:"addMessage",from:Y[de-4].actor,to:Y[de-1].actor,signalType:Y[de-3],msg:Y[de]},{type:"activeEnd",signalType:J.LINETYPE.ACTIVE_END,actor:Y[de-4].actor}];break;case 67:this.$=[Y[de-3],Y[de-1],{type:"addMessage",from:Y[de-3].actor,to:Y[de-1].actor,signalType:Y[de-2],msg:Y[de]}];break;case 68:this.$={type:"addParticipant",actor:Y[de]};break;case 69:this.$=J.LINETYPE.SOLID_OPEN;break;case 70:this.$=J.LINETYPE.DOTTED_OPEN;break;case 71:this.$=J.LINETYPE.SOLID;break;case 72:this.$=J.LINETYPE.BIDIRECTIONAL_SOLID;break;case 73:this.$=J.LINETYPE.DOTTED;break;case 74:this.$=J.LINETYPE.BIDIRECTIONAL_DOTTED;break;case 75:this.$=J.LINETYPE.SOLID_CROSS;break;case 76:this.$=J.LINETYPE.DOTTED_CROSS;break;case 77:this.$=J.LINETYPE.SOLID_POINT;break;case 78:this.$=J.LINETYPE.DOTTED_POINT;break;case 79:this.$=J.parseMessage(Y[de].trim().substring(1))}}),"anonymous"),table:[{3:1,4:e,5:r,6:n},{1:[3]},{3:5,4:e,5:r,6:n},{3:6,4:e,5:r,6:n},t([1,4,5,13,14,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,54,59,60,61,62,70],i,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:a,5:s,8:8,9:10,12:12,13:o,14:u,17:15,18:h,21:d,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:f,30:g,31:m,33:y,35:v,36:x,37:b,38:w,39:T,41:k,43:C,44:E,46:_,50:S,52:N,53:O,54:B,59:L,60:I,61:A,62:M,70:D},t(R,[2,5]),{9:47,12:12,13:o,14:u,17:15,18:h,21:d,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:f,30:g,31:m,33:y,35:v,36:x,37:b,38:w,39:T,41:k,43:C,44:E,46:_,50:S,52:N,53:O,54:B,59:L,60:I,61:A,62:M,70:D},t(R,[2,7]),t(R,[2,8]),t(R,[2,14]),{12:48,50:S,52:N,53:O},{15:[1,49]},{5:[1,50]},{5:[1,53],19:[1,51],20:[1,52]},{22:54,70:D},{22:55,70:D},{5:[1,56]},{5:[1,57]},{5:[1,58]},{5:[1,59]},{5:[1,60]},t(R,[2,29]),t(R,[2,30]),{32:[1,61]},{34:[1,62]},t(R,[2,33]),{15:[1,63]},{15:[1,64]},{15:[1,65]},{15:[1,66]},{15:[1,67]},{15:[1,68]},{15:[1,69]},{15:[1,70]},{22:71,70:D},{22:72,70:D},{22:73,70:D},{67:74,71:[1,75],72:[1,76],73:[1,77],74:[1,78],75:[1,79],76:[1,80],77:[1,81],78:[1,82],79:[1,83],80:[1,84]},{55:85,57:[1,86],65:[1,87],66:[1,88]},{22:89,70:D},{22:90,70:D},{22:91,70:D},{22:92,70:D},t([5,51,64,71,72,73,74,75,76,77,78,79,80,81],[2,68]),t(R,[2,6]),t(R,[2,15]),t(P,[2,9],{10:93}),t(R,[2,17]),{5:[1,95],19:[1,94]},{5:[1,96]},t(R,[2,21]),{5:[1,97]},{5:[1,98]},t(R,[2,24]),t(R,[2,25]),t(R,[2,26]),t(R,[2,27]),t(R,[2,28]),t(R,[2,31]),t(R,[2,32]),t($,i,{7:99}),t($,i,{7:100}),t($,i,{7:101}),t(z,i,{40:102,7:103}),t(q,i,{42:104,7:105}),t(q,i,{7:105,42:106}),t(W,i,{45:107,7:108}),t($,i,{7:109}),{5:[1,111],51:[1,110]},{5:[1,113],51:[1,112]},{5:[1,114]},{22:117,68:[1,115],69:[1,116],70:D},t(Q,[2,69]),t(Q,[2,70]),t(Q,[2,71]),t(Q,[2,72]),t(Q,[2,73]),t(Q,[2,74]),t(Q,[2,75]),t(Q,[2,76]),t(Q,[2,77]),t(Q,[2,78]),{22:118,70:D},{22:120,58:119,70:D},{70:[2,63]},{70:[2,64]},{56:121,81:te},{56:123,81:te},{56:124,81:te},{56:125,81:te},{4:[1,128],5:[1,130],11:127,12:129,16:[1,126],50:S,52:N,53:O},{5:[1,131]},t(R,[2,19]),t(R,[2,20]),t(R,[2,22]),t(R,[2,23]),{4:a,5:s,8:8,9:10,12:12,13:o,14:u,16:[1,132],17:15,18:h,21:d,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:f,30:g,31:m,33:y,35:v,36:x,37:b,38:w,39:T,41:k,43:C,44:E,46:_,50:S,52:N,53:O,54:B,59:L,60:I,61:A,62:M,70:D},{4:a,5:s,8:8,9:10,12:12,13:o,14:u,16:[1,133],17:15,18:h,21:d,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:f,30:g,31:m,33:y,35:v,36:x,37:b,38:w,39:T,41:k,43:C,44:E,46:_,50:S,52:N,53:O,54:B,59:L,60:I,61:A,62:M,70:D},{4:a,5:s,8:8,9:10,12:12,13:o,14:u,16:[1,134],17:15,18:h,21:d,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:f,30:g,31:m,33:y,35:v,36:x,37:b,38:w,39:T,41:k,43:C,44:E,46:_,50:S,52:N,53:O,54:B,59:L,60:I,61:A,62:M,70:D},{16:[1,135]},{4:a,5:s,8:8,9:10,12:12,13:o,14:u,16:[2,46],17:15,18:h,21:d,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:f,30:g,31:m,33:y,35:v,36:x,37:b,38:w,39:T,41:k,43:C,44:E,46:_,49:[1,136],50:S,52:N,53:O,54:B,59:L,60:I,61:A,62:M,70:D},{16:[1,137]},{4:a,5:s,8:8,9:10,12:12,13:o,14:u,16:[2,44],17:15,18:h,21:d,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:f,30:g,31:m,33:y,35:v,36:x,37:b,38:w,39:T,41:k,43:C,44:E,46:_,48:[1,138],50:S,52:N,53:O,54:B,59:L,60:I,61:A,62:M,70:D},{16:[1,139]},{16:[1,140]},{4:a,5:s,8:8,9:10,12:12,13:o,14:u,16:[2,42],17:15,18:h,21:d,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:f,30:g,31:m,33:y,35:v,36:x,37:b,38:w,39:T,41:k,43:C,44:E,46:_,47:[1,141],50:S,52:N,53:O,54:B,59:L,60:I,61:A,62:M,70:D},{4:a,5:s,8:8,9:10,12:12,13:o,14:u,16:[1,142],17:15,18:h,21:d,22:40,23:p,24:19,25:20,26:21,27:22,28:23,29:f,30:g,31:m,33:y,35:v,36:x,37:b,38:w,39:T,41:k,43:C,44:E,46:_,50:S,52:N,53:O,54:B,59:L,60:I,61:A,62:M,70:D},{15:[1,143]},t(R,[2,49]),{15:[1,144]},t(R,[2,51]),t(R,[2,52]),{22:145,70:D},{22:146,70:D},{56:147,81:te},{56:148,81:te},{56:149,81:te},{64:[1,150],81:[2,62]},{5:[2,55]},{5:[2,79]},{5:[2,56]},{5:[2,57]},{5:[2,58]},t(R,[2,16]),t(P,[2,10]),{12:151,50:S,52:N,53:O},t(P,[2,12]),t(P,[2,13]),t(R,[2,18]),t(R,[2,34]),t(R,[2,35]),t(R,[2,36]),t(R,[2,37]),{15:[1,152]},t(R,[2,38]),{15:[1,153]},t(R,[2,39]),t(R,[2,40]),{15:[1,154]},t(R,[2,41]),{5:[1,155]},{5:[1,156]},{56:157,81:te},{56:158,81:te},{5:[2,67]},{5:[2,53]},{5:[2,54]},{22:159,70:D},t(P,[2,11]),t(z,i,{7:103,40:160}),t(q,i,{7:105,42:161}),t(W,i,{7:108,45:162}),t(R,[2,48]),t(R,[2,50]),{5:[2,65]},{5:[2,66]},{81:[2,61]},{16:[2,47]},{16:[2,45]},{16:[2,43]}],defaultActions:{5:[2,1],6:[2,2],87:[2,63],88:[2,64],121:[2,55],122:[2,79],123:[2,56],124:[2,57],125:[2,58],147:[2,67],148:[2,53],149:[2,54],157:[2,65],158:[2,66],159:[2,61],160:[2,47],161:[2,45],162:[2,43]},parseError:l((function(K,ie){if(!ie.recoverable){var ne=new Error(K);throw ne.hash=ie,ne}this.trace(K)}),"parseError"),parse:l((function(K){var ie=this,ne=[0],J=[],ue=[null],Y=[],se=this.table,de="",ce=0,Ee=0,ve=2,De=1,Ue=Y.slice.call(arguments,1),ze=Object.create(this.lexer),Ge={yy:{}};for(var $e in this.yy)Object.prototype.hasOwnProperty.call(this.yy,$e)&&(Ge.yy[$e]=this.yy[$e]);ze.setInput(K,Ge.yy),Ge.yy.lexer=ze,Ge.yy.parser=this,ze.yylloc===void 0&&(ze.yylloc={});var Pe=ze.yylloc;Y.push(Pe);var j=ze.options&&ze.options.ranges;function pe(Le){ne.length=ne.length-2*Le,ue.length=ue.length-Le,Y.length=Y.length-Le}function X(){var Le;return typeof(Le=J.pop()||ze.lex()||De)!="number"&&(Le instanceof Array&&(Le=(J=Le).pop()),Le=ie.symbols_[Le]||Le),Le}typeof Ge.yy.parseError=="function"?this.parseError=Ge.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,l(pe,"popStack"),l(X,"lex");for(var ge,G,le,V,me,he,_e,Ce,Te={};;){if(G=ne[ne.length-1],this.defaultActions[G]?le=this.defaultActions[G]:(ge==null&&(ge=X()),le=se[G]&&se[G][ge]),le===void 0||!le.length||!le[0]){var Re="";for(me in Ce=[],se[G])this.terminals_[me]&&me>ve&&Ce.push("'"+this.terminals_[me]+"'");Re=ze.showPosition?"Parse error on line "+(ce+1)+`:
`+ze.showPosition()+`
Expecting `+Ce.join(", ")+", got '"+(this.terminals_[ge]||ge)+"'":"Parse error on line "+(ce+1)+": Unexpected "+(ge==De?"end of input":"'"+(this.terminals_[ge]||ge)+"'"),this.parseError(Re,{text:ze.match,token:this.terminals_[ge]||ge,line:ze.yylineno,loc:Pe,expected:Ce})}if(le[0]instanceof Array&&le.length>1)throw new Error("Parse Error: multiple actions possible at state: "+G+", token: "+ge);switch(le[0]){case 1:ne.push(ge),ue.push(ze.yytext),Y.push(ze.yylloc),ne.push(le[1]),ge=null,Ee=ze.yyleng,de=ze.yytext,ce=ze.yylineno,Pe=ze.yylloc;break;case 2:if(he=this.productions_[le[1]][1],Te.$=ue[ue.length-he],Te._$={first_line:Y[Y.length-(he||1)].first_line,last_line:Y[Y.length-1].last_line,first_column:Y[Y.length-(he||1)].first_column,last_column:Y[Y.length-1].last_column},j&&(Te._$.range=[Y[Y.length-(he||1)].range[0],Y[Y.length-1].range[1]]),(V=this.performAction.apply(Te,[de,Ee,ce,Ge.yy,le[1],ue,Y].concat(Ue)))!==void 0)return V;he&&(ne=ne.slice(0,-1*he*2),ue=ue.slice(0,-1*he),Y=Y.slice(0,-1*he)),ne.push(this.productions_[le[1]][0]),ue.push(Te.$),Y.push(Te._$),_e=se[ne[ne.length-2]][ne[ne.length-1]],ne.push(_e);break;case 3:return!0}}return!0}),"parse")},re=(function(){var K={EOF:1,parseError:l((function(ie,ne){if(!this.yy.parser)throw new Error(ie);this.yy.parser.parseError(ie,ne)}),"parseError"),setInput:l((function(ie,ne){return this.yy=ne||this.yy||{},this._input=ie,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:l((function(){var ie=this._input[0];return this.yytext+=ie,this.yyleng++,this.offset++,this.match+=ie,this.matched+=ie,ie.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ie}),"input"),unput:l((function(ie){var ne=ie.length,J=ie.split(/(?:\r\n?|\n)/g);this._input=ie+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ne),this.offset-=ne;var ue=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),J.length-1&&(this.yylineno-=J.length-1);var Y=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:J?(J.length===ue.length?this.yylloc.first_column:0)+ue[ue.length-J.length].length-J[0].length:this.yylloc.first_column-ne},this.options.ranges&&(this.yylloc.range=[Y[0],Y[0]+this.yyleng-ne]),this.yyleng=this.yytext.length,this}),"unput"),more:l((function(){return this._more=!0,this}),"more"),reject:l((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:l((function(ie){this.unput(this.match.slice(ie))}),"less"),pastInput:l((function(){var ie=this.matched.substr(0,this.matched.length-this.match.length);return(ie.length>20?"...":"")+ie.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:l((function(){var ie=this.match;return ie.length<20&&(ie+=this._input.substr(0,20-ie.length)),(ie.substr(0,20)+(ie.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:l((function(){var ie=this.pastInput(),ne=new Array(ie.length+1).join("-");return ie+this.upcomingInput()+`
`+ne+"^"}),"showPosition"),test_match:l((function(ie,ne){var J,ue,Y;if(this.options.backtrack_lexer&&(Y={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Y.yylloc.range=this.yylloc.range.slice(0))),(ue=ie[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=ue.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ue?ue[ue.length-1].length-ue[ue.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ie[0].length},this.yytext+=ie[0],this.match+=ie[0],this.matches=ie,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ie[0].length),this.matched+=ie[0],J=this.performAction.call(this,this.yy,this,ne,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),J)return J;if(this._backtrack){for(var se in Y)this[se]=Y[se];return!1}return!1}),"test_match"),next:l((function(){if(this.done)return this.EOF;var ie,ne,J,ue;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var Y=this._currentRules(),se=0;se<Y.length;se++)if((J=this._input.match(this.rules[Y[se]]))&&(!ne||J[0].length>ne[0].length)){if(ne=J,ue=se,this.options.backtrack_lexer){if((ie=this.test_match(J,Y[se]))!==!1)return ie;if(this._backtrack){ne=!1;continue}return!1}if(!this.options.flex)break}return ne?(ie=this.test_match(ne,Y[ue]))!==!1&&ie:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:l((function(){var ie=this.next();return ie||this.lex()}),"lex"),begin:l((function(ie){this.conditionStack.push(ie)}),"begin"),popState:l((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:l((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:l((function(ie){return(ie=this.conditionStack.length-1-Math.abs(ie||0))>=0?this.conditionStack[ie]:"INITIAL"}),"topState"),pushState:l((function(ie){this.begin(ie)}),"pushState"),stateStackSize:l((function(){return this.conditionStack.length}),"stateStackSize"),options:{"case-insensitive":!0},performAction:l((function(ie,ne,J,ue){switch(J){case 0:case 51:case 66:return 5;case 1:case 2:case 3:case 4:case 5:break;case 6:return 19;case 7:return this.begin("LINE"),14;case 8:return this.begin("ID"),50;case 9:return this.begin("ID"),52;case 10:return 13;case 11:return this.begin("ID"),53;case 12:return ne.yytext=ne.yytext.trim(),this.begin("ALIAS"),70;case 13:return this.popState(),this.popState(),this.begin("LINE"),51;case 14:return this.popState(),this.popState(),5;case 15:return this.begin("LINE"),36;case 16:return this.begin("LINE"),37;case 17:return this.begin("LINE"),38;case 18:return this.begin("LINE"),39;case 19:return this.begin("LINE"),49;case 20:return this.begin("LINE"),41;case 21:return this.begin("LINE"),43;case 22:return this.begin("LINE"),48;case 23:return this.begin("LINE"),44;case 24:return this.begin("LINE"),47;case 25:return this.begin("LINE"),46;case 26:return this.popState(),15;case 27:return 16;case 28:return 65;case 29:return 66;case 30:return 59;case 31:return 60;case 32:return 61;case 33:return 62;case 34:return 57;case 35:return 54;case 36:return this.begin("ID"),21;case 37:return this.begin("ID"),23;case 38:return 29;case 39:return 30;case 40:return this.begin("acc_title"),31;case 41:return this.popState(),"acc_title_value";case 42:return this.begin("acc_descr"),33;case 43:return this.popState(),"acc_descr_value";case 44:this.begin("acc_descr_multiline");break;case 45:this.popState();break;case 46:return"acc_descr_multiline_value";case 47:return 6;case 48:return 18;case 49:return 20;case 50:return 64;case 52:return ne.yytext=ne.yytext.trim(),70;case 53:return 73;case 54:return 74;case 55:return 75;case 56:return 76;case 57:return 71;case 58:return 72;case 59:return 77;case 60:return 78;case 61:return 79;case 62:return 80;case 63:return 81;case 64:return 68;case 65:return 69;case 67:return"INVALID"}}),"anonymous"),rules:[/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:box\b)/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:create\b)/i,/^(?:destroy\b)/i,/^(?:[^\<->\->:\n,;]+?([\-]*[^\<->\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:par_over\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\+\<->\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+\<->\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:<<->>)/i,/^(?:-->>)/i,/^(?:<<-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[45,46],inclusive:!1},acc_descr:{rules:[43],inclusive:!1},acc_title:{rules:[41],inclusive:!1},ID:{rules:[2,3,12],inclusive:!1},ALIAS:{rules:[2,3,13,14],inclusive:!1},LINE:{rules:[2,3,26],inclusive:!1},INITIAL:{rules:[0,1,3,4,5,6,7,8,9,10,11,15,16,17,18,19,20,21,22,23,24,25,27,28,29,30,31,32,33,34,35,36,37,38,39,40,42,44,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67],inclusive:!0}}};return K})();function H(){this.yy={}}return oe.lexer=re,l(H,"Parser"),H.prototype=oe,oe.Parser=H,new H})();nS.parser=nS;var O6e=nS,P6e={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31,PAR_OVER_START:32,BIDIRECTIONAL_SOLID:33,BIDIRECTIONAL_DOTTED:34},B6e={FILLED:0,OPEN:1},$6e={LEFTOF:0,RIGHTOF:1,OVER:2},S0,F6e=(S0=class{constructor(){this.state=new XA((()=>({prevActor:void 0,actors:new Map,createdActors:new Map,destroyedActors:new Map,boxes:[],messages:[],notes:[],sequenceNumbersEnabled:!1,wrapEnabled:void 0,currentBox:void 0,lastCreated:void 0,lastDestroyed:void 0}))),this.setAccTitle=zn,this.setAccDescription=Kn,this.setDiagramTitle=di,this.getAccTitle=Xn,this.getAccDescription=Zn,this.getDiagramTitle=Wn,this.apply=this.apply.bind(this),this.parseBoxData=this.parseBoxData.bind(this),this.parseMessage=this.parseMessage.bind(this),this.clear(),this.setWrap(ke().wrap),this.LINETYPE=P6e,this.ARROWTYPE=B6e,this.PLACEMENT=$6e}addBox(e){this.state.records.boxes.push({name:e.text,wrap:e.wrap??this.autoWrap(),fill:e.color,actorKeys:[]}),this.state.records.currentBox=this.state.records.boxes.slice(-1)[0]}addActor(e,r,n,i){let a=this.state.records.currentBox;const s=this.state.records.actors.get(e);if(s){if(this.state.records.currentBox&&s.box&&this.state.records.currentBox!==s.box)throw new Error(`A same participant should only be defined in one Box: ${s.name} can't be in '${s.box.name}' and in '${this.state.records.currentBox.name}' at the same time.`);if(a=s.box?s.box:this.state.records.currentBox,s.box=a,s&&r===s.name&&n==null)return}if(n?.text==null&&(n={text:r,type:i}),i!=null&&n.text!=null||(n={text:r,type:i}),this.state.records.actors.set(e,{box:a,name:r,description:n.text,wrap:n.wrap??this.autoWrap(),prevActor:this.state.records.prevActor,links:{},properties:{},actorCnt:null,rectData:null,type:i??"participant"}),this.state.records.prevActor){const o=this.state.records.actors.get(this.state.records.prevActor);o&&(o.nextActor=e)}this.state.records.currentBox&&this.state.records.currentBox.actorKeys.push(e),this.state.records.prevActor=e}activationCount(e){let r,n=0;if(!e)return 0;for(r=0;r<this.state.records.messages.length;r++)this.state.records.messages[r].type===this.LINETYPE.ACTIVE_START&&this.state.records.messages[r].from===e&&n++,this.state.records.messages[r].type===this.LINETYPE.ACTIVE_END&&this.state.records.messages[r].from===e&&n--;return n}addMessage(e,r,n,i){this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:e,to:r,message:n.text,wrap:n.wrap??this.autoWrap(),answer:i})}addSignal(e,r,n,i,a=!1){if(i===this.LINETYPE.ACTIVE_END&&this.activationCount(e??"")<1){const s=new Error("Trying to inactivate an inactive participant ("+e+")");throw s.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},s}return this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:e,to:r,message:n?.text??"",wrap:n?.wrap??this.autoWrap(),type:i,activate:a}),!0}hasAtLeastOneBox(){return this.state.records.boxes.length>0}hasAtLeastOneBoxWithTitle(){return this.state.records.boxes.some((e=>e.name))}getMessages(){return this.state.records.messages}getBoxes(){return this.state.records.boxes}getActors(){return this.state.records.actors}getCreatedActors(){return this.state.records.createdActors}getDestroyedActors(){return this.state.records.destroyedActors}getActor(e){return this.state.records.actors.get(e)}getActorKeys(){return[...this.state.records.actors.keys()]}enableSequenceNumbers(){this.state.records.sequenceNumbersEnabled=!0}disableSequenceNumbers(){this.state.records.sequenceNumbersEnabled=!1}showSequenceNumbers(){return this.state.records.sequenceNumbersEnabled}setWrap(e){this.state.records.wrapEnabled=e}extractWrap(e){if(e===void 0)return{};e=e.trim();const r=/^:?wrap:/.exec(e)!==null||/^:?nowrap:/.exec(e)===null&&void 0;return{cleanedText:(r===void 0?e:e.replace(/^:?(?:no)?wrap:/,"")).trim(),wrap:r}}autoWrap(){return this.state.records.wrapEnabled!==void 0?this.state.records.wrapEnabled:ke().sequence?.wrap??!1}clear(){this.state.reset(),jn()}parseMessage(e){const r=e.trim(),{wrap:n,cleanedText:i}=this.extractWrap(r),a={text:i,wrap:n};return ee.debug(`parseMessage: ${JSON.stringify(a)}`),a}parseBoxData(e){const r=/^((?:rgba?|hsla?)\s*\(.*\)|\w*)(.*)$/.exec(e);let n=r?.[1]?r[1].trim():"transparent",i=r?.[2]?r[2].trim():void 0;if(window?.CSS)window.CSS.supports("color",n)||(n="transparent",i=e.trim());else{const o=new Option().style;o.color=n,o.color!==n&&(n="transparent",i=e.trim())}const{wrap:a,cleanedText:s}=this.extractWrap(i);return{text:s?Ir(s,ke()):void 0,color:n,wrap:a}}addNote(e,r,n){const i={actor:e,placement:r,message:n.text,wrap:n.wrap??this.autoWrap()},a=[].concat(e,e);this.state.records.notes.push(i),this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:a[0],to:a[1],message:n.text,wrap:n.wrap??this.autoWrap(),type:this.LINETYPE.NOTE,placement:r})}addLinks(e,r){const n=this.getActor(e);try{let i=Ir(r.text,ke());i=i.replace(/&equals;/g,"="),i=i.replace(/&amp;/g,"&");const a=JSON.parse(i);this.insertLinks(n,a)}catch(i){ee.error("error while parsing actor link text",i)}}addALink(e,r){const n=this.getActor(e);try{const i={};let a=Ir(r.text,ke());const s=a.indexOf("@");a=a.replace(/&equals;/g,"="),a=a.replace(/&amp;/g,"&");const o=a.slice(0,s-1).trim(),u=a.slice(s+1).trim();i[o]=u,this.insertLinks(n,i)}catch(i){ee.error("error while parsing actor link text",i)}}insertLinks(e,r){if(e.links==null)e.links=r;else for(const n in r)e.links[n]=r[n]}addProperties(e,r){const n=this.getActor(e);try{const i=Ir(r.text,ke()),a=JSON.parse(i);this.insertProperties(n,a)}catch(i){ee.error("error while parsing actor properties text",i)}}insertProperties(e,r){if(e.properties==null)e.properties=r;else for(const n in r)e.properties[n]=r[n]}boxEnd(){this.state.records.currentBox=void 0}addDetails(e,r){const n=this.getActor(e),i=document.getElementById(r.text);try{const a=i.innerHTML,s=JSON.parse(a);s.properties&&this.insertProperties(n,s.properties),s.links&&this.insertLinks(n,s.links)}catch(a){ee.error("error while parsing actor details text",a)}}getActorProperty(e,r){if(e?.properties!==void 0)return e.properties[r]}apply(e){if(Array.isArray(e))e.forEach((r=>{this.apply(r)}));else switch(e.type){case"sequenceIndex":this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:void 0,to:void 0,message:{start:e.sequenceIndex,step:e.sequenceIndexStep,visible:e.sequenceVisible},wrap:!1,type:e.signalType});break;case"addParticipant":this.addActor(e.actor,e.actor,e.description,e.draw);break;case"createParticipant":if(this.state.records.actors.has(e.actor))throw new Error("It is not possible to have actors with the same id, even if one is destroyed before the next is created. Use 'AS' aliases to simulate the behavior");this.state.records.lastCreated=e.actor,this.addActor(e.actor,e.actor,e.description,e.draw),this.state.records.createdActors.set(e.actor,this.state.records.messages.length);break;case"destroyParticipant":this.state.records.lastDestroyed=e.actor,this.state.records.destroyedActors.set(e.actor,this.state.records.messages.length);break;case"activeStart":case"activeEnd":this.addSignal(e.actor,void 0,void 0,e.signalType);break;case"addNote":this.addNote(e.actor,e.placement,e.text);break;case"addLinks":this.addLinks(e.actor,e.text);break;case"addALink":this.addALink(e.actor,e.text);break;case"addProperties":this.addProperties(e.actor,e.text);break;case"addDetails":this.addDetails(e.actor,e.text);break;case"addMessage":if(this.state.records.lastCreated){if(e.to!==this.state.records.lastCreated)throw new Error("The created participant "+this.state.records.lastCreated.name+" does not have an associated creating message after its declaration. Please check the sequence diagram.");this.state.records.lastCreated=void 0}else if(this.state.records.lastDestroyed){if(e.to!==this.state.records.lastDestroyed&&e.from!==this.state.records.lastDestroyed)throw new Error("The destroyed participant "+this.state.records.lastDestroyed.name+" does not have an associated destroying message after its declaration. Please check the sequence diagram.");this.state.records.lastDestroyed=void 0}this.addSignal(e.from,e.to,e.msg,e.signalType,e.activate);break;case"boxStart":this.addBox(e.boxData);break;case"boxEnd":this.boxEnd();break;case"loopStart":this.addSignal(void 0,void 0,e.loopText,e.signalType);break;case"loopEnd":case"rectEnd":case"optEnd":case"altEnd":case"parEnd":case"criticalEnd":case"breakEnd":this.addSignal(void 0,void 0,void 0,e.signalType);break;case"rectStart":this.addSignal(void 0,void 0,e.color,e.signalType);break;case"optStart":this.addSignal(void 0,void 0,e.optText,e.signalType);break;case"altStart":case"else":this.addSignal(void 0,void 0,e.altText,e.signalType);break;case"setAccTitle":zn(e.text);break;case"parStart":case"and":this.addSignal(void 0,void 0,e.parText,e.signalType);break;case"criticalStart":this.addSignal(void 0,void 0,e.criticalText,e.signalType);break;case"option":this.addSignal(void 0,void 0,e.optionText,e.signalType);break;case"breakStart":this.addSignal(void 0,void 0,e.breakText,e.signalType)}}getConfig(){return ke().sequence}},l(S0,"SequenceDB"),S0),z6e=l((t=>`.actor {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }

  text.actor > tspan {
    fill: ${t.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${t.actorLineColor};
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${t.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${t.signalColor};
  }

  #arrowhead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .sequenceNumber {
    fill: ${t.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${t.signalColor};
  }

  #crosshead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .messageText {
    fill: ${t.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${t.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${t.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${t.noteBorderColor};
    fill: ${t.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${t.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation1 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation2 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${t.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
    stroke-width: 2px;
  }
`),"getStyles"),pie=Ci(bv()),xN=l((function(t,e){return lw(t,e)}),"drawRect"),G6e=l((function(t,e,r,n,i){if(e.links===void 0||e.links===null||Object.keys(e.links).length===0)return{height:0,width:0};const a=e.links,s=e.actorCnt,o=e.rectData;var u="none";i&&(u="block !important");const h=t.append("g");h.attr("id","actor"+s+"_popup"),h.attr("class","actorPopupMenu"),h.attr("display",u);var d="";o.class!==void 0&&(d=" "+o.class);let p=o.width>r?o.width:r;const f=h.append("rect");if(f.attr("class","actorPopupMenuPanel"+d),f.attr("x",o.x),f.attr("y",o.height),f.attr("fill",o.fill),f.attr("stroke",o.stroke),f.attr("width",p),f.attr("height",o.height),f.attr("rx",o.rx),f.attr("ry",o.ry),a!=null){var g=20;for(let v in a){var m=h.append("a"),y=(0,pie.sanitizeUrl)(a[v]);m.attr("xlink:href",y),m.attr("target","_blank"),iwe(n)(v,m,o.x+10,o.height+g,p,20,{class:"actor"},n),g+=30}}return f.attr("height",g),{height:o.height+g,width:p}}),"drawPopup"),U6e=l((function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = pu.style.display == 'block' ? 'none' : 'block'; }"}),"popupMenuToggle"),e6=l((async function(t,e,r=null){let n=t.append("foreignObject");const i=await dv(e.text,Sr()),a=n.append("xhtml:div").attr("style","width: fit-content;").attr("xmlns","http://www.w3.org/1999/xhtml").html(i).node().getBoundingClientRect();if(n.attr("height",Math.round(a.height)).attr("width",Math.round(a.width)),e.class==="noteText"){const s=t.node().firstChild;s.setAttribute("height",a.height+2*e.textMargin);const o=s.getBBox();n.attr("x",Math.round(o.x+o.width/2-a.width/2)).attr("y",Math.round(o.y+o.height/2-a.height/2))}else if(r){let{startx:s,stopx:o,starty:u}=r;if(s>o){const h=s;s=o,o=h}n.attr("x",Math.round(s+Math.abs(s-o)/2-a.width/2)),e.class==="loopText"?n.attr("y",Math.round(u)):n.attr("y",Math.round(u-a.height))}return[n]}),"drawKatex"),J0=l((function(t,e){let r=0,n=0;const i=e.text.split(He.lineBreakRegex),[a,s]=fc(e.fontSize);let o=[],u=0,h=l((()=>e.y),"yfunc");if(e.valign!==void 0&&e.textMargin!==void 0&&e.textMargin>0)switch(e.valign){case"top":case"start":h=l((()=>Math.round(e.y+e.textMargin)),"yfunc");break;case"middle":case"center":h=l((()=>Math.round(e.y+(r+n+e.textMargin)/2)),"yfunc");break;case"bottom":case"end":h=l((()=>Math.round(e.y+(r+n+2*e.textMargin)-e.textMargin)),"yfunc")}if(e.anchor!==void 0&&e.textMargin!==void 0&&e.width!==void 0)switch(e.anchor){case"left":case"start":e.x=Math.round(e.x+e.textMargin),e.anchor="start",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"middle":case"center":e.x=Math.round(e.x+e.width/2),e.anchor="middle",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"right":case"end":e.x=Math.round(e.x+e.width-e.textMargin),e.anchor="end",e.dominantBaseline="middle",e.alignmentBaseline="middle"}for(let[d,p]of i.entries()){e.textMargin!==void 0&&e.textMargin===0&&a!==void 0&&(u=d*a);const f=t.append("text");f.attr("x",e.x),f.attr("y",h()),e.anchor!==void 0&&f.attr("text-anchor",e.anchor).attr("dominant-baseline",e.dominantBaseline).attr("alignment-baseline",e.alignmentBaseline),e.fontFamily!==void 0&&f.style("font-family",e.fontFamily),s!==void 0&&f.style("font-size",s),e.fontWeight!==void 0&&f.style("font-weight",e.fontWeight),e.fill!==void 0&&f.attr("fill",e.fill),e.class!==void 0&&f.attr("class",e.class),e.dy!==void 0?f.attr("dy",e.dy):u!==0&&f.attr("dy",u);const g=p||"";if(e.tspan){const m=f.append("tspan");m.attr("x",e.x),e.fill!==void 0&&m.attr("fill",e.fill),m.text(g)}else f.text(g);e.valign!==void 0&&e.textMargin!==void 0&&e.textMargin>0&&(n+=(f._groups||f)[0][0].getBBox().height,r=n),o.push(f)}return o}),"drawText"),fie=l((function(t,e){function r(i,a,s,o,u){return i+","+a+" "+(i+s)+","+a+" "+(i+s)+","+(a+o-u)+" "+(i+s-1.2*u)+","+(a+o)+" "+i+","+(a+o)}l(r,"genPoints");const n=t.append("polygon");return n.attr("points",r(e.x,e.y,e.width,e.height,7)),n.attr("class","labelBox"),e.y=e.y+e.height/2,J0(t,e),n}),"drawLabel"),Ys=-1,gie=l(((t,e,r,n)=>{t.select&&r.forEach((i=>{const a=e.get(i),s=t.select("#actor"+a.actorCnt);!n.mirrorActors&&a.stopy?s.attr("y2",a.stopy+a.height/2):n.mirrorActors&&s.attr("y2",a.stopy)}))}),"fixLifeLineHeights"),q6e=l((function(t,e,r,n){const i=n?e.stopy:e.starty,a=e.x+e.width/2,s=i+e.height,o=t.append("g").lower();var u=o;n||(Ys++,Object.keys(e.links||{}).length&&!r.forceMenus&&u.attr("onclick",U6e(`actor${Ys}_popup`)).attr("cursor","pointer"),u.append("line").attr("id","actor"+Ys).attr("x1",a).attr("y1",s).attr("x2",a).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",e.name),u=o.append("g"),e.actorCnt=Ys,e.links!=null&&u.attr("id","root-"+Ys));const h=ch();var d="actor";e.properties?.class?d=e.properties.class:h.fill="#eaeaea",d+=n?" actor-bottom":" actor-top",h.x=e.x,h.y=i,h.width=e.width,h.height=e.height,h.class=d,h.rx=3,h.ry=3,h.name=e.name;const p=xN(u,h);if(e.rectData=h,e.properties?.icon){const g=e.properties.icon.trim();g.charAt(0)==="@"?_ve(u,h.x+h.width-20,h.y+10,g.substr(1)):Eve(u,h.x+h.width-20,h.y+10,g)}bN(r,Ei(e.description))(e.description,u,h.x,h.y,h.width,h.height,{class:"actor actor-box"},r);let f=e.height;if(p.node){const g=p.node().getBBox();e.height=g.height,f=g.height}return f}),"drawActorTypeParticipant"),j6e=l((function(t,e,r,n){const i=n?e.stopy:e.starty,a=e.x+e.width/2,s=i+80,o=t.append("g").lower();n||(Ys++,o.append("line").attr("id","actor"+Ys).attr("x1",a).attr("y1",s).attr("x2",a).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",e.name),e.actorCnt=Ys);const u=t.append("g");let h="actor-man";h+=n?" actor-bottom":" actor-top",u.attr("class",h),u.attr("name",e.name);const d=ch();d.x=e.x,d.y=i,d.fill="#eaeaea",d.width=e.width,d.height=e.height,d.class="actor",d.rx=3,d.ry=3,u.append("line").attr("id","actor-man-torso"+Ys).attr("x1",a).attr("y1",i+25).attr("x2",a).attr("y2",i+45),u.append("line").attr("id","actor-man-arms"+Ys).attr("x1",a-18).attr("y1",i+33).attr("x2",a+18).attr("y2",i+33),u.append("line").attr("x1",a-18).attr("y1",i+60).attr("x2",a).attr("y2",i+45),u.append("line").attr("x1",a).attr("y1",i+45).attr("x2",a+18-2).attr("y2",i+60);const p=u.append("circle");p.attr("cx",e.x+e.width/2),p.attr("cy",i+10),p.attr("r",15),p.attr("width",e.width),p.attr("height",e.height);const f=u.node().getBBox();return e.height=f.height,bN(r,Ei(e.description))(e.description,u,d.x,d.y+35,d.width,d.height,{class:"actor actor-man"},r),e.height}),"drawActorTypeActor"),W6e=l((async function(t,e,r,n){switch(e.type){case"actor":return await j6e(t,e,r,n);case"participant":return await q6e(t,e,r,n)}}),"drawActor"),Y6e=l((function(t,e,r){const n=t.append("g");mie(n,e),e.name&&bN(r)(e.name,n,e.x,e.y+(e.textMaxHeight||0)/2,e.width,0,{class:"text"},r),n.lower()}),"drawBox"),V6e=l((function(t){return t.append("g")}),"anchorElement"),H6e=l((function(t,e,r,n,i){const a=ch(),s=e.anchored;a.x=e.startx,a.y=e.starty,a.class="activation"+i%3,a.width=e.stopx-e.startx,a.height=r-e.starty,xN(s,a)}),"drawActivation"),X6e=l((async function(t,e,r,n){const{boxMargin:i,boxTextMargin:a,labelBoxHeight:s,labelBoxWidth:o,messageFontFamily:u,messageFontSize:h,messageFontWeight:d}=n,p=t.append("g"),f=l((function(y,v,x,b){return p.append("line").attr("x1",y).attr("y1",v).attr("x2",x).attr("y2",b).attr("class","loopLine")}),"drawLoopLine");f(e.startx,e.starty,e.stopx,e.starty),f(e.stopx,e.starty,e.stopx,e.stopy),f(e.startx,e.stopy,e.stopx,e.stopy),f(e.startx,e.starty,e.startx,e.stopy),e.sections!==void 0&&e.sections.forEach((function(y){f(e.startx,y.y,e.stopx,y.y).style("stroke-dasharray","3, 3")}));let g=qA();g.text=r,g.x=e.startx,g.y=e.starty,g.fontFamily=u,g.fontSize=h,g.fontWeight=d,g.anchor="middle",g.valign="middle",g.tspan=!1,g.width=o||50,g.height=s||20,g.textMargin=a,g.class="labelText",fie(p,g),g=yie(),g.text=e.title,g.x=e.startx+o/2+(e.stopx-e.startx)/2,g.y=e.starty+i+a,g.anchor="middle",g.valign="middle",g.textMargin=a,g.class="loopText",g.fontFamily=u,g.fontSize=h,g.fontWeight=d,g.wrap=!0;let m=Ei(g.text)?await e6(p,g,e):J0(p,g);if(e.sectionTitles!==void 0){for(const[y,v]of Object.entries(e.sectionTitles))if(v.message){g.text=v.message,g.x=e.startx+(e.stopx-e.startx)/2,g.y=e.sections[y].y+i+a,g.class="loopText",g.anchor="middle",g.valign="middle",g.tspan=!1,g.fontFamily=u,g.fontSize=h,g.fontWeight=d,g.wrap=e.wrap,Ei(g.text)?(e.starty=e.sections[y].y,await e6(p,g,e)):J0(p,g);let x=Math.round(m.map((b=>(b._groups||b)[0][0].getBBox().height)).reduce(((b,w)=>b+w)));e.sections[y].height+=x-(i+a)}}return e.height=Math.round(e.stopy-e.starty),p}),"drawLoop"),mie=l((function(t,e){ZJ(t,e)}),"drawBackgroundRect"),K6e=l((function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")}),"insertDatabaseIcon"),Z6e=l((function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")}),"insertComputerIcon"),Q6e=l((function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")}),"insertClockIcon"),J6e=l((function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",7.9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto-start-reverse").append("path").attr("d","M -1 0 L 10 5 L 0 10 z")}),"insertArrowHead"),ewe=l((function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",15.5).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")}),"insertArrowFilledHead"),twe=l((function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)}),"insertSequenceNumber"),rwe=l((function(t){t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",4.5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")}),"insertArrowCrossHead"),yie=l((function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}}),"getTextObj"),nwe=l((function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}}),"getNoteRect"),bN=(function(){function t(a,s,o,u,h,d,p){i(s.append("text").attr("x",o+h/2).attr("y",u+d/2+5).style("text-anchor","middle").text(a),p)}function e(a,s,o,u,h,d,p,f){const{actorFontSize:g,actorFontFamily:m,actorFontWeight:y}=f,[v,x]=fc(g),b=a.split(He.lineBreakRegex);for(let w=0;w<b.length;w++){const T=w*v-v*(b.length-1)/2,k=s.append("text").attr("x",o+h/2).attr("y",u).style("text-anchor","middle").style("font-size",x).style("font-weight",y).style("font-family",m);k.append("tspan").attr("x",o+h/2).attr("dy",T).text(b[w]),k.attr("y",u+d/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),i(k,p)}}function r(a,s,o,u,h,d,p,f){const g=s.append("switch"),m=g.append("foreignObject").attr("x",o).attr("y",u).attr("width",h).attr("height",d).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");m.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(a),e(a,g,o,u,h,d,p,f),i(m,p)}async function n(a,s,o,u,h,d,p,f){const g=await hv(a,Sr()),m=s.append("switch"),y=m.append("foreignObject").attr("x",o+h/2-g.width/2).attr("y",u+d/2-g.height/2).attr("width",g.width).attr("height",g.height).append("xhtml:div").style("height","100%").style("width","100%");y.append("div").style("text-align","center").style("vertical-align","middle").html(await dv(a,Sr())),e(a,m,o,u,h,d,p,f),i(y,p)}function i(a,s){for(const o in s)s.hasOwnProperty(o)&&a.attr(o,s[o])}return l(t,"byText"),l(e,"byTspan"),l(r,"byFo"),l(n,"byKatex"),l(i,"_setTextAttrs"),function(a,s=!1){return s?n:a.textPlacement==="fo"?r:a.textPlacement==="old"?t:e}})(),iwe=(function(){function t(i,a,s,o,u,h,d){n(a.append("text").attr("x",s).attr("y",o).style("text-anchor","start").text(i),d)}function e(i,a,s,o,u,h,d,p){const{actorFontSize:f,actorFontFamily:g,actorFontWeight:m}=p,y=i.split(He.lineBreakRegex);for(let v=0;v<y.length;v++){const x=v*f-f*(y.length-1)/2,b=a.append("text").attr("x",s).attr("y",o).style("text-anchor","start").style("font-size",f).style("font-weight",m).style("font-family",g);b.append("tspan").attr("x",s).attr("dy",x).text(y[v]),b.attr("y",o+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),n(b,d)}}function r(i,a,s,o,u,h,d,p){const f=a.append("switch"),g=f.append("foreignObject").attr("x",s).attr("y",o).attr("width",u).attr("height",h).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");g.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),e(i,f,s,o,0,h,d,p),n(g,d)}function n(i,a){for(const s in a)a.hasOwnProperty(s)&&i.attr(s,a[s])}return l(t,"byText"),l(e,"byTspan"),l(r,"byFo"),l(n,"_setTextAttrs"),function(i){return i.textPlacement==="fo"?r:i.textPlacement==="old"?t:e}})(),gn={drawRect:xN,drawText:J0,drawLabel:fie,drawActor:W6e,drawBox:Y6e,drawPopup:G6e,anchorElement:V6e,drawActivation:H6e,drawLoop:X6e,drawBackgroundRect:mie,insertArrowHead:J6e,insertArrowFilledHead:ewe,insertSequenceNumber:twe,insertArrowCrossHead:rwe,insertDatabaseIcon:K6e,insertComputerIcon:Z6e,insertClockIcon:Q6e,getTextObj:yie,getNoteRect:nwe,fixLifeLineHeights:gie,sanitizeUrl:pie.sanitizeUrl},Ae={},qe={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:l((function(){return Math.max.apply(null,this.actors.length===0?[0]:this.actors.map((t=>t.height||0)))+(this.loops.length===0?0:this.loops.map((t=>t.height||0)).reduce(((t,e)=>t+e)))+(this.messages.length===0?0:this.messages.map((t=>t.height||0)).reduce(((t,e)=>t+e)))+(this.notes.length===0?0:this.notes.map((t=>t.height||0)).reduce(((t,e)=>t+e)))}),"getHeight"),clear:l((function(){this.actors=[],this.boxes=[],this.loops=[],this.messages=[],this.notes=[]}),"clear"),addBox:l((function(t){this.boxes.push(t)}),"addBox"),addActor:l((function(t){this.actors.push(t)}),"addActor"),addLoop:l((function(t){this.loops.push(t)}),"addLoop"),addMessage:l((function(t){this.messages.push(t)}),"addMessage"),addNote:l((function(t){this.notes.push(t)}),"addNote"),lastActor:l((function(){return this.actors[this.actors.length-1]}),"lastActor"),lastLoop:l((function(){return this.loops[this.loops.length-1]}),"lastLoop"),lastMessage:l((function(){return this.messages[this.messages.length-1]}),"lastMessage"),lastNote:l((function(){return this.notes[this.notes.length-1]}),"lastNote"),actors:[],boxes:[],loops:[],messages:[],notes:[]},init:l((function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,bie(ke())}),"init"),updateVal:l((function(t,e,r,n){t[e]===void 0?t[e]=r:t[e]=n(r,t[e])}),"updateVal"),updateBounds:l((function(t,e,r,n){const i=this;let a=0;function s(o){return l((function(u){a++;const h=i.sequenceItems.length-a+1;i.updateVal(u,"starty",e-h*Ae.boxMargin,Math.min),i.updateVal(u,"stopy",n+h*Ae.boxMargin,Math.max),i.updateVal(qe.data,"startx",t-h*Ae.boxMargin,Math.min),i.updateVal(qe.data,"stopx",r+h*Ae.boxMargin,Math.max),o!=="activation"&&(i.updateVal(u,"startx",t-h*Ae.boxMargin,Math.min),i.updateVal(u,"stopx",r+h*Ae.boxMargin,Math.max),i.updateVal(qe.data,"starty",e-h*Ae.boxMargin,Math.min),i.updateVal(qe.data,"stopy",n+h*Ae.boxMargin,Math.max))}),"updateItemBounds")}l(s,"updateFn"),this.sequenceItems.forEach(s()),this.activations.forEach(s("activation"))}),"updateBounds"),insert:l((function(t,e,r,n){const i=He.getMin(t,r),a=He.getMax(t,r),s=He.getMin(e,n),o=He.getMax(e,n);this.updateVal(qe.data,"startx",i,Math.min),this.updateVal(qe.data,"starty",s,Math.min),this.updateVal(qe.data,"stopx",a,Math.max),this.updateVal(qe.data,"stopy",o,Math.max),this.updateBounds(i,s,a,o)}),"insert"),newActivation:l((function(t,e,r){const n=r.get(t.from),i=Zw(t.from).length||0,a=n.x+n.width/2+(i-1)*Ae.activationWidth/2;this.activations.push({startx:a,starty:this.verticalPos+2,stopx:a+Ae.activationWidth,stopy:void 0,actor:t.from,anchored:gn.anchorElement(e)})}),"newActivation"),endActivation:l((function(t){const e=this.activations.map((function(r){return r.actor})).lastIndexOf(t.from);return this.activations.splice(e,1)[0]}),"endActivation"),createLoop:l((function(t={message:void 0,wrap:!1,width:void 0},e){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:t.message,wrap:t.wrap,width:t.width,height:0,fill:e}}),"createLoop"),newLoop:l((function(t={message:void 0,wrap:!1,width:void 0},e){this.sequenceItems.push(this.createLoop(t,e))}),"newLoop"),endLoop:l((function(){return this.sequenceItems.pop()}),"endLoop"),isLoopOverlap:l((function(){return!!this.sequenceItems.length&&this.sequenceItems[this.sequenceItems.length-1].overlap}),"isLoopOverlap"),addSectionToLoop:l((function(t){const e=this.sequenceItems.pop();e.sections=e.sections||[],e.sectionTitles=e.sectionTitles||[],e.sections.push({y:qe.getVerticalPos(),height:0}),e.sectionTitles.push(t),this.sequenceItems.push(e)}),"addSectionToLoop"),saveVerticalPos:l((function(){this.isLoopOverlap()&&(this.savedVerticalPos=this.verticalPos)}),"saveVerticalPos"),resetVerticalPos:l((function(){this.isLoopOverlap()&&(this.verticalPos=this.savedVerticalPos)}),"resetVerticalPos"),bumpVerticalPos:l((function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=He.getMax(this.data.stopy,this.verticalPos)}),"bumpVerticalPos"),getVerticalPos:l((function(){return this.verticalPos}),"getVerticalPos"),getBounds:l((function(){return{bounds:this.data,models:this.models}}),"getBounds")},awe=l((async function(t,e){qe.bumpVerticalPos(Ae.boxMargin),e.height=Ae.boxMargin,e.starty=qe.getVerticalPos();const r=ch();r.x=e.startx,r.y=e.starty,r.width=e.width||Ae.width,r.class="note";const n=t.append("g"),i=gn.drawRect(n,r),a=qA();a.x=e.startx,a.y=e.starty,a.width=r.width,a.dy="1em",a.text=e.message,a.class="noteText",a.fontFamily=Ae.noteFontFamily,a.fontSize=Ae.noteFontSize,a.fontWeight=Ae.noteFontWeight,a.anchor=Ae.noteAlign,a.textMargin=Ae.noteMargin,a.valign="center";const s=Ei(a.text)?await e6(n,a):J0(n,a),o=Math.round(s.map((u=>(u._groups||u)[0][0].getBBox().height)).reduce(((u,h)=>u+h)));i.attr("height",o+2*Ae.noteMargin),e.height+=o+2*Ae.noteMargin,qe.bumpVerticalPos(o+2*Ae.noteMargin),e.stopy=e.starty+o+2*Ae.noteMargin,e.stopx=e.startx+r.width,qe.insert(e.startx,e.starty,e.stopx,e.stopy),qe.models.addNote(e)}),"drawNote"),Ju=l((t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight})),"messageFont"),qh=l((t=>({fontFamily:t.noteFontFamily,fontSize:t.noteFontSize,fontWeight:t.noteFontWeight})),"noteFont"),iS=l((t=>({fontFamily:t.actorFontFamily,fontSize:t.actorFontSize,fontWeight:t.actorFontWeight})),"actorFont");async function vie(t,e){qe.bumpVerticalPos(10);const{startx:r,stopx:n,message:i}=e,a=He.splitBreaks(i).length,s=Ei(i),o=s?await hv(i,ke()):Vt.calculateTextDimensions(i,Ju(Ae));if(!s){const p=o.height/a;e.height+=p,qe.bumpVerticalPos(p)}let u,h=o.height-10;const d=o.width;if(r===n){u=qe.getVerticalPos()+h,Ae.rightAngles||(h+=Ae.boxMargin,u=qe.getVerticalPos()+h),h+=30;const p=He.getMax(d/2,Ae.width/2);qe.insert(r-p,qe.getVerticalPos()-10+h,n+p,qe.getVerticalPos()+30+h)}else h+=Ae.boxMargin,u=qe.getVerticalPos()+h,qe.insert(r,u-10,n,u);return qe.bumpVerticalPos(h),e.height+=h,e.stopy=e.starty+e.height,qe.insert(e.fromBounds,e.starty,e.toBounds,e.stopy),u}l(vie,"boundMessage");var swe=l((async function(t,e,r,n){const{startx:i,stopx:a,starty:s,message:o,type:u,sequenceIndex:h,sequenceVisible:d}=e,p=Vt.calculateTextDimensions(o,Ju(Ae)),f=qA();f.x=i,f.y=s+10,f.width=a-i,f.class="messageText",f.dy="1em",f.text=o,f.fontFamily=Ae.messageFontFamily,f.fontSize=Ae.messageFontSize,f.fontWeight=Ae.messageFontWeight,f.anchor=Ae.messageAlign,f.valign="center",f.textMargin=Ae.wrapPadding,f.tspan=!1,Ei(f.text)?await e6(t,f,{startx:i,stopx:a,starty:r}):J0(t,f);const g=p.width;let m;i===a?m=Ae.rightAngles?t.append("path").attr("d",`M  ${i},${r} H ${i+He.getMax(Ae.width/2,g/2)} V ${r+25} H ${i}`):t.append("path").attr("d","M "+i+","+r+" C "+(i+60)+","+(r-10)+" "+(i+60)+","+(r+30)+" "+i+","+(r+20)):(m=t.append("line"),m.attr("x1",i),m.attr("y1",r),m.attr("x2",a),m.attr("y2",r)),u===n.db.LINETYPE.DOTTED||u===n.db.LINETYPE.DOTTED_CROSS||u===n.db.LINETYPE.DOTTED_POINT||u===n.db.LINETYPE.DOTTED_OPEN||u===n.db.LINETYPE.BIDIRECTIONAL_DOTTED?(m.style("stroke-dasharray","3, 3"),m.attr("class","messageLine1")):m.attr("class","messageLine0");let y="";Ae.arrowMarkerAbsolute&&(y=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,y=y.replace(/\(/g,"\\("),y=y.replace(/\)/g,"\\)")),m.attr("stroke-width",2),m.attr("stroke","none"),m.style("fill","none"),u!==n.db.LINETYPE.SOLID&&u!==n.db.LINETYPE.DOTTED||m.attr("marker-end","url("+y+"#arrowhead)"),u!==n.db.LINETYPE.BIDIRECTIONAL_SOLID&&u!==n.db.LINETYPE.BIDIRECTIONAL_DOTTED||(m.attr("marker-start","url("+y+"#arrowhead)"),m.attr("marker-end","url("+y+"#arrowhead)")),u!==n.db.LINETYPE.SOLID_POINT&&u!==n.db.LINETYPE.DOTTED_POINT||m.attr("marker-end","url("+y+"#filled-head)"),u!==n.db.LINETYPE.SOLID_CROSS&&u!==n.db.LINETYPE.DOTTED_CROSS||m.attr("marker-end","url("+y+"#crosshead)"),(d||Ae.showSequenceNumbers)&&(m.attr("marker-start","url("+y+"#sequencenumber)"),t.append("text").attr("x",i).attr("y",r+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(h))}),"drawMessage"),owe=l((function(t,e,r,n,i,a,s){let o,u=0,h=0,d=0;for(const p of n){const f=e.get(p),g=f.box;o&&o!=g&&(s||qe.models.addBox(o),h+=Ae.boxMargin+o.margin),g&&g!=o&&(s||(g.x=u+h,g.y=i),h+=g.margin),f.width=f.width||Ae.width,f.height=He.getMax(f.height||Ae.height,Ae.height),f.margin=f.margin||Ae.actorMargin,d=He.getMax(d,f.height),r.get(f.name)&&(h+=f.width/2),f.x=u+h,f.starty=qe.getVerticalPos(),qe.insert(f.x,i,f.x+f.width,f.height),u+=f.width+h,f.box&&(f.box.width=u+g.margin-f.box.x),h=f.margin,o=f.box,qe.models.addActor(f)}o&&!s&&qe.models.addBox(o),qe.bumpVerticalPos(d)}),"addActorRenderingData"),aS=l((async function(t,e,r,n){if(n){let i=0;qe.bumpVerticalPos(2*Ae.boxMargin);for(const a of r){const s=e.get(a);s.stopy||(s.stopy=qe.getVerticalPos());const o=await gn.drawActor(t,s,Ae,!0);i=He.getMax(i,o)}qe.bumpVerticalPos(i+Ae.boxMargin)}else for(const i of r){const a=e.get(i);await gn.drawActor(t,a,Ae,!1)}}),"drawActors"),xie=l((function(t,e,r,n){let i=0,a=0;for(const s of r){const o=e.get(s),u=cwe(o),h=gn.drawPopup(t,o,u,Ae,Ae.forceMenus,n);h.height>i&&(i=h.height),h.width+o.x>a&&(a=h.width+o.x)}return{maxHeight:i,maxWidth:a}}),"drawActorsPopup"),bie=l((function(t){On(Ae,t),t.fontFamily&&(Ae.actorFontFamily=Ae.noteFontFamily=Ae.messageFontFamily=t.fontFamily),t.fontSize&&(Ae.actorFontSize=Ae.noteFontSize=Ae.messageFontSize=t.fontSize),t.fontWeight&&(Ae.actorFontWeight=Ae.noteFontWeight=Ae.messageFontWeight=t.fontWeight)}),"setConf"),Zw=l((function(t){return qe.activations.filter((function(e){return e.actor===t}))}),"actorActivations"),PO=l((function(t,e){const r=e.get(t),n=Zw(t);return[n.reduce((function(i,a){return He.getMin(i,a.startx)}),r.x+r.width/2-1),n.reduce((function(i,a){return He.getMax(i,a.stopx)}),r.x+r.width/2+1)]}),"activationBounds");function os(t,e,r,n,i){qe.bumpVerticalPos(r);let a=n;if(e.id&&e.message&&t[e.id]){const s=t[e.id].width,o=Ju(Ae);e.message=Vt.wrapLabel(`[${e.message}]`,s-2*Ae.wrapPadding,o),e.width=s,e.wrap=!0;const u=Vt.calculateTextDimensions(e.message,o),h=He.getMax(u.height,Ae.labelBoxHeight);a=n+h,ee.debug(`${h} - ${e.message}`)}i(e),qe.bumpVerticalPos(a)}function wie(t,e,r,n,i,a,s){function o(h,d){h.x<i.get(t.from).x?(qe.insert(e.stopx-d,e.starty,e.startx,e.stopy+h.height/2+Ae.noteMargin),e.stopx=e.stopx+d):(qe.insert(e.startx,e.starty,e.stopx+d,e.stopy+h.height/2+Ae.noteMargin),e.stopx=e.stopx-d)}function u(h,d){h.x<i.get(t.to).x?(qe.insert(e.startx-d,e.starty,e.stopx,e.stopy+h.height/2+Ae.noteMargin),e.startx=e.startx+d):(qe.insert(e.stopx,e.starty,e.startx+d,e.stopy+h.height/2+Ae.noteMargin),e.startx=e.startx-d)}if(l(o,"receiverAdjustment"),l(u,"senderAdjustment"),a.get(t.to)==n){const h=i.get(t.to);o(h,h.type=="actor"?21:h.width/2+3),h.starty=r-h.height/2,qe.bumpVerticalPos(h.height/2)}else if(s.get(t.from)==n){const h=i.get(t.from);Ae.mirrorActors&&u(h,h.type=="actor"?18:h.width/2),h.stopy=r-h.height/2,qe.bumpVerticalPos(h.height/2)}else if(s.get(t.to)==n){const h=i.get(t.to);Ae.mirrorActors&&o(h,h.type=="actor"?21:h.width/2+3),h.stopy=r-h.height/2,qe.bumpVerticalPos(h.height/2)}}l(os,"adjustLoopHeightForWrap"),l(wie,"adjustCreatedDestroyedData");var lwe=l((async function(t,e,r,n){const{securityLevel:i,sequence:a}=ke();let s;Ae=a,i==="sandbox"&&(s=Ze("#i"+e));const o=Ze(i==="sandbox"?s.nodes()[0].contentDocument.body:"body"),u=i==="sandbox"?s.nodes()[0].contentDocument:document;qe.init(),ee.debug(n.db);const h=i==="sandbox"?o.select(`[id="${e}"]`):Ze(`[id="${e}"]`),d=n.db.getActors(),p=n.db.getCreatedActors(),f=n.db.getDestroyedActors(),g=n.db.getBoxes();let m=n.db.getActorKeys();const y=n.db.getMessages(),v=n.db.getDiagramTitle(),x=n.db.hasAtLeastOneBox(),b=n.db.hasAtLeastOneBoxWithTitle(),w=await kie(d,y,n);if(Ae.height=await Tie(d,w,g),gn.insertComputerIcon(h),gn.insertDatabaseIcon(h),gn.insertClockIcon(h),x&&(qe.bumpVerticalPos(Ae.boxMargin),b&&qe.bumpVerticalPos(g[0].textMaxHeight)),Ae.hideUnusedParticipants===!0){const R=new Set;y.forEach((P=>{R.add(P.from),R.add(P.to)})),m=m.filter((P=>R.has(P)))}owe(h,d,p,m,0,y,!1);const T=await dwe(y,d,w,n);function k(R,P){const $=qe.endActivation(R);$.starty+18>P&&($.starty=P-6,P+=12),gn.drawActivation(h,$,P,Ae,Zw(R.from).length),qe.insert($.startx,P-10,$.stopx,P)}gn.insertArrowHead(h),gn.insertArrowCrossHead(h),gn.insertArrowFilledHead(h),gn.insertSequenceNumber(h),l(k,"activeEnd");let C=1,E=1;const _=[],S=[];let N=0;for(const R of y){let P,$,z;switch(R.type){case n.db.LINETYPE.NOTE:qe.resetVerticalPos(),$=R.noteModel,await awe(h,$);break;case n.db.LINETYPE.ACTIVE_START:qe.newActivation(R,h,d);break;case n.db.LINETYPE.ACTIVE_END:k(R,qe.getVerticalPos());break;case n.db.LINETYPE.LOOP_START:os(T,R,Ae.boxMargin,Ae.boxMargin+Ae.boxTextMargin,(q=>qe.newLoop(q)));break;case n.db.LINETYPE.LOOP_END:P=qe.endLoop(),await gn.drawLoop(h,P,"loop",Ae),qe.bumpVerticalPos(P.stopy-qe.getVerticalPos()),qe.models.addLoop(P);break;case n.db.LINETYPE.RECT_START:os(T,R,Ae.boxMargin,Ae.boxMargin,(q=>qe.newLoop(void 0,q.message)));break;case n.db.LINETYPE.RECT_END:P=qe.endLoop(),S.push(P),qe.models.addLoop(P),qe.bumpVerticalPos(P.stopy-qe.getVerticalPos());break;case n.db.LINETYPE.OPT_START:os(T,R,Ae.boxMargin,Ae.boxMargin+Ae.boxTextMargin,(q=>qe.newLoop(q)));break;case n.db.LINETYPE.OPT_END:P=qe.endLoop(),await gn.drawLoop(h,P,"opt",Ae),qe.bumpVerticalPos(P.stopy-qe.getVerticalPos()),qe.models.addLoop(P);break;case n.db.LINETYPE.ALT_START:os(T,R,Ae.boxMargin,Ae.boxMargin+Ae.boxTextMargin,(q=>qe.newLoop(q)));break;case n.db.LINETYPE.ALT_ELSE:os(T,R,Ae.boxMargin+Ae.boxTextMargin,Ae.boxMargin,(q=>qe.addSectionToLoop(q)));break;case n.db.LINETYPE.ALT_END:P=qe.endLoop(),await gn.drawLoop(h,P,"alt",Ae),qe.bumpVerticalPos(P.stopy-qe.getVerticalPos()),qe.models.addLoop(P);break;case n.db.LINETYPE.PAR_START:case n.db.LINETYPE.PAR_OVER_START:os(T,R,Ae.boxMargin,Ae.boxMargin+Ae.boxTextMargin,(q=>qe.newLoop(q))),qe.saveVerticalPos();break;case n.db.LINETYPE.PAR_AND:os(T,R,Ae.boxMargin+Ae.boxTextMargin,Ae.boxMargin,(q=>qe.addSectionToLoop(q)));break;case n.db.LINETYPE.PAR_END:P=qe.endLoop(),await gn.drawLoop(h,P,"par",Ae),qe.bumpVerticalPos(P.stopy-qe.getVerticalPos()),qe.models.addLoop(P);break;case n.db.LINETYPE.AUTONUMBER:C=R.message.start||C,E=R.message.step||E,R.message.visible?n.db.enableSequenceNumbers():n.db.disableSequenceNumbers();break;case n.db.LINETYPE.CRITICAL_START:os(T,R,Ae.boxMargin,Ae.boxMargin+Ae.boxTextMargin,(q=>qe.newLoop(q)));break;case n.db.LINETYPE.CRITICAL_OPTION:os(T,R,Ae.boxMargin+Ae.boxTextMargin,Ae.boxMargin,(q=>qe.addSectionToLoop(q)));break;case n.db.LINETYPE.CRITICAL_END:P=qe.endLoop(),await gn.drawLoop(h,P,"critical",Ae),qe.bumpVerticalPos(P.stopy-qe.getVerticalPos()),qe.models.addLoop(P);break;case n.db.LINETYPE.BREAK_START:os(T,R,Ae.boxMargin,Ae.boxMargin+Ae.boxTextMargin,(q=>qe.newLoop(q)));break;case n.db.LINETYPE.BREAK_END:P=qe.endLoop(),await gn.drawLoop(h,P,"break",Ae),qe.bumpVerticalPos(P.stopy-qe.getVerticalPos()),qe.models.addLoop(P);break;default:try{z=R.msgModel,z.starty=qe.getVerticalPos(),z.sequenceIndex=C,z.sequenceVisible=n.db.showSequenceNumbers();const q=await vie(0,z);wie(R,z,q,N,d,p,f),_.push({messageModel:z,lineStartY:q}),qe.models.addMessage(z)}catch(q){ee.error("error while drawing message",q)}}[n.db.LINETYPE.SOLID_OPEN,n.db.LINETYPE.DOTTED_OPEN,n.db.LINETYPE.SOLID,n.db.LINETYPE.DOTTED,n.db.LINETYPE.SOLID_CROSS,n.db.LINETYPE.DOTTED_CROSS,n.db.LINETYPE.SOLID_POINT,n.db.LINETYPE.DOTTED_POINT,n.db.LINETYPE.BIDIRECTIONAL_SOLID,n.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(R.type)&&(C+=E),N++}ee.debug("createdActors",p),ee.debug("destroyedActors",f),await aS(h,d,m,!1);for(const R of _)await swe(h,R.messageModel,R.lineStartY,n);Ae.mirrorActors&&await aS(h,d,m,!0),S.forEach((R=>gn.drawBackgroundRect(h,R))),gie(h,d,m,Ae);for(const R of qe.models.boxes)R.height=qe.getVerticalPos()-R.y,qe.insert(R.x,R.y,R.x+R.width,R.height),R.startx=R.x,R.starty=R.y,R.stopx=R.startx+R.width,R.stopy=R.starty+R.height,R.stroke="rgb(0,0,0, 0.5)",gn.drawBox(h,R,Ae);x&&qe.bumpVerticalPos(Ae.boxMargin);const O=xie(h,d,m,u),{bounds:B}=qe.getBounds();B.startx===void 0&&(B.startx=0),B.starty===void 0&&(B.starty=0),B.stopx===void 0&&(B.stopx=0),B.stopy===void 0&&(B.stopy=0);let L=B.stopy-B.starty;L<O.maxHeight&&(L=O.maxHeight);let I=L+2*Ae.diagramMarginY;Ae.mirrorActors&&(I=I-Ae.boxMargin+Ae.bottomMarginAdj);let A=B.stopx-B.startx;A<O.maxWidth&&(A=O.maxWidth);const M=A+2*Ae.diagramMarginX;v&&h.append("text").text(v).attr("x",(B.stopx-B.startx)/2-2*Ae.diagramMarginX).attr("y",-25),da(h,I,M,Ae.useMaxWidth);const D=v?40:0;h.attr("viewBox",B.startx-Ae.diagramMarginX+" -"+(Ae.diagramMarginY+D)+" "+M+" "+(I+D)),ee.debug("models:",qe.models)}),"draw");async function kie(t,e,r){const n={};for(const i of e)if(t.get(i.to)&&t.get(i.from)){const a=t.get(i.to);if(i.placement===r.db.PLACEMENT.LEFTOF&&!a.prevActor||i.placement===r.db.PLACEMENT.RIGHTOF&&!a.nextActor)continue;const s=i.placement!==void 0,o=!s,u=s?qh(Ae):Ju(Ae),h=i.wrap?Vt.wrapLabel(i.message,Ae.width-2*Ae.wrapPadding,u):i.message,d=(Ei(h)?await hv(i.message,ke()):Vt.calculateTextDimensions(h,u)).width+2*Ae.wrapPadding;o&&i.from===a.nextActor?n[i.to]=He.getMax(n[i.to]||0,d):o&&i.from===a.prevActor?n[i.from]=He.getMax(n[i.from]||0,d):o&&i.from===i.to?(n[i.from]=He.getMax(n[i.from]||0,d/2),n[i.to]=He.getMax(n[i.to]||0,d/2)):i.placement===r.db.PLACEMENT.RIGHTOF?n[i.from]=He.getMax(n[i.from]||0,d):i.placement===r.db.PLACEMENT.LEFTOF?n[a.prevActor]=He.getMax(n[a.prevActor]||0,d):i.placement===r.db.PLACEMENT.OVER&&(a.prevActor&&(n[a.prevActor]=He.getMax(n[a.prevActor]||0,d/2)),a.nextActor&&(n[i.from]=He.getMax(n[i.from]||0,d/2)))}return ee.debug("maxMessageWidthPerActor:",n),n}l(kie,"getMaxMessageWidthPerActor");var cwe=l((function(t){let e=0;const r=iS(Ae);for(const n in t.links){const i=Vt.calculateTextDimensions(n,r).width+2*Ae.wrapPadding+2*Ae.boxMargin;e<i&&(e=i)}return e}),"getRequiredPopupWidth");async function Tie(t,e,r){let n=0;for(const a of t.keys()){const s=t.get(a);s.wrap&&(s.description=Vt.wrapLabel(s.description,Ae.width-2*Ae.wrapPadding,iS(Ae)));const o=Ei(s.description)?await hv(s.description,ke()):Vt.calculateTextDimensions(s.description,iS(Ae));s.width=s.wrap?Ae.width:He.getMax(Ae.width,o.width+2*Ae.wrapPadding),s.height=s.wrap?He.getMax(o.height,Ae.height):Ae.height,n=He.getMax(n,s.height)}for(const a in e){const s=t.get(a);if(!s)continue;const o=t.get(s.nextActor);if(!o){const h=e[a]+Ae.actorMargin-s.width/2;s.margin=He.getMax(h,Ae.actorMargin);continue}const u=e[a]+Ae.actorMargin-s.width/2-o.width/2;s.margin=He.getMax(u,Ae.actorMargin)}let i=0;return r.forEach((a=>{const s=Ju(Ae);let o=a.actorKeys.reduce(((d,p)=>d+(t.get(p).width+(t.get(p).margin||0))),0);o-=2*Ae.boxTextMargin,a.wrap&&(a.name=Vt.wrapLabel(a.name,o-2*Ae.wrapPadding,s));const u=Vt.calculateTextDimensions(a.name,s);i=He.getMax(u.height,i);const h=He.getMax(o,u.width+2*Ae.wrapPadding);if(a.margin=Ae.boxTextMargin,o<h){const d=(h-o)/2;a.margin+=d}})),r.forEach((a=>a.textMaxHeight=i)),He.getMax(n,Ae.height)}l(Tie,"calculateActorMargins");var uwe=l((async function(t,e,r){const n=e.get(t.from),i=e.get(t.to),a=n.x,s=i.x,o=t.wrap&&t.message;let u=Ei(t.message)?await hv(t.message,ke()):Vt.calculateTextDimensions(o?Vt.wrapLabel(t.message,Ae.width,qh(Ae)):t.message,qh(Ae));const h={width:o?Ae.width:He.getMax(Ae.width,u.width+2*Ae.noteMargin),height:0,startx:n.x,stopx:0,starty:0,stopy:0,message:t.message};return t.placement===r.db.PLACEMENT.RIGHTOF?(h.width=o?He.getMax(Ae.width,u.width):He.getMax(n.width/2+i.width/2,u.width+2*Ae.noteMargin),h.startx=a+(n.width+Ae.actorMargin)/2):t.placement===r.db.PLACEMENT.LEFTOF?(h.width=o?He.getMax(Ae.width,u.width+2*Ae.noteMargin):He.getMax(n.width/2+i.width/2,u.width+2*Ae.noteMargin),h.startx=a-h.width+(n.width-Ae.actorMargin)/2):t.to===t.from?(u=Vt.calculateTextDimensions(o?Vt.wrapLabel(t.message,He.getMax(Ae.width,n.width),qh(Ae)):t.message,qh(Ae)),h.width=o?He.getMax(Ae.width,n.width):He.getMax(n.width,Ae.width,u.width+2*Ae.noteMargin),h.startx=a+(n.width-h.width)/2):(h.width=Math.abs(a+n.width/2-(s+i.width/2))+Ae.actorMargin,h.startx=a<s?a+n.width/2-Ae.actorMargin/2:s+i.width/2-Ae.actorMargin/2),o&&(h.message=Vt.wrapLabel(t.message,h.width-2*Ae.wrapPadding,qh(Ae))),ee.debug(`NM:[${h.startx},${h.stopx},${h.starty},${h.stopy}:${h.width},${h.height}=${t.message}]`),h}),"buildNoteModel"),hwe=l((function(t,e,r){if(![r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN,r.db.LINETYPE.SOLID,r.db.LINETYPE.DOTTED,r.db.LINETYPE.SOLID_CROSS,r.db.LINETYPE.DOTTED_CROSS,r.db.LINETYPE.SOLID_POINT,r.db.LINETYPE.DOTTED_POINT,r.db.LINETYPE.BIDIRECTIONAL_SOLID,r.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(t.type))return{};const[n,i]=PO(t.from,e),[a,s]=PO(t.to,e),o=n<=a;let u=o?i:n,h=o?a:s;const d=Math.abs(a-s)>2,p=l((y=>o?-y:y),"adjustValue");t.from===t.to?h=u:(t.activate&&!d&&(h+=p(Ae.activationWidth/2-1)),[r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN].includes(t.type)||(h+=p(3)),[r.db.LINETYPE.BIDIRECTIONAL_SOLID,r.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(t.type)&&(u-=p(3)));const f=[n,i,a,s],g=Math.abs(u-h);t.wrap&&t.message&&(t.message=Vt.wrapLabel(t.message,He.getMax(g+2*Ae.wrapPadding,Ae.width),Ju(Ae)));const m=Vt.calculateTextDimensions(t.message,Ju(Ae));return{width:He.getMax(t.wrap?0:m.width+2*Ae.wrapPadding,g+2*Ae.wrapPadding,Ae.width),height:0,startx:u,stopx:h,starty:0,stopy:0,message:t.message,type:t.type,wrap:t.wrap,fromBounds:Math.min.apply(null,f),toBounds:Math.max.apply(null,f)}}),"buildMessageModel"),dwe=l((async function(t,e,r,n){const i={},a=[];let s,o,u;for(const h of t){switch(h.type){case n.db.LINETYPE.LOOP_START:case n.db.LINETYPE.ALT_START:case n.db.LINETYPE.OPT_START:case n.db.LINETYPE.PAR_START:case n.db.LINETYPE.PAR_OVER_START:case n.db.LINETYPE.CRITICAL_START:case n.db.LINETYPE.BREAK_START:a.push({id:h.id,msg:h.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case n.db.LINETYPE.ALT_ELSE:case n.db.LINETYPE.PAR_AND:case n.db.LINETYPE.CRITICAL_OPTION:h.message&&(s=a.pop(),i[s.id]=s,i[h.id]=s,a.push(s));break;case n.db.LINETYPE.LOOP_END:case n.db.LINETYPE.ALT_END:case n.db.LINETYPE.OPT_END:case n.db.LINETYPE.PAR_END:case n.db.LINETYPE.CRITICAL_END:case n.db.LINETYPE.BREAK_END:s=a.pop(),i[s.id]=s;break;case n.db.LINETYPE.ACTIVE_START:{const d=e.get(h.from?h.from:h.to.actor),p=Zw(h.from?h.from:h.to.actor).length,f=d.x+d.width/2+(p-1)*Ae.activationWidth/2,g={startx:f,stopx:f+Ae.activationWidth,actor:h.from,enabled:!0};qe.activations.push(g)}break;case n.db.LINETYPE.ACTIVE_END:{const d=qe.activations.map((p=>p.actor)).lastIndexOf(h.from);qe.activations.splice(d,1).splice(0,1)}}h.placement!==void 0?(o=await uwe(h,e,n),h.noteModel=o,a.forEach((d=>{s=d,s.from=He.getMin(s.from,o.startx),s.to=He.getMax(s.to,o.startx+o.width),s.width=He.getMax(s.width,Math.abs(s.from-s.to))-Ae.labelBoxWidth}))):(u=hwe(h,e,n),h.msgModel=u,u.startx&&u.stopx&&a.length>0&&a.forEach((d=>{if(s=d,u.startx===u.stopx){const p=e.get(h.from),f=e.get(h.to);s.from=He.getMin(p.x-u.width/2,p.x-p.width/2,s.from),s.to=He.getMax(f.x+u.width/2,f.x+p.width/2,s.to),s.width=He.getMax(s.width,Math.abs(s.to-s.from))-Ae.labelBoxWidth}else s.from=He.getMin(u.startx,s.from),s.to=He.getMax(u.stopx,s.to),s.width=He.getMax(s.width,u.width)-Ae.labelBoxWidth})))}return qe.activations=[],ee.debug("Loop type widths:",i),i}),"calculateLoopBounds"),pwe={parser:O6e,get db(){return new F6e},renderer:{bounds:qe,drawActors:aS,drawActorsPopup:xie,setConf:bie,draw:lwe},styles:z6e,init:l((t=>{t.sequence||(t.sequence={}),t.wrap&&(t.sequence.wrap=t.wrap,KT({sequence:{wrap:t.wrap}}))}),"init")},fwe=Object.freeze({__proto__:null,diagram:pwe}),sS=(function(){var t=l((function(Pe,j,pe,X){for(pe=pe||{},X=Pe.length;X--;pe[Pe[X]]=j);return pe}),"o"),e=[1,18],r=[1,19],n=[1,20],i=[1,41],a=[1,42],s=[1,26],o=[1,24],u=[1,25],h=[1,32],d=[1,33],p=[1,34],f=[1,45],g=[1,35],m=[1,36],y=[1,37],v=[1,38],x=[1,27],b=[1,28],w=[1,29],T=[1,30],k=[1,31],C=[1,44],E=[1,46],_=[1,43],S=[1,47],N=[1,9],O=[1,8,9],B=[1,58],L=[1,59],I=[1,60],A=[1,61],M=[1,62],D=[1,63],R=[1,64],P=[1,8,9,41],$=[1,76],z=[1,8,9,12,13,22,39,41,44,66,67,68,69,70,71,72,77,79],q=[1,8,9,12,13,17,20,22,39,41,44,48,58,66,67,68,69,70,71,72,77,79,84,99,101,102],W=[13,58,84,99,101,102],Q=[13,58,71,72,84,99,101,102],te=[13,58,66,67,68,69,70,84,99,101,102],oe=[1,98],re=[1,115],H=[1,107],K=[1,113],ie=[1,108],ne=[1,109],J=[1,110],ue=[1,111],Y=[1,112],se=[1,114],de=[22,58,59,80,84,85,86,87,88,89],ce=[1,8,9,39,41,44],Ee=[1,8,9,22],ve=[1,143],De=[1,8,9,59],Ue=[1,8,9,22,58,59,80,84,85,86,87,88,89],ze={trace:l((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statements:5,graphConfig:6,CLASS_DIAGRAM:7,NEWLINE:8,EOF:9,statement:10,classLabel:11,SQS:12,STR:13,SQE:14,namespaceName:15,alphaNumToken:16,DOT:17,className:18,classLiteralName:19,GENERICTYPE:20,relationStatement:21,LABEL:22,namespaceStatement:23,classStatement:24,memberStatement:25,annotationStatement:26,clickStatement:27,styleStatement:28,cssClassStatement:29,noteStatement:30,classDefStatement:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,namespaceIdentifier:38,STRUCT_START:39,classStatements:40,STRUCT_STOP:41,NAMESPACE:42,classIdentifier:43,STYLE_SEPARATOR:44,members:45,CLASS:46,ANNOTATION_START:47,ANNOTATION_END:48,MEMBER:49,SEPARATOR:50,relation:51,NOTE_FOR:52,noteText:53,NOTE:54,CLASSDEF:55,classList:56,stylesOpt:57,ALPHA:58,COMMA:59,direction_tb:60,direction_bt:61,direction_rl:62,direction_lr:63,relationType:64,lineType:65,AGGREGATION:66,EXTENSION:67,COMPOSITION:68,DEPENDENCY:69,LOLLIPOP:70,LINE:71,DOTTED_LINE:72,CALLBACK:73,LINK:74,LINK_TARGET:75,CLICK:76,CALLBACK_NAME:77,CALLBACK_ARGS:78,HREF:79,STYLE:80,CSSCLASS:81,style:82,styleComponent:83,NUM:84,COLON:85,UNIT:86,SPACE:87,BRKT:88,PCT:89,commentToken:90,textToken:91,graphCodeTokens:92,textNoTagsToken:93,TAGSTART:94,TAGEND:95,"==":96,"--":97,DEFAULT:98,MINUS:99,keywords:100,UNICODE_TEXT:101,BQUOTE_STR:102,$accept:0,$end:1},terminals_:{2:"error",7:"CLASS_DIAGRAM",8:"NEWLINE",9:"EOF",12:"SQS",13:"STR",14:"SQE",17:"DOT",20:"GENERICTYPE",22:"LABEL",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",39:"STRUCT_START",41:"STRUCT_STOP",42:"NAMESPACE",44:"STYLE_SEPARATOR",46:"CLASS",47:"ANNOTATION_START",48:"ANNOTATION_END",49:"MEMBER",50:"SEPARATOR",52:"NOTE_FOR",54:"NOTE",55:"CLASSDEF",58:"ALPHA",59:"COMMA",60:"direction_tb",61:"direction_bt",62:"direction_rl",63:"direction_lr",66:"AGGREGATION",67:"EXTENSION",68:"COMPOSITION",69:"DEPENDENCY",70:"LOLLIPOP",71:"LINE",72:"DOTTED_LINE",73:"CALLBACK",74:"LINK",75:"LINK_TARGET",76:"CLICK",77:"CALLBACK_NAME",78:"CALLBACK_ARGS",79:"HREF",80:"STYLE",81:"CSSCLASS",84:"NUM",85:"COLON",86:"UNIT",87:"SPACE",88:"BRKT",89:"PCT",92:"graphCodeTokens",94:"TAGSTART",95:"TAGEND",96:"==",97:"--",98:"DEFAULT",99:"MINUS",100:"keywords",101:"UNICODE_TEXT",102:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[4,1],[6,4],[5,1],[5,2],[5,3],[11,3],[15,1],[15,3],[15,2],[18,1],[18,3],[18,1],[18,2],[18,2],[18,2],[10,1],[10,2],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[23,4],[23,5],[38,2],[40,1],[40,2],[40,3],[24,1],[24,3],[24,4],[24,6],[43,2],[43,3],[26,4],[45,1],[45,2],[25,1],[25,2],[25,1],[25,1],[21,3],[21,4],[21,4],[21,5],[30,3],[30,2],[31,3],[56,1],[56,3],[32,1],[32,1],[32,1],[32,1],[51,3],[51,2],[51,2],[51,1],[64,1],[64,1],[64,1],[64,1],[64,1],[65,1],[65,1],[27,3],[27,4],[27,3],[27,4],[27,4],[27,5],[27,3],[27,4],[27,4],[27,5],[27,4],[27,5],[27,5],[27,6],[28,3],[29,3],[57,1],[57,3],[82,1],[82,2],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[90,1],[90,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[93,1],[93,1],[93,1],[93,1],[16,1],[16,1],[16,1],[16,1],[19,1],[53,1]],performAction:l((function(Pe,j,pe,X,ge,G,le){var V=G.length-1;switch(ge){case 8:this.$=G[V-1];break;case 9:case 12:case 14:this.$=G[V];break;case 10:case 13:this.$=G[V-2]+"."+G[V];break;case 11:case 15:case 95:this.$=G[V-1]+G[V];break;case 16:case 17:this.$=G[V-1]+"~"+G[V]+"~";break;case 18:X.addRelation(G[V]);break;case 19:G[V-1].title=X.cleanupLabel(G[V]),X.addRelation(G[V-1]);break;case 30:this.$=G[V].trim(),X.setAccTitle(this.$);break;case 31:case 32:this.$=G[V].trim(),X.setAccDescription(this.$);break;case 33:X.addClassesToNamespace(G[V-3],G[V-1]);break;case 34:X.addClassesToNamespace(G[V-4],G[V-1]);break;case 35:this.$=G[V],X.addNamespace(G[V]);break;case 36:case 46:case 59:case 92:this.$=[G[V]];break;case 37:this.$=[G[V-1]];break;case 38:G[V].unshift(G[V-2]),this.$=G[V];break;case 40:X.setCssClass(G[V-2],G[V]);break;case 41:X.addMembers(G[V-3],G[V-1]);break;case 42:X.setCssClass(G[V-5],G[V-3]),X.addMembers(G[V-5],G[V-1]);break;case 43:this.$=G[V],X.addClass(G[V]);break;case 44:this.$=G[V-1],X.addClass(G[V-1]),X.setClassLabel(G[V-1],G[V]);break;case 45:X.addAnnotation(G[V],G[V-2]);break;case 47:G[V].push(G[V-1]),this.$=G[V];break;case 48:case 50:case 51:break;case 49:X.addMember(G[V-1],X.cleanupLabel(G[V]));break;case 52:this.$={id1:G[V-2],id2:G[V],relation:G[V-1],relationTitle1:"none",relationTitle2:"none"};break;case 53:this.$={id1:G[V-3],id2:G[V],relation:G[V-1],relationTitle1:G[V-2],relationTitle2:"none"};break;case 54:this.$={id1:G[V-3],id2:G[V],relation:G[V-2],relationTitle1:"none",relationTitle2:G[V-1]};break;case 55:this.$={id1:G[V-4],id2:G[V],relation:G[V-2],relationTitle1:G[V-3],relationTitle2:G[V-1]};break;case 56:X.addNote(G[V],G[V-1]);break;case 57:X.addNote(G[V]);break;case 58:this.$=G[V-2],X.defineClass(G[V-1],G[V]);break;case 60:this.$=G[V-2].concat([G[V]]);break;case 61:X.setDirection("TB");break;case 62:X.setDirection("BT");break;case 63:X.setDirection("RL");break;case 64:X.setDirection("LR");break;case 65:this.$={type1:G[V-2],type2:G[V],lineType:G[V-1]};break;case 66:this.$={type1:"none",type2:G[V],lineType:G[V-1]};break;case 67:this.$={type1:G[V-1],type2:"none",lineType:G[V]};break;case 68:this.$={type1:"none",type2:"none",lineType:G[V]};break;case 69:this.$=X.relationType.AGGREGATION;break;case 70:this.$=X.relationType.EXTENSION;break;case 71:this.$=X.relationType.COMPOSITION;break;case 72:this.$=X.relationType.DEPENDENCY;break;case 73:this.$=X.relationType.LOLLIPOP;break;case 74:this.$=X.lineType.LINE;break;case 75:this.$=X.lineType.DOTTED_LINE;break;case 76:case 82:this.$=G[V-2],X.setClickEvent(G[V-1],G[V]);break;case 77:case 83:this.$=G[V-3],X.setClickEvent(G[V-2],G[V-1]),X.setTooltip(G[V-2],G[V]);break;case 78:this.$=G[V-2],X.setLink(G[V-1],G[V]);break;case 79:this.$=G[V-3],X.setLink(G[V-2],G[V-1],G[V]);break;case 80:this.$=G[V-3],X.setLink(G[V-2],G[V-1]),X.setTooltip(G[V-2],G[V]);break;case 81:this.$=G[V-4],X.setLink(G[V-3],G[V-2],G[V]),X.setTooltip(G[V-3],G[V-1]);break;case 84:this.$=G[V-3],X.setClickEvent(G[V-2],G[V-1],G[V]);break;case 85:this.$=G[V-4],X.setClickEvent(G[V-3],G[V-2],G[V-1]),X.setTooltip(G[V-3],G[V]);break;case 86:this.$=G[V-3],X.setLink(G[V-2],G[V]);break;case 87:this.$=G[V-4],X.setLink(G[V-3],G[V-1],G[V]);break;case 88:this.$=G[V-4],X.setLink(G[V-3],G[V-1]),X.setTooltip(G[V-3],G[V]);break;case 89:this.$=G[V-5],X.setLink(G[V-4],G[V-2],G[V]),X.setTooltip(G[V-4],G[V-1]);break;case 90:this.$=G[V-2],X.setCssStyle(G[V-1],G[V]);break;case 91:X.setCssClass(G[V-1],G[V]);break;case 93:G[V-2].push(G[V]),this.$=G[V-2]}}),"anonymous"),table:[{3:1,4:2,5:3,6:4,7:[1,6],10:5,16:39,18:21,19:40,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,33:e,35:r,37:n,38:22,42:i,43:23,46:a,47:s,49:o,50:u,52:h,54:d,55:p,58:f,60:g,61:m,62:y,63:v,73:x,74:b,76:w,80:T,81:k,84:C,99:E,101:_,102:S},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},t(N,[2,5],{8:[1,48]}),{8:[1,49]},t(O,[2,18],{22:[1,50]}),t(O,[2,20]),t(O,[2,21]),t(O,[2,22]),t(O,[2,23]),t(O,[2,24]),t(O,[2,25]),t(O,[2,26]),t(O,[2,27]),t(O,[2,28]),t(O,[2,29]),{34:[1,51]},{36:[1,52]},t(O,[2,32]),t(O,[2,48],{51:53,64:56,65:57,13:[1,54],22:[1,55],66:B,67:L,68:I,69:A,70:M,71:D,72:R}),{39:[1,65]},t(P,[2,39],{39:[1,67],44:[1,66]}),t(O,[2,50]),t(O,[2,51]),{16:68,58:f,84:C,99:E,101:_},{16:39,18:69,19:40,58:f,84:C,99:E,101:_,102:S},{16:39,18:70,19:40,58:f,84:C,99:E,101:_,102:S},{16:39,18:71,19:40,58:f,84:C,99:E,101:_,102:S},{58:[1,72]},{13:[1,73]},{16:39,18:74,19:40,58:f,84:C,99:E,101:_,102:S},{13:$,53:75},{56:77,58:[1,78]},t(O,[2,61]),t(O,[2,62]),t(O,[2,63]),t(O,[2,64]),t(z,[2,12],{16:39,19:40,18:80,17:[1,79],20:[1,81],58:f,84:C,99:E,101:_,102:S}),t(z,[2,14],{20:[1,82]}),{15:83,16:84,58:f,84:C,99:E,101:_},{16:39,18:85,19:40,58:f,84:C,99:E,101:_,102:S},t(q,[2,118]),t(q,[2,119]),t(q,[2,120]),t(q,[2,121]),t([1,8,9,12,13,20,22,39,41,44,66,67,68,69,70,71,72,77,79],[2,122]),t(N,[2,6],{10:5,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,18:21,38:22,43:23,16:39,19:40,5:86,33:e,35:r,37:n,42:i,46:a,47:s,49:o,50:u,52:h,54:d,55:p,58:f,60:g,61:m,62:y,63:v,73:x,74:b,76:w,80:T,81:k,84:C,99:E,101:_,102:S}),{5:87,10:5,16:39,18:21,19:40,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,33:e,35:r,37:n,38:22,42:i,43:23,46:a,47:s,49:o,50:u,52:h,54:d,55:p,58:f,60:g,61:m,62:y,63:v,73:x,74:b,76:w,80:T,81:k,84:C,99:E,101:_,102:S},t(O,[2,19]),t(O,[2,30]),t(O,[2,31]),{13:[1,89],16:39,18:88,19:40,58:f,84:C,99:E,101:_,102:S},{51:90,64:56,65:57,66:B,67:L,68:I,69:A,70:M,71:D,72:R},t(O,[2,49]),{65:91,71:D,72:R},t(W,[2,68],{64:92,66:B,67:L,68:I,69:A,70:M}),t(Q,[2,69]),t(Q,[2,70]),t(Q,[2,71]),t(Q,[2,72]),t(Q,[2,73]),t(te,[2,74]),t(te,[2,75]),{8:[1,94],24:95,40:93,43:23,46:a},{16:96,58:f,84:C,99:E,101:_},{45:97,49:oe},{48:[1,99]},{13:[1,100]},{13:[1,101]},{77:[1,102],79:[1,103]},{22:re,57:104,58:H,80:K,82:105,83:106,84:ie,85:ne,86:J,87:ue,88:Y,89:se},{58:[1,116]},{13:$,53:117},t(O,[2,57]),t(O,[2,123]),{22:re,57:118,58:H,59:[1,119],80:K,82:105,83:106,84:ie,85:ne,86:J,87:ue,88:Y,89:se},t(de,[2,59]),{16:39,18:120,19:40,58:f,84:C,99:E,101:_,102:S},t(z,[2,15]),t(z,[2,16]),t(z,[2,17]),{39:[2,35]},{15:122,16:84,17:[1,121],39:[2,9],58:f,84:C,99:E,101:_},t(ce,[2,43],{11:123,12:[1,124]}),t(N,[2,7]),{9:[1,125]},t(Ee,[2,52]),{16:39,18:126,19:40,58:f,84:C,99:E,101:_,102:S},{13:[1,128],16:39,18:127,19:40,58:f,84:C,99:E,101:_,102:S},t(W,[2,67],{64:129,66:B,67:L,68:I,69:A,70:M}),t(W,[2,66]),{41:[1,130]},{24:95,40:131,43:23,46:a},{8:[1,132],41:[2,36]},t(P,[2,40],{39:[1,133]}),{41:[1,134]},{41:[2,46],45:135,49:oe},{16:39,18:136,19:40,58:f,84:C,99:E,101:_,102:S},t(O,[2,76],{13:[1,137]}),t(O,[2,78],{13:[1,139],75:[1,138]}),t(O,[2,82],{13:[1,140],78:[1,141]}),{13:[1,142]},t(O,[2,90],{59:ve}),t(De,[2,92],{83:144,22:re,58:H,80:K,84:ie,85:ne,86:J,87:ue,88:Y,89:se}),t(Ue,[2,94]),t(Ue,[2,96]),t(Ue,[2,97]),t(Ue,[2,98]),t(Ue,[2,99]),t(Ue,[2,100]),t(Ue,[2,101]),t(Ue,[2,102]),t(Ue,[2,103]),t(Ue,[2,104]),t(O,[2,91]),t(O,[2,56]),t(O,[2,58],{59:ve}),{58:[1,145]},t(z,[2,13]),{15:146,16:84,58:f,84:C,99:E,101:_},{39:[2,11]},t(ce,[2,44]),{13:[1,147]},{1:[2,4]},t(Ee,[2,54]),t(Ee,[2,53]),{16:39,18:148,19:40,58:f,84:C,99:E,101:_,102:S},t(W,[2,65]),t(O,[2,33]),{41:[1,149]},{24:95,40:150,41:[2,37],43:23,46:a},{45:151,49:oe},t(P,[2,41]),{41:[2,47]},t(O,[2,45]),t(O,[2,77]),t(O,[2,79]),t(O,[2,80],{75:[1,152]}),t(O,[2,83]),t(O,[2,84],{13:[1,153]}),t(O,[2,86],{13:[1,155],75:[1,154]}),{22:re,58:H,80:K,82:156,83:106,84:ie,85:ne,86:J,87:ue,88:Y,89:se},t(Ue,[2,95]),t(de,[2,60]),{39:[2,10]},{14:[1,157]},t(Ee,[2,55]),t(O,[2,34]),{41:[2,38]},{41:[1,158]},t(O,[2,81]),t(O,[2,85]),t(O,[2,87]),t(O,[2,88],{75:[1,159]}),t(De,[2,93],{83:144,22:re,58:H,80:K,84:ie,85:ne,86:J,87:ue,88:Y,89:se}),t(ce,[2,8]),t(P,[2,42]),t(O,[2,89])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],83:[2,35],122:[2,11],125:[2,4],135:[2,47],146:[2,10],150:[2,38]},parseError:l((function(Pe,j){if(!j.recoverable){var pe=new Error(Pe);throw pe.hash=j,pe}this.trace(Pe)}),"parseError"),parse:l((function(Pe){var j=this,pe=[0],X=[],ge=[null],G=[],le=this.table,V="",me=0,he=0,_e=2,Ce=1,Te=G.slice.call(arguments,1),Re=Object.create(this.lexer),Le={yy:{}};for(var ot in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ot)&&(Le.yy[ot]=this.yy[ot]);Re.setInput(Pe,Le.yy),Le.yy.lexer=Re,Le.yy.parser=this,Re.yylloc===void 0&&(Re.yylloc={});var Tt=Re.yylloc;G.push(Tt);var Fe=Re.options&&Re.options.ranges;function gt(at){pe.length=pe.length-2*at,ge.length=ge.length-at,G.length=G.length-at}function Qe(){var at;return typeof(at=X.pop()||Re.lex()||Ce)!="number"&&(at instanceof Array&&(at=(X=at).pop()),at=j.symbols_[at]||at),at}typeof Le.yy.parseError=="function"?this.parseError=Le.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,l(gt,"popStack"),l(Qe,"lex");for(var Be,rt,lt,Je,_t,it,pt,Ye,je={};;){if(rt=pe[pe.length-1],this.defaultActions[rt]?lt=this.defaultActions[rt]:(Be==null&&(Be=Qe()),lt=le[rt]&&le[rt][Be]),lt===void 0||!lt.length||!lt[0]){var mt="";for(_t in Ye=[],le[rt])this.terminals_[_t]&&_t>_e&&Ye.push("'"+this.terminals_[_t]+"'");mt=Re.showPosition?"Parse error on line "+(me+1)+`:
`+Re.showPosition()+`
Expecting `+Ye.join(", ")+", got '"+(this.terminals_[Be]||Be)+"'":"Parse error on line "+(me+1)+": Unexpected "+(Be==Ce?"end of input":"'"+(this.terminals_[Be]||Be)+"'"),this.parseError(mt,{text:Re.match,token:this.terminals_[Be]||Be,line:Re.yylineno,loc:Tt,expected:Ye})}if(lt[0]instanceof Array&&lt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+rt+", token: "+Be);switch(lt[0]){case 1:pe.push(Be),ge.push(Re.yytext),G.push(Re.yylloc),pe.push(lt[1]),Be=null,he=Re.yyleng,V=Re.yytext,me=Re.yylineno,Tt=Re.yylloc;break;case 2:if(it=this.productions_[lt[1]][1],je.$=ge[ge.length-it],je._$={first_line:G[G.length-(it||1)].first_line,last_line:G[G.length-1].last_line,first_column:G[G.length-(it||1)].first_column,last_column:G[G.length-1].last_column},Fe&&(je._$.range=[G[G.length-(it||1)].range[0],G[G.length-1].range[1]]),(Je=this.performAction.apply(je,[V,he,me,Le.yy,lt[1],ge,G].concat(Te)))!==void 0)return Je;it&&(pe=pe.slice(0,-1*it*2),ge=ge.slice(0,-1*it),G=G.slice(0,-1*it)),pe.push(this.productions_[lt[1]][0]),ge.push(je.$),G.push(je._$),pt=le[pe[pe.length-2]][pe[pe.length-1]],pe.push(pt);break;case 3:return!0}}return!0}),"parse")},Ge=(function(){var Pe={EOF:1,parseError:l((function(j,pe){if(!this.yy.parser)throw new Error(j);this.yy.parser.parseError(j,pe)}),"parseError"),setInput:l((function(j,pe){return this.yy=pe||this.yy||{},this._input=j,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:l((function(){var j=this._input[0];return this.yytext+=j,this.yyleng++,this.offset++,this.match+=j,this.matched+=j,j.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),j}),"input"),unput:l((function(j){var pe=j.length,X=j.split(/(?:\r\n?|\n)/g);this._input=j+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-pe),this.offset-=pe;var ge=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),X.length-1&&(this.yylineno-=X.length-1);var G=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:X?(X.length===ge.length?this.yylloc.first_column:0)+ge[ge.length-X.length].length-X[0].length:this.yylloc.first_column-pe},this.options.ranges&&(this.yylloc.range=[G[0],G[0]+this.yyleng-pe]),this.yyleng=this.yytext.length,this}),"unput"),more:l((function(){return this._more=!0,this}),"more"),reject:l((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:l((function(j){this.unput(this.match.slice(j))}),"less"),pastInput:l((function(){var j=this.matched.substr(0,this.matched.length-this.match.length);return(j.length>20?"...":"")+j.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:l((function(){var j=this.match;return j.length<20&&(j+=this._input.substr(0,20-j.length)),(j.substr(0,20)+(j.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:l((function(){var j=this.pastInput(),pe=new Array(j.length+1).join("-");return j+this.upcomingInput()+`
`+pe+"^"}),"showPosition"),test_match:l((function(j,pe){var X,ge,G;if(this.options.backtrack_lexer&&(G={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(G.yylloc.range=this.yylloc.range.slice(0))),(ge=j[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=ge.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ge?ge[ge.length-1].length-ge[ge.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+j[0].length},this.yytext+=j[0],this.match+=j[0],this.matches=j,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(j[0].length),this.matched+=j[0],X=this.performAction.call(this,this.yy,this,pe,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),X)return X;if(this._backtrack){for(var le in G)this[le]=G[le];return!1}return!1}),"test_match"),next:l((function(){if(this.done)return this.EOF;var j,pe,X,ge;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var G=this._currentRules(),le=0;le<G.length;le++)if((X=this._input.match(this.rules[G[le]]))&&(!pe||X[0].length>pe[0].length)){if(pe=X,ge=le,this.options.backtrack_lexer){if((j=this.test_match(X,G[le]))!==!1)return j;if(this._backtrack){pe=!1;continue}return!1}if(!this.options.flex)break}return pe?(j=this.test_match(pe,G[ge]))!==!1&&j:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:l((function(){var j=this.next();return j||this.lex()}),"lex"),begin:l((function(j){this.conditionStack.push(j)}),"begin"),popState:l((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:l((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:l((function(j){return(j=this.conditionStack.length-1-Math.abs(j||0))>=0?this.conditionStack[j]:"INITIAL"}),"topState"),pushState:l((function(j){this.begin(j)}),"pushState"),stateStackSize:l((function(){return this.conditionStack.length}),"stateStackSize"),options:{},performAction:l((function(j,pe,X,ge){switch(X){case 0:return 60;case 1:return 61;case 2:return 62;case 3:return 63;case 4:case 5:case 14:case 31:case 36:case 40:case 47:break;case 6:return this.begin("acc_title"),33;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),35;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:case 19:case 22:case 24:case 58:case 61:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:case 35:return 8;case 15:case 16:return 7;case 17:case 37:case 45:return"EDGE_STATE";case 18:this.begin("callback_name");break;case 20:this.popState(),this.begin("callback_args");break;case 21:return 77;case 23:return 78;case 25:return"STR";case 26:this.begin("string");break;case 27:return 80;case 28:return 55;case 29:return this.begin("namespace"),42;case 30:case 39:return this.popState(),8;case 32:return this.begin("namespace-body"),39;case 33:case 43:return this.popState(),41;case 34:case 44:return"EOF_IN_STRUCT";case 38:return this.begin("class"),46;case 41:return this.popState(),this.popState(),41;case 42:return this.begin("class-body"),39;case 46:return"OPEN_IN_STRUCT";case 48:return"MEMBER";case 49:return 81;case 50:return 73;case 51:return 74;case 52:return 76;case 53:return 52;case 54:return 54;case 55:return 47;case 56:return 48;case 57:return 79;case 59:return"GENERICTYPE";case 60:this.begin("generic");break;case 62:return"BQUOTE_STR";case 63:this.begin("bqstring");break;case 64:case 65:case 66:case 67:return 75;case 68:case 69:return 67;case 70:case 71:return 69;case 72:return 68;case 73:return 66;case 74:return 70;case 75:return 71;case 76:return 72;case 77:return 22;case 78:return 44;case 79:return 99;case 80:return 17;case 81:return"PLUS";case 82:return 85;case 83:return 59;case 84:case 85:return 88;case 86:return 89;case 87:case 88:return"EQUALS";case 89:return 58;case 90:return 12;case 91:return 14;case 92:return"PUNCTUATION";case 93:return 84;case 94:return 101;case 95:case 96:return 87;case 97:return 9}}),"anonymous"),rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:\[\*\])/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:["])/,/^(?:[^"]*)/,/^(?:["])/,/^(?:style\b)/,/^(?:classDef\b)/,/^(?:namespace\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:\[\*\])/,/^(?:class\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[}])/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\[\*\])/,/^(?:[{])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:href\b)/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:~)/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:[`])/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?::)/,/^(?:,)/,/^(?:#)/,/^(?:#)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:\[)/,/^(?:\])/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:\s)/,/^(?:$)/],conditions:{"namespace-body":{rules:[26,33,34,35,36,37,38,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},namespace:{rules:[26,29,30,31,32,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},"class-body":{rules:[26,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},class:{rules:[26,39,40,41,42,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_descr_multiline:{rules:[11,12,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_descr:{rules:[9,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_title:{rules:[7,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},callback_args:{rules:[22,23,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},callback_name:{rules:[19,20,21,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},href:{rules:[26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},struct:{rules:[26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},generic:{rules:[26,49,50,51,52,53,54,55,56,57,58,59,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},bqstring:{rules:[26,49,50,51,52,53,54,55,56,57,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},string:{rules:[24,25,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,26,27,28,29,38,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97],inclusive:!0}}};return Pe})();function $e(){this.yy={}}return ze.lexer=Ge,l($e,"Parser"),$e.prototype=ze,ze.Parser=$e,new $e})();sS.parser=sS;var Eie=sS,BO=["#","+","~","-",""],A0,$O=(A0=class{constructor(e,r){this.memberType=r,this.visibility="",this.classifier="",this.text="";const n=Ir(e,ke());this.parseMember(n)}getDisplayDetails(){let e=this.visibility+_l(this.id);return this.memberType==="method"&&(e+=`(${_l(this.parameters.trim())})`,this.returnType&&(e+=" : "+_l(this.returnType))),e=e.trim(),{displayText:e,cssStyle:this.parseClassifier()}}parseMember(e){let r="";if(this.memberType==="method"){const i=/([#+~-])?(.+)\((.*)\)([\s$*])?(.*)([$*])?/.exec(e);if(i){const a=i[1]?i[1].trim():"";if(BO.includes(a)&&(this.visibility=a),this.id=i[2],this.parameters=i[3]?i[3].trim():"",r=i[4]?i[4].trim():"",this.returnType=i[5]?i[5].trim():"",r===""){const s=this.returnType.substring(this.returnType.length-1);/[$*]/.exec(s)&&(r=s,this.returnType=this.returnType.substring(0,this.returnType.length-1))}}}else{const i=e.length,a=e.substring(0,1),s=e.substring(i-1);BO.includes(a)&&(this.visibility=a),/[$*]/.exec(s)&&(r=s),this.id=e.substring(this.visibility===""?0:1,r===""?i:i-1)}this.classifier=r,this.id=this.id.startsWith(" ")?" "+this.id.trim():this.id.trim();const n=`${this.visibility?"\\"+this.visibility:""}${_l(this.id)}${this.memberType==="method"?`(${_l(this.parameters)})${this.returnType?" : "+_l(this.returnType):""}`:""}`;this.text=n.replaceAll("<","&lt;").replaceAll(">","&gt;"),this.text.startsWith("\\&lt;")&&(this.text=this.text.replace("\\&lt;","~"))}parseClassifier(){switch(this.classifier){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}}},l(A0,"ClassMember"),A0),FO=0,Ec=l((t=>He.sanitizeText(t,ke())),"sanitizeText"),L0,_ie=(L0=class{constructor(){this.relations=[],this.classes=new Map,this.styleClasses=new Map,this.notes=[],this.interfaces=[],this.namespaces=new Map,this.namespaceCounter=0,this.functions=[],this.lineType={LINE:0,DOTTED_LINE:1},this.relationType={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},this.setupToolTips=l((e=>{let r=Ze(".mermaidTooltip");(r._groups||r)[0][0]===null&&(r=Ze("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),Ze(e).select("svg").selectAll("g.node").on("mouseover",(n=>{const i=Ze(n.currentTarget);if(i.attr("title")===null)return;const a=this.getBoundingClientRect();r.transition().duration(200).style("opacity",".9"),r.text(i.attr("title")).style("left",window.scrollX+a.left+(a.right-a.left)/2+"px").style("top",window.scrollY+a.top-14+document.body.scrollTop+"px"),r.html(r.html().replace(/&lt;br\/&gt;/g,"<br/>")),i.classed("hover",!0)})).on("mouseout",(n=>{r.transition().duration(500).style("opacity",0),Ze(n.currentTarget).classed("hover",!1)}))}),"setupToolTips"),this.direction="TB",this.setAccTitle=zn,this.getAccTitle=Xn,this.setAccDescription=Kn,this.getAccDescription=Zn,this.setDiagramTitle=di,this.getDiagramTitle=Wn,this.getConfig=l((()=>ke().class),"getConfig"),this.functions.push(this.setupToolTips.bind(this)),this.clear(),this.addRelation=this.addRelation.bind(this),this.addClassesToNamespace=this.addClassesToNamespace.bind(this),this.addNamespace=this.addNamespace.bind(this),this.setCssClass=this.setCssClass.bind(this),this.addMembers=this.addMembers.bind(this),this.addClass=this.addClass.bind(this),this.setClassLabel=this.setClassLabel.bind(this),this.addAnnotation=this.addAnnotation.bind(this),this.addMember=this.addMember.bind(this),this.cleanupLabel=this.cleanupLabel.bind(this),this.addNote=this.addNote.bind(this),this.defineClass=this.defineClass.bind(this),this.setDirection=this.setDirection.bind(this),this.setLink=this.setLink.bind(this),this.bindFunctions=this.bindFunctions.bind(this),this.clear=this.clear.bind(this),this.setTooltip=this.setTooltip.bind(this),this.setClickEvent=this.setClickEvent.bind(this),this.setCssStyle=this.setCssStyle.bind(this)}splitClassNameAndType(e){const r=He.sanitizeText(e,ke());let n="",i=r;if(r.indexOf("~")>0){const a=r.split("~");i=Ec(a[0]),n=Ec(a[1])}return{className:i,type:n}}setClassLabel(e,r){const n=He.sanitizeText(e,ke());r&&(r=Ec(r));const{className:i}=this.splitClassNameAndType(n);this.classes.get(i).label=r,this.classes.get(i).text=`${r}${this.classes.get(i).type?`<${this.classes.get(i).type}>`:""}`}addClass(e){const r=He.sanitizeText(e,ke()),{className:n,type:i}=this.splitClassNameAndType(r);if(this.classes.has(n))return;const a=He.sanitizeText(n,ke());this.classes.set(a,{id:a,type:i,label:a,text:`${a}${i?`&lt;${i}&gt;`:""}`,shape:"classBox",cssClasses:"default",methods:[],members:[],annotations:[],styles:[],domId:"classId-"+a+"-"+FO}),FO++}addInterface(e,r){const n={id:`interface${this.interfaces.length}`,label:e,classId:r};this.interfaces.push(n)}lookUpDomId(e){const r=He.sanitizeText(e,ke());if(this.classes.has(r))return this.classes.get(r).domId;throw new Error("Class not found: "+r)}clear(){this.relations=[],this.classes=new Map,this.notes=[],this.interfaces=[],this.functions=[],this.functions.push(this.setupToolTips.bind(this)),this.namespaces=new Map,this.namespaceCounter=0,this.direction="TB",jn()}getClass(e){return this.classes.get(e)}getClasses(){return this.classes}getRelations(){return this.relations}getNotes(){return this.notes}addRelation(e){ee.debug("Adding relation: "+JSON.stringify(e));const r=[this.relationType.LOLLIPOP,this.relationType.AGGREGATION,this.relationType.COMPOSITION,this.relationType.DEPENDENCY,this.relationType.EXTENSION];e.relation.type1!==this.relationType.LOLLIPOP||r.includes(e.relation.type2)?e.relation.type2!==this.relationType.LOLLIPOP||r.includes(e.relation.type1)?(this.addClass(e.id1),this.addClass(e.id2)):(this.addClass(e.id1),this.addInterface(e.id2,e.id1),e.id2="interface"+(this.interfaces.length-1)):(this.addClass(e.id2),this.addInterface(e.id1,e.id2),e.id1="interface"+(this.interfaces.length-1)),e.id1=this.splitClassNameAndType(e.id1).className,e.id2=this.splitClassNameAndType(e.id2).className,e.relationTitle1=He.sanitizeText(e.relationTitle1.trim(),ke()),e.relationTitle2=He.sanitizeText(e.relationTitle2.trim(),ke()),this.relations.push(e)}addAnnotation(e,r){const n=this.splitClassNameAndType(e).className;this.classes.get(n).annotations.push(r)}addMember(e,r){this.addClass(e);const n=this.splitClassNameAndType(e).className,i=this.classes.get(n);if(typeof r=="string"){const a=r.trim();a.startsWith("<<")&&a.endsWith(">>")?i.annotations.push(Ec(a.substring(2,a.length-2))):a.indexOf(")")>0?i.methods.push(new $O(a,"method")):a&&i.members.push(new $O(a,"attribute"))}}addMembers(e,r){Array.isArray(r)&&(r.reverse(),r.forEach((n=>this.addMember(e,n))))}addNote(e,r){const n={id:`note${this.notes.length}`,class:r,text:e};this.notes.push(n)}cleanupLabel(e){return e.startsWith(":")&&(e=e.substring(1)),Ec(e.trim())}setCssClass(e,r){e.split(",").forEach((n=>{let i=n;/\d/.exec(n[0])&&(i="classId-"+i);const a=this.classes.get(i);a&&(a.cssClasses+=" "+r)}))}defineClass(e,r){for(const n of e){let i=this.styleClasses.get(n);i===void 0&&(i={id:n,styles:[],textStyles:[]},this.styleClasses.set(n,i)),r&&r.forEach((a=>{if(/color/.exec(a)){const s=a.replace("fill","bgFill");i.textStyles.push(s)}i.styles.push(a)})),this.classes.forEach((a=>{a.cssClasses.includes(n)&&a.styles.push(...r.flatMap((s=>s.split(","))))}))}}setTooltip(e,r){e.split(",").forEach((n=>{r!==void 0&&(this.classes.get(n).tooltip=Ec(r))}))}getTooltip(e,r){return r&&this.namespaces.has(r)?this.namespaces.get(r).classes.get(e).tooltip:this.classes.get(e).tooltip}setLink(e,r,n){const i=ke();e.split(",").forEach((a=>{let s=a;/\d/.exec(a[0])&&(s="classId-"+s);const o=this.classes.get(s);o&&(o.link=Vt.formatUrl(r,i),i.securityLevel==="sandbox"?o.linkTarget="_top":o.linkTarget=typeof n=="string"?Ec(n):"_blank")})),this.setCssClass(e,"clickable")}setClickEvent(e,r,n){e.split(",").forEach((i=>{this.setClickFunc(i,r,n),this.classes.get(i).haveCallback=!0})),this.setCssClass(e,"clickable")}setClickFunc(e,r,n){const i=He.sanitizeText(e,ke());if(ke().securityLevel!=="loose"||r===void 0)return;const a=i;if(this.classes.has(a)){const s=this.lookUpDomId(a);let o=[];if(typeof n=="string"){o=n.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let u=0;u<o.length;u++){let h=o[u].trim();h.startsWith('"')&&h.endsWith('"')&&(h=h.substr(1,h.length-2)),o[u]=h}}o.length===0&&o.push(s),this.functions.push((()=>{const u=document.querySelector(`[id="${s}"]`);u!==null&&u.addEventListener("click",(()=>{Vt.runFunc(r,...o)}),!1)}))}}bindFunctions(e){this.functions.forEach((r=>{r(e)}))}getDirection(){return this.direction}setDirection(e){this.direction=e}addNamespace(e){this.namespaces.has(e)||(this.namespaces.set(e,{id:e,classes:new Map,children:{},domId:"classId-"+e+"-"+this.namespaceCounter}),this.namespaceCounter++)}getNamespace(e){return this.namespaces.get(e)}getNamespaces(){return this.namespaces}addClassesToNamespace(e,r){if(this.namespaces.has(e))for(const n of r){const{className:i}=this.splitClassNameAndType(n);this.classes.get(i).parent=e,this.namespaces.get(e).classes.set(i,this.classes.get(i))}}setCssStyle(e,r){const n=this.classes.get(e);if(r&&n)for(const i of r)i.includes(",")?n.styles.push(...i.split(",")):n.styles.push(i)}getArrowMarker(e){let r;switch(e){case 0:r="aggregation";break;case 1:r="extension";break;case 2:r="composition";break;case 3:r="dependency";break;case 4:r="lollipop";break;default:r="none"}return r}getData(){const e=[],r=[],n=ke();for(const a of this.namespaces.keys()){const s=this.namespaces.get(a);if(s){const o={id:s.id,label:s.id,isGroup:!0,padding:n.class.padding??16,shape:"rect",cssStyles:["fill: none","stroke: black"],look:n.look};e.push(o)}}for(const a of this.classes.keys()){const s=this.classes.get(a);if(s){const o=s;o.parentId=s.parent,o.look=n.look,e.push(o)}}let i=0;for(const a of this.notes){i++;const s={id:a.id,label:a.text,isGroup:!1,shape:"note",padding:n.class.padding??6,cssStyles:["text-align: left","white-space: nowrap",`fill: ${n.themeVariables.noteBkgColor}`,`stroke: ${n.themeVariables.noteBorderColor}`],look:n.look};e.push(s);const o=this.classes.get(a.class)?.id??"";if(o){const u={id:`edgeNote${i}`,start:a.id,end:o,type:"normal",thickness:"normal",classes:"relation",arrowTypeStart:"none",arrowTypeEnd:"none",arrowheadStyle:"",labelStyle:[""],style:["fill: none"],pattern:"dotted",look:n.look};r.push(u)}}for(const a of this.interfaces){const s={id:a.id,label:a.label,isGroup:!1,shape:"rect",cssStyles:["opacity: 0;"],look:n.look};e.push(s)}i=0;for(const a of this.relations){i++;const s={id:My(a.id1,a.id2,{prefix:"id",counter:i}),start:a.id1,end:a.id2,type:"normal",label:a.title,labelpos:"c",thickness:"normal",classes:"relation",arrowTypeStart:this.getArrowMarker(a.relation.type1),arrowTypeEnd:this.getArrowMarker(a.relation.type2),startLabelRight:a.relationTitle1==="none"?"":a.relationTitle1,endLabelLeft:a.relationTitle2==="none"?"":a.relationTitle2,arrowheadStyle:"",labelStyle:["display: inline-block"],style:a.style||"",pattern:a.relation.lineType==1?"dashed":"solid",look:n.look};r.push(s)}return{nodes:e,edges:r,other:{},config:n,direction:this.getDirection()}}},l(L0,"ClassDB"),L0),Cie=l((t=>`g.classGroup text {
  fill: ${t.nodeBorder||t.classText};
  stroke: none;
  font-family: ${t.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${t.classText};
}
.edgeLabel .label rect {
  fill: ${t.mainBkg};
}
.label text {
  fill: ${t.classText};
}

.labelBkg {
  background: ${t.mainBkg};
}
.edgeLabel .label span {
  background: ${t.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${t.nodeBorder};
  stroke-width: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.classGroup line {
  stroke: ${t.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${t.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${t.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

.dotted-line{
  stroke-dasharray: 1 2;
}

#compositionStart, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
  line-height: initial;
}

.classTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${t.textColor};
}
`),"getStyles"),gwe=l(((t,e="TB")=>{if(!t.doc)return e;let r=e;for(const n of t.doc)n.stmt==="dir"&&(r=n.value);return r}),"getDir"),mwe=l((function(t,e){return e.db.getClasses()}),"getClasses"),ywe=l((async function(t,e,r,n){ee.info("REF0:"),ee.info("Drawing class diagram (v3)",e);const{securityLevel:i,state:a,layout:s}=ke(),o=n.db.getData(),u=$v(e,i);o.type=n.type,o.layoutAlgorithm=X6(s),o.nodeSpacing=a?.nodeSpacing||50,o.rankSpacing=a?.rankSpacing||50,o.markers=["aggregation","extension","composition","dependency","lollipop"],o.diagramId=e,await Av(o,u),Vt.insertTitle(u,"classDiagramTitleText",a?.titleTopMargin??25,n.db.getDiagramTitle()),Fv(u,8,"classDiagram",a?.useMaxWidth??!0)}),"draw"),Sie={getClasses:mwe,draw:ywe,getDir:gwe},vwe={parser:Eie,get db(){return new _ie},renderer:Sie,styles:Cie,init:l((t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute}),"init")},xwe=Object.freeze({__proto__:null,diagram:vwe}),bwe={parser:Eie,get db(){return new _ie},renderer:Sie,styles:Cie,init:l((t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute}),"init")},wwe=Object.freeze({__proto__:null,diagram:bwe}),oS=(function(){var t=l((function(R,P,$,z){for($=$||{},z=R.length;z--;$[R[z]]=P);return $}),"o"),e=[1,2],r=[1,3],n=[1,4],i=[2,4],a=[1,9],s=[1,11],o=[1,16],u=[1,17],h=[1,18],d=[1,19],p=[1,32],f=[1,20],g=[1,21],m=[1,22],y=[1,23],v=[1,24],x=[1,26],b=[1,27],w=[1,28],T=[1,29],k=[1,30],C=[1,31],E=[1,34],_=[1,35],S=[1,36],N=[1,37],O=[1,33],B=[1,4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,45,48,49,50,51,54],L=[1,4,5,14,15,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,45,48,49,50,51,54],I=[4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,45,48,49,50,51,54],A={trace:l((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,SD:6,document:7,line:8,statement:9,classDefStatement:10,styleStatement:11,cssClassStatement:12,idStatement:13,DESCR:14,"-->":15,HIDE_EMPTY:16,scale:17,WIDTH:18,COMPOSIT_STATE:19,STRUCT_START:20,STRUCT_STOP:21,STATE_DESCR:22,AS:23,ID:24,FORK:25,JOIN:26,CHOICE:27,CONCURRENT:28,note:29,notePosition:30,NOTE_TEXT:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,classDef:38,CLASSDEF_ID:39,CLASSDEF_STYLEOPTS:40,DEFAULT:41,style:42,STYLE_IDS:43,STYLEDEF_STYLEOPTS:44,class:45,CLASSENTITY_IDS:46,STYLECLASS:47,direction_tb:48,direction_bt:49,direction_rl:50,direction_lr:51,eol:52,";":53,EDGE_STATE:54,STYLE_SEPARATOR:55,left_of:56,right_of:57,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",6:"SD",14:"DESCR",15:"-->",16:"HIDE_EMPTY",17:"scale",18:"WIDTH",19:"COMPOSIT_STATE",20:"STRUCT_START",21:"STRUCT_STOP",22:"STATE_DESCR",23:"AS",24:"ID",25:"FORK",26:"JOIN",27:"CHOICE",28:"CONCURRENT",29:"note",31:"NOTE_TEXT",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",38:"classDef",39:"CLASSDEF_ID",40:"CLASSDEF_STYLEOPTS",41:"DEFAULT",42:"style",43:"STYLE_IDS",44:"STYLEDEF_STYLEOPTS",45:"class",46:"CLASSENTITY_IDS",47:"STYLECLASS",48:"direction_tb",49:"direction_bt",50:"direction_rl",51:"direction_lr",53:";",54:"EDGE_STATE",55:"STYLE_SEPARATOR",56:"left_of",57:"right_of"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,3],[9,4],[9,1],[9,2],[9,1],[9,4],[9,3],[9,6],[9,1],[9,1],[9,1],[9,1],[9,4],[9,4],[9,1],[9,2],[9,2],[9,1],[10,3],[10,3],[11,3],[12,3],[32,1],[32,1],[32,1],[32,1],[52,1],[52,1],[13,1],[13,1],[13,3],[13,3],[30,1],[30,1]],performAction:l((function(R,P,$,z,q,W,Q){var te=W.length-1;switch(q){case 3:return z.setRootDoc(W[te]),W[te];case 4:this.$=[];break;case 5:W[te]!="nl"&&(W[te-1].push(W[te]),this.$=W[te-1]);break;case 6:case 7:case 12:this.$=W[te];break;case 8:this.$="nl";break;case 13:const K=W[te-1];K.description=z.trimColon(W[te]),this.$=K;break;case 14:this.$={stmt:"relation",state1:W[te-2],state2:W[te]};break;case 15:const ie=z.trimColon(W[te]);this.$={stmt:"relation",state1:W[te-3],state2:W[te-1],description:ie};break;case 19:this.$={stmt:"state",id:W[te-3],type:"default",description:"",doc:W[te-1]};break;case 20:var oe=W[te],re=W[te-2].trim();if(W[te].match(":")){var H=W[te].split(":");oe=H[0],re=[re,H[1]]}this.$={stmt:"state",id:oe,type:"default",description:re};break;case 21:this.$={stmt:"state",id:W[te-3],type:"default",description:W[te-5],doc:W[te-1]};break;case 22:this.$={stmt:"state",id:W[te],type:"fork"};break;case 23:this.$={stmt:"state",id:W[te],type:"join"};break;case 24:this.$={stmt:"state",id:W[te],type:"choice"};break;case 25:this.$={stmt:"state",id:z.getDividerId(),type:"divider"};break;case 26:this.$={stmt:"state",id:W[te-1].trim(),note:{position:W[te-2].trim(),text:W[te].trim()}};break;case 29:this.$=W[te].trim(),z.setAccTitle(this.$);break;case 30:case 31:this.$=W[te].trim(),z.setAccDescription(this.$);break;case 32:case 33:this.$={stmt:"classDef",id:W[te-1].trim(),classes:W[te].trim()};break;case 34:this.$={stmt:"style",id:W[te-1].trim(),styleClass:W[te].trim()};break;case 35:this.$={stmt:"applyClass",id:W[te-1].trim(),styleClass:W[te].trim()};break;case 36:z.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 37:z.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 38:z.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 39:z.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 42:case 43:this.$={stmt:"state",id:W[te].trim(),type:"default",description:""};break;case 44:case 45:this.$={stmt:"state",id:W[te-2].trim(),classes:[W[te].trim()],type:"default",description:""}}}),"anonymous"),table:[{3:1,4:e,5:r,6:n},{1:[3]},{3:5,4:e,5:r,6:n},{3:6,4:e,5:r,6:n},t([1,4,5,16,17,19,22,24,25,26,27,28,29,33,35,37,38,42,45,48,49,50,51,54],i,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:a,5:s,8:8,9:10,10:12,11:13,12:14,13:15,16:o,17:u,19:h,22:d,24:p,25:f,26:g,27:m,28:y,29:v,32:25,33:x,35:b,37:w,38:T,42:k,45:C,48:E,49:_,50:S,51:N,54:O},t(B,[2,5]),{9:38,10:12,11:13,12:14,13:15,16:o,17:u,19:h,22:d,24:p,25:f,26:g,27:m,28:y,29:v,32:25,33:x,35:b,37:w,38:T,42:k,45:C,48:E,49:_,50:S,51:N,54:O},t(B,[2,7]),t(B,[2,8]),t(B,[2,9]),t(B,[2,10]),t(B,[2,11]),t(B,[2,12],{14:[1,39],15:[1,40]}),t(B,[2,16]),{18:[1,41]},t(B,[2,18],{20:[1,42]}),{23:[1,43]},t(B,[2,22]),t(B,[2,23]),t(B,[2,24]),t(B,[2,25]),{30:44,31:[1,45],56:[1,46],57:[1,47]},t(B,[2,28]),{34:[1,48]},{36:[1,49]},t(B,[2,31]),{39:[1,50],41:[1,51]},{43:[1,52]},{46:[1,53]},t(L,[2,42],{55:[1,54]}),t(L,[2,43],{55:[1,55]}),t(B,[2,36]),t(B,[2,37]),t(B,[2,38]),t(B,[2,39]),t(B,[2,6]),t(B,[2,13]),{13:56,24:p,54:O},t(B,[2,17]),t(I,i,{7:57}),{24:[1,58]},{24:[1,59]},{23:[1,60]},{24:[2,46]},{24:[2,47]},t(B,[2,29]),t(B,[2,30]),{40:[1,61]},{40:[1,62]},{44:[1,63]},{47:[1,64]},{24:[1,65]},{24:[1,66]},t(B,[2,14],{14:[1,67]}),{4:a,5:s,8:8,9:10,10:12,11:13,12:14,13:15,16:o,17:u,19:h,21:[1,68],22:d,24:p,25:f,26:g,27:m,28:y,29:v,32:25,33:x,35:b,37:w,38:T,42:k,45:C,48:E,49:_,50:S,51:N,54:O},t(B,[2,20],{20:[1,69]}),{31:[1,70]},{24:[1,71]},t(B,[2,32]),t(B,[2,33]),t(B,[2,34]),t(B,[2,35]),t(L,[2,44]),t(L,[2,45]),t(B,[2,15]),t(B,[2,19]),t(I,i,{7:72}),t(B,[2,26]),t(B,[2,27]),{4:a,5:s,8:8,9:10,10:12,11:13,12:14,13:15,16:o,17:u,19:h,21:[1,73],22:d,24:p,25:f,26:g,27:m,28:y,29:v,32:25,33:x,35:b,37:w,38:T,42:k,45:C,48:E,49:_,50:S,51:N,54:O},t(B,[2,21])],defaultActions:{5:[2,1],6:[2,2],46:[2,46],47:[2,47]},parseError:l((function(R,P){if(!P.recoverable){var $=new Error(R);throw $.hash=P,$}this.trace(R)}),"parseError"),parse:l((function(R){var P=this,$=[0],z=[],q=[null],W=[],Q=this.table,te="",oe=0,re=0,H=2,K=1,ie=W.slice.call(arguments,1),ne=Object.create(this.lexer),J={yy:{}};for(var ue in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ue)&&(J.yy[ue]=this.yy[ue]);ne.setInput(R,J.yy),J.yy.lexer=ne,J.yy.parser=this,ne.yylloc===void 0&&(ne.yylloc={});var Y=ne.yylloc;W.push(Y);var se=ne.options&&ne.options.ranges;function de(X){$.length=$.length-2*X,q.length=q.length-X,W.length=W.length-X}function ce(){var X;return typeof(X=z.pop()||ne.lex()||K)!="number"&&(X instanceof Array&&(X=(z=X).pop()),X=P.symbols_[X]||X),X}typeof J.yy.parseError=="function"?this.parseError=J.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,l(de,"popStack"),l(ce,"lex");for(var Ee,ve,De,Ue,ze,Ge,$e,Pe,j={};;){if(ve=$[$.length-1],this.defaultActions[ve]?De=this.defaultActions[ve]:(Ee==null&&(Ee=ce()),De=Q[ve]&&Q[ve][Ee]),De===void 0||!De.length||!De[0]){var pe="";for(ze in Pe=[],Q[ve])this.terminals_[ze]&&ze>H&&Pe.push("'"+this.terminals_[ze]+"'");pe=ne.showPosition?"Parse error on line "+(oe+1)+`:
`+ne.showPosition()+`
Expecting `+Pe.join(", ")+", got '"+(this.terminals_[Ee]||Ee)+"'":"Parse error on line "+(oe+1)+": Unexpected "+(Ee==K?"end of input":"'"+(this.terminals_[Ee]||Ee)+"'"),this.parseError(pe,{text:ne.match,token:this.terminals_[Ee]||Ee,line:ne.yylineno,loc:Y,expected:Pe})}if(De[0]instanceof Array&&De.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ve+", token: "+Ee);switch(De[0]){case 1:$.push(Ee),q.push(ne.yytext),W.push(ne.yylloc),$.push(De[1]),Ee=null,re=ne.yyleng,te=ne.yytext,oe=ne.yylineno,Y=ne.yylloc;break;case 2:if(Ge=this.productions_[De[1]][1],j.$=q[q.length-Ge],j._$={first_line:W[W.length-(Ge||1)].first_line,last_line:W[W.length-1].last_line,first_column:W[W.length-(Ge||1)].first_column,last_column:W[W.length-1].last_column},se&&(j._$.range=[W[W.length-(Ge||1)].range[0],W[W.length-1].range[1]]),(Ue=this.performAction.apply(j,[te,re,oe,J.yy,De[1],q,W].concat(ie)))!==void 0)return Ue;Ge&&($=$.slice(0,-1*Ge*2),q=q.slice(0,-1*Ge),W=W.slice(0,-1*Ge)),$.push(this.productions_[De[1]][0]),q.push(j.$),W.push(j._$),$e=Q[$[$.length-2]][$[$.length-1]],$.push($e);break;case 3:return!0}}return!0}),"parse")},M=(function(){var R={EOF:1,parseError:l((function(P,$){if(!this.yy.parser)throw new Error(P);this.yy.parser.parseError(P,$)}),"parseError"),setInput:l((function(P,$){return this.yy=$||this.yy||{},this._input=P,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:l((function(){var P=this._input[0];return this.yytext+=P,this.yyleng++,this.offset++,this.match+=P,this.matched+=P,P.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),P}),"input"),unput:l((function(P){var $=P.length,z=P.split(/(?:\r\n?|\n)/g);this._input=P+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-$),this.offset-=$;var q=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),z.length-1&&(this.yylineno-=z.length-1);var W=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:z?(z.length===q.length?this.yylloc.first_column:0)+q[q.length-z.length].length-z[0].length:this.yylloc.first_column-$},this.options.ranges&&(this.yylloc.range=[W[0],W[0]+this.yyleng-$]),this.yyleng=this.yytext.length,this}),"unput"),more:l((function(){return this._more=!0,this}),"more"),reject:l((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:l((function(P){this.unput(this.match.slice(P))}),"less"),pastInput:l((function(){var P=this.matched.substr(0,this.matched.length-this.match.length);return(P.length>20?"...":"")+P.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:l((function(){var P=this.match;return P.length<20&&(P+=this._input.substr(0,20-P.length)),(P.substr(0,20)+(P.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:l((function(){var P=this.pastInput(),$=new Array(P.length+1).join("-");return P+this.upcomingInput()+`
`+$+"^"}),"showPosition"),test_match:l((function(P,$){var z,q,W;if(this.options.backtrack_lexer&&(W={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(W.yylloc.range=this.yylloc.range.slice(0))),(q=P[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=q.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:q?q[q.length-1].length-q[q.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+P[0].length},this.yytext+=P[0],this.match+=P[0],this.matches=P,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(P[0].length),this.matched+=P[0],z=this.performAction.call(this,this.yy,this,$,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),z)return z;if(this._backtrack){for(var Q in W)this[Q]=W[Q];return!1}return!1}),"test_match"),next:l((function(){if(this.done)return this.EOF;var P,$,z,q;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var W=this._currentRules(),Q=0;Q<W.length;Q++)if((z=this._input.match(this.rules[W[Q]]))&&(!$||z[0].length>$[0].length)){if($=z,q=Q,this.options.backtrack_lexer){if((P=this.test_match(z,W[Q]))!==!1)return P;if(this._backtrack){$=!1;continue}return!1}if(!this.options.flex)break}return $?(P=this.test_match($,W[q]))!==!1&&P:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:l((function(){var P=this.next();return P||this.lex()}),"lex"),begin:l((function(P){this.conditionStack.push(P)}),"begin"),popState:l((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:l((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:l((function(P){return(P=this.conditionStack.length-1-Math.abs(P||0))>=0?this.conditionStack[P]:"INITIAL"}),"topState"),pushState:l((function(P){this.begin(P)}),"pushState"),stateStackSize:l((function(){return this.conditionStack.length}),"stateStackSize"),options:{"case-insensitive":!0},performAction:l((function(P,$,z,q){switch(z){case 0:return 41;case 1:case 42:return 48;case 2:case 43:return 49;case 3:case 44:return 50;case 4:case 45:return 51;case 5:case 6:case 8:case 9:case 10:case 11:case 54:case 56:case 62:break;case 7:case 77:return 5;case 12:case 32:return this.pushState("SCALE"),17;case 13:case 33:return 18;case 14:case 20:case 34:case 49:case 52:this.popState();break;case 15:return this.begin("acc_title"),33;case 16:return this.popState(),"acc_title_value";case 17:return this.begin("acc_descr"),35;case 18:return this.popState(),"acc_descr_value";case 19:this.begin("acc_descr_multiline");break;case 21:return"acc_descr_multiline_value";case 22:return this.pushState("CLASSDEF"),38;case 23:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 24:return this.popState(),this.pushState("CLASSDEFID"),39;case 25:return this.popState(),40;case 26:return this.pushState("CLASS"),45;case 27:return this.popState(),this.pushState("CLASS_STYLE"),46;case 28:return this.popState(),47;case 29:return this.pushState("STYLE"),42;case 30:return this.popState(),this.pushState("STYLEDEF_STYLES"),43;case 31:return this.popState(),44;case 35:this.pushState("STATE");break;case 36:case 39:return this.popState(),$.yytext=$.yytext.slice(0,-8).trim(),25;case 37:case 40:return this.popState(),$.yytext=$.yytext.slice(0,-8).trim(),26;case 38:case 41:return this.popState(),$.yytext=$.yytext.slice(0,-10).trim(),27;case 46:this.pushState("STATE_STRING");break;case 47:return this.pushState("STATE_ID"),"AS";case 48:case 64:return this.popState(),"ID";case 50:return"STATE_DESCR";case 51:return 19;case 53:return this.popState(),this.pushState("struct"),20;case 55:return this.popState(),21;case 57:return this.begin("NOTE"),29;case 58:return this.popState(),this.pushState("NOTE_ID"),56;case 59:return this.popState(),this.pushState("NOTE_ID"),57;case 60:this.popState(),this.pushState("FLOATING_NOTE");break;case 61:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 63:return"NOTE_TEXT";case 65:return this.popState(),this.pushState("NOTE_TEXT"),24;case 66:return this.popState(),$.yytext=$.yytext.substr(2).trim(),31;case 67:return this.popState(),$.yytext=$.yytext.slice(0,-8).trim(),31;case 68:case 69:return 6;case 70:return 16;case 71:return 54;case 72:return 24;case 73:return $.yytext=$.yytext.trim(),14;case 74:return 15;case 75:return 28;case 76:return 55;case 78:return"INVALID"}}),"anonymous"),rules:[/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:style\s+)/i,/^(?:[\w,]+\s+)/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[9,10],inclusive:!1},struct:{rules:[9,10,22,26,29,35,42,43,44,45,54,55,56,57,71,72,73,74,75],inclusive:!1},FLOATING_NOTE_ID:{rules:[64],inclusive:!1},FLOATING_NOTE:{rules:[61,62,63],inclusive:!1},NOTE_TEXT:{rules:[66,67],inclusive:!1},NOTE_ID:{rules:[65],inclusive:!1},NOTE:{rules:[58,59,60],inclusive:!1},STYLEDEF_STYLEOPTS:{rules:[],inclusive:!1},STYLEDEF_STYLES:{rules:[31],inclusive:!1},STYLE_IDS:{rules:[],inclusive:!1},STYLE:{rules:[30],inclusive:!1},CLASS_STYLE:{rules:[28],inclusive:!1},CLASS:{rules:[27],inclusive:!1},CLASSDEFID:{rules:[25],inclusive:!1},CLASSDEF:{rules:[23,24],inclusive:!1},acc_descr_multiline:{rules:[20,21],inclusive:!1},acc_descr:{rules:[18],inclusive:!1},acc_title:{rules:[16],inclusive:!1},SCALE:{rules:[13,14,33,34],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[48],inclusive:!1},STATE_STRING:{rules:[49,50],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[9,10,36,37,38,39,40,41,46,47,51,52,53],inclusive:!1},ID:{rules:[9,10],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,10,11,12,15,17,19,22,26,29,32,35,53,57,68,69,70,71,72,73,74,76,77,78],inclusive:!0}}};return R})();function D(){this.yy={}}return A.lexer=M,l(D,"Parser"),D.prototype=A,A.Parser=D,new D})();oS.parser=oS;var Aie=oS,Lie=l(((t,e="TB")=>{if(!t.doc)return e;let r=e;for(const n of t.doc)n.stmt==="dir"&&(r=n.value);return r}),"getDir"),kwe=l((function(t,e){return e.db.getClasses()}),"getClasses"),Twe=l((async function(t,e,r,n){ee.info("REF0:"),ee.info("Drawing state diagram (v2)",e);const{securityLevel:i,state:a,layout:s}=ke();n.db.extract(n.db.getRootDocV2());const o=n.db.getData(),u=$v(e,i);o.type=n.type,o.layoutAlgorithm=s,o.nodeSpacing=a?.nodeSpacing||50,o.rankSpacing=a?.rankSpacing||50,o.markers=["barb"],o.diagramId=e,await Av(o,u),Vt.insertTitle(u,"statediagramTitleText",a?.titleTopMargin??25,n.db.getDiagramTitle()),Fv(u,8,"statediagram",a?.useMaxWidth??!0)}),"draw"),Ewe={getClasses:kwe,draw:Twe,getDir:Lie},t4=new Map,Ll=0;function r4(t="",e=0,r="",n="----"){return`state-${t}${r!==null&&r.length>0?`${n}${r}`:""}-${e}`}l(r4,"stateDomId");var _we=l(((t,e,r,n,i,a,s,o)=>{ee.trace("items",e),e.forEach((u=>{switch(u.stmt){case"state":case"default":n4(t,u,r,n,i,a,s,o);break;case"relation":{n4(t,u.state1,r,n,i,a,s,o),n4(t,u.state2,r,n,i,a,s,o);const h={id:"edge"+Ll,start:u.state1.id,end:u.state2.id,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:"fill:none",labelStyle:"",label:He.sanitizeText(u.description,ke()),arrowheadStyle:"fill: #333",labelpos:"c",labelType:"text",thickness:"normal",classes:"transition",look:s};i.push(h),Ll++}}}))}),"setupDoc"),zO=l(((t,e="TB")=>{let r=e;if(t.doc)for(const n of t.doc)n.stmt==="dir"&&(r=n.value);return r}),"getDir");function hy(t,e,r){if(!e.id||e.id==="</join></fork>"||e.id==="</choice>")return;e.cssClasses&&(Array.isArray(e.cssCompiledStyles)||(e.cssCompiledStyles=[]),e.cssClasses.split(" ").forEach((i=>{if(r.get(i)){const a=r.get(i);e.cssCompiledStyles=[...e.cssCompiledStyles,...a.styles]}})));const n=t.find((i=>i.id===e.id));n?Object.assign(n,e):t.push(e)}function Nie(t){return t?.classes?.join(" ")??""}function Iie(t){return t?.styles??[]}l(hy,"insertOrUpdateNode"),l(Nie,"getClassesFromDbInfo"),l(Iie,"getStylesFromDbInfo");var n4=l(((t,e,r,n,i,a,s,o)=>{const u=e.id,h=r.get(u),d=Nie(h),p=Iie(h);if(ee.info("dataFetcher parsedItem",e,h,p),u!=="root"){let f="rect";e.start===!0?f="stateStart":e.start===!1&&(f="stateEnd"),e.type!=="default"&&(f=e.type),t4.get(u)||t4.set(u,{id:u,shape:f,description:He.sanitizeText(u,ke()),cssClasses:`${d} statediagram-state`,cssStyles:p});const g=t4.get(u);e.description&&(Array.isArray(g.description)?(g.shape="rectWithTitle",g.description.push(e.description)):g.description?.length>0?(g.shape="rectWithTitle",g.description===u?g.description=[e.description]:g.description=[g.description,e.description]):(g.shape="rect",g.description=e.description),g.description=He.sanitizeTextOrArray(g.description,ke())),g.description?.length===1&&g.shape==="rectWithTitle"&&(g.type==="group"?g.shape="roundedWithTitle":g.shape="rect"),!g.type&&e.doc&&(ee.info("Setting cluster for XCX",u,zO(e)),g.type="group",g.isGroup=!0,g.dir=zO(e),g.shape=e.type==="divider"?"divider":"roundedWithTitle",g.cssClasses=`${g.cssClasses} statediagram-cluster ${a?"statediagram-cluster-alt":""}`);const m={labelStyle:"",shape:g.shape,label:g.description,cssClasses:g.cssClasses,cssCompiledStyles:[],cssStyles:g.cssStyles,id:u,dir:g.dir,domId:r4(u,Ll),type:g.type,isGroup:g.type==="group",padding:8,rx:10,ry:10,look:s};if(m.shape==="divider"&&(m.label=""),t&&t.id!=="root"&&(ee.trace("Setting node ",u," to be child of its parent ",t.id),m.parentId=t.id),m.centerLabel=!0,e.note){const y={labelStyle:"",shape:"note",label:e.note.text,cssClasses:"statediagram-note",cssStyles:[],cssCompilesStyles:[],id:u+"----note-"+Ll,domId:r4(u,Ll,"note"),type:g.type,isGroup:g.type==="group",padding:ke().flowchart.padding,look:s,position:e.note.position},v=u+"----parent",x={labelStyle:"",shape:"noteGroup",label:e.note.text,cssClasses:g.cssClasses,cssStyles:[],id:u+"----parent",domId:r4(u,Ll,"parent"),type:"group",isGroup:!0,padding:16,look:s,position:e.note.position};Ll++,x.id=v,y.parentId=v,hy(n,x,o),hy(n,y,o),hy(n,m,o);let b=u,w=y.id;e.note.position==="left of"&&(b=y.id,w=u),i.push({id:b+"-"+w,start:b,end:w,arrowhead:"none",arrowTypeEnd:"",style:"fill:none",labelStyle:"",classes:"transition note-edge",arrowheadStyle:"fill: #333",labelpos:"c",labelType:"text",thickness:"normal",look:s})}else hy(n,m,o)}e.doc&&(ee.trace("Adding nodes children "),_we(e,e.doc,r,n,i,!a,s,o))}),"dataFetcher"),Cwe=l((()=>{t4.clear(),Ll=0}),"reset");function lS(){return new Map}l(lS,"newClassesList");var ba,GO=l((()=>({relations:[],states:new Map,documents:{}})),"newDoc"),Wx=l((t=>JSON.parse(JSON.stringify(t))),"clone"),du,Qc=(du=class{constructor(e){this.clear(),this.version=e,this.setRootDoc=this.setRootDoc.bind(this),this.getDividerId=this.getDividerId.bind(this),this.setDirection=this.setDirection.bind(this),this.trimColon=this.trimColon.bind(this)}version;nodes=[];edges=[];rootDoc=[];classes=lS();documents={root:GO()};currentDocument=this.documents.root;startEndCount=0;dividerCnt=0;setRootDoc(e){ee.info("Setting root doc",e),this.rootDoc=e,this.version===1?this.extract(e):this.extract(this.getRootDocV2())}getRootDoc(){return this.rootDoc}docTranslator(e,r,n){if(r.stmt==="relation")this.docTranslator(e,r.state1,!0),this.docTranslator(e,r.state2,!1);else if(r.stmt==="state"&&(r.id==="[*]"?(r.id=n?e.id+"_start":e.id+"_end",r.start=n):r.id=r.id.trim()),r.doc){const i=[];let a,s=[];for(a=0;a<r.doc.length;a++)if(r.doc[a].type==="divider"){const o=Wx(r.doc[a]);o.doc=Wx(s),i.push(o),s=[]}else s.push(r.doc[a]);if(i.length>0&&s.length>0){const o={stmt:"state",id:FY(),type:"divider",doc:Wx(s)};i.push(Wx(o)),r.doc=i}r.doc.forEach((o=>this.docTranslator(r,o,!0)))}}getRootDocV2(){return this.docTranslator({id:"root"},{id:"root",doc:this.rootDoc},!0),{id:"root",doc:this.rootDoc}}extract(e){let r;r=e.doc?e.doc:e,ee.info(r),this.clear(!0),ee.info("Extract initial document:",r),r.forEach((a=>{switch(ee.warn("Statement",a.stmt),a.stmt){case"state":this.addState(a.id.trim(),a.type,a.doc,a.description,a.note,a.classes,a.styles,a.textStyles);break;case"relation":this.addRelation(a.state1,a.state2,a.description);break;case"classDef":this.addStyleClass(a.id.trim(),a.classes);break;case"style":{const s=a.id.trim().split(","),o=a.styleClass.split(",");s.forEach((u=>{let h=this.getState(u);if(h===void 0){const d=u.trim();this.addState(d),h=this.getState(d)}h.styles=o.map((d=>d.replace(/;/g,"")?.trim()))}))}break;case"applyClass":this.setCssClass(a.id.trim(),a.styleClass)}}));const n=this.getStates(),i=ke().look;Cwe(),n4(void 0,this.getRootDocV2(),n,this.nodes,this.edges,!0,i,this.classes),this.nodes.forEach((a=>{if(Array.isArray(a.label)){if(a.description=a.label.slice(1),a.isGroup&&a.description.length>0)throw new Error("Group nodes can only have label. Remove the additional description for node ["+a.id+"]");a.label=a.label[0]}}))}addState(e,r="default",n=null,i=null,a=null,s=null,o=null,u=null){const h=e?.trim();if(this.currentDocument.states.has(h)?(this.currentDocument.states.get(h).doc||(this.currentDocument.states.get(h).doc=n),this.currentDocument.states.get(h).type||(this.currentDocument.states.get(h).type=r)):(ee.info("Adding state ",h,i),this.currentDocument.states.set(h,{id:h,descriptions:[],type:r,doc:n,note:a,classes:[],styles:[],textStyles:[]})),i&&(ee.info("Setting state description",h,i),typeof i=="string"&&this.addDescription(h,i.trim()),typeof i=="object"&&i.forEach((d=>this.addDescription(h,d.trim())))),a){const d=this.currentDocument.states.get(h);d.note=a,d.note.text=He.sanitizeText(d.note.text,ke())}s&&(ee.info("Setting state classes",h,s),(typeof s=="string"?[s]:s).forEach((d=>this.setCssClass(h,d.trim())))),o&&(ee.info("Setting state styles",h,o),(typeof o=="string"?[o]:o).forEach((d=>this.setStyle(h,d.trim())))),u&&(ee.info("Setting state styles",h,o),(typeof u=="string"?[u]:u).forEach((d=>this.setTextStyle(h,d.trim()))))}clear(e){this.nodes=[],this.edges=[],this.documents={root:GO()},this.currentDocument=this.documents.root,this.startEndCount=0,this.classes=lS(),e||jn()}getState(e){return this.currentDocument.states.get(e)}getStates(){return this.currentDocument.states}logDocuments(){ee.info("Documents = ",this.documents)}getRelations(){return this.currentDocument.relations}startIdIfNeeded(e=""){let r=e;return e==="[*]"&&(this.startEndCount++,r=`start${this.startEndCount}`),r}startTypeIfNeeded(e="",r="default"){return e==="[*]"?"start":r}endIdIfNeeded(e=""){let r=e;return e==="[*]"&&(this.startEndCount++,r=`end${this.startEndCount}`),r}endTypeIfNeeded(e="",r="default"){return e==="[*]"?"end":r}addRelationObjs(e,r,n){let i=this.startIdIfNeeded(e.id.trim()),a=this.startTypeIfNeeded(e.id.trim(),e.type),s=this.startIdIfNeeded(r.id.trim()),o=this.startTypeIfNeeded(r.id.trim(),r.type);this.addState(i,a,e.doc,e.description,e.note,e.classes,e.styles,e.textStyles),this.addState(s,o,r.doc,r.description,r.note,r.classes,r.styles,r.textStyles),this.currentDocument.relations.push({id1:i,id2:s,relationTitle:He.sanitizeText(n,ke())})}addRelation(e,r,n){if(typeof e=="object")this.addRelationObjs(e,r,n);else{const i=this.startIdIfNeeded(e.trim()),a=this.startTypeIfNeeded(e),s=this.endIdIfNeeded(r.trim()),o=this.endTypeIfNeeded(r);this.addState(i,a),this.addState(s,o),this.currentDocument.relations.push({id1:i,id2:s,title:He.sanitizeText(n,ke())})}}addDescription(e,r){const n=this.currentDocument.states.get(e),i=r.startsWith(":")?r.replace(":","").trim():r;n.descriptions.push(He.sanitizeText(i,ke()))}cleanupLabel(e){return e.substring(0,1)===":"?e.substr(2).trim():e.trim()}getDividerId(){return this.dividerCnt++,"divider-id-"+this.dividerCnt}addStyleClass(e,r=""){this.classes.has(e)||this.classes.set(e,{id:e,styles:[],textStyles:[]});const n=this.classes.get(e);r?.split(",").forEach((i=>{const a=i.replace(/([^;]*);/,"$1").trim();if(RegExp("color").exec(i)){const s=a.replace("fill","bgFill").replace("color","fill");n.textStyles.push(s)}n.styles.push(a)}))}getClasses(){return this.classes}setCssClass(e,r){e.split(",").forEach((n=>{let i=this.getState(n);if(i===void 0){const a=n.trim();this.addState(a),i=this.getState(a)}i.classes.push(r)}))}setStyle(e,r){const n=this.getState(e);n!==void 0&&n.styles.push(r)}setTextStyle(e,r){const n=this.getState(e);n!==void 0&&n.textStyles.push(r)}getDirectionStatement(){return this.rootDoc.find((e=>e.stmt==="dir"))}getDirection(){return this.getDirectionStatement()?.value??"TB"}setDirection(e){const r=this.getDirectionStatement();r?r.value=e:this.rootDoc.unshift({stmt:"dir",value:e})}trimColon(e){return e&&e[0]===":"?e.substr(1).trim():e.trim()}getData(){const e=ke();return{nodes:this.nodes,edges:this.edges,other:{},config:e,direction:Lie(this.getRootDocV2())}}getConfig(){return ke().state}getAccTitle=Xn;setAccTitle=zn;getAccDescription=Zn;setAccDescription=Kn;setDiagramTitle=di;getDiagramTitle=Wn},l(du,"StateDB"),xk(du,"relationType",{AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3}),du),Rie=l((t=>`
defs #statediagram-barbEnd {
    fill: ${t.transitionColor};
    stroke: ${t.transitionColor};
  }
g.stateGroup text {
  fill: ${t.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${t.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${t.stateLabelColor};
}

g.stateGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.stateGroup line {
  stroke: ${t.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${t.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${t.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${t.noteBorderColor};
  fill: ${t.noteBkgColor};

  text {
    fill: ${t.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${t.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel {
  background-color: ${t.edgeLabelBackground};
  p {
    background-color: ${t.edgeLabelBackground};
  }
  rect {
    opacity: 0.5;
    background-color: ${t.edgeLabelBackground};
    fill: ${t.edgeLabelBackground};
  }
  text-align: center;
}
.edgeLabel .label text {
  fill: ${t.transitionLabelColor||t.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${t.transitionLabelColor||t.tertiaryTextColor};
}

.stateLabel text {
  fill: ${t.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node .fork-join {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node circle.state-end {
  fill: ${t.innerEndBackground};
  stroke: ${t.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${t.compositeBackground||t.background};
  // stroke: ${t.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${t.stateBkg||t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${t.lineColor};
}

.statediagram-cluster rect {
  fill: ${t.compositeTitleBackground};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${t.stateLabelColor};
  // line-height: 1;
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${t.stateBorder||t.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${t.compositeBackground||t.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${t.altBackground?t.altBackground:"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${t.altBackground?t.altBackground:"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${t.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${t.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${t.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${t.lineColor};
  stroke: ${t.lineColor};
  stroke-width: 1;
}

.statediagramTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${t.textColor};
}
`),"getStyles"),wN={},Swe=l(((t,e)=>{wN[t]=e}),"set"),Awe=l((t=>wN[t]),"get"),Mie=l((()=>Object.keys(wN)),"keys"),Lwe=l((()=>Mie().length),"size"),Nwe={get:Awe,set:Swe,keys:Mie,size:Lwe},Iwe=l((t=>t.append("circle").attr("class","start-state").attr("r",ke().state.sizeUnit).attr("cx",ke().state.padding+ke().state.sizeUnit).attr("cy",ke().state.padding+ke().state.sizeUnit)),"drawStartState"),Rwe=l((t=>t.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",ke().state.textHeight).attr("class","divider").attr("x2",2*ke().state.textHeight).attr("y1",0).attr("y2",0)),"drawDivider"),Mwe=l(((t,e)=>{const r=t.append("text").attr("x",2*ke().state.padding).attr("y",ke().state.textHeight+2*ke().state.padding).attr("font-size",ke().state.fontSize).attr("class","state-title").text(e.id),n=r.node().getBBox();return t.insert("rect",":first-child").attr("x",ke().state.padding).attr("y",ke().state.padding).attr("width",n.width+2*ke().state.padding).attr("height",n.height+2*ke().state.padding).attr("rx",ke().state.radius),r}),"drawSimpleState"),Dwe=l(((t,e)=>{const r=l((function(p,f,g){const m=p.append("tspan").attr("x",2*ke().state.padding).text(f);g||m.attr("dy",ke().state.textHeight)}),"addTspan"),n=t.append("text").attr("x",2*ke().state.padding).attr("y",ke().state.textHeight+1.3*ke().state.padding).attr("font-size",ke().state.fontSize).attr("class","state-title").text(e.descriptions[0]).node().getBBox(),i=n.height,a=t.append("text").attr("x",ke().state.padding).attr("y",i+.4*ke().state.padding+ke().state.dividerMargin+ke().state.textHeight).attr("class","state-description");let s=!0,o=!0;e.descriptions.forEach((function(p){s||(r(a,p,o),o=!1),s=!1}));const u=t.append("line").attr("x1",ke().state.padding).attr("y1",ke().state.padding+i+ke().state.dividerMargin/2).attr("y2",ke().state.padding+i+ke().state.dividerMargin/2).attr("class","descr-divider"),h=a.node().getBBox(),d=Math.max(h.width,n.width);return u.attr("x2",d+3*ke().state.padding),t.insert("rect",":first-child").attr("x",ke().state.padding).attr("y",ke().state.padding).attr("width",d+2*ke().state.padding).attr("height",h.height+i+2*ke().state.padding).attr("rx",ke().state.radius),t}),"drawDescrState"),Owe=l(((t,e,r)=>{const n=ke().state.padding,i=2*ke().state.padding,a=t.node().getBBox(),s=a.width,o=a.x,u=t.append("text").attr("x",0).attr("y",ke().state.titleShift).attr("font-size",ke().state.fontSize).attr("class","state-title").text(e.id),h=u.node().getBBox().width+i;let d,p=Math.max(h,s);p===s&&(p+=i);const f=t.node().getBBox();e.doc,d=o-n,h>s&&(d=(s-p)/2+n),Math.abs(o-f.x)<n&&h>s&&(d=o-(h-s)/2);const g=1-ke().state.textHeight;return t.insert("rect",":first-child").attr("x",d).attr("y",g).attr("class",r?"alt-composit":"composit").attr("width",p).attr("height",f.height+ke().state.textHeight+ke().state.titleShift+1).attr("rx","0"),u.attr("x",d+n),h<=s&&u.attr("x",o+(p-i)/2-h/2+n),t.insert("rect",":first-child").attr("x",d).attr("y",ke().state.titleShift-ke().state.textHeight-ke().state.padding).attr("width",p).attr("height",3*ke().state.textHeight).attr("rx",ke().state.radius),t.insert("rect",":first-child").attr("x",d).attr("y",ke().state.titleShift-ke().state.textHeight-ke().state.padding).attr("width",p).attr("height",f.height+3+2*ke().state.textHeight).attr("rx",ke().state.radius),t}),"addTitleAndBox"),Pwe=l((t=>(t.append("circle").attr("class","end-state-outer").attr("r",ke().state.sizeUnit+ke().state.miniPadding).attr("cx",ke().state.padding+ke().state.sizeUnit+ke().state.miniPadding).attr("cy",ke().state.padding+ke().state.sizeUnit+ke().state.miniPadding),t.append("circle").attr("class","end-state-inner").attr("r",ke().state.sizeUnit).attr("cx",ke().state.padding+ke().state.sizeUnit+2).attr("cy",ke().state.padding+ke().state.sizeUnit+2))),"drawEndState"),Bwe=l(((t,e)=>{let r=ke().state.forkWidth,n=ke().state.forkHeight;if(e.parentId){let i=r;r=n,n=i}return t.append("rect").style("stroke","black").style("fill","black").attr("width",r).attr("height",n).attr("x",ke().state.padding).attr("y",ke().state.padding)}),"drawForkJoinState"),$we=l(((t,e,r,n)=>{let i=0;const a=n.append("text");a.style("text-anchor","start"),a.attr("class","noteText");let s=t.replace(/\r\n/g,"<br/>");s=s.replace(/\n/g,"<br/>");const o=s.split(He.lineBreakRegex);let u=1.25*ke().state.noteMargin;for(const h of o){const d=h.trim();if(d.length>0){const p=a.append("tspan");p.text(d),u===0&&(u+=p.node().getBBox().height),i+=u,p.attr("x",e+ke().state.noteMargin),p.attr("y",r+i+1.25*ke().state.noteMargin)}}return{textWidth:a.node().getBBox().width,textHeight:i}}),"_drawLongText"),Fwe=l(((t,e)=>{e.attr("class","state-note");const r=e.append("rect").attr("x",0).attr("y",ke().state.padding),n=e.append("g"),{textWidth:i,textHeight:a}=$we(t,0,0,n);return r.attr("height",a+2*ke().state.noteMargin),r.attr("width",i+2*ke().state.noteMargin),r}),"drawNote"),UO=l((function(t,e){const r=e.id,n={id:r,label:e.id,width:0,height:0},i=t.append("g").attr("id",r).attr("class","stateGroup");e.type==="start"&&Iwe(i),e.type==="end"&&Pwe(i),e.type!=="fork"&&e.type!=="join"||Bwe(i,e),e.type==="note"&&Fwe(e.note.text,i),e.type==="divider"&&Rwe(i),e.type==="default"&&e.descriptions.length===0&&Mwe(i,e),e.type==="default"&&e.descriptions.length>0&&Dwe(i,e);const a=i.node().getBBox();return n.width=a.width+2*ke().state.padding,n.height=a.height+2*ke().state.padding,Nwe.set(r,n),n}),"drawState"),qO=0,zwe=l((function(t,e,r){const n=l((function(u){switch(u){case Qc.relationType.AGGREGATION:return"aggregation";case Qc.relationType.EXTENSION:return"extension";case Qc.relationType.COMPOSITION:return"composition";case Qc.relationType.DEPENDENCY:return"dependency"}}),"getRelationType");e.points=e.points.filter((u=>!Number.isNaN(u.y)));const i=e.points,a=P0().x((function(u){return u.x})).y((function(u){return u.y})).curve(B0),s=t.append("path").attr("d",a(i)).attr("id","edge"+qO).attr("class","transition");let o="";if(ke().state.arrowMarkerAbsolute&&(o=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,o=o.replace(/\(/g,"\\("),o=o.replace(/\)/g,"\\)")),s.attr("marker-end","url("+o+"#"+n(Qc.relationType.DEPENDENCY)+"End)"),r.title!==void 0){const u=t.append("g").attr("class","stateLabel"),{x:h,y:d}=Vt.calcLabelPosition(e.points),p=He.getRows(r.title);let f=0;const g=[];let m=0,y=0;for(let b=0;b<=p.length;b++){const w=u.append("text").attr("text-anchor","middle").text(p[b]).attr("x",h).attr("y",d+f),T=w.node().getBBox();m=Math.max(m,T.width),y=Math.min(y,T.x),ee.info(T.x,h,d+f),f===0&&(f=w.node().getBBox().height,ee.info("Title height",f,d)),g.push(w)}let v=f*p.length;if(p.length>1){const b=(p.length-1)*f*.5;g.forEach(((w,T)=>w.attr("y",d+T*f-b))),v=f*p.length}const x=u.node().getBBox();u.insert("rect",":first-child").attr("class","box").attr("x",h-m/2-ke().state.padding/2).attr("y",d-v/2-ke().state.padding/2-3.5).attr("width",m+ke().state.padding).attr("height",v+ke().state.padding),ee.info(x)}qO++}),"drawEdge"),CT={},Gwe=l((function(){}),"setConf"),Uwe=l((function(t){t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}),"insertMarkers"),qwe=l((function(t,e,r,n){ba=ke().state;const i=ke().securityLevel;let a;i==="sandbox"&&(a=Ze("#i"+e));const s=Ze(i==="sandbox"?a.nodes()[0].contentDocument.body:"body"),o=i==="sandbox"?a.nodes()[0].contentDocument:document;ee.debug("Rendering diagram "+t);const u=s.select(`[id='${e}']`);Uwe(u);const h=n.db.getRootDoc();Die(h,u,void 0,!1,s,o,n);const d=ba.padding,p=u.node().getBBox(),f=p.width+2*d,g=p.height+2*d;da(u,g,1.75*f,ba.useMaxWidth),u.attr("viewBox",`${p.x-ba.padding}  ${p.y-ba.padding} `+f+" "+g)}),"draw"),jwe=l((t=>t?t.length*ba.fontSizeFactor:1),"getLabelWidth"),Die=l(((t,e,r,n,i,a,s)=>{const o=new la({compound:!0,multigraph:!0});let u,h=!0;for(u=0;u<t.length;u++)if(t[u].stmt==="relation"){h=!1;break}r?o.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:h?1:ba.edgeLengthFactor,nodeSep:h?1:50,isMultiGraph:!0}):o.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:h?1:ba.edgeLengthFactor,nodeSep:h?1:50,ranker:"tight-tree",isMultiGraph:!0}),o.setDefaultEdgeLabel((function(){return{}}));const d=s.db.getStates(),p=s.db.getRelations(),f=Object.keys(d);for(const x of f){const b=d[x];let w;if(r&&(b.parentId=r),b.doc){let T=e.append("g").attr("id",b.id).attr("class","stateGroup");w=Die(b.doc,T,b.id,!n,i,a,s);{T=Owe(T,b,n);let k=T.node().getBBox();w.width=k.width,w.height=k.height+ba.padding/2,CT[b.id]={y:ba.compositTitleSize}}}else w=UO(e,b,o);if(b.note){const T={descriptions:[],id:b.id+"-note",note:b.note,type:"note"},k=UO(e,T,o);b.note.position==="left of"?(o.setNode(w.id+"-note",k),o.setNode(w.id,w)):(o.setNode(w.id,w),o.setNode(w.id+"-note",k)),o.setParent(w.id,w.id+"-group"),o.setParent(w.id+"-note",w.id+"-group")}else o.setNode(w.id,w)}ee.debug("Count=",o.nodeCount(),o);let g=0;p.forEach((function(x){g++,ee.debug("Setting edge",x),o.setEdge(x.id1,x.id2,{relation:x,width:jwe(x.title),height:ba.labelHeight*He.getRows(x.title).length,labelpos:"c"},"id"+g)})),UA(o),ee.debug("Graph after layout",o.nodes());const m=e.node();o.nodes().forEach((function(x){x!==void 0&&o.node(x)!==void 0?(ee.warn("Node "+x+": "+JSON.stringify(o.node(x))),i.select("#"+m.id+" #"+x).attr("transform","translate("+(o.node(x).x-o.node(x).width/2)+","+(o.node(x).y+(CT[x]?CT[x].y:0)-o.node(x).height/2)+" )"),i.select("#"+m.id+" #"+x).attr("data-x-shift",o.node(x).x-o.node(x).width/2),a.querySelectorAll("#"+m.id+" #"+x+" .divider").forEach((b=>{const w=b.parentElement;let T=0,k=0;w&&(w.parentElement&&(T=w.parentElement.getBBox().width),k=parseInt(w.getAttribute("data-x-shift"),10),Number.isNaN(k)&&(k=0)),b.setAttribute("x1",0-k+8),b.setAttribute("x2",T-k-8)}))):ee.debug("No Node "+x+": "+JSON.stringify(o.node(x)))}));let y=m.getBBox();o.edges().forEach((function(x){x!==void 0&&o.edge(x)!==void 0&&(ee.debug("Edge "+x.v+" -> "+x.w+": "+JSON.stringify(o.edge(x))),zwe(e,o.edge(x),o.edge(x).relation))})),y=m.getBBox();const v={id:r||"root",label:r||"root",width:0,height:0};return v.width=y.width+2*ba.padding,v.height=y.height+2*ba.padding,ee.debug("Doc rendered",v,o),v}),"renderDoc"),Wwe={parser:Aie,get db(){return new Qc(1)},renderer:{setConf:Gwe,draw:qwe},styles:Rie,init:l((t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute}),"init")},Ywe=Object.freeze({__proto__:null,diagram:Wwe}),Vwe={parser:Aie,get db(){return new Qc(2)},renderer:Ewe,styles:Rie,init:l((t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute}),"init")},Hwe=Object.freeze({__proto__:null,diagram:Vwe}),cS=(function(){var t=l((function(p,f,g,m){for(g=g||{},m=p.length;m--;g[p[m]]=f);return g}),"o"),e=[6,8,10,11,12,14,16,17,18],r=[1,9],n=[1,10],i=[1,11],a=[1,12],s=[1,13],o=[1,14],u={trace:l((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,taskName:18,taskData:19,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",18:"taskName",19:"taskData"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,2]],performAction:l((function(p,f,g,m,y,v,x){var b=v.length-1;switch(y){case 1:return v[b-1];case 2:case 6:case 7:this.$=[];break;case 3:v[b-1].push(v[b]),this.$=v[b-1];break;case 4:case 5:this.$=v[b];break;case 8:m.setDiagramTitle(v[b].substr(6)),this.$=v[b].substr(6);break;case 9:this.$=v[b].trim(),m.setAccTitle(this.$);break;case 10:case 11:this.$=v[b].trim(),m.setAccDescription(this.$);break;case 12:m.addSection(v[b].substr(8)),this.$=v[b].substr(8);break;case 13:m.addTask(v[b-1],v[b]),this.$="task"}}),"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:r,12:n,14:i,16:a,17:s,18:o},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:15,11:r,12:n,14:i,16:a,17:s,18:o},t(e,[2,5]),t(e,[2,6]),t(e,[2,8]),{13:[1,16]},{15:[1,17]},t(e,[2,11]),t(e,[2,12]),{19:[1,18]},t(e,[2,4]),t(e,[2,9]),t(e,[2,10]),t(e,[2,13])],defaultActions:{},parseError:l((function(p,f){if(!f.recoverable){var g=new Error(p);throw g.hash=f,g}this.trace(p)}),"parseError"),parse:l((function(p){var f=this,g=[0],m=[],y=[null],v=[],x=this.table,b="",w=0,T=0,k=2,C=1,E=v.slice.call(arguments,1),_=Object.create(this.lexer),S={yy:{}};for(var N in this.yy)Object.prototype.hasOwnProperty.call(this.yy,N)&&(S.yy[N]=this.yy[N]);_.setInput(p,S.yy),S.yy.lexer=_,S.yy.parser=this,_.yylloc===void 0&&(_.yylloc={});var O=_.yylloc;v.push(O);var B=_.options&&_.options.ranges;function L(te){g.length=g.length-2*te,y.length=y.length-te,v.length=v.length-te}function I(){var te;return typeof(te=m.pop()||_.lex()||C)!="number"&&(te instanceof Array&&(te=(m=te).pop()),te=f.symbols_[te]||te),te}typeof S.yy.parseError=="function"?this.parseError=S.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,l(L,"popStack"),l(I,"lex");for(var A,M,D,R,P,$,z,q,W={};;){if(M=g[g.length-1],this.defaultActions[M]?D=this.defaultActions[M]:(A==null&&(A=I()),D=x[M]&&x[M][A]),D===void 0||!D.length||!D[0]){var Q="";for(P in q=[],x[M])this.terminals_[P]&&P>k&&q.push("'"+this.terminals_[P]+"'");Q=_.showPosition?"Parse error on line "+(w+1)+`:
`+_.showPosition()+`
Expecting `+q.join(", ")+", got '"+(this.terminals_[A]||A)+"'":"Parse error on line "+(w+1)+": Unexpected "+(A==C?"end of input":"'"+(this.terminals_[A]||A)+"'"),this.parseError(Q,{text:_.match,token:this.terminals_[A]||A,line:_.yylineno,loc:O,expected:q})}if(D[0]instanceof Array&&D.length>1)throw new Error("Parse Error: multiple actions possible at state: "+M+", token: "+A);switch(D[0]){case 1:g.push(A),y.push(_.yytext),v.push(_.yylloc),g.push(D[1]),A=null,T=_.yyleng,b=_.yytext,w=_.yylineno,O=_.yylloc;break;case 2:if($=this.productions_[D[1]][1],W.$=y[y.length-$],W._$={first_line:v[v.length-($||1)].first_line,last_line:v[v.length-1].last_line,first_column:v[v.length-($||1)].first_column,last_column:v[v.length-1].last_column},B&&(W._$.range=[v[v.length-($||1)].range[0],v[v.length-1].range[1]]),(R=this.performAction.apply(W,[b,T,w,S.yy,D[1],y,v].concat(E)))!==void 0)return R;$&&(g=g.slice(0,-1*$*2),y=y.slice(0,-1*$),v=v.slice(0,-1*$)),g.push(this.productions_[D[1]][0]),y.push(W.$),v.push(W._$),z=x[g[g.length-2]][g[g.length-1]],g.push(z);break;case 3:return!0}}return!0}),"parse")},h=(function(){var p={EOF:1,parseError:l((function(f,g){if(!this.yy.parser)throw new Error(f);this.yy.parser.parseError(f,g)}),"parseError"),setInput:l((function(f,g){return this.yy=g||this.yy||{},this._input=f,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:l((function(){var f=this._input[0];return this.yytext+=f,this.yyleng++,this.offset++,this.match+=f,this.matched+=f,f.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),f}),"input"),unput:l((function(f){var g=f.length,m=f.split(/(?:\r\n?|\n)/g);this._input=f+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-g),this.offset-=g;var y=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),m.length-1&&(this.yylineno-=m.length-1);var v=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:m?(m.length===y.length?this.yylloc.first_column:0)+y[y.length-m.length].length-m[0].length:this.yylloc.first_column-g},this.options.ranges&&(this.yylloc.range=[v[0],v[0]+this.yyleng-g]),this.yyleng=this.yytext.length,this}),"unput"),more:l((function(){return this._more=!0,this}),"more"),reject:l((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:l((function(f){this.unput(this.match.slice(f))}),"less"),pastInput:l((function(){var f=this.matched.substr(0,this.matched.length-this.match.length);return(f.length>20?"...":"")+f.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:l((function(){var f=this.match;return f.length<20&&(f+=this._input.substr(0,20-f.length)),(f.substr(0,20)+(f.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:l((function(){var f=this.pastInput(),g=new Array(f.length+1).join("-");return f+this.upcomingInput()+`
`+g+"^"}),"showPosition"),test_match:l((function(f,g){var m,y,v;if(this.options.backtrack_lexer&&(v={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(v.yylloc.range=this.yylloc.range.slice(0))),(y=f[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=y.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:y?y[y.length-1].length-y[y.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+f[0].length},this.yytext+=f[0],this.match+=f[0],this.matches=f,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(f[0].length),this.matched+=f[0],m=this.performAction.call(this,this.yy,this,g,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),m)return m;if(this._backtrack){for(var x in v)this[x]=v[x];return!1}return!1}),"test_match"),next:l((function(){if(this.done)return this.EOF;var f,g,m,y;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var v=this._currentRules(),x=0;x<v.length;x++)if((m=this._input.match(this.rules[v[x]]))&&(!g||m[0].length>g[0].length)){if(g=m,y=x,this.options.backtrack_lexer){if((f=this.test_match(m,v[x]))!==!1)return f;if(this._backtrack){g=!1;continue}return!1}if(!this.options.flex)break}return g?(f=this.test_match(g,v[y]))!==!1&&f:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:l((function(){var f=this.next();return f||this.lex()}),"lex"),begin:l((function(f){this.conditionStack.push(f)}),"begin"),popState:l((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:l((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:l((function(f){return(f=this.conditionStack.length-1-Math.abs(f||0))>=0?this.conditionStack[f]:"INITIAL"}),"topState"),pushState:l((function(f){this.begin(f)}),"pushState"),stateStackSize:l((function(){return this.conditionStack.length}),"stateStackSize"),options:{"case-insensitive":!0},performAction:l((function(f,g,m,y){switch(m){case 0:case 1:case 3:case 4:break;case 2:return 10;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 18;case 16:return 19;case 17:return":";case 18:return 6;case 19:return"INVALID"}}),"anonymous"),rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18,19],inclusive:!0}}};return p})();function d(){this.yy={}}return u.lexer=h,l(d,"Parser"),d.prototype=u,u.Parser=d,new d})();cS.parser=cS;var Xwe=cS,em="",kN=[],Z2=[],Q2=[],Kwe=l((function(){kN.length=0,Z2.length=0,em="",Q2.length=0,jn()}),"clear"),Zwe=l((function(t){em=t,kN.push(t)}),"addSection"),Qwe=l((function(){return kN}),"getSections"),Jwe=l((function(){let t=jO(),e=0;for(;!t&&e<100;)t=jO(),e++;return Z2.push(...Q2),Z2}),"getTasks"),eke=l((function(){const t=[];return Z2.forEach((e=>{e.people&&t.push(...e.people)})),[...new Set(t)].sort()}),"updateActors"),tke=l((function(t,e){const r=e.substr(1).split(":");let n=0,i=[];r.length===1?(n=Number(r[0]),i=[]):(n=Number(r[0]),i=r[1].split(","));const a=i.map((o=>o.trim())),s={section:em,type:em,people:a,task:t,score:n};Q2.push(s)}),"addTask"),rke=l((function(t){const e={section:em,type:em,description:t,task:t,classes:[]};Z2.push(e)}),"addTaskOrg"),jO=l((function(){const t=l((function(r){return Q2[r].processed}),"compileTask");let e=!0;for(const[r,n]of Q2.entries())t(r),e=e&&n.processed;return e}),"compileTasks"),nke=l((function(){return eke()}),"getActors"),WO={getConfig:l((()=>ke().journey),"getConfig"),clear:Kwe,setDiagramTitle:di,getDiagramTitle:Wn,setAccTitle:zn,getAccTitle:Xn,setAccDescription:Kn,getAccDescription:Zn,addSection:Zwe,getSections:Qwe,getTasks:Jwe,addTask:tke,addTaskOrg:rke,getActors:nke},ike=l((t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${t.textColor}
  }

  .legend {
    fill: ${t.textColor};
    font-family: ${t.fontFamily};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${t.textColor}
  }

  .face {
    ${t.faceColor?`fill: ${t.faceColor}`:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${t.fillType0?`fill: ${t.fillType0}`:""};
  }
  .task-type-1, .section-type-1  {
    ${t.fillType0?`fill: ${t.fillType1}`:""};
  }
  .task-type-2, .section-type-2  {
    ${t.fillType0?`fill: ${t.fillType2}`:""};
  }
  .task-type-3, .section-type-3  {
    ${t.fillType0?`fill: ${t.fillType3}`:""};
  }
  .task-type-4, .section-type-4  {
    ${t.fillType0?`fill: ${t.fillType4}`:""};
  }
  .task-type-5, .section-type-5  {
    ${t.fillType0?`fill: ${t.fillType5}`:""};
  }
  .task-type-6, .section-type-6  {
    ${t.fillType0?`fill: ${t.fillType6}`:""};
  }
  .task-type-7, .section-type-7  {
    ${t.fillType0?`fill: ${t.fillType7}`:""};
  }

  .actor-0 {
    ${t.actor0?`fill: ${t.actor0}`:""};
  }
  .actor-1 {
    ${t.actor1?`fill: ${t.actor1}`:""};
  }
  .actor-2 {
    ${t.actor2?`fill: ${t.actor2}`:""};
  }
  .actor-3 {
    ${t.actor3?`fill: ${t.actor3}`:""};
  }
  .actor-4 {
    ${t.actor4?`fill: ${t.actor4}`:""};
  }
  .actor-5 {
    ${t.actor5?`fill: ${t.actor5}`:""};
  }
`),"getStyles"),TN=l((function(t,e){return lw(t,e)}),"drawRect"),ake=l((function(t,e){const n=t.append("circle").attr("cx",e.cx).attr("cy",e.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),i=t.append("g");function a(u){const h=Uu().startAngle(Math.PI/2).endAngle(Math.PI/2*3).innerRadius(7.5).outerRadius(6.8181818181818175);u.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+2)+")")}function s(u){const h=Uu().startAngle(3*Math.PI/2).endAngle(Math.PI/2*5).innerRadius(7.5).outerRadius(6.8181818181818175);u.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+7)+")")}function o(u){u.append("line").attr("class","mouth").attr("stroke",2).attr("x1",e.cx-5).attr("y1",e.cy+7).attr("x2",e.cx+5).attr("y2",e.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return i.append("circle").attr("cx",e.cx-5).attr("cy",e.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),i.append("circle").attr("cx",e.cx+5).attr("cy",e.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),l(a,"smile"),l(s,"sad"),l(o,"ambivalent"),e.score>3?a(i):e.score<3?s(i):o(i),n}),"drawFace"),Oie=l((function(t,e){const r=t.append("circle");return r.attr("cx",e.cx),r.attr("cy",e.cy),r.attr("class","actor-"+e.pos),r.attr("fill",e.fill),r.attr("stroke",e.stroke),r.attr("r",e.r),r.class!==void 0&&r.attr("class",r.class),e.title!==void 0&&r.append("title").text(e.title),r}),"drawCircle"),Pie=l((function(t,e){return Tve(t,e)}),"drawText"),ske=l((function(t,e){function r(i,a,s,o,u){return i+","+a+" "+(i+s)+","+a+" "+(i+s)+","+(a+o-u)+" "+(i+s-1.2*u)+","+(a+o)+" "+i+","+(a+o)}l(r,"genPoints");const n=t.append("polygon");n.attr("points",r(e.x,e.y,50,20,7)),n.attr("class","labelBox"),e.y=e.y+e.labelMargin,e.x=e.x+.5*e.labelMargin,Pie(t,e)}),"drawLabel"),oke=l((function(t,e,r){const n=t.append("g"),i=ch();i.x=e.x,i.y=e.y,i.fill=e.fill,i.width=r.width*e.taskCount+r.diagramMarginX*(e.taskCount-1),i.height=r.height,i.class="journey-section section-type-"+e.num,i.rx=3,i.ry=3,TN(n,i),Bie(r)(e.text,n,i.x,i.y,i.width,i.height,{class:"journey-section section-type-"+e.num},r,e.colour)}),"drawSection"),YO=-1,lke=l((function(t,e,r){const n=e.x+r.width/2,i=t.append("g");YO++,i.append("line").attr("id","task"+YO).attr("x1",n).attr("y1",e.y).attr("x2",n).attr("y2",450).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),ake(i,{cx:n,cy:300+30*(5-e.score),score:e.score});const a=ch();a.x=e.x,a.y=e.y,a.fill=e.fill,a.width=r.width,a.height=r.height,a.class="task task-type-"+e.num,a.rx=3,a.ry=3,TN(i,a);let s=e.x+14;e.people.forEach((o=>{const u=e.actors[o].color,h={cx:s,cy:e.y,r:7,fill:u,stroke:"#000",title:o,pos:e.actors[o].position};Oie(i,h),s+=10})),Bie(r)(e.task,i,a.x,a.y,a.width,a.height,{class:"task"},r,e.colour)}),"drawTask"),cke=l((function(t,e){ZJ(t,e)}),"drawBackgroundRect"),Bie=(function(){function t(i,a,s,o,u,h,d,p){n(a.append("text").attr("x",s+u/2).attr("y",o+h/2+5).style("font-color",p).style("text-anchor","middle").text(i),d)}function e(i,a,s,o,u,h,d,p,f){const{taskFontSize:g,taskFontFamily:m}=p,y=i.split(/<br\s*\/?>/gi);for(let v=0;v<y.length;v++){const x=v*g-g*(y.length-1)/2,b=a.append("text").attr("x",s+u/2).attr("y",o).attr("fill",f).style("text-anchor","middle").style("font-size",g).style("font-family",m);b.append("tspan").attr("x",s+u/2).attr("dy",x).text(y[v]),b.attr("y",o+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),n(b,d)}}function r(i,a,s,o,u,h,d,p){const f=a.append("switch"),g=f.append("foreignObject").attr("x",s).attr("y",o).attr("width",u).attr("height",h).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");g.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),e(i,f,s,o,u,h,d,p),n(g,d)}function n(i,a){for(const s in a)s in a&&i.attr(s,a[s])}return l(t,"byText"),l(e,"byTspan"),l(r,"byFo"),l(n,"_setTextAttrs"),function(i){return i.textPlacement==="fo"?r:i.textPlacement==="old"?t:e}})(),J2={drawRect:TN,drawCircle:Oie,drawSection:oke,drawText:Pie,drawLabel:ske,drawTask:lke,drawBackgroundRect:cke,initGraphics:l((function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")}),"initGraphics")},uke=l((function(t){Object.keys(t).forEach((function(e){Qw[e]=t[e]}))}),"setConf"),Io={};function $ie(t){const e=ke().journey;let r=60;Object.keys(Io).forEach((n=>{const i=Io[n].color,a={cx:20,cy:r,r:7,fill:i,stroke:"#000",pos:Io[n].position};J2.drawCircle(t,a);const s={x:40,y:r+7,fill:"#666",text:n,textMargin:5|e.boxTextMargin};J2.drawText(t,s),r+=20}))}l($ie,"drawActorLegend");var Qw=ke().journey,Jc=Qw.leftMargin,hke=l((function(t,e,r,n){const i=ke().journey,a=ke().securityLevel;let s;a==="sandbox"&&(s=Ze("#i"+e));const o=Ze(a==="sandbox"?s.nodes()[0].contentDocument.body:"body");Ba.init();const u=o.select("#"+e);J2.initGraphics(u);const h=n.db.getTasks(),d=n.db.getDiagramTitle(),p=n.db.getActors();for(const x in Io)delete Io[x];let f=0;p.forEach((x=>{Io[x]={color:i.actorColours[f%i.actorColours.length],position:f},f++})),$ie(u),Ba.insert(0,0,Jc,50*Object.keys(Io).length),dke(u,h,0);const g=Ba.getBounds();d&&u.append("text").text(d).attr("x",Jc).attr("font-size","4ex").attr("font-weight","bold").attr("y",25);const m=g.stopy-g.starty+2*i.diagramMarginY,y=Jc+g.stopx+2*i.diagramMarginX;da(u,m,y,i.useMaxWidth),u.append("line").attr("x1",Jc).attr("y1",4*i.height).attr("x2",y-Jc-4).attr("y2",4*i.height).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const v=d?70:0;u.attr("viewBox",`${g.startx} -25 ${y} ${m+v}`),u.attr("preserveAspectRatio","xMinYMin meet"),u.attr("height",m+v+25)}),"draw"),Ba={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:l((function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0}),"init"),updateVal:l((function(t,e,r,n){t[e]===void 0?t[e]=r:t[e]=n(r,t[e])}),"updateVal"),updateBounds:l((function(t,e,r,n){const i=ke().journey,a=this;let s=0;function o(u){return l((function(h){s++;const d=a.sequenceItems.length-s+1;a.updateVal(h,"starty",e-d*i.boxMargin,Math.min),a.updateVal(h,"stopy",n+d*i.boxMargin,Math.max),a.updateVal(Ba.data,"startx",t-d*i.boxMargin,Math.min),a.updateVal(Ba.data,"stopx",r+d*i.boxMargin,Math.max),u!=="activation"&&(a.updateVal(h,"startx",t-d*i.boxMargin,Math.min),a.updateVal(h,"stopx",r+d*i.boxMargin,Math.max),a.updateVal(Ba.data,"starty",e-d*i.boxMargin,Math.min),a.updateVal(Ba.data,"stopy",n+d*i.boxMargin,Math.max))}),"updateItemBounds")}l(o,"updateFn"),this.sequenceItems.forEach(o())}),"updateBounds"),insert:l((function(t,e,r,n){const i=Math.min(t,r),a=Math.max(t,r),s=Math.min(e,n),o=Math.max(e,n);this.updateVal(Ba.data,"startx",i,Math.min),this.updateVal(Ba.data,"starty",s,Math.min),this.updateVal(Ba.data,"stopx",a,Math.max),this.updateVal(Ba.data,"stopy",o,Math.max),this.updateBounds(i,s,a,o)}),"insert"),bumpVerticalPos:l((function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos}),"bumpVerticalPos"),getVerticalPos:l((function(){return this.verticalPos}),"getVerticalPos"),getBounds:l((function(){return this.data}),"getBounds")},ST=Qw.sectionFills,VO=Qw.sectionColours,dke=l((function(t,e,r){const n=ke().journey;let i="";const a=r+(2*n.height+n.diagramMarginY);let s=0,o="#CCC",u="black",h=0;for(const[d,p]of e.entries()){if(i!==p.section){o=ST[s%ST.length],h=s%ST.length,u=VO[s%VO.length];let g=0;const m=p.section;for(let v=d;v<e.length&&e[v].section==m;v++)g+=1;const y={x:d*n.taskMargin+d*n.width+Jc,y:50,text:p.section,fill:o,num:h,colour:u,taskCount:g};J2.drawSection(t,y,n),i=p.section,s++}const f=p.people.reduce(((g,m)=>(Io[m]&&(g[m]=Io[m]),g)),{});p.x=d*n.taskMargin+d*n.width+Jc,p.y=a,p.width=n.diagramMarginX,p.height=n.diagramMarginY,p.colour=u,p.fill=o,p.num=h,p.actors=f,J2.drawTask(t,p,n),Ba.insert(p.x,p.y,p.x+p.width+n.taskMargin,450)}}),"drawTasks"),HO={setConf:uke,draw:hke},pke={parser:Xwe,db:WO,renderer:HO,styles:ike,init:l((t=>{HO.setConf(t.journey),WO.clear()}),"init")},fke=Object.freeze({__proto__:null,diagram:pke}),uS=(function(){var t=l((function(f,g,m,y){for(m=m||{},y=f.length;y--;m[f[y]]=g);return m}),"o"),e=[6,8,10,11,12,14,16,17,20,21],r=[1,9],n=[1,10],i=[1,11],a=[1,12],s=[1,13],o=[1,16],u=[1,17],h={trace:l((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,timeline:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,period_statement:18,event_statement:19,period:20,event:21,$accept:0,$end:1},terminals_:{2:"error",4:"timeline",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",20:"period",21:"event"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[18,1],[19,1]],performAction:l((function(f,g,m,y,v,x,b){var w=x.length-1;switch(v){case 1:return x[w-1];case 2:case 6:case 7:this.$=[];break;case 3:x[w-1].push(x[w]),this.$=x[w-1];break;case 4:case 5:this.$=x[w];break;case 8:y.getCommonDb().setDiagramTitle(x[w].substr(6)),this.$=x[w].substr(6);break;case 9:this.$=x[w].trim(),y.getCommonDb().setAccTitle(this.$);break;case 10:case 11:this.$=x[w].trim(),y.getCommonDb().setAccDescription(this.$);break;case 12:y.addSection(x[w].substr(8)),this.$=x[w].substr(8);break;case 15:y.addTask(x[w],0,""),this.$=x[w];break;case 16:y.addEvent(x[w].substr(2)),this.$=x[w]}}),"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:r,12:n,14:i,16:a,17:s,18:14,19:15,20:o,21:u},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:18,11:r,12:n,14:i,16:a,17:s,18:14,19:15,20:o,21:u},t(e,[2,5]),t(e,[2,6]),t(e,[2,8]),{13:[1,19]},{15:[1,20]},t(e,[2,11]),t(e,[2,12]),t(e,[2,13]),t(e,[2,14]),t(e,[2,15]),t(e,[2,16]),t(e,[2,4]),t(e,[2,9]),t(e,[2,10])],defaultActions:{},parseError:l((function(f,g){if(!g.recoverable){var m=new Error(f);throw m.hash=g,m}this.trace(f)}),"parseError"),parse:l((function(f){var g=this,m=[0],y=[],v=[null],x=[],b=this.table,w="",T=0,k=0,C=2,E=1,_=x.slice.call(arguments,1),S=Object.create(this.lexer),N={yy:{}};for(var O in this.yy)Object.prototype.hasOwnProperty.call(this.yy,O)&&(N.yy[O]=this.yy[O]);S.setInput(f,N.yy),N.yy.lexer=S,N.yy.parser=this,S.yylloc===void 0&&(S.yylloc={});var B=S.yylloc;x.push(B);var L=S.options&&S.options.ranges;function I(oe){m.length=m.length-2*oe,v.length=v.length-oe,x.length=x.length-oe}function A(){var oe;return typeof(oe=y.pop()||S.lex()||E)!="number"&&(oe instanceof Array&&(oe=(y=oe).pop()),oe=g.symbols_[oe]||oe),oe}typeof N.yy.parseError=="function"?this.parseError=N.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,l(I,"popStack"),l(A,"lex");for(var M,D,R,P,$,z,q,W,Q={};;){if(D=m[m.length-1],this.defaultActions[D]?R=this.defaultActions[D]:(M==null&&(M=A()),R=b[D]&&b[D][M]),R===void 0||!R.length||!R[0]){var te="";for($ in W=[],b[D])this.terminals_[$]&&$>C&&W.push("'"+this.terminals_[$]+"'");te=S.showPosition?"Parse error on line "+(T+1)+`:
`+S.showPosition()+`
Expecting `+W.join(", ")+", got '"+(this.terminals_[M]||M)+"'":"Parse error on line "+(T+1)+": Unexpected "+(M==E?"end of input":"'"+(this.terminals_[M]||M)+"'"),this.parseError(te,{text:S.match,token:this.terminals_[M]||M,line:S.yylineno,loc:B,expected:W})}if(R[0]instanceof Array&&R.length>1)throw new Error("Parse Error: multiple actions possible at state: "+D+", token: "+M);switch(R[0]){case 1:m.push(M),v.push(S.yytext),x.push(S.yylloc),m.push(R[1]),M=null,k=S.yyleng,w=S.yytext,T=S.yylineno,B=S.yylloc;break;case 2:if(z=this.productions_[R[1]][1],Q.$=v[v.length-z],Q._$={first_line:x[x.length-(z||1)].first_line,last_line:x[x.length-1].last_line,first_column:x[x.length-(z||1)].first_column,last_column:x[x.length-1].last_column},L&&(Q._$.range=[x[x.length-(z||1)].range[0],x[x.length-1].range[1]]),(P=this.performAction.apply(Q,[w,k,T,N.yy,R[1],v,x].concat(_)))!==void 0)return P;z&&(m=m.slice(0,-1*z*2),v=v.slice(0,-1*z),x=x.slice(0,-1*z)),m.push(this.productions_[R[1]][0]),v.push(Q.$),x.push(Q._$),q=b[m[m.length-2]][m[m.length-1]],m.push(q);break;case 3:return!0}}return!0}),"parse")},d=(function(){var f={EOF:1,parseError:l((function(g,m){if(!this.yy.parser)throw new Error(g);this.yy.parser.parseError(g,m)}),"parseError"),setInput:l((function(g,m){return this.yy=m||this.yy||{},this._input=g,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:l((function(){var g=this._input[0];return this.yytext+=g,this.yyleng++,this.offset++,this.match+=g,this.matched+=g,g.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),g}),"input"),unput:l((function(g){var m=g.length,y=g.split(/(?:\r\n?|\n)/g);this._input=g+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-m),this.offset-=m;var v=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),y.length-1&&(this.yylineno-=y.length-1);var x=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:y?(y.length===v.length?this.yylloc.first_column:0)+v[v.length-y.length].length-y[0].length:this.yylloc.first_column-m},this.options.ranges&&(this.yylloc.range=[x[0],x[0]+this.yyleng-m]),this.yyleng=this.yytext.length,this}),"unput"),more:l((function(){return this._more=!0,this}),"more"),reject:l((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:l((function(g){this.unput(this.match.slice(g))}),"less"),pastInput:l((function(){var g=this.matched.substr(0,this.matched.length-this.match.length);return(g.length>20?"...":"")+g.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:l((function(){var g=this.match;return g.length<20&&(g+=this._input.substr(0,20-g.length)),(g.substr(0,20)+(g.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:l((function(){var g=this.pastInput(),m=new Array(g.length+1).join("-");return g+this.upcomingInput()+`
`+m+"^"}),"showPosition"),test_match:l((function(g,m){var y,v,x;if(this.options.backtrack_lexer&&(x={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(x.yylloc.range=this.yylloc.range.slice(0))),(v=g[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=v.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:v?v[v.length-1].length-v[v.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+g[0].length},this.yytext+=g[0],this.match+=g[0],this.matches=g,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(g[0].length),this.matched+=g[0],y=this.performAction.call(this,this.yy,this,m,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),y)return y;if(this._backtrack){for(var b in x)this[b]=x[b];return!1}return!1}),"test_match"),next:l((function(){if(this.done)return this.EOF;var g,m,y,v;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var x=this._currentRules(),b=0;b<x.length;b++)if((y=this._input.match(this.rules[x[b]]))&&(!m||y[0].length>m[0].length)){if(m=y,v=b,this.options.backtrack_lexer){if((g=this.test_match(y,x[b]))!==!1)return g;if(this._backtrack){m=!1;continue}return!1}if(!this.options.flex)break}return m?(g=this.test_match(m,x[v]))!==!1&&g:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:l((function(){var g=this.next();return g||this.lex()}),"lex"),begin:l((function(g){this.conditionStack.push(g)}),"begin"),popState:l((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:l((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:l((function(g){return(g=this.conditionStack.length-1-Math.abs(g||0))>=0?this.conditionStack[g]:"INITIAL"}),"topState"),pushState:l((function(g){this.begin(g)}),"pushState"),stateStackSize:l((function(){return this.conditionStack.length}),"stateStackSize"),options:{"case-insensitive":!0},performAction:l((function(g,m,y,v){switch(y){case 0:case 1:case 3:case 4:break;case 2:return 10;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 21;case 16:return 20;case 17:return 6;case 18:return"INVALID"}}),"anonymous"),rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:timeline\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^:\n]+)/i,/^(?::\s[^:\n]+)/i,/^(?:[^#:\n]+)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18],inclusive:!0}}};return f})();function p(){this.yy={}}return h.lexer=d,l(p,"Parser"),p.prototype=h,h.Parser=p,new p})();uS.parser=uS;var gke=uS,Fie={};Ss(Fie,{addEvent:()=>Vie,addSection:()=>qie,addTask:()=>Yie,addTaskOrg:()=>Hie,clear:()=>Uie,default:()=>mke,getCommonDb:()=>Gie,getSections:()=>jie,getTasks:()=>Wie});var tm="",zie=0,EN=[],t6=[],rm=[],Gie=l((()=>b8),"getCommonDb"),Uie=l((function(){EN.length=0,t6.length=0,tm="",rm.length=0,jn()}),"clear"),qie=l((function(t){tm=t,EN.push(t)}),"addSection"),jie=l((function(){return EN}),"getSections"),Wie=l((function(){let t=XO(),e=0;for(;!t&&e<100;)t=XO(),e++;return t6.push(...rm),t6}),"getTasks"),Yie=l((function(t,e,r){const n={id:zie++,section:tm,type:tm,task:t,score:e||0,events:r?[r]:[]};rm.push(n)}),"addTask"),Vie=l((function(t){rm.find((e=>e.id===zie-1)).events.push(t)}),"addEvent"),Hie=l((function(t){const e={section:tm,type:tm,description:t,task:t,classes:[]};t6.push(e)}),"addTaskOrg"),XO=l((function(){const t=l((function(r){return rm[r].processed}),"compileTask");let e=!0;for(const[r,n]of rm.entries())t(r),e=e&&n.processed;return e}),"compileTasks"),mke={clear:Uie,getCommonDb:Gie,addSection:qie,getSections:jie,getTasks:Wie,addTask:Yie,addTaskOrg:Hie,addEvent:Vie},Jw=l((function(t,e){const r=t.append("rect");return r.attr("x",e.x),r.attr("y",e.y),r.attr("fill",e.fill),r.attr("stroke",e.stroke),r.attr("width",e.width),r.attr("height",e.height),r.attr("rx",e.rx),r.attr("ry",e.ry),e.class!==void 0&&r.attr("class",e.class),r}),"drawRect"),yke=l((function(t,e){const n=t.append("circle").attr("cx",e.cx).attr("cy",e.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),i=t.append("g");function a(u){const h=Uu().startAngle(Math.PI/2).endAngle(Math.PI/2*3).innerRadius(7.5).outerRadius(6.8181818181818175);u.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+2)+")")}function s(u){const h=Uu().startAngle(3*Math.PI/2).endAngle(Math.PI/2*5).innerRadius(7.5).outerRadius(6.8181818181818175);u.append("path").attr("class","mouth").attr("d",h).attr("transform","translate("+e.cx+","+(e.cy+7)+")")}function o(u){u.append("line").attr("class","mouth").attr("stroke",2).attr("x1",e.cx-5).attr("y1",e.cy+7).attr("x2",e.cx+5).attr("y2",e.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return i.append("circle").attr("cx",e.cx-5).attr("cy",e.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),i.append("circle").attr("cx",e.cx+5).attr("cy",e.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),l(a,"smile"),l(s,"sad"),l(o,"ambivalent"),e.score>3?a(i):e.score<3?s(i):o(i),n}),"drawFace"),vke=l((function(t,e){const r=t.append("circle");return r.attr("cx",e.cx),r.attr("cy",e.cy),r.attr("class","actor-"+e.pos),r.attr("fill",e.fill),r.attr("stroke",e.stroke),r.attr("r",e.r),r.class!==void 0&&r.attr("class",r.class),e.title!==void 0&&r.append("title").text(e.title),r}),"drawCircle"),Xie=l((function(t,e){const r=e.text.replace(/<br\s*\/?>/gi," "),n=t.append("text");n.attr("x",e.x),n.attr("y",e.y),n.attr("class","legend"),n.style("text-anchor",e.anchor),e.class!==void 0&&n.attr("class",e.class);const i=n.append("tspan");return i.attr("x",e.x+2*e.textMargin),i.text(r),n}),"drawText"),xke=l((function(t,e){function r(i,a,s,o,u){return i+","+a+" "+(i+s)+","+a+" "+(i+s)+","+(a+o-u)+" "+(i+s-1.2*u)+","+(a+o)+" "+i+","+(a+o)}l(r,"genPoints");const n=t.append("polygon");n.attr("points",r(e.x,e.y,50,20,7)),n.attr("class","labelBox"),e.y=e.y+e.labelMargin,e.x=e.x+.5*e.labelMargin,Xie(t,e)}),"drawLabel"),bke=l((function(t,e,r){const n=t.append("g"),i=_N();i.x=e.x,i.y=e.y,i.fill=e.fill,i.width=r.width,i.height=r.height,i.class="journey-section section-type-"+e.num,i.rx=3,i.ry=3,Jw(n,i),Kie(r)(e.text,n,i.x,i.y,i.width,i.height,{class:"journey-section section-type-"+e.num},r,e.colour)}),"drawSection"),KO=-1,wke=l((function(t,e,r){const n=e.x+r.width/2,i=t.append("g");KO++,i.append("line").attr("id","task"+KO).attr("x1",n).attr("y1",e.y).attr("x2",n).attr("y2",450).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),yke(i,{cx:n,cy:300+30*(5-e.score),score:e.score});const a=_N();a.x=e.x,a.y=e.y,a.fill=e.fill,a.width=r.width,a.height=r.height,a.class="task task-type-"+e.num,a.rx=3,a.ry=3,Jw(i,a),Kie(r)(e.task,i,a.x,a.y,a.width,a.height,{class:"task"},r,e.colour)}),"drawTask"),kke=l((function(t,e){Jw(t,{x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,class:"rect"}).lower()}),"drawBackgroundRect"),Tke=l((function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}}),"getTextObj"),_N=l((function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}}),"getNoteRect"),Kie=(function(){function t(i,a,s,o,u,h,d,p){n(a.append("text").attr("x",s+u/2).attr("y",o+h/2+5).style("font-color",p).style("text-anchor","middle").text(i),d)}function e(i,a,s,o,u,h,d,p,f){const{taskFontSize:g,taskFontFamily:m}=p,y=i.split(/<br\s*\/?>/gi);for(let v=0;v<y.length;v++){const x=v*g-g*(y.length-1)/2,b=a.append("text").attr("x",s+u/2).attr("y",o).attr("fill",f).style("text-anchor","middle").style("font-size",g).style("font-family",m);b.append("tspan").attr("x",s+u/2).attr("dy",x).text(y[v]),b.attr("y",o+h/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),n(b,d)}}function r(i,a,s,o,u,h,d,p){const f=a.append("switch"),g=f.append("foreignObject").attr("x",s).attr("y",o).attr("width",u).attr("height",h).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");g.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),e(i,f,s,o,u,h,d,p),n(g,d)}function n(i,a){for(const s in a)s in a&&i.attr(s,a[s])}return l(t,"byText"),l(e,"byTspan"),l(r,"byFo"),l(n,"_setTextAttrs"),function(i){return i.textPlacement==="fo"?r:i.textPlacement==="old"?t:e}})(),Eke=l((function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")}),"initGraphics");function CN(t,e){t.each((function(){var r,n=Ze(this),i=n.text().split(/(\s+|<br>)/).reverse(),a=[],s=n.attr("y"),o=parseFloat(n.attr("dy")),u=n.text(null).append("tspan").attr("x",0).attr("y",s).attr("dy",o+"em");for(let h=0;h<i.length;h++)r=i[i.length-1-h],a.push(r),u.text(a.join(" ").trim()),(u.node().getComputedTextLength()>e||r==="<br>")&&(a.pop(),u.text(a.join(" ").trim()),a=r==="<br>"?[""]:[r],u=n.append("tspan").attr("x",0).attr("y",s).attr("dy","1.1em").text(r))}))}l(CN,"wrap");var _ke=l((function(t,e,r,n){const i=r%12-1,a=t.append("g");e.section=i,a.attr("class",(e.class?e.class+" ":"")+"timeline-node section-"+i);const s=a.append("g"),o=a.append("g"),u=o.append("text").text(e.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(CN,e.width).node().getBBox(),h=n.fontSize?.replace?n.fontSize.replace("px",""):n.fontSize;return e.height=u.height+1.1*h*.5+e.padding,e.height=Math.max(e.height,e.maxHeight),e.width=e.width+2*e.padding,o.attr("transform","translate("+e.width/2+", "+e.padding/2+")"),Ske(s,e,i,n),e}),"drawNode"),Cke=l((function(t,e,r){const n=t.append("g"),i=n.append("text").text(e.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(CN,e.width).node().getBBox(),a=r.fontSize?.replace?r.fontSize.replace("px",""):r.fontSize;return n.remove(),i.height+1.1*a*.5+e.padding}),"getVirtualNodeHeight"),Ske=l((function(t,e,r){t.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+e.type).attr("d",`M0 ${e.height-5} v${10-e.height} q0,-5 5,-5 h${e.width-10} q5,0 5,5 v${e.height-5} H0 Z`),t.append("line").attr("class","node-line-"+r).attr("x1",0).attr("y1",e.height).attr("x2",e.width).attr("y2",e.height)}),"defaultBkg"),eu={drawRect:Jw,drawCircle:vke,drawSection:bke,drawText:Xie,drawLabel:xke,drawTask:wke,drawBackgroundRect:kke,getTextObj:Tke,getNoteRect:_N,initGraphics:Eke,drawNode:_ke,getVirtualNodeHeight:Cke},Ake=l((function(t,e,r,n){const i=ke(),a=i.leftMargin??50;ee.debug("timeline",n.db);const s=i.securityLevel;let o;s==="sandbox"&&(o=Ze("#i"+e));const u=Ze(s==="sandbox"?o.nodes()[0].contentDocument.body:"body").select("#"+e);u.append("g");const h=n.db.getTasks(),d=n.db.getCommonDb().getDiagramTitle();ee.debug("task",h),eu.initGraphics(u);const p=n.db.getSections();ee.debug("sections",p);let f=0,g=0,m=0,y=50+a,v=50,x=0,b=!0;p.forEach((function(C){const E={number:x,descr:C,section:x,width:150,padding:20,maxHeight:f},_=eu.getVirtualNodeHeight(u,E,i);ee.debug("sectionHeight before draw",_),f=Math.max(f,_+20)}));let w=0,T=0;ee.debug("tasks.length",h.length);for(const[C,E]of h.entries()){const _={number:C,descr:E,section:E.section,width:150,padding:20,maxHeight:g},S=eu.getVirtualNodeHeight(u,_,i);ee.debug("taskHeight before draw",S),g=Math.max(g,S+20),w=Math.max(w,E.events.length);let N=0;for(const O of E.events){const B={descr:O,section:E.section,number:E.section,width:150,padding:20,maxHeight:50};N+=eu.getVirtualNodeHeight(u,B,i)}T=Math.max(T,N)}ee.debug("maxSectionHeight before draw",f),ee.debug("maxTaskHeight before draw",g),p&&p.length>0?p.forEach((C=>{const E=h.filter((O=>O.section===C)),_={number:x,descr:C,section:x,width:200*Math.max(E.length,1)-50,padding:20,maxHeight:f};ee.debug("sectionNode",_);const S=u.append("g"),N=eu.drawNode(S,_,x,i);ee.debug("sectionNode output",N),S.attr("transform",`translate(${y}, 50)`),v+=f+50,E.length>0&&ZO(u,E,x,y,v,g,i,w,T,f,!1),y+=200*Math.max(E.length,1),v=50,x++})):(b=!1,ZO(u,h,x,y,v,g,i,w,T,f,!0));const k=u.node().getBBox();ee.debug("bounds",k),d&&u.append("text").text(d).attr("x",k.width/2-a).attr("font-size","4ex").attr("font-weight","bold").attr("y",20),m=b?f+g+150:g+100,u.append("g").attr("class","lineWrapper").append("line").attr("x1",a).attr("y1",m).attr("x2",k.width+3*a).attr("y2",m).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)"),am(void 0,u,i.timeline?.padding??50,i.timeline?.useMaxWidth??!1)}),"draw"),ZO=l((function(t,e,r,n,i,a,s,o,u,h,d){for(const p of e){const f={descr:p.task,section:r,number:r,width:150,padding:20,maxHeight:a};ee.debug("taskNode",f);const g=t.append("g").attr("class","taskWrapper"),m=eu.drawNode(g,f,r,s).height;if(ee.debug("taskHeight after draw",m),g.attr("transform",`translate(${n}, ${i})`),a=Math.max(a,m),p.events){const y=t.append("g").attr("class","lineWrapper");let v=a;i+=100,v+=Lke(t,p.events,r,n,i,s),i-=100,y.append("line").attr("x1",n+95).attr("y1",i+a).attr("x2",n+95).attr("y2",i+a+(d?a:h)+u+120).attr("stroke-width",2).attr("stroke","black").attr("marker-end","url(#arrowhead)").attr("stroke-dasharray","5,5")}n+=200,d&&!s.timeline?.disableMulticolor&&r++}i-=10}),"drawTasks"),Lke=l((function(t,e,r,n,i,a){let s=0;const o=i;i+=100;for(const u of e){const h={descr:u,section:r,number:r,width:150,padding:20,maxHeight:50};ee.debug("eventNode",h);const d=t.append("g").attr("class","eventWrapper"),p=eu.drawNode(d,h,r,a).height;s+=p,d.attr("transform",`translate(${n}, ${i})`),i=i+10+p}return i=o,s}),"drawEvents"),Nke={setConf:l((()=>{}),"setConf"),draw:Ake},Ike=l((t=>{let e="";for(let r=0;r<t.THEME_COLOR_LIMIT;r++)t["lineColor"+r]=t["lineColor"+r]||t["cScaleInv"+r],hc(t["lineColor"+r])?t["lineColor"+r]=bt(t["lineColor"+r],20):t["lineColor"+r]=Lt(t["lineColor"+r],20);for(let r=0;r<t.THEME_COLOR_LIMIT;r++){const n=""+(17-3*r);e+=`
    .section-${r-1} rect, .section-${r-1} path, .section-${r-1} circle, .section-${r-1} path  {
      fill: ${t["cScale"+r]};
    }
    .section-${r-1} text {
     fill: ${t["cScaleLabel"+r]};
    }
    .node-icon-${r-1} {
      font-size: 40px;
      color: ${t["cScaleLabel"+r]};
    }
    .section-edge-${r-1}{
      stroke: ${t["cScale"+r]};
    }
    .edge-depth-${r-1}{
      stroke-width: ${n};
    }
    .section-${r-1} line {
      stroke: ${t["cScaleInv"+r]} ;
      stroke-width: 3;
    }

    .lineWrapper line{
      stroke: ${t["cScaleLabel"+r]} ;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return e}),"genSections"),Rke={db:Fie,renderer:Nke,parser:gke,styles:l((t=>`
  .edge {
    stroke-width: 3;
  }
  ${Ike(t)}
  .section-root rect, .section-root path, .section-root circle  {
    fill: ${t.git0};
  }
  .section-root text {
    fill: ${t.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .eventWrapper  {
   filter: brightness(120%);
  }
`),"getStyles")},Mke=Object.freeze({__proto__:null,diagram:Rke});function Un(t){return(Un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function cl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ul(t,e,r){return e&&hS(t.prototype,e),r&&hS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function SN(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yn(t,e){return Qie(t)||eae(t,e)||ek(t,e)||rae()}function AN(t){return Zie(t)||Jie(t)||ek(t)||tae()}function Zie(t){if(Array.isArray(t))return r6(t)}function Qie(t){if(Array.isArray(t))return t}function Jie(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function eae(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a=[],s=!0,o=!1;try{for(r=r.call(t);!(s=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);s=!0);}catch(u){o=!0,i=u}finally{try{s||r.return==null||r.return()}finally{if(o)throw i}}return a}}function ek(t,e){if(t){if(typeof t=="string")return r6(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?r6(t,e):void 0}}function r6(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function tae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wa(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=ek(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0,i=l((function(){}),"F");return{s:i,n:l((function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}),"n"),e:l((function(u){throw u}),"e"),f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,s=!0,o=!1;return{s:l((function(){r=r.call(t)}),"s"),n:l((function(){var u=r.next();return s=u.done,u}),"n"),e:l((function(u){o=!0,a=u}),"e"),f:l((function(){try{s||r.return==null||r.return()}finally{if(o)throw a}}),"f")}}l(Un,"_typeof"),l(cl,"_classCallCheck"),l(hS,"_defineProperties"),l(ul,"_createClass"),l(SN,"_defineProperty$1"),l(yn,"_slicedToArray"),l(AN,"_toConsumableArray"),l(Zie,"_arrayWithoutHoles"),l(Qie,"_arrayWithHoles"),l(Jie,"_iterableToArray"),l(eae,"_iterableToArrayLimit"),l(ek,"_unsupportedIterableToArray"),l(r6,"_arrayLikeToArray"),l(tae,"_nonIterableSpread"),l(rae,"_nonIterableRest"),l(wa,"_createForOfIteratorHelper");var In=typeof window>"u"?null:window,QO=In?In.navigator:null;In&&In.document;var Dke=Un(""),nae=Un({}),Oke=Un((function(){})),Pke=typeof HTMLElement>"u"?"undefined":Un(HTMLElement),Qv=l((function(t){return t&&t.instanceString&&tn(t.instanceString)?t.instanceString():null}),"instanceStr"),Ot=l((function(t){return t!=null&&Un(t)==Dke}),"string"),tn=l((function(t){return t!=null&&Un(t)===Oke}),"fn"),Dr=l((function(t){return!Ta(t)&&(Array.isArray?Array.isArray(t):t!=null&&t instanceof Array)}),"array"),ur=l((function(t){return t!=null&&Un(t)===nae&&!Dr(t)&&t.constructor===Object}),"plainObject"),Bke=l((function(t){return t!=null&&Un(t)===nae}),"object"),ct=l((function(t){return t!=null&&Un(t)===Un(1)&&!isNaN(t)}),"number"),$ke=l((function(t){return ct(t)&&Math.floor(t)===t}),"integer"),n6=l((function(t){return Pke==="undefined"?void 0:t!=null&&t instanceof HTMLElement}),"htmlElement"),Ta=l((function(t){return Jv(t)||iae(t)}),"elementOrCollection"),Jv=l((function(t){return Qv(t)==="collection"&&t._private.single}),"element"),iae=l((function(t){return Qv(t)==="collection"&&!t._private.single}),"collection"),LN=l((function(t){return Qv(t)==="core"}),"core"),aae=l((function(t){return Qv(t)==="stylesheet"}),"stylesheet"),Fke=l((function(t){return Qv(t)==="event"}),"event"),oc=l((function(t){return t==null||!(t!==""&&!t.match(/^\s+$/))}),"emptyString"),zke=l((function(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}),"domElement"),Gke=l((function(t){return ur(t)&&ct(t.x1)&&ct(t.x2)&&ct(t.y1)&&ct(t.y2)}),"boundingBox"),Uke=l((function(t){return Bke(t)&&tn(t.then)}),"promise"),qke=l((function(){return QO&&QO.userAgent.match(/msie|trident|edge/i)}),"ms"),ev=l((function(t,e){e||(e=l((function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);return n.join("$")}),"keyFn"));var r=l((function n(){var i,a=this,s=arguments,o=e.apply(a,s),u=n.cache;return(i=u[o])||(i=u[o]=t.apply(a,s)),i}),"memoizedFn");return r.cache={},r}),"memoize"),NN=ev((function(t){return t.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))})),tk=ev((function(t){return t.replace(/(-\w)/g,(function(e){return e[1].toUpperCase()}))})),sae=ev((function(t,e){return t+e[0].toUpperCase()+e.substring(1)}),(function(t,e){return t+"$"+e})),JO=l((function(t){return oc(t)?t:t.charAt(0).toUpperCase()+t.substring(1)}),"capitalize"),IN="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",oae=l((function(t,e){return t<e?-1:t>e?1:0}),"ascending"),jke=l((function(t,e){return-1*oae(t,e)}),"descending"),Gt=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,r=1;r<e.length;r++){var n=e[r];if(n!=null)for(var i=Object.keys(n),a=0;a<i.length;a++){var s=i[a];t[s]=n[s]}}return t},Wke=l((function(t){if((t.length===4||t.length===7)&&t[0]==="#"){var e,r,n,i=16;return t.length===4?(e=parseInt(t[1]+t[1],i),r=parseInt(t[2]+t[2],i),n=parseInt(t[3]+t[3],i)):(e=parseInt(t[1]+t[2],i),r=parseInt(t[3]+t[4],i),n=parseInt(t[5]+t[6],i)),[e,r,n]}}),"hex2tuple"),Yke=l((function(t){var e,r,n,i,a,s,o,u;function h(g,m,y){return y<0&&(y+=1),y>1&&(y-=1),y<1/6?g+6*(m-g)*y:y<.5?m:y<2/3?g+(m-g)*(2/3-y)*6:g}l(h,"hue2rgb");var d=new RegExp("^hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(t);if(d){if((r=parseInt(d[1]))<0?r=(360- -1*r%360)%360:r>360&&(r%=360),r/=360,(n=parseFloat(d[2]))<0||n>100||(n/=100,(i=parseFloat(d[3]))<0||i>100)||(i/=100,(a=d[4])!==void 0&&((a=parseFloat(a))<0||a>1)))return;if(n===0)s=o=u=Math.round(255*i);else{var p=i<.5?i*(1+n):i+n-i*n,f=2*i-p;s=Math.round(255*h(f,p,r+1/3)),o=Math.round(255*h(f,p,r)),u=Math.round(255*h(f,p,r-1/3))}e=[s,o,u,a]}return e}),"hsl2tuple"),Vke=l((function(t){var e,r=new RegExp("^rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(t);if(r){e=[];for(var n=[],i=1;i<=3;i++){var a=r[i];if(a[a.length-1]==="%"&&(n[i]=!0),a=parseFloat(a),n[i]&&(a=a/100*255),a<0||a>255)return;e.push(Math.floor(a))}var s=n[1]||n[2]||n[3],o=n[1]&&n[2]&&n[3];if(s&&!o)return;var u=r[4];if(u!==void 0){if((u=parseFloat(u))<0||u>1)return;e.push(u)}}return e}),"rgb2tuple"),Hke=l((function(t){return Xke[t.toLowerCase()]}),"colorname2tuple"),lae=l((function(t){return(Dr(t)?t:null)||Hke(t)||Wke(t)||Vke(t)||Yke(t)}),"color2tuple"),Xke={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},cae=l((function(t){for(var e=t.map,r=t.keys,n=r.length,i=0;i<n;i++){var a=r[i];if(ur(a))throw Error("Tried to set map with object key");i<r.length-1?(e[a]==null&&(e[a]={}),e=e[a]):e[a]=t.value}}),"setMap"),uae=l((function(t){for(var e=t.map,r=t.keys,n=r.length,i=0;i<n;i++){var a=r[i];if(ur(a))throw Error("Tried to get map with object key");if((e=e[a])==null)return e}return e}),"getMap");function hae(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}l(hae,"isObject");var eh=hae,dy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dae(t,e){return t(e={exports:{}},e.exports),e.exports}l(dae,"createCommonjsModule");var Kke=typeof dy=="object"&&dy&&dy.Object===Object&&dy,Zke=typeof self=="object"&&self&&self.Object===Object&&self,rk=Kke||Zke||Function("return this")(),AT=l((function(){return rk.Date.now()}),"now"),Qke=/\s/;function pae(t){for(var e=t.length;e--&&Qke.test(t.charAt(e)););return e}l(pae,"trimmedEndIndex");var Jke=pae,eTe=/^\s+/;function fae(t){return t&&t.slice(0,Jke(t)+1).replace(eTe,"")}l(fae,"baseTrim");var tTe=fae,nm=rk.Symbol,gae=Object.prototype,rTe=gae.hasOwnProperty,nTe=gae.toString,$m=nm?nm.toStringTag:void 0;function mae(t){var e=rTe.call(t,$m),r=t[$m];try{t[$m]=void 0;var n=!0}catch{}var i=nTe.call(t);return n&&(e?t[$m]=r:delete t[$m]),i}l(mae,"getRawTag");var iTe=mae,aTe=Object.prototype.toString;function yae(t){return aTe.call(t)}l(yae,"objectToString");var sTe=yae,eP=nm?nm.toStringTag:void 0;function vae(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":eP&&eP in Object(t)?iTe(t):sTe(t)}l(vae,"baseGetTag");var xae=vae;function bae(t){return t!=null&&typeof t=="object"}l(bae,"isObjectLike");var oTe=bae;function wae(t){return typeof t=="symbol"||oTe(t)&&xae(t)=="[object Symbol]"}l(wae,"isSymbol");var ex=wae,lTe=/^[-+]0x[0-9a-f]+$/i,cTe=/^0b[01]+$/i,uTe=/^0o[0-7]+$/i,hTe=parseInt;function kae(t){if(typeof t=="number")return t;if(ex(t))return NaN;if(eh(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=eh(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=tTe(t);var r=cTe.test(t);return r||uTe.test(t)?hTe(t.slice(2),r?2:8):lTe.test(t)?NaN:+t}l(kae,"toNumber");var tP=kae,dTe=Math.max,pTe=Math.min;function Tae(t,e,r){var n,i,a,s,o,u,h=0,d=!1,p=!1,f=!0;if(typeof t!="function")throw new TypeError("Expected a function");function g(C){var E=n,_=i;return n=i=void 0,h=C,s=t.apply(_,E)}function m(C){return h=C,o=setTimeout(x,e),d?g(C):s}function y(C){var E=e-(C-u);return p?pTe(E,a-(C-h)):E}function v(C){var E=C-u;return u===void 0||E>=e||E<0||p&&C-h>=a}function x(){var C=AT();if(v(C))return b(C);o=setTimeout(x,y(C))}function b(C){return o=void 0,f&&n?g(C):(n=i=void 0,s)}function w(){o!==void 0&&clearTimeout(o),h=0,n=u=i=o=void 0}function T(){return o===void 0?s:b(AT())}function k(){var C=AT(),E=v(C);if(n=arguments,i=this,u=C,E){if(o===void 0)return m(u);if(p)return clearTimeout(o),o=setTimeout(x,e),g(u)}return o===void 0&&(o=setTimeout(x,e)),s}return e=tP(e)||0,eh(r)&&(d=!!r.leading,a=(p="maxWait"in r)?dTe(tP(r.maxWait)||0,e):a,f="trailing"in r?!!r.trailing:f),l(g,"invokeFunc"),l(m,"leadingEdge"),l(y,"remainingWait"),l(v,"shouldInvoke"),l(x,"timerExpired"),l(b,"trailingEdge"),l(w,"cancel"),l(T,"flush"),l(k,"debounced"),k.cancel=w,k.flush=T,k}l(Tae,"debounce");var tx=Tae,LT=In?In.performance:null,Eae=LT&&LT.now?function(){return LT.now()}:function(){return Date.now()},fTe=(function(){if(In){if(In.requestAnimationFrame)return function(t){In.requestAnimationFrame(t)};if(In.mozRequestAnimationFrame)return function(t){In.mozRequestAnimationFrame(t)};if(In.webkitRequestAnimationFrame)return function(t){In.webkitRequestAnimationFrame(t)};if(In.msRequestAnimationFrame)return function(t){In.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout((function(){t(Eae())}),1e3/60)}})(),i6=l((function(t){return fTe(t)}),"requestAnimationFrame"),el=Eae,_ae=65599,Cae=l((function(t){for(var e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:9261,n=r;!(e=t.next()).done;)n=n*_ae+e.value|0;return n}),"hashIterableInts"),tv=l((function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:9261;return e*_ae+t|0}),"hashInt"),rv=l((function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5381;return(e<<5)+e+t|0}),"hashIntAlt"),gTe=l((function(t,e){return 2097152*t+e}),"combineHashes"),gl=l((function(t){return 2097152*t[0]+t[1]}),"combineHashesArray"),Yx=l((function(t,e){return[tv(t[0],e[0]),rv(t[1],e[1])]}),"hashArrays"),mTe=l((function(t,e){var r={value:0,done:!1},n=0,i=t.length;return Cae({next:l((function(){return n<i?r.value=t[n++]:r.done=!0,r}),"next")},e)}),"hashIntsArray"),lc=l((function(t,e){var r={value:0,done:!1},n=0,i=t.length;return Cae({next:l((function(){return n<i?r.value=t.charCodeAt(n++):r.done=!0,r}),"next")},e)}),"hashString"),Sae=l((function(){return yTe(arguments)}),"hashStrings"),yTe=l((function(t){for(var e,r=0;r<t.length;r++){var n=t[r];e=r===0?lc(n):lc(n,e)}return e}),"hashStringsArray"),rP=!0,vTe=console.warn!=null,xTe=console.trace!=null,RN=Number.MAX_SAFE_INTEGER||9007199254740991,Aae=l((function(){return!0}),"trueify"),a6=l((function(){return!1}),"falsify"),nP=l((function(){return 0}),"zeroify"),MN=l((function(){}),"noop"),en=l((function(t){throw new Error(t)}),"error"),Lae=l((function(t){if(t===void 0)return rP;rP=!!t}),"warnings"),kr=l((function(t){Lae()&&(vTe?console.warn(t):(console.log(t),xTe&&console.trace()))}),"warn"),bTe=l((function(t){return Gt({},t)}),"clone"),Zs=l((function(t){return t==null?t:Dr(t)?t.slice():ur(t)?bTe(t):t}),"copy"),wTe=l((function(t){return t.slice()}),"copyArray"),Nae=l((function(t,e){for(e=t="";t++<36;e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return e}),"uuid"),kTe={},Iae=l((function(){return kTe}),"staticEmptyObject"),Jn=l((function(t){var e=Object.keys(t);return function(r){for(var n={},i=0;i<e.length;i++){var a=e[i],s=r?.[a];n[a]=s===void 0?t[a]:s}return n}}),"defaults"),Dl=l((function(t,e,r){for(var n=t.length-1;n>=0&&(t[n]!==e||(t.splice(n,1),!r));n--);}),"removeFromArray"),dS=l((function(t){t.splice(0,t.length)}),"clearArray"),TTe=l((function(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.push(n)}}),"push"),ps=l((function(t,e,r){return r&&(e=sae(r,e)),t[e]}),"getPrefixedProperty"),ml=l((function(t,e,r,n){r&&(e=sae(r,e)),t[e]=n}),"setPrefixedProperty"),Qs=typeof Map<"u"?Map:(function(){function t(){cl(this,t),this._obj={}}return l(t,"ObjectMap"),ul(t,[{key:"set",value:l((function(e,r){return this._obj[e]=r,this}),"set")},{key:"delete",value:l((function(e){return this._obj[e]=void 0,this}),"_delete")},{key:"clear",value:l((function(){this._obj={}}),"clear")},{key:"has",value:l((function(e){return this._obj[e]!==void 0}),"has")},{key:"get",value:l((function(e){return this._obj[e]}),"get")}]),t})(),ETe=(function(){function t(e){if(cl(this,t),this._obj=Object.create(null),this.size=0,e!=null){var r;r=e.instanceString!=null&&e.instanceString()===this.instanceString()?e.toArray():e;for(var n=0;n<r.length;n++)this.add(r[n])}}return l(t,"ObjectSet"),ul(t,[{key:"instanceString",value:l((function(){return"set"}),"instanceString")},{key:"add",value:l((function(e){var r=this._obj;r[e]!==1&&(r[e]=1,this.size++)}),"add")},{key:"delete",value:l((function(e){var r=this._obj;r[e]===1&&(r[e]=0,this.size--)}),"_delete")},{key:"clear",value:l((function(){this._obj=Object.create(null)}),"clear")},{key:"has",value:l((function(e){return this._obj[e]===1}),"has")},{key:"toArray",value:l((function(){var e=this;return Object.keys(this._obj).filter((function(r){return e.has(r)}))}),"toArray")},{key:"forEach",value:l((function(e,r){return this.toArray().forEach(e,r)}),"forEach")}]),t})(),km=(typeof Set>"u"?"undefined":Un(Set))!=="undefined"?Set:ETe,nk=l((function(t,e){var r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(t!==void 0&&e!==void 0&&LN(t)){var n=e.group;if(n==null&&(n=e.data&&e.data.source!=null&&e.data.target!=null?"edges":"nodes"),n==="nodes"||n==="edges"){this.length=1,this[0]=this;var i=this._private={cy:t,single:!0,data:e.data||{},position:e.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:n,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!e.selected,selectable:e.selectable===void 0||!!e.selectable,locked:!!e.locked,grabbed:!1,grabbable:e.grabbable===void 0||!!e.grabbable,pannable:e.pannable===void 0?n==="edges":!!e.pannable,active:!1,classes:new km,animation:{current:[],queue:[]},rscratch:{},scratch:e.scratch||{},edges:[],children:[],parent:e.parent&&e.parent.isNode()?e.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),e.renderedPosition){var a=e.renderedPosition,s=t.pan(),o=t.zoom();i.position={x:(a.x-s.x)/o,y:(a.y-s.y)/o}}var u=[];Dr(e.classes)?u=e.classes:Ot(e.classes)&&(u=e.classes.split(/\s+/));for(var h=0,d=u.length;h<d;h++){var p=u[h];p&&p!==""&&i.classes.add(p)}this.createEmitter();var f=e.style||e.css;f&&(kr("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(f)),(r===void 0||r)&&this.restore()}else en("An element must be of type `nodes` or `edges`; you specified `"+n+"`")}else en("An element must have a core reference and parameters set")}),"Element"),iP=l((function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},l((function(e,r,n){var i;ur(e)&&!Ta(e)&&(e=(i=e).roots||i.root,r=i.visit,n=i.directed),n=arguments.length!==2||tn(r)?n:r,r=tn(r)?r:function(){};for(var a,s=this._private.cy,o=e=Ot(e)?this.filter(e):e,u=[],h=[],d={},p={},f={},g=0,m=this.byGroup(),y=m.nodes,v=m.edges,x=0;x<o.length;x++){var b=o[x],w=b.id();b.isNode()&&(u.unshift(b),t.bfs&&(f[w]=!0,h.push(b)),p[w]=0)}for(var T=l((function(){var N=t.bfs?u.shift():u.pop(),O=N.id();if(t.dfs){if(f[O])return"continue";f[O]=!0,h.push(N)}var B,L=p[O],I=d[O],A=I!=null?I.source():null,M=I!=null?I.target():null,D=I==null?void 0:N.same(A)?M[0]:A[0];if((B=r(N,I,D,g++,L))===!0)return a=N,"break";if(B===!1)return"break";for(var R=N.connectedEdges().filter((function(W){return(!n||W.source().same(N))&&v.has(W)})),P=0;P<R.length;P++){var $=R[P],z=$.connectedNodes().filter((function(W){return!W.same(N)&&y.has(W)})),q=z.id();z.length===0||f[q]||(z=z[0],u.push(z),t.bfs&&(f[q]=!0,h.push(z)),d[q]=$,p[q]=p[O]+1)}}),"_loop");u.length!==0;){var k=T();if(k!=="continue"&&k==="break")break}for(var C=s.collection(),E=0;E<h.length;E++){var _=h[E],S=d[_.id()];S!=null&&C.push(S),C.push(_)}return{path:s.collection(C),found:s.collection(a)}}),"searchFn")}),"defineSearch"),py={breadthFirstSearch:iP({bfs:!0}),depthFirstSearch:iP({dfs:!0})};py.bfs=py.breadthFirstSearch,py.dfs=py.depthFirstSearch;var _Te=dae((function(t,e){(function(){var r,n,i,a,s,o,u,h,d,p,f,g,m,y,v;i=Math.floor,p=Math.min,n=l((function(x,b){return x<b?-1:x>b?1:0}),"defaultCmp"),d=l((function(x,b,w,T,k){var C;if(w==null&&(w=0),k==null&&(k=n),w<0)throw new Error("lo must be non-negative");for(T==null&&(T=x.length);w<T;)k(b,x[C=i((w+T)/2)])<0?T=C:w=C+1;return[].splice.apply(x,[w,w-w].concat(b)),b}),"insort"),o=l((function(x,b,w){return w==null&&(w=n),x.push(b),y(x,0,x.length-1,w)}),"heappush"),s=l((function(x,b){var w,T;return b==null&&(b=n),w=x.pop(),x.length?(T=x[0],x[0]=w,v(x,0,b)):T=w,T}),"heappop"),h=l((function(x,b,w){var T;return w==null&&(w=n),T=x[0],x[0]=b,v(x,0,w),T}),"heapreplace"),u=l((function(x,b,w){var T;return w==null&&(w=n),x.length&&w(x[0],b)<0&&(b=(T=[x[0],b])[0],x[0]=T[1],v(x,0,w)),b}),"heappushpop"),a=l((function(x,b){var w,T,k,C,E,_;for(b==null&&(b=n),E=[],T=0,k=(C=(function(){_=[];for(var S=0,N=i(x.length/2);0<=N?S<N:S>N;0<=N?S++:S--)_.push(S);return _}).apply(this).reverse()).length;T<k;T++)w=C[T],E.push(v(x,w,b));return E}),"heapify"),m=l((function(x,b,w){var T;if(w==null&&(w=n),(T=x.indexOf(b))!==-1)return y(x,0,T,w),v(x,T,w)}),"updateItem"),f=l((function(x,b,w){var T,k,C,E,_;if(w==null&&(w=n),!(k=x.slice(0,b)).length)return k;for(a(k,w),C=0,E=(_=x.slice(b)).length;C<E;C++)T=_[C],u(k,T,w);return k.sort(w).reverse()}),"nlargest"),g=l((function(x,b,w){var T,k,C,E,_,S,N,O,B;if(w==null&&(w=n),10*b<=x.length){if(!(C=x.slice(0,b).sort(w)).length)return C;for(k=C[C.length-1],E=0,S=(N=x.slice(b)).length;E<S;E++)w(T=N[E],k)<0&&(d(C,T,0,null,w),C.pop(),k=C[C.length-1]);return C}for(a(x,w),B=[],_=0,O=p(b,x.length);0<=O?_<O:_>O;0<=O?++_:--_)B.push(s(x,w));return B}),"nsmallest"),y=l((function(x,b,w,T){var k,C,E;for(T==null&&(T=n),k=x[w];w>b&&T(k,C=x[E=w-1>>1])<0;)x[w]=C,w=E;return x[w]=k}),"_siftdown"),v=l((function(x,b,w){var T,k,C,E,_;for(w==null&&(w=n),k=x.length,_=b,C=x[b],T=2*b+1;T<k;)(E=T+1)<k&&!(w(x[T],x[E])<0)&&(T=E),x[b]=x[T],T=2*(b=T)+1;return x[b]=C,y(x,_,b,w)}),"_siftup"),r=(function(){function x(b){this.cmp=b??n,this.nodes=[]}return x.push=o,x.pop=s,x.replace=h,x.pushpop=u,x.heapify=a,x.updateItem=m,x.nlargest=f,x.nsmallest=g,l(x,"Heap"),x.prototype.push=function(b){return o(this.nodes,b,this.cmp)},x.prototype.pop=function(){return s(this.nodes,this.cmp)},x.prototype.peek=function(){return this.nodes[0]},x.prototype.contains=function(b){return this.nodes.indexOf(b)!==-1},x.prototype.replace=function(b){return h(this.nodes,b,this.cmp)},x.prototype.pushpop=function(b){return u(this.nodes,b,this.cmp)},x.prototype.heapify=function(){return a(this.nodes,this.cmp)},x.prototype.updateItem=function(b){return m(this.nodes,b,this.cmp)},x.prototype.clear=function(){return this.nodes=[]},x.prototype.empty=function(){return this.nodes.length===0},x.prototype.size=function(){return this.nodes.length},x.prototype.clone=function(){var b;return(b=new x).nodes=this.nodes.slice(0),b},x.prototype.toArray=function(){return this.nodes.slice(0)},x.prototype.insert=x.prototype.push,x.prototype.top=x.prototype.peek,x.prototype.front=x.prototype.peek,x.prototype.has=x.prototype.contains,x.prototype.copy=x.prototype.clone,x})(),t.exports=r}).call(dy)})),rx=_Te,CTe=Jn({root:null,weight:l((function(t){return 1}),"weight"),directed:!1}),STe={dijkstra:l((function(t){if(!ur(t)){var e=arguments;t={root:e[0],weight:e[1],directed:e[2]}}var r=CTe(t),n=r.root,i=r.weight,a=r.directed,s=this,o=i,u=Ot(n)?this.filter(n)[0]:n[0],h={},d={},p={},f=this.byGroup(),g=f.nodes,m=f.edges;m.unmergeBy((function(I){return I.isLoop()}));for(var y=l((function(I){return h[I.id()]}),"getDist"),v=l((function(I,A){h[I.id()]=A,x.updateItem(I)}),"setDist"),x=new rx((function(I,A){return y(I)-y(A)})),b=0;b<g.length;b++){var w=g[b];h[w.id()]=w.same(u)?0:1/0,x.push(w)}for(var T=l((function(I,A){for(var M,D=(a?I.edgesTo(A):I.edgesWith(A)).intersect(m),R=1/0,P=0;P<D.length;P++){var $=D[P],z=o($);(z<R||!M)&&(R=z,M=$)}return{edge:M,dist:R}}),"distBetween");x.size()>0;){var k=x.pop(),C=y(k),E=k.id();if(p[E]=C,C!==1/0)for(var _=k.neighborhood().intersect(g),S=0;S<_.length;S++){var N=_[S],O=N.id(),B=T(k,N),L=C+B.dist;L<y(N)&&(v(N,L),d[O]={node:k,edge:B.edge})}}return{distanceTo:l((function(I){var A=Ot(I)?g.filter(I)[0]:I[0];return p[A.id()]}),"distanceTo"),pathTo:l((function(I){var A=Ot(I)?g.filter(I)[0]:I[0],M=[],D=A,R=D.id();if(A.length>0)for(M.unshift(A);d[R];){var P=d[R];M.unshift(P.edge),M.unshift(P.node),R=(D=P.node).id()}return s.spawn(M)}),"pathTo")}}),"dijkstra")},ATe={kruskal:l((function(t){t=t||function(b){return 1};for(var e=this.byGroup(),r=e.nodes,n=e.edges,i=r.length,a=new Array(i),s=r,o=l((function(b){for(var w=0;w<a.length;w++)if(a[w].has(b))return w}),"findSetIndex"),u=0;u<i;u++)a[u]=this.spawn(r[u]);for(var h=n.sort((function(b,w){return t(b)-t(w)})),d=0;d<h.length;d++){var p=h[d],f=p.source()[0],g=p.target()[0],m=o(f),y=o(g),v=a[m],x=a[y];m!==y&&(s.merge(p),v.merge(x),a.splice(y,1))}return s}),"kruskal")},LTe=Jn({root:null,goal:null,weight:l((function(t){return 1}),"weight"),heuristic:l((function(t){return 0}),"heuristic"),directed:!1}),NTe={aStar:l((function(t){var e=this.cy(),r=LTe(t),n=r.root,i=r.goal,a=r.heuristic,s=r.directed,o=r.weight;n=e.collection(n)[0],i=e.collection(i)[0];var u,h,d=n.id(),p=i.id(),f={},g={},m={},y=new rx((function(P,$){return g[P.id()]-g[$.id()]})),v=new km,x={},b={},w=l((function(P,$){y.push(P),v.add($)}),"addToOpenSet"),T=l((function(){u=y.pop(),h=u.id(),v.delete(h)}),"popFromOpenSet"),k=l((function(P){return v.has(P)}),"isInOpenSet");w(n,d),f[d]=0,g[d]=a(n);for(var C=0;y.size()>0;){if(T(),C++,h===p){for(var E=[],_=i,S=p,N=b[S];E.unshift(_),N!=null&&E.unshift(N),(_=x[S])!=null;)N=b[S=_.id()];return{found:!0,distance:f[h],path:this.spawn(E),steps:C}}m[h]=!0;for(var O=u._private.edges,B=0;B<O.length;B++){var L=O[B];if(this.hasElementWithId(L.id())&&(!s||L.data("source")===h)){var I=L.source(),A=L.target(),M=I.id()!==h?I:A,D=M.id();if(this.hasElementWithId(D)&&!m[D]){var R=f[h]+o(L);k(D)?R<f[D]&&(f[D]=R,g[D]=R+a(M),x[D]=u,b[D]=L):(f[D]=R,g[D]=R+a(M),w(M,D),x[D]=u,b[D]=L)}}}}return{found:!1,distance:void 0,path:void 0,steps:C}}),"aStar")},ITe=Jn({weight:l((function(t){return 1}),"weight"),directed:!1}),RTe={floydWarshall:l((function(t){for(var e=this.cy(),r=ITe(t),n=r.weight,i=r.directed,a=n,s=this.byGroup(),o=s.nodes,u=s.edges,h=o.length,d=h*h,p=l((function(z){return o.indexOf(z)}),"indexOf"),f=l((function(z){return o[z]}),"atIndex"),g=new Array(d),m=0;m<d;m++){var y=m%h,v=(m-y)/h;g[m]=v===y?0:1/0}for(var x=new Array(d),b=new Array(d),w=0;w<u.length;w++){var T=u[w],k=T.source()[0],C=T.target()[0];if(k!==C){var E=p(k),_=p(C),S=E*h+_,N=a(T);if(g[S]>N&&(g[S]=N,x[S]=_,b[S]=T),!i){var O=_*h+E;!i&&g[O]>N&&(g[O]=N,x[O]=E,b[O]=T)}}}for(var B=0;B<h;B++)for(var L=0;L<h;L++)for(var I=L*h+B,A=0;A<h;A++){var M=L*h+A,D=B*h+A;g[I]+g[D]<g[M]&&(g[M]=g[I]+g[D],x[M]=x[I])}var R=l((function(z){return(Ot(z)?e.filter(z):z)[0]}),"getArgEle"),P=l((function(z){return p(R(z))}),"indexOfArgEle"),$={distance:l((function(z,q){var W=P(z),Q=P(q);return g[W*h+Q]}),"distance"),path:l((function(z,q){var W=P(z),Q=P(q),te=f(W);if(W===Q)return te.collection();if(x[W*h+Q]==null)return e.collection();var oe,re=e.collection(),H=W;for(re.merge(te);W!==Q;)H=W,W=x[W*h+Q],oe=b[H*h+W],re.merge(oe),re.merge(f(W));return re}),"path")};return $}),"floydWarshall")},MTe=Jn({weight:l((function(t){return 1}),"weight"),directed:!1,root:null}),DTe={bellmanFord:l((function(t){var e=this,r=MTe(t),n=r.weight,i=r.directed,a=r.root,s=n,o=this,u=this.cy(),h=this.byGroup(),d=h.edges,p=h.nodes,f=p.length,g=new Qs,m=!1,y=[];a=u.collection(a)[0],d.unmergeBy((function(de){return de.isLoop()}));for(var v=d.length,x=l((function(de){var ce=g.get(de.id());return ce||(ce={},g.set(de.id(),ce)),ce}),"getInfo"),b=l((function(de){return(Ot(de)?u.$(de):de)[0]}),"getNodeFromTo"),w=l((function(de){return x(b(de)).dist}),"distanceTo"),T=l((function(de){for(var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a,Ee=b(de),ve=[],De=Ee;;){if(De==null)return e.spawn();var Ue=x(De),ze=Ue.edge,Ge=Ue.pred;if(ve.unshift(De[0]),De.same(ce)&&ve.length>0)break;ze!=null&&ve.unshift(ze),De=Ge}return o.spawn(ve)}),"pathTo"),k=0;k<f;k++){var C=p[k],E=x(C);C.same(a)?E.dist=0:E.dist=1/0,E.pred=null,E.edge=null}for(var _=!1,S=l((function(de,ce,Ee,ve,De,Ue){var ze=ve.dist+Ue;ze<De.dist&&!Ee.same(ve.edge)&&(De.dist=ze,De.pred=de,De.edge=Ee,_=!0)}),"checkForEdgeReplacement"),N=1;N<f;N++){_=!1;for(var O=0;O<v;O++){var B=d[O],L=B.source(),I=B.target(),A=s(B),M=x(L),D=x(I);S(L,I,B,M,D,A),i||S(I,L,B,D,M,A)}if(!_)break}if(_)for(var R=[],P=0;P<v;P++){var $=d[P],z=$.source(),q=$.target(),W=s($),Q=x(z).dist,te=x(q).dist;if(Q+W<te||!i&&te+W<Q){if(m||(kr("Graph contains a negative weight cycle for Bellman-Ford"),m=!0),t.findNegativeWeightCycles===!1)break;var oe=[];Q+W<te&&oe.push(z),!i&&te+W<Q&&oe.push(q);for(var re=oe.length,H=0;H<re;H++){var K=oe[H],ie=[K];ie.push(x(K).edge);for(var ne=x(K).pred;ie.indexOf(ne)===-1;)ie.push(ne),ie.push(x(ne).edge),ne=x(ne).pred;for(var J=(ie=ie.slice(ie.indexOf(ne)))[0].id(),ue=0,Y=2;Y<ie.length;Y+=2)ie[Y].id()<J&&(J=ie[Y].id(),ue=Y);(ie=ie.slice(ue).concat(ie.slice(0,ue))).push(ie[0]);var se=ie.map((function(de){return de.id()})).join(",");R.indexOf(se)===-1&&(y.push(o.spawn(ie)),R.push(se))}}}return{distanceTo:w,pathTo:T,hasNegativeWeightCycle:m,negativeWeightCycles:y}}),"bellmanFord")},OTe=Math.sqrt(2),PTe=l((function(t,e,r){r.length===0&&en("Karger-Stein must be run on a connected (sub)graph");for(var n=r[t],i=n[1],a=n[2],s=e[i],o=e[a],u=r,h=u.length-1;h>=0;h--){var d=u[h],p=d[1],f=d[2];(e[p]===s&&e[f]===o||e[p]===o&&e[f]===s)&&u.splice(h,1)}for(var g=0;g<u.length;g++){var m=u[g];m[1]===o?(u[g]=m.slice(),u[g][1]=s):m[2]===o&&(u[g]=m.slice(),u[g][2]=s)}for(var y=0;y<e.length;y++)e[y]===o&&(e[y]=s);return u}),"collapse"),NT=l((function(t,e,r,n){for(;r>n;){var i=Math.floor(Math.random()*e.length);e=PTe(i,t,e),r--}return e}),"contractUntil"),BTe={kargerStein:l((function(){var t=this,e=this.byGroup(),r=e.nodes,n=e.edges;n.unmergeBy((function(M){return M.isLoop()}));var i=r.length,a=n.length,s=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),o=Math.floor(i/OTe);if(!(i<2)){for(var u=[],h=0;h<a;h++){var d=n[h];u.push([h,r.indexOf(d.source()),r.indexOf(d.target())])}for(var p=1/0,f=[],g=new Array(i),m=new Array(i),y=new Array(i),v=l((function(M,D){for(var R=0;R<i;R++)D[R]=M[R]}),"copyNodesMap"),x=0;x<=s;x++){for(var b=0;b<i;b++)m[b]=b;var w=NT(m,u.slice(),i,o),T=w.slice();v(m,y);var k=NT(m,w,o,2),C=NT(y,T,o,2);k.length<=C.length&&k.length<p?(p=k.length,f=k,v(m,g)):C.length<=k.length&&C.length<p&&(p=C.length,f=C,v(y,g))}for(var E=this.spawn(f.map((function(M){return n[M[0]]}))),_=this.spawn(),S=this.spawn(),N=g[0],O=0;O<g.length;O++){var B=g[O],L=r[O];B===N?_.merge(L):S.merge(L)}var I=l((function(M){var D=t.spawn();return M.forEach((function(R){D.merge(R),R.connectedEdges().forEach((function(P){t.contains(P)&&!E.contains(P)&&D.merge(P)}))})),D}),"constructComponent"),A=[I(_),I(S)];return{cut:E,components:A,partition1:_,partition2:S}}en("At least 2 nodes are required for Karger-Stein algorithm")}),"kargerStein")},$Te=l((function(t){return{x:t.x,y:t.y}}),"copyPosition"),ik=l((function(t,e,r){return{x:t.x*e+r.x,y:t.y*e+r.y}}),"modelToRenderedPosition"),Rae=l((function(t,e,r){return{x:(t.x-r.x)/e,y:(t.y-r.y)/e}}),"renderedToModelPosition"),Gd=l((function(t){return{x:t[0],y:t[1]}}),"array2point"),FTe=l((function(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.length,n=1/0,i=e;i<r;i++){var a=t[i];isFinite(a)&&(n=Math.min(a,n))}return n}),"min"),zTe=l((function(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.length,n=-1/0,i=e;i<r;i++){var a=t[i];isFinite(a)&&(n=Math.max(a,n))}return n}),"max"),GTe=l((function(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.length,n=0,i=0,a=e;a<r;a++){var s=t[a];isFinite(s)&&(n+=s,i++)}return n/i}),"mean"),UTe=l((function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.length,n=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],a=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];n?t=t.slice(e,r):(r<t.length&&t.splice(r,t.length-r),e>0&&t.splice(0,e));for(var s=0,o=t.length-1;o>=0;o--){var u=t[o];a?isFinite(u)||(t[o]=-1/0,s++):t.splice(o,1)}i&&t.sort((function(p,f){return p-f}));var h=t.length,d=Math.floor(h/2);return h%2!=0?t[d+1+s]:(t[d-1+s]+t[d+s])/2}),"median"),qTe=l((function(t){return Math.PI*t/180}),"deg2rad"),Vx=l((function(t,e){return Math.atan2(e,t)-Math.PI/2}),"getAngleFromDisp"),DN=Math.log2||function(t){return Math.log(t)/Math.log(2)},aP=l((function(t){return t>0?1:t<0?-1:0}),"signum"),th=l((function(t,e){return Math.sqrt(Gc(t,e))}),"dist"),Gc=l((function(t,e){var r=e.x-t.x,n=e.y-t.y;return r*r+n*n}),"sqdist"),jTe=l((function(t){for(var e=t.length,r=0,n=0;n<e;n++)r+=t[n];for(var i=0;i<e;i++)t[i]=t[i]/r;return t}),"inPlaceSumNormalize"),Vn=l((function(t,e,r,n){return(1-n)*(1-n)*t+2*(1-n)*n*e+n*n*r}),"qbezierAt"),rp=l((function(t,e,r,n){return{x:Vn(t.x,e.x,r.x,n),y:Vn(t.y,e.y,r.y,n)}}),"qbezierPtAt"),WTe=l((function(t,e,r,n){var i=e.x-t.x,a=e.y-t.y,s=th(t,e),o=i/s,u=a/s;return r=r??0,n=n??r*s,{x:t.x+o*n,y:t.y+u*n}}),"lineAt"),nv=l((function(t,e,r){return Math.max(t,Math.min(r,e))}),"bound"),ha=l((function(t){if(t==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(t.x1!=null&&t.y1!=null){if(t.x2!=null&&t.y2!=null&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(t.w!=null&&t.h!=null&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}}),"makeBoundingBox"),YTe=l((function(t){return{x1:t.x1,x2:t.x2,w:t.w,y1:t.y1,y2:t.y2,h:t.h}}),"copyBoundingBox"),VTe=l((function(t){t.x1=1/0,t.y1=1/0,t.x2=-1/0,t.y2=-1/0,t.w=0,t.h=0}),"clearBoundingBox"),HTe=l((function(t,e,r){return{x1:t.x1+e,x2:t.x2+e,y1:t.y1+r,y2:t.y2+r,w:t.w,h:t.h}}),"shiftBoundingBox"),Mae=l((function(t,e){t.x1=Math.min(t.x1,e.x1),t.x2=Math.max(t.x2,e.x2),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,e.y1),t.y2=Math.max(t.y2,e.y2),t.h=t.y2-t.y1}),"updateBoundingBox"),XTe=l((function(t,e,r){t.x1=Math.min(t.x1,e),t.x2=Math.max(t.x2,e),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,r),t.y2=Math.max(t.y2,r),t.h=t.y2-t.y1}),"expandBoundingBoxByPoint"),i4=l((function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.x1-=e,t.x2+=e,t.y1-=e,t.y2+=e,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t}),"expandBoundingBox"),a4=l((function(t){var e,r,n,i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0];if(a.length===1)e=r=n=i=a[0];else if(a.length===2)e=n=a[0],i=r=a[1];else if(a.length===4){var s=yn(a,4);e=s[0],r=s[1],n=s[2],i=s[3]}return t.x1-=i,t.x2+=r,t.y1-=e,t.y2+=n,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t}),"expandBoundingBoxSides"),sP=l((function(t,e){t.x1=e.x1,t.y1=e.y1,t.x2=e.x2,t.y2=e.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1}),"assignBoundingBox"),ON=l((function(t,e){return!(t.x1>e.x2)&&!(e.x1>t.x2)&&!(t.x2<e.x1)&&!(e.x2<t.x1)&&!(t.y2<e.y1)&&!(e.y2<t.y1)&&!(t.y1>e.y2)&&!(e.y1>t.y2)}),"boundingBoxesIntersect"),np=l((function(t,e,r){return t.x1<=e&&e<=t.x2&&t.y1<=r&&r<=t.y2}),"inBoundingBox"),KTe=l((function(t,e){return np(t,e.x,e.y)}),"pointInBoundingBox"),Dae=l((function(t,e){return np(t,e.x1,e.y1)&&np(t,e.x2,e.y2)}),"boundingBoxInBoundingBox"),oP=l((function(t,e,r,n,i,a,s){var o,u,h=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",d=h==="auto"?rh(i,a):h,p=i/2,f=a/2,g=(d=Math.min(d,p,f))!==p,m=d!==f;if(g){var y=r-p+d-s,v=n-f-s,x=r+p-d+s,b=v;if((o=Ol(t,e,r,n,y,v,x,b,!1)).length>0)return o}if(m){var w=r+p+s,T=n-f+d-s,k=w,C=n+f-d+s;if((o=Ol(t,e,r,n,w,T,k,C,!1)).length>0)return o}if(g){var E=r-p+d-s,_=n+f+s,S=r+p-d+s,N=_;if((o=Ol(t,e,r,n,E,_,S,N,!1)).length>0)return o}if(m){var O=r-p-s,B=n-f+d-s,L=O,I=n+f-d+s;if((o=Ol(t,e,r,n,O,B,L,I,!1)).length>0)return o}var A=r-p+d,M=n-f+d;if((u=fy(t,e,r,n,A,M,d+s)).length>0&&u[0]<=A&&u[1]<=M)return[u[0],u[1]];var D=r+p-d,R=n-f+d;if((u=fy(t,e,r,n,D,R,d+s)).length>0&&u[0]>=D&&u[1]<=R)return[u[0],u[1]];var P=r+p-d,$=n+f-d;if((u=fy(t,e,r,n,P,$,d+s)).length>0&&u[0]>=P&&u[1]>=$)return[u[0],u[1]];var z=r-p+d,q=n+f-d;return(u=fy(t,e,r,n,z,q,d+s)).length>0&&u[0]<=z&&u[1]>=q?[u[0],u[1]]:[]}),"roundRectangleIntersectLine"),ZTe=l((function(t,e,r,n,i,a,s){var o=s,u=Math.min(r,i),h=Math.max(r,i),d=Math.min(n,a),p=Math.max(n,a);return u-o<=t&&t<=h+o&&d-o<=e&&e<=p+o}),"inLineVicinity"),QTe=l((function(t,e,r,n,i,a,s,o,u){var h=Math.min(r,s,i)-u,d=Math.max(r,s,i)+u,p=Math.min(n,o,a)-u,f=Math.max(n,o,a)+u;return!(t<h||t>d||e<p||e>f)}),"inBezierVicinity"),JTe=l((function(t,e,r,n){var i=e*e-4*t*(r-=n);if(i<0)return[];var a=Math.sqrt(i),s=2*t;return[(-e+a)/s,(-e-a)/s]}),"solveQuadratic"),eEe=l((function(t,e,r,n,i){var a,s,o,u,h,d,p,f;return t===0&&(t=1e-5),o=-27*(n/=t)+(e/=t)*(9*(r/=t)-e*e*2),a=(s=(3*r-e*e)/9)*s*s+(o/=54)*o,i[1]=0,p=e/3,a>0?(h=(h=o+Math.sqrt(a))<0?-Math.pow(-h,1/3):Math.pow(h,1/3),d=(d=o-Math.sqrt(a))<0?-Math.pow(-d,1/3):Math.pow(d,1/3),i[0]=-p+h+d,p+=(h+d)/2,i[4]=i[2]=-p,p=Math.sqrt(3)*(-d+h)/2,i[3]=p,void(i[5]=-p)):(i[5]=i[3]=0,a===0?(f=o<0?-Math.pow(-o,1/3):Math.pow(o,1/3),i[0]=2*f-p,void(i[4]=i[2]=-(f+p))):(u=(s=-s)*s*s,u=Math.acos(o/Math.sqrt(u)),f=2*Math.sqrt(s),i[0]=-p+f*Math.cos(u/3),i[2]=-p+f*Math.cos((u+2*Math.PI)/3),void(i[4]=-p+f*Math.cos((u+4*Math.PI)/3))))}),"solveCubic"),tEe=l((function(t,e,r,n,i,a,s,o){var u=[];eEe(1*r*r-4*r*i+2*r*s+4*i*i-4*i*s+s*s+n*n-4*n*a+2*n*o+4*a*a-4*a*o+o*o,9*r*i-3*r*r-3*r*s-6*i*i+3*i*s+9*n*a-3*n*n-3*n*o-6*a*a+3*a*o,3*r*r-6*r*i+r*s-r*t+2*i*i+2*i*t-s*t+3*n*n-6*n*a+n*o-n*e+2*a*a+2*a*e-o*e,1*r*i-r*r+r*t-i*t+n*a-n*n+n*e-a*e,u);for(var h=[],d=0;d<6;d+=2)Math.abs(u[d+1])<1e-7&&u[d]>=0&&u[d]<=1&&h.push(u[d]);h.push(1),h.push(0);for(var p,f,g,m=-1,y=0;y<h.length;y++)p=Math.pow(1-h[y],2)*r+2*(1-h[y])*h[y]*i+h[y]*h[y]*s,f=Math.pow(1-h[y],2)*n+2*(1-h[y])*h[y]*a+h[y]*h[y]*o,g=Math.pow(p-t,2)+Math.pow(f-e,2),m>=0?g<m&&(m=g):m=g;return m}),"sqdistToQuadraticBezier"),rEe=l((function(t,e,r,n,i,a){var s=[t-r,e-n],o=[i-r,a-n],u=o[0]*o[0]+o[1]*o[1],h=s[0]*s[0]+s[1]*s[1],d=s[0]*o[0]+s[1]*o[1],p=d*d/u;return d<0?h:p>u?(t-i)*(t-i)+(e-a)*(e-a):h-p}),"sqdistToFiniteLine"),ea=l((function(t,e,r){for(var n,i,a,s,o=0,u=0;u<r.length/2;u++)if(n=r[2*u],i=r[2*u+1],u+1<r.length/2?(a=r[2*(u+1)],s=r[2*(u+1)+1]):(a=r[2*(u+1-r.length/2)],s=r[2*(u+1-r.length/2)+1]),!(n==t&&a==t)){if(!(n>=t&&t>=a||n<=t&&t<=a))continue;(t-n)/(a-n)*(s-i)+i>e&&o++}return o%2!=0}),"pointInsidePolygonPoints"),vo=l((function(t,e,r,n,i,a,s,o,u){var h,d=new Array(r.length);o[0]!=null?(h=Math.atan(o[1]/o[0]),o[0]<0?h+=Math.PI/2:h=-h-Math.PI/2):h=o;for(var p,f=Math.cos(-h),g=Math.sin(-h),m=0;m<d.length/2;m++)d[2*m]=a/2*(r[2*m]*f-r[2*m+1]*g),d[2*m+1]=s/2*(r[2*m+1]*f+r[2*m]*g),d[2*m]+=n,d[2*m+1]+=i;if(u>0){var y=o6(d,-u);p=s6(y)}else p=d;return ea(t,e,p)}),"pointInsidePolygon"),nEe=l((function(t,e,r,n,i,a,s,o){for(var u=new Array(2*r.length),h=0;h<o.length;h++){var d=o[h];if(u[4*h+0]=d.startX,u[4*h+1]=d.startY,u[4*h+2]=d.stopX,u[4*h+3]=d.stopY,Math.pow(d.cx-t,2)+Math.pow(d.cy-e,2)<=Math.pow(d.radius,2))return!0}return ea(t,e,u)}),"pointInsideRoundPolygon"),s6=l((function(t){for(var e,r,n,i,a,s,o,u,h=new Array(t.length/2),d=0;d<t.length/4;d++){e=t[4*d],r=t[4*d+1],n=t[4*d+2],i=t[4*d+3],d<t.length/4-1?(a=t[4*(d+1)],s=t[4*(d+1)+1],o=t[4*(d+1)+2],u=t[4*(d+1)+3]):(a=t[0],s=t[1],o=t[2],u=t[3]);var p=Ol(e,r,n,i,a,s,o,u,!0);h[2*d]=p[0],h[2*d+1]=p[1]}return h}),"joinLines"),o6=l((function(t,e){for(var r,n,i,a,s=new Array(2*t.length),o=0;o<t.length/2;o++){r=t[2*o],n=t[2*o+1],o<t.length/2-1?(i=t[2*(o+1)],a=t[2*(o+1)+1]):(i=t[0],a=t[1]);var u=a-n,h=-(i-r),d=Math.sqrt(u*u+h*h),p=u/d,f=h/d;s[4*o]=r+p*e,s[4*o+1]=n+f*e,s[4*o+2]=i+p*e,s[4*o+3]=a+f*e}return s}),"expandPolygon"),iEe=l((function(t,e,r,n,i,a){var s=r-t,o=n-e;s/=i,o/=a;var u=Math.sqrt(s*s+o*o),h=u-1;if(h<0)return[];var d=h/u;return[(r-t)*d+t,(n-e)*d+e]}),"intersectLineEllipse"),_c=l((function(t,e,r,n,i,a,s){return t-=i,e-=a,(t/=r/2+s)*t+(e/=n/2+s)*e<=1}),"checkInEllipse"),fy=l((function(t,e,r,n,i,a,s){var o=[r-t,n-e],u=[t-i,e-a],h=o[0]*o[0]+o[1]*o[1],d=2*(u[0]*o[0]+u[1]*o[1]),p=d*d-4*h*(u[0]*u[0]+u[1]*u[1]-s*s);if(p<0)return[];var f=(-d+Math.sqrt(p))/(2*h),g=(-d-Math.sqrt(p))/(2*h),m=Math.min(f,g),y=Math.max(f,g),v=[];if(m>=0&&m<=1&&v.push(m),y>=0&&y<=1&&v.push(y),v.length===0)return[];var x=v[0]*o[0]+t,b=v[0]*o[1]+e;return v.length>1?v[0]==v[1]?[x,b]:[x,b,v[1]*o[0]+t,v[1]*o[1]+e]:[x,b]}),"intersectLineCircle"),IT=l((function(t,e,r){return e<=t&&t<=r||r<=t&&t<=e?t:t<=e&&e<=r||r<=e&&e<=t?e:r}),"midOfThree"),Ol=l((function(t,e,r,n,i,a,s,o,u){var h=t-i,d=r-t,p=s-i,f=e-a,g=n-e,m=o-a,y=p*f-m*h,v=d*f-g*h,x=m*d-p*g;if(x!==0){var b=y/x,w=v/x,T=-.001;return T<=b&&b<=1.001&&T<=w&&w<=1.001||u?[t+b*d,e+b*g]:[]}return y===0||v===0?IT(t,r,s)===s?[s,o]:IT(t,r,i)===i?[i,a]:IT(i,s,r)===r?[r,n]:[]:[]}),"finiteLinesIntersect"),t2=l((function(t,e,r,n,i,a,s,o){var u,h,d,p,f,g,m=[],y=new Array(r.length),v=!0;if(a==null&&(v=!1),v){for(var x=0;x<y.length/2;x++)y[2*x]=r[2*x]*a+n,y[2*x+1]=r[2*x+1]*s+i;if(o>0){var b=o6(y,-o);h=s6(b)}else h=y}else h=r;for(var w=0;w<h.length/2;w++)d=h[2*w],p=h[2*w+1],w<h.length/2-1?(f=h[2*(w+1)],g=h[2*(w+1)+1]):(f=h[0],g=h[1]),(u=Ol(t,e,n,i,d,p,f,g)).length!==0&&m.push(u[0],u[1]);return m}),"polygonIntersectLine"),aEe=l((function(t,e,r,n,i,a,s,o,u){var h,d=[],p=new Array(2*r.length);u.forEach((function(x,b){b===0?(p[p.length-2]=x.startX,p[p.length-1]=x.startY):(p[4*b-2]=x.startX,p[4*b-1]=x.startY),p[4*b]=x.stopX,p[4*b+1]=x.stopY,(h=fy(t,e,n,i,x.cx,x.cy,x.radius)).length!==0&&d.push(h[0],h[1])}));for(var f=0;f<p.length/4;f++)(h=Ol(t,e,n,i,p[4*f],p[4*f+1],p[4*f+2],p[4*f+3],!1)).length!==0&&d.push(h[0],h[1]);if(d.length>2){for(var g=[d[0],d[1]],m=Math.pow(g[0]-t,2)+Math.pow(g[1]-e,2),y=1;y<d.length/2;y++){var v=Math.pow(d[2*y]-t,2)+Math.pow(d[2*y+1]-e,2);v<=m&&(g[0]=d[2*y],g[1]=d[2*y+1],m=v)}return g}return d}),"roundPolygonIntersectLine"),Hx=l((function(t,e,r){var n=[t[0]-e[0],t[1]-e[1]],i=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=(i-r)/i;return a<0&&(a=1e-5),[e[0]+a*n[0],e[1]+a*n[1]]}),"shortenIntersection"),Ni=l((function(t,e){var r=pS(t,e);return r=Oae(r)}),"generateUnitNgonPointsFitToSquare"),Oae=l((function(t){for(var e,r,n=t.length/2,i=1/0,a=1/0,s=-1/0,o=-1/0,u=0;u<n;u++)e=t[2*u],r=t[2*u+1],i=Math.min(i,e),s=Math.max(s,e),a=Math.min(a,r),o=Math.max(o,r);for(var h=2/(s-i),d=2/(o-a),p=0;p<n;p++)e=t[2*p]=t[2*p]*h,r=t[2*p+1]=t[2*p+1]*d,i=Math.min(i,e),s=Math.max(s,e),a=Math.min(a,r),o=Math.max(o,r);if(a<-1)for(var f=0;f<n;f++)r=t[2*f+1]=t[2*f+1]+(-1-a);return t}),"fitPolygonToSquare"),pS=l((function(t,e){var r=1/t*2*Math.PI,n=t%2==0?Math.PI/2+r/2:Math.PI/2;n+=e;for(var i,a=new Array(2*t),s=0;s<t;s++)i=s*r+n,a[2*s]=Math.cos(i),a[2*s+1]=Math.sin(-i);return a}),"generateUnitNgonPoints"),rh=l((function(t,e){return Math.min(t/4,e/4,8)}),"getRoundRectangleRadius"),Pae=l((function(t,e){return Math.min(t/10,e/10,8)}),"getRoundPolygonRadius"),PN=l((function(){return 8}),"getCutRectangleCornerLength"),sEe=l((function(t,e,r){return[t-2*e+r,2*(e-t),t]}),"bezierPtsToQuadCoeff"),fS=l((function(t,e){return{heightOffset:Math.min(15,.05*e),widthOffset:Math.min(100,.25*t),ctrlPtOffsetPct:.05}}),"getBarrelCurveConstants"),oEe=Jn({dampingFactor:.8,precision:1e-6,iterations:200,weight:l((function(t){return 1}),"weight")}),lEe={pageRank:l((function(t){for(var e=oEe(t),r=e.dampingFactor,n=e.precision,i=e.iterations,a=e.weight,s=this._private.cy,o=this.byGroup(),u=o.nodes,h=o.edges,d=u.length,p=d*d,f=h.length,g=new Array(p),m=new Array(d),y=(1-r)/d,v=0;v<d;v++){for(var x=0;x<d;x++)g[v*d+x]=0;m[v]=0}for(var b=0;b<f;b++){var w=h[b],T=w.data("source"),k=w.data("target");if(T!==k){var C=u.indexOfId(T),E=u.indexOfId(k),_=a(w);g[E*d+C]+=_,m[C]+=_}}for(var S=1/d+y,N=0;N<d;N++)if(m[N]===0)for(var O=0;O<d;O++)g[O*d+N]=S;else for(var B=0;B<d;B++){var L=B*d+N;g[L]=g[L]/m[N]+y}for(var I,A=new Array(d),M=new Array(d),D=0;D<d;D++)A[D]=1;for(var R=0;R<i;R++){for(var P=0;P<d;P++)M[P]=0;for(var $=0;$<d;$++)for(var z=0;z<d;z++){var q=$*d+z;M[$]+=g[q]*A[z]}jTe(M),I=A,A=M,M=I;for(var W=0,Q=0;Q<d;Q++){var te=I[Q]-A[Q];W+=te*te}if(W<n)break}var oe={rank:l((function(re){return re=s.collection(re)[0],A[u.indexOf(re)]}),"rank")};return oe}),"pageRank")},lP=Jn({root:null,weight:l((function(t){return 1}),"weight"),directed:!1,alpha:0}),jh={degreeCentralityNormalized:l((function(t){t=lP(t);var e=this.cy(),r=this.nodes(),n=r.length;if(t.directed){for(var i={},a={},s=0,o=0,u=0;u<n;u++){var h=r[u],d=h.id();t.root=h;var p=this.degreeCentrality(t);s<p.indegree&&(s=p.indegree),o<p.outdegree&&(o=p.outdegree),i[d]=p.indegree,a[d]=p.outdegree}return{indegree:l((function(x){return s==0?0:(Ot(x)&&(x=e.filter(x)),i[x.id()]/s)}),"indegree"),outdegree:l((function(x){return o===0?0:(Ot(x)&&(x=e.filter(x)),a[x.id()]/o)}),"outdegree")}}for(var f={},g=0,m=0;m<n;m++){var y=r[m];t.root=y;var v=this.degreeCentrality(t);g<v.degree&&(g=v.degree),f[y.id()]=v.degree}return{degree:l((function(x){return g===0?0:(Ot(x)&&(x=e.filter(x)),f[x.id()]/g)}),"degree")}}),"degreeCentralityNormalized"),degreeCentrality:l((function(t){t=lP(t);var e=this.cy(),r=this,n=t,i=n.root,a=n.weight,s=n.directed,o=n.alpha;if(i=e.collection(i)[0],s){for(var u=i.connectedEdges(),h=u.filter((function(k){return k.target().same(i)&&r.has(k)})),d=u.filter((function(k){return k.source().same(i)&&r.has(k)})),p=h.length,f=d.length,g=0,m=0,y=0;y<h.length;y++)g+=a(h[y]);for(var v=0;v<d.length;v++)m+=a(d[v]);return{indegree:Math.pow(p,1-o)*Math.pow(g,o),outdegree:Math.pow(f,1-o)*Math.pow(m,o)}}for(var x=i.connectedEdges().intersection(r),b=x.length,w=0,T=0;T<x.length;T++)w+=a(x[T]);return{degree:Math.pow(b,1-o)*Math.pow(w,o)}}),"degreeCentrality")};jh.dc=jh.degreeCentrality,jh.dcn=jh.degreeCentralityNormalised=jh.degreeCentralityNormalized;var cP=Jn({harmonic:!0,weight:l((function(){return 1}),"weight"),directed:!1,root:null}),Wh={closenessCentralityNormalized:l((function(t){for(var e=cP(t),r=e.harmonic,n=e.weight,i=e.directed,a=this.cy(),s={},o=0,u=this.nodes(),h=this.floydWarshall({weight:n,directed:i}),d=0;d<u.length;d++){for(var p=0,f=u[d],g=0;g<u.length;g++)if(d!==g){var m=h.distance(f,u[g]);p+=r?1/m:m}r||(p=1/p),o<p&&(o=p),s[f.id()]=p}return{closeness:l((function(y){return o==0?0:(y=Ot(y)?a.filter(y)[0].id():y.id(),s[y]/o)}),"closeness")}}),"closenessCentralityNormalized"),closenessCentrality:l((function(t){var e=cP(t),r=e.root,n=e.weight,i=e.directed,a=e.harmonic;r=this.filter(r)[0];for(var s=this.dijkstra({root:r,weight:n,directed:i}),o=0,u=this.nodes(),h=0;h<u.length;h++){var d=u[h];if(!d.same(r)){var p=s.distanceTo(d);o+=a?1/p:p}}return a?o:1/o}),"closenessCentrality")};Wh.cc=Wh.closenessCentrality,Wh.ccn=Wh.closenessCentralityNormalised=Wh.closenessCentralityNormalized;var cEe=Jn({weight:null,directed:!1}),gS={betweennessCentrality:l((function(t){for(var e=cEe(t),r=e.directed,n=e.weight,i=n!=null,a=this.cy(),s=this.nodes(),o={},u={},h=0,d={set:l((function(x,b){u[x]=b,b>h&&(h=b)}),"set"),get:l((function(x){return u[x]}),"get")},p=0;p<s.length;p++){var f=s[p],g=f.id();o[g]=r?f.outgoers().nodes():f.openNeighborhood().nodes(),d.set(g,0)}for(var m=l((function(x){for(var b=s[x].id(),w=[],T={},k={},C={},E=new rx((function(W,Q){return C[W]-C[Q]})),_=0;_<s.length;_++){var S=s[_].id();T[S]=[],k[S]=0,C[S]=1/0}for(k[b]=1,C[b]=0,E.push(b);!E.empty();){var N=E.pop();if(w.push(N),i)for(var O=0;O<o[N].length;O++){var B=o[N][O],L=a.getElementById(N),I=void 0;I=L.edgesTo(B).length>0?L.edgesTo(B)[0]:B.edgesTo(L)[0];var A=n(I);B=B.id(),C[B]>C[N]+A&&(C[B]=C[N]+A,E.nodes.indexOf(B)<0?E.push(B):E.updateItem(B),k[B]=0,T[B]=[]),C[B]==C[N]+A&&(k[B]=k[B]+k[N],T[B].push(N))}else for(var M=0;M<o[N].length;M++){var D=o[N][M].id();C[D]==1/0&&(E.push(D),C[D]=C[N]+1),C[D]==C[N]+1&&(k[D]=k[D]+k[N],T[D].push(N))}}for(var R={},P=0;P<s.length;P++)R[s[P].id()]=0;for(;w.length>0;){for(var $=w.pop(),z=0;z<T[$].length;z++){var q=T[$][z];R[q]=R[q]+k[q]/k[$]*(1+R[$])}$!=s[x].id()&&d.set($,d.get($)+R[$])}}),"_loop"),y=0;y<s.length;y++)m(y);var v={betweenness:l((function(x){var b=a.collection(x).id();return d.get(b)}),"betweenness"),betweennessNormalized:l((function(x){if(h==0)return 0;var b=a.collection(x).id();return d.get(b)/h}),"betweennessNormalized")};return v.betweennessNormalised=v.betweennessNormalized,v}),"betweennessCentrality")};gS.bc=gS.betweennessCentrality;var uEe=Jn({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),hEe=l((function(t){return uEe(t)}),"setOptions"),dEe=l((function(t,e){for(var r=0,n=0;n<e.length;n++)r+=e[n](t);return r}),"getSimilarity"),pEe=l((function(t,e,r){for(var n=0;n<e;n++)t[n*e+n]=r}),"addLoops"),Bae=l((function(t,e){for(var r,n=0;n<e;n++){r=0;for(var i=0;i<e;i++)r+=t[i*e+n];for(var a=0;a<e;a++)t[a*e+n]=t[a*e+n]/r}}),"normalize"),fEe=l((function(t,e,r){for(var n=new Array(r*r),i=0;i<r;i++){for(var a=0;a<r;a++)n[i*r+a]=0;for(var s=0;s<r;s++)for(var o=0;o<r;o++)n[i*r+o]+=t[i*r+s]*e[s*r+o]}return n}),"mmult"),gEe=l((function(t,e,r){for(var n=t.slice(0),i=1;i<r;i++)t=fEe(t,n,e);return t}),"expand"),mEe=l((function(t,e,r){for(var n=new Array(e*e),i=0;i<e*e;i++)n[i]=Math.pow(t[i],r);return Bae(n,e),n}),"inflate"),yEe=l((function(t,e,r,n){for(var i=0;i<r;i++)if(Math.round(t[i]*Math.pow(10,n))/Math.pow(10,n)!==Math.round(e[i]*Math.pow(10,n))/Math.pow(10,n))return!1;return!0}),"hasConverged"),vEe=l((function(t,e,r,n){for(var i=[],a=0;a<e;a++){for(var s=[],o=0;o<e;o++)Math.round(1e3*t[a*e+o])/1e3>0&&s.push(r[o]);s.length!==0&&i.push(n.collection(s))}return i}),"assign"),xEe=l((function(t,e){for(var r=0;r<t.length;r++)if(!e[r]||t[r].id()!==e[r].id())return!1;return!0}),"isDuplicate"),bEe=l((function(t){for(var e=0;e<t.length;e++)for(var r=0;r<t.length;r++)e!=r&&xEe(t[e],t[r])&&t.splice(r,1);return t}),"removeDuplicates"),uP=l((function(t){for(var e=this.nodes(),r=this.edges(),n=this.cy(),i=hEe(t),a={},s=0;s<e.length;s++)a[e[s].id()]=s;for(var o,u=e.length,h=u*u,d=new Array(h),p=0;p<h;p++)d[p]=0;for(var f=0;f<r.length;f++){var g=r[f],m=a[g.source().id()],y=a[g.target().id()],v=dEe(g,i.attributes);d[m*u+y]+=v,d[y*u+m]+=v}pEe(d,u,i.multFactor),Bae(d,u);for(var x=!0,b=0;x&&b<i.maxIterations;)x=!1,o=gEe(d,u,i.expandFactor),d=mEe(o,u,i.inflateFactor),yEe(d,o,h,4)||(x=!0),b++;var w=vEe(d,u,e,n);return w=bEe(w)}),"markovClustering"),wEe={markovClustering:uP,mcl:uP},kEe=l((function(t){return t}),"identity"),$ae=l((function(t,e){return Math.abs(e-t)}),"absDiff"),hP=l((function(t,e,r){return t+$ae(e,r)}),"addAbsDiff"),dP=l((function(t,e,r){return t+Math.pow(r-e,2)}),"addSquaredDiff"),TEe=l((function(t){return Math.sqrt(t)}),"sqrt"),EEe=l((function(t,e,r){return Math.max(t,$ae(e,r))}),"maxAbsDiff"),Fm=l((function(t,e,r,n,i){for(var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:kEe,s=n,o=0;o<t;o++)s=i(s,e(o),r(o));return a(s)}),"getDistance"),Ud={euclidean:l((function(t,e,r){return t>=2?Fm(t,e,r,0,dP,TEe):Fm(t,e,r,0,hP)}),"euclidean"),squaredEuclidean:l((function(t,e,r){return Fm(t,e,r,0,dP)}),"squaredEuclidean"),manhattan:l((function(t,e,r){return Fm(t,e,r,0,hP)}),"manhattan"),max:l((function(t,e,r){return Fm(t,e,r,-1/0,EEe)}),"max")};function nx(t,e,r,n,i,a){var s;return s=tn(t)?t:Ud[t]||Ud.euclidean,e===0&&tn(t)?s(i,a):s(e,r,n,i,a)}Ud["squared-euclidean"]=Ud.squaredEuclidean,Ud.squaredeuclidean=Ud.squaredEuclidean,l(nx,"clusteringDistance");var _Ee=Jn({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),BN=l((function(t){return _Ee(t)}),"setOptions"),l6=l((function(t,e,r,n,i){var a=i!=="kMedoids"?function(h){return r[h]}:function(h){return n[h](r)},s=l((function(h){return n[h](e)}),"getQ"),o=r,u=e;return nx(t,n.length,a,s,o,u)}),"getDist"),RT=l((function(t,e,r){for(var n=r.length,i=new Array(n),a=new Array(n),s=new Array(e),o=null,u=0;u<n;u++)i[u]=t.min(r[u]).value,a[u]=t.max(r[u]).value;for(var h=0;h<e;h++){o=[];for(var d=0;d<n;d++)o[d]=Math.random()*(a[d]-i[d])+i[d];s[h]=o}return s}),"randomCentroids"),Fae=l((function(t,e,r,n,i){for(var a=1/0,s=0,o=0;o<e.length;o++){var u=l6(r,t,e[o],n,i);u<a&&(a=u,s=o)}return s}),"classify"),zae=l((function(t,e,r){for(var n=[],i=null,a=0;a<e.length;a++)r[(i=e[a]).id()]===t&&n.push(i);return n}),"buildCluster"),CEe=l((function(t,e,r){return Math.abs(e-t)<=r}),"haveValuesConverged"),SEe=l((function(t,e,r){for(var n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)if(Math.abs(t[n][i]-e[n][i])>r)return!1;return!0}),"haveMatricesConverged"),AEe=l((function(t,e,r){for(var n=0;n<r;n++)if(t===e[n])return!0;return!1}),"seenBefore"),pP=l((function(t,e){var r=new Array(e);if(t.length<50)for(var n=0;n<e;n++){for(var i=t[Math.floor(Math.random()*t.length)];AEe(i,r,n);)i=t[Math.floor(Math.random()*t.length)];r[n]=i}else for(var a=0;a<e;a++)r[a]=t[Math.floor(Math.random()*t.length)];return r}),"randomMedoids"),fP=l((function(t,e,r){for(var n=0,i=0;i<e.length;i++)n+=l6("manhattan",e[i],t,r,"kMedoids");return n}),"findCost"),LEe=l((function(t){var e,r=this.cy(),n=this.nodes(),i=null,a=BN(t),s=new Array(a.k),o={};a.testMode?typeof a.testCentroids=="number"?(a.testCentroids,e=RT(n,a.k,a.attributes)):e=Un(a.testCentroids)==="object"?a.testCentroids:RT(n,a.k,a.attributes):e=RT(n,a.k,a.attributes);for(var u=!0,h=0;u&&h<a.maxIterations;){for(var d=0;d<n.length;d++)o[(i=n[d]).id()]=Fae(i,e,a.distance,a.attributes,"kMeans");u=!1;for(var p=0;p<a.k;p++){var f=zae(p,n,o);if(f.length!==0){for(var g=a.attributes.length,m=e[p],y=new Array(g),v=new Array(g),x=0;x<g;x++){v[x]=0;for(var b=0;b<f.length;b++)i=f[b],v[x]+=a.attributes[x](i);y[x]=v[x]/f.length,CEe(y[x],m[x],a.sensitivityThreshold)||(u=!0)}e[p]=y,s[p]=r.collection(f)}}h++}return s}),"kMeans"),NEe=l((function(t){var e,r,n=this.cy(),i=this.nodes(),a=null,s=BN(t),o=new Array(s.k),u={},h=new Array(s.k);s.testMode?typeof s.testCentroids=="number"||(e=Un(s.testCentroids)==="object"?s.testCentroids:pP(i,s.k)):e=pP(i,s.k);for(var d=!0,p=0;d&&p<s.maxIterations;){for(var f=0;f<i.length;f++)u[(a=i[f]).id()]=Fae(a,e,s.distance,s.attributes,"kMedoids");d=!1;for(var g=0;g<e.length;g++){var m=zae(g,i,u);if(m.length!==0){h[g]=fP(e[g],m,s.attributes);for(var y=0;y<m.length;y++)(r=fP(m[y],m,s.attributes))<h[g]&&(h[g]=r,e[g]=m[y],d=!0);o[g]=n.collection(m)}}p++}return o}),"kMedoids"),IEe=l((function(t,e,r,n,i){for(var a,s,o=0;o<e.length;o++)for(var u=0;u<t.length;u++)n[o][u]=Math.pow(r[o][u],i.m);for(var h=0;h<t.length;h++)for(var d=0;d<i.attributes.length;d++){a=0,s=0;for(var p=0;p<e.length;p++)a+=n[p][h]*i.attributes[d](e[p]),s+=n[p][h];t[h][d]=a/s}}),"updateCentroids"),REe=l((function(t,e,r,n,i){for(var a=0;a<t.length;a++)e[a]=t[a].slice();for(var s,o,u,h=2/(i.m-1),d=0;d<r.length;d++)for(var p=0;p<n.length;p++){s=0;for(var f=0;f<r.length;f++)o=l6(i.distance,n[p],r[d],i.attributes,"cmeans"),u=l6(i.distance,n[p],r[f],i.attributes,"cmeans"),s+=Math.pow(o/u,h);t[p][d]=1/s}}),"updateMembership"),MEe=l((function(t,e,r,n){for(var i,a,s=new Array(r.k),o=0;o<s.length;o++)s[o]=[];for(var u=0;u<e.length;u++){i=-1/0,a=-1;for(var h=0;h<e[0].length;h++)e[u][h]>i&&(i=e[u][h],a=h);s[a].push(t[u])}for(var d=0;d<s.length;d++)s[d]=n.collection(s[d]);return s}),"assign"),gP=l((function(t){var e,r,n,i,a=this.cy(),s=this.nodes(),o=BN(t);n=new Array(s.length);for(var u=0;u<s.length;u++)n[u]=new Array(o.k);r=new Array(s.length);for(var h=0;h<s.length;h++)r[h]=new Array(o.k);for(var d=0;d<s.length;d++){for(var p=0,f=0;f<o.k;f++)r[d][f]=Math.random(),p+=r[d][f];for(var g=0;g<o.k;g++)r[d][g]=r[d][g]/p}e=new Array(o.k);for(var m=0;m<o.k;m++)e[m]=new Array(o.attributes.length);i=new Array(s.length);for(var y=0;y<s.length;y++)i[y]=new Array(o.k);for(var v=!0,x=0;v&&x<o.maxIterations;)v=!1,IEe(e,s,r,i,o),REe(r,n,e,s,o),SEe(r,n,o.sensitivityThreshold)||(v=!0),x++;return{clusters:MEe(s,r,o,a),degreeOfMembership:r}}),"fuzzyCMeans"),DEe={kMeans:LEe,kMedoids:NEe,fuzzyCMeans:gP,fcm:gP},OEe=Jn({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),PEe={single:"min",complete:"max"},BEe=l((function(t){var e=OEe(t),r=PEe[e.linkage];return r!=null&&(e.linkage=r),e}),"setOptions"),mP=l((function(t,e,r,n,i){for(var a,s=0,o=1/0,u=i.attributes,h=l((function(E,_){return nx(i.distance,u.length,(function(S){return u[S](E)}),(function(S){return u[S](_)}),E,_)}),"getDist"),d=0;d<t.length;d++){var p=t[d].key,f=r[p][n[p]];f<o&&(s=p,o=f)}if(i.mode==="threshold"&&o>=i.threshold||i.mode==="dendrogram"&&t.length===1)return!1;var g,m=e[s],y=e[n[s]];g=i.mode==="dendrogram"?{left:m,right:y,key:m.key}:{value:m.value.concat(y.value),key:m.key},t[m.index]=g,t.splice(y.index,1),e[m.key]=g;for(var v=0;v<t.length;v++){var x=t[v];m.key===x.key?a=1/0:i.linkage==="min"?(a=r[m.key][x.key],r[m.key][x.key]>r[y.key][x.key]&&(a=r[y.key][x.key])):i.linkage==="max"?(a=r[m.key][x.key],r[m.key][x.key]<r[y.key][x.key]&&(a=r[y.key][x.key])):a=i.linkage==="mean"?(r[m.key][x.key]*m.size+r[y.key][x.key]*y.size)/(m.size+y.size):i.mode==="dendrogram"?h(x.value,m.value):h(x.value[0],m.value[0]),r[m.key][x.key]=r[x.key][m.key]=a}for(var b=0;b<t.length;b++){var w=t[b].key;if(n[w]===m.key||n[w]===y.key){for(var T=w,k=0;k<t.length;k++){var C=t[k].key;r[w][C]<r[w][T]&&(T=C)}n[w]=T}t[b].index=b}return m.key=y.key=m.index=y.index=null,!0}),"mergeClosest"),Xx=l((function t(e,r,n){e&&(e.value?r.push(e.value):(e.left&&t(e.left,r),e.right&&t(e.right,r)))}),"getAllChildren"),$Ee=l((function t(e,r){if(!e)return"";if(e.left&&e.right){var n=t(e.left,r),i=t(e.right,r),a=r.add({group:"nodes",data:{id:n+","+i}});return r.add({group:"edges",data:{source:n,target:a.id()}}),r.add({group:"edges",data:{source:i,target:a.id()}}),a.id()}return e.value?e.value.id():void 0}),"buildDendrogram"),FEe=l((function t(e,r,n){if(!e)return[];var i=[],a=[],s=[];return r===0?(e.left&&Xx(e.left,i),e.right&&Xx(e.right,a),s=i.concat(a),[n.collection(s)]):r===1?e.value?[n.collection(e.value)]:(e.left&&Xx(e.left,i),e.right&&Xx(e.right,a),[n.collection(i),n.collection(a)]):e.value?[n.collection(e.value)]:(e.left&&(i=t(e.left,r-1,n)),e.right&&(a=t(e.right,r-1,n)),i.concat(a))}),"buildClustersFromTree"),yP=l((function(t){for(var e=this.cy(),r=this.nodes(),n=BEe(t),i=n.attributes,a=l((function(x,b){return nx(n.distance,i.length,(function(w){return i[w](x)}),(function(w){return i[w](b)}),x,b)}),"getDist"),s=[],o=[],u=[],h=[],d=0;d<r.length;d++){var p={value:n.mode==="dendrogram"?r[d]:[r[d]],key:d,index:d};s[d]=p,h[d]=p,o[d]=[],u[d]=0}for(var f=0;f<s.length;f++)for(var g=0;g<=f;g++){var m=void 0;m=n.mode==="dendrogram"?f===g?1/0:a(s[f].value,s[g].value):f===g?1/0:a(s[f].value[0],s[g].value[0]),o[f][g]=m,o[g][f]=m,m<o[f][u[f]]&&(u[f]=g)}for(var y,v=mP(s,h,o,u,n);v;)v=mP(s,h,o,u,n);return n.mode==="dendrogram"?(y=FEe(s[0],n.dendrogramDepth,e),n.addDendrogram&&$Ee(s[0],e)):(y=new Array(s.length),s.forEach((function(x,b){x.key=x.index=null,y[b]=e.collection(x.value)}))),y}),"hierarchicalClustering"),zEe={hierarchicalClustering:yP,hca:yP},GEe=Jn({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),UEe=l((function(t){var e=t.damping,r=t.preference;.5<=e&&e<1||en("Damping must range on [0.5, 1).  Got: ".concat(e));var n=["median","mean","min","max"];return n.some((function(i){return i===r}))||ct(r)||en("Preference must be one of [".concat(n.map((function(i){return"'".concat(i,"'")})).join(", "),"] or a number.  Got: ").concat(r)),GEe(t)}),"setOptions"),qEe=l((function(t,e,r,n){var i=l((function(a,s){return n[s](a)}),"attr");return-nx(t,n.length,(function(a){return i(e,a)}),(function(a){return i(r,a)}),e,r)}),"getSimilarity"),jEe=l((function(t,e){return e==="median"?UTe(t):e==="mean"?GTe(t):e==="min"?FTe(t):e==="max"?zTe(t):e}),"getPreference"),WEe=l((function(t,e,r){for(var n=[],i=0;i<t;i++)e[i*t+i]+r[i*t+i]>0&&n.push(i);return n}),"findExemplars"),vP=l((function(t,e,r){for(var n=[],i=0;i<t;i++){for(var a=-1,s=-1/0,o=0;o<r.length;o++){var u=r[o];e[i*t+u]>s&&(a=u,s=e[i*t+u])}a>0&&n.push(a)}for(var h=0;h<r.length;h++)n[r[h]]=r[h];return n}),"assignClusters"),YEe=l((function(t,e,r){for(var n=vP(t,e,r),i=0;i<r.length;i++){for(var a=[],s=0;s<n.length;s++)n[s]===r[i]&&a.push(s);for(var o=-1,u=-1/0,h=0;h<a.length;h++){for(var d=0,p=0;p<a.length;p++)d+=e[a[p]*t+a[h]];d>u&&(o=h,u=d)}r[i]=a[o]}return n=vP(t,e,r)}),"assign"),xP=l((function(t){for(var e,r,n,i,a,s,o=this.cy(),u=this.nodes(),h=UEe(t),d={},p=0;p<u.length;p++)d[u[p].id()]=p;r=(e=u.length)*e,n=new Array(r);for(var f=0;f<r;f++)n[f]=-1/0;for(var g=0;g<e;g++)for(var m=0;m<e;m++)g!==m&&(n[g*e+m]=qEe(h.distance,u[g],u[m],h.attributes));i=jEe(n,h.preference);for(var y=0;y<e;y++)n[y*e+y]=i;a=new Array(r);for(var v=0;v<r;v++)a[v]=0;s=new Array(r);for(var x=0;x<r;x++)s[x]=0;for(var b=new Array(e),w=new Array(e),T=new Array(e),k=0;k<e;k++)b[k]=0,w[k]=0,T[k]=0;for(var C,E=new Array(e*h.minIterations),_=0;_<E.length;_++)E[_]=0;for(C=0;C<h.maxIterations;C++){for(var S=0;S<e;S++){for(var N=-1/0,O=-1/0,B=-1,L=0,I=0;I<e;I++)b[I]=a[S*e+I],(L=s[S*e+I]+n[S*e+I])>=N?(O=N,N=L,B=I):L>O&&(O=L);for(var A=0;A<e;A++)a[S*e+A]=(1-h.damping)*(n[S*e+A]-N)+h.damping*b[A];a[S*e+B]=(1-h.damping)*(n[S*e+B]-O)+h.damping*b[B]}for(var M=0;M<e;M++){for(var D=0,R=0;R<e;R++)b[R]=s[R*e+M],w[R]=Math.max(0,a[R*e+M]),D+=w[R];D-=w[M],w[M]=a[M*e+M],D+=w[M];for(var P=0;P<e;P++)s[P*e+M]=(1-h.damping)*Math.min(0,D-w[P])+h.damping*b[P];s[M*e+M]=(1-h.damping)*(D-w[M])+h.damping*b[M]}for(var $=0,z=0;z<e;z++){var q=s[z*e+z]+a[z*e+z]>0?1:0;E[C%h.minIterations*e+z]=q,$+=q}if($>0&&(C>=h.minIterations-1||C==h.maxIterations-1)){for(var W=0,Q=0;Q<e;Q++){T[Q]=0;for(var te=0;te<h.minIterations;te++)T[Q]+=E[te*e+Q];T[Q]!==0&&T[Q]!==h.minIterations||W++}if(W===e)break}}for(var oe=WEe(e,a,s),re=YEe(e,n,oe),H={},K=0;K<oe.length;K++)H[oe[K]]=[];for(var ie=0;ie<u.length;ie++){var ne=re[d[u[ie].id()]];ne!=null&&H[ne].push(u[ie])}for(var J=new Array(oe.length),ue=0;ue<oe.length;ue++)J[ue]=o.collection(H[oe[ue]]);return J}),"affinityPropagation"),VEe={affinityPropagation:xP,ap:xP},HEe=Jn({root:void 0,directed:!1}),XEe={hierholzer:l((function(t){if(!ur(t)){var e=arguments;t={root:e[0],directed:e[1]}}var r,n,i,a=HEe(t),s=a.root,o=a.directed,u=this,h=!1;s&&(i=Ot(s)?this.filter(s)[0].id():s[0].id());var d={},p={};o?u.forEach((function(x){var b=x.id();if(x.isNode()){var w=x.indegree(!0),T=x.outdegree(!0),k=w-T,C=T-w;k==1?r?h=!0:r=b:C==1?n?h=!0:n=b:(C>1||k>1)&&(h=!0),d[b]=[],x.outgoers().forEach((function(E){E.isEdge()&&d[b].push(E.id())}))}else p[b]=[void 0,x.target().id()]})):u.forEach((function(x){var b=x.id();x.isNode()?(x.degree(!0)%2&&(r?n?h=!0:n=b:r=b),d[b]=[],x.connectedEdges().forEach((function(w){return d[b].push(w.id())}))):p[b]=[x.source().id(),x.target().id()]}));var f={found:!1,trail:void 0};if(h)return f;if(n&&r)if(o){if(i&&n!=i)return f;i=n}else{if(i&&n!=i&&r!=i)return f;i||(i=n)}else i||(i=u[0].id());var g=l((function(x){for(var b,w,T,k=x,C=[x];d[k].length;)b=d[k].shift(),w=p[b][0],k!=(T=p[b][1])?(d[T]=d[T].filter((function(E){return E!=b})),k=T):o||k==w||(d[w]=d[w].filter((function(E){return E!=b})),k=w),C.unshift(b),C.unshift(k);return C}),"walk"),m=[],y=[];for(y=g(i);y.length!=1;)d[y[0]].length==0?(m.unshift(u.getElementById(y.shift())),m.unshift(u.getElementById(y.shift()))):y=g(y.shift()).concat(y);for(var v in m.unshift(u.getElementById(y.shift())),d)if(d[v].length)return f;return f.found=!0,f.trail=this.spawn(m,!0),f}),"hierholzer")},Kx=l((function(){var t=this,e={},r=0,n=0,i=[],a=[],s={},o=l((function(d,p){for(var f=a.length-1,g=[],m=t.spawn();a[f].x!=d||a[f].y!=p;)g.push(a.pop().edge),f--;g.push(a.pop().edge),g.forEach((function(y){var v=y.connectedNodes().intersection(t);m.merge(y),v.forEach((function(x){var b=x.id(),w=x.connectedEdges().intersection(t);m.merge(x),e[b].cutVertex?m.merge(w.filter((function(T){return T.isLoop()}))):m.merge(w)}))})),i.push(m)}),"buildComponent"),u=l((function d(p,f,g){p===g&&(n+=1),e[f]={id:r,low:r++,cutVertex:!1};var m,y,v,x,b=t.getElementById(f).connectedEdges().intersection(t);b.size()===0?i.push(t.spawn(t.getElementById(f))):b.forEach((function(w){m=w.source().id(),y=w.target().id(),(v=m===f?y:m)!==g&&(x=w.id(),s[x]||(s[x]=!0,a.push({x:f,y:v,edge:w})),v in e?e[f].low=Math.min(e[f].low,e[v].id):(d(p,v,f),e[f].low=Math.min(e[f].low,e[v].low),e[f].id<=e[v].low&&(e[f].cutVertex=!0,o(f,v))))}))}),"biconnectedSearch");t.forEach((function(d){if(d.isNode()){var p=d.id();p in e||(n=0,u(p,p),e[p].cutVertex=n>1)}}));var h=Object.keys(e).filter((function(d){return e[d].cutVertex})).map((function(d){return t.getElementById(d)}));return{cut:t.spawn(h),components:i}}),"hopcroftTarjanBiconnected"),KEe={hopcroftTarjanBiconnected:Kx,htbc:Kx,htb:Kx,hopcroftTarjanBiconnectedComponents:Kx},Zx=l((function(){var t=this,e={},r=0,n=[],i=[],a=t.spawn(t),s=l((function o(u){if(i.push(u),e[u]={index:r,low:r++,explored:!1},t.getElementById(u).connectedEdges().intersection(t).forEach((function(g){var m=g.target().id();m!==u&&(m in e||o(m),e[m].explored||(e[u].low=Math.min(e[u].low,e[m].low)))})),e[u].index===e[u].low){for(var h=t.spawn();;){var d=i.pop();if(h.merge(t.getElementById(d)),e[d].low=e[u].index,e[d].explored=!0,d===u)break}var p=h.edgesWith(h),f=h.merge(p);n.push(f),a=a.difference(f)}}),"stronglyConnectedSearch");return t.forEach((function(o){if(o.isNode()){var u=o.id();u in e||s(u)}})),{cut:a,components:n}}),"tarjanStronglyConnected"),Gae={};[py,STe,ATe,NTe,RTe,DTe,BTe,lEe,jh,Wh,gS,wEe,DEe,zEe,VEe,XEe,KEe,{tarjanStronglyConnected:Zx,tsc:Zx,tscc:Zx,tarjanStronglyConnectedComponents:Zx}].forEach((function(t){Gt(Gae,t)}));var Co=l((function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))}),"api");Co.prototype={fulfill:l((function(t){return bP(this,1,"fulfillValue",t)}),"fulfill"),reject:l((function(t){return bP(this,2,"rejectReason",t)}),"reject"),then:l((function(t,e){var r=this,n=new Co;return r.onFulfilled.push(kP(t,n,"fulfill")),r.onRejected.push(kP(e,n,"reject")),Uae(r),n.proxy}),"then")};var bP=l((function(t,e,r,n){return t.state===0&&(t.state=e,t[r]=n,Uae(t)),t}),"deliver"),Uae=l((function(t){t.state===1?wP(t,"onFulfilled",t.fulfillValue):t.state===2&&wP(t,"onRejected",t.rejectReason)}),"execute"),wP=l((function(t,e,r){if(t[e].length!==0){var n=t[e];t[e]=[];var i=l((function(){for(var a=0;a<n.length;a++)n[a](r)}),"func");typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}}),"execute_handlers"),kP=l((function(t,e,r){return function(n){if(typeof t!="function")e[r].call(e,n);else{var i;try{i=t(n)}catch(a){return void e.reject(a)}ZEe(e,i)}}}),"resolver"),ZEe=l((function t(e,r){if(e!==r&&e.proxy!==r){var n;if(Un(r)==="object"&&r!==null||typeof r=="function")try{n=r.then}catch(a){return void e.reject(a)}if(typeof n!="function")e.fulfill(r);else{var i=!1;try{n.call(r,(function(a){i||(i=!0,a===r?e.reject(new TypeError("circular thenable chain")):t(e,a))}),(function(a){i||(i=!0,e.reject(a))}))}catch(a){i||e.reject(a)}}}else e.reject(new TypeError("cannot resolve promise with itself"))}),"resolve");Co.all=function(t){return new Co((function(e,r){for(var n=new Array(t.length),i=0,a=l((function(o,u){n[o]=u,++i===t.length&&e(n)}),"fulfill"),s=0;s<t.length;s++)(function(o){var u=t[o];u!=null&&u.then!=null?u.then((function(h){a(o,h)}),(function(h){r(h)})):a(o,u)})(s)}))},Co.resolve=function(t){return new Co((function(e,r){e(t)}))},Co.reject=function(t){return new Co((function(e,r){r(t)}))};var Tm=typeof Promise<"u"?Promise:Co,mS=l((function(t,e,r){var n=LN(t),i=!n,a=this._private=Gt({duration:1e3},e,r);if(a.target=t,a.style=a.style||a.css,a.started=!1,a.playing=!1,a.hooked=!1,a.applying=!1,a.progress=0,a.completes=[],a.frames=[],a.complete&&tn(a.complete)&&a.completes.push(a.complete),i){var s=t.position();a.startPosition=a.startPosition||{x:s.x,y:s.y},a.startStyle=a.startStyle||t.cy().style().getAnimationStartStyle(t,a.style)}if(n){var o=t.pan();a.startPan={x:o.x,y:o.y},a.startZoom=t.zoom()}this.length=1,this[0]=this}),"Animation"),Cc=mS.prototype;Gt(Cc,{instanceString:l((function(){return"animation"}),"instanceString"),hook:l((function(){var t=this._private;if(!t.hooked){var e=t.target._private.animation;(t.queue?e.queue:e.current).push(this),Ta(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this}),"hook"),play:l((function(){var t=this._private;return t.progress===1&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this}),"play"),playing:l((function(){return this._private.playing}),"playing"),apply:l((function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this}),"apply"),applying:l((function(){return this._private.applying}),"applying"),pause:l((function(){var t=this._private;return t.playing=!1,t.started=!1,this}),"pause"),stop:l((function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this}),"stop"),rewind:l((function(){return this.progress(0)}),"rewind"),fastforward:l((function(){return this.progress(1)}),"fastforward"),time:l((function(t){var e=this._private;return t===void 0?e.progress*e.duration:this.progress(t/e.duration)}),"time"),progress:l((function(t){var e=this._private,r=e.playing;return t===void 0?e.progress:(r&&this.pause(),e.progress=t,e.started=!1,r&&this.play(),this)}),"progress"),completed:l((function(){return this._private.progress===1}),"completed"),reverse:l((function(){var t=this._private,e=t.playing;e&&this.pause(),t.progress=1-t.progress,t.started=!1;var r=l((function(o,u){var h=t[o];h!=null&&(t[o]=t[u],t[u]=h)}),"swap");if(r("zoom","startZoom"),r("pan","startPan"),r("position","startPosition"),t.style)for(var n=0;n<t.style.length;n++){var i=t.style[n],a=i.name,s=t.startStyle[a];t.startStyle[a]=i,t.style[n]=s}return e&&this.play(),this}),"reverse"),promise:l((function(t){var e,r=this._private;return t==="frame"?e=r.frames:e=r.completes,new Tm((function(n,i){e.push((function(){n()}))}))}),"promise")}),Cc.complete=Cc.completed,Cc.run=Cc.play,Cc.running=Cc.playing;var QEe={animated:l((function(){return l((function(){var t=this,e=t.length!==void 0?t:[t];if(!(this._private.cy||this).styleEnabled())return!1;var r=e[0];return r?r._private.animation.current.length>0:void 0}),"animatedImpl")}),"animated"),clearQueue:l((function(){return l((function(){var t=this,e=t.length!==void 0?t:[t];if(!(this._private.cy||this).styleEnabled())return this;for(var r=0;r<e.length;r++)e[r]._private.animation.queue=[];return this}),"clearQueueImpl")}),"clearQueue"),delay:l((function(){return l((function(t,e){return(this._private.cy||this).styleEnabled()?this.animate({delay:t,duration:t,complete:e}):this}),"delayImpl")}),"delay"),delayAnimation:l((function(){return l((function(t,e){return(this._private.cy||this).styleEnabled()?this.animation({delay:t,duration:t,complete:e}):this}),"delayAnimationImpl")}),"delayAnimation"),animation:l((function(){return l((function(t,e){var r=this,n=r.length!==void 0,i=n?r:[r],a=this._private.cy||this,s=!n,o=!s;if(!a.styleEnabled())return this;var u=a.style();if(t=Gt({},t,e),Object.keys(t).length===0)return new mS(i[0],t);switch(t.duration===void 0&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}if(o&&(t.style=u.getPropsList(t.style||t.css),t.css=void 0),o&&t.renderedPosition!=null){var h=t.renderedPosition,d=a.pan(),p=a.zoom();t.position=Rae(h,p,d)}if(s&&t.panBy!=null){var f=t.panBy,g=a.pan();t.pan={x:g.x+f.x,y:g.y+f.y}}var m=t.center||t.centre;if(s&&m!=null){var y=a.getCenterPan(m.eles,t.zoom);y!=null&&(t.pan=y)}if(s&&t.fit!=null){var v=t.fit,x=a.getFitViewport(v.eles||v.boundingBox,v.padding);x!=null&&(t.pan=x.pan,t.zoom=x.zoom)}if(s&&ur(t.zoom)){var b=a.getZoomedViewport(t.zoom);b!=null?(b.zoomed&&(t.zoom=b.zoom),b.panned&&(t.pan=b.pan)):t.zoom=null}return new mS(i[0],t)}),"animationImpl")}),"animation"),animate:l((function(){return l((function(t,e){var r=this,n=r.length!==void 0?r:[r];if(!(this._private.cy||this).styleEnabled())return this;e&&(t=Gt({},t,e));for(var i=0;i<n.length;i++){var a=n[i],s=a.animated()&&(t.queue===void 0||t.queue);a.animation(t,s?{queue:!0}:void 0).play()}return this}),"animateImpl")}),"animate"),stop:l((function(){return l((function(t,e){var r=this,n=r.length!==void 0?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var a=0;a<n.length;a++){for(var s=n[a]._private,o=s.animation.current,u=0;u<o.length;u++){var h=o[u]._private;e&&(h.duration=0)}t&&(s.animation.queue=[]),e||(s.animation.current=[])}return i.notify("draw"),this}),"stopImpl")}),"stop")},ak=Array.isArray,JEe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,e_e=/^\w*$/;function qae(t,e){if(ak(t))return!1;var r=typeof t;return!(r!="number"&&r!="symbol"&&r!="boolean"&&t!=null&&!ex(t))||e_e.test(t)||!JEe.test(t)||e!=null&&t in Object(e)}l(qae,"isKey");var t_e=qae;function jae(t){if(!eh(t))return!1;var e=xae(t);return e=="[object Function]"||e=="[object GeneratorFunction]"||e=="[object AsyncFunction]"||e=="[object Proxy]"}l(jae,"isFunction");var r_e=jae,MT=rk["__core-js_shared__"],TP=(function(){var t=/[^.]+$/.exec(MT&&MT.keys&&MT.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function Wae(t){return!!TP&&TP in t}l(Wae,"isMasked");var n_e=Wae,i_e=Function.prototype.toString;function Yae(t){if(t!=null){try{return i_e.call(t)}catch{}try{return t+""}catch{}}return""}l(Yae,"toSource");var a_e=Yae,s_e=/^\[object .+?Constructor\]$/,o_e=Function.prototype,l_e=Object.prototype,c_e=o_e.toString,u_e=l_e.hasOwnProperty,h_e=RegExp("^"+c_e.call(u_e).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Vae(t){return!(!eh(t)||n_e(t))&&(r_e(t)?h_e:s_e).test(a_e(t))}l(Vae,"baseIsNative");var d_e=Vae;function Hae(t,e){return t?.[e]}l(Hae,"getValue$1");var p_e=Hae;function Xae(t,e){var r=p_e(t,e);return d_e(r)?r:void 0}l(Xae,"getNative");var $N=Xae,iv=$N(Object,"create");function Kae(){this.__data__=iv?iv(null):{},this.size=0}l(Kae,"hashClear");var f_e=Kae;function Zae(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}l(Zae,"hashDelete");var g_e=Zae,m_e=Object.prototype.hasOwnProperty;function Qae(t){var e=this.__data__;if(iv){var r=e[t];return r==="__lodash_hash_undefined__"?void 0:r}return m_e.call(e,t)?e[t]:void 0}l(Qae,"hashGet");var y_e=Qae,v_e=Object.prototype.hasOwnProperty;function Jae(t){var e=this.__data__;return iv?e[t]!==void 0:v_e.call(e,t)}l(Jae,"hashHas");var x_e=Jae;function ese(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=iv&&e===void 0?"__lodash_hash_undefined__":e,this}l(ese,"hashSet");var b_e=ese;function Uc(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}l(Uc,"Hash"),Uc.prototype.clear=f_e,Uc.prototype.delete=g_e,Uc.prototype.get=y_e,Uc.prototype.has=x_e,Uc.prototype.set=b_e;var EP=Uc;function tse(){this.__data__=[],this.size=0}l(tse,"listCacheClear");var w_e=tse;function rse(t,e){return t===e||t!=t&&e!=e}l(rse,"eq");var nse=rse;function ise(t,e){for(var r=t.length;r--;)if(nse(t[r][0],e))return r;return-1}l(ise,"assocIndexOf");var sk=ise,k_e=Array.prototype.splice;function ase(t){var e=this.__data__,r=sk(e,t);return!(r<0)&&(r==e.length-1?e.pop():k_e.call(e,r,1),--this.size,!0)}l(ase,"listCacheDelete");var T_e=ase;function sse(t){var e=this.__data__,r=sk(e,t);return r<0?void 0:e[r][1]}l(sse,"listCacheGet");var E_e=sse;function ose(t){return sk(this.__data__,t)>-1}l(ose,"listCacheHas");var __e=ose;function lse(t,e){var r=this.__data__,n=sk(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}l(lse,"listCacheSet");var C_e=lse;function qc(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}l(qc,"ListCache"),qc.prototype.clear=w_e,qc.prototype.delete=T_e,qc.prototype.get=E_e,qc.prototype.has=__e,qc.prototype.set=C_e;var S_e=qc,A_e=$N(rk,"Map");function cse(){this.size=0,this.__data__={hash:new EP,map:new(A_e||S_e),string:new EP}}l(cse,"mapCacheClear");var L_e=cse;function use(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}l(use,"isKeyable");var N_e=use;function hse(t,e){var r=t.__data__;return N_e(e)?r[typeof e=="string"?"string":"hash"]:r.map}l(hse,"getMapData");var ok=hse;function dse(t){var e=ok(this,t).delete(t);return this.size-=e?1:0,e}l(dse,"mapCacheDelete");var I_e=dse;function pse(t){return ok(this,t).get(t)}l(pse,"mapCacheGet");var R_e=pse;function fse(t){return ok(this,t).has(t)}l(fse,"mapCacheHas");var M_e=fse;function gse(t,e){var r=ok(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}l(gse,"mapCacheSet");var D_e=gse;function jc(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}l(jc,"MapCache"),jc.prototype.clear=L_e,jc.prototype.delete=I_e,jc.prototype.get=R_e,jc.prototype.has=M_e,jc.prototype.set=D_e;var mse=jc;function c6(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var r=l((function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var s=t.apply(this,n);return r.cache=a.set(i,s)||a,s}),"memoized");return r.cache=new(c6.Cache||mse),r}l(c6,"memoize"),c6.Cache=mse;var O_e=c6;function yse(t){var e=O_e(t,(function(n){return r.size===500&&r.clear(),n})),r=e.cache;return e}l(yse,"memoizeCapped");var P_e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,B_e=/\\(\\)?/g,$_e=yse((function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(P_e,(function(r,n,i,a){e.push(i?a.replace(B_e,"$1"):n||r)})),e})),vse=$_e;function xse(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}l(xse,"arrayMap");var bse=xse,_P=nm?nm.prototype:void 0,CP=_P?_P.toString:void 0;function FN(t){if(typeof t=="string")return t;if(ak(t))return bse(t,FN)+"";if(ex(t))return CP?CP.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}l(FN,"baseToString");var F_e=FN;function wse(t){return t==null?"":F_e(t)}l(wse,"toString$1");var kse=wse;function Tse(t,e){return ak(t)?t:t_e(t,e)?[t]:vse(kse(t))}l(Tse,"castPath");var Ese=Tse;function _se(t){if(typeof t=="string"||ex(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}l(_se,"toKey");var zN=_se;function Cse(t,e){for(var r=0,n=(e=Ese(e,t)).length;t!=null&&r<n;)t=t[zN(e[r++])];return r&&r==n?t:void 0}l(Cse,"baseGet");var z_e=Cse;function Sse(t,e,r){var n=t==null?void 0:z_e(t,e);return n===void 0?r:n}l(Sse,"get");var G_e=Sse,SP=(function(){try{var t=$N(Object,"defineProperty");return t({},"",{}),t}catch{}})();function Ase(t,e,r){e=="__proto__"&&SP?SP(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}l(Ase,"baseAssignValue");var U_e=Ase,q_e=Object.prototype.hasOwnProperty;function Lse(t,e,r){var n=t[e];q_e.call(t,e)&&nse(n,r)&&(r!==void 0||e in t)||U_e(t,e,r)}l(Lse,"assignValue");var j_e=Lse,W_e=/^(?:0|[1-9]\d*)$/;function Nse(t,e){var r=typeof t;return!!(e=e??9007199254740991)&&(r=="number"||r!="symbol"&&W_e.test(t))&&t>-1&&t%1==0&&t<e}l(Nse,"isIndex");var Y_e=Nse;function Ise(t,e,r,n){if(!eh(t))return t;for(var i=-1,a=(e=Ese(e,t)).length,s=a-1,o=t;o!=null&&++i<a;){var u=zN(e[i]),h=r;if(u==="__proto__"||u==="constructor"||u==="prototype")return t;if(i!=s){var d=o[u];(h=n?n(d,u,o):void 0)===void 0&&(h=eh(d)?d:Y_e(e[i+1])?[]:{})}j_e(o,u,h),o=o[u]}return t}l(Ise,"baseSet");var V_e=Ise;function Rse(t,e,r){return t==null?t:V_e(t,e,r)}l(Rse,"set");var H_e=Rse;function Mse(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}l(Mse,"copyArray");var X_e=Mse;function Dse(t){return ak(t)?bse(t,zN):ex(t)?[t]:X_e(vse(kse(t)))}l(Dse,"toPath");var K_e=Dse,Z_e={data:l((function(t){return t=Gt({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:l((function(e){}),"beforeGet"),beforeSet:l((function(e,r){}),"beforeSet"),onSet:l((function(e){}),"onSet"),canSet:l((function(e){return!0}),"canSet")},t),l((function(e,r){var n=t,i=this,a=i.length!==void 0,s=a?i:[i],o=a?i[0]:i;if(Ot(e)){var u,h=e.indexOf(".")!==-1&&K_e(e);if(n.allowGetting&&r===void 0)return o&&(n.beforeGet(o),u=h&&o._private[n.field][e]===void 0?G_e(o._private[n.field],h):o._private[n.field][e]),u;if(n.allowSetting&&r!==void 0&&!n.immutableKeys[e]){var d=SN({},e,r);n.beforeSet(i,d);for(var p=0,f=s.length;p<f;p++){var g=s[p];n.canSet(g)&&(h&&o._private[n.field][e]===void 0?H_e(g._private[n.field],h,r):g._private[n.field][e]=r)}n.updateStyle&&i.updateStyle(),n.onSet(i),n.settingTriggersEvent&&i[n.triggerFnName](n.settingEvent)}}else if(n.allowSetting&&ur(e)){var m,y,v=e,x=Object.keys(v);n.beforeSet(i,v);for(var b=0;b<x.length;b++)if(y=v[m=x[b]],!n.immutableKeys[m])for(var w=0;w<s.length;w++){var T=s[w];n.canSet(T)&&(T._private[n.field][m]=y)}n.updateStyle&&i.updateStyle(),n.onSet(i),n.settingTriggersEvent&&i[n.triggerFnName](n.settingEvent)}else if(n.allowBinding&&tn(e)){var k=e;i.on(n.bindingEvent,k)}else if(n.allowGetting&&e===void 0){var C;return o&&(n.beforeGet(o),C=o._private[n.field]),C}return i}),"dataImpl")}),"data"),removeData:l((function(t){return t=Gt({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},t),l((function(e){var r=t,n=this,i=n.length!==void 0?n:[n];if(Ot(e)){for(var a=e.split(/\s+/),s=a.length,o=0;o<s;o++){var u=a[o];if(!oc(u)&&!r.immutableKeys[u])for(var h=0,d=i.length;h<d;h++)i[h]._private[r.field][u]=void 0}r.triggerEvent&&n[r.triggerFnName](r.event)}else if(e===void 0){for(var p=0,f=i.length;p<f;p++)for(var g=i[p]._private[r.field],m=Object.keys(g),y=0;y<m.length;y++){var v=m[y];!r.immutableKeys[v]&&(g[v]=void 0)}r.triggerEvent&&n[r.triggerFnName](r.event)}return n}),"removeDataImpl")}),"removeData")},Q_e={eventAliasesOn:l((function(t){var e=t;e.addListener=e.listen=e.bind=e.on,e.unlisten=e.unbind=e.off=e.removeListener,e.trigger=e.emit,e.pon=e.promiseOn=function(r,n){var i=this,a=Array.prototype.slice.call(arguments,0);return new Tm((function(s,o){var u=l((function(p){i.off.apply(i,d),s(p)}),"callback"),h=a.concat([u]),d=h.concat([]);i.on.apply(i,h)}))}}),"eventAliasesOn")},br={};[QEe,Z_e,Q_e].forEach((function(t){Gt(br,t)}));var J_e={animate:br.animate(),animation:br.animation(),animated:br.animated(),clearQueue:br.clearQueue(),delay:br.delay(),delayAnimation:br.delayAnimation(),stop:br.stop()},s4={classes:l((function(t){var e=this;if(t===void 0){var r=[];return e[0]._private.classes.forEach((function(f){return r.push(f)})),r}Dr(t)||(t=(t||"").match(/\S+/g)||[]);for(var n=[],i=new km(t),a=0;a<e.length;a++){for(var s=e[a],o=s._private,u=o.classes,h=!1,d=0;d<t.length;d++){var p=t[d];if(!u.has(p)){h=!0;break}}h||(h=u.size!==t.length),h&&(o.classes=i,n.push(s))}return n.length>0&&this.spawn(n).updateStyle().emit("class"),e}),"classes"),addClass:l((function(t){return this.toggleClass(t,!0)}),"addClass"),hasClass:l((function(t){var e=this[0];return e!=null&&e._private.classes.has(t)}),"hasClass"),toggleClass:l((function(t,e){Dr(t)||(t=t.match(/\S+/g)||[]);for(var r=this,n=e===void 0,i=[],a=0,s=r.length;a<s;a++)for(var o=r[a],u=o._private.classes,h=!1,d=0;d<t.length;d++){var p=t[d],f=u.has(p),g=!1;e||n&&!f?(u.add(p),g=!0):(!e||n&&f)&&(u.delete(p),g=!0),!h&&g&&(i.push(o),h=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),r}),"toggleClass"),removeClass:l((function(t){return this.toggleClass(t,!1)}),"removeClass"),flashClass:l((function(t,e){var r=this;if(e==null)e=250;else if(e===0)return r;return r.addClass(t),setTimeout((function(){r.removeClass(t)}),e),r}),"flashClass")};s4.className=s4.classNames=s4.classes;var cr={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:IN,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};cr.variable="(?:[\\w-.]|(?:\\\\"+cr.metaChar+"))+",cr.className="(?:[\\w-]|(?:\\\\"+cr.metaChar+"))+",cr.value=cr.string+"|"+cr.number,cr.id=cr.variable,(function(){var t,e,r;for(t=cr.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],cr.comparatorOp+="|@"+e;for(t=cr.comparatorOp.split("|"),r=0;r<t.length;r++)(e=t[r]).indexOf("!")>=0||e!=="="&&(cr.comparatorOp+="|\\!"+e)})();var Lr=l((function(){return{checks:[]}}),"newQuery"),GN=0,Ose=1,Pse=2,UN=3,qN=4,jN=5,WN=6,YN=7,lk=8,VN=9,yS=10,vS=11,Bse=12,$se=13,xS=14,HN=15,XN=16,u6=17,h6=18,d6=19,qd=20,bS=[{selector:":selected",matches:l((function(t){return t.selected()}),"matches")},{selector:":unselected",matches:l((function(t){return!t.selected()}),"matches")},{selector:":selectable",matches:l((function(t){return t.selectable()}),"matches")},{selector:":unselectable",matches:l((function(t){return!t.selectable()}),"matches")},{selector:":locked",matches:l((function(t){return t.locked()}),"matches")},{selector:":unlocked",matches:l((function(t){return!t.locked()}),"matches")},{selector:":visible",matches:l((function(t){return t.visible()}),"matches")},{selector:":hidden",matches:l((function(t){return!t.visible()}),"matches")},{selector:":transparent",matches:l((function(t){return t.transparent()}),"matches")},{selector:":grabbed",matches:l((function(t){return t.grabbed()}),"matches")},{selector:":free",matches:l((function(t){return!t.grabbed()}),"matches")},{selector:":removed",matches:l((function(t){return t.removed()}),"matches")},{selector:":inside",matches:l((function(t){return!t.removed()}),"matches")},{selector:":grabbable",matches:l((function(t){return t.grabbable()}),"matches")},{selector:":ungrabbable",matches:l((function(t){return!t.grabbable()}),"matches")},{selector:":animated",matches:l((function(t){return t.animated()}),"matches")},{selector:":unanimated",matches:l((function(t){return!t.animated()}),"matches")},{selector:":parent",matches:l((function(t){return t.isParent()}),"matches")},{selector:":childless",matches:l((function(t){return t.isChildless()}),"matches")},{selector:":child",matches:l((function(t){return t.isChild()}),"matches")},{selector:":orphan",matches:l((function(t){return t.isOrphan()}),"matches")},{selector:":nonorphan",matches:l((function(t){return t.isChild()}),"matches")},{selector:":compound",matches:l((function(t){return t.isNode()?t.isParent():t.source().isParent()||t.target().isParent()}),"matches")},{selector:":loop",matches:l((function(t){return t.isLoop()}),"matches")},{selector:":simple",matches:l((function(t){return t.isSimple()}),"matches")},{selector:":active",matches:l((function(t){return t.active()}),"matches")},{selector:":inactive",matches:l((function(t){return!t.active()}),"matches")},{selector:":backgrounding",matches:l((function(t){return t.backgrounding()}),"matches")},{selector:":nonbackgrounding",matches:l((function(t){return!t.backgrounding()}),"matches")}].sort((function(t,e){return jke(t.selector,e.selector)})),eCe=(function(){for(var t,e={},r=0;r<bS.length;r++)e[(t=bS[r]).selector]=t.matches;return e})(),tCe=l((function(t,e){return eCe[t](e)}),"stateSelectorMatches"),rCe="("+bS.map((function(t){return t.selector})).join("|")+")",Ch=l((function(t){return t.replace(new RegExp("\\\\("+cr.metaChar+")","g"),(function(e,r){return r}))}),"cleanMetaChars"),yl=l((function(t,e,r){t[t.length-1]=r}),"replaceLastQuery"),wS=[{name:"group",query:!0,regex:"("+cr.group+")",populate:l((function(t,e,r){var n=yn(r,1)[0];e.checks.push({type:GN,value:n==="*"?n:n+"s"})}),"populate")},{name:"state",query:!0,regex:rCe,populate:l((function(t,e,r){var n=yn(r,1)[0];e.checks.push({type:YN,value:n})}),"populate")},{name:"id",query:!0,regex:"\\#("+cr.id+")",populate:l((function(t,e,r){var n=yn(r,1)[0];e.checks.push({type:lk,value:Ch(n)})}),"populate")},{name:"className",query:!0,regex:"\\.("+cr.className+")",populate:l((function(t,e,r){var n=yn(r,1)[0];e.checks.push({type:VN,value:Ch(n)})}),"populate")},{name:"dataExists",query:!0,regex:"\\[\\s*("+cr.variable+")\\s*\\]",populate:l((function(t,e,r){var n=yn(r,1)[0];e.checks.push({type:qN,field:Ch(n)})}),"populate")},{name:"dataCompare",query:!0,regex:"\\[\\s*("+cr.variable+")\\s*("+cr.comparatorOp+")\\s*("+cr.value+")\\s*\\]",populate:l((function(t,e,r){var n=yn(r,3),i=n[0],a=n[1],s=n[2];s=new RegExp("^"+cr.string+"$").exec(s)!=null?s.substring(1,s.length-1):parseFloat(s),e.checks.push({type:UN,field:Ch(i),operator:a,value:s})}),"populate")},{name:"dataBool",query:!0,regex:"\\[\\s*("+cr.boolOp+")\\s*("+cr.variable+")\\s*\\]",populate:l((function(t,e,r){var n=yn(r,2),i=n[0],a=n[1];e.checks.push({type:jN,field:Ch(a),operator:i})}),"populate")},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+cr.meta+")\\s*("+cr.comparatorOp+")\\s*("+cr.number+")\\s*\\]\\]",populate:l((function(t,e,r){var n=yn(r,3),i=n[0],a=n[1],s=n[2];e.checks.push({type:WN,field:Ch(i),operator:a,value:parseFloat(s)})}),"populate")},{name:"nextQuery",separator:!0,regex:cr.separator,populate:l((function(t,e){var r=t.currentSubject,n=t.edgeCount,i=t.compoundCount,a=t[t.length-1];return r!=null&&(a.subject=r,t.currentSubject=null),a.edgeCount=n,a.compoundCount=i,t.edgeCount=0,t.compoundCount=0,t[t.length++]=Lr()}),"populate")},{name:"directedEdge",separator:!0,regex:cr.directedEdge,populate:l((function(t,e){if(t.currentSubject==null){var r=Lr(),n=e,i=Lr();return r.checks.push({type:vS,source:n,target:i}),yl(t,e,r),t.edgeCount++,i}var a=Lr(),s=e,o=Lr();return a.checks.push({type:Bse,source:s,target:o}),yl(t,e,a),t.edgeCount++,o}),"populate")},{name:"undirectedEdge",separator:!0,regex:cr.undirectedEdge,populate:l((function(t,e){if(t.currentSubject==null){var r=Lr(),n=e,i=Lr();return r.checks.push({type:yS,nodes:[n,i]}),yl(t,e,r),t.edgeCount++,i}var a=Lr(),s=e,o=Lr();return a.checks.push({type:xS,node:s,neighbor:o}),yl(t,e,a),o}),"populate")},{name:"child",separator:!0,regex:cr.child,populate:l((function(t,e){if(t.currentSubject==null){var r=Lr(),n=Lr(),i=t[t.length-1];return r.checks.push({type:HN,parent:i,child:n}),yl(t,e,r),t.compoundCount++,n}if(t.currentSubject===e){var a=Lr(),s=t[t.length-1],o=Lr(),u=Lr(),h=Lr(),d=Lr();return a.checks.push({type:d6,left:s,right:o,subject:u}),u.checks=e.checks,e.checks=[{type:qd}],d.checks.push({type:qd}),o.checks.push({type:u6,parent:d,child:h}),yl(t,s,a),t.currentSubject=u,t.compoundCount++,h}var p=Lr(),f=Lr(),g=[{type:u6,parent:p,child:f}];return p.checks=e.checks,e.checks=g,t.compoundCount++,f}),"populate")},{name:"descendant",separator:!0,regex:cr.descendant,populate:l((function(t,e){if(t.currentSubject==null){var r=Lr(),n=Lr(),i=t[t.length-1];return r.checks.push({type:XN,ancestor:i,descendant:n}),yl(t,e,r),t.compoundCount++,n}if(t.currentSubject===e){var a=Lr(),s=t[t.length-1],o=Lr(),u=Lr(),h=Lr(),d=Lr();return a.checks.push({type:d6,left:s,right:o,subject:u}),u.checks=e.checks,e.checks=[{type:qd}],d.checks.push({type:qd}),o.checks.push({type:h6,ancestor:d,descendant:h}),yl(t,s,a),t.currentSubject=u,t.compoundCount++,h}var p=Lr(),f=Lr(),g=[{type:h6,ancestor:p,descendant:f}];return p.checks=e.checks,e.checks=g,t.compoundCount++,f}),"populate")},{name:"subject",modifier:!0,regex:cr.subject,populate:l((function(t,e){if(t.currentSubject!=null&&t.currentSubject!==e)return kr("Redefinition of subject in selector `"+t.toString()+"`"),!1;t.currentSubject=e;var r=t[t.length-1].checks[0],n=r==null?null:r.type;n===vS?r.type=$se:n===yS&&(r.type=xS,r.node=r.nodes[1],r.neighbor=r.nodes[0],r.nodes=null)}),"populate")}];wS.forEach((function(t){return t.regexObj=new RegExp("^"+t.regex)}));var nCe=l((function(t){for(var e,r,n,i=0;i<wS.length;i++){var a=wS[i],s=a.name,o=t.match(a.regexObj);if(o!=null){r=o,e=a,n=s;var u=o[0];t=t.substring(u.length);break}}return{expr:e,match:r,name:n,remaining:t}}),"consumeExpr"),iCe=l((function(t){var e=t.match(/^\s+/);if(e){var r=e[0];t=t.substring(r.length)}return t}),"consumeWhitespace"),aCe=l((function(t){var e=this,r=e.inputText=t,n=e[0]=Lr();for(e.length=1,r=iCe(r);;){var i=nCe(r);if(i.expr==null)return kr("The selector `"+t+"`is invalid"),!1;var a=i.match.slice(1),s=i.expr.populate(e,n,a);if(s===!1)return!1;if(s!=null&&(n=s),(r=i.remaining).match(/^\s*$/))break}var o=e[e.length-1];e.currentSubject!=null&&(o.subject=e.currentSubject),o.edgeCount=e.edgeCount,o.compoundCount=e.compoundCount;for(var u=0;u<e.length;u++){var h=e[u];if(h.compoundCount>0&&h.edgeCount>0)return kr("The selector `"+t+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(h.edgeCount>1)return kr("The selector `"+t+"` is invalid because it uses multiple edge selectors"),!1;h.edgeCount===1&&kr("The selector `"+t+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0}),"parse"),sCe=l((function(){if(this.toStringCache!=null)return this.toStringCache;for(var t=l((function(u){return u??""}),"clean"),e=l((function(u){return Ot(u)?'"'+u+'"':t(u)}),"cleanVal"),r=l((function(u){return" "+u+" "}),"space"),n=l((function(u,h){var d=u.type,p=u.value;switch(d){case GN:var f=t(p);return f.substring(0,f.length-1);case UN:var g=u.field,m=u.operator;return"["+g+r(t(m))+e(p)+"]";case jN:var y=u.operator,v=u.field;return"["+t(y)+v+"]";case qN:return"["+u.field+"]";case WN:var x=u.operator;return"[["+u.field+r(t(x))+e(p)+"]]";case YN:return p;case lk:return"#"+p;case VN:return"."+p;case u6:case HN:return i(u.parent,h)+r(">")+i(u.child,h);case h6:case XN:return i(u.ancestor,h)+" "+i(u.descendant,h);case d6:var b=i(u.left,h),w=i(u.subject,h),T=i(u.right,h);return b+(b.length>0?" ":"")+w+T;case qd:return""}}),"checkToString"),i=l((function(u,h){return u.checks.reduce((function(d,p,f){return d+(h===u&&f===0?"$":"")+n(p,h)}),"")}),"queryToString"),a="",s=0;s<this.length;s++){var o=this[s];a+=i(o,o.subject),this.length>1&&s<this.length-1&&(a+=", ")}return this.toStringCache=a,a}),"toString"),oCe={parse:aCe,toString:sCe},AP=l((function(t,e,r){var n,i,a,s=Ot(t),o=ct(t),u=Ot(r),h=!1,d=!1,p=!1;switch(e.indexOf("!")>=0&&(e=e.replace("!",""),d=!0),e.indexOf("@")>=0&&(e=e.replace("@",""),h=!0),(s||u||h)&&(i=s||o?""+t:"",a=""+r),h&&(t=i=i.toLowerCase(),r=a=a.toLowerCase()),e){case"*=":n=i.indexOf(a)>=0;break;case"$=":n=i.indexOf(a,i.length-a.length)>=0;break;case"^=":n=i.indexOf(a)===0;break;case"=":n=t===r;break;case">":p=!0,n=t>r;break;case">=":p=!0,n=t>=r;break;case"<":p=!0,n=t<r;break;case"<=":p=!0,n=t<=r;break;default:n=!1}return!d||t==null&&p||(n=!n),n}),"valCmp"),lCe=l((function(t,e){switch(e){case"?":return!!t;case"!":return!t;case"^":return t===void 0}}),"boolCmp"),cCe=l((function(t){return t!==void 0}),"existCmp"),DT=l((function(t,e){return t.data(e)}),"data"),uCe=l((function(t,e){return t[e]()}),"meta"),sn=[],qr=l((function(t,e){return t.checks.every((function(r){return sn[r.type](r,e)}))}),"matches");sn[GN]=function(t,e){var r=t.value;return r==="*"||r===e.group()},sn[YN]=function(t,e){var r=t.value;return tCe(r,e)},sn[lk]=function(t,e){var r=t.value;return e.id()===r},sn[VN]=function(t,e){var r=t.value;return e.hasClass(r)},sn[WN]=function(t,e){var r=t.field,n=t.operator,i=t.value;return AP(uCe(e,r),n,i)},sn[UN]=function(t,e){var r=t.field,n=t.operator,i=t.value;return AP(DT(e,r),n,i)},sn[jN]=function(t,e){var r=t.field,n=t.operator;return lCe(DT(e,r),n)},sn[qN]=function(t,e){var r=t.field;return t.operator,cCe(DT(e,r))},sn[yS]=function(t,e){var r=t.nodes[0],n=t.nodes[1],i=e.source(),a=e.target();return qr(r,i)&&qr(n,a)||qr(n,i)&&qr(r,a)},sn[xS]=function(t,e){return qr(t.node,e)&&e.neighborhood().some((function(r){return r.isNode()&&qr(t.neighbor,r)}))},sn[vS]=function(t,e){return qr(t.source,e.source())&&qr(t.target,e.target())},sn[Bse]=function(t,e){return qr(t.source,e)&&e.outgoers().some((function(r){return r.isNode()&&qr(t.target,r)}))},sn[$se]=function(t,e){return qr(t.target,e)&&e.incomers().some((function(r){return r.isNode()&&qr(t.source,r)}))},sn[HN]=function(t,e){return qr(t.child,e)&&qr(t.parent,e.parent())},sn[u6]=function(t,e){return qr(t.parent,e)&&e.children().some((function(r){return qr(t.child,r)}))},sn[XN]=function(t,e){return qr(t.descendant,e)&&e.ancestors().some((function(r){return qr(t.ancestor,r)}))},sn[h6]=function(t,e){return qr(t.ancestor,e)&&e.descendants().some((function(r){return qr(t.descendant,r)}))},sn[d6]=function(t,e){return qr(t.subject,e)&&qr(t.left,e)&&qr(t.right,e)},sn[qd]=function(){return!0},sn[Ose]=function(t,e){return t.value.has(e)},sn[Pse]=function(t,e){return(0,t.value)(e)};var hCe=l((function(t){var e=this;if(e.length===1&&e[0].checks.length===1&&e[0].checks[0].type===lk)return t.getElementById(e[0].checks[0].value).collection();var r=l((function(n){for(var i=0;i<e.length;i++){var a=e[i];if(qr(a,n))return!0}return!1}),"selectorFunction");return e.text()==null&&(r=l((function(){return!0}),"selectorFunction")),t.filter(r)}),"filter"),dCe=l((function(t){for(var e=0;e<this.length;e++){var r=this[e];if(qr(r,t))return!0}return!1}),"matches"),pCe={matches:dCe,filter:hCe},cc=l((function(t){this.inputText=t,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,t==null||Ot(t)&&t.match(/^\s*$/)||(Ta(t)?this.addQuery({checks:[{type:Ose,value:t.collection()}]}):tn(t)?this.addQuery({checks:[{type:Pse,value:t}]}):Ot(t)?this.parse(t)||(this.invalid=!0):en("A selector must be created from a string; found "))}),"Selector"),vl=cc.prototype;[oCe,pCe].forEach((function(t){return Gt(vl,t)})),vl.text=function(){return this.inputText},vl.size=function(){return this.length},vl.eq=function(t){return this[t]},vl.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()},vl.addQuery=function(t){this[this.length++]=t},vl.selector=vl.toString;var kl={allAre:l((function(t){var e=new cc(t);return this.every((function(r){return e.matches(r)}))}),"allAre"),is:l((function(t){var e=new cc(t);return this.some((function(r){return e.matches(r)}))}),"is"),some:l((function(t,e){for(var r=0;r<this.length;r++)if(e?t.apply(e,[this[r],r,this]):t(this[r],r,this))return!0;return!1}),"some"),every:l((function(t,e){for(var r=0;r<this.length;r++)if(!(e?t.apply(e,[this[r],r,this]):t(this[r],r,this)))return!1;return!0}),"every"),same:l((function(t){if(this===t)return!0;t=this.cy().collection(t);var e=this.length;return e===t.length&&(e===1?this[0]===t[0]:this.every((function(r){return t.hasElementWithId(r.id())})))}),"same"),anySame:l((function(t){return t=this.cy().collection(t),this.some((function(e){return t.hasElementWithId(e.id())}))}),"anySame"),allAreNeighbors:l((function(t){t=this.cy().collection(t);var e=this.neighborhood();return t.every((function(r){return e.hasElementWithId(r.id())}))}),"allAreNeighbors"),contains:l((function(t){t=this.cy().collection(t);var e=this;return t.every((function(r){return e.hasElementWithId(r.id())}))}),"contains")};kl.allAreNeighbours=kl.allAreNeighbors,kl.has=kl.contains,kl.equal=kl.equals=kl.same;var Qx,Fse,Oa=l((function(t,e){return l((function(r,n,i,a){var s,o=r,u=this;if(o==null?s="":Ta(o)&&o.length===1&&(s=o.id()),u.length===1&&s){var h=u[0]._private,d=h.traversalCache=h.traversalCache||{},p=d[e]=d[e]||[],f=lc(s),g=p[f];return g||(p[f]=t.call(u,r,n,i,a))}return t.call(u,r,n,i,a)}),"traversalCache")}),"cache"),Yh={parent:l((function(t){var e=[];if(this.length===1){var r=this[0]._private.parent;if(r)return r}for(var n=0;n<this.length;n++){var i=this[n]._private.parent;i&&e.push(i)}return this.spawn(e,!0).filter(t)}),"parent"),parents:l((function(t){for(var e=[],r=this.parent();r.nonempty();){for(var n=0;n<r.length;n++){var i=r[n];e.push(i)}r=r.parent()}return this.spawn(e,!0).filter(t)}),"parents"),commonAncestors:l((function(t){for(var e,r=0;r<this.length;r++){var n=this[r].parents();e=(e=e||n).intersect(n)}return e.filter(t)}),"commonAncestors"),orphans:l((function(t){return this.stdFilter((function(e){return e.isOrphan()})).filter(t)}),"orphans"),nonorphans:l((function(t){return this.stdFilter((function(e){return e.isChild()})).filter(t)}),"nonorphans"),children:Oa((function(t){for(var e=[],r=0;r<this.length;r++)for(var n=this[r]._private.children,i=0;i<n.length;i++)e.push(n[i]);return this.spawn(e,!0).filter(t)}),"children"),siblings:l((function(t){return this.parent().children().not(this).filter(t)}),"siblings"),isParent:l((function(){var t=this[0];if(t)return t.isNode()&&t._private.children.length!==0}),"isParent"),isChildless:l((function(){var t=this[0];if(t)return t.isNode()&&t._private.children.length===0}),"isChildless"),isChild:l((function(){var t=this[0];if(t)return t.isNode()&&t._private.parent!=null}),"isChild"),isOrphan:l((function(){var t=this[0];if(t)return t.isNode()&&t._private.parent==null}),"isOrphan"),descendants:l((function(t){var e=[];function r(n){for(var i=0;i<n.length;i++){var a=n[i];e.push(a),a.children().nonempty()&&r(a.children())}}return l(r,"add"),r(this.children()),this.spawn(e,!0).filter(t)}),"descendants")};function Jx(t,e,r,n){for(var i=[],a=new km,s=t.cy().hasCompoundNodes(),o=0;o<t.length;o++){var u=t[o];r?i.push(u):s&&n(i,a,u)}for(;i.length>0;){var h=i.shift();e(h),a.add(h.id()),s&&n(i,a,h)}return t}function kS(t,e,r){if(r.isParent())for(var n=r._private.children,i=0;i<n.length;i++){var a=n[i];e.has(a.id())||t.push(a)}}function TS(t,e,r){if(r.isChild()){var n=r._private.parent;e.has(n.id())||t.push(n)}}function LP(t,e,r){TS(t,e,r),kS(t,e,r)}l(Jx,"forEachCompound"),l(kS,"addChildren"),Yh.forEachDown=function(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return Jx(this,t,e,kS)},l(TS,"addParent"),Yh.forEachUp=function(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return Jx(this,t,e,TS)},l(LP,"addParentAndChildren"),Yh.forEachUpAndDown=function(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return Jx(this,t,e,LP)},Yh.ancestors=Yh.parents,(Qx=Fse={data:br.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:br.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:br.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:br.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:br.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:br.removeData({field:"rscratch",triggerEvent:!1}),id:l((function(){var t=this[0];if(t)return t._private.data.id}),"id")}).attr=Qx.data,Qx.removeAttr=Qx.removeData;var as,zse,fCe=Fse,o4={};function eb(t){return function(e){var r=this;if(e===void 0&&(e=!0),r.length!==0&&r.isNode()&&!r.removed()){for(var n=0,i=r[0],a=i._private.edges,s=0;s<a.length;s++){var o=a[s];!e&&o.isLoop()||(n+=t(i,o))}return n}}}function Sc(t,e){return function(r){for(var n,i=this.nodes(),a=0;a<i.length;a++){var s=i[a][t](r);s===void 0||n!==void 0&&!e(s,n)||(n=s)}return n}}l(eb,"defineDegreeFunction"),Gt(o4,{degree:eb((function(t,e){return e.source().same(e.target())?2:1})),indegree:eb((function(t,e){return e.target().same(t)?1:0})),outdegree:eb((function(t,e){return e.source().same(t)?1:0}))}),l(Sc,"defineDegreeBoundsFunction"),Gt(o4,{minDegree:Sc("degree",(function(t,e){return t<e})),maxDegree:Sc("degree",(function(t,e){return t>e})),minIndegree:Sc("indegree",(function(t,e){return t<e})),maxIndegree:Sc("indegree",(function(t,e){return t>e})),minOutdegree:Sc("outdegree",(function(t,e){return t<e})),maxOutdegree:Sc("outdegree",(function(t,e){return t>e}))}),Gt(o4,{totalDegree:l((function(t){for(var e=0,r=this.nodes(),n=0;n<r.length;n++)e+=r[n].degree(t);return e}),"totalDegree")});var Gse=l((function(t,e,r){for(var n=0;n<t.length;n++){var i=t[n];if(!i.locked()){var a=i._private.position,s={x:e.x!=null?e.x-a.x:0,y:e.y!=null?e.y-a.y:0};!i.isParent()||s.x===0&&s.y===0||i.children().shift(s,r),i.dirtyBoundingBoxCache()}}}),"beforePositionSet"),NP={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:l((function(t){t.updateCompoundBounds()}),"beforeGet"),beforeSet:l((function(t,e){Gse(t,e,!1)}),"beforeSet"),onSet:l((function(t){t.dirtyCompoundBoundsCache()}),"onSet"),canSet:l((function(t){return!t.locked()}),"canSet")};as=zse={position:br.data(NP),silentPosition:br.data(Gt({},NP,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:l((function(t,e){Gse(t,e,!0)}),"beforeSet"),onSet:l((function(t){t.dirtyCompoundBoundsCache()}),"onSet")})),positions:l((function(t,e){if(ur(t))e?this.silentPosition(t):this.position(t);else if(tn(t)){var r=t,n=this.cy();n.startBatch();for(var i=0;i<this.length;i++){var a,s=this[i];(a=r(s,i))&&(e?s.silentPosition(a):s.position(a))}n.endBatch()}return this}),"positions"),silentPositions:l((function(t){return this.positions(t,!0)}),"silentPositions"),shift:l((function(t,e,r){var n;if(ur(t)?(n={x:ct(t.x)?t.x:0,y:ct(t.y)?t.y:0},r=e):Ot(t)&&ct(e)&&((n={x:0,y:0})[t]=e),n!=null){var i=this.cy();i.startBatch();for(var a=0;a<this.length;a++){var s=this[a];if(!(i.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var o=s.position(),u={x:o.x+n.x,y:o.y+n.y};r?s.silentPosition(u):s.position(u)}}i.endBatch()}return this}),"shift"),silentShift:l((function(t,e){return ur(t)?this.shift(t,!0):Ot(t)&&ct(e)&&this.shift(t,e,!0),this}),"silentShift"),renderedPosition:l((function(t,e){var r=this[0],n=this.cy(),i=n.zoom(),a=n.pan(),s=ur(t)?t:void 0,o=s!==void 0||e!==void 0&&Ot(t);if(r&&r.isNode()){if(!o){var u=r.position();return s=ik(u,i,a),t===void 0?s:s[t]}for(var h=0;h<this.length;h++){var d=this[h];e!==void 0?d.position(t,(e-a[t])/i):s!==void 0&&d.position(Rae(s,i,a))}}else if(!o)return;return this}),"renderedPosition"),relativePosition:l((function(t,e){var r=this[0],n=this.cy(),i=ur(t)?t:void 0,a=i!==void 0||e!==void 0&&Ot(t),s=n.hasCompoundNodes();if(r&&r.isNode()){if(!a){var o=r.position(),u=s?r.parent():null,h=u&&u.length>0,d=h;h&&(u=u[0]);var p=d?u.position():{x:0,y:0};return i={x:o.x-p.x,y:o.y-p.y},t===void 0?i:i[t]}for(var f=0;f<this.length;f++){var g=this[f],m=s?g.parent():null,y=m&&m.length>0,v=y;y&&(m=m[0]);var x=v?m.position():{x:0,y:0};e!==void 0?g.position(t,e+x[t]):i!==void 0&&g.position({x:i.x+x.x,y:i.y+x.y})}}else if(!a)return;return this}),"relativePosition")},as.modelPosition=as.point=as.position,as.modelPositions=as.points=as.positions,as.renderedPoint=as.renderedPosition,as.relativePoint=as.relativePosition;var Vh,Pl,gCe=zse;Vh=Pl={},Pl.renderedBoundingBox=function(t){var e=this.boundingBox(t),r=this.cy(),n=r.zoom(),i=r.pan(),a=e.x1*n+i.x,s=e.x2*n+i.x,o=e.y1*n+i.y,u=e.y2*n+i.y;return{x1:a,x2:s,y1:o,y2:u,w:s-a,h:u-o}},Pl.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=this.cy();return e.styleEnabled()&&e.hasCompoundNodes()?(this.forEachUp((function(r){if(r.isParent()){var n=r._private;n.compoundBoundsClean=!1,n.bbCache=null,t||r.emitAndNotify("bounds")}})),this):this},Pl.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function r(s){if(s.isParent()){var o=s._private,u=s.children(),h=s.pstyle("compound-sizing-wrt-labels").value==="include",d={width:{val:s.pstyle("min-width").pfValue,left:s.pstyle("min-width-bias-left"),right:s.pstyle("min-width-bias-right")},height:{val:s.pstyle("min-height").pfValue,top:s.pstyle("min-height-bias-top"),bottom:s.pstyle("min-height-bias-bottom")}},p=u.boundingBox({includeLabels:h,includeOverlays:!1,useCache:!1}),f=o.position;p.w!==0&&p.h!==0||((p={w:s.pstyle("width").pfValue,h:s.pstyle("height").pfValue}).x1=f.x-p.w/2,p.x2=f.x+p.w/2,p.y1=f.y-p.h/2,p.y2=f.y+p.h/2),l(E,"computeBiasValues"),l(_,"computePaddingValues");var g=d.width.left.value;d.width.left.units==="px"&&d.width.val>0&&(g=100*g/d.width.val);var m=d.width.right.value;d.width.right.units==="px"&&d.width.val>0&&(m=100*m/d.width.val);var y=d.height.top.value;d.height.top.units==="px"&&d.height.val>0&&(y=100*y/d.height.val);var v=d.height.bottom.value;d.height.bottom.units==="px"&&d.height.val>0&&(v=100*v/d.height.val);var x=E(d.width.val-p.w,g,m),b=x.biasDiff,w=x.biasComplementDiff,T=E(d.height.val-p.h,y,v),k=T.biasDiff,C=T.biasComplementDiff;o.autoPadding=_(p.w,p.h,s.pstyle("padding"),s.pstyle("padding-relative-to").value),o.autoWidth=Math.max(p.w,d.width.val),f.x=(-b+p.x1+p.x2+w)/2,o.autoHeight=Math.max(p.h,d.height.val),f.y=(-k+p.y1+p.y2+C)/2}function E(S,N,O){var B=0,L=0,I=N+O;return S>0&&I>0&&(B=N/I*S,L=O/I*S),{biasDiff:B,biasComplementDiff:L}}function _(S,N,O,B){if(O.units!=="%")return O.units==="px"?O.pfValue:0;switch(B){case"width":return S>0?O.pfValue*S:0;case"height":return N>0?O.pfValue*N:0;case"average":return S>0&&N>0?O.pfValue*(S+N)/2:0;case"min":return S>0&&N>0?S>N?O.pfValue*N:O.pfValue*S:0;case"max":return S>0&&N>0?S>N?O.pfValue*S:O.pfValue*N:0;default:return 0}}}l(r,"update");for(var n=0;n<this.length;n++){var i=this[n],a=i._private;a.compoundBoundsClean&&!t||(r(i),e.batching()||(a.compoundBoundsClean=!0))}return this};var Ua=l((function(t){return t===1/0||t===-1/0?0:t}),"noninf"),fs=l((function(t,e,r,n,i){n-e!=0&&i-r!=0&&e!=null&&r!=null&&n!=null&&i!=null&&(t.x1=e<t.x1?e:t.x1,t.x2=n>t.x2?n:t.x2,t.y1=r<t.y1?r:t.y1,t.y2=i>t.y2?i:t.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1)}),"updateBounds"),Wc=l((function(t,e){return e==null?t:fs(t,e.x1,e.y1,e.x2,e.y2)}),"updateBoundsFromBox"),zm=l((function(t,e,r){return ps(t,e,r)}),"prefixedProperty"),tb=l((function(t,e,r){if(!e.cy().headless()){var n,i,a=e._private,s=a.rstyle,o=s.arrowWidth/2;if(e.pstyle(r+"-arrow-shape").value!=="none"){r==="source"?(n=s.srcX,i=s.srcY):r==="target"?(n=s.tgtX,i=s.tgtY):(n=s.midX,i=s.midY);var u=a.arrowBounds=a.arrowBounds||{},h=u[r]=u[r]||{};h.x1=n-o,h.y1=i-o,h.x2=n+o,h.y2=i+o,h.w=h.x2-h.x1,h.h=h.y2-h.y1,i4(h,1),fs(t,h.x1,h.y1,h.x2,h.y2)}}}),"updateBoundsFromArrow"),OT=l((function(t,e,r){if(!e.cy().headless()){var n;n=r?r+"-":"";var i=e._private,a=i.rstyle;if(e.pstyle(n+"label").strValue){var s,o,u,h,d=e.pstyle("text-halign"),p=e.pstyle("text-valign"),f=zm(a,"labelWidth",r),g=zm(a,"labelHeight",r),m=zm(a,"labelX",r),y=zm(a,"labelY",r),v=e.pstyle(n+"text-margin-x").pfValue,x=e.pstyle(n+"text-margin-y").pfValue,b=e.isEdge(),w=e.pstyle(n+"text-rotation"),T=e.pstyle("text-outline-width").pfValue,k=e.pstyle("text-border-width").pfValue/2,C=e.pstyle("text-background-padding").pfValue,E=g,_=f,S=_/2,N=E/2;if(b)s=m-S,o=m+S,u=y-N,h=y+N;else{switch(d.value){case"left":s=m-_,o=m;break;case"center":s=m-S,o=m+S;break;case"right":s=m,o=m+_}switch(p.value){case"top":u=y-E,h=y;break;case"center":u=y-N,h=y+N;break;case"bottom":u=y,h=y+E}}var O=v-Math.max(T,k)-C-2,B=v+Math.max(T,k)+C+2,L=x-Math.max(T,k)-C-2,I=x+Math.max(T,k)+C+2;s+=O,o+=B,u+=L,h+=I;var A=r||"main",M=i.labelBounds,D=M[A]=M[A]||{};D.x1=s,D.y1=u,D.x2=o,D.y2=h,D.w=o-s,D.h=h-u,D.leftPad=O,D.rightPad=B,D.topPad=L,D.botPad=I;var R=b&&w.strValue==="autorotate",P=w.pfValue!=null&&w.pfValue!==0;if(R||P){var $=R?zm(i.rstyle,"labelAngle",r):w.pfValue,z=Math.cos($),q=Math.sin($),W=(s+o)/2,Q=(u+h)/2;if(!b){switch(d.value){case"left":W=o;break;case"right":W=s}switch(p.value){case"top":Q=h;break;case"bottom":Q=u}}var te=l((function(J,ue){return{x:(J-=W)*z-(ue-=Q)*q+W,y:J*q+ue*z+Q}}),"rotate"),oe=te(s,u),re=te(s,h),H=te(o,u),K=te(o,h);s=Math.min(oe.x,re.x,H.x,K.x),o=Math.max(oe.x,re.x,H.x,K.x),u=Math.min(oe.y,re.y,H.y,K.y),h=Math.max(oe.y,re.y,H.y,K.y)}var ie=A+"Rot",ne=M[ie]=M[ie]||{};ne.x1=s,ne.y1=u,ne.x2=o,ne.y2=h,ne.w=o-s,ne.h=h-u,fs(t,s,u,o,h),fs(i.labelBounds.all,s,u,o,h)}return t}}),"updateBoundsFromLabel"),mCe=l((function(t,e){if(!e.cy().headless()){var r=e.pstyle("outline-opacity").value,n=e.pstyle("outline-width").value;if(r>0&&n>0){var i=e.pstyle("outline-offset").value,a=e.pstyle("shape").value,s=n+i,o=(t.w+2*s)/t.w,u=(t.h+2*s)/t.h,h=0;["diamond","pentagon","round-triangle"].includes(a)?(o=(t.w+2.4*s)/t.w,h=-s/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(a)?o=(t.w+2.4*s)/t.w:a==="star"?(o=(t.w+2.8*s)/t.w,u=(t.h+2.6*s)/t.h,h=-s/3.8):a==="triangle"?(o=(t.w+2.8*s)/t.w,u=(t.h+2.4*s)/t.h,h=-s/1.4):a==="vee"&&(o=(t.w+4.4*s)/t.w,u=(t.h+3.8*s)/t.h,h=.5*-s);var d=t.h*u-t.h,p=t.w*o-t.w;if(a4(t,[Math.ceil(d/2),Math.ceil(p/2)]),h!==0){var f=HTe(t,0,h);Mae(t,f)}}}}),"updateBoundsFromOutline"),yCe=l((function(t,e){var r,n,i,a,s,o,u=t._private.cy,h=u.styleEnabled(),d=u.headless(),p=ha(),f=t._private,g=t.isNode(),m=t.isEdge(),y=f.rstyle,v=g&&h?t.pstyle("bounds-expansion").pfValue:[0],x=l((function(oe){return oe.pstyle("display").value!=="none"}),"isDisplayed"),b=!h||x(t)&&(!m||x(t.source())&&x(t.target()));if(b){var w=0;h&&e.includeOverlays&&t.pstyle("overlay-opacity").value!==0&&(w=t.pstyle("overlay-padding").value);var T=0;h&&e.includeUnderlays&&t.pstyle("underlay-opacity").value!==0&&(T=t.pstyle("underlay-padding").value);var k=Math.max(w,T),C=0;if(h&&(C=t.pstyle("width").pfValue/2),g&&e.includeNodes){var E=t.position();s=E.x,o=E.y;var _=t.outerWidth()/2,S=t.outerHeight()/2;fs(p,r=s-_,i=o-S,n=s+_,a=o+S),h&&e.includeOutlines&&mCe(p,t)}else if(m&&e.includeEdges)if(h&&!d){var N=t.pstyle("curve-style").strValue;if(r=Math.min(y.srcX,y.midX,y.tgtX),n=Math.max(y.srcX,y.midX,y.tgtX),i=Math.min(y.srcY,y.midY,y.tgtY),a=Math.max(y.srcY,y.midY,y.tgtY),fs(p,r-=C,i-=C,n+=C,a+=C),N==="haystack"){var O=y.haystackPts;if(O&&O.length===2){if(r=O[0].x,i=O[0].y,r>(n=O[1].x)){var B=r;r=n,n=B}if(i>(a=O[1].y)){var L=i;i=a,a=L}fs(p,r-C,i-C,n+C,a+C)}}else if(N==="bezier"||N==="unbundled-bezier"||N.endsWith("segments")||N.endsWith("taxi")){var I;switch(N){case"bezier":case"unbundled-bezier":I=y.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":I=y.linePts}if(I!=null)for(var A=0;A<I.length;A++){var M=I[A];r=M.x-C,n=M.x+C,i=M.y-C,a=M.y+C,fs(p,r,i,n,a)}}}else{var D=t.source().position(),R=t.target().position();if((r=D.x)>(n=R.x)){var P=r;r=n,n=P}if((i=D.y)>(a=R.y)){var $=i;i=a,a=$}fs(p,r-=C,i-=C,n+=C,a+=C)}if(h&&e.includeEdges&&m&&(tb(p,t,"mid-source"),tb(p,t,"mid-target"),tb(p,t,"source"),tb(p,t,"target")),h&&t.pstyle("ghost").value==="yes"){var z=t.pstyle("ghost-offset-x").pfValue,q=t.pstyle("ghost-offset-y").pfValue;fs(p,p.x1+z,p.y1+q,p.x2+z,p.y2+q)}var W=f.bodyBounds=f.bodyBounds||{};sP(W,p),a4(W,v),i4(W,1),h&&(r=p.x1,n=p.x2,i=p.y1,a=p.y2,fs(p,r-k,i-k,n+k,a+k));var Q=f.overlayBounds=f.overlayBounds||{};sP(Q,p),a4(Q,v),i4(Q,1);var te=f.labelBounds=f.labelBounds||{};te.all!=null?VTe(te.all):te.all=ha(),h&&e.includeLabels&&(e.includeMainLabels&&OT(p,t,null),m&&(e.includeSourceLabels&&OT(p,t,"source"),e.includeTargetLabels&&OT(p,t,"target")))}return p.x1=Ua(p.x1),p.y1=Ua(p.y1),p.x2=Ua(p.x2),p.y2=Ua(p.y2),p.w=Ua(p.x2-p.x1),p.h=Ua(p.y2-p.y1),p.w>0&&p.h>0&&b&&(a4(p,v),i4(p,1)),p}),"boundingBoxImpl"),Use=l((function(t){var e=0,r=l((function(i){return(i?1:0)<<e++}),"tf"),n=0;return n+=r(t.incudeNodes),n+=r(t.includeEdges),n+=r(t.includeLabels),n+=r(t.includeMainLabels),n+=r(t.includeSourceLabels),n+=r(t.includeTargetLabels),n+=r(t.includeOverlays),n+=r(t.includeOutlines)}),"getKey"),qse=l((function(t){if(t.isEdge()){var e=t.source().position(),r=t.target().position(),n=l((function(i){return Math.round(i)}),"r");return mTe([n(e.x),n(e.y),n(r.x),n(r.y)])}return 0}),"getBoundingBoxPosKey"),IP=l((function(t,e){var r,n=t._private,i=t.isEdge(),a=(e==null?RP:Use(e))===RP,s=qse(t),o=n.bbCachePosKey===s,u=e.useCache&&o,h=l((function(p){return p._private.bbCache==null||p._private.styleDirty}),"isDirty");if(!u||h(t)||i&&(h(t.source())||h(t.target()))?(o||t.recalculateRenderedStyle(u),r=yCe(t,av),n.bbCache=r,n.bbCachePosKey=s):r=n.bbCache,!a){var d=t.isNode();r=ha(),(e.includeNodes&&d||e.includeEdges&&!d)&&(e.includeOverlays?Wc(r,n.overlayBounds):Wc(r,n.bodyBounds)),e.includeLabels&&(e.includeMainLabels&&(!i||e.includeSourceLabels&&e.includeTargetLabels)?Wc(r,n.labelBounds.all):(e.includeMainLabels&&Wc(r,n.labelBounds.mainRot),e.includeSourceLabels&&Wc(r,n.labelBounds.sourceRot),e.includeTargetLabels&&Wc(r,n.labelBounds.targetRot))),r.w=r.x2-r.x1,r.h=r.y2-r.y1}return r}),"cachedBoundingBoxImpl"),av={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},RP=Use(av),MP=Jn(av);Pl.boundingBox=function(t){var e;if(this.length!==1||this[0]._private.bbCache==null||this[0]._private.styleDirty||t!==void 0&&t.useCache!==void 0&&t.useCache!==!0){e=ha();var r=MP(t=t||av),n=this;if(n.cy().styleEnabled())for(var i=0;i<n.length;i++){var a=n[i],s=a._private,o=qse(a),u=s.bbCachePosKey===o,h=r.useCache&&u&&!s.styleDirty;a.recalculateRenderedStyle(h)}this.updateCompoundBounds(!t.useCache);for(var d=0;d<n.length;d++){var p=n[d];Wc(e,IP(p,r))}}else t=t===void 0?av:MP(t),e=IP(this[0],t);return e.x1=Ua(e.x1),e.y1=Ua(e.y1),e.x2=Ua(e.x2),e.y2=Ua(e.y2),e.w=Ua(e.x2-e.x1),e.h=Ua(e.y2-e.y1),e},Pl.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},Pl.boundingBoxAt=function(t){var e=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),i=r.collection();if(n&&(i=e.filter((function(h){return h.isParent()})),e=e.not(i)),ur(t)){var a=t;t=l((function(){return a}),"fn")}var s=l((function(h,d){return h._private.bbAtOldPos=t(h,d)}),"storeOldPos"),o=l((function(h){return h._private.bbAtOldPos}),"getOldPos");r.startBatch(),e.forEach(s).silentPositions(t),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var u=YTe(this.boundingBox({useCache:!1}));return e.silentPositions(o),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),r.endBatch(),u},Vh.boundingbox=Vh.bb=Vh.boundingBox,Vh.renderedBoundingbox=Vh.renderedBoundingBox;var gy,r2,vCe=Pl;gy=r2={};var DP=l((function(t){t.uppercaseName=JO(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=JO(t.outerName),gy[t.name]=l((function(){var e=this[0],r=e._private,n=r.cy._private.styleEnabled;if(e){if(n){if(e.isParent())return e.updateCompoundBounds(),r[t.autoName]||0;var i=e.pstyle(t.name);return i.strValue==="label"?(e.recalculateRenderedStyle(),r.rstyle[t.labelName]||0):i.pfValue}return 1}}),"dimImpl"),gy["outer"+t.uppercaseName]=l((function(){var e=this[0],r=e._private.cy._private.styleEnabled;if(e)return r?e[t.name]()+e.pstyle("border-width").pfValue+2*e.padding():1}),"outerDimImpl"),gy["rendered"+t.uppercaseName]=l((function(){var e=this[0];if(e)return e[t.name]()*this.cy().zoom()}),"renderedDimImpl"),gy["rendered"+t.uppercaseOuterName]=l((function(){var e=this[0];if(e)return e[t.outerName]()*this.cy().zoom()}),"renderedOuterDimImpl")}),"defineDimFns");DP({name:"width"}),DP({name:"height"}),r2.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue},r2.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()},r2.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var xCe=r2,bCe=l((function(t,e){if(t.isEdge())return e(t)}),"ifEdge"),wCe=l((function(t,e){if(t.isEdge()){var r=t.cy();return ik(e(t),r.zoom(),r.pan())}}),"ifEdgeRenderedPosition"),kCe=l((function(t,e){if(t.isEdge()){var r=t.cy(),n=r.pan(),i=r.zoom();return e(t).map((function(a){return ik(a,i,n)}))}}),"ifEdgeRenderedPositions"),OP={controlPoints:{get:l((function(t){return t.renderer().getControlPoints(t)}),"controlPoints"),mult:!0},segmentPoints:{get:l((function(t){return t.renderer().getSegmentPoints(t)}),"segmentPoints"),mult:!0},sourceEndpoint:{get:l((function(t){return t.renderer().getSourceEndpoint(t)}),"sourceEndpoint")},targetEndpoint:{get:l((function(t){return t.renderer().getTargetEndpoint(t)}),"targetEndpoint")},midpoint:{get:l((function(t){return t.renderer().getEdgeMidpoint(t)}),"midpoint")}},TCe=l((function(t){return"rendered"+t[0].toUpperCase()+t.substr(1)}),"renderedName"),ECe=Object.keys(OP).reduce((function(t,e){var r=OP[e],n=TCe(e);return t[e]=function(){return bCe(this,r.get)},r.mult?t[n]=function(){return kCe(this,r.get)}:t[n]=function(){return wCe(this,r.get)},t}),{}),_Ce=Gt({},gCe,vCe,xCe,ECe),jse=l((function(t,e){this.recycle(t,e)}),"Event");function Sh(){return!1}function Gm(){return!0}l(Sh,"returnFalse"),l(Gm,"returnTrue"),jse.prototype={instanceString:l((function(){return"event"}),"instanceString"),recycle:l((function(t,e){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Sh,t!=null&&t.preventDefault?(this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?Gm:Sh):t!=null&&t.type?e=t:this.type=t,e!=null&&(this.originalEvent=e.originalEvent,this.type=e.type!=null?e.type:this.type,this.cy=e.cy,this.target=e.target,this.position=e.position,this.renderedPosition=e.renderedPosition,this.namespace=e.namespace,this.layout=e.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var r=this.position,n=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:r.x*n+i.x,y:r.y*n+i.y}}this.timeStamp=t&&t.timeStamp||Date.now()}),"recycle"),preventDefault:l((function(){this.isDefaultPrevented=Gm;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()}),"preventDefault"),stopPropagation:l((function(){this.isPropagationStopped=Gm;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()}),"stopPropagation"),stopImmediatePropagation:l((function(){this.isImmediatePropagationStopped=Gm,this.stopPropagation()}),"stopImmediatePropagation"),isDefaultPrevented:Sh,isPropagationStopped:Sh,isImmediatePropagationStopped:Sh};var Wse=/^([^.]+)(\.(?:[^.]+))?$/,Yse={qualifierCompare:l((function(t,e){return t===e}),"qualifierCompare"),eventMatches:l((function(){return!0}),"eventMatches"),addEventFields:l((function(){}),"addEventFields"),callbackContext:l((function(t){return t}),"callbackContext"),beforeEmit:l((function(){}),"beforeEmit"),afterEmit:l((function(){}),"afterEmit"),bubble:l((function(){return!1}),"bubble"),parent:l((function(){return null}),"parent"),context:null},PP=Object.keys(Yse),CCe={};function ix(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:CCe,e=arguments.length>1?arguments[1]:void 0,r=0;r<PP.length;r++){var n=PP[r];this[n]=t[n]||Yse[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}l(ix,"Emitter");var xl=ix.prototype,BP=l((function(t,e,r,n,i,a,s){tn(n)&&(i=n,n=null),s&&(a=a==null?s:Gt({},a,s));for(var o=Dr(r)?r:r.split(/\s+/),u=0;u<o.length;u++){var h=o[u];if(!oc(h)){var d=h.match(Wse);if(d&&e(t,h,d[1],d[2]?d[2]:null,n,i,a)===!1)break}}}),"forEachEvent"),$P=l((function(t,e){return t.addEventFields(t.context,e),new jse(e.type,e)}),"makeEventObj"),SCe=l((function(t,e,r){if(Fke(r))e(t,r);else if(ur(r))e(t,$P(t,r));else for(var n=Dr(r)?r:r.split(/\s+/),i=0;i<n.length;i++){var a=n[i];if(!oc(a)){var s=a.match(Wse);if(s){var o=s[1],u=s[2]?s[2]:null;e(t,$P(t,{type:o,namespace:u,target:t.context}))}}}}),"forEachEventObj");xl.on=xl.addListener=function(t,e,r,n,i){return BP(this,(function(a,s,o,u,h,d,p){tn(d)&&a.listeners.push({event:s,callback:d,type:o,namespace:u,qualifier:h,conf:p})}),t,e,r,n,i),this},xl.one=function(t,e,r,n){return this.on(t,e,r,n,{one:!0})},xl.removeListener=xl.off=function(t,e,r,n){var i=this;this.emitting!==0&&(this.listeners=wTe(this.listeners));for(var a=this.listeners,s=l((function(u){var h=a[u];BP(i,(function(d,p,f,g,m,y){if((h.type===f||t==="*")&&(!g&&h.namespace!==".*"||h.namespace===g)&&(!m||d.qualifierCompare(h.qualifier,m))&&(!y||h.callback===y))return a.splice(u,1),!1}),t,e,r,n)}),"_loop"),o=a.length-1;o>=0;o--)s(o);return this},xl.removeAllListeners=function(){return this.removeListener("*")},xl.emit=xl.trigger=function(t,e,r){var n=this.listeners,i=n.length;return this.emitting++,Dr(e)||(e=[e]),SCe(this,(function(a,s){r!=null&&(n=[{event:s.event,type:s.type,namespace:s.namespace,callback:r}],i=n.length);for(var o=l((function(h){var d=n[h];if(d.type===s.type&&(!d.namespace||d.namespace===s.namespace||d.namespace===".*")&&a.eventMatches(a.context,d,s)){var p=[s];e!=null&&TTe(p,e),a.beforeEmit(a.context,d,s),d.conf&&d.conf.one&&(a.listeners=a.listeners.filter((function(m){return m!==d})));var f=a.callbackContext(a.context,d,s),g=d.callback.apply(f,p);a.afterEmit(a.context,d,s),g===!1&&(s.stopPropagation(),s.preventDefault())}}),"_loop2"),u=0;u<i;u++)o(u);a.bubble(a.context)&&!s.isPropagationStopped()&&a.parent(a.context).emit(s,e)}),t),this.emitting--,this};var ACe={qualifierCompare:l((function(t,e){return t==null||e==null?t==null&&e==null:t.sameText(e)}),"qualifierCompare"),eventMatches:l((function(t,e,r){var n=e.qualifier;return n==null||t!==r.target&&Jv(r.target)&&n.matches(r.target)}),"eventMatches"),addEventFields:l((function(t,e){e.cy=t.cy(),e.target=t}),"addEventFields"),callbackContext:l((function(t,e,r){return e.qualifier!=null?r.target:t}),"callbackContext"),beforeEmit:l((function(t,e){e.conf&&e.conf.once&&e.conf.onceCollection.removeListener(e.event,e.qualifier,e.callback)}),"beforeEmit"),bubble:l((function(){return!0}),"bubble"),parent:l((function(t){return t.isChild()?t.parent():t.cy()}),"parent")},rb=l((function(t){return Ot(t)?new cc(t):t}),"argSelector"),Vse={createEmitter:l((function(){for(var t=0;t<this.length;t++){var e=this[t],r=e._private;r.emitter||(r.emitter=new ix(ACe,e))}return this}),"createEmitter"),emitter:l((function(){return this._private.emitter}),"emitter"),on:l((function(t,e,r){for(var n=rb(e),i=0;i<this.length;i++)this[i].emitter().on(t,n,r);return this}),"on"),removeListener:l((function(t,e,r){for(var n=rb(e),i=0;i<this.length;i++)this[i].emitter().removeListener(t,n,r);return this}),"removeListener"),removeAllListeners:l((function(){for(var t=0;t<this.length;t++)this[t].emitter().removeAllListeners();return this}),"removeAllListeners"),one:l((function(t,e,r){for(var n=rb(e),i=0;i<this.length;i++)this[i].emitter().one(t,n,r);return this}),"one"),once:l((function(t,e,r){for(var n=rb(e),i=0;i<this.length;i++)this[i].emitter().on(t,n,r,{once:!0,onceCollection:this})}),"once"),emit:l((function(t,e){for(var r=0;r<this.length;r++)this[r].emitter().emit(t,e);return this}),"emit"),emitAndNotify:l((function(t,e){if(this.length!==0)return this.cy().notify(t,this),this.emit(t,e),this}),"emitAndNotify")};br.eventAliasesOn(Vse);var Hse={nodes:l((function(t){return this.filter((function(e){return e.isNode()})).filter(t)}),"nodes"),edges:l((function(t){return this.filter((function(e){return e.isEdge()})).filter(t)}),"edges"),byGroup:l((function(){for(var t=this.spawn(),e=this.spawn(),r=0;r<this.length;r++){var n=this[r];n.isNode()?t.push(n):e.push(n)}return{nodes:t,edges:e}}),"byGroup"),filter:l((function(t,e){if(t===void 0)return this;if(Ot(t)||Ta(t))return new cc(t).filter(this);if(tn(t)){for(var r=this.spawn(),n=this,i=0;i<n.length;i++){var a=n[i];(e?t.apply(e,[a,i,n]):t(a,i,n))&&r.push(a)}return r}return this.spawn()}),"filter"),not:l((function(t){if(t){Ot(t)&&(t=this.filter(t));for(var e=this.spawn(),r=0;r<this.length;r++){var n=this[r];t.has(n)||e.push(n)}return e}return this}),"not"),absoluteComplement:l((function(){return this.cy().mutableElements().not(this)}),"absoluteComplement"),intersect:l((function(t){if(Ot(t)){var e=t;return this.filter(e)}for(var r=this.spawn(),n=t,i=this.length<t.length,a=i?this:n,s=i?n:this,o=0;o<a.length;o++){var u=a[o];s.has(u)&&r.push(u)}return r}),"intersect"),xor:l((function(t){var e=this._private.cy;Ot(t)&&(t=e.$(t));var r=this.spawn(),n=t,i=l((function(a,s){for(var o=0;o<a.length;o++){var u=a[o],h=u._private.data.id;s.hasElementWithId(h)||r.push(u)}}),"add");return i(this,n),i(n,this),r}),"xor"),diff:l((function(t){var e=this._private.cy;Ot(t)&&(t=e.$(t));var r=this.spawn(),n=this.spawn(),i=this.spawn(),a=t,s=l((function(o,u,h){for(var d=0;d<o.length;d++){var p=o[d],f=p._private.data.id;u.hasElementWithId(f)?i.merge(p):h.push(p)}}),"add");return s(this,a,r),s(a,this,n),{left:r,right:n,both:i}}),"diff"),add:l((function(t){var e=this._private.cy;if(!t)return this;if(Ot(t)){var r=t;t=e.mutableElements().filter(r)}for(var n=this.spawnSelf(),i=0;i<t.length;i++){var a=t[i];!this.has(a)&&n.push(a)}return n}),"add"),merge:l((function(t){var e=this._private,r=e.cy;if(!t)return this;if(t&&Ot(t)){var n=t;t=r.mutableElements().filter(n)}for(var i=e.map,a=0;a<t.length;a++){var s=t[a],o=s._private.data.id;if(!i.has(o)){var u=this.length++;this[u]=s,i.set(o,{ele:s,index:u})}}return this}),"merge"),unmergeAt:l((function(t){var e=this[t].id(),r=this._private.map;this[t]=void 0,r.delete(e);var n=t===this.length-1;if(this.length>1&&!n){var i=this.length-1,a=this[i],s=a._private.data.id;this[i]=void 0,this[t]=a,r.set(s,{ele:a,index:t})}return this.length--,this}),"unmergeAt"),unmergeOne:l((function(t){t=t[0];var e=this._private,r=t._private.data.id,n=e.map.get(r);if(!n)return this;var i=n.index;return this.unmergeAt(i),this}),"unmergeOne"),unmerge:l((function(t){var e=this._private.cy;if(!t)return this;if(t&&Ot(t)){var r=t;t=e.mutableElements().filter(r)}for(var n=0;n<t.length;n++)this.unmergeOne(t[n]);return this}),"unmerge"),unmergeBy:l((function(t){for(var e=this.length-1;e>=0;e--)t(this[e])&&this.unmergeAt(e);return this}),"unmergeBy"),map:l((function(t,e){for(var r=[],n=this,i=0;i<n.length;i++){var a=n[i],s=e?t.apply(e,[a,i,n]):t(a,i,n);r.push(s)}return r}),"map"),reduce:l((function(t,e){for(var r=e,n=this,i=0;i<n.length;i++)r=t(r,n[i],i,n);return r}),"reduce"),max:l((function(t,e){for(var r,n=-1/0,i=this,a=0;a<i.length;a++){var s=i[a],o=e?t.apply(e,[s,a,i]):t(s,a,i);o>n&&(n=o,r=s)}return{value:n,ele:r}}),"max"),min:l((function(t,e){for(var r,n=1/0,i=this,a=0;a<i.length;a++){var s=i[a],o=e?t.apply(e,[s,a,i]):t(s,a,i);o<n&&(n=o,r=s)}return{value:n,ele:r}}),"min")},pr=Hse;pr.u=pr["|"]=pr["+"]=pr.union=pr.or=pr.add,pr["\\"]=pr["!"]=pr["-"]=pr.difference=pr.relativeComplement=pr.subtract=pr.not,pr.n=pr["&"]=pr["."]=pr.and=pr.intersection=pr.intersect,pr["^"]=pr["(+)"]=pr["(-)"]=pr.symmetricDifference=pr.symdiff=pr.xor,pr.fnFilter=pr.filterFn=pr.stdFilter=pr.filter,pr.complement=pr.abscomp=pr.absoluteComplement;var LCe={isNode:l((function(){return this.group()==="nodes"}),"isNode"),isEdge:l((function(){return this.group()==="edges"}),"isEdge"),isLoop:l((function(){return this.isEdge()&&this.source()[0]===this.target()[0]}),"isLoop"),isSimple:l((function(){return this.isEdge()&&this.source()[0]!==this.target()[0]}),"isSimple"),group:l((function(){var t=this[0];if(t)return t._private.group}),"group")},Xse=l((function(t,e){var r=t.cy().hasCompoundNodes();function n(u){var h=u.pstyle("z-compound-depth");return h.value==="auto"?r?u.zDepth():0:h.value==="bottom"?-1:h.value==="top"?RN:0}l(n,"getDepth");var i=n(t)-n(e);if(i!==0)return i;function a(u){return u.pstyle("z-index-compare").value==="auto"&&u.isNode()?1:0}l(a,"getEleDepth");var s=a(t)-a(e);if(s!==0)return s;var o=t.pstyle("z-index").value-e.pstyle("z-index").value;return o!==0?o:t.poolIndex()-e.poolIndex()}),"zIndexSort"),p6={forEach:l((function(t,e){if(tn(t))for(var r=this.length,n=0;n<r;n++){var i=this[n];if((e?t.apply(e,[i,n,this]):t(i,n,this))===!1)break}return this}),"forEach"),toArray:l((function(){for(var t=[],e=0;e<this.length;e++)t.push(this[e]);return t}),"toArray"),slice:l((function(t,e){var r=[],n=this.length;e==null&&(e=n),t==null&&(t=0),t<0&&(t=n+t),e<0&&(e=n+e);for(var i=t;i>=0&&i<e&&i<n;i++)r.push(this[i]);return this.spawn(r)}),"slice"),size:l((function(){return this.length}),"size"),eq:l((function(t){return this[t]||this.spawn()}),"eq"),first:l((function(){return this[0]||this.spawn()}),"first"),last:l((function(){return this[this.length-1]||this.spawn()}),"last"),empty:l((function(){return this.length===0}),"empty"),nonempty:l((function(){return!this.empty()}),"nonempty"),sort:l((function(t){if(!tn(t))return this;var e=this.toArray().sort(t);return this.spawn(e)}),"sort"),sortByZIndex:l((function(){return this.sort(Xse)}),"sortByZIndex"),zDepth:l((function(){var t=this[0];if(t){var e=t._private;if(e.group==="nodes"){var r=e.data.parent?t.parents().size():0;return t.isParent()?r:RN-1}var n=e.source,i=e.target,a=n.zDepth(),s=i.zDepth();return Math.max(a,s,0)}}),"zDepth")};p6.each=p6.forEach;var NCe=l((function(){var t="undefined";(typeof Symbol>"u"?"undefined":Un(Symbol))!=t&&Un(Symbol.iterator)!=t&&(p6[Symbol.iterator]=function(){var e=this,r={value:void 0,done:!1},n=0,i=this.length;return SN({next:l((function(){return n<i?r.value=e[n++]:(r.value=void 0,r.done=!0),r}),"next")},Symbol.iterator,(function(){return this}))})}),"defineSymbolIterator");NCe();var ICe=Jn({nodeDimensionsIncludeLabels:!1}),l4={layoutDimensions:l((function(t){var e;if(t=ICe(t),this.takesUpSpace())if(t.nodeDimensionsIncludeLabels){var r=this.boundingBox();e={w:r.w,h:r.h}}else e={w:this.outerWidth(),h:this.outerHeight()};else e={w:0,h:0};return e.w!==0&&e.h!==0||(e.w=e.h=1),e}),"layoutDimensions"),layoutPositions:l((function(t,e,r){var n=this.nodes().filter((function(b){return!b.isParent()})),i=this.cy(),a=e.eles,s=l((function(b){return b.id()}),"getMemoizeKey"),o=ev(r,s);t.emit({type:"layoutstart",layout:t}),t.animations=[];var u=l((function(b,w,T){var k=w.x1+w.w/2,C=w.y1+w.h/2;return{x:k+(T.x-k)*b,y:C+(T.y-C)*b}}),"calculateSpacing"),h=e.spacingFactor&&e.spacingFactor!==1,d=l((function(){if(!h)return null;for(var b=ha(),w=0;w<n.length;w++){var T=n[w],k=o(T,w);XTe(b,k.x,k.y)}return b}),"spacingBb")(),p=ev((function(b,w){var T=o(b,w);if(h){var k=Math.abs(e.spacingFactor);T=u(k,d,T)}return e.transform!=null&&(T=e.transform(b,T)),T}),s);if(e.animate){for(var f=0;f<n.length;f++){var g=n[f],m=p(g,f);if(e.animateFilter==null||e.animateFilter(g,f)){var y=g.animation({position:m,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(y)}else g.position(m)}if(e.fit){var v=i.animation({fit:{boundingBox:a.boundingBoxAt(p),padding:e.padding},duration:e.animationDuration,easing:e.animationEasing});t.animations.push(v)}else if(e.zoom!==void 0&&e.pan!==void 0){var x=i.animation({zoom:e.zoom,pan:e.pan,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(x)}t.animations.forEach((function(b){return b.play()})),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),Tm.all(t.animations.map((function(b){return b.promise()}))).then((function(){t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t})}))}else n.positions(p),e.fit&&i.fit(e.eles,e.padding),e.zoom!=null&&i.zoom(e.zoom),e.pan&&i.pan(e.pan),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t});return this}),"layoutPositions"),layout:l((function(t){return this.cy().makeLayout(Gt({},t,{eles:this}))}),"layout")};function KN(t,e,r){var n,i=r._private,a=i.styleCache=i.styleCache||[];return(n=a[t])!=null?n:n=a[t]=e(r)}function ax(t,e){return t=lc(t),l((function(r){return KN(t,e,r)}),"cachedStyleFunction")}function sv(t,e){t=lc(t);var r=l((function(n){return e.call(n)}),"selfFn");return l((function(){var n=this[0];if(n)return KN(t,r,n)}),"cachedPrototypeStyleFunction")}l4.createLayout=l4.makeLayout=l4.layout,l(KN,"styleCache"),l(ax,"cacheStyleFunction"),l(sv,"cachePrototypeStyleFunction");var si={recalculateRenderedStyle:l((function(t){var e=this.cy(),r=e.renderer(),n=e.styleEnabled();return r&&n&&r.recalculateRenderedStyle(this,t),this}),"recalculateRenderedStyle"),dirtyStyleCache:l((function(){var t,e=this.cy(),r=l((function(n){return n._private.styleCache=null}),"dirty");return e.hasCompoundNodes()?((t=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(t.connectedEdges()),t.forEach(r)):this.forEach((function(n){r(n),n.connectedEdges().forEach(r)})),this}),"dirtyStyleCache"),updateStyle:l((function(t){var e=this._private.cy;if(!e.styleEnabled())return this;if(e.batching())return e._private.batchStyleEles.merge(this),this;var r=this;t=!(!t&&t!==void 0),e.hasCompoundNodes()&&(r=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var n=r;return t?n.emitAndNotify("style"):n.emit("style"),r.forEach((function(i){return i._private.styleDirty=!0})),this}),"updateStyle"),cleanStyle:l((function(){var t=this.cy();if(t.styleEnabled())for(var e=0;e<this.length;e++){var r=this[e];r._private.styleDirty&&(r._private.styleDirty=!1,t.style().apply(r))}}),"cleanStyle"),parsedStyle:l((function(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=this[0],n=r.cy();if(n.styleEnabled()&&r){r._private.styleDirty&&(r._private.styleDirty=!1,n.style().apply(r));var i=r._private.style[t];return i??(e?n.style().getDefaultProperty(t):null)}}),"parsedStyle"),numericStyle:l((function(t){var e=this[0];if(e.cy().styleEnabled()&&e){var r=e.pstyle(t);return r.pfValue!==void 0?r.pfValue:r.value}}),"numericStyle"),numericStyleUnits:l((function(t){var e=this[0];if(e.cy().styleEnabled())return e?e.pstyle(t).units:void 0}),"numericStyleUnits"),renderedStyle:l((function(t){var e=this.cy();if(!e.styleEnabled())return this;var r=this[0];return r?e.style().getRenderedStyle(r,t):void 0}),"renderedStyle"),style:l((function(t,e){var r=this.cy();if(!r.styleEnabled())return this;var n=r.style();if(ur(t)){var i=t;n.applyBypass(this,i,!1),this.emitAndNotify("style")}else if(Ot(t)){if(e===void 0){var a=this[0];return a?n.getStylePropertyValue(a,t):void 0}n.applyBypass(this,t,e,!1),this.emitAndNotify("style")}else if(t===void 0){var s=this[0];return s?n.getRawStyle(s):void 0}return this}),"style"),removeStyle:l((function(t){var e=this.cy();if(!e.styleEnabled())return this;var r=e.style(),n=this;if(t===void 0)for(var i=0;i<n.length;i++){var a=n[i];r.removeAllBypasses(a,!1)}else{t=t.split(/\s+/);for(var s=0;s<n.length;s++){var o=n[s];r.removeBypasses(o,t,!1)}}return this.emitAndNotify("style"),this}),"removeStyle"),show:l((function(){return this.css("display","element"),this}),"show"),hide:l((function(){return this.css("display","none"),this}),"hide"),effectiveOpacity:l((function(){var t=this.cy();if(!t.styleEnabled())return 1;var e=t.hasCompoundNodes(),r=this[0];if(r){var n=r._private,i=r.pstyle("opacity").value;if(!e)return i;var a=n.data.parent?r.parents():null;if(a)for(var s=0;s<a.length;s++)i*=a[s].pstyle("opacity").value;return i}}),"effectiveOpacity"),transparent:l((function(){if(!this.cy().styleEnabled())return!1;var t=this[0],e=t.cy().hasCompoundNodes();return t?e?t.effectiveOpacity()===0:t.pstyle("opacity").value===0:void 0}),"transparent"),backgrounding:l((function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}),"backgrounding")};function c4(t,e){var r=t._private.data.parent?t.parents():null;if(r){for(var n=0;n<r.length;n++)if(!e(r[n]))return!1}return!0}function ck(t){var e=t.ok,r=t.edgeOkViaNode||t.ok,n=t.parentOk||t.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var a=this[0],s=i.hasCompoundNodes();if(a){var o=a._private;if(!e(a))return!1;if(a.isNode())return!s||c4(a,n);var u=o.source,h=o.target;return r(u)&&(!s||c4(u,r))&&(u===h||r(h)&&(!s||c4(h,r)))}}}l(c4,"checkCompound"),l(ck,"defineDerivedStateFunction");var Em=ax("eleTakesUpSpace",(function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(!t.isNode()||t.height()!==0)}));si.takesUpSpace=sv("takesUpSpace",ck({ok:Em}));var RCe=ax("eleInteractive",(function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&Em(t)})),MCe=ax("parentInteractive",(function(t){return t.pstyle("visibility").value==="visible"&&Em(t)}));si.interactive=sv("interactive",ck({ok:RCe,parentOk:MCe,edgeOkViaNode:Em})),si.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var DCe=ax("eleVisible",(function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&Em(t)})),OCe=Em;si.visible=sv("visible",ck({ok:DCe,edgeOkViaNode:OCe})),si.hidden=function(){var t=this[0];if(t)return!t.visible()},si.isBundledBezier=sv("isBundledBezier",(function(){return!!this.cy().styleEnabled()&&!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace()})),si.bypass=si.css=si.style,si.renderedCss=si.renderedStyle,si.removeBypass=si.removeCss=si.removeStyle,si.pstyle=si.parsedStyle;var Bl={};function ES(t){return function(){var e=arguments,r=[];if(e.length===2){var n=e[0],i=e[1];this.on(t.event,n,i)}else if(e.length===1&&tn(e[0])){var a=e[0];this.on(t.event,a)}else if(e.length===0||e.length===1&&Dr(e[0])){for(var s=e.length===1?e[0]:null,o=0;o<this.length;o++){var u=this[o],h=!t.ableField||u._private[t.ableField],d=u._private[t.field]!=t.value;if(t.overrideAble){var p=t.overrideAble(u);if(p!==void 0&&(h=p,!p))return this}h&&(u._private[t.field]=t.value,d&&r.push(u))}var f=this.spawn(r);f.updateStyle(),f.emit(t.event),s&&f.emit(s)}return this}}function Ac(t){Bl[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var r=t.overrideField(e);if(r!==void 0)return r}return e._private[t.field]}},Bl[t.on]=ES({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),Bl[t.off]=ES({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}l(ES,"defineSwitchFunction"),l(Ac,"defineSwitchSet"),Ac({field:"locked",overrideField:l((function(t){return!!t.cy().autolock()||void 0}),"overrideField"),on:"lock",off:"unlock"}),Ac({field:"grabbable",overrideField:l((function(t){return!t.cy().autoungrabify()&&!t.pannable()&&void 0}),"overrideField"),on:"grabify",off:"ungrabify"}),Ac({field:"selected",ableField:"selectable",overrideAble:l((function(t){return!t.cy().autounselectify()&&void 0}),"overrideAble"),on:"select",off:"unselect"}),Ac({field:"selectable",overrideField:l((function(t){return!t.cy().autounselectify()&&void 0}),"overrideField"),on:"selectify",off:"unselectify"}),Bl.deselect=Bl.unselect,Bl.grabbed=function(){var t=this[0];if(t)return t._private.grabbed},Ac({field:"active",on:"activate",off:"unactivate"}),Ac({field:"pannable",on:"panify",off:"unpanify"}),Bl.inactive=function(){var t=this[0];if(t)return!t._private.active};var mi={},FP=l((function(t){return l((function(e){for(var r=[],n=0;n<this.length;n++){var i=this[n];if(i.isNode()){for(var a=!1,s=i.connectedEdges(),o=0;o<s.length;o++){var u=s[o],h=u.source(),d=u.target();if(t.noIncomingEdges&&d===i&&h!==i||t.noOutgoingEdges&&h===i&&d!==i){a=!0;break}}a||r.push(i)}}return this.spawn(r,!0).filter(e)}),"dagExtremityImpl")}),"defineDagExtremity"),zP=l((function(t){return function(e){for(var r=[],n=0;n<this.length;n++){var i=this[n];if(i.isNode())for(var a=i.connectedEdges(),s=0;s<a.length;s++){var o=a[s],u=o.source(),h=o.target();t.outgoing&&u===i?(r.push(o),r.push(h)):t.incoming&&h===i&&(r.push(o),r.push(u))}}return this.spawn(r,!0).filter(e)}}),"defineDagOneHop"),GP=l((function(t){return function(e){for(var r=this,n=[],i={};;){var a=t.outgoing?r.outgoers():r.incomers();if(a.length===0)break;for(var s=!1,o=0;o<a.length;o++){var u=a[o],h=u.id();i[h]||(i[h]=!0,n.push(u),s=!0)}if(!s)break;r=a}return this.spawn(n,!0).filter(e)}}),"defineDagAllHops");function PT(t){return l((function(e){for(var r=[],n=0;n<this.length;n++){var i=this[n]._private[t.attr];i&&r.push(i)}return this.spawn(r,!0).filter(e)}),"sourceImpl")}function BT(t){return l((function(e){var r=[],n=this._private.cy,i=t||{};Ot(e)&&(e=n.$(e));for(var a=0;a<e.length;a++)for(var s=e[a]._private.edges,o=0;o<s.length;o++){var u=s[o],h=u._private.data,d=this.hasElementWithId(h.source)&&e.hasElementWithId(h.target),p=e.hasElementWithId(h.source)&&this.hasElementWithId(h.target);if(d||p){if((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!d||i.thisIsTgt&&!p))continue;r.push(u)}}return this.spawn(r,!0)}),"edgesWithImpl")}function $T(t){return t=Gt({},{codirected:!1},t),l((function(e){for(var r=[],n=this.edges(),i=t,a=0;a<n.length;a++)for(var s=n[a]._private,o=s.source,u=o._private.data.id,h=s.data.target,d=o._private.edges,p=0;p<d.length;p++){var f=d[p],g=f._private.data,m=g.target,y=g.source,v=m===h&&y===u,x=u===m&&h===y;(i.codirected&&v||!i.codirected&&(v||x))&&r.push(f)}return this.spawn(r,!0).filter(e)}),"parallelEdgesImpl")}mi.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null},Gt(mi,{roots:FP({noIncomingEdges:!0}),leaves:FP({noOutgoingEdges:!0}),outgoers:Oa(zP({outgoing:!0}),"outgoers"),successors:GP({outgoing:!0}),incomers:Oa(zP({incoming:!0}),"incomers"),predecessors:GP({incoming:!0})}),Gt(mi,{neighborhood:Oa((function(t){for(var e=[],r=this.nodes(),n=0;n<r.length;n++)for(var i=r[n],a=i.connectedEdges(),s=0;s<a.length;s++){var o=a[s],u=o.source(),h=o.target(),d=i===u?h:u;d.length>0&&e.push(d[0]),e.push(o[0])}return this.spawn(e,!0).filter(t)}),"neighborhood"),closedNeighborhood:l((function(t){return this.neighborhood().add(this).filter(t)}),"closedNeighborhood"),openNeighborhood:l((function(t){return this.neighborhood(t)}),"openNeighborhood")}),mi.neighbourhood=mi.neighborhood,mi.closedNeighbourhood=mi.closedNeighborhood,mi.openNeighbourhood=mi.openNeighborhood,Gt(mi,{source:Oa(l((function(t){var e,r=this[0];return r&&(e=r._private.source||r.cy().collection()),e&&t?e.filter(t):e}),"sourceImpl"),"source"),target:Oa(l((function(t){var e,r=this[0];return r&&(e=r._private.target||r.cy().collection()),e&&t?e.filter(t):e}),"targetImpl"),"target"),sources:PT({attr:"source"}),targets:PT({attr:"target"})}),l(PT,"defineSourceFunction"),Gt(mi,{edgesWith:Oa(BT(),"edgesWith"),edgesTo:Oa(BT({thisIsSrc:!0}),"edgesTo")}),l(BT,"defineEdgesWithFunction"),Gt(mi,{connectedEdges:Oa((function(t){for(var e=[],r=0;r<this.length;r++){var n=this[r];if(n.isNode())for(var i=n._private.edges,a=0;a<i.length;a++){var s=i[a];e.push(s)}}return this.spawn(e,!0).filter(t)}),"connectedEdges"),connectedNodes:Oa((function(t){for(var e=[],r=0;r<this.length;r++){var n=this[r];n.isEdge()&&(e.push(n.source()[0]),e.push(n.target()[0]))}return this.spawn(e,!0).filter(t)}),"connectedNodes"),parallelEdges:Oa($T(),"parallelEdges"),codirectedEdges:Oa($T({codirected:!0}),"codirectedEdges")}),l($T,"defineParallelEdgesFunction"),Gt(mi,{components:l((function(t){var e=this,r=e.cy(),n=r.collection(),i=t==null?e.nodes():t.nodes(),a=[];t!=null&&i.empty()&&(i=t.sources());var s=l((function(u,h){n.merge(u),i.unmerge(u),h.merge(u)}),"visitInComponent");if(i.empty())return e.spawn();var o=l((function(){var u=r.collection();a.push(u);var h=i[0];s(h,u),e.bfs({directed:!1,roots:h,visit:l((function(d){return s(d,u)}),"visit")}),u.forEach((function(d){d.connectedEdges().forEach((function(p){e.has(p)&&u.has(p.source())&&u.has(p.target())&&u.merge(p)}))}))}),"_loop");do o();while(i.length>0);return a}),"components"),component:l((function(){var t=this[0];return t.cy().mutableElements().components(t)[0]}),"component")}),mi.componentsOf=mi.components;var li=l((function(t,e){var r=arguments.length>2&&arguments[2]!==void 0&&arguments[2],n=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t!==void 0){var i=new Qs,a=!1;if(e){if(e.length>0&&ur(e[0])&&!Jv(e[0])){a=!0;for(var s=[],o=new km,u=0,h=e.length;u<h;u++){var d=e[u];d.data==null&&(d.data={});var p=d.data;if(p.id==null)p.id=Nae();else if(t.hasElementWithId(p.id)||o.has(p.id))continue;var f=new nk(t,d,!1);s.push(f),o.add(p.id)}e=s}}else e=[];this.length=0;for(var g=0,m=e.length;g<m;g++){var y=e[g][0];if(y!=null){var v=y._private.data.id;r&&i.has(v)||(r&&i.set(v,{index:this.length,ele:y}),this[this.length]=y,this.length++)}}this._private={eles:this,cy:t,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(x){this.lazyMap=x},rebuildMap:l((function(){for(var x=this.lazyMap=new Qs,b=this.eles,w=0;w<b.length;w++){var T=b[w];x.set(T.id(),{index:w,ele:T})}}),"rebuildMap")},r&&(this._private.map=i),a&&!n&&this.restore()}else en("A collection must have a reference to the core")}),"Collection"),Pr=nk.prototype=li.prototype=Object.create(Array.prototype);Pr.instanceString=function(){return"collection"},Pr.spawn=function(t,e){return new li(this.cy(),t,e)},Pr.spawnSelf=function(){return this.spawn(this)},Pr.cy=function(){return this._private.cy},Pr.renderer=function(){return this._private.cy.renderer()},Pr.element=function(){return this[0]},Pr.collection=function(){return iae(this)?this:new li(this._private.cy,[this])},Pr.unique=function(){return new li(this._private.cy,this,!0)},Pr.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)},Pr.getElementById=function(t){t=""+t;var e=this._private.cy,r=this._private.map.get(t);return r?r.ele:new li(e)},Pr.$id=Pr.getElementById,Pr.poolIndex=function(){var t=this._private.cy._private.elements,e=this[0]._private.data.id;return t._private.map.get(e).index},Pr.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index},Pr.indexOfId=function(t){return t=""+t,this._private.map.get(t).index},Pr.json=function(t){var e=this.element(),r=this.cy();if(e==null&&t)return this;if(e!=null){var n=e._private;if(ur(t)){if(r.startBatch(),t.data){e.data(t.data);var i=n.data;if(e.isEdge()){var a=!1,s={},o=t.data.source,u=t.data.target;o!=null&&o!=i.source&&(s.source=""+o,a=!0),u!=null&&u!=i.target&&(s.target=""+u,a=!0),a&&(e=e.move(s))}else{var h="parent"in t.data,d=t.data.parent;!h||d==null&&i.parent==null||d==i.parent||(d===void 0&&(d=null),d!=null&&(d=""+d),e=e.move({parent:d}))}}t.position&&e.position(t.position);var p=l((function(m,y,v){var x=t[m];x!=null&&x!==n[m]&&(x?e[y]():e[v]())}),"checkSwitch");return p("removed","remove","restore"),p("selected","select","unselect"),p("selectable","selectify","unselectify"),p("locked","lock","unlock"),p("grabbable","grabify","ungrabify"),p("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),r.endBatch(),this}if(t===void 0){var f={data:Zs(n.data),position:Zs(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};f.classes="";var g=0;return n.classes.forEach((function(m){return f.classes+=g++==0?m:" "+m})),f}}},Pr.jsons=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e].json();t.push(r)}return t},Pr.clone=function(){for(var t=this.cy(),e=[],r=0;r<this.length;r++){var n=this[r].json(),i=new nk(t,n,!1);e.push(i)}return new li(t,e)},Pr.copy=Pr.clone,Pr.restore=function(){for(var t,e,r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=this,a=i.cy(),s=a._private,o=[],u=[],h=0,d=i.length;h<d;h++){var p=i[h];n&&!p.removed()||(p.isNode()?o.push(p):u.push(p))}t=o.concat(u);var f=l((function(){t.splice(e,1),e--}),"removeFromElements");for(e=0;e<t.length;e++){var g=t[e],m=g._private,y=m.data;if(g.clearTraversalCache(),n||m.removed)if(y.id===void 0)y.id=Nae();else if(ct(y.id))y.id=""+y.id;else{if(oc(y.id)||!Ot(y.id)){en("Can not create element with invalid string ID `"+y.id+"`"),f();continue}if(a.hasElementWithId(y.id)){en("Can not create second element with ID `"+y.id+"`"),f();continue}}var v=y.id;if(g.isNode()){var x=m.position;x.x==null&&(x.x=0),x.y==null&&(x.y=0)}if(g.isEdge()){for(var b=g,w=["source","target"],T=w.length,k=!1,C=0;C<T;C++){var E=w[C],_=y[E];ct(_)&&(_=y[E]=""+y[E]),_==null||_===""?(en("Can not create edge `"+v+"` with unspecified "+E),k=!0):a.hasElementWithId(_)||(en("Can not create edge `"+v+"` with nonexistant "+E+" `"+_+"`"),k=!0)}if(k){f();continue}var S=a.getElementById(y.source),N=a.getElementById(y.target);S.same(N)?S._private.edges.push(b):(S._private.edges.push(b),N._private.edges.push(b)),b._private.source=S,b._private.target=N}m.map=new Qs,m.map.set(v,{ele:g,index:0}),m.removed=!1,n&&a.addToPool(g)}for(var O=0;O<o.length;O++){var B=o[O],L=B._private.data;ct(L.parent)&&(L.parent=""+L.parent);var I=L.parent,A=I!=null;if(A||B._private.parent){var M=B._private.parent?a.collection().merge(B._private.parent):a.getElementById(I);if(M.empty())L.parent=void 0;else if(M[0].removed())kr("Node added with missing parent, reference to parent removed"),L.parent=void 0,B._private.parent=null;else{for(var D=!1,R=M;!R.empty();){if(B.same(R)){D=!0,L.parent=void 0;break}R=R.parent()}D||(M[0]._private.children.push(B),B._private.parent=M[0],s.hasCompoundNodes=!0)}}}if(t.length>0){for(var P=t.length===i.length?i:new li(a,t),$=0;$<P.length;$++){var z=P[$];z.isNode()||(z.parallelEdges().clearTraversalCache(),z.source().clearTraversalCache(),z.target().clearTraversalCache())}(s.hasCompoundNodes?a.collection().merge(P).merge(P.connectedNodes()).merge(P.parent()):P).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?P.emitAndNotify("add"):n&&P.emit("add")}return i},Pr.removed=function(){var t=this[0];return t&&t._private.removed},Pr.inside=function(){var t=this[0];return t&&!t._private.removed},Pr.remove=function(){var t=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=this,n=[],i={},a=r._private.cy;function s(I){for(var A=I._private.edges,M=0;M<A.length;M++)u(A[M])}function o(I){for(var A=I._private.children,M=0;M<A.length;M++)u(A[M])}function u(I){var A=i[I.id()];e&&I.removed()||A||(i[I.id()]=!0,I.isNode()?(n.push(I),s(I),o(I)):n.unshift(I))}l(s,"addConnectedEdges"),l(o,"addChildren"),l(u,"add");for(var h=0,d=r.length;h<d;h++){var p=r[h];u(p)}function f(I,A){var M=I._private.edges;Dl(M,A),I.clearTraversalCache()}function g(I){I.clearTraversalCache()}l(f,"removeEdgeRef"),l(g,"removeParallelRef");var m=[];function y(I,A){A=A[0];var M=(I=I[0])._private.children,D=I.id();Dl(M,A),A._private.parent=null,m.ids[D]||(m.ids[D]=!0,m.push(I))}m.ids={},l(y,"removeChildRef"),r.dirtyCompoundBoundsCache(),e&&a.removeFromPool(n);for(var v=0;v<n.length;v++){var x=n[v];if(x.isEdge()){var b=x.source()[0],w=x.target()[0];f(b,x),f(w,x);for(var T=x.parallelEdges(),k=0;k<T.length;k++){var C=T[k];g(C),C.isBundledBezier()&&C.dirtyBoundingBoxCache()}}else{var E=x.parent();E.length!==0&&y(E,x)}e&&(x._private.removed=!0)}var _=a._private.elements;a._private.hasCompoundNodes=!1;for(var S=0;S<_.length;S++){var N=_[S];if(N.isParent()){a._private.hasCompoundNodes=!0;break}}var O=new li(this.cy(),n);O.size()>0&&(t?O.emitAndNotify("remove"):e&&O.emit("remove"));for(var B=0;B<m.length;B++){var L=m[B];e&&L.removed()||L.updateStyle()}return O},Pr.move=function(t){var e=this._private.cy,r=this,n=!1,i=!1,a=l((function(f){return f==null?f:""+f}),"toString");if(t.source!==void 0||t.target!==void 0){var s=a(t.source),o=a(t.target),u=s!=null&&e.hasElementWithId(s),h=o!=null&&e.hasElementWithId(o);(u||h)&&(e.batch((function(){r.remove(n,i),r.emitAndNotify("moveout");for(var f=0;f<r.length;f++){var g=r[f],m=g._private.data;g.isEdge()&&(u&&(m.source=s),h&&(m.target=o))}r.restore(n,i)})),r.emitAndNotify("move"))}else if(t.parent!==void 0){var d=a(t.parent);if(d===null||e.hasElementWithId(d)){var p=d===null?void 0:d;e.batch((function(){var f=r.remove(n,i);f.emitAndNotify("moveout");for(var g=0;g<r.length;g++){var m=r[g],y=m._private.data;m.isNode()&&(y.parent=p)}f.restore(n,i)})),r.emitAndNotify("move")}}return this},[Gae,J_e,s4,kl,Yh,fCe,o4,_Ce,Vse,Hse,LCe,p6,l4,si,Bl,mi].forEach((function(t){Gt(Pr,t)}));var PCe={add:l((function(t){var e,r=this;if(Ta(t)){var n=t;if(n._private.cy===r)e=n.restore();else{for(var i=[],a=0;a<n.length;a++){var s=n[a];i.push(s.json())}e=new li(r,i)}}else if(Dr(t))e=new li(r,t);else if(ur(t)&&(Dr(t.nodes)||Dr(t.edges))){for(var o=t,u=[],h=["nodes","edges"],d=0,p=h.length;d<p;d++){var f=h[d],g=o[f];if(Dr(g))for(var m=0,y=g.length;m<y;m++){var v=Gt({group:f},g[m]);u.push(v)}}e=new li(r,u)}else e=new nk(r,t).collection();return e}),"add"),remove:l((function(t){if(!Ta(t)){if(Ot(t)){var e=t;t=this.$(e)}}return t.remove()}),"remove")};function Kse(t,e,r,n){var i=4,a=.001,s=1e-7,o=10,u=11,h=1/(u-1),d=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var p=0;p<4;++p)if(typeof arguments[p]!="number"||isNaN(arguments[p])||!isFinite(arguments[p]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var f=d?new Float32Array(u):new Array(u);function g(N,O){return 1-3*O+3*N}function m(N,O){return 3*O-6*N}function y(N){return 3*N}function v(N,O,B){return((g(O,B)*N+m(O,B))*N+y(O))*N}function x(N,O,B){return 3*g(O,B)*N*N+2*m(O,B)*N+y(O)}function b(N,O){for(var B=0;B<i;++B){var L=x(O,t,r);if(L===0)return O;O-=(v(O,t,r)-N)/L}return O}function w(){for(var N=0;N<u;++N)f[N]=v(N*h,t,r)}function T(N,O,B){var L,I,A=0;do(L=v(I=O+(B-O)/2,t,r)-N)>0?B=I:O=I;while(Math.abs(L)>s&&++A<o);return I}function k(N){for(var O=0,B=1,L=u-1;B!==L&&f[B]<=N;++B)O+=h;--B;var I=O+(N-f[B])/(f[B+1]-f[B])*h,A=x(I,t,r);return A>=a?b(N,I):A===0?I:T(N,O,O+h)}l(g,"A"),l(m,"B"),l(y,"C"),l(v,"calcBezier"),l(x,"getSlope"),l(b,"newtonRaphsonIterate"),l(w,"calcSampleValues"),l(T,"binarySubdivide"),l(k,"getTForX");var C=!1;function E(){C=!0,t===e&&r===n||w()}l(E,"precompute");var _=l((function(N){return C||E(),t===e&&r===n?N:N===0?0:N===1?1:v(k(N),e,n)}),"f");_.getControlPoints=function(){return[{x:t,y:e},{x:r,y:n}]};var S="generateBezier("+[t,e,r,n]+")";return _.toString=function(){return S},_}l(Kse,"generateCubicBezier");var BCe=(function(){function t(n){return-n.tension*n.x-n.friction*n.v}function e(n,i,a){var s={x:n.x+a.dx*i,v:n.v+a.dv*i,tension:n.tension,friction:n.friction};return{dx:s.v,dv:t(s)}}function r(n,i){var a={dx:n.v,dv:t(n)},s=e(n,.5*i,a),o=e(n,.5*i,s),u=e(n,i,o),h=1/6*(a.dx+2*(s.dx+o.dx)+u.dx),d=1/6*(a.dv+2*(s.dv+o.dv)+u.dv);return n.x=n.x+h*i,n.v=n.v+d*i,n}return l(t,"springAccelerationForState"),l(e,"springEvaluateStateWithDerivative"),l(r,"springIntegrateState"),l((function n(i,a,s){var o,u,h,d={x:-1,v:0,tension:null,friction:null},p=[0],f=0,g=1e-4;for(i=parseFloat(i)||500,a=parseFloat(a)||20,s=s||null,d.tension=i,d.friction=a,u=(o=s!==null)?(f=n(i,a))/s*.016:.016;h=r(h||d,u),p.push(1+h.x),f+=16,Math.abs(h.x)>g&&Math.abs(h.v)>g;);return o?function(m){return p[m*(p.length-1)|0]}:f}),"springRK4Factory")})(),Br=l((function(t,e,r,n){var i=Kse(t,e,r,n);return function(a,s,o){return a+(s-a)*i(o)}}),"cubicBezier"),u4={linear:l((function(t,e,r){return t+(e-t)*r}),"linear"),ease:Br(.25,.1,.25,1),"ease-in":Br(.42,0,1,1),"ease-out":Br(0,0,.58,1),"ease-in-out":Br(.42,0,.58,1),"ease-in-sine":Br(.47,0,.745,.715),"ease-out-sine":Br(.39,.575,.565,1),"ease-in-out-sine":Br(.445,.05,.55,.95),"ease-in-quad":Br(.55,.085,.68,.53),"ease-out-quad":Br(.25,.46,.45,.94),"ease-in-out-quad":Br(.455,.03,.515,.955),"ease-in-cubic":Br(.55,.055,.675,.19),"ease-out-cubic":Br(.215,.61,.355,1),"ease-in-out-cubic":Br(.645,.045,.355,1),"ease-in-quart":Br(.895,.03,.685,.22),"ease-out-quart":Br(.165,.84,.44,1),"ease-in-out-quart":Br(.77,0,.175,1),"ease-in-quint":Br(.755,.05,.855,.06),"ease-out-quint":Br(.23,1,.32,1),"ease-in-out-quint":Br(.86,0,.07,1),"ease-in-expo":Br(.95,.05,.795,.035),"ease-out-expo":Br(.19,1,.22,1),"ease-in-out-expo":Br(1,0,0,1),"ease-in-circ":Br(.6,.04,.98,.335),"ease-out-circ":Br(.075,.82,.165,1),"ease-in-out-circ":Br(.785,.135,.15,.86),spring:l((function(t,e,r){if(r===0)return u4.linear;var n=BCe(t,e,r);return function(i,a,s){return i+(a-i)*n(s)}}),"spring"),"cubic-bezier":Br};function _S(t,e,r,n,i){if(n===1||e===r)return r;var a=i(e,r,n);return t==null||((t.roundValue||t.color)&&(a=Math.round(a)),t.min!==void 0&&(a=Math.max(a,t.min)),t.max!==void 0&&(a=Math.min(a,t.max))),a}function CS(t,e){return t.pfValue!=null||t.value!=null?t.pfValue==null||e!=null&&e.type.units==="%"?t.value:t.pfValue:t}function Yc(t,e,r,n,i){var a=i!=null?i.type:null;r<0?r=0:r>1&&(r=1);var s=CS(t,i),o=CS(e,i);if(ct(s)&&ct(o))return _S(a,s,o,r,n);if(Dr(s)&&Dr(o)){for(var u=[],h=0;h<o.length;h++){var d=s[h],p=o[h];if(d!=null&&p!=null){var f=_S(a,d,p,r,n);u.push(f)}else u.push(p)}return u}}function Zse(t,e,r,n){var i=!n,a=t._private,s=e._private,o=s.easing,u=s.startTime,h=(n?t:t.cy()).style();if(!s.easingImpl)if(o==null)s.easingImpl=u4.linear;else{var d,p,f;Ot(o)?d=h.parse("transition-timing-function",o).value:d=o,Ot(d)?(p=d,f=[]):(p=d[1],f=d.slice(2).map((function(M){return+M}))),f.length>0?(p==="spring"&&f.push(s.duration),s.easingImpl=u4[p].apply(null,f)):s.easingImpl=u4[p]}var g,m=s.easingImpl;if(g=s.duration===0?1:(r-u)/s.duration,s.applying&&(g=s.progress),g<0?g=0:g>1&&(g=1),s.delay==null){var y=s.startPosition,v=s.position;if(v&&i&&!t.locked()){var x={};Hh(y.x,v.x)&&(x.x=Yc(y.x,v.x,g,m)),Hh(y.y,v.y)&&(x.y=Yc(y.y,v.y,g,m)),t.position(x)}var b=s.startPan,w=s.pan,T=a.pan,k=w!=null&&n;k&&(Hh(b.x,w.x)&&(T.x=Yc(b.x,w.x,g,m)),Hh(b.y,w.y)&&(T.y=Yc(b.y,w.y,g,m)),t.emit("pan"));var C=s.startZoom,E=s.zoom,_=E!=null&&n;_&&(Hh(C,E)&&(a.zoom=nv(a.minZoom,Yc(C,E,g,m),a.maxZoom)),t.emit("zoom")),(k||_)&&t.emit("viewport");var S=s.style;if(S&&S.length>0&&i){for(var N=0;N<S.length;N++){var O=S[N],B=O.name,L=O,I=s.startStyle[B],A=Yc(I,L,g,m,h.properties[I.name]);h.overrideBypass(t,B,A)}t.emit("style")}}return s.progress=g,g}function Hh(t,e){return t!=null&&e!=null&&(!(!ct(t)||!ct(e))||!(!t||!e))}function Qse(t,e,r,n){var i=e._private;i.started=!0,i.startTime=r-i.progress*i.duration}function SS(t,e){var r=e._private.aniEles,n=[];function i(h,d){var p=h._private,f=p.animation.current,g=p.animation.queue,m=!1;if(f.length===0){var y=g.shift();y&&f.push(y)}for(var v=l((function(T){for(var k=T.length-1;k>=0;k--)(0,T[k])();T.splice(0,T.length)}),"callbacks"),x=f.length-1;x>=0;x--){var b=f[x],w=b._private;w.stopped?(f.splice(x,1),w.hooked=!1,w.playing=!1,w.started=!1,v(w.frames)):(w.playing||w.applying)&&(w.playing&&w.applying&&(w.applying=!1),w.started||Qse(0,b,t),Zse(h,b,t,d),w.applying&&(w.applying=!1),v(w.frames),w.step!=null&&w.step(t),b.completed()&&(f.splice(x,1),w.hooked=!1,w.playing=!1,w.started=!1,v(w.completes)),m=!0)}return d||f.length!==0||g.length!==0||n.push(h),m}l(i,"stepOne");for(var a=!1,s=0;s<r.length;s++){var o=i(r[s]);a=a||o}var u=i(e,!0);(a||u)&&(r.length>0?e.notify("draw",r):e.notify("draw")),r.unmerge(n),e.emit("step")}l(_S,"getEasedValue"),l(CS,"getValue"),l(Yc,"ease"),l(Zse,"step$1"),l(Hh,"valid"),l(Qse,"startAnimation"),l(SS,"stepAll");var $Ce={animate:br.animate(),animation:br.animation(),animated:br.animated(),clearQueue:br.clearQueue(),delay:br.delay(),delayAnimation:br.delayAnimation(),stop:br.stop(),addToAnimationPool:l((function(t){this.styleEnabled()&&this._private.aniEles.merge(t)}),"addToAnimationPool"),stopAnimationLoop:l((function(){this._private.animationsRunning=!1}),"stopAnimationLoop"),startAnimationLoop:l((function(){var t=this;if(t._private.animationsRunning=!0,t.styleEnabled()){l(r,"headlessStep");var e=t.renderer();e&&e.beforeRender?e.beforeRender(l((function(n,i){SS(i,t)}),"rendererAnimationStep"),e.beforeRenderPriorities.animations):r()}function r(){t._private.animationsRunning&&i6(l((function(n){SS(n,t),r()}),"animationStep"))}}),"startAnimationLoop")},FCe={qualifierCompare:l((function(t,e){return t==null||e==null?t==null&&e==null:t.sameText(e)}),"qualifierCompare"),eventMatches:l((function(t,e,r){var n=e.qualifier;return n==null||t!==r.target&&Jv(r.target)&&n.matches(r.target)}),"eventMatches"),addEventFields:l((function(t,e){e.cy=t,e.target=t}),"addEventFields"),callbackContext:l((function(t,e,r){return e.qualifier!=null?r.target:t}),"callbackContext")},nb=l((function(t){return Ot(t)?new cc(t):t}),"argSelector"),Jse={createEmitter:l((function(){var t=this._private;return t.emitter||(t.emitter=new ix(FCe,this)),this}),"createEmitter"),emitter:l((function(){return this._private.emitter}),"emitter"),on:l((function(t,e,r){return this.emitter().on(t,nb(e),r),this}),"on"),removeListener:l((function(t,e,r){return this.emitter().removeListener(t,nb(e),r),this}),"removeListener"),removeAllListeners:l((function(){return this.emitter().removeAllListeners(),this}),"removeAllListeners"),one:l((function(t,e,r){return this.emitter().one(t,nb(e),r),this}),"one"),once:l((function(t,e,r){return this.emitter().one(t,nb(e),r),this}),"once"),emit:l((function(t,e){return this.emitter().emit(t,e),this}),"emit"),emitAndNotify:l((function(t,e){return this.emit(t),this.notify(t,e),this}),"emitAndNotify")};br.eventAliasesOn(Jse);var AS={png:l((function(t){return t=t||{},this._private.renderer.png(t)}),"png"),jpg:l((function(t){var e=this._private.renderer;return(t=t||{}).bg=t.bg||"#fff",e.jpg(t)}),"jpg")};AS.jpeg=AS.jpg;var h4={layout:l((function(t){var e=this;if(t!=null)if(t.name!=null){var r,n=t.name,i=e.extension("layout",n);if(i!=null)return r=Ot(t.eles)?e.$(t.eles):t.eles!=null?t.eles:e.$(),new i(Gt({},t,{cy:e,eles:r}));en("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else en("A `name` must be specified to make a layout");else en("Layout options must be specified to make a layout")}),"layout")};h4.createLayout=h4.makeLayout=h4.layout;var zCe={notify:l((function(t,e){var r=this._private;if(this.batching()){r.batchNotifications=r.batchNotifications||{};var n=r.batchNotifications[t]=r.batchNotifications[t]||this.collection();e!=null&&n.merge(e)}else if(r.notificationsEnabled){var i=this.renderer();!this.destroyed()&&i&&i.notify(t,e)}}),"notify"),notifications:l((function(t){var e=this._private;return t===void 0?e.notificationsEnabled:(e.notificationsEnabled=!!t,this)}),"notifications"),noNotifications:l((function(t){this.notifications(!1),t(),this.notifications(!0)}),"noNotifications"),batching:l((function(){return this._private.batchCount>0}),"batching"),startBatch:l((function(){var t=this._private;return t.batchCount==null&&(t.batchCount=0),t.batchCount===0&&(t.batchStyleEles=this.collection(),t.batchNotifications={}),t.batchCount++,this}),"startBatch"),endBatch:l((function(){var t=this._private;if(t.batchCount===0)return this;if(t.batchCount--,t.batchCount===0){t.batchStyleEles.updateStyle();var e=this.renderer();Object.keys(t.batchNotifications).forEach((function(r){var n=t.batchNotifications[r];n.empty()?e.notify(r):e.notify(r,n)}))}return this}),"endBatch"),batch:l((function(t){return this.startBatch(),t(),this.endBatch(),this}),"batch"),batchData:l((function(t){var e=this;return this.batch((function(){for(var r=Object.keys(t),n=0;n<r.length;n++){var i=r[n],a=t[i];e.getElementById(i).data(a)}}))}),"batchData")},GCe=Jn({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:12,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),LS={renderTo:l((function(t,e,r,n){return this._private.renderer.renderTo(t,e,r,n),this}),"renderTo"),renderer:l((function(){return this._private.renderer}),"renderer"),forceRender:l((function(){return this.notify("draw"),this}),"forceRender"),resize:l((function(){return this.invalidateSize(),this.emitAndNotify("resize"),this}),"resize"),initRenderer:l((function(t){var e=this,r=e.extension("renderer",t.name);if(r!=null){t.wheelSensitivity!==void 0&&kr("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var n=GCe(t);n.cy=e,e._private.renderer=new r(n),this.notify("init")}else en("Can not initialise: No such renderer `".concat(t.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))}),"initRenderer"),destroyRenderer:l((function(){var t=this;t.notify("destroy");var e=t.container();if(e)for(e._cyreg=null;e.childNodes.length>0;)e.removeChild(e.childNodes[0]);t._private.renderer=null,t.mutableElements().forEach((function(r){var n=r._private;n.rscratch={},n.rstyle={},n.animation.current=[],n.animation.queue=[]}))}),"destroyRenderer"),onRender:l((function(t){return this.on("render",t)}),"onRender"),offRender:l((function(t){return this.off("render",t)}),"offRender")};LS.invalidateDimensions=LS.resize;var d4={collection:l((function(t,e){return Ot(t)?this.$(t):Ta(t)?t.collection():Dr(t)?(e||(e={}),new li(this,t,e.unique,e.removed)):new li(this)}),"collection"),nodes:l((function(t){var e=this.$((function(r){return r.isNode()}));return t?e.filter(t):e}),"nodes"),edges:l((function(t){var e=this.$((function(r){return r.isEdge()}));return t?e.filter(t):e}),"edges"),$:l((function(t){var e=this._private.elements;return t?e.filter(t):e.spawnSelf()}),"$"),mutableElements:l((function(){return this._private.elements}),"mutableElements")};d4.elements=d4.filter=d4.$;var yi={};yi.apply=function(t){for(var e=this,r=e._private.cy.collection(),n=0;n<t.length;n++){var i=t[n],a=e.getContextMeta(i);if(!a.empty){var s=e.getContextStyle(a),o=e.applyContextStyle(a,s,i);i._private.appliedInitStyle?e.updateTransitions(i,o.diffProps):i._private.appliedInitStyle=!0,e.updateStyleHints(i)&&r.push(i)}}return r},yi.getPropertiesDiff=function(t,e){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},i=t+"-"+e,a=n[i];if(a)return a;for(var s=[],o={},u=0;u<r.length;u++){var h=r[u],d=t[u]==="t",p=e[u]==="t",f=d!==p,g=h.mappedProperties.length>0;if(f||p&&g){var m=void 0;f&&g||f?m=h.properties:g&&(m=h.mappedProperties);for(var y=0;y<m.length;y++){for(var v=m[y],x=v.name,b=!1,w=u+1;w<r.length;w++){var T=r[w];if(e[w]==="t"&&(b=T.properties[v.name]!=null))break}o[x]||b||(o[x]=!0,s.push(x))}}}return n[i]=s,s},yi.getContextMeta=function(t){for(var e,r=this,n="",i=t._private.styleCxtKey||"",a=0;a<r.length;a++){var s=r[a];n+=s.selector&&s.selector.matches(t)?"t":"f"}return e=r.getPropertiesDiff(i,n),t._private.styleCxtKey=n,{key:n,diffPropNames:e,empty:e.length===0}},yi.getContextStyle=function(t){var e=t.key,r=this._private.contextStyles=this._private.contextStyles||{};if(r[e])return r[e];for(var n={_private:{key:e}},i=0;i<this.length;i++){var a=this[i];if(e[i]==="t")for(var s=0;s<a.properties.length;s++){var o=a.properties[s];n[o.name]=o}}return r[e]=n,n},yi.applyContextStyle=function(t,e,r){for(var n=t.diffPropNames,i={},a=this.types,s=0;s<n.length;s++){var o=n[s],u=e[o],h=r.pstyle(o);if(!u){if(!h)continue;u=h.bypass?{name:o,deleteBypassed:!0}:{name:o,delete:!0}}if(h!==u){if(u.mapped===a.fn&&h!=null&&h.mapping!=null&&h.mapping.value===u.value){var d=h.mapping;if((d.fnValue=u.value(r))===d.prevFnValue)continue}var p=i[o]={prev:h};this.applyParsedProperty(r,u),p.next=r.pstyle(o),p.next&&p.next.bypass&&(p.next=p.next.bypassed)}}return{diffProps:i}},yi.updateStyleHints=function(t){var e=t._private,r=this,n=r.propertyGroupNames,i=r.propertyGroupKeys,a=l((function(re,H,K){return r.getPropertiesHash(re,H,K)}),"propHash"),s=e.styleKey;if(t.removed())return!1;var o=e.group==="nodes",u=t._private.style;n=Object.keys(u);for(var h=0;h<i.length;h++){var d=i[h];e.styleKeys[d]=[9261,5381]}for(var p=l((function(re,H){return e.styleKeys[H][0]=tv(re,e.styleKeys[H][0])}),"updateGrKey1"),f=l((function(re,H){return e.styleKeys[H][1]=rv(re,e.styleKeys[H][1])}),"updateGrKey2"),g=l((function(re,H){p(re,H),f(re,H)}),"updateGrKey"),m=l((function(re,H){for(var K=0;K<re.length;K++){var ie=re.charCodeAt(K);p(ie,H),f(ie,H)}}),"updateGrKeyWStr"),y=l((function(re){return-128<re&&re<128&&Math.floor(re)!==re?2e9-(1024*re|0):re}),"cleanNum"),v=0;v<n.length;v++){var x=n[v],b=u[x];if(b!=null){var w=this.properties[x],T=w.type,k=w.groupKey,C=void 0;w.hashOverride!=null?C=w.hashOverride(t,b):b.pfValue!=null&&(C=b.pfValue);var E=w.enums==null?b.value:null,_=C!=null,S=_||E!=null,N=b.units;T.number&&S&&!T.multiple?(g(y(_?C:E),k),_||N==null||m(N,k)):m(b.strValue,k)}}for(var O=[9261,5381],B=0;B<i.length;B++){var L=i[B],I=e.styleKeys[L];O[0]=tv(I[0],O[0]),O[1]=rv(I[1],O[1])}e.styleKey=gTe(O[0],O[1]);var A=e.styleKeys;e.labelDimsKey=gl(A.labelDimensions);var M=a(t,["label"],A.labelDimensions);if(e.labelKey=gl(M),e.labelStyleKey=gl(Yx(A.commonLabel,M)),!o){var D=a(t,["source-label"],A.labelDimensions);e.sourceLabelKey=gl(D),e.sourceLabelStyleKey=gl(Yx(A.commonLabel,D));var R=a(t,["target-label"],A.labelDimensions);e.targetLabelKey=gl(R),e.targetLabelStyleKey=gl(Yx(A.commonLabel,R))}if(o){var P=e.styleKeys,$=P.nodeBody,z=P.nodeBorder,q=P.nodeOutline,W=P.backgroundImage,Q=P.compound,te=P.pie,oe=[$,z,q,W,Q,te].filter((function(re){return re!=null})).reduce(Yx,[9261,5381]);e.nodeKey=gl(oe),e.hasPie=te!=null&&te[0]!==9261&&te[1]!==5381}return s!==e.styleKey},yi.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null},yi.applyParsedProperty=function(t,e){var r,n=this,i=e,a=t._private.style,s=n.types,o=n.properties[i.name].type,u=i.bypass,h=a[i.name],d=h&&h.bypass,p=t._private,f="mapping",g=l((function($){return $==null?null:$.pfValue!=null?$.pfValue:$.value}),"getVal"),m=l((function(){var $=g(h),z=g(i);n.checkTriggers(t,i.name,$,z)}),"checkTriggers");if(e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(i=e=this.parse(e.name,"bezier",u)),i.delete)return a[i.name]=void 0,m(),!0;if(i.deleteBypassed)return h?!!h.bypass&&(h.bypassed=void 0,m(),!0):(m(),!0);if(i.deleteBypass)return h?!!h.bypass&&(a[i.name]=h.bypassed,m(),!0):(m(),!0);var y=l((function(){kr("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+i.name+"` with data field `"+i.field+"`); try a `["+i.field+"]` selector to limit scope to elements with `"+i.field+"` defined")}),"printMappingErr");switch(i.mapped){case s.mapData:for(var v,x=i.field.split("."),b=p.data,w=0;w<x.length&&b;w++)b=b[x[w]];if(b==null)return y(),!1;if(!ct(b))return kr("Do not use continuous mappers without specifying numeric data (i.e. `"+i.field+": "+b+"` for `"+t.id()+"` is non-numeric)"),!1;var T=i.fieldMax-i.fieldMin;if((v=T===0?0:(b-i.fieldMin)/T)<0?v=0:v>1&&(v=1),o.color){var k=i.valueMin[0],C=i.valueMax[0],E=i.valueMin[1],_=i.valueMax[1],S=i.valueMin[2],N=i.valueMax[2],O=i.valueMin[3]==null?1:i.valueMin[3],B=i.valueMax[3]==null?1:i.valueMax[3],L=[Math.round(k+(C-k)*v),Math.round(E+(_-E)*v),Math.round(S+(N-S)*v),Math.round(O+(B-O)*v)];r={bypass:i.bypass,name:i.name,value:L,strValue:"rgb("+L[0]+", "+L[1]+", "+L[2]+")"}}else{if(!o.number)return!1;var I=i.valueMin+(i.valueMax-i.valueMin)*v;r=this.parse(i.name,I,i.bypass,f)}if(!r)return y(),!1;r.mapping=i,i=r;break;case s.data:for(var A=i.field.split("."),M=p.data,D=0;D<A.length&&M;D++)M=M[A[D]];if(M!=null&&(r=this.parse(i.name,M,i.bypass,f)),!r)return y(),!1;r.mapping=i,i=r;break;case s.fn:var R=i.value,P=i.fnValue!=null?i.fnValue:R(t);if(i.prevFnValue=P,P==null)return kr("Custom function mappers may not return null (i.e. `"+i.name+"` for ele `"+t.id()+"` is null)"),!1;if(!(r=this.parse(i.name,P,i.bypass,f)))return kr("Custom function mappers may not return invalid values for the property type (i.e. `"+i.name+"` for ele `"+t.id()+"` is invalid)"),!1;r.mapping=Zs(i),i=r;break;case void 0:break;default:return!1}return u?(i.bypassed=d?h.bypassed:h,a[i.name]=i):d?h.bypassed=i:a[i.name]=i,m(),!0},yi.cleanElements=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),e)for(var i=n._private.style,a=Object.keys(i),s=0;s<a.length;s++){var o=a[s],u=i[o];u!=null&&(u.bypass?u.bypassed=null:i[o]=null)}else n._private.style={}}},yi.update=function(){this._private.cy.mutableElements().updateStyle()},yi.updateTransitions=function(t,e){var r=this,n=t._private,i=t.pstyle("transition-property").value,a=t.pstyle("transition-duration").pfValue,s=t.pstyle("transition-delay").pfValue;if(i.length>0&&a>0){for(var o={},u=!1,h=0;h<i.length;h++){var d=i[h],p=t.pstyle(d),f=e[d];if(f){var g=f.prev,m=f.next!=null?f.next:p,y=!1,v=void 0,x=1e-6;g&&(ct(g.pfValue)&&ct(m.pfValue)?(y=m.pfValue-g.pfValue,v=g.pfValue+x*y):ct(g.value)&&ct(m.value)?(y=m.value-g.value,v=g.value+x*y):Dr(g.value)&&Dr(m.value)&&(y=g.value[0]!==m.value[0]||g.value[1]!==m.value[1]||g.value[2]!==m.value[2],v=g.strValue),y&&(o[d]=m.strValue,this.applyBypass(t,d,v),u=!0))}}if(!u)return;n.transitioning=!0,new Tm((function(b){s>0?t.delayAnimation(s).play().promise().then(b):b()})).then((function(){return t.animation({style:o,duration:a,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()})).then((function(){r.removeBypasses(t,i),t.emitAndNotify("style"),n.transitioning=!1}))}else n.transitioning&&(this.removeBypasses(t,i),t.emitAndNotify("style"),n.transitioning=!1)},yi.checkTrigger=function(t,e,r,n,i,a){var s=this.properties[e],o=i(s);o!=null&&o(r,n)&&a(s)},yi.checkZOrderTrigger=function(t,e,r,n){var i=this;this.checkTrigger(t,e,r,n,(function(a){return a.triggersZOrder}),(function(){i._private.cy.notify("zorder",t)}))},yi.checkBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,(function(i){return i.triggersBounds}),(function(i){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),!i.triggersBoundsOfParallelBeziers||e!=="curve-style"||r!=="bezier"&&n!=="bezier"||t.parallelEdges().forEach((function(a){a.dirtyBoundingBoxCache()})),!i.triggersBoundsOfConnectedEdges||e!=="display"||r!=="none"&&n!=="none"||t.connectedEdges().forEach((function(a){a.dirtyBoundingBoxCache()}))}))},yi.checkTriggers=function(t,e,r,n){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,r,n),this.checkBoundsTrigger(t,e,r,n)};var UCe={applyBypass:function(t,e,r,n){var i=[];if(e==="*"||e==="**"){if(r!==void 0)for(var a=0;a<this.properties.length;a++){var s=this.properties[a].name,o=this.parse(s,r,!0);o&&i.push(o)}}else if(Ot(e)){var u=this.parse(e,r,!0);u&&i.push(u)}else{if(!ur(e))return!1;var h=e;n=r;for(var d=Object.keys(h),p=0;p<d.length;p++){var f=d[p],g=h[f];if(g===void 0&&(g=h[tk(f)]),g!==void 0){var m=this.parse(f,g,!0);m&&i.push(m)}}}if(i.length===0)return!1;for(var y=!1,v=0;v<t.length;v++){for(var x=t[v],b={},w=void 0,T=0;T<i.length;T++){var k=i[T];if(n){var C=x.pstyle(k.name);w=b[k.name]={prev:C}}y=this.applyParsedProperty(x,Zs(k))||y,n&&(w.next=x.pstyle(k.name))}y&&this.updateStyleHints(x),n&&this.updateTransitions(x,b,!0)}return y},overrideBypass:function(t,e,r){e=NN(e);for(var n=0;n<t.length;n++){var i=t[n],a=i._private.style[e],s=this.properties[e].type,o=s.color,u=s.mutiple,h=a?a.pfValue!=null?a.pfValue:a.value:null;a&&a.bypass?(a.value=r,a.pfValue!=null&&(a.pfValue=r),a.strValue=o?"rgb("+r.join(",")+")":u?r.join(" "):""+r,this.updateStyleHints(i)):this.applyBypass(i,e,r),this.checkTriggers(i,e,h,r)}},removeAllBypasses:function(t,e){return this.removeBypasses(t,this.propertyNames,e)},removeBypasses:function(t,e,r){for(var n=0;n<t.length;n++){for(var i=t[n],a={},s=0;s<e.length;s++){var o=e[s],u=this.properties[o],h=i.pstyle(u.name);if(h&&h.bypass){var d=this.parse(o,"",!0),p=a[u.name]={prev:h};this.applyParsedProperty(i,d),p.next=i.pstyle(u.name)}}this.updateStyleHints(i),r&&this.updateTransitions(i,a,!0)}}},qCe={getEmSizeInPixels:function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1},containerCss:function(t){var e=this._private.cy,r=e.container(),n=e.window();if(n&&r&&n.getComputedStyle)return n.getComputedStyle(r).getPropertyValue(t)}},NS={getRenderedStyle:function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)},getRawStyle:function(t,e){var r=this;if(t=t[0]){for(var n={},i=0;i<r.properties.length;i++){var a=r.properties[i],s=r.getStylePropertyValue(t,a.name,e);s!=null&&(n[a.name]=s,n[tk(a.name)]=s)}return n}},getIndexedStyle:function(t,e,r,n){var i=t.pstyle(e)[r][n];return i??t.cy().style().getDefaultProperty(e)[r][0]},getStylePropertyValue:function(t,e,r){if(t=t[0]){var n=this.properties[e];n.alias&&(n=n.pointsTo);var i=n.type,a=t.pstyle(n.name);if(a){var s=a.value,o=a.units,u=a.strValue;if(r&&i.number&&s!=null&&ct(s)){var h=t.cy().zoom(),d=l((function(m){return m*h}),"getRenderedValue"),p=l((function(m,y){return d(m)+y}),"getValueStringWithUnits"),f=Dr(s),g=f?o.every((function(m){return m!=null})):o!=null;return g?f?s.map((function(m,y){return p(m,o[y])})).join(" "):p(s,o):f?s.map((function(m){return Ot(m)?m:""+d(m)})).join(" "):""+d(s)}if(u!=null)return u}return null}},getAnimationStartStyle:function(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n].name,a=t.pstyle(i);a!==void 0&&(a=ur(a)?this.parse(i,a.strValue):this.parse(i,a)),a&&(r[i]=a)}return r},getPropsList:function(t){var e=[],r=t,n=this.properties;if(r)for(var i=Object.keys(r),a=0;a<i.length;a++){var s=i[a],o=r[s],u=n[s]||n[NN(s)],h=this.parse(u.name,o);h&&e.push(h)}return e},getNonDefaultPropertiesHash:function(t,e,r){var n,i,a,s,o,u,h=r.slice();for(o=0;o<e.length;o++)if(n=e[o],(i=t.pstyle(n,!1))!=null)if(i.pfValue!=null)h[0]=tv(s,h[0]),h[1]=rv(s,h[1]);else for(a=i.strValue,u=0;u<a.length;u++)s=a.charCodeAt(u),h[0]=tv(s,h[0]),h[1]=rv(s,h[1]);return h}};NS.getPropertiesHash=NS.getNonDefaultPropertiesHash;var jCe={appendFromJson:function(t){for(var e=this,r=0;r<t.length;r++){var n=t[r],i=n.selector,a=n.style||n.css,s=Object.keys(a);e.selector(i);for(var o=0;o<s.length;o++){var u=s[o],h=a[u];e.css(u,h)}}return e},fromJson:function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e},json:function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],n=r.selector,i=r.properties,a={},s=0;s<i.length;s++){var o=i[s];a[o.name]=o.strValue}t.push({selector:n?n.toString():"core",style:a})}return t}},WCe={appendFromString:function(t){var e,r,n,i=this,a=""+t;function s(){a=a.length>e.length?a.substr(e.length):""}function o(){r=r.length>n.length?r.substr(n.length):""}for(a=a.replace(/[/][*](\s|.)+?[*][/]/g,""),l(s,"removeSelAndBlockFromRemaining"),l(o,"removePropAndValFromRem");!a.match(/^\s*$/);){var u=a.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!u){kr("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+a);break}e=u[0];var h=u[1];if(h!=="core"&&new cc(h).invalid){kr("Skipping parsing of block: Invalid selector found in string stylesheet: "+h),s();continue}var d=u[2],p=!1;r=d;for(var f=[];!r.match(/^\s*$/);){var g=r.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!g){kr("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+d),p=!0;break}n=g[0];var m=g[1],y=g[2];this.properties[m]?i.parse(m,y)?(f.push({name:m,val:y}),o()):(kr("Skipping property: Invalid property definition in: "+n),o()):(kr("Skipping property: Invalid property name in: "+n),o())}if(p){s();break}i.selector(h);for(var v=0;v<f.length;v++){var x=f[v];i.css(x.name,x.val)}s()}return i},fromString:function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e}},ii={};(function(){var t=IN,e=l((function(W){return"^"+W+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"}),"data"),r=l((function(W){var Q=t+"|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+W+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+Q+")\\s*\\,\\s*("+Q+")\\)$"}),"mapData"),n=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];ii.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:e("data")},layoutData:{mapping:!0,regex:e("layoutData")},scratch:{mapping:!0,regex:e("scratch")},mapData:{mapping:!0,regex:r("mapData")},mapLayoutData:{mapping:!0,regex:r("mapLayoutData")},mapScratch:{mapping:!0,regex:r("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:n,singleRegexMatchValue:!0},urls:{regexes:n,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:l((function(W,Q){switch(W.length){case 2:return Q[0]!=="deg"&&Q[0]!=="rad"&&Q[1]!=="deg"&&Q[1]!=="rad";case 1:return Ot(W[0])||Q[0]==="deg"||Q[0]==="rad";default:return!1}}),"validate")},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:l((function(W){var Q=W.length;return Q===1||Q===2||Q===4}),"validate")}};var i={zeroNonZero:l((function(W,Q){return(W==null||Q==null)&&W!==Q||W==0&&Q!=0||W!=0&&Q==0}),"zeroNonZero"),any:l((function(W,Q){return W!=Q}),"any"),emptyNonEmpty:l((function(W,Q){var te=oc(W),oe=oc(Q);return te&&!oe||!te&&oe}),"emptyNonEmpty")},a=ii.types,s=[{name:"label",type:a.text,triggersBounds:i.any,triggersZOrder:i.emptyNonEmpty},{name:"text-rotation",type:a.textRotation,triggersBounds:i.any},{name:"text-margin-x",type:a.bidirectionalSize,triggersBounds:i.any},{name:"text-margin-y",type:a.bidirectionalSize,triggersBounds:i.any}],o=[{name:"source-label",type:a.text,triggersBounds:i.any},{name:"source-text-rotation",type:a.textRotation,triggersBounds:i.any},{name:"source-text-margin-x",type:a.bidirectionalSize,triggersBounds:i.any},{name:"source-text-margin-y",type:a.bidirectionalSize,triggersBounds:i.any},{name:"source-text-offset",type:a.size,triggersBounds:i.any}],u=[{name:"target-label",type:a.text,triggersBounds:i.any},{name:"target-text-rotation",type:a.textRotation,triggersBounds:i.any},{name:"target-text-margin-x",type:a.bidirectionalSize,triggersBounds:i.any},{name:"target-text-margin-y",type:a.bidirectionalSize,triggersBounds:i.any},{name:"target-text-offset",type:a.size,triggersBounds:i.any}],h=[{name:"font-family",type:a.fontFamily,triggersBounds:i.any},{name:"font-style",type:a.fontStyle,triggersBounds:i.any},{name:"font-weight",type:a.fontWeight,triggersBounds:i.any},{name:"font-size",type:a.size,triggersBounds:i.any},{name:"text-transform",type:a.textTransform,triggersBounds:i.any},{name:"text-wrap",type:a.textWrap,triggersBounds:i.any},{name:"text-overflow-wrap",type:a.textOverflowWrap,triggersBounds:i.any},{name:"text-max-width",type:a.size,triggersBounds:i.any},{name:"text-outline-width",type:a.size,triggersBounds:i.any},{name:"line-height",type:a.positiveNumber,triggersBounds:i.any}],d=[{name:"text-valign",type:a.valign,triggersBounds:i.any},{name:"text-halign",type:a.halign,triggersBounds:i.any},{name:"color",type:a.color},{name:"text-outline-color",type:a.color},{name:"text-outline-opacity",type:a.zeroOneNumber},{name:"text-background-color",type:a.color},{name:"text-background-opacity",type:a.zeroOneNumber},{name:"text-background-padding",type:a.size,triggersBounds:i.any},{name:"text-border-opacity",type:a.zeroOneNumber},{name:"text-border-color",type:a.color},{name:"text-border-width",type:a.size,triggersBounds:i.any},{name:"text-border-style",type:a.borderStyle,triggersBounds:i.any},{name:"text-background-shape",type:a.textBackgroundShape,triggersBounds:i.any},{name:"text-justification",type:a.justification}],p=[{name:"events",type:a.bool,triggersZOrder:i.any},{name:"text-events",type:a.bool,triggersZOrder:i.any}],f=[{name:"display",type:a.display,triggersZOrder:i.any,triggersBounds:i.any,triggersBoundsOfConnectedEdges:!0},{name:"visibility",type:a.visibility,triggersZOrder:i.any},{name:"opacity",type:a.zeroOneNumber,triggersZOrder:i.zeroNonZero},{name:"text-opacity",type:a.zeroOneNumber},{name:"min-zoomed-font-size",type:a.size},{name:"z-compound-depth",type:a.zCompoundDepth,triggersZOrder:i.any},{name:"z-index-compare",type:a.zIndexCompare,triggersZOrder:i.any},{name:"z-index",type:a.number,triggersZOrder:i.any}],g=[{name:"overlay-padding",type:a.size,triggersBounds:i.any},{name:"overlay-color",type:a.color},{name:"overlay-opacity",type:a.zeroOneNumber,triggersBounds:i.zeroNonZero},{name:"overlay-shape",type:a.overlayShape,triggersBounds:i.any},{name:"overlay-corner-radius",type:a.cornerRadius}],m=[{name:"underlay-padding",type:a.size,triggersBounds:i.any},{name:"underlay-color",type:a.color},{name:"underlay-opacity",type:a.zeroOneNumber,triggersBounds:i.zeroNonZero},{name:"underlay-shape",type:a.overlayShape,triggersBounds:i.any},{name:"underlay-corner-radius",type:a.cornerRadius}],y=[{name:"transition-property",type:a.propList},{name:"transition-duration",type:a.time},{name:"transition-delay",type:a.time},{name:"transition-timing-function",type:a.easing}],v=l((function(W,Q){return Q.value==="label"?-W.poolIndex():Q.pfValue}),"nodeSizeHashOverride"),x=[{name:"height",type:a.nodeSize,triggersBounds:i.any,hashOverride:v},{name:"width",type:a.nodeSize,triggersBounds:i.any,hashOverride:v},{name:"shape",type:a.nodeShape,triggersBounds:i.any},{name:"shape-polygon-points",type:a.polygonPointList,triggersBounds:i.any},{name:"corner-radius",type:a.cornerRadius},{name:"background-color",type:a.color},{name:"background-fill",type:a.fill},{name:"background-opacity",type:a.zeroOneNumber},{name:"background-blacken",type:a.nOneOneNumber},{name:"background-gradient-stop-colors",type:a.colors},{name:"background-gradient-stop-positions",type:a.percentages},{name:"background-gradient-direction",type:a.gradientDirection},{name:"padding",type:a.sizeMaybePercent,triggersBounds:i.any},{name:"padding-relative-to",type:a.paddingRelativeTo,triggersBounds:i.any},{name:"bounds-expansion",type:a.boundsExpansion,triggersBounds:i.any}],b=[{name:"border-color",type:a.color},{name:"border-opacity",type:a.zeroOneNumber},{name:"border-width",type:a.size,triggersBounds:i.any},{name:"border-style",type:a.borderStyle},{name:"border-cap",type:a.lineCap},{name:"border-join",type:a.lineJoin},{name:"border-dash-pattern",type:a.numbers},{name:"border-dash-offset",type:a.number},{name:"border-position",type:a.linePosition}],w=[{name:"outline-color",type:a.color},{name:"outline-opacity",type:a.zeroOneNumber},{name:"outline-width",type:a.size,triggersBounds:i.any},{name:"outline-style",type:a.borderStyle},{name:"outline-offset",type:a.size,triggersBounds:i.any}],T=[{name:"background-image",type:a.urls},{name:"background-image-crossorigin",type:a.bgCrossOrigin},{name:"background-image-opacity",type:a.zeroOneNumbers},{name:"background-image-containment",type:a.bgContainment},{name:"background-image-smoothing",type:a.bools},{name:"background-position-x",type:a.bgPos},{name:"background-position-y",type:a.bgPos},{name:"background-width-relative-to",type:a.bgRelativeTo},{name:"background-height-relative-to",type:a.bgRelativeTo},{name:"background-repeat",type:a.bgRepeat},{name:"background-fit",type:a.bgFit},{name:"background-clip",type:a.bgClip},{name:"background-width",type:a.bgWH},{name:"background-height",type:a.bgWH},{name:"background-offset-x",type:a.bgPos},{name:"background-offset-y",type:a.bgPos}],k=[{name:"position",type:a.position,triggersBounds:i.any},{name:"compound-sizing-wrt-labels",type:a.compoundIncludeLabels,triggersBounds:i.any},{name:"min-width",type:a.size,triggersBounds:i.any},{name:"min-width-bias-left",type:a.sizeMaybePercent,triggersBounds:i.any},{name:"min-width-bias-right",type:a.sizeMaybePercent,triggersBounds:i.any},{name:"min-height",type:a.size,triggersBounds:i.any},{name:"min-height-bias-top",type:a.sizeMaybePercent,triggersBounds:i.any},{name:"min-height-bias-bottom",type:a.sizeMaybePercent,triggersBounds:i.any}],C=[{name:"line-style",type:a.lineStyle},{name:"line-color",type:a.color},{name:"line-fill",type:a.fill},{name:"line-cap",type:a.lineCap},{name:"line-opacity",type:a.zeroOneNumber},{name:"line-dash-pattern",type:a.numbers},{name:"line-dash-offset",type:a.number},{name:"line-outline-width",type:a.size},{name:"line-outline-color",type:a.color},{name:"line-gradient-stop-colors",type:a.colors},{name:"line-gradient-stop-positions",type:a.percentages},{name:"curve-style",type:a.curveStyle,triggersBounds:i.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:a.zeroOneNumber,triggersBounds:i.any},{name:"source-endpoint",type:a.edgeEndpoint,triggersBounds:i.any},{name:"target-endpoint",type:a.edgeEndpoint,triggersBounds:i.any},{name:"control-point-step-size",type:a.size,triggersBounds:i.any},{name:"control-point-distances",type:a.bidirectionalSizes,triggersBounds:i.any},{name:"control-point-weights",type:a.numbers,triggersBounds:i.any},{name:"segment-distances",type:a.bidirectionalSizes,triggersBounds:i.any},{name:"segment-weights",type:a.numbers,triggersBounds:i.any},{name:"segment-radii",type:a.numbers,triggersBounds:i.any},{name:"radius-type",type:a.radiusType,triggersBounds:i.any},{name:"taxi-turn",type:a.bidirectionalSizeMaybePercent,triggersBounds:i.any},{name:"taxi-turn-min-distance",type:a.size,triggersBounds:i.any},{name:"taxi-direction",type:a.axisDirection,triggersBounds:i.any},{name:"taxi-radius",type:a.number,triggersBounds:i.any},{name:"edge-distances",type:a.edgeDistances,triggersBounds:i.any},{name:"arrow-scale",type:a.positiveNumber,triggersBounds:i.any},{name:"loop-direction",type:a.angle,triggersBounds:i.any},{name:"loop-sweep",type:a.angle,triggersBounds:i.any},{name:"source-distance-from-node",type:a.size,triggersBounds:i.any},{name:"target-distance-from-node",type:a.size,triggersBounds:i.any}],E=[{name:"ghost",type:a.bool,triggersBounds:i.any},{name:"ghost-offset-x",type:a.bidirectionalSize,triggersBounds:i.any},{name:"ghost-offset-y",type:a.bidirectionalSize,triggersBounds:i.any},{name:"ghost-opacity",type:a.zeroOneNumber}],_=[{name:"selection-box-color",type:a.color},{name:"selection-box-opacity",type:a.zeroOneNumber},{name:"selection-box-border-color",type:a.color},{name:"selection-box-border-width",type:a.size},{name:"active-bg-color",type:a.color},{name:"active-bg-opacity",type:a.zeroOneNumber},{name:"active-bg-size",type:a.size},{name:"outside-texture-bg-color",type:a.color},{name:"outside-texture-bg-opacity",type:a.zeroOneNumber}],S=[];ii.pieBackgroundN=16,S.push({name:"pie-size",type:a.sizeMaybePercent});for(var N=1;N<=ii.pieBackgroundN;N++)S.push({name:"pie-"+N+"-background-color",type:a.color}),S.push({name:"pie-"+N+"-background-size",type:a.percent}),S.push({name:"pie-"+N+"-background-opacity",type:a.zeroOneNumber});var O=[],B=ii.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:a.arrowShape,triggersBounds:i.any},{name:"arrow-color",type:a.color},{name:"arrow-fill",type:a.arrowFill},{name:"arrow-width",type:a.arrowWidth}].forEach((function(W){B.forEach((function(Q){var te=Q+"-"+W.name,oe=W.type,re=W.triggersBounds;O.push({name:te,type:oe,triggersBounds:re})}))}),{});var L=ii.properties=[].concat(p,y,f,g,m,E,d,h,s,o,u,x,b,w,T,S,k,C,O,_),I=ii.propertyGroups={behavior:p,transition:y,visibility:f,overlay:g,underlay:m,ghost:E,commonLabel:d,labelDimensions:h,mainLabel:s,sourceLabel:o,targetLabel:u,nodeBody:x,nodeBorder:b,nodeOutline:w,backgroundImage:T,pie:S,compound:k,edgeLine:C,edgeArrow:O,core:_},A=ii.propertyGroupNames={};(ii.propertyGroupKeys=Object.keys(I)).forEach((function(W){A[W]=I[W].map((function(Q){return Q.name})),I[W].forEach((function(Q){return Q.groupKey=W}))}));var M=ii.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];ii.propertyNames=L.map((function(W){return W.name}));for(var D=0;D<L.length;D++){var R=L[D];L[R.name]=R}for(var P=0;P<M.length;P++){var $=M[P],z=L[$.pointsTo],q={name:$.name,alias:!0,pointsTo:z};L.push(q),L[$.name]=q}})(),ii.getDefaultProperty=function(t){return this.getDefaultProperties()[t]},ii.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=Gt({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce((function(u,h){for(var d=1;d<=ii.pieBackgroundN;d++){var p=h.name.replace("{{i}}",d),f=h.value;u[p]=f}return u}),{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce((function(u,h){return ii.arrowPrefixes.forEach((function(d){var p=d+"-"+h.name,f=h.value;u[p]=f})),u}),{})),r={},n=0;n<this.properties.length;n++){var i=this.properties[n];if(!i.pointsTo){var a=i.name,s=e[a],o=this.parse(a,s);r[a]=o}}return t.defaultProperties=r,t.defaultProperties},ii.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var YCe={parse:function(t,e,r,n){var i=this;if(tn(e))return i.parseImplWarn(t,e,r,n);var a,s=Sae(t,""+e,r?"t":"f",n==="mapping"||n===!0||n===!1||n==null?"dontcare":n),o=i.propCache=i.propCache||[];return(a=o[s])||(a=o[s]=i.parseImplWarn(t,e,r,n)),(r||n==="mapping")&&(a=Zs(a))&&(a.value=Zs(a.value)),a},parseImplWarn:function(t,e,r,n){var i=this.parseImpl(t,e,r,n);return i||e==null||kr("The style property `".concat(t,": ").concat(e,"` is invalid")),!i||i.name!=="width"&&i.name!=="height"||e!=="label"||kr("The style value of `label` is deprecated for `"+i.name+"`"),i},parseImpl:function(t,e,r,n){var i=this;t=NN(t);var a=i.properties[t],s=e,o=i.types;if(!a||e===void 0)return null;a.alias&&(a=a.pointsTo,t=a.name);var u=Ot(e);u&&(e=e.trim());var h,d,p=a.type;if(!p)return null;if(r&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(tn(e))return{name:t,value:e,strValue:"fn",mapped:o.fn,bypass:r};if(!(!u||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(h=new RegExp(o.data.regex).exec(e))){if(r)return!1;var f=o.data;return{name:t,value:h,strValue:""+e,mapped:f,field:h[1],bypass:r}}if(e.length>=10&&e[0]==="m"&&(d=new RegExp(o.mapData.regex).exec(e))){if(r||p.multiple)return!1;var g=o.mapData;if(!p.color&&!p.number)return!1;var m=this.parse(t,d[4]);if(!m||m.mapped)return!1;var y=this.parse(t,d[5]);if(!y||y.mapped)return!1;if(m.pfValue===y.pfValue||m.strValue===y.strValue)return kr("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+m.strValue+"`"),this.parse(t,m.strValue);if(p.color){var v=m.value,x=y.value;if(!(v[0]!==x[0]||v[1]!==x[1]||v[2]!==x[2]||v[3]!==x[3]&&(v[3]!=null&&v[3]!==1||x[3]!=null&&x[3]!==1)))return!1}return{name:t,value:d,strValue:""+e,mapped:g,field:d[1],fieldMin:parseFloat(d[2]),fieldMax:parseFloat(d[3]),valueMin:m.value,valueMax:y.value,bypass:r}}}if(p.multiple&&n!=="multiple"){var b;if(b=u?e.split(/\s+/):Dr(e)?e:[e],p.evenMultiple&&b.length%2!=0)return null;for(var w=[],T=[],k=[],C="",E=!1,_=0;_<b.length;_++){var S=i.parse(t,b[_],r,"multiple");E=E||Ot(S.value),w.push(S.value),k.push(S.pfValue!=null?S.pfValue:S.value),T.push(S.units),C+=(_>0?" ":"")+S.strValue}return p.validate&&!p.validate(w,T)?null:p.singleEnum&&E?w.length===1&&Ot(w[0])?{name:t,value:w[0],strValue:w[0],bypass:r}:null:{name:t,value:w,pfValue:k,strValue:C,bypass:r,units:T}}var N=l((function(){for(var oe=0;oe<p.enums.length;oe++)if(p.enums[oe]===e)return{name:t,value:e,strValue:""+e,bypass:r};return null}),"checkEnums");if(p.number){var O,B="px";if(p.units&&(O=p.units),p.implicitUnits&&(B=p.implicitUnits),!p.unitless)if(u){var L="px|em"+(p.allowPercent?"|\\%":"");O&&(L=O);var I=e.match("^("+IN+")("+L+")?$");I&&(e=I[1],O=I[2]||B)}else O&&!p.implicitUnits||(O=B);if(e=parseFloat(e),isNaN(e)&&p.enums===void 0)return null;if(isNaN(e)&&p.enums!==void 0)return e=s,N();if(p.integer&&!$ke(e)||p.min!==void 0&&(e<p.min||p.strictMin&&e===p.min)||p.max!==void 0&&(e>p.max||p.strictMax&&e===p.max))return null;var A={name:t,value:e,strValue:""+e+(O||""),units:O,bypass:r};return p.unitless||O!=="px"&&O!=="em"?A.pfValue=e:A.pfValue=O!=="px"&&O?this.getEmSizeInPixels()*e:e,O!=="ms"&&O!=="s"||(A.pfValue=O==="ms"?e:1e3*e),O!=="deg"&&O!=="rad"||(A.pfValue=O==="rad"?e:qTe(e)),O==="%"&&(A.pfValue=e/100),A}if(p.propList){var M=[],D=""+e;if(D!=="none"){for(var R=D.split(/\s*,\s*|\s+/),P=0;P<R.length;P++){var $=R[P].trim();i.properties[$]?M.push($):kr("`"+$+"` is not a valid property name")}if(M.length===0)return null}return{name:t,value:M,strValue:M.length===0?"none":M.join(" "),bypass:r}}if(p.color){var z=lae(e);return z?{name:t,value:z,pfValue:z,strValue:"rgb("+z[0]+","+z[1]+","+z[2]+")",bypass:r}:null}if(p.regex||p.regexes){if(p.enums){var q=N();if(q)return q}for(var W=p.regexes?p.regexes:[p.regex],Q=0;Q<W.length;Q++){var te=new RegExp(W[Q]).exec(e);if(te)return{name:t,value:p.singleRegexMatchValue?te[1]:te,strValue:""+e,bypass:r}}return null}return p.string?{name:t,value:""+e,strValue:""+e,bypass:r}:p.enums?N():null}},bi=l((function t(e){if(!(this instanceof t))return new t(e);LN(e)?(this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()):en("A style must have a core reference")}),"Style"),gi=bi.prototype;gi.instanceString=function(){return"style"},gi.clear=function(){for(var t=this._private,e=t.cy.elements(),r=0;r<this.length;r++)this[r]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(e,!0),e.forEach((function(n){var i=n[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1})),this},gi.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},gi.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)},gi.selector=function(t){var e=t==="core"?null:new cc(t),r=this.length++;return this[r]={selector:e,properties:[],mappedProperties:[],index:r},this},gi.css=function(){var t=this,e=arguments;if(e.length===1)for(var r=e[0],n=0;n<t.properties.length;n++){var i=t.properties[n],a=r[i.name];a===void 0&&(a=r[tk(i.name)]),a!==void 0&&this.cssRule(i.name,a)}else e.length===2&&this.cssRule(e[0],e[1]);return this},gi.style=gi.css,gi.cssRule=function(t,e){var r=this.parse(t,e);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.mapped&&this[n].mappedProperties.push(r),!this[n].selector&&(this._private.coreStyle[r.name]=r)}return this},gi.append=function(t){return aae(t)?t.appendToStyle(this):Dr(t)?this.appendFromJson(t):Ot(t)&&this.appendFromString(t),this},bi.fromJson=function(t,e){var r=new bi(t);return r.fromJson(e),r},bi.fromString=function(t,e){return new bi(t).fromString(e)},[yi,UCe,qCe,NS,jCe,WCe,ii,YCe].forEach((function(t){Gt(gi,t)})),bi.types=gi.types,bi.properties=gi.properties,bi.propertyGroups=gi.propertyGroups,bi.propertyGroupNames=gi.propertyGroupNames,bi.propertyGroupKeys=gi.propertyGroupKeys;var VCe={style:l((function(t){return t&&this.setStyle(t).update(),this._private.style}),"style"),setStyle:l((function(t){var e=this._private;return aae(t)?e.style=t.generateStyle(this):Dr(t)?e.style=bi.fromJson(this,t):Ot(t)?e.style=bi.fromString(this,t):e.style=bi(this),e.style}),"setStyle"),updateStyle:l((function(){this.mutableElements().updateStyle()}),"updateStyle")},Vc={autolock:l((function(t){return t===void 0?this._private.autolock:(this._private.autolock=!!t,this)}),"autolock"),autoungrabify:l((function(t){return t===void 0?this._private.autoungrabify:(this._private.autoungrabify=!!t,this)}),"autoungrabify"),autounselectify:l((function(t){return t===void 0?this._private.autounselectify:(this._private.autounselectify=!!t,this)}),"autounselectify"),selectionType:l((function(t){var e=this._private;return e.selectionType==null&&(e.selectionType="single"),t===void 0?e.selectionType:(t!=="additive"&&t!=="single"||(e.selectionType=t),this)}),"selectionType"),panningEnabled:l((function(t){return t===void 0?this._private.panningEnabled:(this._private.panningEnabled=!!t,this)}),"panningEnabled"),userPanningEnabled:l((function(t){return t===void 0?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!t,this)}),"userPanningEnabled"),zoomingEnabled:l((function(t){return t===void 0?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!t,this)}),"zoomingEnabled"),userZoomingEnabled:l((function(t){return t===void 0?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!t,this)}),"userZoomingEnabled"),boxSelectionEnabled:l((function(t){return t===void 0?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!t,this)}),"boxSelectionEnabled"),pan:l((function(){var t,e,r,n,i,a=arguments,s=this._private.pan;switch(a.length){case 0:return s;case 1:if(Ot(a[0]))return s[t=a[0]];if(ur(a[0])){if(!this._private.panningEnabled)return this;n=(r=a[0]).x,i=r.y,ct(n)&&(s.x=n),ct(i)&&(s.y=i),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;t=a[0],e=a[1],t!=="x"&&t!=="y"||!ct(e)||(s[t]=e),this.emit("pan viewport")}return this.notify("viewport"),this}),"pan"),panBy:l((function(t,e){var r,n,i,a,s,o=arguments,u=this._private.pan;if(!this._private.panningEnabled)return this;switch(o.length){case 1:ur(t)&&(a=(i=o[0]).x,s=i.y,ct(a)&&(u.x+=a),ct(s)&&(u.y+=s),this.emit("pan viewport"));break;case 2:n=e,(r=t)!=="x"&&r!=="y"||!ct(n)||(u[r]+=n),this.emit("pan viewport")}return this.notify("viewport"),this}),"panBy"),gc:l((function(){this.notify("gc")}),"gc"),fit:l((function(t,e){var r=this.getFitViewport(t,e);if(r){var n=this._private;n.zoom=r.zoom,n.pan=r.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this}),"fit"),getFitViewport:l((function(t,e){if(ct(t)&&e===void 0&&(e=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var r;if(Ot(t)){var n=t;t=this.$(n)}else if(Gke(t)){var i=t;(r={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2}).w=r.x2-r.x1,r.h=r.y2-r.y1}else Ta(t)||(t=this.mutableElements());if(!Ta(t)||!t.empty()){r=r||t.boundingBox();var a,s=this.width(),o=this.height();if(e=ct(e)?e:0,!isNaN(s)&&!isNaN(o)&&s>0&&o>0&&!isNaN(r.w)&&!isNaN(r.h)&&r.w>0&&r.h>0)return{zoom:a=(a=(a=Math.min((s-2*e)/r.w,(o-2*e)/r.h))>this._private.maxZoom?this._private.maxZoom:a)<this._private.minZoom?this._private.minZoom:a,pan:{x:(s-a*(r.x1+r.x2))/2,y:(o-a*(r.y1+r.y2))/2}}}}}),"getFitViewport"),zoomRange:l((function(t,e){var r=this._private;if(e==null){var n=t;t=n.min,e=n.max}return ct(t)&&ct(e)&&t<=e?(r.minZoom=t,r.maxZoom=e):ct(t)&&e===void 0&&t<=r.maxZoom?r.minZoom=t:ct(e)&&t===void 0&&e>=r.minZoom&&(r.maxZoom=e),this}),"zoomRange"),minZoom:l((function(t){return t===void 0?this._private.minZoom:this.zoomRange({min:t})}),"minZoom"),maxZoom:l((function(t){return t===void 0?this._private.maxZoom:this.zoomRange({max:t})}),"maxZoom"),getZoomedViewport:l((function(t){var e,r,n=this._private,i=n.pan,a=n.zoom,s=!1;if(n.zoomingEnabled||(s=!0),ct(t)?r=t:ur(t)&&(r=t.level,t.position!=null?e=ik(t.position,a,i):t.renderedPosition!=null&&(e=t.renderedPosition),e==null||n.panningEnabled||(s=!0)),r=(r=r>n.maxZoom?n.maxZoom:r)<n.minZoom?n.minZoom:r,s||!ct(r)||r===a||e!=null&&(!ct(e.x)||!ct(e.y)))return null;if(e!=null){var o=i,u=a,h=r;return{zoomed:!0,panned:!0,zoom:h,pan:{x:-h/u*(e.x-o.x)+e.x,y:-h/u*(e.y-o.y)+e.y}}}return{zoomed:!0,panned:!1,zoom:r,pan:i}}),"getZoomedViewport"),zoom:l((function(t){if(t===void 0)return this._private.zoom;var e=this.getZoomedViewport(t),r=this._private;return e!=null&&e.zoomed?(r.zoom=e.zoom,e.panned&&(r.pan.x=e.pan.x,r.pan.y=e.pan.y),this.emit("zoom"+(e.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this}),"zoom"),viewport:l((function(t){var e=this._private,r=!0,n=!0,i=[],a=!1,s=!1;if(!t)return this;if(ct(t.zoom)||(r=!1),ur(t.pan)||(n=!1),!r&&!n)return this;if(r){var o=t.zoom;o<e.minZoom||o>e.maxZoom||!e.zoomingEnabled?a=!0:(e.zoom=o,i.push("zoom"))}if(n&&(!a||!t.cancelOnFailedZoom)&&e.panningEnabled){var u=t.pan;ct(u.x)&&(e.pan.x=u.x,s=!1),ct(u.y)&&(e.pan.y=u.y,s=!1),s||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this}),"viewport"),center:l((function(t){var e=this.getCenterPan(t);return e&&(this._private.pan=e,this.emit("pan viewport"),this.notify("viewport")),this}),"center"),getCenterPan:l((function(t,e){if(this._private.panningEnabled){if(Ot(t)){var r=t;t=this.mutableElements().filter(r)}else Ta(t)||(t=this.mutableElements());if(t.length!==0){var n=t.boundingBox(),i=this.width(),a=this.height();return{x:(i-(e=e===void 0?this._private.zoom:e)*(n.x1+n.x2))/2,y:(a-e*(n.y1+n.y2))/2}}}}),"getCenterPan"),reset:l((function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this}),"reset"),invalidateSize:l((function(){this._private.sizeCache=null}),"invalidateSize"),size:l((function(){var t,e,r=this._private,n=r.container,i=this;return r.sizeCache=r.sizeCache||(n?(t=i.window().getComputedStyle(n),e=l((function(a){return parseFloat(t.getPropertyValue(a))}),"val"),{width:n.clientWidth-e("padding-left")-e("padding-right"),height:n.clientHeight-e("padding-top")-e("padding-bottom")}):{width:1,height:1})}),"size"),width:l((function(){return this.size().width}),"width"),height:l((function(){return this.size().height}),"height"),extent:l((function(){var t=this._private.pan,e=this._private.zoom,r=this.renderedExtent(),n={x1:(r.x1-t.x)/e,x2:(r.x2-t.x)/e,y1:(r.y1-t.y)/e,y2:(r.y2-t.y)/e};return n.w=n.x2-n.x1,n.h=n.y2-n.y1,n}),"extent"),renderedExtent:l((function(){var t=this.width(),e=this.height();return{x1:0,y1:0,x2:t,y2:e,w:t,h:e}}),"renderedExtent"),multiClickDebounceTime:l((function(t){return t?(this._private.multiClickDebounceTime=t,this):this._private.multiClickDebounceTime}),"multiClickDebounceTime")};Vc.centre=Vc.center,Vc.autolockNodes=Vc.autolock,Vc.autoungrabifyNodes=Vc.autoungrabify;var my={data:br.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:br.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:br.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:br.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};my.attr=my.data,my.removeAttr=my.removeData;var ov=l((function(t){var e=this,r=(t=Gt({},t)).container;r&&!n6(r)&&n6(r[0])&&(r=r[0]);var n=r?r._cyreg:null;(n=n||{})&&n.cy&&(n.cy.destroy(),n={});var i=n.readies=n.readies||[];r&&(r._cyreg=n),n.cy=e;var a=In!==void 0&&r!==void 0&&!t.headless,s=t;s.layout=Gt({name:a?"grid":"null"},s.layout),s.renderer=Gt({name:a?"canvas":"null"},s.renderer);var o=l((function(f,g,m){return g!==void 0?g:m!==void 0?m:f}),"defVal"),u=this._private={container:r,ready:!1,options:s,elements:new li(this),listeners:[],aniEles:new li(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:o(!0,s.zoomingEnabled),userZoomingEnabled:o(!0,s.userZoomingEnabled),panningEnabled:o(!0,s.panningEnabled),userPanningEnabled:o(!0,s.userPanningEnabled),boxSelectionEnabled:o(!0,s.boxSelectionEnabled),autolock:o(!1,s.autolock,s.autolockNodes),autoungrabify:o(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:o(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?a:s.styleEnabled,zoom:ct(s.zoom)?s.zoom:1,pan:{x:ur(s.pan)&&ct(s.pan.x)?s.pan.x:0,y:ur(s.pan)&&ct(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:o(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var h=l((function(f,g){if(f.some(Uke))return Tm.all(f).then(g);g(f)}),"loadExtData");u.styleEnabled&&e.setStyle([]);var d=Gt({},s,s.renderer);e.initRenderer(d);var p=l((function(f,g,m){e.notifications(!1);var y=e.mutableElements();y.length>0&&y.remove(),f!=null&&(ur(f)||Dr(f))&&e.add(f),e.one("layoutready",(function(x){e.notifications(!0),e.emit(x),e.one("load",g),e.emitAndNotify("load")})).one("layoutstop",(function(){e.one("done",m),e.emit("done")}));var v=Gt({},e._private.options.layout);v.eles=e.elements(),e.layout(v).run()}),"setElesAndLayout");h([s.style,s.elements],(function(f){var g=f[0],m=f[1];u.styleEnabled&&e.style().append(g),p(m,(function(){e.startAnimationLoop(),u.ready=!0,tn(s.ready)&&e.on("ready",s.ready);for(var y=0;y<i.length;y++){var v=i[y];e.on("ready",v)}n&&(n.readies=[]),e.emit("ready")}),s.done)}))}),"Core"),ib=ov.prototype;Gt(ib,{instanceString:l((function(){return"core"}),"instanceString"),isReady:l((function(){return this._private.ready}),"isReady"),destroyed:l((function(){return this._private.destroyed}),"destroyed"),ready:l((function(t){return this.isReady()?this.emitter().emit("ready",[],t):this.on("ready",t),this}),"ready"),destroy:l((function(){var t=this;if(!t.destroyed())return t.stopAnimationLoop(),t.destroyRenderer(),this.emit("destroy"),t._private.destroyed=!0,t}),"destroy"),hasElementWithId:l((function(t){return this._private.elements.hasElementWithId(t)}),"hasElementWithId"),getElementById:l((function(t){return this._private.elements.getElementById(t)}),"getElementById"),hasCompoundNodes:l((function(){return this._private.hasCompoundNodes}),"hasCompoundNodes"),headless:l((function(){return this._private.renderer.isHeadless()}),"headless"),styleEnabled:l((function(){return this._private.styleEnabled}),"styleEnabled"),addToPool:l((function(t){return this._private.elements.merge(t),this}),"addToPool"),removeFromPool:l((function(t){return this._private.elements.unmerge(t),this}),"removeFromPool"),container:l((function(){return this._private.container||null}),"container"),window:l((function(){if(this._private.container==null)return In;var t=this._private.container.ownerDocument;return t===void 0||t==null?In:t.defaultView||In}),"window"),mount:l((function(t){if(t!=null){var e=this,r=e._private,n=r.options;return!n6(t)&&n6(t[0])&&(t=t[0]),e.stopAnimationLoop(),e.destroyRenderer(),r.container=t,r.styleEnabled=!0,e.invalidateSize(),e.initRenderer(Gt({},n,n.renderer,{name:n.renderer.name==="null"?"canvas":n.renderer.name})),e.startAnimationLoop(),e.style(n.style),e.emit("mount"),e}}),"mount"),unmount:l((function(){var t=this;return t.stopAnimationLoop(),t.destroyRenderer(),t.initRenderer({name:"null"}),t.emit("unmount"),t}),"unmount"),options:l((function(){return Zs(this._private.options)}),"options"),json:l((function(t){var e=this,r=e._private,n=e.mutableElements(),i=l((function(x){return e.getElementById(x.id())}),"getFreshRef");if(ur(t)){if(e.startBatch(),t.elements){var a={},s=l((function(x,b){for(var w=[],T=[],k=0;k<x.length;k++){var C=x[k];if(C.data.id){var E=""+C.data.id,_=e.getElementById(E);a[E]=!0,_.length!==0?T.push({ele:_,json:C}):(b&&(C.group=b),w.push(C))}else kr("cy.json() cannot handle elements without an ID attribute")}e.add(w);for(var S=0;S<T.length;S++){var N=T[S],O=N.ele,B=N.json;O.json(B)}}),"updateEles");if(Dr(t.elements))s(t.elements);else for(var o=["nodes","edges"],u=0;u<o.length;u++){var h=o[u],d=t.elements[h];Dr(d)&&s(d,h)}var p=e.collection();n.filter((function(x){return!a[x.id()]})).forEach((function(x){x.isParent()?p.merge(x):x.remove()})),p.forEach((function(x){return x.children().move({parent:null})})),p.forEach((function(x){return i(x).remove()}))}t.style&&e.style(t.style),t.zoom!=null&&t.zoom!==r.zoom&&e.zoom(t.zoom),t.pan&&(t.pan.x===r.pan.x&&t.pan.y===r.pan.y||e.pan(t.pan)),t.data&&e.data(t.data);for(var f=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],g=0;g<f.length;g++){var m=f[g];t[m]!=null&&e[m](t[m])}return e.endBatch(),this}var y={};t?y.elements=this.elements().map((function(x){return x.json()})):(y.elements={},n.forEach((function(x){var b=x.group();y.elements[b]||(y.elements[b]=[]),y.elements[b].push(x.json())}))),this._private.styleEnabled&&(y.style=e.style().json()),y.data=Zs(e.data());var v=r.options;return y.zoomingEnabled=r.zoomingEnabled,y.userZoomingEnabled=r.userZoomingEnabled,y.zoom=r.zoom,y.minZoom=r.minZoom,y.maxZoom=r.maxZoom,y.panningEnabled=r.panningEnabled,y.userPanningEnabled=r.userPanningEnabled,y.pan=Zs(r.pan),y.boxSelectionEnabled=r.boxSelectionEnabled,y.renderer=Zs(v.renderer),y.hideEdgesOnViewport=v.hideEdgesOnViewport,y.textureOnViewport=v.textureOnViewport,y.wheelSensitivity=v.wheelSensitivity,y.motionBlur=v.motionBlur,y.multiClickDebounceTime=v.multiClickDebounceTime,y}),"json")}),ib.$id=ib.getElementById,[PCe,$Ce,Jse,AS,h4,zCe,LS,d4,VCe,Vc,my].forEach((function(t){Gt(ib,t)}));var HCe={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:l((function(t,e){return!0}),"animateFilter"),ready:void 0,stop:void 0,transform:l((function(t,e){return e}),"transform")},XCe={maximal:!1,acyclic:!1},Ah=l((function(t){return t.scratch("breadthfirst")}),"getInfo"),UP=l((function(t,e){return t.scratch("breadthfirst",e)}),"setInfo");function IS(t){this.options=Gt({},HCe,XCe,t)}l(IS,"BreadthFirstLayout"),IS.prototype.run=function(){var t,e=this.options,r=e.cy,n=e.eles,i=n.nodes().filter((function(Ee){return Ee.isChildless()})),a=n,s=e.directed,o=e.acyclic||e.maximal||e.maximalAdjustments>0,u=!!e.boundingBox,h=r.extent(),d=ha(u?e.boundingBox:{x1:h.x1,y1:h.y1,w:h.w,h:h.h});if(Ta(e.roots))t=e.roots;else if(Dr(e.roots)){for(var p=[],f=0;f<e.roots.length;f++){var g=e.roots[f],m=r.getElementById(g);p.push(m)}t=r.collection(p)}else if(Ot(e.roots))t=r.$(e.roots);else if(s)t=i.roots();else{var y=n.components();t=r.collection();for(var v=l((function(Ee){var ve=y[Ee],De=ve.maxDegree(!1),Ue=ve.filter((function(ze){return ze.degree(!1)===De}));t=t.add(Ue)}),"_loop"),x=0;x<y.length;x++)v(x)}var b=[],w={},T=l((function(Ee,ve){b[ve]==null&&(b[ve]=[]);var De=b[ve].length;b[ve].push(Ee),UP(Ee,{index:De,depth:ve})}),"addToDepth"),k=l((function(Ee,ve){var De=Ah(Ee),Ue=De.depth,ze=De.index;b[Ue][ze]=null,Ee.isChildless()&&T(Ee,ve)}),"changeDepth");a.bfs({roots:t,directed:e.directed,visit:l((function(Ee,ve,De,Ue,ze){var Ge=Ee[0],$e=Ge.id();Ge.isChildless()&&T(Ge,ze),w[$e]=!0}),"visit")});for(var C=[],E=0;E<i.length;E++){var _=i[E];w[_.id()]||C.push(_)}var S=l((function(Ee){for(var ve=b[Ee],De=0;De<ve.length;De++){var Ue=ve[De];Ue!=null?UP(Ue,{depth:Ee,index:De}):(ve.splice(De,1),De--)}}),"assignDepthsAt"),N=l((function(Ee,ve){for(var De=Ah(Ee),Ue=Ee.incomers().filter((function(X){return X.isNode()&&n.has(X)})),ze=-1,Ge=Ee.id(),$e=0;$e<Ue.length;$e++){var Pe=Ue[$e],j=Ah(Pe);ze=Math.max(ze,j.depth)}if(De.depth<=ze){if(!e.acyclic&&ve[Ge])return null;var pe=ze+1;return k(Ee,pe),ve[Ge]=pe,!0}return!1}),"adjustMaximally");if(s&&o){var O=[],B={},L=l((function(Ee){return O.push(Ee)}),"enqueue"),I=l((function(){return O.shift()}),"dequeue");for(i.forEach((function(Ee){return O.push(Ee)}));O.length>0;){var A=I(),M=N(A,B);if(M)A.outgoers().filter((function(Ee){return Ee.isNode()&&n.has(Ee)})).forEach(L);else if(M===null){kr("Detected double maximal shift for node `"+A.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var D=0;if(e.avoidOverlap)for(var R=0;R<i.length;R++){var P=i[R].layoutDimensions(e),$=P.w,z=P.h;D=Math.max(D,$,z)}var q={},W=l((function(Ee){if(q[Ee.id()])return q[Ee.id()];for(var ve=Ah(Ee).depth,De=Ee.neighborhood(),Ue=0,ze=0,Ge=0;Ge<De.length;Ge++){var $e=De[Ge];if(!$e.isEdge()&&!$e.isParent()&&i.has($e)){var Pe=Ah($e);if(Pe!=null){var j=Pe.index,pe=Pe.depth;if(j!=null&&pe!=null){var X=b[pe].length;pe<ve&&(Ue+=j/X,ze++)}}}}return Ue/=ze=Math.max(1,ze),ze===0&&(Ue=0),q[Ee.id()]=Ue,Ue}),"getWeightedPercent"),Q=l((function(Ee,ve){var De=W(Ee)-W(ve);return De===0?oae(Ee.id(),ve.id()):De}),"sortFn");e.depthSort!==void 0&&(Q=e.depthSort);for(var te=b.length,oe=0;oe<te;oe++)b[oe].sort(Q),S(oe);for(var re=[],H=0;H<C.length;H++)re.push(C[H]);var K=l((function(){for(var Ee=0;Ee<te;Ee++)S(Ee)}),"assignDepths");re.length&&(b.unshift(re),te=b.length,K());for(var ie=0,ne=0;ne<te;ne++)ie=Math.max(b[ne].length,ie);var J=d.x1+d.w/2,ue=d.y1+d.h/2,Y=i.reduce((function(Ee,ve){return De=ve.boundingBox({includeLabels:e.nodeDimensionsIncludeLabels}),{w:Ee.w===-1?De.w:(Ee.w+De.w)/2,h:Ee.h===-1?De.h:(Ee.h+De.h)/2};var De}),{w:-1,h:-1}),se=Math.max(te===1?0:u?(d.h-2*e.padding-Y.h)/(te-1):(d.h-2*e.padding-Y.h)/(te+1),D),de=b.reduce((function(Ee,ve){return Math.max(Ee,ve.length)}),0),ce=l((function(Ee){var ve=Ah(Ee),De=ve.depth,Ue=ve.index;if(e.circle){var ze=Math.min(d.w/2/te,d.h/2/te),Ge=(ze=Math.max(ze,D))*De+ze-(te>0&&b[0].length<=3?ze/2:0),$e=2*Math.PI/b[De].length*Ue;return De===0&&b[0].length===1&&(Ge=1),{x:J+Ge*Math.cos($e),y:ue+Ge*Math.sin($e)}}var Pe=b[De].length,j=Math.max(Pe===1?0:u?(d.w-2*e.padding-Y.w)/((e.grid?de:Pe)-1):(d.w-2*e.padding-Y.w)/((e.grid?de:Pe)+1),D);return{x:J+(Ue+1-(Pe+1)/2)*j,y:ue+(De+1-(te+1)/2)*se}}),"getPosition");return n.nodes().layoutPositions(this,e,ce),this};var KCe={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:l((function(t,e){return!0}),"animateFilter"),ready:void 0,stop:void 0,transform:l((function(t,e){return e}),"transform")};function RS(t){this.options=Gt({},KCe,t)}l(RS,"CircleLayout"),RS.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,i=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));for(var s,o=ha(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),u=o.x1+o.w/2,h=o.y1+o.h/2,d=(e.sweep===void 0?2*Math.PI-2*Math.PI/a.length:e.sweep)/Math.max(1,a.length-1),p=0,f=0;f<a.length;f++){var g=a[f].layoutDimensions(e),m=g.w,y=g.h;p=Math.max(p,m,y)}if(s=ct(e.radius)?e.radius:a.length<=1?0:Math.min(o.h,o.w)/2-p,a.length>1&&e.avoidOverlap){p*=1.75;var v=Math.cos(d)-Math.cos(0),x=Math.sin(d)-Math.sin(0),b=Math.sqrt(p*p/(v*v+x*x));s=Math.max(b,s)}var w=l((function(T,k){var C=e.startAngle+k*d*(i?1:-1),E=s*Math.cos(C),_=s*Math.sin(C);return{x:u+E,y:h+_}}),"getPos");return n.nodes().layoutPositions(this,e,w),this};var qP,ZCe={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:l((function(t){return t.degree()}),"concentric"),levelWidth:l((function(t){return t.maxDegree()/4}),"levelWidth"),animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:l((function(t,e){return!0}),"animateFilter"),ready:void 0,stop:void 0,transform:l((function(t,e){return e}),"transform")};function MS(t){this.options=Gt({},ZCe,t)}l(MS,"ConcentricLayout"),MS.prototype.run=function(){for(var t=this.options,e=t,r=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=t.cy,i=e.eles,a=i.nodes().not(":parent"),s=ha(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),o=s.x1+s.w/2,u=s.y1+s.h/2,h=[],d=0,p=0;p<a.length;p++){var f,g=a[p];f=e.concentric(g),h.push({value:f,node:g}),g._private.scratch.concentric=f}a.updateStyle();for(var m=0;m<a.length;m++){var y=a[m].layoutDimensions(e);d=Math.max(d,y.w,y.h)}h.sort((function(ne,J){return J.value-ne.value}));for(var v=e.levelWidth(a),x=[[]],b=x[0],w=0;w<h.length;w++){var T=h[w];b.length>0&&Math.abs(b[0].value-T.value)>=v&&(b=[],x.push(b)),b.push(T)}var k=d+e.minNodeSpacing;if(!e.avoidOverlap){var C=x.length>0&&x[0].length>1,E=(Math.min(s.w,s.h)/2-k)/(x.length+C?1:0);k=Math.min(k,E)}for(var _=0,S=0;S<x.length;S++){var N=x[S],O=e.sweep===void 0?2*Math.PI-2*Math.PI/N.length:e.sweep,B=N.dTheta=O/Math.max(1,N.length-1);if(N.length>1&&e.avoidOverlap){var L=Math.cos(B)-Math.cos(0),I=Math.sin(B)-Math.sin(0),A=Math.sqrt(k*k/(L*L+I*I));_=Math.max(A,_)}N.r=_,_+=k}if(e.equidistant){for(var M=0,D=0,R=0;R<x.length;R++){var P=x[R].r-D;M=Math.max(M,P)}D=0;for(var $=0;$<x.length;$++){var z=x[$];$===0&&(D=z.r),z.r=D,D+=M}}for(var q={},W=0;W<x.length;W++)for(var Q=x[W],te=Q.dTheta,oe=Q.r,re=0;re<Q.length;re++){var H=Q[re],K=e.startAngle+(r?1:-1)*te*re,ie={x:o+oe*Math.cos(K),y:u+oe*Math.sin(K)};q[H.node.id()]=ie}return i.nodes().layoutPositions(this,e,(function(ne){var J=ne.id();return q[J]})),this};var QCe={ready:l((function(){}),"ready"),stop:l((function(){}),"stop"),animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:l((function(t,e){return!0}),"animateFilter"),animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:l((function(t){return 2048}),"nodeRepulsion"),nodeOverlap:4,idealEdgeLength:l((function(t){return 32}),"idealEdgeLength"),edgeElasticity:l((function(t){return 32}),"edgeElasticity"),nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function yy(t){this.options=Gt({},QCe,t),this.options.layout=this;var e=this.options.eles.nodes(),r=this.options.eles.edges().filter((function(n){var i=n.source().data("id"),a=n.target().data("id"),s=e.some((function(u){return u.data("id")===i})),o=e.some((function(u){return u.data("id")===a}));return!s||!o}));this.options.eles=this.options.eles.not(r)}l(yy,"CoseLayout"),yy.prototype.run=function(){var t=this.options,e=t.cy,r=this;r.stopped=!1,t.animate!==!0&&t.animate!==!1||r.emit({type:"layoutstart",layout:r}),qP=t.debug===!0;var n=JCe(e,r,t);qP&&(void 0)(n),t.randomize&&rSe(n);var i=el(),a=l((function(){nSe(n,e,t),t.fit===!0&&e.fit(t.padding)}),"refresh"),s=l((function(p){return!(r.stopped||p>=t.numIter)&&(iSe(n,t),n.temperature=n.temperature*t.coolingFactor,!(n.temperature<t.minTemp))}),"mainLoop"),o=l((function(){if(t.animate===!0||t.animate===!1)a(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var p=t.eles.nodes(),f=eoe(n,t,p);p.layoutPositions(r,t,f)}}),"done"),u=0,h=!0;if(t.animate===!0){var d=l((function p(){for(var f=0;h&&f<t.refresh;)h=s(u),u++,f++;h?(el()-i>=t.animationThreshold&&a(),i6(p)):(WP(n,t),o())}),"frame");d()}else{for(;h;)h=s(u),u++;WP(n,t),o()}return this},yy.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},yy.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var JCe=l((function(t,e,r){for(var n=r.eles.edges(),i=r.eles.nodes(),a=ha(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),s={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:n.size(),temperature:r.initialTemp,clientWidth:a.w,clientHeight:a.h,boundingBox:a},o=r.eles.components(),u={},h=0;h<o.length;h++)for(var d=o[h],p=0;p<d.length;p++)u[d[p].id()]=h;for(h=0;h<s.nodeSize;h++){var f=(x=i[h]).layoutDimensions(r);(D={}).isLocked=x.locked(),D.id=x.data("id"),D.parentId=x.data("parent"),D.cmptId=u[x.id()],D.children=[],D.positionX=x.position("x"),D.positionY=x.position("y"),D.offsetX=0,D.offsetY=0,D.height=f.w,D.width=f.h,D.maxX=D.positionX+D.width/2,D.minX=D.positionX-D.width/2,D.maxY=D.positionY+D.height/2,D.minY=D.positionY-D.height/2,D.padLeft=parseFloat(x.style("padding")),D.padRight=parseFloat(x.style("padding")),D.padTop=parseFloat(x.style("padding")),D.padBottom=parseFloat(x.style("padding")),D.nodeRepulsion=tn(r.nodeRepulsion)?r.nodeRepulsion(x):r.nodeRepulsion,s.layoutNodes.push(D),s.idToIndex[D.id]=h}var g=[],m=0,y=-1,v=[];for(h=0;h<s.nodeSize;h++){var x,b=(x=s.layoutNodes[h]).parentId;b!=null?s.layoutNodes[s.idToIndex[b]].children.push(x.id):(g[++y]=x.id,v.push(x.id))}for(s.graphSet.push(v);m<=y;){var w=g[m++],T=s.idToIndex[w],k=s.layoutNodes[T].children;if(k.length>0)for(s.graphSet.push(k),h=0;h<k.length;h++)g[++y]=k[h]}for(h=0;h<s.graphSet.length;h++){var C=s.graphSet[h];for(p=0;p<C.length;p++){var E=s.idToIndex[C[p]];s.indexToGraph[E]=h}}for(h=0;h<s.edgeSize;h++){var _=n[h],S={};S.id=_.data("id"),S.sourceId=_.data("source"),S.targetId=_.data("target");var N=tn(r.idealEdgeLength)?r.idealEdgeLength(_):r.idealEdgeLength,O=tn(r.edgeElasticity)?r.edgeElasticity(_):r.edgeElasticity,B=s.idToIndex[S.sourceId],L=s.idToIndex[S.targetId];if(s.indexToGraph[B]!=s.indexToGraph[L]){for(var I=eSe(S.sourceId,S.targetId,s),A=s.graphSet[I],M=0,D=s.layoutNodes[B];A.indexOf(D.id)===-1;)D=s.layoutNodes[s.idToIndex[D.parentId]],M++;for(D=s.layoutNodes[L];A.indexOf(D.id)===-1;)D=s.layoutNodes[s.idToIndex[D.parentId]],M++;N*=M*r.nestingFactor}S.idealLength=N,S.elasticity=O,s.layoutEdges.push(S)}return s}),"createLayoutInfo"),eSe=l((function(t,e,r){var n=tSe(t,e,0,r);return 2>n.count?0:n.graph}),"findLCA"),tSe=l((function t(e,r,n,i){var a=i.graphSet[n];if(-1<a.indexOf(e)&&-1<a.indexOf(r))return{count:2,graph:n};for(var s=0,o=0;o<a.length;o++){var u=a[o],h=i.idToIndex[u],d=i.layoutNodes[h].children;if(d.length!==0){var p=t(e,r,i.indexToGraph[i.idToIndex[d[0]]],i);if(p.count!==0){if(p.count!==1)return p;if(++s===2)break}}}return{count:s,graph:n}}),"findLCA_aux"),rSe=l((function(t,e){for(var r=t.clientWidth,n=t.clientHeight,i=0;i<t.nodeSize;i++){var a=t.layoutNodes[i];a.children.length!==0||a.isLocked||(a.positionX=Math.random()*r,a.positionY=Math.random()*n)}}),"randomizePositions"),eoe=l((function(t,e,r){var n=t.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return e.boundingBox&&(r.forEach((function(a){var s=t.layoutNodes[t.idToIndex[a.data("id")]];i.x1=Math.min(i.x1,s.positionX),i.x2=Math.max(i.x2,s.positionX),i.y1=Math.min(i.y1,s.positionY),i.y2=Math.max(i.y2,s.positionY)})),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(a,s){var o=t.layoutNodes[t.idToIndex[a.data("id")]];if(e.boundingBox){var u=(o.positionX-i.x1)/i.w,h=(o.positionY-i.y1)/i.h;return{x:n.x1+u*n.w,y:n.y1+h*n.h}}return{x:o.positionX,y:o.positionY}}}),"getScaleInBoundsFn"),nSe=l((function(t,e,r){var n=r.layout,i=r.eles.nodes(),a=eoe(t,r,i);i.positions(a),t.ready!==!0&&(t.ready=!0,n.one("layoutready",r.ready),n.emit({type:"layoutready",layout:this}))}),"refreshPositions"),iSe=l((function(t,e,r){aSe(t,e),lSe(t),cSe(t,e),uSe(t),hSe(t)}),"step"),aSe=l((function(t,e){for(var r=0;r<t.graphSet.length;r++)for(var n=t.graphSet[r],i=n.length,a=0;a<i;a++)for(var s=t.layoutNodes[t.idToIndex[n[a]]],o=a+1;o<i;o++){var u=t.layoutNodes[t.idToIndex[n[o]]];sSe(s,u,t,e)}}),"calculateNodeForces"),jP=l((function(t){return-t+2*t*Math.random()}),"randomDistance"),sSe=l((function(t,e,r,n){if(t.cmptId===e.cmptId||r.isCompound){var i=e.positionX-t.positionX,a=e.positionY-t.positionY;i===0&&a===0&&(i=jP(1),a=jP(1));var s=oSe(t,e,i,a);if(s>0)var o=(h=n.nodeOverlap*s)*i/(y=Math.sqrt(i*i+a*a)),u=h*a/y;else{var h,d=f6(t,i,a),p=f6(e,-1*i,-1*a),f=p.x-d.x,g=p.y-d.y,m=f*f+g*g,y=Math.sqrt(m);o=(h=(t.nodeRepulsion+e.nodeRepulsion)/m)*f/y,u=h*g/y}t.isLocked||(t.offsetX-=o,t.offsetY-=u),e.isLocked||(e.offsetX+=o,e.offsetY+=u)}}),"nodeRepulsion"),oSe=l((function(t,e,r,n){if(r>0)var i=t.maxX-e.minX;else i=e.maxX-t.minX;if(n>0)var a=t.maxY-e.minY;else a=e.maxY-t.minY;return i>=0&&a>=0?Math.sqrt(i*i+a*a):0}),"nodesOverlap"),f6=l((function(t,e,r){var n=t.positionX,i=t.positionY,a=t.height||1,s=t.width||1,o=r/e,u=a/s,h={};return e===0&&0<r||e===0&&0>r?(h.x=n,h.y=i+a/2,h):0<e&&-1*u<=o&&o<=u?(h.x=n+s/2,h.y=i+s*r/2/e,h):0>e&&-1*u<=o&&o<=u?(h.x=n-s/2,h.y=i-s*r/2/e,h):0<r&&(o<=-1*u||o>=u)?(h.x=n+a*e/2/r,h.y=i+a/2,h):(0>r&&(o<=-1*u||o>=u)&&(h.x=n-a*e/2/r,h.y=i-a/2),h)}),"findClippingPoint"),lSe=l((function(t,e){for(var r=0;r<t.edgeSize;r++){var n=t.layoutEdges[r],i=t.idToIndex[n.sourceId],a=t.layoutNodes[i],s=t.idToIndex[n.targetId],o=t.layoutNodes[s],u=o.positionX-a.positionX,h=o.positionY-a.positionY;if(u!==0||h!==0){var d=f6(a,u,h),p=f6(o,-1*u,-1*h),f=p.x-d.x,g=p.y-d.y,m=Math.sqrt(f*f+g*g),y=Math.pow(n.idealLength-m,2)/n.elasticity;if(m!==0)var v=y*f/m,x=y*g/m;else v=0,x=0;a.isLocked||(a.offsetX+=v,a.offsetY+=x),o.isLocked||(o.offsetX-=v,o.offsetY-=x)}}}),"calculateEdgeForces"),cSe=l((function(t,e){if(e.gravity!==0)for(var r=0;r<t.graphSet.length;r++){var n=t.graphSet[r],i=n.length;if(r===0)var a=t.clientHeight/2,s=t.clientWidth/2;else{var o=t.layoutNodes[t.idToIndex[n[0]]],u=t.layoutNodes[t.idToIndex[o.parentId]];a=u.positionX,s=u.positionY}for(var h=0;h<i;h++){var d=t.layoutNodes[t.idToIndex[n[h]]];if(!d.isLocked){var p=a-d.positionX,f=s-d.positionY,g=Math.sqrt(p*p+f*f);if(g>1){var m=e.gravity*p/g,y=e.gravity*f/g;d.offsetX+=m,d.offsetY+=y}}}}}),"calculateGravityForces"),uSe=l((function(t,e){var r=[],n=0,i=-1;for(r.push.apply(r,t.graphSet[0]),i+=t.graphSet[0].length;n<=i;){var a=r[n++],s=t.idToIndex[a],o=t.layoutNodes[s],u=o.children;if(0<u.length&&!o.isLocked){for(var h=o.offsetX,d=o.offsetY,p=0;p<u.length;p++){var f=t.layoutNodes[t.idToIndex[u[p]]];f.offsetX+=h,f.offsetY+=d,r[++i]=u[p]}o.offsetX=0,o.offsetY=0}}}),"propagateForces"),hSe=l((function(t,e){for(var r=0;r<t.nodeSize;r++)0<(i=t.layoutNodes[r]).children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0);for(r=0;r<t.nodeSize;r++)if(!(0<(i=t.layoutNodes[r]).children.length||i.isLocked)){var n=dSe(i.offsetX,i.offsetY,t.temperature);i.positionX+=n.x,i.positionY+=n.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,pSe(i,t)}for(r=0;r<t.nodeSize;r++){var i;0<(i=t.layoutNodes[r]).children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}}),"updatePositions"),dSe=l((function(t,e,r){var n=Math.sqrt(t*t+e*e);if(n>r)var i={x:r*t/n,y:r*e/n};else i={x:t,y:e};return i}),"limitForce"),pSe=l((function t(e,r){var n=e.parentId;if(n!=null){var i=r.layoutNodes[r.idToIndex[n]],a=!1;return(i.maxX==null||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,a=!0),(i.minX==null||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,a=!0),(i.maxY==null||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,a=!0),(i.minY==null||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,a=!0),a?t(i,r):void 0}}),"updateAncestryBoundaries"),WP=l((function(t,e){for(var r=t.layoutNodes,n=[],i=0;i<r.length;i++){var a=r[i],s=a.cmptId;(n[s]=n[s]||[]).push(a)}var o=0;for(i=0;i<n.length;i++)if(y=n[i]){y.x1=1/0,y.x2=-1/0,y.y1=1/0,y.y2=-1/0;for(var u=0;u<y.length;u++){var h=y[u];y.x1=Math.min(y.x1,h.positionX-h.width/2),y.x2=Math.max(y.x2,h.positionX+h.width/2),y.y1=Math.min(y.y1,h.positionY-h.height/2),y.y2=Math.max(y.y2,h.positionY+h.height/2)}y.w=y.x2-y.x1,y.h=y.y2-y.y1,o+=y.w*y.h}n.sort((function(v,x){return x.w*x.h-v.w*v.h}));var d=0,p=0,f=0,g=0,m=Math.sqrt(o)*t.clientWidth/t.clientHeight;for(i=0;i<n.length;i++){var y;if(y=n[i]){for(u=0;u<y.length;u++)(h=y[u]).isLocked||(h.positionX+=d-y.x1,h.positionY+=p-y.y1);d+=y.w+e.componentSpacing,f+=y.w+e.componentSpacing,g=Math.max(g,y.h),f>m&&(p+=g+e.componentSpacing,d=0,f=0,g=0)}}}),"separateComponents"),fSe={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:l((function(t){}),"position"),sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:l((function(t,e){return!0}),"animateFilter"),ready:void 0,stop:void 0,transform:l((function(t,e){return e}),"transform")};function DS(t){this.options=Gt({},fSe,t)}l(DS,"GridLayout"),DS.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var a=ha(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(a.h===0||a.w===0)n.nodes().layoutPositions(this,e,(function(W){return{x:a.x1,y:a.y1}}));else{var s=i.size(),o=Math.sqrt(s*a.h/a.w),u=Math.round(o),h=Math.round(a.w/a.h*o),d=l((function(W){if(W==null)return Math.min(u,h);Math.min(u,h)==u?u=W:h=W}),"small"),p=l((function(W){if(W==null)return Math.max(u,h);Math.max(u,h)==u?u=W:h=W}),"large"),f=e.rows,g=e.cols!=null?e.cols:e.columns;if(f!=null&&g!=null)u=f,h=g;else if(f!=null&&g==null)u=f,h=Math.ceil(s/u);else if(f==null&&g!=null)h=g,u=Math.ceil(s/h);else if(h*u>s){var m=d(),y=p();(m-1)*y>=s?d(m-1):(y-1)*m>=s&&p(y-1)}else for(;h*u<s;){var v=d(),x=p();(x+1)*v>=s?p(x+1):d(v+1)}var b=a.w/h,w=a.h/u;if(e.condense&&(b=0,w=0),e.avoidOverlap)for(var T=0;T<i.length;T++){var k=i[T],C=k._private.position;C.x!=null&&C.y!=null||(C.x=0,C.y=0);var E=k.layoutDimensions(e),_=e.avoidOverlapPadding,S=E.w+_,N=E.h+_;b=Math.max(b,S),w=Math.max(w,N)}for(var O={},B=l((function(W,Q){return!!O["c-"+W+"-"+Q]}),"used"),L=l((function(W,Q){O["c-"+W+"-"+Q]=!0}),"use"),I=0,A=0,M=l((function(){++A>=h&&(A=0,I++)}),"moveToNextCell"),D={},R=0;R<i.length;R++){var P=i[R],$=e.position(P);if($&&($.row!==void 0||$.col!==void 0)){var z={row:$.row,col:$.col};if(z.col===void 0)for(z.col=0;B(z.row,z.col);)z.col++;else if(z.row===void 0)for(z.row=0;B(z.row,z.col);)z.row++;D[P.id()]=z,L(z.row,z.col)}}var q=l((function(W,Q){var te,oe;if(W.locked()||W.isParent())return!1;var re=D[W.id()];if(re)te=re.col*b+b/2+a.x1,oe=re.row*w+w/2+a.y1;else{for(;B(I,A);)M();te=A*b+b/2+a.x1,oe=I*w+w/2+a.y1,L(I,A),M()}return{x:te,y:oe}}),"getPos");i.layoutPositions(this,e,q)}return this};var gSe={ready:l((function(){}),"ready"),stop:l((function(){}),"stop")};function p4(t){this.options=Gt({},gSe,t)}l(p4,"NullLayout"),p4.prototype.run=function(){var t=this.options,e=t.eles,r=this;return t.cy,r.emit("layoutstart"),e.nodes().positions((function(){return{x:0,y:0}})),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this},p4.prototype.stop=function(){return this};var mSe={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:l((function(t,e){return!0}),"animateFilter"),ready:void 0,stop:void 0,transform:l((function(t,e){return e}),"transform")};function OS(t){this.options=Gt({},mSe,t)}l(OS,"PresetLayout"),OS.prototype.run=function(){var t=this.options,e=t.eles.nodes(),r=tn(t.positions);function n(i){if(t.positions==null)return $Te(i.position());if(r)return t.positions(i);var a=t.positions[i._private.data.id];return a??null}return l(n,"getPosition"),e.layoutPositions(this,t,(function(i,a){var s=n(i);return!i.locked()&&s!=null&&s})),this};var ySe={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:l((function(t,e){return!0}),"animateFilter"),ready:void 0,stop:void 0,transform:l((function(t,e){return e}),"transform")};function PS(t){this.options=Gt({},ySe,t)}l(PS,"RandomLayout"),PS.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=ha(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),i=l((function(a,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}}),"getPos");return r.nodes().layoutPositions(this,t,i),this};var vSe=[{name:"breadthfirst",impl:IS},{name:"circle",impl:RS},{name:"concentric",impl:MS},{name:"cose",impl:yy},{name:"grid",impl:DS},{name:"null",impl:p4},{name:"preset",impl:OS},{name:"random",impl:PS}];function ZN(t){this.options=t,this.notifications=0}l(ZN,"NullRenderer");var YP=l((function(){}),"noop"),VP=l((function(){throw new Error("A headless instance can not render images")}),"throwImgErr");ZN.prototype={recalculateRenderedStyle:YP,notify:l((function(){this.notifications++}),"notify"),init:YP,isHeadless:l((function(){return!0}),"isHeadless"),png:VP,jpg:VP};var BS,$S,xSe={arrowShapeWidth:.3,registerArrowShapes:function(){var t=this.arrowShapes={},e=this,r=l((function(u,h,d,p,f,g,m){var y=f.x-d/2-m,v=f.x+d/2+m,x=f.y-d/2-m,b=f.y+d/2+m;return y<=u&&u<=v&&x<=h&&h<=b}),"bbCollide"),n=l((function(u,h,d,p,f){var g=u*Math.cos(p)-h*Math.sin(p),m=(u*Math.sin(p)+h*Math.cos(p))*d;return{x:g*d+f.x,y:m+f.y}}),"transform"),i=l((function(u,h,d,p){for(var f=[],g=0;g<u.length;g+=2){var m=u[g],y=u[g+1];f.push(n(m,y,h,d,p))}return f}),"transformPoints"),a=l((function(u){for(var h=[],d=0;d<u.length;d++){var p=u[d];h.push(p.x,p.y)}return h}),"pointsToArr"),s=l((function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").pfValue*2}),"standardGap"),o=l((function(u,h){Ot(h)&&(h=t[h]),t[u]=Gt({name:u,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:l((function(d,p,f,g,m,y){var v=a(i(this.points,f+2*y,g,m));return ea(d,p,v)}),"collide"),roughCollide:r,draw:l((function(d,p,f,g){var m=i(this.points,p,f,g);e.arrowShapeImpl("polygon")(d,m)}),"draw"),spacing:l((function(d){return 0}),"spacing"),gap:s},h)}),"defineArrowShape");o("none",{collide:a6,roughCollide:a6,draw:MN,spacing:nP,gap:nP}),o("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),o("arrow","triangle"),o("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:l((function(u,h,d,p,f){var g=i(this.points,h,d,p),m=this.controlPoint,y=n(m[0],m[1],h,d,p);e.arrowShapeImpl(this.name)(u,g,y)}),"draw"),gap:l((function(u){return .8*s(u)}),"gap")}),o("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:l((function(u,h,d,p,f,g,m){var y=a(i(this.points,d+2*m,p,f)),v=a(i(this.pointsTee,d+2*m,p,f));return ea(u,h,y)||ea(u,h,v)}),"collide"),draw:l((function(u,h,d,p,f){var g=i(this.points,h,d,p),m=i(this.pointsTee,h,d,p);e.arrowShapeImpl(this.name)(u,g,m)}),"draw")}),o("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:l((function(u,h,d,p,f,g,m){var y=f,v=Math.pow(y.x-u,2)+Math.pow(y.y-h,2)<=Math.pow((d+2*m)*this.radius,2),x=a(i(this.points,d+2*m,p,f));return ea(u,h,x)||v}),"collide"),draw:l((function(u,h,d,p,f){var g=i(this.pointsTr,h,d,p);e.arrowShapeImpl(this.name)(u,g,p.x,p.y,this.radius*h)}),"draw"),spacing:l((function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}),"spacing")}),o("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:l((function(u,h){var d=this.baseCrossLinePts.slice(),p=h/u;return d[3]=d[3]-p,d[5]=d[5]-p,d}),"crossLinePts"),collide:l((function(u,h,d,p,f,g,m){var y=a(i(this.points,d+2*m,p,f)),v=a(i(this.crossLinePts(d,g),d+2*m,p,f));return ea(u,h,y)||ea(u,h,v)}),"collide"),draw:l((function(u,h,d,p,f){var g=i(this.points,h,d,p),m=i(this.crossLinePts(h,f),h,d,p);e.arrowShapeImpl(this.name)(u,g,m)}),"draw")}),o("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:l((function(u){return .525*s(u)}),"gap")}),o("circle",{radius:.15,collide:l((function(u,h,d,p,f,g,m){var y=f;return Math.pow(y.x-u,2)+Math.pow(y.y-h,2)<=Math.pow((d+2*m)*this.radius,2)}),"collide"),draw:l((function(u,h,d,p,f){e.arrowShapeImpl(this.name)(u,p.x,p.y,this.radius*h)}),"draw"),spacing:l((function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}),"spacing")}),o("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:l((function(u){return 1}),"spacing"),gap:l((function(u){return 1}),"gap")}),o("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),o("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:l((function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}),"gap")}),o("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:l((function(u){return .95*u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}),"gap")})}},bSe={projectIntoViewport:function(t,e){var r=this.cy,n=this.findContainerClientCoords(),i=n[0],a=n[1],s=n[4],o=r.pan(),u=r.zoom();return[((t-i)/s-o.x)/u,((e-a)/s-o.y)/u]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),r=this.cy.window().getComputedStyle(t),n=l((function(k){return parseFloat(r.getPropertyValue(k))}),"styleValue"),i=n("padding-left"),a=n("padding-right"),s=n("padding-top"),o=n("padding-bottom"),u=n("border-left-width"),h=n("border-right-width"),d=n("border-top-width"),p=(n("border-bottom-width"),t.clientWidth),f=t.clientHeight,g=i+a,m=s+o,y=u+h,v=e.width/(p+y),x=p-g,b=f-m,w=e.left+i+u,T=e.top+s+d;return this.containerBB=[w,T,x,b,v]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(t,e,r,n){return this.findNearestElements(t,e,r,n)[0]},findNearestElements:function(t,e,r,n){var i,a,s=this,o=this,u=o.getCachedZSortedEles(),h=[],d=o.cy.zoom(),p=o.cy.hasCompoundNodes(),f=(n?24:8)/d,g=(n?8:2)/d,m=(n?8:2)/d,y=1/0;function v(E,_){if(E.isNode()){if(a)return;a=E,h.push(E)}if(E.isEdge()&&(_==null||_<y))if(i){if(i.pstyle("z-compound-depth").value===E.pstyle("z-compound-depth").value&&i.pstyle("z-compound-depth").value===E.pstyle("z-compound-depth").value){for(var S=0;S<h.length;S++)if(h[S].isEdge()){h[S]=E,i=E,y=_??y;break}}}else h.push(E),i=E,y=_??y}function x(E){var _=E.outerWidth()+2*g,S=E.outerHeight()+2*g,N=_/2,O=S/2,B=E.position(),L=E.pstyle("corner-radius").value==="auto"?"auto":E.pstyle("corner-radius").pfValue,I=E._private.rscratch;if(B.x-N<=t&&t<=B.x+N&&B.y-O<=e&&e<=B.y+O&&o.nodeShapes[s.getNodeShape(E)].checkPoint(t,e,0,_,S,B.x,B.y,L,I))return v(E,0),!0}function b(E){var _,S=E._private,N=S.rscratch,O=E.pstyle("width").pfValue,B=E.pstyle("arrow-scale").value,L=O/2+f,I=L*L,A=2*L,M=S.source,D=S.target;if(N.edgeType==="segments"||N.edgeType==="straight"||N.edgeType==="haystack"){for(var R=N.allpts,P=0;P+3<R.length;P+=2)if(ZTe(t,e,R[P],R[P+1],R[P+2],R[P+3],A)&&I>(_=rEe(t,e,R[P],R[P+1],R[P+2],R[P+3])))return v(E,_),!0}else if(N.edgeType==="bezier"||N.edgeType==="multibezier"||N.edgeType==="self"||N.edgeType==="compound"){for(R=N.allpts,P=0;P+5<N.allpts.length;P+=4)if(QTe(t,e,R[P],R[P+1],R[P+2],R[P+3],R[P+4],R[P+5],A)&&I>(_=tEe(t,e,R[P],R[P+1],R[P+2],R[P+3],R[P+4],R[P+5])))return v(E,_),!0}M=M||S.source,D=D||S.target;var $=s.getArrowWidth(O,B),z=[{name:"source",x:N.arrowStartX,y:N.arrowStartY,angle:N.srcArrowAngle},{name:"target",x:N.arrowEndX,y:N.arrowEndY,angle:N.tgtArrowAngle},{name:"mid-source",x:N.midX,y:N.midY,angle:N.midsrcArrowAngle},{name:"mid-target",x:N.midX,y:N.midY,angle:N.midtgtArrowAngle}];for(P=0;P<z.length;P++){var q=z[P],W=o.arrowShapes[E.pstyle(q.name+"-arrow-shape").value],Q=E.pstyle("width").pfValue;if(W.roughCollide(t,e,$,q.angle,{x:q.x,y:q.y},Q,f)&&W.collide(t,e,$,q.angle,{x:q.x,y:q.y},Q,f))return v(E),!0}p&&h.length>0&&(x(M),x(D))}function w(E,_,S){return ps(E,_,S)}function T(E,_){var S,N=E._private,O=m;S=_?_+"-":"",E.boundingBox();var B=N.labelBounds[_||"main"],L=E.pstyle(S+"label").value;if(E.pstyle("text-events").strValue==="yes"&&L){var I=w(N.rscratch,"labelX",_),A=w(N.rscratch,"labelY",_),M=w(N.rscratch,"labelAngle",_),D=E.pstyle(S+"text-margin-x").pfValue,R=E.pstyle(S+"text-margin-y").pfValue,P=B.x1-O-D,$=B.x2+O-D,z=B.y1-O-R,q=B.y2+O-R;if(M){var W=Math.cos(M),Q=Math.sin(M),te=l((function(ne,J){return{x:(ne-=I)*W-(J-=A)*Q+I,y:ne*Q+J*W+A}}),"rotate"),oe=te(P,z),re=te(P,q),H=te($,z),K=te($,q),ie=[oe.x+D,oe.y+R,H.x+D,H.y+R,K.x+D,K.y+R,re.x+D,re.y+R];if(ea(t,e,ie))return v(E),!0}else if(np(B,t,e))return v(E),!0}}r&&(u=u.interactive),l(v,"addEle"),l(x,"checkNode"),l(b,"checkEdge"),l(w,"preprop"),l(T,"checkLabel");for(var k=u.length-1;k>=0;k--){var C=u[k];C.isNode()?x(C)||T(C):b(C)||T(C)||T(C,"source")||T(C,"target")}return h},getAllInBox:function(t,e,r,n){for(var i=this.getCachedZSortedEles().interactive,a=[],s=Math.min(t,r),o=Math.max(t,r),u=Math.min(e,n),h=Math.max(e,n),d=ha({x1:t=s,y1:e=u,x2:r=o,y2:n=h}),p=0;p<i.length;p++){var f=i[p];if(f.isNode()){var g=f,m=g.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});ON(d,m)&&!Dae(m,d)&&a.push(g)}else{var y=f,v=y._private,x=v.rscratch;if(x.startX!=null&&x.startY!=null&&!np(d,x.startX,x.startY)||x.endX!=null&&x.endY!=null&&!np(d,x.endX,x.endY))continue;if(x.edgeType==="bezier"||x.edgeType==="multibezier"||x.edgeType==="self"||x.edgeType==="compound"||x.edgeType==="segments"||x.edgeType==="haystack"){for(var b=v.rstyle.bezierPts||v.rstyle.linePts||v.rstyle.haystackPts,w=!0,T=0;T<b.length;T++)if(!KTe(d,b[T])){w=!1;break}w&&a.push(y)}else x.edgeType!=="haystack"&&x.edgeType!=="straight"||a.push(y)}}return a}},f4={};f4.calculateArrowAngles=function(t){var e,r,n,i,a,s,o=t._private.rscratch,u=o.edgeType==="haystack",h=o.edgeType==="bezier",d=o.edgeType==="multibezier",p=o.edgeType==="segments",f=o.edgeType==="compound",g=o.edgeType==="self";if(u?(n=o.haystackPts[0],i=o.haystackPts[1],a=o.haystackPts[2],s=o.haystackPts[3]):(n=o.arrowStartX,i=o.arrowStartY,a=o.arrowEndX,s=o.arrowEndY),y=o.midX,v=o.midY,p)e=n-o.segpts[0],r=i-o.segpts[1];else if(d||f||g||h){var m=o.allpts;e=n-Vn(m[0],m[2],m[4],.1),r=i-Vn(m[1],m[3],m[5],.1)}else e=n-y,r=i-v;o.srcArrowAngle=Vx(e,r);var y=o.midX,v=o.midY;if(u&&(y=(n+a)/2,v=(i+s)/2),e=a-n,r=s-i,p)if((m=o.allpts).length/2%2==0){var x=(S=m.length/2)-2;e=m[S]-m[x],r=m[S+1]-m[x+1]}else o.isRound?(e=o.midVector[1],r=-o.midVector[0]):(x=(S=m.length/2-1)-2,e=m[S]-m[x],r=m[S+1]-m[x+1]);else if(d||f||g){var b,w,T,k,m=o.allpts;if(o.ctrlpts.length/2%2==0){var C=(E=(_=m.length/2-1)+2)+2;b=Vn(m[_],m[E],m[C],0),w=Vn(m[_+1],m[E+1],m[C+1],0),T=Vn(m[_],m[E],m[C],1e-4),k=Vn(m[_+1],m[E+1],m[C+1],1e-4)}else{var E,_;C=(E=m.length/2-1)+2,b=Vn(m[_=E-2],m[E],m[C],.4999),w=Vn(m[_+1],m[E+1],m[C+1],.4999),T=Vn(m[_],m[E],m[C],.5),k=Vn(m[_+1],m[E+1],m[C+1],.5)}e=T-b,r=k-w}if(o.midtgtArrowAngle=Vx(e,r),o.midDispX=e,o.midDispY=r,e*=-1,r*=-1,p&&(m=o.allpts).length/2%2!=0){if(!o.isRound){var S,N=(S=m.length/2-1)+2;e=-(m[N]-m[S]),r=-(m[N+1]-m[S+1])}}if(o.midsrcArrowAngle=Vx(e,r),p)e=a-o.segpts[o.segpts.length-2],r=s-o.segpts[o.segpts.length-1];else if(d||f||g||h){var O=(m=o.allpts).length;e=a-Vn(m[O-6],m[O-4],m[O-2],.9),r=s-Vn(m[O-5],m[O-3],m[O-1],.9)}else e=a-y,r=s-v;o.tgtArrowAngle=Vx(e,r)},f4.getArrowWidth=f4.getArrowHeight=function(t,e){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[t+", "+e];return n||(n=Math.max(Math.pow(13.37*t,.9),29)*e,r[t+", "+e]=n,n)};var HP,XP,tu,g4,xo,Lc,Hc,bo,Um,ab,toe,roe,FS,zS,KP,Fs={},Pa={},ZP=l((function(t,e,r){r.x=e.x-t.x,r.y=e.y-t.y,r.len=Math.sqrt(r.x*r.x+r.y*r.y),r.nx=r.x/r.len,r.ny=r.y/r.len,r.ang=Math.atan2(r.ny,r.nx)}),"asVec"),wSe=l((function(t,e){e.x=-1*t.x,e.y=-1*t.y,e.nx=-1*t.nx,e.ny=-1*t.ny,e.ang=t.ang>0?-(Math.PI-t.ang):Math.PI+t.ang}),"invertVec"),kSe=l((function(t,e,r,n,i){if(t!==KP?ZP(e,t,Fs):wSe(Pa,Fs),ZP(e,r,Pa),HP=Fs.nx*Pa.ny-Fs.ny*Pa.nx,XP=Fs.nx*Pa.nx-Fs.ny*-Pa.ny,xo=Math.asin(Math.max(-1,Math.min(1,HP))),Math.abs(xo)<1e-6)return BS=e.x,$S=e.y,void(Hc=Um=0);tu=1,g4=!1,XP<0?xo<0?xo=Math.PI+xo:(xo=Math.PI-xo,tu=-1,g4=!0):xo>0&&(tu=-1,g4=!0),Um=e.radius!==void 0?e.radius:n,Lc=xo/2,ab=Math.min(Fs.len/2,Pa.len/2),i?(bo=Math.abs(Math.cos(Lc)*Um/Math.sin(Lc)))>ab?(bo=ab,Hc=Math.abs(bo*Math.sin(Lc)/Math.cos(Lc))):Hc=Um:(bo=Math.min(ab,Um),Hc=Math.abs(bo*Math.sin(Lc)/Math.cos(Lc))),FS=e.x+Pa.nx*bo,zS=e.y+Pa.ny*bo,BS=FS-Pa.ny*Hc*tu,$S=zS+Pa.nx*Hc*tu,toe=e.x+Fs.nx*bo,roe=e.y+Fs.ny*bo,KP=e}),"calcCornerArc");function QN(t,e){e.radius===0?t.lineTo(e.cx,e.cy):t.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function uk(t,e,r,n){var i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(kSe(t,e,r,n,i),{cx:BS,cy:$S,radius:Hc,startX:toe,startY:roe,stopX:FS,stopY:zS,startAngle:Fs.ang+Math.PI/2*tu,endAngle:Pa.ang-Math.PI/2*tu,counterClockwise:g4})}l(QN,"drawPreparedRoundCorner"),l(uk,"getRoundCorner");var vi={};function FT(t){var e=[];if(t!=null){for(var r=0;r<t.length;r+=2){var n=t[r],i=t[r+1];e.push({x:n,y:i})}return e}}vi.findMidptPtsEtc=function(t,e){var r,n=e.posPts,i=e.intersectionPts,a=e.vectorNormInverse,s=t.pstyle("source-endpoint"),o=t.pstyle("target-endpoint"),u=s.units!=null&&o.units!=null,h=l((function(x,b,w,T){var k=T-b,C=w-x,E=Math.sqrt(C*C+k*k);return{x:-k/E,y:C/E}}),"recalcVectorNormInverse");switch(t.pstyle("edge-distances").value){case"node-position":r=n;break;case"intersection":r=i;break;case"endpoints":if(u){var d=yn(this.manualEndptToPx(t.source()[0],s),2),p=d[0],f=d[1],g=yn(this.manualEndptToPx(t.target()[0],o),2),m=g[0],y=g[1],v={x1:p,y1:f,x2:m,y2:y};a=h(p,f,m,y),r=v}else kr("Edge ".concat(t.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),r=i}return{midptPts:r,vectorNormInverse:a}},vi.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=r._private,i=n.rscratch;if(!i.haystack){var a=2*Math.random()*Math.PI;i.source={x:Math.cos(a),y:Math.sin(a)},a=2*Math.random()*Math.PI,i.target={x:Math.cos(a),y:Math.sin(a)}}var s=n.source,o=n.target,u=s.position(),h=o.position(),d=s.width(),p=o.width(),f=s.height(),g=o.height(),m=r.pstyle("haystack-radius").value/2;i.haystackPts=i.allpts=[i.source.x*d*m+u.x,i.source.y*f*m+u.y,i.target.x*p*m+h.x,i.target.y*g*m+h.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}},vi.findSegmentsPoints=function(t,e){var r=t._private.rscratch,n=t.pstyle("segment-weights"),i=t.pstyle("segment-distances"),a=t.pstyle("segment-radii"),s=t.pstyle("radius-type"),o=Math.min(n.pfValue.length,i.pfValue.length),u=a.pfValue[a.pfValue.length-1],h=s.pfValue[s.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var d=0;d<o;d++){var p=n.pfValue[d],f=i.pfValue[d],g=1-p,m=p,y=this.findMidptPtsEtc(t,e),v=y.midptPts,x=y.vectorNormInverse,b={x:v.x1*g+v.x2*m,y:v.y1*g+v.y2*m};r.segpts.push(b.x+x.x*f,b.y+x.y*f),r.radii.push(a.pfValue[d]!==void 0?a.pfValue[d]:u),r.isArcRadius.push((s.pfValue[d]!==void 0?s.pfValue[d]:h)==="arc-radius")}},vi.findLoopPoints=function(t,e,r,n){var i=t._private.rscratch,a=e.dirCounts,s=e.srcPos,o=t.pstyle("control-point-distances"),u=o?o.pfValue[0]:void 0,h=t.pstyle("loop-direction").pfValue,d=t.pstyle("loop-sweep").pfValue,p=t.pstyle("control-point-step-size").pfValue;i.edgeType="self";var f=r,g=p;n&&(f=0,g=u);var m=h-Math.PI/2,y=m-d/2,v=m+d/2,x=h+"_"+d;f=a[x]===void 0?a[x]=0:++a[x],i.ctrlpts=[s.x+1.4*Math.cos(y)*g*(f/3+1),s.y+1.4*Math.sin(y)*g*(f/3+1),s.x+1.4*Math.cos(v)*g*(f/3+1),s.y+1.4*Math.sin(v)*g*(f/3+1)]},vi.findCompoundLoopPoints=function(t,e,r,n){var i=t._private.rscratch;i.edgeType="compound";var a=e.srcPos,s=e.tgtPos,o=e.srcW,u=e.srcH,h=e.tgtW,d=e.tgtH,p=t.pstyle("control-point-step-size").pfValue,f=t.pstyle("control-point-distances"),g=f?f.pfValue[0]:void 0,m=r,y=p;n&&(m=0,y=g);var v={x:a.x-o/2,y:a.y-u/2},x={x:s.x-h/2,y:s.y-d/2},b={x:Math.min(v.x,x.x),y:Math.min(v.y,x.y)},w=Math.max(.5,Math.log(.01*o)),T=Math.max(.5,Math.log(.01*h));i.ctrlpts=[b.x,b.y-(1+Math.pow(50,1.12)/100)*y*(m/3+1)*w,b.x-(1+Math.pow(50,1.12)/100)*y*(m/3+1)*T,b.y]},vi.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"},vi.findBezierPoints=function(t,e,r,n,i){var a=t._private.rscratch,s=t.pstyle("control-point-step-size").pfValue,o=t.pstyle("control-point-distances"),u=t.pstyle("control-point-weights"),h=o&&u?Math.min(o.value.length,u.value.length):1,d=o?o.pfValue[0]:void 0,p=u.value[0],f=n;a.edgeType=f?"multibezier":"bezier",a.ctrlpts=[];for(var g=0;g<h;g++){var m=(.5-e.eles.length/2+r)*s*(i?-1:1),y=void 0,v=aP(m);f&&(d=o?o.pfValue[g]:s,p=u.value[g]);var x=(y=n?d:d!==void 0?v*d:void 0)!==void 0?y:m,b=1-p,w=p,T=this.findMidptPtsEtc(t,e),k=T.midptPts,C=T.vectorNormInverse,E={x:k.x1*b+k.x2*w,y:k.y1*b+k.y2*w};a.ctrlpts.push(E.x+C.x*x,E.y+C.y*x)}},vi.findTaxiPoints=function(t,e){var r=t._private.rscratch;r.edgeType="segments";var n="vertical",i="horizontal",a="leftward",s="rightward",o="downward",u="upward",h=e.posPts,d=e.srcW,p=e.srcH,f=e.tgtW,g=e.tgtH,m=t.pstyle("edge-distances").value!=="node-position",y=t.pstyle("taxi-direction").value,v=y,x=t.pstyle("taxi-turn"),b=x.units==="%",w=x.pfValue,T=w<0,k=t.pstyle("taxi-turn-min-distance").pfValue,C=m?(d+f)/2:0,E=m?(p+g)/2:0,_=h.x2-h.x1,S=h.y2-h.y1,N=l((function(pe,X){return pe>0?Math.max(pe-X,0):Math.min(pe+X,0)}),"subDWH"),O=N(_,C),B=N(S,E),L=!1;v==="auto"?y=Math.abs(O)>Math.abs(B)?i:n:v===u||v===o?(y=n,L=!0):v!==a&&v!==s||(y=i,L=!0);var I,A=y===n,M=A?B:O,D=A?S:_,R=aP(D),P=!1;L&&(b||T)||!(v===o&&D<0||v===u&&D>0||v===a&&D>0||v===s&&D<0)||(M=(R*=-1)*Math.abs(M),P=!0),b?I=(w<0?1+w:w)*M:I=(w<0?M:0)+w*R;var $=l((function(pe){return Math.abs(pe)<k||Math.abs(pe)>=Math.abs(M)}),"getIsTooClose"),z=$(I),q=$(Math.abs(M)-Math.abs(I));if((z||q)&&!P)if(A){var W=Math.abs(D)<=p/2,Q=Math.abs(_)<=f/2;if(W){var te=(h.x1+h.x2)/2,oe=h.y1,re=h.y2;r.segpts=[te,oe,te,re]}else if(Q){var H=(h.y1+h.y2)/2,K=h.x1,ie=h.x2;r.segpts=[K,H,ie,H]}else r.segpts=[h.x1,h.y2]}else{var ne=Math.abs(D)<=d/2,J=Math.abs(S)<=g/2;if(ne){var ue=(h.y1+h.y2)/2,Y=h.x1,se=h.x2;r.segpts=[Y,ue,se,ue]}else if(J){var de=(h.x1+h.x2)/2,ce=h.y1,Ee=h.y2;r.segpts=[de,ce,de,Ee]}else r.segpts=[h.x2,h.y1]}else if(A){var ve=h.y1+I+(m?p/2*R:0),De=h.x1,Ue=h.x2;r.segpts=[De,ve,Ue,ve]}else{var ze=h.x1+I+(m?d/2*R:0),Ge=h.y1,$e=h.y2;r.segpts=[ze,Ge,ze,$e]}if(r.isRound){var Pe=t.pstyle("taxi-radius").value,j=t.pstyle("radius-type").value[0]==="arc-radius";r.radii=new Array(r.segpts.length/2).fill(Pe),r.isArcRadius=new Array(r.segpts.length/2).fill(j)}},vi.tryToCorrectInvalidPoints=function(t,e){var r=t._private.rscratch;if(r.edgeType==="bezier"){var n=e.srcPos,i=e.tgtPos,a=e.srcW,s=e.srcH,o=e.tgtW,u=e.tgtH,h=e.srcShape,d=e.tgtShape,p=e.srcCornerRadius,f=e.tgtCornerRadius,g=e.srcRs,m=e.tgtRs,y=!ct(r.startX)||!ct(r.startY),v=!ct(r.arrowStartX)||!ct(r.arrowStartY),x=!ct(r.endX)||!ct(r.endY),b=!ct(r.arrowEndX)||!ct(r.arrowEndY),w=3*(this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth),T=th({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),k=T<w,C=th({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),E=C<w,_=!1;if(y||v||k){_=!0;var S={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},N=Math.sqrt(S.x*S.x+S.y*S.y),O={x:S.x/N,y:S.y/N},B=Math.max(a,s),L={x:r.ctrlpts[0]+2*O.x*B,y:r.ctrlpts[1]+2*O.y*B},I=h.intersectLine(n.x,n.y,a,s,L.x,L.y,0,p,g);k?(r.ctrlpts[0]=r.ctrlpts[0]+O.x*(w-T),r.ctrlpts[1]=r.ctrlpts[1]+O.y*(w-T)):(r.ctrlpts[0]=I[0]+O.x*w,r.ctrlpts[1]=I[1]+O.y*w)}if(x||b||E){_=!0;var A={x:r.ctrlpts[0]-i.x,y:r.ctrlpts[1]-i.y},M=Math.sqrt(A.x*A.x+A.y*A.y),D={x:A.x/M,y:A.y/M},R=Math.max(a,s),P={x:r.ctrlpts[0]+2*D.x*R,y:r.ctrlpts[1]+2*D.y*R},$=d.intersectLine(i.x,i.y,o,u,P.x,P.y,0,f,m);E?(r.ctrlpts[0]=r.ctrlpts[0]+D.x*(w-C),r.ctrlpts[1]=r.ctrlpts[1]+D.y*(w-C)):(r.ctrlpts[0]=$[0]+D.x*w,r.ctrlpts[1]=$[1]+D.y*w)}_&&this.findEndpoints(t)}},vi.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var r=0;r+1<e.ctrlpts.length;r+=2)e.allpts.push(e.ctrlpts[r],e.ctrlpts[r+1]),r+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[r]+e.ctrlpts[r+2])/2,(e.ctrlpts[r+1]+e.ctrlpts[r+3])/2);var n;e.allpts.push(e.endX,e.endY),e.ctrlpts.length/2%2==0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,e.midX=Vn(e.allpts[n],e.allpts[n+2],e.allpts[n+4],.5),e.midY=Vn(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],.5))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var i=2;i+3<e.allpts.length;i+=2){var a=e.radii[i/2-1],s=e.isArcRadius[i/2-1];e.roundCorners.push(uk({x:e.allpts[i-2],y:e.allpts[i-1]},{x:e.allpts[i],y:e.allpts[i+1],radius:a},{x:e.allpts[i+2],y:e.allpts[i+3]},a,s))}}if(e.segpts.length%4==0){var o=e.segpts.length/2,u=o-2;e.midX=(e.segpts[u]+e.segpts[o])/2,e.midY=(e.segpts[u+1]+e.segpts[o+1])/2}else{var h=e.segpts.length/2-1;if(e.isRound){var d={x:e.segpts[h],y:e.segpts[h+1]},p=e.roundCorners[h/2],f=[d.x-p.cx,d.y-p.cy],g=p.radius/Math.sqrt(Math.pow(f[0],2)+Math.pow(f[1],2));f=f.map((function(m){return m*g})),e.midX=p.cx+f[0],e.midY=p.cy+f[1],e.midVector=f}else e.midX=e.segpts[h],e.midY=e.segpts[h+1]}}},vi.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||ct(e.startX)&&ct(e.startY)&&ct(e.endX)&&ct(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,kr("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},vi.findEdgeControlPoints=function(t){var e=this;if(t&&t.length!==0){for(var r=this,n=r.cy.hasCompoundNodes(),i={map:new Qs,get:l((function(w){var T=this.map.get(w[0]);return T!=null?T.get(w[1]):null}),"get"),set:l((function(w,T){var k=this.map.get(w[0]);k==null&&(k=new Qs,this.map.set(w[0],k)),k.set(w[1],T)}),"set")},a=[],s=[],o=0;o<t.length;o++){var u=t[o],h=u._private,d=u.pstyle("curve-style").value;if(!u.removed()&&u.takesUpSpace())if(d!=="haystack"){var p=d==="unbundled-bezier"||d.endsWith("segments")||d==="straight"||d==="straight-triangle"||d.endsWith("taxi"),f=d==="unbundled-bezier"||d==="bezier",g=h.source,m=h.target,y=[g.poolIndex(),m.poolIndex()].sort(),v=i.get(y);v==null&&(v={eles:[]},i.set(y,v),a.push(y)),v.eles.push(u),p&&(v.hasUnbundled=!0),f&&(v.hasBezier=!0)}else s.push(u)}for(var x=l((function(w){var T=a[w],k=i.get(T),C=void 0;if(!k.hasUnbundled){var E=k.eles[0].parallelEdges().filter((function(Ge){return Ge.isBundledBezier()}));dS(k.eles),E.forEach((function(Ge){return k.eles.push(Ge)})),k.eles.sort((function(Ge,$e){return Ge.poolIndex()-$e.poolIndex()}))}var _=k.eles[0],S=_.source(),N=_.target();if(S.poolIndex()>N.poolIndex()){var O=S;S=N,N=O}var B=k.srcPos=S.position(),L=k.tgtPos=N.position(),I=k.srcW=S.outerWidth(),A=k.srcH=S.outerHeight(),M=k.tgtW=N.outerWidth(),D=k.tgtH=N.outerHeight(),R=k.srcShape=r.nodeShapes[e.getNodeShape(S)],P=k.tgtShape=r.nodeShapes[e.getNodeShape(N)],$=k.srcCornerRadius=S.pstyle("corner-radius").value==="auto"?"auto":S.pstyle("corner-radius").pfValue,z=k.tgtCornerRadius=N.pstyle("corner-radius").value==="auto"?"auto":N.pstyle("corner-radius").pfValue,q=k.tgtRs=N._private.rscratch,W=k.srcRs=S._private.rscratch;k.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var Q=0;Q<k.eles.length;Q++){var te=k.eles[Q],oe=te[0]._private.rscratch,re=te.pstyle("curve-style").value,H=re==="unbundled-bezier"||re.endsWith("segments")||re.endsWith("taxi"),K=!S.same(te.source());if(!k.calculatedIntersection&&S!==N&&(k.hasBezier||k.hasUnbundled)){k.calculatedIntersection=!0;var ie=R.intersectLine(B.x,B.y,I,A,L.x,L.y,0,$,W),ne=k.srcIntn=ie,J=P.intersectLine(L.x,L.y,M,D,B.x,B.y,0,z,q),ue=k.tgtIntn=J,Y=k.intersectionPts={x1:ie[0],x2:J[0],y1:ie[1],y2:J[1]},se=k.posPts={x1:B.x,x2:L.x,y1:B.y,y2:L.y},de=J[1]-ie[1],ce=J[0]-ie[0],Ee=Math.sqrt(ce*ce+de*de),ve=k.vector={x:ce,y:de},De=k.vectorNorm={x:ve.x/Ee,y:ve.y/Ee},Ue={x:-De.y,y:De.x};k.nodesOverlap=!ct(Ee)||P.checkPoint(ie[0],ie[1],0,M,D,L.x,L.y,z,q)||R.checkPoint(J[0],J[1],0,I,A,B.x,B.y,$,W),k.vectorNormInverse=Ue,C={nodesOverlap:k.nodesOverlap,dirCounts:k.dirCounts,calculatedIntersection:!0,hasBezier:k.hasBezier,hasUnbundled:k.hasUnbundled,eles:k.eles,srcPos:L,srcRs:q,tgtPos:B,tgtRs:W,srcW:M,srcH:D,tgtW:I,tgtH:A,srcIntn:ue,tgtIntn:ne,srcShape:P,tgtShape:R,posPts:{x1:se.x2,y1:se.y2,x2:se.x1,y2:se.y1},intersectionPts:{x1:Y.x2,y1:Y.y2,x2:Y.x1,y2:Y.y1},vector:{x:-ve.x,y:-ve.y},vectorNorm:{x:-De.x,y:-De.y},vectorNormInverse:{x:-Ue.x,y:-Ue.y}}}var ze=K?C:k;oe.nodesOverlap=ze.nodesOverlap,oe.srcIntn=ze.srcIntn,oe.tgtIntn=ze.tgtIntn,oe.isRound=re.startsWith("round"),n&&(S.isParent()||S.isChild()||N.isParent()||N.isChild())&&(S.parents().anySame(N)||N.parents().anySame(S)||S.same(N)&&S.isParent())?e.findCompoundLoopPoints(te,ze,Q,H):S===N?e.findLoopPoints(te,ze,Q,H):re.endsWith("segments")?e.findSegmentsPoints(te,ze):re.endsWith("taxi")?e.findTaxiPoints(te,ze):re==="straight"||!H&&k.eles.length%2==1&&Q===Math.floor(k.eles.length/2)?e.findStraightEdgePoints(te):e.findBezierPoints(te,ze,Q,H,K),e.findEndpoints(te),e.tryToCorrectInvalidPoints(te,ze),e.checkForInvalidEdgeWarning(te),e.storeAllpts(te),e.storeEdgeProjections(te),e.calculateArrowAngles(te),e.recalculateEdgeLabelProjections(te),e.calculateLabelAngles(te)}}),"_loop"),b=0;b<a.length;b++)x(b);this.findHaystackPoints(s)}},l(FT,"getPts"),vi.getSegmentPoints=function(t){var e=t[0]._private.rscratch;if(this.recalculateRenderedStyle(t),e.edgeType==="segments")return FT(e.segpts)},vi.getControlPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return FT(e.ctrlpts)},vi.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var TSe={manualEndptToPx:function(t,e){var r=t.position(),n=t.outerWidth(),i=t.outerHeight(),a=t._private.rscratch;if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*n),e.units[1]==="%"&&(s[1]=s[1]*i),s[0]+=r.x,s[1]+=r.y,s}var o=e.pfValue[0];o=-Math.PI/2+o;var u=2*Math.max(n,i),h=[r.x+Math.cos(o)*u,r.y+Math.sin(o)*u];return this.nodeShapes[this.getNodeShape(t)].intersectLine(r.x,r.y,n,i,h[0],h[1],0,t.pstyle("corner-radius").value==="auto"?"auto":t.pstyle("corner-radius").pfValue,a)},findEndpoints:function(t){var e,r,n,i,a,s=this,o=t.source()[0],u=t.target()[0],h=o.position(),d=u.position(),p=t.pstyle("target-arrow-shape").value,f=t.pstyle("source-arrow-shape").value,g=t.pstyle("target-distance-from-node").pfValue,m=t.pstyle("source-distance-from-node").pfValue,y=o._private.rscratch,v=u._private.rscratch,x=t.pstyle("curve-style").value,b=t._private.rscratch,w=b.edgeType,T=w==="self"||w==="compound",k=w==="bezier"||w==="multibezier"||T,C=w!=="bezier",E=w==="straight"||w==="segments",_=w==="segments",S=k||C||E,N=T||x==="taxi",O=t.pstyle("source-endpoint"),B=N?"outside-to-node":O.value,L=o.pstyle("corner-radius").value==="auto"?"auto":o.pstyle("corner-radius").pfValue,I=t.pstyle("target-endpoint"),A=N?"outside-to-node":I.value,M=u.pstyle("corner-radius").value==="auto"?"auto":u.pstyle("corner-radius").pfValue;if(b.srcManEndpt=O,b.tgtManEndpt=I,k){var D=[b.ctrlpts[0],b.ctrlpts[1]];r=C?[b.ctrlpts[b.ctrlpts.length-2],b.ctrlpts[b.ctrlpts.length-1]]:D,n=D}else if(E){var R=_?b.segpts.slice(0,2):[d.x,d.y];r=_?b.segpts.slice(b.segpts.length-2):[h.x,h.y],n=R}if(A==="inside-to-node")e=[d.x,d.y];else if(I.units)e=this.manualEndptToPx(u,I);else if(A==="outside-to-line")e=b.tgtIntn;else if(A==="outside-to-node"||A==="outside-to-node-or-label"?i=r:A!=="outside-to-line"&&A!=="outside-to-line-or-label"||(i=[h.x,h.y]),e=s.nodeShapes[this.getNodeShape(u)].intersectLine(d.x,d.y,u.outerWidth(),u.outerHeight(),i[0],i[1],0,M,v),A==="outside-to-node-or-label"||A==="outside-to-line-or-label"){var P=u._private.rscratch,$=P.labelWidth,z=P.labelHeight,q=P.labelX,W=P.labelY,Q=$/2,te=z/2,oe=u.pstyle("text-valign").value;oe==="top"?W-=te:oe==="bottom"&&(W+=te);var re=u.pstyle("text-halign").value;re==="left"?q-=Q:re==="right"&&(q+=Q);var H=t2(i[0],i[1],[q-Q,W-te,q+Q,W-te,q+Q,W+te,q-Q,W+te],d.x,d.y);if(H.length>0){var K=h,ie=Gc(K,Gd(e)),ne=Gc(K,Gd(H)),J=ie;ne<ie&&(e=H,J=ne),H.length>2&&Gc(K,{x:H[2],y:H[3]})<J&&(e=[H[2],H[3]])}}var ue=Hx(e,r,s.arrowShapes[p].spacing(t)+g),Y=Hx(e,r,s.arrowShapes[p].gap(t)+g);if(b.endX=Y[0],b.endY=Y[1],b.arrowEndX=ue[0],b.arrowEndY=ue[1],B==="inside-to-node")e=[h.x,h.y];else if(O.units)e=this.manualEndptToPx(o,O);else if(B==="outside-to-line")e=b.srcIntn;else if(B==="outside-to-node"||B==="outside-to-node-or-label"?a=n:B!=="outside-to-line"&&B!=="outside-to-line-or-label"||(a=[d.x,d.y]),e=s.nodeShapes[this.getNodeShape(o)].intersectLine(h.x,h.y,o.outerWidth(),o.outerHeight(),a[0],a[1],0,L,y),B==="outside-to-node-or-label"||B==="outside-to-line-or-label"){var se=o._private.rscratch,de=se.labelWidth,ce=se.labelHeight,Ee=se.labelX,ve=se.labelY,De=de/2,Ue=ce/2,ze=o.pstyle("text-valign").value;ze==="top"?ve-=Ue:ze==="bottom"&&(ve+=Ue);var Ge=o.pstyle("text-halign").value;Ge==="left"?Ee-=De:Ge==="right"&&(Ee+=De);var $e=t2(a[0],a[1],[Ee-De,ve-Ue,Ee+De,ve-Ue,Ee+De,ve+Ue,Ee-De,ve+Ue],h.x,h.y);if($e.length>0){var Pe=d,j=Gc(Pe,Gd(e)),pe=Gc(Pe,Gd($e)),X=j;pe<j&&(e=[$e[0],$e[1]],X=pe),$e.length>2&&Gc(Pe,{x:$e[2],y:$e[3]})<X&&(e=[$e[2],$e[3]])}}var ge=Hx(e,n,s.arrowShapes[f].spacing(t)+m),G=Hx(e,n,s.arrowShapes[f].gap(t)+m);b.startX=G[0],b.startY=G[1],b.arrowStartX=ge[0],b.arrowStartY=ge[1],S&&(ct(b.startX)&&ct(b.startY)&&ct(b.endX)&&ct(b.endY)?b.badLine=!1:b.badLine=!0)},getSourceEndpoint:function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),e.edgeType==="haystack"?{x:e.haystackPts[0],y:e.haystackPts[1]}:{x:e.arrowStartX,y:e.arrowStartY}},getTargetEndpoint:function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),e.edgeType==="haystack"?{x:e.haystackPts[2],y:e.haystackPts[3]}:{x:e.arrowEndX,y:e.arrowEndY}}},GS={};function QP(t,e,r){for(var n=l((function(o,u,h,d){return Vn(o,u,h,d)}),"qbezierAt$1"),i=e._private.rstyle.bezierPts,a=0;a<t.bezierProjPcts.length;a++){var s=t.bezierProjPcts[a];i.push({x:n(r[0],r[2],r[4],s),y:n(r[1],r[3],r[5],s)})}}l(QP,"pushBezierPts"),GS.storeEdgeProjections=function(t){var e=t._private,r=e.rscratch,n=r.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var i=0;i+5<r.allpts.length;i+=4)QP(this,t,r.allpts.slice(i,i+6))}else if(n==="segments"){var a=e.rstyle.linePts=[];for(i=0;i+1<r.allpts.length;i+=2)a.push({x:r.allpts[i],y:r.allpts[i+1]})}else if(n==="haystack"){var s=r.haystackPts;e.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth},GS.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var To={recalculateNodeLabelProjection:function(t){var e=t.pstyle("label").strValue;if(!oc(e)){var r,n,i=t._private,a=t.width(),s=t.height(),o=t.padding(),u=t.position(),h=t.pstyle("text-halign").strValue,d=t.pstyle("text-valign").strValue,p=i.rscratch,f=i.rstyle;switch(h){case"left":r=u.x-a/2-o;break;case"right":r=u.x+a/2+o;break;default:r=u.x}switch(d){case"top":n=u.y-s/2-o;break;case"bottom":n=u.y+s/2+o;break;default:n=u.y}p.labelX=r,p.labelY=n,f.labelX=r,f.labelY=n,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}}},noe=l((function(t,e){var r=Math.atan(e/t);return t===0&&r<0&&(r*=-1),r}),"lineAngleFromDelta"),ioe=l((function(t,e){var r=e.x-t.x,n=e.y-t.y;return noe(r,n)}),"lineAngle"),ESe=l((function(t,e,r,n){var i=nv(0,n-.001,1),a=nv(0,n+.001,1),s=rp(t,e,r,i),o=rp(t,e,r,a);return ioe(s,o)}),"bezierAngle");To.recalculateEdgeLabelProjections=function(t){var e,r=t._private,n=r.rscratch,i=this,a={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(a.mid||a.source||a.target){e={x:n.midX,y:n.midY};var s=l((function(d,p,f){ml(r.rscratch,d,p,f),ml(r.rstyle,d,p,f)}),"setRs");s("labelX",null,e.x),s("labelY",null,e.y);var o=noe(n.midDispX,n.midDispY);s("labelAutoAngle",null,o);var u=l((function d(){if(d.cache)return d.cache;for(var p=[],f=0;f+5<n.allpts.length;f+=4){var g={x:n.allpts[f],y:n.allpts[f+1]},m={x:n.allpts[f+2],y:n.allpts[f+3]},y={x:n.allpts[f+4],y:n.allpts[f+5]};p.push({p0:g,p1:m,p2:y,startDist:0,length:0,segments:[]})}var v=r.rstyle.bezierPts,x=i.bezierProjPcts.length;function b(E,_,S,N,O){var B=th(_,S),L=E.segments[E.segments.length-1],I={p0:_,p1:S,t0:N,t1:O,startDist:L?L.startDist+L.length:0,length:B};E.segments.push(I),E.length+=B}l(b,"addSegment");for(var w=0;w<p.length;w++){var T=p[w],k=p[w-1];k&&(T.startDist=k.startDist+k.length),b(T,T.p0,v[w*x],0,i.bezierProjPcts[0]);for(var C=0;C<x-1;C++)b(T,v[w*x+C],v[w*x+C+1],i.bezierProjPcts[C],i.bezierProjPcts[C+1]);b(T,v[w*x+x-1],T.p2,i.bezierProjPcts[x-1],1)}return d.cache=p}),"createControlPointInfo"),h=l((function(d){var p,f=d==="source";if(a[d]){var g=t.pstyle(d+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var m,y=u(),v=0,x=0,b=0;b<y.length;b++){for(var w=y[f?b:y.length-1-b],T=0;T<w.segments.length;T++){var k=w.segments[f?T:w.segments.length-1-T],C=b===y.length-1&&T===w.segments.length-1;if(v=x,(x+=k.length)>=g||C){m={cp:w,segment:k};break}}if(m)break}var E=m.cp,_=m.segment,S=(g-v)/_.length,N=_.t1-_.t0,O=f?_.t0+N*S:_.t1-N*S;O=nv(0,O,1),e=rp(E.p0,E.p1,E.p2,O),p=ESe(E.p0,E.p1,E.p2,O);break;case"straight":case"segments":case"haystack":for(var B,L,I,A,M=0,D=n.allpts.length,R=0;R+3<D&&(f?(I={x:n.allpts[R],y:n.allpts[R+1]},A={x:n.allpts[R+2],y:n.allpts[R+3]}):(I={x:n.allpts[D-2-R],y:n.allpts[D-1-R]},A={x:n.allpts[D-4-R],y:n.allpts[D-3-R]}),L=M,!((M+=B=th(I,A))>=g));R+=2);var P=(g-L)/B;P=nv(0,P,1),e=WTe(I,A,P),p=ioe(I,A)}s("labelX",d,e.x),s("labelY",d,e.y),s("labelAutoAngle",d,p)}}),"calculateEndProjection");h("source"),h("target"),this.applyLabelDimensions(t)}},To.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))},To.applyPrefixedLabelDimensions=function(t,e){var r=t._private,n=this.getLabelText(t,e),i=this.calculateLabelDimensions(t,n),a=t.pstyle("line-height").pfValue,s=t.pstyle("text-wrap").strValue,o=ps(r.rscratch,"labelWrapCachedLines",e)||[],u=s!=="wrap"?1:Math.max(o.length,1),h=i.height/u,d=h*a,p=i.width,f=i.height+(u-1)*(a-1)*h;ml(r.rstyle,"labelWidth",e,p),ml(r.rscratch,"labelWidth",e,p),ml(r.rstyle,"labelHeight",e,f),ml(r.rscratch,"labelHeight",e,f),ml(r.rscratch,"labelLineHeight",e,d)},To.getLabelText=function(t,e){var r=t._private,n=e?e+"-":"",i=t.pstyle(n+"label").strValue,a=t.pstyle("text-transform").value,s=l((function(I,A){return A?(ml(r.rscratch,I,e,A),A):ps(r.rscratch,I,e)}),"rscratch");if(!i)return"";a=="none"||(a=="uppercase"?i=i.toUpperCase():a=="lowercase"&&(i=i.toLowerCase()));var o=t.pstyle("text-wrap").value;if(o==="wrap"){var u=s("labelKey");if(u!=null&&s("labelWrapKey")===u)return s("labelWrapCachedText");for(var h=i.split(`
`),d=t.pstyle("text-max-width").pfValue,p=t.pstyle("text-overflow-wrap").value==="anywhere",f=[],g=/[\s\u200b]+|$/g,m=0;m<h.length;m++){var y=h[m],v=this.calculateLabelDimensions(t,y).width;if(p){var x=y.split("").join("");y=x}if(v>d){var b,w="",T=0,k=wa(y.matchAll(g));try{for(k.s();!(b=k.n()).done;){var C=b.value,E=C[0],_=y.substring(T,C.index);T=C.index+E.length;var S=w.length===0?_:w+_+E;this.calculateLabelDimensions(t,S).width<=d?w+=_+E:(w&&f.push(w),w=_+E)}}catch(I){k.e(I)}finally{k.f()}w.match(/^[\s\u200b]+$/)||f.push(w)}else f.push(y)}s("labelWrapCachedLines",f),i=s("labelWrapCachedText",f.join(`
`)),s("labelWrapKey",u)}else if(o==="ellipsis"){var N=t.pstyle("text-max-width").pfValue,O="",B=!1;if(this.calculateLabelDimensions(t,i).width<N)return i;for(var L=0;L<i.length&&!(this.calculateLabelDimensions(t,O+i[L]+"").width>N);L++)O+=i[L],L===i.length-1&&(B=!0);return B||(O+=""),O}return i},To.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if(e!=="auto")return e;if(!t.isNode())return"center";switch(r){case"left":return"right";case"right":return"left";default:return"center"}},To.calculateLabelDimensions=function(t,e){var r=this,n=r.cy.window().document,i=lc(e,t._private.labelDimsKey),a=r.labelDimCache||(r.labelDimCache=[]),s=a[i];if(s!=null)return s;var o=t.pstyle("font-style").strValue,u=t.pstyle("font-size").pfValue,h=t.pstyle("font-family").strValue,d=t.pstyle("font-weight").strValue,p=this.labelCalcCanvas,f=this.labelCalcCanvasContext;if(!p){p=this.labelCalcCanvas=n.createElement("canvas"),f=this.labelCalcCanvasContext=p.getContext("2d");var g=p.style;g.position="absolute",g.left="-9999px",g.top="-9999px",g.zIndex="-1",g.visibility="hidden",g.pointerEvents="none"}f.font="".concat(o," ").concat(d," ").concat(u,"px ").concat(h);for(var m=0,y=0,v=e.split(`
`),x=0;x<v.length;x++){var b=v[x],w=f.measureText(b),T=Math.ceil(w.width),k=u;m=Math.max(T,m),y+=k}return m+=0,y+=0,a[i]={width:m,height:y}},To.calculateLabelAngle=function(t,e){var r=t._private.rscratch,n=t.isEdge(),i=e?e+"-":"",a=t.pstyle(i+"text-rotation"),s=a.strValue;return s==="none"?0:n&&s==="autorotate"?r.labelAutoAngle:s==="autorotate"?0:a.pfValue},To.calculateLabelAngles=function(t){var e=this,r=t.isEdge(),n=t._private.rscratch;n.labelAngle=e.calculateLabelAngle(t),r&&(n.sourceLabelAngle=e.calculateLabelAngle(t,"source"),n.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var aoe={},JP=!1;aoe.getNodeShape=function(t){var e=t.pstyle("shape").value;if(e==="cutrectangle"&&(t.width()<28||t.height()<28))return JP||(kr("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),JP=!0),"rectangle";if(t.isParent())return e==="rectangle"||e==="roundrectangle"||e==="round-rectangle"||e==="cutrectangle"||e==="cut-rectangle"||e==="barrel"?e:"rectangle";if(e==="polygon"){var r=t.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(r).name}return e};var _Se={registerCalculationListeners:function(){var t=this.cy,e=t.collection(),r=this,n=l((function(a){var s=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(e.merge(a),s)for(var o=0;o<a.length;o++){var u=a[o],h=u._private,d=h.rstyle;d.clean=!1,d.cleanConnected=!1}}),"enqueue");r.binder(t).on("bounds.* dirty.*",l((function(a){var s=a.target;n(s)}),"onDirtyBounds")).on("style.* background.*",l((function(a){var s=a.target;n(s,!1)}),"onDirtyStyle"));var i=l((function(a){if(a){var s=r.onUpdateEleCalcsFns;e.cleanStyle();for(var o=0;o<e.length;o++){var u=e[o],h=u._private.rstyle;u.isNode()&&!h.cleanConnected&&(n(u.connectedEdges()),h.cleanConnected=!0)}if(s)for(var d=0;d<s.length;d++)(0,s[d])(a,e);r.recalculateRenderedStyle(e),e=t.collection()}}),"updateEleCalcs");r.flushRenderedStyleQueue=function(){i(!0)},r.beforeRender(i,r.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(t){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(t)},recalculateRenderedStyle:function(t,e){var r=l((function(x){return x._private.rstyle.cleanConnected}),"isCleanConnected"),n=[],i=[];if(!this.destroyed){e===void 0&&(e=!0);for(var a=0;a<t.length;a++){var s=t[a],o=s._private,u=o.rstyle;!s.isEdge()||r(s.source())&&r(s.target())||(u.clean=!1),e&&u.clean||s.removed()||s.pstyle("display").value!=="none"&&(o.group==="nodes"?i.push(s):n.push(s),u.clean=!0)}for(var h=0;h<i.length;h++){var d=i[h],p=d._private.rstyle,f=d.position();this.recalculateNodeLabelProjection(d),p.nodeX=f.x,p.nodeY=f.y,p.nodeW=d.pstyle("width").pfValue,p.nodeH=d.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var g=0;g<n.length;g++){var m=n[g]._private,y=m.rstyle,v=m.rscratch;y.srcX=v.arrowStartX,y.srcY=v.arrowStartY,y.tgtX=v.arrowEndX,y.tgtY=v.arrowEndY,y.midX=v.midX,y.midY=v.midY,y.labelAngle=v.labelAngle,y.sourceLabelAngle=v.sourceLabelAngle,y.targetLabelAngle=v.targetLabelAngle}}}},CSe={updateCachedGrabbedEles:function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],r=0;r<t.length;r++){var n=(i=t[r])._private.rscratch;i.grabbed()&&!i.isParent()?e.push(i):n.inDragLayer?t.drag.push(i):t.nondrag.push(i)}for(r=0;r<e.length;r++){var i=e[r];t.drag.push(i)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(Xse),e.interactive=e.filter((function(r){return r.interactive()})),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e}},soe={};[bSe,f4,vi,TSe,GS,To,aoe,_Se,CSe].forEach((function(t){Gt(soe,t)}));var SSe={getCachedImage:function(t,e,r){var n=this.imageCache=this.imageCache||{},i=n[t];if(i)return i.image.complete||i.image.addEventListener("load",r),i.image;var a=(i=n[t]=n[t]||{}).image=new Image;a.addEventListener("load",r),a.addEventListener("error",(function(){a.error=!0}));var s="data:";return t.substring(0,s.length).toLowerCase()===s||(e=e==="null"?null:e,a.crossOrigin=e),a.src=t,a}},ASe={registerBinding:function(t,e,r,n){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(t)){for(var a=[],s=0;s<t.length;s++){var o=t[s];if(o!==void 0){var u=this.binder(o);a.push(u.on.apply(u,i))}}return a}return(u=this.binder(t)).on.apply(u,i)},binder:function(t){var e=this,r=e.cy.window(),n=t===r||t===r.document||t===r.document.body||zke(t);if(e.supportsPassiveEvents==null){var i=!1;try{var a=Object.defineProperty({},"passive",{get:l((function(){return i=!0,!0}),"get")});r.addEventListener("test",null,a)}catch{}e.supportsPassiveEvents=i}var s=l((function(o,u,h){var d=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(d[2]={capture:h!=null&&h,passive:!1,once:!1}),e.bindings.push({target:t,args:d}),(t.addEventListener||t.on).apply(t,d),this}),"on");return{on:s,addEventListener:s,addListener:s,bind:s}},nodeIsDraggable:function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()},nodeIsGrabbable:function(t){return this.nodeIsDraggable(t)&&t.interactive()},load:function(){var t=this,e=t.cy.window(),r=l((function(j){return j.selected()}),"isSelected"),n=l((function(j){var pe=j.getRootNode();if(pe&&pe.nodeType===11&&pe.host!==void 0)return pe}),"getShadowRoot"),i=l((function(j,pe,X,ge){j==null&&(j=t.cy);for(var G=0;G<pe.length;G++){var le=pe[G];j.emit({originalEvent:X,type:le,position:ge})}}),"triggerEvents"),a=l((function(j){return j.shiftKey||j.metaKey||j.ctrlKey}),"isMultSelKeyDown"),s=l((function(j,pe){var X=!0;if(t.cy.hasCompoundNodes()&&j&&j.pannable()){for(var ge=0;pe&&ge<pe.length;ge++)if((j=pe[ge]).isNode()&&j.isParent()&&!j.pannable()){X=!1;break}}else X=!0;return X}),"allowPanningPassthrough"),o=l((function(j){j[0]._private.grabbed=!0}),"setGrabbed"),u=l((function(j){j[0]._private.grabbed=!1}),"setFreed"),h=l((function(j){j[0]._private.rscratch.inDragLayer=!0}),"setInDragLayer"),d=l((function(j){j[0]._private.rscratch.inDragLayer=!1}),"setOutDragLayer"),p=l((function(j){j[0]._private.rscratch.isGrabTarget=!0}),"setGrabTarget"),f=l((function(j){j[0]._private.rscratch.isGrabTarget=!1}),"removeGrabTarget"),g=l((function(j,pe){var X=pe.addToList;X.has(j)||!j.grabbable()||j.locked()||(X.merge(j),o(j))}),"addToDragList"),m=l((function(j,pe){if(j.cy().hasCompoundNodes()&&(pe.inDragLayer!=null||pe.addToList!=null)){var X=j.descendants();pe.inDragLayer&&(X.forEach(h),X.connectedEdges().forEach(h)),pe.addToList&&g(X,pe)}}),"addDescendantsToDrag"),y=l((function(j,pe){pe=pe||{};var X=j.cy().hasCompoundNodes();pe.inDragLayer&&(j.forEach(h),j.neighborhood().stdFilter((function(ge){return!X||ge.isEdge()})).forEach(h)),pe.addToList&&j.forEach((function(ge){g(ge,pe)})),m(j,pe),b(j,{inDragLayer:pe.inDragLayer}),t.updateCachedGrabbedEles()}),"addNodesToDrag"),v=y,x=l((function(j){j&&(t.getCachedZSortedEles().forEach((function(pe){u(pe),d(pe),f(pe)})),t.updateCachedGrabbedEles())}),"freeDraggedElements"),b=l((function(j,pe){if((pe.inDragLayer!=null||pe.addToList!=null)&&j.cy().hasCompoundNodes()){var X=j.ancestors().orphans();if(!X.same(j)){var ge=X.descendants().spawnSelf().merge(X).unmerge(j).unmerge(j.descendants()),G=ge.connectedEdges();pe.inDragLayer&&(G.forEach(h),ge.forEach(h)),pe.addToList&&ge.forEach((function(le){g(le,pe)}))}}}),"updateAncestorsInDragLayer"),w=l((function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()}),"blurActiveDomElement"),T=typeof MutationObserver<"u",k=typeof ResizeObserver<"u";T?(t.removeObserver=new MutationObserver((function(j){for(var pe=0;pe<j.length;pe++){var X=j[pe].removedNodes;if(X){for(var ge=0;ge<X.length;ge++)if(X[ge]===t.container){t.destroy();break}}}})),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",(function(j){t.destroy()}));var C=tx((function(){t.cy.resize()}),100);T&&(t.styleObserver=new MutationObserver(C),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(e,"resize",C),k&&(t.resizeObserver=new ResizeObserver(C),t.resizeObserver.observe(t.container));var E=l((function(j,pe){for(;j!=null;)pe(j),j=j.parentNode}),"forEachUp"),_=l((function(){t.invalidateContainerClientCoordsCache()}),"invalidateCoords");E(t.container,(function(j){t.registerBinding(j,"transitionend",_),t.registerBinding(j,"animationend",_),t.registerBinding(j,"scroll",_)})),t.registerBinding(t.container,"contextmenu",(function(j){j.preventDefault()}));var S=l((function(){return t.selection[4]!==0}),"inBoxSelection"),N=l((function(j){for(var pe=t.findContainerClientCoords(),X=pe[0],ge=pe[1],G=pe[2],le=pe[3],V=j.touches?j.touches:[j],me=!1,he=0;he<V.length;he++){var _e=V[he];if(X<=_e.clientX&&_e.clientX<=X+G&&ge<=_e.clientY&&_e.clientY<=ge+le){me=!0;break}}if(!me)return!1;for(var Ce=t.container,Te=j.target.parentNode,Re=!1;Te;){if(Te===Ce){Re=!0;break}Te=Te.parentNode}return!!Re}),"eventInContainer");t.registerBinding(t.container,"mousedown",l((function(j){if(N(j)&&(t.hoverData.which!==1||j.which===1)){j.preventDefault(),w(),t.hoverData.capture=!0,t.hoverData.which=j.which;var pe=t.cy,X=[j.clientX,j.clientY],ge=t.projectIntoViewport(X[0],X[1]),G=t.selection,le=t.findNearestElements(ge[0],ge[1],!0,!1),V=le[0],me=t.dragData.possibleDragElements;t.hoverData.mdownPos=ge,t.hoverData.mdownGPos=X;var he=l((function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout((function(){if(!t.hoverData.tapholdCancelled){var Le=t.hoverData.down;Le?Le.emit({originalEvent:j,type:"taphold",position:{x:ge[0],y:ge[1]}}):pe.emit({originalEvent:j,type:"taphold",position:{x:ge[0],y:ge[1]}})}}),t.tapholdDuration)}),"checkForTaphold");if(j.which==3){t.hoverData.cxtStarted=!0;var _e={originalEvent:j,type:"cxttapstart",position:{x:ge[0],y:ge[1]}};V?(V.activate(),V.emit(_e),t.hoverData.down=V):pe.emit(_e),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(j.which==1){if(V&&V.activate(),V!=null&&t.nodeIsGrabbable(V)){var Ce=l((function(Le){return{originalEvent:j,type:Le,position:{x:ge[0],y:ge[1]}}}),"makeEvent"),Te=l((function(Le){Le.emit(Ce("grab"))}),"triggerGrab");if(p(V),V.selected()){me=t.dragData.possibleDragElements=pe.collection();var Re=pe.$((function(Le){return Le.isNode()&&Le.selected()&&t.nodeIsGrabbable(Le)}));y(Re,{addToList:me}),V.emit(Ce("grabon")),Re.forEach(Te)}else me=t.dragData.possibleDragElements=pe.collection(),v(V,{addToList:me}),V.emit(Ce("grabon")).emit(Ce("grab"));t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=V,t.hoverData.downs=le,t.hoverData.downTime=new Date().getTime(),i(V,["mousedown","tapstart","vmousedown"],j,{x:ge[0],y:ge[1]}),V==null?(G[4]=1,t.data.bgActivePosistion={x:ge[0],y:ge[1]},t.redrawHint("select",!0),t.redraw()):V.pannable()&&(G[4]=1),he()}G[0]=G[2]=ge[0],G[1]=G[3]=ge[1]}}),"mousedownHandler"),!1);var O,B,L,I=n(t.container);t.registerBinding([e,I],"mousemove",l((function(j){if(t.hoverData.capture||N(j)){var pe=!1,X=t.cy,ge=X.zoom(),G=[j.clientX,j.clientY],le=t.projectIntoViewport(G[0],G[1]),V=t.hoverData.mdownPos,me=t.hoverData.mdownGPos,he=t.selection,_e=null;t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.selecting||(_e=t.findNearestElement(le[0],le[1],!0,!1));var Ce,Te=t.hoverData.last,Re=t.hoverData.down,Le=[le[0]-he[2],le[1]-he[3]],ot=t.dragData.possibleDragElements;if(me){var Tt=G[0]-me[0],Fe=Tt*Tt,gt=G[1]-me[1],Qe=Fe+gt*gt;t.hoverData.isOverThresholdDrag=Ce=Qe>=t.desktopTapThreshold2}var Be=a(j);Ce&&(t.hoverData.tapholdCancelled=!0);var rt=l((function(){var mt=t.hoverData.dragDelta=t.hoverData.dragDelta||[];mt.length===0?(mt.push(Le[0]),mt.push(Le[1])):(mt[0]+=Le[0],mt[1]+=Le[1])}),"updateDragDelta");pe=!0,i(_e,["mousemove","vmousemove","tapdrag"],j,{x:le[0],y:le[1]});var lt=l((function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||X.emit({originalEvent:j,type:"boxstart",position:{x:le[0],y:le[1]}}),he[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()}),"goIntoBoxMode");if(t.hoverData.which===3){if(Ce){var Je={originalEvent:j,type:"cxtdrag",position:{x:le[0],y:le[1]}};Re?Re.emit(Je):X.emit(Je),t.hoverData.cxtDragged=!0,t.hoverData.cxtOver&&_e===t.hoverData.cxtOver||(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:j,type:"cxtdragout",position:{x:le[0],y:le[1]}}),t.hoverData.cxtOver=_e,_e&&_e.emit({originalEvent:j,type:"cxtdragover",position:{x:le[0],y:le[1]}}))}}else if(t.hoverData.dragging){if(pe=!0,X.panningEnabled()&&X.userPanningEnabled()){var _t;if(t.hoverData.justStartedPan){var it=t.hoverData.mdownPos;_t={x:(le[0]-it[0])*ge,y:(le[1]-it[1])*ge},t.hoverData.justStartedPan=!1}else _t={x:Le[0]*ge,y:Le[1]*ge};X.panBy(_t),X.emit("dragpan"),t.hoverData.dragged=!0}le=t.projectIntoViewport(j.clientX,j.clientY)}else if(he[4]!=1||Re!=null&&!Re.pannable()){if(Re&&Re.pannable()&&Re.active()&&Re.unactivate(),Re&&Re.grabbed()||_e==Te||(Te&&i(Te,["mouseout","tapdragout"],j,{x:le[0],y:le[1]}),_e&&i(_e,["mouseover","tapdragover"],j,{x:le[0],y:le[1]}),t.hoverData.last=_e),Re)if(Ce){if(X.boxSelectionEnabled()&&Be)Re&&Re.grabbed()&&(x(ot),Re.emit("freeon"),ot.emit("free"),t.dragData.didDrag&&(Re.emit("dragfreeon"),ot.emit("dragfree"))),lt();else if(Re&&Re.grabbed()&&t.nodeIsDraggable(Re)){var pt=!t.dragData.didDrag;pt&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||y(ot,{inDragLayer:!0});var Ye={x:0,y:0};if(ct(Le[0])&&ct(Le[1])&&(Ye.x+=Le[0],Ye.y+=Le[1],pt)){var je=t.hoverData.dragDelta;je&&ct(je[0])&&ct(je[1])&&(Ye.x+=je[0],Ye.y+=je[1])}t.hoverData.draggingEles=!0,ot.silentShift(Ye).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else rt();pe=!0}else Ce&&(t.hoverData.dragging||!X.boxSelectionEnabled()||!Be&&X.panningEnabled()&&X.userPanningEnabled()?!t.hoverData.selecting&&X.panningEnabled()&&X.userPanningEnabled()&&s(Re,t.hoverData.downs)&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,he[4]=0,t.data.bgActivePosistion=Gd(V),t.redrawHint("select",!0),t.redraw()):lt(),Re&&Re.pannable()&&Re.active()&&Re.unactivate());return he[2]=le[0],he[3]=le[1],pe?(j.stopPropagation&&j.stopPropagation(),j.preventDefault&&j.preventDefault(),!1):void 0}}),"mousemoveHandler"),!1),t.registerBinding(e,"mouseup",l((function(j){if((t.hoverData.which!==1||j.which===1||!t.hoverData.capture)&&t.hoverData.capture){t.hoverData.capture=!1;var pe=t.cy,X=t.projectIntoViewport(j.clientX,j.clientY),ge=t.selection,G=t.findNearestElement(X[0],X[1],!0,!1),le=t.dragData.possibleDragElements,V=t.hoverData.down,me=a(j);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,V&&V.unactivate(),t.hoverData.which===3){var he={originalEvent:j,type:"cxttapend",position:{x:X[0],y:X[1]}};if(V?V.emit(he):pe.emit(he),!t.hoverData.cxtDragged){var _e={originalEvent:j,type:"cxttap",position:{x:X[0],y:X[1]}};V?V.emit(_e):pe.emit(_e)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(i(G,["mouseup","tapend","vmouseup"],j,{x:X[0],y:X[1]}),t.dragData.didDrag||t.hoverData.dragged||t.hoverData.selecting||t.hoverData.isOverThresholdDrag||(i(V,["click","tap","vclick"],j,{x:X[0],y:X[1]}),B=!1,j.timeStamp-L<=pe.multiClickDebounceTime()?(O&&clearTimeout(O),B=!0,L=null,i(V,["dblclick","dbltap","vdblclick"],j,{x:X[0],y:X[1]})):(O=setTimeout((function(){B||i(V,["oneclick","onetap","voneclick"],j,{x:X[0],y:X[1]})}),pe.multiClickDebounceTime()),L=j.timeStamp)),V!=null||t.dragData.didDrag||t.hoverData.selecting||t.hoverData.dragged||a(j)||(pe.$(r).unselect(["tapunselect"]),le.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=le=pe.collection()),G!=V||t.dragData.didDrag||t.hoverData.selecting||G!=null&&G._private.selectable&&(t.hoverData.dragging||(pe.selectionType()==="additive"||me?G.selected()?G.unselect(["tapunselect"]):G.select(["tapselect"]):me||(pe.$(r).unmerge(G).unselect(["tapunselect"]),G.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var Ce=pe.collection(t.getAllInBox(ge[0],ge[1],ge[2],ge[3]));t.redrawHint("select",!0),Ce.length>0&&t.redrawHint("eles",!0),pe.emit({type:"boxend",originalEvent:j,position:{x:X[0],y:X[1]}});var Te=l((function(Le){return Le.selectable()&&!Le.selected()}),"eleWouldBeSelected");pe.selectionType()==="additive"||me||pe.$(r).unmerge(Ce).unselect(),Ce.emit("box").stdFilter(Te).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!ge[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var Re=V&&V.grabbed();x(le),Re&&(V.emit("freeon"),le.emit("free"),t.dragData.didDrag&&(V.emit("dragfreeon"),le.emit("dragfree")))}}ge[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null,t.hoverData.which=null}}),"mouseupHandler"),!1);var A,M,D,R,P,$,z,q,W,Q,te,oe,re,H=l((function(j){if(!t.scrollingPage){var pe=t.cy,X=pe.zoom(),ge=pe.pan(),G=t.projectIntoViewport(j.clientX,j.clientY),le=[G[0]*X+ge.x,G[1]*X+ge.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||S())j.preventDefault();else if(pe.panningEnabled()&&pe.userPanningEnabled()&&pe.zoomingEnabled()&&pe.userZoomingEnabled()){var V;j.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout((function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()}),150),V=j.deltaY!=null?j.deltaY/-250:j.wheelDeltaY!=null?j.wheelDeltaY/1e3:j.wheelDelta/1e3,V*=t.wheelSensitivity,j.deltaMode===1&&(V*=33);var me=pe.zoom()*Math.pow(10,V);j.type==="gesturechange"&&(me=t.gestureStartZoom*j.scale),pe.zoom({level:me,renderedPosition:{x:le[0],y:le[1]}}),pe.emit(j.type==="gesturechange"?"pinchzoom":"scrollzoom")}}}),"wheelHandler");t.registerBinding(t.container,"wheel",H,!0),t.registerBinding(e,"scroll",l((function(j){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout((function(){t.scrollingPage=!1}),250)}),"scrollHandler"),!0),t.registerBinding(t.container,"gesturestart",l((function(j){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||j.preventDefault()}),"gestureStartHandler"),!0),t.registerBinding(t.container,"gesturechange",(function(j){t.hasTouchStarted||H(j)}),!0),t.registerBinding(t.container,"mouseout",l((function(j){var pe=t.projectIntoViewport(j.clientX,j.clientY);t.cy.emit({originalEvent:j,type:"mouseout",position:{x:pe[0],y:pe[1]}})}),"mouseOutHandler"),!1),t.registerBinding(t.container,"mouseover",l((function(j){var pe=t.projectIntoViewport(j.clientX,j.clientY);t.cy.emit({originalEvent:j,type:"mouseover",position:{x:pe[0],y:pe[1]}})}),"mouseOverHandler"),!1);var K,ie,ne,J,ue,Y,se,de=l((function(j,pe,X,ge){return Math.sqrt((X-j)*(X-j)+(ge-pe)*(ge-pe))}),"distance"),ce=l((function(j,pe,X,ge){return(X-j)*(X-j)+(ge-pe)*(ge-pe)}),"distanceSq");if(t.registerBinding(t.container,"touchstart",K=l((function(j){if(t.hasTouchStarted=!0,N(j)){w(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var pe=t.cy,X=t.touchData.now,ge=t.touchData.earlier;if(j.touches[0]){var G=t.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY);X[0]=G[0],X[1]=G[1]}if(j.touches[1]&&(G=t.projectIntoViewport(j.touches[1].clientX,j.touches[1].clientY),X[2]=G[0],X[3]=G[1]),j.touches[2]&&(G=t.projectIntoViewport(j.touches[2].clientX,j.touches[2].clientY),X[4]=G[0],X[5]=G[1]),j.touches[1]){t.touchData.singleTouchMoved=!0,x(t.dragData.touchDragEles);var le=t.findContainerClientCoords();W=le[0],Q=le[1],te=le[2],oe=le[3],A=j.touches[0].clientX-W,M=j.touches[0].clientY-Q,D=j.touches[1].clientX-W,R=j.touches[1].clientY-Q,re=0<=A&&A<=te&&0<=D&&D<=te&&0<=M&&M<=oe&&0<=R&&R<=oe;var V=pe.pan(),me=pe.zoom();if(P=de(A,M,D,R),$=ce(A,M,D,R),q=[((z=[(A+D)/2,(M+R)/2])[0]-V.x)/me,(z[1]-V.y)/me],$<4e4&&!j.touches[2]){var he=t.findNearestElement(X[0],X[1],!0,!0),_e=t.findNearestElement(X[2],X[3],!0,!0);return he&&he.isNode()?(he.activate().emit({originalEvent:j,type:"cxttapstart",position:{x:X[0],y:X[1]}}),t.touchData.start=he):_e&&_e.isNode()?(_e.activate().emit({originalEvent:j,type:"cxttapstart",position:{x:X[0],y:X[1]}}),t.touchData.start=_e):pe.emit({originalEvent:j,type:"cxttapstart",position:{x:X[0],y:X[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,void t.redraw()}}if(j.touches[2])pe.boxSelectionEnabled()&&j.preventDefault();else if(!j.touches[1]){if(j.touches[0]){var Ce=t.findNearestElements(X[0],X[1],!0,!0),Te=Ce[0];if(Te!=null&&(Te.activate(),t.touchData.start=Te,t.touchData.starts=Ce,t.nodeIsGrabbable(Te))){var Re=t.dragData.touchDragEles=pe.collection(),Le=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),Te.selected()?(Le=pe.$((function(Qe){return Qe.selected()&&t.nodeIsGrabbable(Qe)})),y(Le,{addToList:Re})):v(Te,{addToList:Re}),p(Te);var ot=l((function(Qe){return{originalEvent:j,type:Qe,position:{x:X[0],y:X[1]}}}),"makeEvent");Te.emit(ot("grabon")),Le?Le.forEach((function(Qe){Qe.emit(ot("grab"))})):Te.emit(ot("grab"))}i(Te,["touchstart","tapstart","vmousedown"],j,{x:X[0],y:X[1]}),Te==null&&(t.data.bgActivePosistion={x:G[0],y:G[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout((function(){t.touchData.singleTouchMoved!==!1||t.pinching||t.touchData.selecting||i(t.touchData.start,["taphold"],j,{x:X[0],y:X[1]})}),t.tapholdDuration)}}if(j.touches.length>=1){for(var Tt=t.touchData.startPosition=[null,null,null,null,null,null],Fe=0;Fe<X.length;Fe++)Tt[Fe]=ge[Fe]=X[Fe];var gt=j.touches[0];t.touchData.startGPosition=[gt.clientX,gt.clientY]}}}),"touchstartHandler"),!1),t.registerBinding(e,"touchmove",ie=l((function(j){var pe=t.touchData.capture;if(pe||N(j)){var X=t.selection,ge=t.cy,G=t.touchData.now,le=t.touchData.earlier,V=ge.zoom();if(j.touches[0]){var me=t.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY);G[0]=me[0],G[1]=me[1]}j.touches[1]&&(me=t.projectIntoViewport(j.touches[1].clientX,j.touches[1].clientY),G[2]=me[0],G[3]=me[1]),j.touches[2]&&(me=t.projectIntoViewport(j.touches[2].clientX,j.touches[2].clientY),G[4]=me[0],G[5]=me[1]);var he,_e=t.touchData.startGPosition;if(pe&&j.touches[0]&&_e){for(var Ce=[],Te=0;Te<G.length;Te++)Ce[Te]=G[Te]-le[Te];var Re=j.touches[0].clientX-_e[0],Le=Re*Re,ot=j.touches[0].clientY-_e[1];he=Le+ot*ot>=t.touchTapThreshold2}if(pe&&t.touchData.cxt){j.preventDefault();var Tt=j.touches[0].clientX-W,Fe=j.touches[0].clientY-Q,gt=j.touches[1].clientX-W,Qe=j.touches[1].clientY-Q,Be=ce(Tt,Fe,gt,Qe);if(Be/$>=2.25||Be>=22500){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var rt={originalEvent:j,type:"cxttapend",position:{x:G[0],y:G[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(rt),t.touchData.start=null):ge.emit(rt)}}if(pe&&t.touchData.cxt){rt={originalEvent:j,type:"cxtdrag",position:{x:G[0],y:G[1]}},t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(rt):ge.emit(rt),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var lt=t.findNearestElement(G[0],G[1],!0,!0);t.touchData.cxtOver&&lt===t.touchData.cxtOver||(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:j,type:"cxtdragout",position:{x:G[0],y:G[1]}}),t.touchData.cxtOver=lt,lt&&lt.emit({originalEvent:j,type:"cxtdragover",position:{x:G[0],y:G[1]}}))}else if(pe&&j.touches[2]&&ge.boxSelectionEnabled())j.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||ge.emit({originalEvent:j,type:"boxstart",position:{x:G[0],y:G[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,X[4]=1,X&&X.length!==0&&X[0]!==void 0?(X[2]=(G[0]+G[2]+G[4])/3,X[3]=(G[1]+G[3]+G[5])/3):(X[0]=(G[0]+G[2]+G[4])/3,X[1]=(G[1]+G[3]+G[5])/3,X[2]=(G[0]+G[2]+G[4])/3+1,X[3]=(G[1]+G[3]+G[5])/3+1),t.redrawHint("select",!0),t.redraw();else if(pe&&j.touches[1]&&!t.touchData.didSelect&&ge.zoomingEnabled()&&ge.panningEnabled()&&ge.userZoomingEnabled()&&ge.userPanningEnabled()){if(j.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),gr=t.dragData.touchDragEles){t.redrawHint("drag",!0);for(var Je=0;Je<gr.length;Je++){var _t=gr[Je]._private;_t.grabbed=!1,_t.rscratch.inDragLayer=!1}}var it=t.touchData.start,pt=(Tt=j.touches[0].clientX-W,Fe=j.touches[0].clientY-Q,gt=j.touches[1].clientX-W,Qe=j.touches[1].clientY-Q,de(Tt,Fe,gt,Qe)),Ye=pt/P;if(re){var je=(Tt-A+(gt-D))/2,mt=(Fe-M+(Qe-R))/2,at=ge.zoom(),Et=at*Ye,xt=ge.pan(),rn=q[0]*at+xt.x,wt=q[1]*at+xt.y,dn={x:-Et/at*(rn-xt.x-je)+rn,y:-Et/at*(wt-xt.y-mt)+wt};if(it&&it.active()){var gr=t.dragData.touchDragEles;x(gr),t.redrawHint("drag",!0),t.redrawHint("eles",!0),it.unactivate().emit("freeon"),gr.emit("free"),t.dragData.didDrag&&(it.emit("dragfreeon"),gr.emit("dragfree"))}ge.viewport({zoom:Et,pan:dn,cancelOnFailedZoom:!0}),ge.emit("pinchzoom"),P=pt,A=Tt,M=Fe,D=gt,R=Qe,t.pinching=!0}j.touches[0]&&(me=t.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY),G[0]=me[0],G[1]=me[1]),j.touches[1]&&(me=t.projectIntoViewport(j.touches[1].clientX,j.touches[1].clientY),G[2]=me[0],G[3]=me[1]),j.touches[2]&&(me=t.projectIntoViewport(j.touches[2].clientX,j.touches[2].clientY),G[4]=me[0],G[5]=me[1])}else if(j.touches[0]&&!t.touchData.didSelect){var Ht=t.touchData.start,nn=t.touchData.last;if(t.hoverData.draggingEles||t.swipePanning||(lt=t.findNearestElement(G[0],G[1],!0,!0)),pe&&Ht!=null&&j.preventDefault(),pe&&Ht!=null&&t.nodeIsDraggable(Ht))if(he){gr=t.dragData.touchDragEles;var pn=!t.dragData.didDrag;pn&&y(gr,{inDragLayer:!0}),t.dragData.didDrag=!0;var xe={x:0,y:0};ct(Ce[0])&&ct(Ce[1])&&(xe.x+=Ce[0],xe.y+=Ce[1],pn&&(t.redrawHint("eles",!0),(Ke=t.touchData.dragDelta)&&ct(Ke[0])&&ct(Ke[1])&&(xe.x+=Ke[0],xe.y+=Ke[1]))),t.hoverData.draggingEles=!0,gr.silentShift(xe).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==le[0]&&t.touchData.startPosition[1]==le[1]&&t.redrawHint("eles",!0),t.redraw()}else{var Ke;(Ke=t.touchData.dragDelta=t.touchData.dragDelta||[]).length===0?(Ke.push(Ce[0]),Ke.push(Ce[1])):(Ke[0]+=Ce[0],Ke[1]+=Ce[1])}if(i(Ht||lt,["touchmove","tapdrag","vmousemove"],j,{x:G[0],y:G[1]}),Ht&&Ht.grabbed()||lt==nn||(nn&&nn.emit({originalEvent:j,type:"tapdragout",position:{x:G[0],y:G[1]}}),lt&&lt.emit({originalEvent:j,type:"tapdragover",position:{x:G[0],y:G[1]}})),t.touchData.last=lt,pe)for(Je=0;Je<G.length;Je++)G[Je]&&t.touchData.startPosition[Je]&&he&&(t.touchData.singleTouchMoved=!0);pe&&(Ht==null||Ht.pannable())&&ge.panningEnabled()&&ge.userPanningEnabled()&&(s(Ht,t.touchData.starts)&&(j.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=Gd(t.touchData.startPosition)),t.swipePanning?(ge.panBy({x:Ce[0]*V,y:Ce[1]*V}),ge.emit("dragpan")):he&&(t.swipePanning=!0,ge.panBy({x:Re*V,y:ot*V}),ge.emit("dragpan"),Ht&&(Ht.unactivate(),t.redrawHint("select",!0),t.touchData.start=null))),me=t.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY),G[0]=me[0],G[1]=me[1])}for(Te=0;Te<G.length;Te++)le[Te]=G[Te];pe&&j.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}}),"touchmoveHandler"),!1),t.registerBinding(e,"touchcancel",ne=l((function(j){var pe=t.touchData.start;t.touchData.capture=!1,pe&&pe.unactivate()}),"touchcancelHandler")),t.registerBinding(e,"touchend",J=l((function(j){var pe=t.touchData.start;if(t.touchData.capture){j.touches.length===0&&(t.touchData.capture=!1),j.preventDefault();var X=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var ge,G=t.cy,le=G.zoom(),V=t.touchData.now,me=t.touchData.earlier;if(j.touches[0]){var he=t.projectIntoViewport(j.touches[0].clientX,j.touches[0].clientY);V[0]=he[0],V[1]=he[1]}if(j.touches[1]&&(he=t.projectIntoViewport(j.touches[1].clientX,j.touches[1].clientY),V[2]=he[0],V[3]=he[1]),j.touches[2]&&(he=t.projectIntoViewport(j.touches[2].clientX,j.touches[2].clientY),V[4]=he[0],V[5]=he[1]),pe&&pe.unactivate(),t.touchData.cxt){if(ge={originalEvent:j,type:"cxttapend",position:{x:V[0],y:V[1]}},pe?pe.emit(ge):G.emit(ge),!t.touchData.cxtDragged){var _e={originalEvent:j,type:"cxttap",position:{x:V[0],y:V[1]}};pe?pe.emit(_e):G.emit(_e)}return t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,void t.redraw()}if(!j.touches[2]&&G.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var Ce=G.collection(t.getAllInBox(X[0],X[1],X[2],X[3]));X[0]=void 0,X[1]=void 0,X[2]=void 0,X[3]=void 0,X[4]=0,t.redrawHint("select",!0),G.emit({type:"boxend",originalEvent:j,position:{x:V[0],y:V[1]}});var Te=l((function(rt){return rt.selectable()&&!rt.selected()}),"eleWouldBeSelected");Ce.emit("box").stdFilter(Te).select().emit("boxselect"),Ce.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(pe?.unactivate(),j.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!j.touches[1]){if(!j.touches[0]){if(!j.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Re=t.dragData.touchDragEles;if(pe!=null){var Le=pe._private.grabbed;x(Re),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Le&&(pe.emit("freeon"),Re.emit("free"),t.dragData.didDrag&&(pe.emit("dragfreeon"),Re.emit("dragfree"))),i(pe,["touchend","tapend","vmouseup","tapdragout"],j,{x:V[0],y:V[1]}),pe.unactivate(),t.touchData.start=null}else{var ot=t.findNearestElement(V[0],V[1],!0,!0);i(ot,["touchend","tapend","vmouseup","tapdragout"],j,{x:V[0],y:V[1]})}var Tt=t.touchData.startPosition[0]-V[0],Fe=Tt*Tt,gt=t.touchData.startPosition[1]-V[1],Qe=(Fe+gt*gt)*le*le;t.touchData.singleTouchMoved||(pe||G.$(":selected").unselect(["tapunselect"]),i(pe,["tap","vclick"],j,{x:V[0],y:V[1]}),ue=!1,j.timeStamp-se<=G.multiClickDebounceTime()?(Y&&clearTimeout(Y),ue=!0,se=null,i(pe,["dbltap","vdblclick"],j,{x:V[0],y:V[1]})):(Y=setTimeout((function(){ue||i(pe,["onetap","voneclick"],j,{x:V[0],y:V[1]})}),G.multiClickDebounceTime()),se=j.timeStamp)),pe!=null&&!t.dragData.didDrag&&pe._private.selectable&&Qe<t.touchTapThreshold2&&!t.pinching&&(G.selectionType()==="single"?(G.$(r).unmerge(pe).unselect(["tapunselect"]),pe.select(["tapselect"])):pe.selected()?pe.unselect(["tapunselect"]):pe.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var Be=0;Be<V.length;Be++)me[Be]=V[Be];t.dragData.didDrag=!1,j.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),j.touches.length<2&&(j.touches.length===1&&(t.touchData.startGPosition=[j.touches[0].clientX,j.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())}}),"touchendHandler"),!1),typeof TouchEvent>"u"){var Ee=[],ve=l((function(j){return{clientX:j.clientX,clientY:j.clientY,force:1,identifier:j.pointerId,pageX:j.pageX,pageY:j.pageY,radiusX:j.width/2,radiusY:j.height/2,screenX:j.screenX,screenY:j.screenY,target:j.target}}),"makeTouch"),De=l((function(j){return{event:j,touch:ve(j)}}),"makePointer"),Ue=l((function(j){Ee.push(De(j))}),"addPointer"),ze=l((function(j){for(var pe=0;pe<Ee.length;pe++)if(Ee[pe].event.pointerId===j.pointerId)return void Ee.splice(pe,1)}),"removePointer"),Ge=l((function(j){var pe=Ee.filter((function(X){return X.event.pointerId===j.pointerId}))[0];pe.event=j,pe.touch=ve(j)}),"updatePointer"),$e=l((function(j){j.touches=Ee.map((function(pe){return pe.touch}))}),"addTouchesToEvent"),Pe=l((function(j){return j.pointerType==="mouse"||j.pointerType===4}),"pointerIsMouse");t.registerBinding(t.container,"pointerdown",(function(j){Pe(j)||(j.preventDefault(),Ue(j),$e(j),K(j))})),t.registerBinding(t.container,"pointerup",(function(j){Pe(j)||(ze(j),$e(j),J(j))})),t.registerBinding(t.container,"pointercancel",(function(j){Pe(j)||(ze(j),$e(j),ne(j))})),t.registerBinding(t.container,"pointermove",(function(j){Pe(j)||(j.preventDefault(),Ge(j),$e(j),ie(j))}))}}},LSe={generatePolygon:function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:l((function(r,n,i,a,s,o){this.renderer.nodeShapeImpl("polygon",r,n,i,a,s,this.points)}),"draw"),intersectLine:l((function(r,n,i,a,s,o,u,h){return t2(s,o,this.points,r,n,i/2,a/2,u)}),"intersectLine"),checkPoint:l((function(r,n,i,a,s,o,u,h){return vo(r,n,this.points,o,u,a,s,[0,-1],i)}),"checkPoint")}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:l((function(t,e,r,n,i,a){this.renderer.nodeShapeImpl(this.name,t,e,r,n,i)}),"draw"),intersectLine:l((function(t,e,r,n,i,a,s,o){return iEe(i,a,t,e,r/2+s,n/2+s)}),"intersectLine"),checkPoint:l((function(t,e,r,n,i,a,s,o){return _c(t,e,n,i,a,s,r)}),"checkPoint")}},generateRoundPolygon:function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,getOrCreateCorners:l((function(r,n,i,a,s,o,u){if(o[u]!==void 0&&o[u+"-cx"]===r&&o[u+"-cy"]===n)return o[u];o[u]=new Array(e.length/2),o[u+"-cx"]=r,o[u+"-cy"]=n;var h=i/2,d=a/2;s=s==="auto"?Pae(i,a):s;for(var p=new Array(e.length/2),f=0;f<e.length/2;f++)p[f]={x:r+h*e[2*f],y:n+d*e[2*f+1]};var g,m,y,v,x=p.length;for(m=p[x-1],g=0;g<x;g++)y=p[g%x],v=p[(g+1)%x],o[u][g]=uk(m,y,v,s),m=y,y=v;return o[u]}),"getOrCreateCorners"),draw:l((function(r,n,i,a,s,o,u){this.renderer.nodeShapeImpl("round-polygon",r,n,i,a,s,this.points,this.getOrCreateCorners(n,i,a,s,o,u,"drawCorners"))}),"draw"),intersectLine:l((function(r,n,i,a,s,o,u,h,d){return aEe(s,o,this.points,r,n,i,a,u,this.getOrCreateCorners(r,n,i,a,h,d,"corners"))}),"intersectLine"),checkPoint:l((function(r,n,i,a,s,o,u,h,d){return nEe(r,n,this.points,o,u,a,s,this.getOrCreateCorners(o,u,a,s,h,d,"corners"))}),"checkPoint")}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Ni(4,0),draw:l((function(t,e,r,n,i,a){this.renderer.nodeShapeImpl(this.name,t,e,r,n,i,this.points,a)}),"draw"),intersectLine:l((function(t,e,r,n,i,a,s,o){return oP(i,a,t,e,r,n,s,o)}),"intersectLine"),checkPoint:l((function(t,e,r,n,i,a,s,o){var u=n/2,h=i/2;o=o==="auto"?rh(n,i):o;var d=2*(o=Math.min(u,h,o));return!!vo(t,e,this.points,a,s,n,i-d,[0,-1],r)||!!vo(t,e,this.points,a,s,n-d,i,[0,-1],r)||!!_c(t,e,d,d,a-u+o,s-h+o,r)||!!_c(t,e,d,d,a+u-o,s-h+o,r)||!!_c(t,e,d,d,a+u-o,s+h-o,r)||!!_c(t,e,d,d,a-u+o,s+h-o,r)}),"checkPoint")}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:PN(),points:Ni(4,0),draw:l((function(t,e,r,n,i,a){this.renderer.nodeShapeImpl(this.name,t,e,r,n,i,null,a)}),"draw"),generateCutTrianglePts:l((function(t,e,r,n,i){var a=i==="auto"?this.cornerLength:i,s=e/2,o=t/2,u=r-o,h=r+o,d=n-s,p=n+s;return{topLeft:[u,d+a,u+a,d,u+a,d+a],topRight:[h-a,d,h,d+a,h-a,d+a],bottomRight:[h,p-a,h-a,p,h-a,p-a],bottomLeft:[u+a,p,u,p-a,u+a,p-a]}}),"generateCutTrianglePts"),intersectLine:l((function(t,e,r,n,i,a,s,o){var u=this.generateCutTrianglePts(r+2*s,n+2*s,t,e,o),h=[].concat.apply([],[u.topLeft.splice(0,4),u.topRight.splice(0,4),u.bottomRight.splice(0,4),u.bottomLeft.splice(0,4)]);return t2(i,a,h,t,e)}),"intersectLine"),checkPoint:l((function(t,e,r,n,i,a,s,o){var u=o==="auto"?this.cornerLength:o;if(vo(t,e,this.points,a,s,n,i-2*u,[0,-1],r)||vo(t,e,this.points,a,s,n-2*u,i,[0,-1],r))return!0;var h=this.generateCutTrianglePts(n,i,a,s);return ea(t,e,h.topLeft)||ea(t,e,h.topRight)||ea(t,e,h.bottomRight)||ea(t,e,h.bottomLeft)}),"checkPoint")}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Ni(4,0),draw:l((function(t,e,r,n,i,a){this.renderer.nodeShapeImpl(this.name,t,e,r,n,i)}),"draw"),intersectLine:l((function(t,e,r,n,i,a,s,o){var u=this.generateBarrelBezierPts(r+2*s,n+2*s,t,e),h=l((function(p){var f=rp({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},.15),g=rp({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},.5),m=rp({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},.85);return[p[0],p[1],f.x,f.y,g.x,g.y,m.x,m.y,p[4],p[5]]}),"approximateBarrelCurvePts"),d=[].concat(h(u.topLeft),h(u.topRight),h(u.bottomRight),h(u.bottomLeft));return t2(i,a,d,t,e)}),"intersectLine"),generateBarrelBezierPts:l((function(t,e,r,n){var i=e/2,a=t/2,s=r-a,o=r+a,u=n-i,h=n+i,d=fS(t,e),p=d.heightOffset,f=d.widthOffset,g=d.ctrlPtOffsetPct*t,m={topLeft:[s,u+p,s+g,u,s+f,u],topRight:[o-f,u,o-g,u,o,u+p],bottomRight:[o,h-p,o-g,h,o-f,h],bottomLeft:[s+f,h,s+g,h,s,h-p]};return m.topLeft.isTop=!0,m.topRight.isTop=!0,m.bottomLeft.isBottom=!0,m.bottomRight.isBottom=!0,m}),"generateBarrelBezierPts"),checkPoint:l((function(t,e,r,n,i,a,s,o){var u=fS(n,i),h=u.heightOffset,d=u.widthOffset;if(vo(t,e,this.points,a,s,n,i-2*h,[0,-1],r)||vo(t,e,this.points,a,s,n-2*d,i,[0,-1],r))return!0;for(var p=this.generateBarrelBezierPts(n,i,a,s),f=l((function(k,C,E){var _=E[4],S=E[2],N=E[0],O=E[5],B=E[1],L=Math.min(_,N),I=Math.max(_,N),A=Math.min(O,B),M=Math.max(O,B);if(L<=k&&k<=I&&A<=C&&C<=M){var D=sEe(_,S,N),R=JTe(D[0],D[1],D[2],k).filter((function(P){return 0<=P&&P<=1}));if(R.length>0)return R[0]}return null}),"getCurveT"),g=Object.keys(p),m=0;m<g.length;m++){var y=p[g[m]],v=f(t,e,y);if(v!=null){var x=y[5],b=y[3],w=y[1],T=Vn(x,b,w,v);if(y.isTop&&T<=e||y.isBottom&&e<=T)return!0}}return!1}),"checkPoint")}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Ni(4,0),draw:l((function(t,e,r,n,i,a){this.renderer.nodeShapeImpl(this.name,t,e,r,n,i,this.points,a)}),"draw"),intersectLine:l((function(t,e,r,n,i,a,s,o){var u=e-(n/2+s),h=Ol(i,a,t,e,t-(r/2+s),u,t+(r/2+s),u,!1);return h.length>0?h:oP(i,a,t,e,r,n,s,o)}),"intersectLine"),checkPoint:l((function(t,e,r,n,i,a,s,o){var u=2*(o=o==="auto"?rh(n,i):o);if(vo(t,e,this.points,a,s,n,i-u,[0,-1],r)||vo(t,e,this.points,a,s,n-u,i,[0,-1],r))return!0;var h=n/2+2*r,d=i/2+2*r;return!!ea(t,e,[a-h,s-d,a-h,s,a+h,s,a+h,s-d])||!!_c(t,e,u,u,a+n/2-o,s+i/2-o,r)||!!_c(t,e,u,u,a-n/2+o,s+i/2-o,r)}),"checkPoint")}},registerNodeShapes:function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Ni(3,0)),this.generateRoundPolygon("round-triangle",Ni(3,0)),this.generatePolygon("rectangle",Ni(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r),this.generatePolygon("pentagon",Ni(5,0)),this.generateRoundPolygon("round-pentagon",Ni(5,0)),this.generatePolygon("hexagon",Ni(6,0)),this.generateRoundPolygon("round-hexagon",Ni(6,0)),this.generatePolygon("heptagon",Ni(7,0)),this.generateRoundPolygon("round-heptagon",Ni(7,0)),this.generatePolygon("octagon",Ni(8,0)),this.generateRoundPolygon("round-octagon",Ni(8,0));var n=new Array(20),i=pS(5,0),a=pS(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var o=0;o<a.length/2;o++)a[2*o]*=s,a[2*o+1]*=s;for(o=0;o<5;o++)n[4*o]=i[2*o],n[4*o+1]=i[2*o+1],n[4*o+2]=a[2*o],n[4*o+3]=a[2*o+1];n=Oae(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u),t.makePolygon=function(h){var d,p="polygon-"+h.join("$");return(d=this[p])?d:e.generatePolygon(p,h)}}},ooe={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(t){t=t||Iae();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t},beforeRender:function(t,e){if(!this.destroyed){e==null&&en("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:e}),r.sort((function(n,i){return i.priority-n.priority}))}}},eB=l((function(t,e,r){for(var n=t.beforeRenderCallbacks,i=0;i<n.length;i++)n[i].fn(e,r)}),"beforeRenderCallbacks");ooe.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var r=l((function n(i){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){eB(t,!0,i);var a=el();t.render(t.renderOptions);var s=t.lastDrawTime=el();t.averageRedrawTime===void 0&&(t.averageRedrawTime=s-a),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var o=s-a;t.redrawTotalTime+=o,t.lastRedrawTime=o,t.averageRedrawTime=t.averageRedrawTime/2+o/2,t.requestedFrame=!1}else eB(t,!1,i);t.skipFrame=!1,i6(n)}}),"renderFn");i6(r)}};var loe=l((function(t){this.init(t)}),"BaseRenderer"),Lh=loe.prototype;Lh.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],Lh.init=function(t){var e=this;e.options=t,e.cy=t.cy;var r=e.container=t.cy.container(),n=e.cy.window();if(n){var i=n.document,a=i.head,s="__________cytoscape_stylesheet",o="__________cytoscape_container",u=i.getElementById(s)!=null;if(r.className.indexOf(o)<0&&(r.className=(r.className||"")+" "+o),!u){var h=i.createElement("style");h.id=s,h.textContent="."+o+" { position: relative; }",a.insertBefore(h,a.children[0])}n.getComputedStyle(r).getPropertyValue("position")==="static"&&kr("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.webgl=t.webgl,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=ct(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()},Lh.notify=function(t,e){var r=this,n=r.cy;this.destroyed||(t!=="init"?t!=="destroy"?((t==="add"||t==="remove"||t==="move"&&n.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&r.invalidateCachedZSortedEles(),t==="viewport"&&r.redrawHint("select",!0),t==="gc"&&r.redrawHint("gc",!0),t!=="load"&&t!=="resize"&&t!=="mount"||(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):r.destroy():r.load())},Lh.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var r=t.bindings[e],n=r.target;(n.off||n.removeEventListener).apply(n,r.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}},Lh.isHeadless=function(){return!1},[xSe,soe,SSe,ASe,LSe,ooe].forEach((function(t){Gt(Lh,t)}));var coe={setupDequeueing:l((function(t){return l((function(){var e=this,r=this.renderer;if(!e.dequeueingSetup){e.dequeueingSetup=!0;var n=tx((function(){r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()}),t.deqRedrawThreshold),i=l((function(s,o){var u=el(),h=r.averageRedrawTime,d=r.lastRedrawTime,p=[],f=r.cy.extent(),g=r.getPixelRatio();for(s||r.flushRenderedStyleQueue();;){var m=el(),y=m-u,v=m-o;if(d<16.666666666666668){var x=16.666666666666668-(s?h:0);if(v>=t.deqFastCost*x)break}else if(s){if(y>=t.deqCost*d||y>=t.deqAvgCost*h)break}else if(v>=16.666666666666668*t.deqNoDrawCost)break;var b=t.deq(e,g,f);if(!(b.length>0))break;for(var w=0;w<b.length;w++)p.push(b[w])}p.length>0&&(t.onDeqd(e,p),!s&&t.shouldRedraw(e,p,g,f)&&n())}),"dequeue"),a=t.priority||MN;r.beforeRender(i,a(e))}}),"setupDequeueingImpl")}),"setupDequeueing")},NSe=(function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a6;cl(this,t),this.idsByKey=new Qs,this.keyForId=new Qs,this.cachesByLvl=new Qs,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=r}return l(t,"ElementTextureCacheLookup"),ul(t,[{key:"getIdsFor",value:l((function(e){e==null&&en("Can not get id list for null key");var r=this.idsByKey,n=this.idsByKey.get(e);return n||(n=new km,r.set(e,n)),n}),"getIdsFor")},{key:"addIdForKey",value:l((function(e,r){e!=null&&this.getIdsFor(e).add(r)}),"addIdForKey")},{key:"deleteIdForKey",value:l((function(e,r){e!=null&&this.getIdsFor(e).delete(r)}),"deleteIdForKey")},{key:"getNumberOfIdsForKey",value:l((function(e){return e==null?0:this.getIdsFor(e).size}),"getNumberOfIdsForKey")},{key:"updateKeyMappingFor",value:l((function(e){var r=e.id(),n=this.keyForId.get(r),i=this.getKey(e);this.deleteIdForKey(n,r),this.addIdForKey(i,r),this.keyForId.set(r,i)}),"updateKeyMappingFor")},{key:"deleteKeyMappingFor",value:l((function(e){var r=e.id(),n=this.keyForId.get(r);this.deleteIdForKey(n,r),this.keyForId.delete(r)}),"deleteKeyMappingFor")},{key:"keyHasChangedFor",value:l((function(e){var r=e.id();return this.keyForId.get(r)!==this.getKey(e)}),"keyHasChangedFor")},{key:"isInvalid",value:l((function(e){return this.keyHasChangedFor(e)||this.doesEleInvalidateKey(e)}),"isInvalid")},{key:"getCachesAt",value:l((function(e){var r=this.cachesByLvl,n=this.lvls,i=r.get(e);return i||(i=new Qs,r.set(e,i),n.push(e)),i}),"getCachesAt")},{key:"getCache",value:l((function(e,r){return this.getCachesAt(r).get(e)}),"getCache")},{key:"get",value:l((function(e,r){var n=this.getKey(e),i=this.getCache(n,r);return i!=null&&this.updateKeyMappingFor(e),i}),"get")},{key:"getForCachedKey",value:l((function(e,r){var n=this.keyForId.get(e.id());return this.getCache(n,r)}),"getForCachedKey")},{key:"hasCache",value:l((function(e,r){return this.getCachesAt(r).has(e)}),"hasCache")},{key:"has",value:l((function(e,r){var n=this.getKey(e);return this.hasCache(n,r)}),"has")},{key:"setCache",value:l((function(e,r,n){n.key=e,this.getCachesAt(r).set(e,n)}),"setCache")},{key:"set",value:l((function(e,r,n){var i=this.getKey(e);this.setCache(i,r,n),this.updateKeyMappingFor(e)}),"set")},{key:"deleteCache",value:l((function(e,r){this.getCachesAt(r).delete(e)}),"deleteCache")},{key:"delete",value:l((function(e,r){var n=this.getKey(e);this.deleteCache(n,r)}),"_delete")},{key:"invalidateKey",value:l((function(e){var r=this;this.lvls.forEach((function(n){return r.deleteCache(e,n)}))}),"invalidateKey")},{key:"invalidate",value:l((function(e){var r=e.id(),n=this.keyForId.get(r);this.deleteKeyMappingFor(e);var i=this.doesEleInvalidateKey(e);return i&&this.invalidateKey(n),i||this.getNumberOfIdsForKey(n)===0}),"invalidate")}]),t})(),Nh={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},ISe=Jn({getKey:null,doesEleInvalidateKey:a6,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Aae,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),vy=l((function(t,e){var r=this;r.renderer=t,r.onDequeues=[];var n=ISe(e);Gt(r,n),r.lookup=new NSe(n.getKey,n.doesEleInvalidateKey),r.setupDequeueing()}),"ElementTextureCache"),An=vy.prototype;An.reasons=Nh,An.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]},An.getRetiredTextureQueue=function(t){var e=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return e[t]=e[t]||[]},An.getElementQueue=function(){var t=this.eleCacheQueue=this.eleCacheQueue||new rx((function(e,r){return r.reqs-e.reqs}));return t},An.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},An.getElement=function(t,e,r,n,i){var a=this,s=this.renderer,o=s.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!a.allowEdgeTxrCaching&&t.isEdge()||!a.allowParentTxrCaching&&t.isParent())return null;if(n==null&&(n=Math.ceil(DN(o*r))),n<-4)n=-4;else if(o>=7.99||n>3)return null;var h=Math.pow(2,n),d=e.h*h,p=e.w*h,f=s.eleTextBiggerThanMin(t,h);if(!this.isVisible(t,f))return null;var g,m=u.get(t,n);if(m&&m.invalidated&&(m.invalidated=!1,m.texture.invalidatedWidth-=m.width),m)return m;if(g=d<=25?25:d<=50?50:50*Math.ceil(d/50),d>1024||p>1024)return null;var y=a.getTextureQueue(g),v=y[y.length-2],x=l((function(){return a.recycleTexture(g,p)||a.addTexture(g,p)}),"addNewTxr");v||(v=y[y.length-1]),v||(v=x()),v.width-v.usedWidth<p&&(v=x());for(var b,w=l((function(A){return A&&A.scaledLabelShown===f}),"scalableFrom"),T=i&&i===Nh.dequeue,k=i&&i===Nh.highQuality,C=i&&i===Nh.downscale,E=n+1;E<=3;E++){var _=u.get(t,E);if(_){b=_;break}}var S=b&&b.level===n+1?b:null,N=l((function(){v.context.drawImage(S.texture.canvas,S.x,0,S.width,S.height,v.usedWidth,0,p,d)}),"downscale");if(v.context.setTransform(1,0,0,1,0,0),v.context.clearRect(v.usedWidth,0,p,g),w(S))N();else if(w(b)){if(!k)return a.queueElement(t,b.level-1),b;for(var O=b.level;O>n;O--)S=a.getElement(t,e,r,O,Nh.downscale);N()}else{var B;if(!T&&!k&&!C)for(var L=n-1;L>=-4;L--){var I=u.get(t,L);if(I){B=I;break}}if(w(B))return a.queueElement(t,n),B;v.context.translate(v.usedWidth,0),v.context.scale(h,h),this.drawElement(v.context,t,e,f,!1),v.context.scale(1/h,1/h),v.context.translate(-v.usedWidth,0)}return m={x:v.usedWidth,texture:v,level:n,scale:h,width:p,height:d,scaledLabelShown:f},v.usedWidth+=Math.ceil(p+8),v.eleCaches.push(m),u.set(t,n,m),a.checkTextureFullness(v),m},An.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])},An.invalidateElement=function(t){var e=this,r=e.lookup,n=[];if(r.isInvalid(t)){for(var i=-4;i<=3;i++){var a=r.getForCachedKey(t,i);a&&n.push(a)}if(r.invalidate(t))for(var s=0;s<n.length;s++){var o=n[s],u=o.texture;u.invalidatedWidth+=o.width,o.invalidated=!0,e.checkTextureUtility(u)}e.removeFromQueue(t)}},An.checkTextureUtility=function(t){t.invalidatedWidth>=.2*t.width&&this.retireTexture(t)},An.checkTextureFullness=function(t){var e=this.getTextureQueue(t.height);t.usedWidth/t.width>.8&&t.fullnessChecks>=10?Dl(e,t):t.fullnessChecks++},An.retireTexture=function(t){var e=t.height,r=this.getTextureQueue(e),n=this.lookup;Dl(r,t),t.retired=!0;for(var i=t.eleCaches,a=0;a<i.length;a++){var s=i[a];n.deleteCache(s.key,s.level)}dS(i),this.getRetiredTextureQueue(e).push(t)},An.addTexture=function(t,e){var r={};return this.getTextureQueue(t).push(r),r.eleCaches=[],r.height=t,r.width=Math.max(1024,e),r.usedWidth=0,r.invalidatedWidth=0,r.fullnessChecks=0,r.canvas=this.renderer.makeOffscreenCanvas(r.width,r.height),r.context=r.canvas.getContext("2d"),r},An.recycleTexture=function(t,e){for(var r=this.getTextureQueue(t),n=this.getRetiredTextureQueue(t),i=0;i<n.length;i++){var a=n[i];if(a.width>=e)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,dS(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),Dl(n,a),r.push(a),a}},An.queueElement=function(t,e){var r=this.getElementQueue(),n=this.getElementKeyToQueue(),i=this.getKey(t),a=n[i];if(a)a.level=Math.max(a.level,e),a.eles.merge(t),a.reqs++,r.updateItem(a);else{var s={eles:t.spawn().merge(t),level:e,reqs:1,key:i};r.push(s),n[i]=s}},An.dequeue=function(t){for(var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),i=[],a=e.lookup,s=0;s<1&&r.size()>0;s++){var o=r.pop(),u=o.key,h=o.eles[0],d=a.hasCache(h,o.level);if(n[u]=null,!d){i.push(o);var p=e.getBoundingBox(h);e.getElement(h,p,t,o.level,Nh.dequeue)}}return i},An.removeFromQueue=function(t){var e=this.getElementQueue(),r=this.getElementKeyToQueue(),n=this.getKey(t),i=r[n];i!=null&&(i.eles.length===1?(i.reqs=RN,e.updateItem(i),e.pop(),r[n]=null):i.eles.unmerge(t))},An.onDequeue=function(t){this.onDequeues.push(t)},An.offDequeue=function(t){Dl(this.onDequeues,t)},An.setupDequeueing=coe.setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:l((function(t,e,r){return t.dequeue(e,r)}),"deq"),onDeqd:l((function(t,e){for(var r=0;r<t.onDequeues.length;r++)(0,t.onDequeues[r])(e)}),"onDeqd"),shouldRedraw:l((function(t,e,r,n){for(var i=0;i<e.length;i++)for(var a=e[i].eles,s=0;s<a.length;s++){var o=a[s].boundingBox();if(ON(o,n))return!0}return!1}),"shouldRedraw"),priority:l((function(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}),"priority")});var uoe=l((function(t){var e=this,r=e.renderer=t,n=r.cy;e.layersByLevel={},e.firstGet=!0,e.lastInvalidationTime=el()-500,e.skipping=!1,e.eleTxrDeqs=n.collection(),e.scheduleElementRefinement=tx((function(){e.refineElementTextures(e.eleTxrDeqs),e.eleTxrDeqs.unmerge(e.eleTxrDeqs)}),50),r.beforeRender((function(a,s){s-e.lastInvalidationTime<=250?e.skipping=!0:e.skipping=!1}),r.beforeRenderPriorities.lyrTxrSkip);var i=l((function(a,s){return s.reqs-a.reqs}),"qSort");e.layersQueue=new rx(i),e.setupDequeueing()}),"LayeredTextureCache"),ri=uoe.prototype,tB=0,RSe=Math.pow(2,53)-1;ri.makeLayer=function(t,e){var r=Math.pow(2,e),n=Math.ceil(t.w*r),i=Math.ceil(t.h*r),a=this.renderer.makeOffscreenCanvas(n,i),s={id:tB=++tB%RSe,bb:t,level:e,width:n,height:i,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},o=s.context,u=-s.bb.x1,h=-s.bb.y1;return o.scale(r,r),o.translate(u,h),s},ri.getLayers=function(t,e,r){var n=this,i=n.renderer.cy.zoom(),a=n.firstGet;if(n.firstGet=!1,r==null){if((r=Math.ceil(DN(i*e)))<-4)r=-4;else if(i>=3.99||r>2)return null}n.validateLayersElesOrdering(r,t);var s,o,u=n.layersByLevel,h=Math.pow(2,r),d=u[r]=u[r]||[],p=n.levelIsComplete(r,t),f=l((function(){var E=l((function(O){if(n.validateLayersElesOrdering(O,t),n.levelIsComplete(O,t))return o=u[O],!0}),"canUseAsTmpLvl"),_=l((function(O){if(!o)for(var B=r+O;-4<=B&&B<=2&&!E(B);B+=O);}),"checkLvls");_(1),_(-1);for(var S=d.length-1;S>=0;S--){var N=d[S];N.invalid&&Dl(d,N)}}),"checkTempLevels");if(p)return d;f();var g=l((function(){if(!s){s=ha();for(var E=0;E<t.length;E++)Mae(s,t[E].boundingBox())}return s}),"getBb"),m=l((function(E){var _=(E=E||{}).after;g();var S=Math.ceil(s.w*h),N=Math.ceil(s.h*h);if(S>32767||N>32767||S*N>16e6)return null;var O=n.makeLayer(s,r);if(_!=null){var B=d.indexOf(_)+1;d.splice(B,0,O)}else(E.insert===void 0||E.insert)&&d.unshift(O);return O}),"makeLayer");if(n.skipping&&!a)return null;for(var y=null,v=t.length/1,x=!a,b=0;b<t.length;b++){var w=t[b],T=w._private.rscratch,k=T.imgLayerCaches=T.imgLayerCaches||{},C=k[r];if(C)y=C;else{if((!y||y.eles.length>=v||!Dae(y.bb,w.boundingBox()))&&!(y=m({insert:!0,after:y})))return null;o||x?n.queueLayer(y,w):n.drawEleInLayer(y,w,r,e),y.eles.push(w),k[r]=y}}return o||(x?null:d)},ri.getEleLevelForLayerLevel=function(t,e){return t},ri.drawEleInLayer=function(t,e,r,n){var i=this.renderer,a=t.context,s=e.boundingBox();s.w!==0&&s.h!==0&&e.visible()&&(r=this.getEleLevelForLayerLevel(r,n),i.setImgSmoothing(a,!1),i.drawCachedElement(a,e,null,null,r,!0),i.setImgSmoothing(a,!0))},ri.levelIsComplete=function(t,e){var r=this.layersByLevel[t];if(!r||r.length===0)return!1;for(var n=0,i=0;i<r.length;i++){var a=r[i];if(a.reqs>0||a.invalid)return!1;n+=a.eles.length}return n===e.length},ri.validateLayersElesOrdering=function(t,e){var r=this.layersByLevel[t];if(r)for(var n=0;n<r.length;n++){for(var i=r[n],a=-1,s=0;s<e.length;s++)if(i.eles[0]===e[s]){a=s;break}if(a<0)this.invalidateLayer(i);else{var o=a;for(s=0;s<i.eles.length;s++)if(i.eles[s]!==e[o+s]){this.invalidateLayer(i);break}}}},ri.updateElementsInLayers=function(t,e){for(var r=Jv(t[0]),n=0;n<t.length;n++)for(var i=r?null:t[n],a=r?t[n]:t[n].ele,s=a._private.rscratch,o=s.imgLayerCaches=s.imgLayerCaches||{},u=-4;u<=2;u++){var h=o[u];h&&(i&&this.getEleLevelForLayerLevel(h.level)!==i.level||e(h,a,i))}},ri.haveLayers=function(){for(var t=!1,e=-4;e<=2;e++){var r=this.layersByLevel[e];if(r&&r.length>0){t=!0;break}}return t},ri.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=el(),t.length!==0&&e.haveLayers()&&e.updateElementsInLayers(t,l((function(r,n,i){e.invalidateLayer(r)}),"invalAssocLayers")))},ri.invalidateLayer=function(t){if(this.lastInvalidationTime=el(),!t.invalid){var e=t.level,r=t.eles,n=this.layersByLevel[e];Dl(n,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var i=0;i<r.length;i++){var a=r[i]._private.rscratch.imgLayerCaches;a&&(a[e]=null)}}},ri.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,l((function(r,n,i){var a=r.replacement;if(a||((a=r.replacement=e.makeLayer(r.bb,r.level)).replaces=r,a.eles=r.eles),!a.reqs)for(var s=0;s<a.eles.length;s++)e.queueLayer(a,a.eles[s])}),"refineEachEle"))},ri.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()},ri.queueLayer=function(t,e){var r=this.layersQueue,n=t.elesQueue,i=n.hasId=n.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;n.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,r.updateItem(t)):(t.reqs=1,r.push(t))}},ri.dequeue=function(t){for(var e=this,r=e.layersQueue,n=[],i=0;i<1&&r.size()!==0;){var a=r.peek();if(a.replacement)r.pop();else if(a.replaces&&a!==a.replaces.replacement)r.pop();else if(a.invalid)r.pop();else{var s=a.elesQueue.shift();s&&(e.drawEleInLayer(a,s,a.level,t),i++),n.length===0&&n.push(!0),a.elesQueue.length===0&&(r.pop(),a.reqs=0,a.replaces&&e.applyLayerReplacement(a),e.requestRedraw())}}return n},ri.applyLayerReplacement=function(t){var e=this.layersByLevel[t.level],r=t.replaces,n=e.indexOf(r);if(!(n<0||r.invalid)){e[n]=t;for(var i=0;i<t.eles.length;i++){var a=t.eles[i]._private,s=a.imgLayerCaches=a.imgLayerCaches||{};s&&(s[t.level]=t)}this.requestRedraw()}},ri.requestRedraw=tx((function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()}),100),ri.setupDequeueing=coe.setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:l((function(t,e){return t.dequeue(e)}),"deq"),onDeqd:MN,shouldRedraw:Aae,priority:l((function(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}),"priority")});var rB,hoe={};function nB(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.lineTo(n.x,n.y)}}function iB(t,e,r){for(var n,i=0;i<e.length;i++){var a=e[i];i===0&&(n=a),t.lineTo(a.x,a.y)}t.quadraticCurveTo(r.x,r.y,n.x,n.y)}function zT(t,e,r){t.beginPath&&t.beginPath();for(var n=e,i=0;i<n.length;i++){var a=n[i];t.lineTo(a.x,a.y)}var s=r,o=r[0];for(t.moveTo(o.x,o.y),i=1;i<s.length;i++)a=s[i],t.lineTo(a.x,a.y);t.closePath&&t.closePath()}function aB(t,e,r,n,i){t.beginPath&&t.beginPath(),t.arc(r,n,i,0,2*Math.PI,!1);var a=e,s=a[0];t.moveTo(s.x,s.y);for(var o=0;o<a.length;o++){var u=a[o];t.lineTo(u.x,u.y)}t.closePath&&t.closePath()}function sB(t,e,r,n){t.arc(e,r,n,0,2*Math.PI,!1)}l(nB,"polygon"),l(iB,"triangleBackcurve"),l(zT,"triangleTee"),l(aB,"circleTriangle"),l(sB,"circle"),hoe.arrowShapeImpl=function(t){return(rB||(rB={polygon:nB,"triangle-backcurve":iB,"triangle-tee":zT,"circle-triangle":aB,"triangle-cross":zT,circle:sB}))[t]};var Xh={drawElement:function(t,e,r,n,i,a){e.isNode()?this.drawNode(t,e,r,n,i,a):this.drawEdge(t,e,r,n,i,a)},drawElementOverlay:function(t,e){e.isNode()?this.drawNodeOverlay(t,e):this.drawEdgeOverlay(t,e)},drawElementUnderlay:function(t,e){e.isNode()?this.drawNodeUnderlay(t,e):this.drawEdgeUnderlay(t,e)},drawCachedElementPortion:function(t,e,r,n,i,a,s,o){var u=this,h=r.getBoundingBox(e);if(h.w!==0&&h.h!==0){var d=r.getElement(e,h,n,i,a);if(d!=null){var p=o(u,e);if(p===0)return;var f,g,m,y,v,x,b=s(u,e),w=h.x1,T=h.y1,k=h.w,C=h.h;if(b!==0){var E=r.getRotationPoint(e);m=E.x,y=E.y,t.translate(m,y),t.rotate(b),(v=u.getImgSmoothing(t))||u.setImgSmoothing(t,!0);var _=r.getRotationOffset(e);f=_.x,g=_.y}else f=w,g=T;p!==1&&(x=t.globalAlpha,t.globalAlpha=x*p),t.drawImage(d.texture.canvas,d.x,0,d.width,d.height,f,g,k,C),p!==1&&(t.globalAlpha=x),b!==0&&(t.rotate(-b),t.translate(-m,-y),v||u.setImgSmoothing(t,!1))}else r.drawElement(t,e)}}},MSe=l((function(){return 0}),"getZeroRotation"),DSe=l((function(t,e){return t.getTextAngle(e,null)}),"getLabelRotation"),OSe=l((function(t,e){return t.getTextAngle(e,"source")}),"getSourceLabelRotation"),PSe=l((function(t,e){return t.getTextAngle(e,"target")}),"getTargetLabelRotation"),BSe=l((function(t,e){return e.effectiveOpacity()}),"getOpacity"),GT=l((function(t,e){return e.pstyle("text-opacity").pfValue*e.effectiveOpacity()}),"getTextOpacity");Xh.drawCachedElement=function(t,e,r,n,i,a){var s=this,o=s.data,u=o.eleTxrCache,h=o.lblTxrCache,d=o.slbTxrCache,p=o.tlbTxrCache,f=e.boundingBox(),g=a===!0?u.reasons.highQuality:null;if(f.w!==0&&f.h!==0&&e.visible()&&(!n||ON(f,n))){var m=e.isEdge(),y=e.element()._private.rscratch.badLine;s.drawElementUnderlay(t,e),s.drawCachedElementPortion(t,e,u,r,i,g,MSe,BSe),m&&y||s.drawCachedElementPortion(t,e,h,r,i,g,DSe,GT),m&&!y&&(s.drawCachedElementPortion(t,e,d,r,i,g,OSe,GT),s.drawCachedElementPortion(t,e,p,r,i,g,PSe,GT)),s.drawElementOverlay(t,e)}},Xh.drawElements=function(t,e){for(var r=0;r<e.length;r++){var n=e[r];this.drawElement(t,n)}},Xh.drawCachedElements=function(t,e,r,n){for(var i=0;i<e.length;i++){var a=e[i];this.drawCachedElement(t,a,r,n)}},Xh.drawCachedNodes=function(t,e,r,n){for(var i=0;i<e.length;i++){var a=e[i];a.isNode()&&this.drawCachedElement(t,a,r,n)}},Xh.drawLayeredElements=function(t,e,r,n){var i=this.data.lyrTxrCache.getLayers(e,r);if(i)for(var a=0;a<i.length;a++){var s=i[a],o=s.bb;o.w!==0&&o.h!==0&&t.drawImage(s.canvas,o.x1,o.y1,o.w,o.h)}else this.drawCachedElements(t,e,r,n)};var Tl={drawEdge:function(t,e,r){var n=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],a=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5],s=this,o=e._private.rscratch;if((!a||e.visible())&&!o.badLine&&o.allpts!=null&&!isNaN(o.allpts[0])){var u;r&&(u=r,t.translate(-u.x1,-u.y1));var h=a?e.pstyle("opacity").value:1,d=a?e.pstyle("line-opacity").value:1,p=e.pstyle("curve-style").value,f=e.pstyle("line-style").value,g=e.pstyle("width").pfValue,m=e.pstyle("line-cap").value,y=e.pstyle("line-outline-width").value,v=e.pstyle("line-outline-color").value,x=h*d,b=h*d,w=l((function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x;p==="straight-triangle"?(s.eleStrokeStyle(t,e,I),s.drawEdgeTrianglePath(e,t,o.allpts)):(t.lineWidth=g,t.lineCap=m,s.eleStrokeStyle(t,e,I),s.drawEdgePath(e,t,o.allpts,f),t.lineCap="butt")}),"drawLine"),T=l((function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x;t.lineWidth=g+y,t.lineCap=m,y>0?(s.colorStrokeStyle(t,v[0],v[1],v[2],I),p==="straight-triangle"?s.drawEdgeTrianglePath(e,t,o.allpts):(s.drawEdgePath(e,t,o.allpts,f),t.lineCap="butt")):t.lineCap="butt"}),"drawLineOutline"),k=l((function(){i&&s.drawEdgeOverlay(t,e)}),"drawOverlay"),C=l((function(){i&&s.drawEdgeUnderlay(t,e)}),"drawUnderlay"),E=l((function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;s.drawArrowheads(t,e,I)}),"drawArrows"),_=l((function(){s.drawElementText(t,e,null,n)}),"drawText");t.lineJoin="round";var S=e.pstyle("ghost").value==="yes";if(S){var N=e.pstyle("ghost-offset-x").pfValue,O=e.pstyle("ghost-offset-y").pfValue,B=e.pstyle("ghost-opacity").value,L=x*B;t.translate(N,O),w(L),E(L),t.translate(-N,-O)}else T();C(),w(),E(),k(),_(),r&&t.translate(u.x1,u.y1)}}},oB=l((function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(e,r){if(r.visible()){var n=r.pstyle("".concat(t,"-opacity")).value;if(n!==0){var i=this,a=i.usePaths(),s=r._private.rscratch,o=2*r.pstyle("".concat(t,"-padding")).pfValue,u=r.pstyle("".concat(t,"-color")).value;e.lineWidth=o,s.edgeType!=="self"||a?e.lineCap="round":e.lineCap="butt",i.colorStrokeStyle(e,u[0],u[1],u[2],n),i.drawEdgePath(r,e,s.allpts,"solid")}}}}),"drawEdgeOverlayUnderlay");Tl.drawEdgeOverlay=oB("overlay"),Tl.drawEdgeUnderlay=oB("underlay"),Tl.drawEdgePath=function(t,e,r,n){var i,a=t._private.rscratch,s=e,o=!1,u=this.usePaths(),h=t.pstyle("line-dash-pattern").pfValue,d=t.pstyle("line-dash-offset").pfValue;if(u){var p=r.join("$");a.pathCacheKey&&a.pathCacheKey===p?(i=e=a.pathCache,o=!0):(i=e=new Path2D,a.pathCacheKey=p,a.pathCache=i)}if(s.setLineDash)switch(n){case"dotted":s.setLineDash([1,1]);break;case"dashed":s.setLineDash(h),s.lineDashOffset=d;break;case"solid":s.setLineDash([])}if(!o&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var f=2;f+3<r.length;f+=4)e.quadraticCurveTo(r[f],r[f+1],r[f+2],r[f+3]);break;case"straight":case"haystack":for(var g=2;g+1<r.length;g+=2)e.lineTo(r[g],r[g+1]);break;case"segments":if(a.isRound){var m,y=wa(a.roundCorners);try{for(y.s();!(m=y.n()).done;)QN(e,m.value)}catch(x){y.e(x)}finally{y.f()}e.lineTo(r[r.length-2],r[r.length-1])}else for(var v=2;v+1<r.length;v+=2)e.lineTo(r[v],r[v+1])}e=s,u?e.stroke(i):e.stroke(),e.setLineDash&&e.setLineDash([])},Tl.drawEdgeTrianglePath=function(t,e,r){e.fillStyle=e.strokeStyle;for(var n=t.pstyle("width").pfValue,i=0;i+1<r.length;i+=2){var a=[r[i+2]-r[i],r[i+3]-r[i+1]],s=Math.sqrt(a[0]*a[0]+a[1]*a[1]),o=[a[1]/s,-a[0]/s],u=[o[0]*n/2,o[1]*n/2];e.beginPath(),e.moveTo(r[i]-u[0],r[i+1]-u[1]),e.lineTo(r[i]+u[0],r[i+1]+u[1]),e.lineTo(r[i+2],r[i+3]),e.closePath(),e.fill()}},Tl.drawArrowheads=function(t,e,r){var n=e._private.rscratch,i=n.edgeType==="haystack";i||this.drawArrowhead(t,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(t,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(t,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),i||this.drawArrowhead(t,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)},Tl.drawArrowhead=function(t,e,r,n,i,a,s){if(!(isNaN(n)||n==null||isNaN(i)||i==null||isNaN(a)||a==null)){var o=this,u=e.pstyle(r+"-arrow-shape").value;if(u!=="none"){var h=e.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",d=e.pstyle(r+"-arrow-fill").value,p=e.pstyle("width").pfValue,f=e.pstyle(r+"-arrow-width"),g=f.value==="match-line"?p:f.pfValue;f.units==="%"&&(g*=p);var m=e.pstyle("opacity").value;s===void 0&&(s=m);var y=t.globalCompositeOperation;s===1&&d!=="hollow"||(t.globalCompositeOperation="destination-out",o.colorFillStyle(t,255,255,255,1),o.colorStrokeStyle(t,255,255,255,1),o.drawArrowShape(e,t,h,p,u,g,n,i,a),t.globalCompositeOperation=y);var v=e.pstyle(r+"-arrow-color").value;o.colorFillStyle(t,v[0],v[1],v[2],s),o.colorStrokeStyle(t,v[0],v[1],v[2],s),o.drawArrowShape(e,t,d,p,u,g,n,i,a)}}},Tl.drawArrowShape=function(t,e,r,n,i,a,s,o,u){var h,d=this,p=this.usePaths()&&i!=="triangle-cross",f=!1,g=e,m={x:s,y:o},y=t.pstyle("arrow-scale").value,v=this.getArrowWidth(n,y),x=d.arrowShapes[i];if(p){var b=d.arrowPathCache=d.arrowPathCache||[],w=lc(i),T=b[w];T!=null?(h=e=T,f=!0):(h=e=new Path2D,b[w]=h)}f||(e.beginPath&&e.beginPath(),p?x.draw(e,1,0,{x:0,y:0},1):x.draw(e,v,u,m,n),e.closePath&&e.closePath()),e=g,p&&(e.translate(s,o),e.rotate(u),e.scale(v,v)),r!=="filled"&&r!=="both"||(p?e.fill(h):e.fill()),r!=="hollow"&&r!=="both"||(e.lineWidth=a/(p?v:1),e.lineJoin="miter",p?e.stroke(h):e.stroke()),p&&(e.scale(1/v,1/v),e.rotate(-u),e.translate(-s,-o))};var $Se={safeDrawImage:function(t,e,r,n,i,a,s,o,u,h){if(!(i<=0||a<=0||u<=0||h<=0))try{t.drawImage(e,r,n,i,a,s,o,u,h)}catch(d){kr(d)}},drawInscribedImage:function(t,e,r,n,i){var a=this,s=r.position(),o=s.x,u=s.y,h=r.cy().style(),d=h.getIndexedStyle.bind(h),p=d(r,"background-fit","value",n),f=d(r,"background-repeat","value",n),g=r.width(),m=r.height(),y=2*r.padding(),v=g+(d(r,"background-width-relative-to","value",n)==="inner"?0:y),x=m+(d(r,"background-height-relative-to","value",n)==="inner"?0:y),b=r._private.rscratch,w=d(r,"background-clip","value",n)==="node",T=d(r,"background-image-opacity","value",n)*i,k=d(r,"background-image-smoothing","value",n),C=r.pstyle("corner-radius").value;C!=="auto"&&(C=r.pstyle("corner-radius").pfValue);var E=e.width||e.cachedW,_=e.height||e.cachedH;E!=null&&_!=null||(document.body.appendChild(e),E=e.cachedW=e.width||e.offsetWidth,_=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var S=E,N=_;if(d(r,"background-width","value",n)!=="auto"&&(S=d(r,"background-width","units",n)==="%"?d(r,"background-width","pfValue",n)*v:d(r,"background-width","pfValue",n)),d(r,"background-height","value",n)!=="auto"&&(N=d(r,"background-height","units",n)==="%"?d(r,"background-height","pfValue",n)*x:d(r,"background-height","pfValue",n)),S!==0&&N!==0){if(p==="contain")S*=O=Math.min(v/S,x/N),N*=O;else if(p==="cover"){var O;S*=O=Math.max(v/S,x/N),N*=O}var B=o-v/2,L=d(r,"background-position-x","units",n),I=d(r,"background-position-x","pfValue",n);B+=L==="%"?(v-S)*I:I;var A=d(r,"background-offset-x","units",n),M=d(r,"background-offset-x","pfValue",n);B+=A==="%"?(v-S)*M:M;var D=u-x/2,R=d(r,"background-position-y","units",n),P=d(r,"background-position-y","pfValue",n);D+=R==="%"?(x-N)*P:P;var $=d(r,"background-offset-y","units",n),z=d(r,"background-offset-y","pfValue",n);D+=$==="%"?(x-N)*z:z,b.pathCache&&(B-=o,D-=u,o=0,u=0);var q=t.globalAlpha;t.globalAlpha=T;var W=a.getImgSmoothing(t),Q=!1;if(k==="no"&&W?(a.setImgSmoothing(t,!1),Q=!0):k!=="yes"||W||(a.setImgSmoothing(t,!0),Q=!0),f==="no-repeat")w&&(t.save(),b.pathCache?t.clip(b.pathCache):(a.nodeShapes[a.getNodeShape(r)].draw(t,o,u,v,x,C,b),t.clip())),a.safeDrawImage(t,e,0,0,E,_,B,D,S,N),w&&t.restore();else{var te=t.createPattern(e,f);t.fillStyle=te,a.nodeShapes[a.getNodeShape(r)].draw(t,o,u,v,x,C,b),t.translate(B,D),t.fill(),t.translate(-B,-D)}t.globalAlpha=q,Q&&a.setImgSmoothing(t,W)}}},Xc={};function sb(t,e,r,n,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,s=arguments.length>6?arguments[6]:void 0;t.beginPath(),t.moveTo(e+a,r),t.lineTo(e+n-a,r),t.quadraticCurveTo(e+n,r,e+n,r+a),t.lineTo(e+n,r+i-a),t.quadraticCurveTo(e+n,r+i,e+n-a,r+i),t.lineTo(e+a,r+i),t.quadraticCurveTo(e,r+i,e,r+i-a),t.lineTo(e,r+a),t.quadraticCurveTo(e,r,e+a,r),t.closePath(),s?t.stroke():t.fill()}Xc.eleTextBiggerThanMin=function(t,e){if(!e){var r=t.cy().zoom(),n=this.getPixelRatio(),i=Math.ceil(DN(r*n));e=Math.pow(2,i)}return!(t.pstyle("font-size").pfValue*e<t.pstyle("min-zoomed-font-size").pfValue)},Xc.drawElementText=function(t,e,r,n,i){var a=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5],s=this;if(n==null){if(a&&!s.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var o=e.pstyle("label");if(!o||!o.value)return;var u=s.getLabelJustification(e);t.textAlign=u,t.textBaseline="bottom"}else{var h=e.element()._private.rscratch.badLine,d=e.pstyle("label"),p=e.pstyle("source-label"),f=e.pstyle("target-label");if(h||(!d||!d.value)&&(!p||!p.value)&&(!f||!f.value))return;t.textAlign="center",t.textBaseline="bottom"}var g,m=!r;r&&(g=r,t.translate(-g.x1,-g.y1)),i==null?(s.drawText(t,e,null,m,a),e.isEdge()&&(s.drawText(t,e,"source",m,a),s.drawText(t,e,"target",m,a))):s.drawText(t,e,i,m,a),r&&t.translate(g.x1,g.y1)},Xc.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if((e=this.fontCaches[r]).context===t)return e;return e={context:t},this.fontCaches.push(e),e},Xc.setupTextStyle=function(t,e){var r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],n=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",a=e.pstyle("font-family").strValue,s=e.pstyle("font-weight").strValue,o=r?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*o,h=e.pstyle("color").value,d=e.pstyle("text-outline-color").value;t.font=n+" "+s+" "+i+" "+a,t.lineJoin="round",this.colorFillStyle(t,h[0],h[1],h[2],o),this.colorStrokeStyle(t,d[0],d[1],d[2],u)},l(sb,"roundRect"),Xc.getTextAngle=function(t,e){var r,n=t._private.rscratch,i=e?e+"-":"",a=t.pstyle(i+"text-rotation");if(a.strValue==="autorotate"){var s=ps(n,"labelAngle",e);r=t.isEdge()?s:0}else r=a.strValue==="none"?0:a.pfValue;return r},Xc.drawText=function(t,e,r){var n=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],a=e._private,s=a.rscratch,o=i?e.effectiveOpacity():1;if(!i||o!==0&&e.pstyle("text-opacity").value!==0){r==="main"&&(r=null);var u,h,d=ps(s,"labelX",r),p=ps(s,"labelY",r),f=this.getLabelText(e,r);if(f!=null&&f!==""&&!isNaN(d)&&!isNaN(p)){this.setupTextStyle(t,e,i);var g,m=r?r+"-":"",y=ps(s,"labelWidth",r),v=ps(s,"labelHeight",r),x=e.pstyle(m+"text-margin-x").pfValue,b=e.pstyle(m+"text-margin-y").pfValue,w=e.isEdge(),T=e.pstyle("text-halign").value,k=e.pstyle("text-valign").value;switch(w&&(T="center",k="center"),d+=x,p+=b,(g=n?this.getTextAngle(e,r):0)!==0&&(u=d,h=p,t.translate(u,h),t.rotate(g),d=0,p=0),k){case"top":break;case"center":p+=v/2;break;case"bottom":p+=v}var C=e.pstyle("text-background-opacity").value,E=e.pstyle("text-border-opacity").value,_=e.pstyle("text-border-width").pfValue,S=e.pstyle("text-background-padding").pfValue,N=e.pstyle("text-background-shape").strValue,O=N.indexOf("round")===0,B=2;if(C>0||_>0&&E>0){var L=d-S;switch(T){case"left":L-=y;break;case"center":L-=y/2}var I=p-v-S,A=y+2*S,M=v+2*S;if(C>0){var D=t.fillStyle,R=e.pstyle("text-background-color").value;t.fillStyle="rgba("+R[0]+","+R[1]+","+R[2]+","+C*o+")",O?sb(t,L,I,A,M,B):t.fillRect(L,I,A,M),t.fillStyle=D}if(_>0&&E>0){var P=t.strokeStyle,$=t.lineWidth,z=e.pstyle("text-border-color").value,q=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+z[0]+","+z[1]+","+z[2]+","+E*o+")",t.lineWidth=_,t.setLineDash)switch(q){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=_/4,t.setLineDash([]);break;case"solid":t.setLineDash([])}if(O?sb(t,L,I,A,M,B,"stroke"):t.strokeRect(L,I,A,M),q==="double"){var W=_/2;O?sb(t,L+W,I+W,A-2*W,M-2*W,B,"stroke"):t.strokeRect(L+W,I+W,A-2*W,M-2*W)}t.setLineDash&&t.setLineDash([]),t.lineWidth=$,t.strokeStyle=P}}var Q=2*e.pstyle("text-outline-width").pfValue;if(Q>0&&(t.lineWidth=Q),e.pstyle("text-wrap").value==="wrap"){var te=ps(s,"labelWrapCachedLines",r),oe=ps(s,"labelLineHeight",r),re=y/2,H=this.getLabelJustification(e);switch(H==="auto"||(T==="left"?H==="left"?d+=-y:H==="center"&&(d+=-re):T==="center"?H==="left"?d+=-re:H==="right"&&(d+=re):T==="right"&&(H==="center"?d+=re:H==="right"&&(d+=y))),k){case"top":case"center":case"bottom":p-=(te.length-1)*oe}for(var K=0;K<te.length;K++)Q>0&&t.strokeText(te[K],d,p),t.fillText(te[K],d,p),p+=oe}else Q>0&&t.strokeText(f,d,p),t.fillText(f,d,p);g!==0&&(t.rotate(-g),t.translate(-u,-h))}}};var xy={drawNode:function(t,e,r){var n,i,a=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],s=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5],u=this,h=e._private,d=h.rscratch,p=e.position();if(ct(p.x)&&ct(p.y)&&(!o||e.visible())){var f,g,m=o?e.effectiveOpacity():1,y=u.usePaths(),v=!1,x=e.padding();n=e.width()+2*x,i=e.height()+2*x,r&&(g=r,t.translate(-g.x1,-g.y1));for(var b=e.pstyle("background-image"),w=b.value,T=new Array(w.length),k=new Array(w.length),C=0,E=0;E<w.length;E++){var _=w[E],S=T[E]=_!=null&&_!=="none";if(S){var N=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",E);C++,k[E]=u.getCachedImage(_,N,(function(){h.backgroundTimestamp=Date.now(),e.emitAndNotify("background")}))}}var O=e.pstyle("background-blacken").value,B=e.pstyle("border-width").pfValue,L=e.pstyle("background-opacity").value*m,I=e.pstyle("border-color").value,A=e.pstyle("border-style").value,M=e.pstyle("border-join").value,D=e.pstyle("border-cap").value,R=e.pstyle("border-position").value,P=e.pstyle("border-dash-pattern").pfValue,$=e.pstyle("border-dash-offset").pfValue,z=e.pstyle("border-opacity").value*m,q=e.pstyle("outline-width").pfValue,W=e.pstyle("outline-color").value,Q=e.pstyle("outline-style").value,te=e.pstyle("outline-opacity").value*m,oe=e.pstyle("outline-offset").value,re=e.pstyle("corner-radius").value;re!=="auto"&&(re=e.pstyle("corner-radius").pfValue);var H=l((function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:L;u.eleFillStyle(t,e,ge)}),"setupShapeColor"),K=l((function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:z;u.colorStrokeStyle(t,I[0],I[1],I[2],ge)}),"setupBorderColor"),ie=l((function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:te;u.colorStrokeStyle(t,W[0],W[1],W[2],ge)}),"setupOutlineColor"),ne=l((function(ge,G,le,V){var me,he=u.nodePathCache=u.nodePathCache||[],_e=Sae(le==="polygon"?le+","+V.join(","):le,""+G,""+ge,""+re),Ce=he[_e],Te=!1;return Ce!=null?(me=Ce,Te=!0,d.pathCache=me):(me=new Path2D,he[_e]=d.pathCache=me),{path:me,cacheHit:Te}}),"getPath"),J=e.pstyle("shape").strValue,ue=e.pstyle("shape-polygon-points").pfValue;if(y){t.translate(p.x,p.y);var Y=ne(n,i,J,ue);f=Y.path,v=Y.cacheHit}var se=l((function(){if(!v){var ge=p;y&&(ge={x:0,y:0}),u.nodeShapes[u.getNodeShape(e)].draw(f||t,ge.x,ge.y,n,i,re,d)}y?t.fill(f):t.fill()}),"drawShape"),de=l((function(){for(var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m,G=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],le=h.backgrounding,V=0,me=0;me<k.length;me++){var he=e.cy().style().getIndexedStyle(e,"background-image-containment","value",me);G&&he==="over"||!G&&he==="inside"?V++:T[me]&&k[me].complete&&!k[me].error&&(V++,u.drawInscribedImage(t,k[me],e,me,ge))}h.backgrounding=V!==C,le!==h.backgrounding&&e.updateStyle(!1)}),"drawImages"),ce=l((function(){var ge=arguments.length>0&&arguments[0]!==void 0&&arguments[0],G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m;u.hasPie(e)&&(u.drawPie(t,e,G),ge&&(y||u.nodeShapes[u.getNodeShape(e)].draw(t,p.x,p.y,n,i,re,d)))}),"drawPie"),Ee=l((function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m,G=(O>0?O:-O)*ge,le=O>0?0:255;O!==0&&(u.colorFillStyle(t,le,le,le,G),y?t.fill(f):t.fill())}),"darken"),ve=l((function(){if(B>0){if(t.lineWidth=B,t.lineCap=D,t.lineJoin=M,t.setLineDash)switch(A){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash(P),t.lineDashOffset=$;break;case"solid":case"double":t.setLineDash([])}if(R!=="center"){if(t.save(),t.lineWidth*=2,R==="inside")y?t.clip(f):t.clip();else{var ge=new Path2D;ge.rect(-n/2-B,-i/2-B,n+2*B,i+2*B),ge.addPath(f),t.clip(ge,"evenodd")}y?t.stroke(f):t.stroke(),t.restore()}else y?t.stroke(f):t.stroke();if(A==="double"){t.lineWidth=B/3;var G=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",y?t.stroke(f):t.stroke(),t.globalCompositeOperation=G}t.setLineDash&&t.setLineDash([])}}),"drawBorder"),De=l((function(){if(q>0){if(t.lineWidth=q,t.lineCap="butt",t.setLineDash)switch(Q){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}var ge=p;y&&(ge={x:0,y:0});var G=u.getNodeShape(e),le=B;R==="inside"&&(le=0),R==="outside"&&(le*=2);var V,me=(n+le+(q+oe))/n,he=(i+le+(q+oe))/i,_e=n*me,Ce=i*he,Te=u.nodeShapes[G].points;if(y&&(V=ne(_e,Ce,G,Te).path),G==="ellipse")u.drawEllipsePath(V||t,ge.x,ge.y,_e,Ce);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(G)){var Re=0,Le=0,ot=0;G==="round-diamond"?Re=1.4*(le+oe+q):G==="round-heptagon"?(Re=1.075*(le+oe+q),ot=-(le/2+oe+q)/35):G==="round-hexagon"?Re=1.12*(le+oe+q):G==="round-pentagon"?(Re=1.13*(le+oe+q),ot=-(le/2+oe+q)/15):G==="round-tag"?(Re=1.12*(le+oe+q),Le=.07*(le/2+q+oe)):G==="round-triangle"&&(Re=(le+oe+q)*(Math.PI/2),ot=-(le+oe/2+q)/Math.PI),Re!==0&&(_e=n*(me=(n+Re)/n),["round-hexagon","round-tag"].includes(G)||(Ce=i*(he=(i+Re)/i)));for(var Tt=_e/2,Fe=Ce/2,gt=(re=re==="auto"?Pae(_e,Ce):re)+(le+q+oe)/2,Qe=new Array(Te.length/2),Be=new Array(Te.length/2),rt=0;rt<Te.length/2;rt++)Qe[rt]={x:ge.x+Le+Tt*Te[2*rt],y:ge.y+ot+Fe*Te[2*rt+1]};var lt,Je,_t,it,pt=Qe.length;for(Je=Qe[pt-1],lt=0;lt<pt;lt++)_t=Qe[lt%pt],it=Qe[(lt+1)%pt],Be[lt]=uk(Je,_t,it,gt),Je=_t,_t=it;u.drawRoundPolygonPath(V||t,ge.x+Le,ge.y+ot,n*me,i*he,Te,Be)}else["roundrectangle","round-rectangle"].includes(G)?(re=re==="auto"?rh(_e,Ce):re,u.drawRoundRectanglePath(V||t,ge.x,ge.y,_e,Ce,re+(le+q+oe)/2)):["cutrectangle","cut-rectangle"].includes(G)?(re=re==="auto"?PN():re,u.drawCutRectanglePath(V||t,ge.x,ge.y,_e,Ce,null,re+(le+q+oe)/4)):["bottomroundrectangle","bottom-round-rectangle"].includes(G)?(re=re==="auto"?rh(_e,Ce):re,u.drawBottomRoundRectanglePath(V||t,ge.x,ge.y,_e,Ce,re+(le+q+oe)/2)):G==="barrel"?u.drawBarrelPath(V||t,ge.x,ge.y,_e,Ce):G.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(G)?(Te=s6(o6(Te,(le+q+oe)/n)),u.drawPolygonPath(V||t,ge.x,ge.y,n,i,Te)):(Te=s6(o6(Te,-((le+q+oe)/n))),u.drawPolygonPath(V||t,ge.x,ge.y,n,i,Te));if(y?t.stroke(V):t.stroke(),Q==="double"){t.lineWidth=le/3;var Ye=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",y?t.stroke(V):t.stroke(),t.globalCompositeOperation=Ye}t.setLineDash&&t.setLineDash([])}}),"drawOutline"),Ue=l((function(){s&&u.drawNodeOverlay(t,e,p,n,i)}),"drawOverlay"),ze=l((function(){s&&u.drawNodeUnderlay(t,e,p,n,i)}),"drawUnderlay"),Ge=l((function(){u.drawElementText(t,e,null,a)}),"drawText"),$e=e.pstyle("ghost").value==="yes";if($e){var Pe=e.pstyle("ghost-offset-x").pfValue,j=e.pstyle("ghost-offset-y").pfValue,pe=e.pstyle("ghost-opacity").value,X=pe*m;t.translate(Pe,j),ie(),De(),H(pe*L),se(),de(X,!0),K(pe*z),ve(),ce(O!==0||B!==0),de(X,!1),Ee(X),t.translate(-Pe,-j)}y&&t.translate(-p.x,-p.y),ze(),y&&t.translate(p.x,p.y),ie(),De(),H(),se(),de(m,!0),K(),ve(),ce(O!==0||B!==0),de(m,!1),Ee(),y&&t.translate(-p.x,-p.y),Ge(),Ue(),r&&t.translate(g.x1,g.y1)}}},lB=l((function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(e,r,n,i,a){if(r.visible()){var s=r.pstyle("".concat(t,"-padding")).pfValue,o=r.pstyle("".concat(t,"-opacity")).value,u=r.pstyle("".concat(t,"-color")).value,h=r.pstyle("".concat(t,"-shape")).value,d=r.pstyle("".concat(t,"-corner-radius")).value;if(o>0){if(n=n||r.position(),i==null||a==null){var p=r.padding();i=r.width()+2*p,a=r.height()+2*p}this.colorFillStyle(e,u[0],u[1],u[2],o),this.nodeShapes[h].draw(e,n.x,n.y,i+2*s,a+2*s,d),e.fill()}}}}),"drawNodeOverlayUnderlay");xy.drawNodeOverlay=lB("overlay"),xy.drawNodeUnderlay=lB("underlay"),xy.hasPie=function(t){return(t=t[0])._private.hasPie},xy.drawPie=function(t,e,r,n){e=e[0],n=n||e.position();var i=e.cy().style(),a=e.pstyle("pie-size"),s=n.x,o=n.y,u=e.width(),h=e.height(),d=Math.min(u,h)/2,p=0;this.usePaths()&&(s=0,o=0),a.units==="%"?d*=a.pfValue:a.pfValue!==void 0&&(d=a.pfValue/2);for(var f=1;f<=i.pieBackgroundN;f++){var g=e.pstyle("pie-"+f+"-background-size").value,m=e.pstyle("pie-"+f+"-background-color").value,y=e.pstyle("pie-"+f+"-background-opacity").value*r,v=g/100;v+p>1&&(v=1-p);var x=1.5*Math.PI+2*Math.PI*p,b=x+2*Math.PI*v;g===0||p>=1||p+v>1||(t.beginPath(),t.moveTo(s,o),t.arc(s,o,d,x,b),t.closePath(),this.colorFillStyle(t,m[0],m[1],m[2],y),t.fill(),p+=v)}};var qm,Ii={};function US(t,e,r){var n=t.createShader(e);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(n));return n}function doe(t,e,r){var n=US(t,t.VERTEX_SHADER,e),i=US(t,t.FRAGMENT_SHADER,r),a=t.createProgram();if(t.attachShader(a,n),t.attachShader(a,i),t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS))throw new Error("Could not initialize shaders");return a}function poe(t,e,r){r===void 0&&(r=e);var n=t.makeOffscreenCanvas(e,r),i=n.context=n.getContext("2d");return n.clear=function(){return i.clearRect(0,0,n.width,n.height)},n.clear(),n}function hk(t){var e=t.pixelRatio,r=t.cy.zoom(),n=t.cy.pan();return{zoom:r*e,pan:{x:n.x*e,y:n.y*e}}}function m4(t,e,r,n,i){var a=n*r+e.x,s=i*r+e.y;return[a,s=Math.round(t.canvasHeight-s)]}function by(t,e,r){var n=t[0]/255,i=t[1]/255,a=t[2]/255,s=e,o=r||new Array(4);return o[0]=n*s,o[1]=i*s,o[2]=a*s,o[3]=s,o}function wy(t,e){var r=e||new Array(4);return r[0]=(t>>0&255)/255,r[1]=(t>>8&255)/255,r[2]=(t>>16&255)/255,r[3]=(t>>24&255)/255,r}function foe(t){return t[0]+(t[1]<<8)+(t[2]<<16)+(t[3]<<24)}function goe(t,e){var r=t.createTexture();return r.buffer=function(n){t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)},r.deleteTexture=function(){t.deleteTexture(r)},r}function JN(t,e){switch(e){case"float":return[1,t.FLOAT,4];case"vec2":return[2,t.FLOAT,4];case"vec3":return[3,t.FLOAT,4];case"vec4":return[4,t.FLOAT,4];case"int":return[1,t.INT,4];case"ivec2":return[2,t.INT,4]}}function eI(t,e,r){switch(e){case t.FLOAT:return new Float32Array(r);case t.INT:return new Int32Array(r)}}function moe(t,e,r,n,i,a){switch(e){case t.FLOAT:return new Float32Array(r.buffer,a*n,i);case t.INT:return new Int32Array(r.buffer,a*n,i)}}function yoe(t,e,r,n){var i=yn(JN(t,e),2),a=i[0],s=i[1],o=eI(t,s,n),u=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,o,t.STATIC_DRAW),s===t.FLOAT?t.vertexAttribPointer(r,a,s,!1,0,0):s===t.INT&&t.vertexAttribIPointer(r,a,s,0,0),t.enableVertexAttribArray(r),t.bindBuffer(t.ARRAY_BUFFER,null),u}function Ki(t,e,r,n){var i=yn(JN(t,r),3),a=i[0],s=i[1],o=i[2],u=eI(t,s,e*a),h=a*o,d=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,d),t.bufferData(t.ARRAY_BUFFER,e*h,t.DYNAMIC_DRAW),t.enableVertexAttribArray(n),s===t.FLOAT?t.vertexAttribPointer(n,a,s,!1,h,0):s===t.INT&&t.vertexAttribIPointer(n,a,s,h,0),t.vertexAttribDivisor(n,1),t.bindBuffer(t.ARRAY_BUFFER,null);for(var p=new Array(e),f=0;f<e;f++)p[f]=moe(t,s,u,h,a,f);return d.dataArray=u,d.stride=h,d.size=a,d.getView=function(g){return p[g]},d.setPoint=function(g,m,y){var v=p[g];v[0]=m,v[1]=y},d.bufferSubData=function(g){t.bindBuffer(t.ARRAY_BUFFER,d),g?t.bufferSubData(t.ARRAY_BUFFER,0,u,0,g*a):t.bufferSubData(t.ARRAY_BUFFER,0,u)},d}function voe(t){var e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.bindFramebuffer(t.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,i){t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,i,0,t.RGBA,t.UNSIGNED_BYTE,null)},e}Ii.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),r=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/r},Ii.paintCache=function(t){for(var e,r=this.paintCaches=this.paintCaches||[],n=!0,i=0;i<r.length;i++)if((e=r[i]).context===t){n=!1;break}return n&&(e={context:t},r.push(e)),e},Ii.createGradientStyleFor=function(t,e,r,n,i){var a,s=this.usePaths(),o=r.pstyle(e+"-gradient-stop-colors").value,u=r.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(r.isEdge()){var h=r.sourceEndpoint(),d=r.targetEndpoint(),p=r.midpoint(),f=th(h,p),g=th(d,p);a=t.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(f,g))}else{var m=s?{x:0,y:0}:r.position(),y=r.paddedWidth(),v=r.paddedHeight();a=t.createRadialGradient(m.x,m.y,0,m.x,m.y,Math.max(y,v))}else if(r.isEdge()){var x=r.sourceEndpoint(),b=r.targetEndpoint();a=t.createLinearGradient(x.x,x.y,b.x,b.y)}else{var w=s?{x:0,y:0}:r.position(),T=r.paddedWidth()/2,k=r.paddedHeight()/2;switch(r.pstyle("background-gradient-direction").value){case"to-bottom":a=t.createLinearGradient(w.x,w.y-k,w.x,w.y+k);break;case"to-top":a=t.createLinearGradient(w.x,w.y+k,w.x,w.y-k);break;case"to-left":a=t.createLinearGradient(w.x+T,w.y,w.x-T,w.y);break;case"to-right":a=t.createLinearGradient(w.x-T,w.y,w.x+T,w.y);break;case"to-bottom-right":case"to-right-bottom":a=t.createLinearGradient(w.x-T,w.y-k,w.x+T,w.y+k);break;case"to-top-right":case"to-right-top":a=t.createLinearGradient(w.x-T,w.y+k,w.x+T,w.y-k);break;case"to-bottom-left":case"to-left-bottom":a=t.createLinearGradient(w.x+T,w.y-k,w.x-T,w.y+k);break;case"to-top-left":case"to-left-top":a=t.createLinearGradient(w.x+T,w.y+k,w.x-T,w.y-k)}}if(!a)return null;for(var C=u.length===o.length,E=o.length,_=0;_<E;_++)a.addColorStop(C?u[_]:_/(E-1),"rgba("+o[_][0]+","+o[_][1]+","+o[_][2]+","+i+")");return a},Ii.gradientFillStyle=function(t,e,r,n){var i=this.createGradientStyleFor(t,"background",e,r,n);if(!i)return null;t.fillStyle=i},Ii.colorFillStyle=function(t,e,r,n,i){t.fillStyle="rgba("+e+","+r+","+n+","+i+")"},Ii.eleFillStyle=function(t,e,r){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(t,e,n,r);else{var i=e.pstyle("background-color").value;this.colorFillStyle(t,i[0],i[1],i[2],r)}},Ii.gradientStrokeStyle=function(t,e,r,n){var i=this.createGradientStyleFor(t,"line",e,r,n);if(!i)return null;t.strokeStyle=i},Ii.colorStrokeStyle=function(t,e,r,n,i){t.strokeStyle="rgba("+e+","+r+","+n+","+i+")"},Ii.eleStrokeStyle=function(t,e,r){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(t,e,n,r);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(t,i[0],i[1],i[2],r)}},Ii.matchCanvasSize=function(t){var e=this,r=e.data,n=e.findContainerClientCoords(),i=n[2],a=n[3],s=e.getPixelRatio(),o=e.motionBlurPxRatio;t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]&&t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG]||(s=o);var u,h=i*s,d=a*s;if(h!==e.canvasWidth||d!==e.canvasHeight){e.fontCaches=null;var p=r.canvasContainer;p.style.width=i+"px",p.style.height=a+"px";for(var f=0;f<e.CANVAS_LAYERS;f++)(u=r.canvases[f]).width=h,u.height=d,u.style.width=i+"px",u.style.height=a+"px";for(f=0;f<e.BUFFER_COUNT;f++)(u=r.bufferCanvases[f]).width=h,u.height=d,u.style.width=i+"px",u.style.height=a+"px";e.textureMult=1,s<=1&&(u=r.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,u.width=h*e.textureMult,u.height=d*e.textureMult),e.canvasWidth=h,e.canvasHeight=d,e.pixelRatio=s}},Ii.renderTo=function(t,e,r,n){this.render({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})},Ii.clearCanvas=function(){var t=this,e=t.data;function r(n){n.clearRect(0,0,t.canvasWidth,t.canvasHeight)}l(r,"clear"),r(e.contexts[t.NODE]),r(e.contexts[t.DRAG])},Ii.render=function(t){var e=this;t=t||Iae();var r=e.cy,n=t.forcedContext,i=t.drawAllLayers,a=t.drawOnlyNodeLayer,s=t.forcedZoom,o=t.forcedPan,u=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,h=e.data,d=h.canvasNeedsRedraw,p=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),f=t.motionBlur!==void 0?t.motionBlur:e.motionBlur,g=e.motionBlurPxRatio,m=r.hasCompoundNodes(),y=e.hoverData.draggingEles,v=!(!e.hoverData.selecting&&!e.touchData.selecting),x=f=f&&!n&&e.motionBlurEnabled&&!v;n||(e.prevPxRatio!==u&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=u),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),f&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(x=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!p&&(d[e.NODE]=!0,d[e.SELECT_BOX]=!0);var b=r.style(),w=r.zoom(),T=s!==void 0?s:w,k=r.pan(),C={x:k.x,y:k.y},E={zoom:w,pan:{x:k.x,y:k.y}},_=e.prevViewport;_===void 0||E.zoom!==_.zoom||E.pan.x!==_.pan.x||E.pan.y!==_.pan.y||y&&!m||(e.motionBlurPxRatio=1),o&&(C=o),T*=u,C.x*=u,C.y*=u;var S=e.getCachedZSortedEles();function N(re,H,K,ie,ne){var J=re.globalCompositeOperation;re.globalCompositeOperation="destination-out",e.colorFillStyle(re,255,255,255,e.motionBlurTransparency),re.fillRect(H,K,ie,ne),re.globalCompositeOperation=J}function O(re,H){var K,ie,ne,J;e.clearingMotionBlur||re!==h.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]&&re!==h.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]?(K=C,ie=T,ne=e.canvasWidth,J=e.canvasHeight):(K={x:k.x*g,y:k.y*g},ie=w*g,ne=e.canvasWidth*g,J=e.canvasHeight*g),re.setTransform(1,0,0,1,0,0),H==="motionBlur"?N(re,0,0,ne,J):n||H!==void 0&&!H||re.clearRect(0,0,ne,J),i||(re.translate(K.x,K.y),re.scale(ie,ie)),o&&re.translate(o.x,o.y),s&&re.scale(s,s)}if(l(N,"mbclear"),l(O,"setContextTransform"),p||(e.textureDrawLastFrame=!1),p){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=r.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var B=e.data.bufferContexts[e.TEXTURE_BUFFER];B.setTransform(1,0,0,1,0,0),B.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:B,drawOnlyNodeLayer:!0,forcedPxRatio:u*e.textureMult}),(E=e.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:e.canvasWidth,height:e.canvasHeight}).mpan={x:(0-E.pan.x)/E.zoom,y:(0-E.pan.y)/E.zoom}}d[e.DRAG]=!1,d[e.NODE]=!1;var L=h.contexts[e.NODE],I=e.textureCache.texture;E=e.textureCache.viewport,L.setTransform(1,0,0,1,0,0),f?N(L,0,0,E.width,E.height):L.clearRect(0,0,E.width,E.height);var A=b.core("outside-texture-bg-color").value,M=b.core("outside-texture-bg-opacity").value;e.colorFillStyle(L,A[0],A[1],A[2],M),L.fillRect(0,0,E.width,E.height),w=r.zoom(),O(L,!1),L.clearRect(E.mpan.x,E.mpan.y,E.width/E.zoom/u,E.height/E.zoom/u),L.drawImage(I,E.mpan.x,E.mpan.y,E.width/E.zoom/u,E.height/E.zoom/u)}else e.textureOnViewport&&!n&&(e.textureCache=null);var D=r.extent(),R=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),P=e.hideEdgesOnViewport&&R,$=[];if($[e.NODE]=!d[e.NODE]&&f&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,$[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),$[e.DRAG]=!d[e.DRAG]&&f&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,$[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),d[e.NODE]||i||a||$[e.NODE]){var z=f&&!$[e.NODE]&&g!==1;O(L=n||(z?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:h.contexts[e.NODE]),f&&!z?"motionBlur":void 0),P?e.drawCachedNodes(L,S.nondrag,u,D):e.drawLayeredElements(L,S.nondrag,u,D),e.debug&&e.drawDebugPoints(L,S.nondrag),i||f||(d[e.NODE]=!1)}if(!a&&(d[e.DRAG]||i||$[e.DRAG])&&(z=f&&!$[e.DRAG]&&g!==1,O(L=n||(z?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:h.contexts[e.DRAG]),f&&!z?"motionBlur":void 0),P?e.drawCachedNodes(L,S.drag,u,D):e.drawCachedElements(L,S.drag,u,D),e.debug&&e.drawDebugPoints(L,S.drag),i||f||(d[e.DRAG]=!1)),this.drawSelectionRectangle(t,O),f&&g!==1){var q=h.contexts[e.NODE],W=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],Q=h.contexts[e.DRAG],te=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],oe=l((function(re,H,K){re.setTransform(1,0,0,1,0,0),K||!x?re.clearRect(0,0,e.canvasWidth,e.canvasHeight):N(re,0,0,e.canvasWidth,e.canvasHeight);var ie=g;re.drawImage(H,0,0,e.canvasWidth*ie,e.canvasHeight*ie,0,0,e.canvasWidth,e.canvasHeight)}),"drawMotionBlur");(d[e.NODE]||$[e.NODE])&&(oe(q,W,$[e.NODE]),d[e.NODE]=!1),(d[e.DRAG]||$[e.DRAG])&&(oe(Q,te,$[e.DRAG]),d[e.DRAG]=!1)}e.prevViewport=E,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),f&&(e.motionBlurTimeout=setTimeout((function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!p,e.mbFrames=0,d[e.NODE]=!0,d[e.DRAG]=!0,e.redraw()}),100)),n||r.emit("render")},Ii.drawSelectionRectangle=function(t,e){var r=this,n=r.cy,i=r.data,a=n.style(),s=t.drawOnlyNodeLayer,o=t.drawAllLayers,u=i.canvasNeedsRedraw,h=t.forcedContext;if(r.showFps||!s&&u[r.SELECT_BOX]&&!o){var d=h||i.contexts[r.SELECT_BOX];if(e(d),r.selection[4]==1&&(r.hoverData.selecting||r.touchData.selecting)){var p=r.cy.zoom(),f=a.core("selection-box-border-width").value/p;d.lineWidth=f,d.fillStyle="rgba("+a.core("selection-box-color").value[0]+","+a.core("selection-box-color").value[1]+","+a.core("selection-box-color").value[2]+","+a.core("selection-box-opacity").value+")",d.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),f>0&&(d.strokeStyle="rgba("+a.core("selection-box-border-color").value[0]+","+a.core("selection-box-border-color").value[1]+","+a.core("selection-box-border-color").value[2]+","+a.core("selection-box-opacity").value+")",d.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]))}if(i.bgActivePosistion&&!r.hoverData.selecting){p=r.cy.zoom();var g=i.bgActivePosistion;d.fillStyle="rgba("+a.core("active-bg-color").value[0]+","+a.core("active-bg-color").value[1]+","+a.core("active-bg-color").value[2]+","+a.core("active-bg-opacity").value+")",d.beginPath(),d.arc(g.x,g.y,a.core("active-bg-size").pfValue/p,0,2*Math.PI),d.fill()}var m=r.lastRedrawTime;if(r.showFps&&m){m=Math.round(m);var y=Math.round(1e3/m),v="1 frame = "+m+" ms = "+y+" fps";if(d.setTransform(1,0,0,1,0,0),d.fillStyle="rgba(255, 0, 0, 0.75)",d.strokeStyle="rgba(255, 0, 0, 0.75)",d.font="30px Arial",!qm){var x=d.measureText(v);qm=x.actualBoundingBoxAscent}d.fillText(v,0,qm),d.strokeRect(0,qm+10,250,20),d.fillRect(0,qm+10,250*Math.min(y/60,1),20)}o||(u[r.SELECT_BOX]=!1)}},l(US,"compileShader"),l(doe,"createProgram"),l(poe,"createTextureCanvas"),l(hk,"getEffectivePanZoom"),l(m4,"modelToRenderedPosition"),l(by,"toWebGLColor"),l(wy,"indexToVec4"),l(foe,"vec4ToIndex"),l(goe,"createTexture"),l(JN,"getTypeInfo"),l(eI,"createTypedArray"),l(moe,"createTypedArrayView"),l(yoe,"createBufferStaticDraw"),l(Ki,"createBufferDynamicDraw"),l(voe,"createPickingFrameBuffer");var cB=typeof Float32Array<"u"?Float32Array:Array;function ip(){var t=new cB(9);return cB!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function tI(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function xoe(t,e,r){var n=e[0],i=e[1],a=e[2],s=e[3],o=e[4],u=e[5],h=e[6],d=e[7],p=e[8],f=r[0],g=r[1],m=r[2],y=r[3],v=r[4],x=r[5],b=r[6],w=r[7],T=r[8];return t[0]=f*n+g*s+m*h,t[1]=f*i+g*o+m*d,t[2]=f*a+g*u+m*p,t[3]=y*n+v*s+x*h,t[4]=y*i+v*o+x*d,t[5]=y*a+v*u+x*p,t[6]=b*n+w*s+T*h,t[7]=b*i+w*o+T*d,t[8]=b*a+w*u+T*p,t}function lv(t,e,r){var n=e[0],i=e[1],a=e[2],s=e[3],o=e[4],u=e[5],h=e[6],d=e[7],p=e[8],f=r[0],g=r[1];return t[0]=n,t[1]=i,t[2]=a,t[3]=s,t[4]=o,t[5]=u,t[6]=f*n+g*s+h,t[7]=f*i+g*o+d,t[8]=f*a+g*u+p,t}function rI(t,e,r){var n=e[0],i=e[1],a=e[2],s=e[3],o=e[4],u=e[5],h=e[6],d=e[7],p=e[8],f=Math.sin(r),g=Math.cos(r);return t[0]=g*n+f*s,t[1]=g*i+f*o,t[2]=g*a+f*u,t[3]=g*s-f*n,t[4]=g*o-f*i,t[5]=g*u-f*a,t[6]=h,t[7]=d,t[8]=p,t}function dk(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function boe(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),l(ip,"create"),l(tI,"identity"),l(xoe,"multiply"),l(lv,"translate"),l(rI,"rotate"),l(dk,"scale"),l(boe,"projection");var n2={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},jm=Jn({getKey:null,drawElement:null,getBoundingBox:null,getRotation:null,getRotationPoint:null,getRotationOffset:null,isVisible:null,getPadding:null}),FSe=(function(){function t(e,r){cl(this,t),this.debugID=Math.floor(1e4*Math.random()),this.r=e,this.atlasSize=r.webglTexSize,this.rows=r.webglTexRows,this.enableWrapping=r.enableWrapping,this.texHeight=Math.floor(this.atlasSize/this.rows),this.maxTexWidth=this.atlasSize,this.texture=null,this.canvas=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=r.createTextureCanvas(e,this.atlasSize,this.atlasSize),this.scratch=r.createTextureCanvas(e,this.atlasSize,this.texHeight,"scratch")}return l(t,"Atlas"),ul(t,[{key:"getKeys",value:l((function(){return new Set(this.keyToLocation.keys())}),"getKeys")},{key:"getScale",value:l((function(e){var r=e.w,n=e.h,i=this.texHeight,a=this.maxTexWidth,s=i/n,o=r*s,u=n*s;return o>a&&(o=r*(s=a/r),u=n*s),{scale:s,texW:o,texH:u}}),"getScale")},{key:"draw",value:l((function(e,r,n){var i=this,a=this.atlasSize,s=this.rows,o=this.texHeight,u=this.getScale(r),h=u.scale,d=u.texW,p=u.texH,f=[null,null],g=l((function(x,b){if(n&&b){var w=b.context,T=x.x,k=x.row,C=T,E=o*k;w.save(),w.translate(C,E),w.scale(h,h),n(w,r),w.restore()}}),"drawAt"),m=l((function(){g(i.freePointer,i.canvas),f[0]={x:i.freePointer.x,y:i.freePointer.row*o,w:d,h:p},f[1]={x:i.freePointer.x+d,y:i.freePointer.row*o,w:0,h:p},i.freePointer.x+=d,i.freePointer.x==a&&(i.freePointer.x=0,i.freePointer.row++)}),"drawNormal"),y=l((function(){var x=i.scratch,b=i.canvas;x.clear(),g({x:0,row:0},x);var w=a-i.freePointer.x,T=d-w,k=o,C=i.freePointer.x,E=i.freePointer.row*o,_=w;b.context.drawImage(x,0,0,_,k,C,E,_,k),f[0]={x:C,y:E,w:_,h:p};var S=w,N=(i.freePointer.row+1)*o,O=T;b&&b.context.drawImage(x,S,0,O,k,0,N,O,k),f[1]={x:0,y:N,w:O,h:p},i.freePointer.x=T,i.freePointer.row++}),"drawWrapped"),v=l((function(){i.freePointer.x=0,i.freePointer.row++}),"moveToStartOfNextRow");if(this.freePointer.x+d<=a)m();else{if(this.freePointer.row>=s-1)return!1;this.freePointer.x===a?(v(),m()):this.enableWrapping?y():(v(),m())}return this.keyToLocation.set(e,f),this.needsBuffer=!0,f}),"draw")},{key:"getOffsets",value:l((function(e){return this.keyToLocation.get(e)}),"getOffsets")},{key:"isEmpty",value:l((function(){return this.freePointer.x===0&&this.freePointer.row===0}),"isEmpty")},{key:"canFit",value:l((function(e){var r=this.atlasSize,n=this.rows,i=this.getScale(e).texW;return!(this.freePointer.x+i>r)||this.freePointer.row<n-1}),"canFit")},{key:"bufferIfNeeded",value:l((function(e){this.texture||(this.texture=goe(e,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1)}),"bufferIfNeeded")},{key:"dispose",value:l((function(){this.texture&&(this.texture.deleteTexture(),this.texture=null,this.needsBuffer=!0)}),"dispose")}]),t})(),zSe=(function(){function t(e,r){cl(this,t),this.r=e,this.opts=r,this.keyToIds=new Map,this.idToKey=new Map,this.atlases=[],this.styleKeyToAtlas=new Map,this.styleKeyNeedsRedraw=new Set,this.forceGC=!1}return l(t,"AtlasCollection"),ul(t,[{key:"getKeys",value:l((function(){return new Set(this.styleKeyToAtlas.keys())}),"getKeys")},{key:"getIdsFor",value:l((function(e){var r=this.keyToIds.get(e);return r||(r=new Set,this.keyToIds.set(e,r)),r}),"getIdsFor")},{key:"_createAtlas",value:l((function(){var e=this.r,r=this.opts;return new FSe(e,r)}),"_createAtlas")},{key:"_getScratchCanvas",value:l((function(){if(!this.scratch){var e=this.r,r=this.opts,n=r.webglTexSize,i=Math.floor(n/r.webglTexRows);this.scratch=r.createTextureCanvas(e,n,i,"scratch")}return this.scratch}),"_getScratchCanvas")},{key:"draw",value:l((function(e,r,n,i){if(this.styleKeyNeedsRedraw.has(r)){this.styleKeyNeedsRedraw.delete(r),this.deleteKey(e,r);var a=this.styleKeyToAtlas.get(r);a&&(a.forceGC=!0),this.styleKeyToAtlas.delete(r)}var s=this.styleKeyToAtlas.get(r);return s||((s=this.atlases[this.atlases.length-1])&&s.canFit(n)||(s=this._createAtlas(),this.atlases.push(s)),s.draw(r,n,i),this.styleKeyToAtlas.set(r,s),this.getIdsFor(r).add(e),this.idToKey.set(e,r)),s}),"draw")},{key:"getAtlas",value:l((function(e){return this.styleKeyToAtlas.get(e)}),"getAtlas")},{key:"hasAtlas",value:l((function(e){return this.styleKeyToAtlas.has(e)}),"hasAtlas")},{key:"deleteKey",value:l((function(e,r){this.idToKey.delete(e),this.getIdsFor(r).delete(e)}),"deleteKey")},{key:"checkKeyIsInvalid",value:l((function(e,r){if(!this.idToKey.has(e))return!1;var n=this.idToKey.get(e);return n!=r&&(this.deleteKey(e,n),!0)}),"checkKeyIsInvalid")},{key:"_getKeysToCollect",value:l((function(){var e,r=new Set,n=wa(this.styleKeyToAtlas.keys());try{for(n.s();!(e=n.n()).done;){var i=e.value;this.getIdsFor(i).size==0&&r.add(i)}}catch(a){n.e(a)}finally{n.f()}return r}),"_getKeysToCollect")},{key:"gc",value:l((function(){var e=this,r=this.atlases.some((function(d){return d.forceGC})),n=this._getKeysToCollect();if(n.size!==0||r){var i,a=[],s=new Map,o=null,u=wa(this.atlases);try{var h=l((function(){var d=i.value,p=d.getKeys(),f=woe(n,p);if(f.size===0&&!d.forceGC)return a.push(d),p.forEach((function(w){return s.set(w,d)})),"continue";o||(o=e._createAtlas(),a.push(o));var g,m=wa(p);try{for(m.s();!(g=m.n()).done;){var y=g.value;if(!f.has(y)){var v=yn(d.getOffsets(y),2),x=v[0],b=v[1];o.canFit({w:x.w+b.w,h:x.h})||(o=e._createAtlas(),a.push(o)),e._copyTextureToNewAtlas(y,d,o),s.set(y,o)}}}catch(w){m.e(w)}finally{m.f()}}),"_loop");for(u.s();!(i=u.n()).done;)h()}catch(d){u.e(d)}finally{u.f()}this.atlases=a,this.styleKeyToAtlas=s}else console.log("nothing to garbage collect")}),"gc")},{key:"_copyTextureToNewAtlas",value:l((function(e,r,n){var i=yn(r.getOffsets(e),2),a=i[0],s=i[1];if(s.w===0)n.draw(e,a,(function(d){d.drawImage(r.canvas,a.x,a.y,a.w,a.h,0,0,a.w,a.h)}));else{var o=this._getScratchCanvas();o.clear(),o.context.drawImage(r.canvas,a.x,a.y,a.w,a.h,0,0,a.w,a.h),o.context.drawImage(r.canvas,s.x,s.y,s.w,s.h,a.w,0,s.w,s.h);var u=a.w+s.w,h=a.h;n.draw(e,{w:u,h},(function(d){d.drawImage(o,0,0,u,h,0,0,u,h)}))}}),"_copyTextureToNewAtlas")},{key:"getCounts",value:l((function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}),"getCounts")}]),t})();function woe(t,e){return t.intersection?t.intersection(e):new Set(AN(t).filter((function(r){return e.has(r)})))}l(woe,"intersection");var GSe=(function(){function t(e,r){cl(this,t),this.r=e;var n=r;this.globalOptions=n,this.maxAtlases=n.webglTexPerBatch,this.atlasSize=n.webglTexSize,this.renderTypes=new Map,this.maxAtlasesPerBatch=r.webglTexPerBatch,this.batchAtlases=[],this._cacheScratchCanvas(n)}return l(t,"AtlasManager"),ul(t,[{key:"_cacheScratchCanvas",value:l((function(e){var r=-1,n=-1,i=null,a=e.createTextureCanvas;e.createTextureCanvas=function(s,o,u,h){return h?(i&&o==r&&u==n||(r=o,n=u,i=a(s,o,u)),i):a(s,o,u)}}),"_cacheScratchCanvas")},{key:"addRenderType",value:l((function(e,r){var n=new zSe(this.r,this.globalOptions),i=r;this.renderTypes.set(e,Gt({type:e,atlasCollection:n},i))}),"addRenderType")},{key:"getRenderTypes",value:l((function(){return AN(this.renderTypes.values())}),"getRenderTypes")},{key:"getRenderTypeOpts",value:l((function(e){return this.renderTypes.get(e)}),"getRenderTypeOpts")},{key:"invalidate",value:l((function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.forceRedraw,a=i!==void 0&&i,s=n.filterEle,o=s===void 0?function(){return!0}:s,u=n.filterType,h=u===void 0?function(){return!0}:u,d=!1,p=wa(e);try{for(p.s();!(r=p.n()).done;){var f=r.value;if(o(f)){var g,m=f.id(),y=wa(this.getRenderTypes());try{for(y.s();!(g=y.n()).done;){var v=g.value;if(h(v.type)){var x=v.getKey(f);a?(v.atlasCollection.deleteKey(m,x),v.atlasCollection.styleKeyNeedsRedraw.add(x),d=!0):d|=v.atlasCollection.checkKeyIsInvalid(m,x)}}}catch(b){y.e(b)}finally{y.f()}}}}catch(b){p.e(b)}finally{p.f()}return d}),"invalidate")},{key:"gc",value:l((function(){var e,r=wa(this.getRenderTypes());try{for(r.s();!(e=r.n()).done;)e.value.atlasCollection.gc()}catch(n){r.e(n)}finally{r.f()}}),"gc")},{key:"isRenderable",value:l((function(e,r){var n=this.getRenderTypeOpts(r);return n&&n.isVisible(e)}),"isRenderable")},{key:"startBatch",value:l((function(){this.batchAtlases=[]}),"startBatch")},{key:"getAtlasCount",value:l((function(){return this.batchAtlases.length}),"getAtlasCount")},{key:"getAtlases",value:l((function(){return this.batchAtlases}),"getAtlases")},{key:"getOrCreateAtlas",value:l((function(e,r,n){var i=this.renderTypes.get(n),a=i.getKey(e),s=e.id();return i.atlasCollection.draw(s,a,r,(function(o){i.drawElement(o,e,r,!0,!0)}))}),"getOrCreateAtlas")},{key:"getAtlasIndexForBatch",value:l((function(e){var r=this.batchAtlases.indexOf(e);if(r<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)return;this.batchAtlases.push(e),r=this.batchAtlases.length-1}return r}),"getAtlasIndexForBatch")},{key:"getIndexArray",value:l((function(){return Array.from({length:this.maxAtlases},(function(e,r){return r}))}),"getIndexArray")},{key:"getAtlasInfo",value:l((function(e,r){var n=this.renderTypes.get(r),i=n.getBoundingBox(e),a=this.getOrCreateAtlas(e,i,r),s=this.getAtlasIndexForBatch(a);if(s!==void 0){var o=n.getKey(e),u=yn(a.getOffsets(o),2),h=u[0];return{atlasID:s,tex:h,tex1:h,tex2:u[1],bb:i,type:r,styleKey:o}}}),"getAtlasInfo")},{key:"canAddToCurrentBatch",value:l((function(e,r){if(this.batchAtlases.length===this.maxAtlasesPerBatch){var n=this.renderTypes.get(r),i=n.getKey(e),a=n.atlasCollection.getAtlas(i);return a&&this.batchAtlases.includes(a)}return!0}),"canAddToCurrentBatch")},{key:"setTransformMatrix",value:l((function(e,r,n){var i=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],a=r.bb,s=r.type,o=r.tex1,u=r.tex2,h=this.getRenderTypeOpts(s),d=h.getPadding?h.getPadding(n):0,p=o.w/(o.w+u.w);i||(p=1-p);var f,g,m=this.getAdjustedBB(a,d,i,p);tI(e);var y=h.getRotation?h.getRotation(n):0;if(y!==0){var v=h.getRotationPoint(n),x=v.x,b=v.y;lv(e,e,[x,b]),rI(e,e,y);var w=h.getRotationOffset(n);f=w.x+m.xOffset,g=w.y}else f=m.x1,g=m.y1;lv(e,e,[f,g]),dk(e,e,[m.w,m.h])}),"setTransformMatrix")},{key:"getTransformMatrix",value:l((function(e,r){var n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],i=ip();return this.setTransformMatrix(i,e,r,n),i}),"getTransformMatrix")},{key:"getAdjustedBB",value:l((function(e,r,n,i){var a=e.x1,s=e.y1,o=e.w,u=e.h;r&&(a-=r,s-=r,o+=2*r,u+=2*r);var h=0,d=o*i;return n&&i<1?o=d:!n&&i<1&&(a+=h=o-d,o=d),{x1:a,y1:s,w:o,h:u,xOffset:h}}),"getAdjustedBB")},{key:"getDebugInfo",value:l((function(){var e,r=[],n=wa(this.renderTypes);try{for(n.s();!(e=n.n()).done;){var i=yn(e.value,2),a=i[0],s=i[1].atlasCollection.getCounts(),o=s.keyCount,u=s.atlasCount;r.push({type:a,keyCount:o,atlasCount:u})}}catch(h){n.e(h)}finally{n.f()}return r}),"getDebugInfo")}]),t})(),USe=(function(){function t(e,r,n){cl(this,t),this.r=e,this.gl=r,this.maxInstances=n.webglBatchSize,this.maxAtlases=n.webglTexPerBatch,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,n.enableWrapping=!0,n.createTextureCanvas=poe,this.atlasManager=new GSe(e,n),this.program=this.createShaderProgram(n2.SCREEN),this.pickingProgram=this.createShaderProgram(n2.PICKING),this.vao=this.createVAO(),this.debugInfo=[]}return l(t,"ElementDrawingWebGL"),ul(t,[{key:"addTextureRenderType",value:l((function(e,r){this.atlasManager.addRenderType(e,r)}),"addTextureRenderType")},{key:"invalidate",value:l((function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.type,i=this.atlasManager;return n?i.invalidate(e,{filterType:l((function(a){return a===n}),"filterType"),forceRedraw:!0}):i.invalidate(e)}),"invalidate")},{key:"gc",value:l((function(){this.atlasManager.gc()}),"gc")},{key:"createShaderProgram",value:l((function(e){var r=this.gl,n=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; 

      // what are we rendering?
      in int aVertType;

      // for picking
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex1; // x/y/w/h of texture in atlas
      in vec4 aTex2; 

      // for any transforms that are needed
      in vec4 aScaleRotate1;  // vectors use fewer attributes than matrices
      in vec2 aTranslate1;
      in vec4 aScaleRotate2;
      in vec2 aTranslate2;

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in float aLineWidth;
      in vec4 aEdgeColor;

      out vec2 vTexCoord;
      out vec4 vEdgeColor;
      flat out int vAtlasId;
      flat out vec4 vIndex;
      flat out int vVertType;

      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition;

        if(aVertType == `.concat(0,`) {
          float texX;
          float texY;
          float texW;
          float texH;
          mat3  texMatrix;

          int vid = gl_VertexID;
          if(vid <= 5) {
            texX = aTex1.x;
            texY = aTex1.y;
            texW = aTex1.z;
            texH = aTex1.w;
            texMatrix = mat3(
              vec3(aScaleRotate1.xy, 0.0),
              vec3(aScaleRotate2.zw, 0.0),
              vec3(aTranslate1,      1.0)
            );
          } else {
            texX = aTex2.x;
            texY = aTex2.y;
            texW = aTex2.z;
            texH = aTex2.w;
            texMatrix = mat3(
              vec3(aScaleRotate2.xy, 0.0),
              vec3(aScaleRotate2.zw, 0.0),
              vec3(aTranslate2,      1.0)
            );
          }

          if(vid == 1 || vid == 2 || vid == 4 || vid == 7 || vid == 8 || vid == 10) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5 || vid == 8 || vid == 10 || vid == 11) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * texMatrix * vec3(position, 1.0), 1.0);
        } 
        else if(aVertType == `).concat(1,` && vid < 6) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vEdgeColor = aEdgeColor;
        } 
        else if(aVertType == `).concat(2,` && vid < 6) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0 = pointA;
          vec2 p1 = pointB;
          vec2 p2 = pointC;
          vec2 pos = position;
          if(position.x == 1.0) {
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth;

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vEdgeColor = aEdgeColor;
        } 
        else if(aVertType == `).concat(3,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2( 0.0,   0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          mat3 transform = mat3(
            vec3(aScaleRotate1.xy, 0.0),
            vec3(aScaleRotate1.zw, 0.0),
            vec3(aTranslate1,      1.0)
          );
          gl_Position = vec4(uPanZoomMatrix * transform * vec3(position, 1.0), 1.0);
          vEdgeColor = aEdgeColor;
        } else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vIndex = aIndex;
        vVertType = aVertType;
      }
    `),i=this.atlasManager.getIndexArray(),a=doe(r,n,`#version 300 es
      precision highp float;

      // define texture unit for each node in the batch
      `.concat(i.map((function(o){return"uniform sampler2D uTexture".concat(o,";")})).join(`
	`),`

      uniform vec4 uBGColor;

      in vec2 vTexCoord;
      in vec4 vEdgeColor;
      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;

      out vec4 outColor;

      void main(void) {
        if(vVertType == `).concat(0,`) {
          `).concat(i.map((function(o){return"if(vAtlasId == ".concat(o,") outColor = texture(uTexture").concat(o,", vTexCoord);")})).join(`
	else `),`
        } else if(vVertType == `).concat(3,`) {
          // blend arrow color with background (using premultiplied alpha)
          outColor.rgb = vEdgeColor.rgb + (uBGColor.rgb * (1.0 - vEdgeColor.a)); 
          outColor.a = 1.0; // make opaque, masks out line under arrow
        } else {
          outColor = vEdgeColor;
        }

        `).concat(e.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `));a.aPosition=r.getAttribLocation(a,"aPosition"),a.aIndex=r.getAttribLocation(a,"aIndex"),a.aVertType=r.getAttribLocation(a,"aVertType"),a.aAtlasId=r.getAttribLocation(a,"aAtlasId"),a.aTex1=r.getAttribLocation(a,"aTex1"),a.aTex2=r.getAttribLocation(a,"aTex2"),a.aScaleRotate1=r.getAttribLocation(a,"aScaleRotate1"),a.aTranslate1=r.getAttribLocation(a,"aTranslate1"),a.aScaleRotate2=r.getAttribLocation(a,"aScaleRotate2"),a.aTranslate2=r.getAttribLocation(a,"aTranslate2"),a.aPointAPointB=r.getAttribLocation(a,"aPointAPointB"),a.aPointCPointD=r.getAttribLocation(a,"aPointCPointD"),a.aLineWidth=r.getAttribLocation(a,"aLineWidth"),a.aEdgeColor=r.getAttribLocation(a,"aEdgeColor"),a.uPanZoomMatrix=r.getUniformLocation(a,"uPanZoomMatrix"),a.uAtlasSize=r.getUniformLocation(a,"uAtlasSize"),a.uBGColor=r.getUniformLocation(a,"uBGColor"),a.uTextures=[];for(var s=0;s<this.atlasManager.maxAtlases;s++)a.uTextures.push(r.getUniformLocation(a,"uTexture".concat(s)));return a}),"createShaderProgram")},{key:"createVAO",value:l((function(){var e=[0,0,1,0,1,1,0,0,1,1,0,1],r=[].concat(e,e);this.vertexCount=r.length/2;var n=this.maxInstances,i=this.gl,a=this.program,s=i.createVertexArray();return i.bindVertexArray(s),yoe(i,"vec2",a.aPosition,r),this.indexBuffer=Ki(i,n,"vec4",a.aIndex),this.vertTypeBuffer=Ki(i,n,"int",a.aVertType),this.atlasIdBuffer=Ki(i,n,"int",a.aAtlasId),this.tex1Buffer=Ki(i,n,"vec4",a.aTex1),this.tex2Buffer=Ki(i,n,"vec4",a.aTex2),this.scaleRotate1Buffer=Ki(i,n,"vec4",a.aScaleRotate1),this.translate1Buffer=Ki(i,n,"vec2",a.aTranslate1),this.scaleRotate2Buffer=Ki(i,n,"vec4",a.aScaleRotate2),this.translate2Buffer=Ki(i,n,"vec2",a.aTranslate2),this.pointAPointBBuffer=Ki(i,n,"vec4",a.aPointAPointB),this.pointCPointDBuffer=Ki(i,n,"vec4",a.aPointCPointD),this.lineWidthBuffer=Ki(i,n,"float",a.aLineWidth),this.edgeColorBuffer=Ki(i,n,"vec4",a.aEdgeColor),i.bindVertexArray(null),s}),"createVAO")},{key:"buffers",get:l((function(){var e=this;return this._buffers||(this._buffers=Object.keys(this).filter((function(r){return r.endsWith("Buffer")})).map((function(r){return e[r]}))),this._buffers}),"get")},{key:"startFrame",value:l((function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:n2.SCREEN;this.panZoomMatrix=e,this.debugInfo=r,this.renderTarget=n,this.startBatch()}),"startFrame")},{key:"startBatch",value:l((function(){this.instanceCount=0,this.atlasManager.startBatch()}),"startBatch")},{key:"endFrame",value:l((function(){this.endBatch()}),"endFrame")},{key:"getTempMatrix",value:l((function(){return this.tempMatrix=this.tempMatrix||ip()}),"getTempMatrix")},{key:"drawTexture",value:l((function(e,r,n){var i=this.atlasManager;if(i.isRenderable(e,n)){i.canAddToCurrentBatch(e,n)||this.endBatch();var a=this.instanceCount;this.vertTypeBuffer.getView(a)[0]=0,wy(r,this.indexBuffer.getView(a));var s=i.getAtlasInfo(e,n,s),o=s.atlasID,u=s.tex1,h=s.tex2;this.atlasIdBuffer.getView(a)[0]=o;var d=this.tex1Buffer.getView(a);d[0]=u.x,d[1]=u.y,d[2]=u.w,d[3]=u.h;var p=this.tex2Buffer.getView(a);p[0]=h.x,p[1]=h.y,p[2]=h.w,p[3]=h.h;for(var f=this.getTempMatrix(),g=0,m=[1,2];g<m.length;g++){var y=m[g];i.setTransformMatrix(f,s,e,y===1);var v=this["scaleRotate".concat(y,"Buffer")].getView(a);v[0]=f[0],v[1]=f[1],v[2]=f[3],v[3]=f[4];var x=this["translate".concat(y,"Buffer")].getView(a);x[0]=f[6],x[1]=f[7]}this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}),"drawTexture")},{key:"drawEdgeArrow",value:l((function(e,r,n){var i,a,s,o=e._private.rscratch;if(n==="source"?(i=o.arrowStartX,a=o.arrowStartY,s=o.srcArrowAngle):(i=o.arrowEndX,a=o.arrowEndY,s=o.tgtArrowAngle),!(isNaN(i)||i==null||isNaN(a)||a==null||isNaN(s)||s==null)&&e.pstyle(n+"-arrow-shape").value!=="none"){var u=e.pstyle(n+"-arrow-color").value,h=e.pstyle("opacity").value*e.pstyle("line-opacity").value,d=e.pstyle("width").pfValue,p=e.pstyle("arrow-scale").value,f=this.r.getArrowWidth(d,p),g=this.getTempMatrix();tI(g),lv(g,g,[i,a]),dk(g,g,[f,f]),rI(g,g,s);var m=this.instanceCount;this.vertTypeBuffer.getView(m)[0]=3,wy(r,this.indexBuffer.getView(m)),by(u,h,this.edgeColorBuffer.getView(m));var y=this.scaleRotate1Buffer.getView(m);y[0]=g[0],y[1]=g[1],y[2]=g[3],y[3]=g[4];var v=this.translate1Buffer.getView(m);v[0]=g[6],v[1]=g[7],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}),"drawEdgeArrow")},{key:"drawEdgeLine",value:l((function(e,r){var n=e.pstyle("opacity").value,i=e.pstyle("line-opacity").value,a=e.pstyle("width").pfValue,s=e.pstyle("line-color").value,o=n*i,u=this.getEdgePoints(e);if(u.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),u.length==4){var h=this.instanceCount;this.vertTypeBuffer.getView(h)[0]=1,wy(r,this.indexBuffer.getView(h)),by(s,o,this.edgeColorBuffer.getView(h)),this.lineWidthBuffer.getView(h)[0]=a;var d=this.pointAPointBBuffer.getView(h);d[0]=u[0],d[1]=u[1],d[2]=u[2],d[3]=u[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var p=0;p<u.length-2;p+=2){var f=this.instanceCount;this.vertTypeBuffer.getView(f)[0]=2,wy(r,this.indexBuffer.getView(f)),by(s,o,this.edgeColorBuffer.getView(f)),this.lineWidthBuffer.getView(f)[0]=a;var g=u[p-2],m=u[p-1],y=u[p],v=u[p+1],x=u[p+2],b=u[p+3],w=u[p+4],T=u[p+5];p==0&&(g=2*y-x+.001,m=2*v-b+.001),p==u.length-4&&(w=2*x-y+.001,T=2*b-v+.001);var k=this.pointAPointBBuffer.getView(f);k[0]=g,k[1]=m,k[2]=y,k[3]=v;var C=this.pointCPointDBuffer.getView(f);C[0]=x,C[1]=b,C[2]=w,C[3]=T,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}),"drawEdgeLine")},{key:"getEdgePoints",value:l((function(e){var r=e._private.rscratch.allpts;if(r.length==4)return r;var n=this.getNumSegments(e);return this.getCurveSegmentPoints(r,n)}),"getEdgePoints")},{key:"getNumSegments",value:l((function(e){return Math.min(Math.max(15,5),this.maxInstances)}),"getNumSegments")},{key:"getCurveSegmentPoints",value:l((function(e,r){if(e.length==4)return e;for(var n=Array(2*(r+1)),i=0;i<=r;i++)if(i==0)n[0]=e[0],n[1]=e[1];else if(i==r)n[2*i]=e[e.length-2],n[2*i+1]=e[e.length-1];else{var a=i/r;this.setCurvePoint(e,a,n,2*i)}return n}),"getCurveSegmentPoints")},{key:"setCurvePoint",value:l((function(e,r,n,i){if(!(e.length<=2)){for(var a=Array(e.length-2),s=0;s<a.length;s+=2){var o=(1-r)*e[s]+r*e[s+2],u=(1-r)*e[s+1]+r*e[s+3];a[s]=o,a[s+1]=u}return this.setCurvePoint(a,r,n,i)}n[i]=e[0],n[i+1]=e[1]}),"setCurvePoint")},{key:"endBatch",value:l((function(){var e=this.gl,r=this.vao,n=this.vertexCount,i=this.instanceCount;if(i!==0){var a=this.renderTarget.picking?this.pickingProgram:this.program;e.useProgram(a),e.bindVertexArray(r);var s,o=wa(this.buffers);try{for(o.s();!(s=o.n()).done;)s.value.bufferSubData(i)}catch(f){o.e(f)}finally{o.f()}for(var u=this.atlasManager.getAtlases(),h=0;h<u.length;h++)u[h].bufferIfNeeded(e);for(var d=0;d<u.length;d++)e.activeTexture(e.TEXTURE0+d),e.bindTexture(e.TEXTURE_2D,u[d].texture),e.uniform1i(a.uTextures[d],d);e.uniformMatrix3fv(a.uPanZoomMatrix,!1,this.panZoomMatrix),e.uniform1i(a.uAtlasSize,this.atlasManager.atlasSize);var p=by(this.bgColor,1);e.uniform4fv(a.uBGColor,p),e.drawArraysInstanced(e.TRIANGLES,0,n,i),e.bindVertexArray(null),e.bindTexture(e.TEXTURE_2D,null),this.debugInfo&&this.debugInfo.push({count:i,atlasCount:u.length}),this.startBatch()}}),"endBatch")},{key:"getDebugInfo",value:l((function(){return this.debugInfo}),"getDebugInfo")},{key:"getAtlasDebugInfo",value:l((function(){return this.atlasManager.getDebugInfo()}),"getAtlasDebugInfo")}]),t})();function qS(t,e){return"rgba(".concat(t[0],", ").concat(t[1],", ").concat(t[2],", ").concat(e,")")}l(qS,"fillStyle");var qSe=(function(){function t(e){cl(this,t),this.r=e}return l(t,"OverlayUnderlayRenderer"),ul(t,[{key:"getStyleKey",value:l((function(e,r){var n=this.getStyle(e,r),i=n.shape,a=n.opacity,s=n.color;if(!i)return null;var o=r.width(),u=r.height(),h=qS(s,a);return lc("".concat(i,"-").concat(o,"-").concat(u,"-").concat(h))}),"getStyleKey")},{key:"isVisible",value:l((function(e,r){return r.pstyle("".concat(e,"-opacity")).value>0}),"isVisible")},{key:"getStyle",value:l((function(e,r){return{opacity:r.pstyle("".concat(e,"-opacity")).value,color:r.pstyle("".concat(e,"-color")).value,shape:r.pstyle("".concat(e,"-shape")).value}}),"getStyle")},{key:"getPadding",value:l((function(e,r){return r.pstyle("".concat(e,"-padding")).pfValue}),"getPadding")},{key:"draw",value:l((function(e,r,n,i){if(this.isVisible(e,n)){var a=this.r,s=i.w,o=i.h,u=s/2,h=o/2,d=this.getStyle(e,n),p=d.shape,f=d.color,g=d.opacity;r.save(),r.fillStyle=qS(f,g),p==="round-rectangle"||p==="roundrectangle"?a.drawRoundRectanglePath(r,u,h,s,o,"auto"):p==="ellipse"&&a.drawEllipsePath(r,u,h,s,o),r.fill(),r.restore()}}),"draw")}]),t})();function koe(t){var e=t&&t.style&&t.style.backgroundColor||"white";return lae(e)}l(koe,"getBGColor");var Toe={};function uB(t){var e=t.render;t.render=function(a){a=a||{};var s=t.cy;t.webgl&&(s.zoom()>7.99?(Eoe(t),e.call(t,a)):(_oe(t),iI(t,a,n2.SCREEN)))};var r=t.matchCanvasSize;t.matchCanvasSize=function(a){r.call(t,a),t.pickingFrameBuffer.setFramebufferAttachmentSizes(t.canvasWidth,t.canvasHeight),t.pickingFrameBuffer.needsDraw=!0},t.findNearestElements=function(a,s,o,u){return Ioe(t,a,s)};var n=t.invalidateCachedZSortedEles;t.invalidateCachedZSortedEles=function(){n.call(t),t.pickingFrameBuffer.needsDraw=!0};var i=t.notify;t.notify=function(a,s){i.call(t,a,s),a==="viewport"||a==="bounds"?t.pickingFrameBuffer.needsDraw=!0:a==="background"&&t.eleDrawing.invalidate(s,{type:"node-body"})}}function Eoe(t){var e=t.data.contexts[t.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function _oe(t){var e=l((function(r){r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.canvasWidth,t.canvasHeight),r.restore()}),"clear");e(t.data.contexts[t.NODE]),e(t.data.contexts[t.DRAG])}function Coe(t){var e=t.canvasWidth,r=t.canvasHeight,n=hk(t),i=n.pan,a=n.zoom,s=ip();lv(s,s,[i.x,i.y]),dk(s,s,[a,a]);var o=ip();boe(o,e,r);var u=ip();return xoe(u,o,s),u}function nI(t,e){var r=t.canvasWidth,n=t.canvasHeight,i=hk(t),a=i.pan,s=i.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,r,n),e.translate(a.x,a.y),e.scale(s,s)}function Soe(t,e){t.drawSelectionRectangle(e,(function(r){return nI(t,r)}))}function Aoe(t){var e=t.data.contexts[t.NODE];e.save(),nI(t,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function Loe(t){var e=l((function(n,i,a){for(var s=n.atlasManager.getRenderTypeOpts(i),o=t.data.contexts[t.NODE],u=s.atlasCollection.atlases,h=0;h<u.length;h++){var d=u[h].canvas,p=d.width,f=d.height,g=p*h,m=d.height*a;o.save(),o.scale(.125,.125),o.drawImage(d,g,m),o.strokeStyle="black",o.rect(g,m,p,f),o.stroke(),o.restore()}}),"draw"),r=0;e(t.eleDrawing,"node-body",r++),e(t.eleDrawing,"node-label",r++)}function Noe(t,e,r,n,i){var a,s,o,u,h=hk(t),d=h.pan,p=h.zoom;if(n===void 0||i===void 0){var f=yn(m4(t,d,p,e,r),2);a=f[0]-3,s=f[1]-3,o=6,u=6}else{var g=yn(m4(t,d,p,e,r),2),m=g[0],y=g[1],v=yn(m4(t,d,p,n,i),2),x=v[0],b=v[1];a=m,s=b,o=Math.abs(x-m),u=Math.abs(b-y)}if(o===0||u===0)return[];var w=t.data.contexts[t.WEBGL];w.bindFramebuffer(w.FRAMEBUFFER,t.pickingFrameBuffer),t.pickingFrameBuffer.needsDraw&&(w.viewport(0,0,w.canvas.width,w.canvas.height),iI(t,null,n2.PICKING),t.pickingFrameBuffer.needsDraw=!1);var T=o*u,k=new Uint8Array(4*T);w.readPixels(a,s,o,u,w.RGBA,w.UNSIGNED_BYTE,k),w.bindFramebuffer(w.FRAMEBUFFER,null);for(var C=new Set,E=0;E<T;E++){var _=foe(k.slice(4*E,4*E+4))-1;_>=0&&C.add(_)}return C}function Ioe(t,e,r){var n,i,a,s=Noe(t,e,r),o=t.getCachedZSortedEles(),u=wa(s);try{for(u.s();!(a=u.n()).done;){var h=o[a.value];if(!n&&h.isNode()&&(n=h),!i&&h.isEdge()&&(i=h),n&&i)break}}catch(d){u.e(d)}finally{u.f()}return[n,i].filter(Boolean)}function iI(t,e,r){var n;t.webglDebug&&(n=[],performance.now());var i=t.eleDrawing,a=0;if(r.screen&&t.data.canvasNeedsRedraw[t.SELECT_BOX]&&Soe(t,e),t.data.canvasNeedsRedraw[t.NODE]||r.picking){var s=l((function(w,T){T+=1,w.isNode()?(i.drawTexture(w,T,"node-underlay"),i.drawTexture(w,T,"node-body"),i.drawTexture(w,T,"node-label"),i.drawTexture(w,T,"node-overlay")):(i.drawEdgeLine(w,T),i.drawEdgeArrow(w,T,"source"),i.drawEdgeArrow(w,T,"target"),i.drawTexture(w,T,"edge-label"))}),"draw"),o=t.data.contexts[t.WEBGL];r.screen?(o.clearColor(0,0,0,0),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA)):o.disable(o.BLEND),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.viewport(0,0,o.canvas.width,o.canvas.height);var u=Coe(t),h=t.getCachedZSortedEles();if(a=h.length,i.startFrame(u,n,r),r.screen){for(var d=0;d<h.nondrag.length;d++)s(h.nondrag[d],d);for(var p=0;p<h.drag.length;p++)s(h.drag[p],-1)}else if(r.picking)for(var f=0;f<h.length;f++)s(h[f],f);i.endFrame(),t.data.gc&&(console.log("Garbage Collect!"),t.data.gc=!1,i.gc()),r.screen&&t.webglDebugShowAtlases&&(Aoe(t),Loe(t)),t.data.canvasNeedsRedraw[t.NODE]=!1,t.data.canvasNeedsRedraw[t.DRAG]=!1}if(t.webglDebug){var g;performance.now();var m=0,y=0,v=wa(n);try{for(v.s();!(g=v.n()).done;){var x=g.value;m++,y+=x.count}}catch(w){v.e(w)}finally{v.f()}var b="".concat(a," elements, ").concat(y," rectangles, ").concat(m," batches");console.log("WebGL (".concat(r.name,") - ").concat(b))}}Toe.initWebgl=function(t,e){var r=this,n=r.data.contexts[r.WEBGL],i=t.cy.container();t.bgColor=koe(i),t.webglTexSize=Math.min(t.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),t.webglTexRows=Math.min(t.webglTexRows,54),t.webglBatchSize=Math.min(t.webglBatchSize,16384),t.webglTexPerBatch=Math.min(t.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),r.webglDebug=t.webglDebug,r.webglDebugShowAtlases=t.webglDebugShowAtlases,console.log("max texture units",n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),console.log("max texture size",n.getParameter(n.MAX_TEXTURE_SIZE)),console.log("webgl options",t),r.pickingFrameBuffer=voe(n),r.pickingFrameBuffer.needsDraw=!0;var a=l((function(h){return r.getTextAngle(h,null)}),"getLabelRotation"),s=l((function(h){var d=h.pstyle("label");return d&&d.value}),"isLabelVisible");r.eleDrawing=new USe(r,n,t);var o=new qSe(r);r.eleDrawing.addTextureRenderType("node-body",jm({getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement,isVisible:l((function(h){return h.visible()}),"isVisible")})),r.eleDrawing.addTextureRenderType("node-label",jm({getKey:e.getLabelKey,getBoundingBox:e.getLabelBox,drawElement:e.drawLabel,getRotation:a,getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:s})),r.eleDrawing.addTextureRenderType("node-overlay",jm({getBoundingBox:e.getElementBox,getKey:l((function(h){return o.getStyleKey("overlay",h)}),"getKey"),drawElement:l((function(h,d,p){return o.draw("overlay",h,d,p)}),"drawElement"),isVisible:l((function(h){return o.isVisible("overlay",h)}),"isVisible"),getPadding:l((function(h){return o.getPadding("overlay",h)}),"getPadding")})),r.eleDrawing.addTextureRenderType("node-underlay",jm({getBoundingBox:e.getElementBox,getKey:l((function(h){return o.getStyleKey("underlay",h)}),"getKey"),drawElement:l((function(h,d,p){return o.draw("underlay",h,d,p)}),"drawElement"),isVisible:l((function(h){return o.isVisible("underlay",h)}),"isVisible"),getPadding:l((function(h){return o.getPadding("underlay",h)}),"getPadding")})),r.eleDrawing.addTextureRenderType("edge-label",jm({getKey:e.getLabelKey,getBoundingBox:e.getLabelBox,drawElement:e.drawLabel,getRotation:a,getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:s}));var u=tx((function(){console.log("garbage collect flag set"),r.data.gc=!0}),1e4);r.onUpdateEleCalcs((function(h,d){var p=!1;d&&d.length>0&&(p|=r.eleDrawing.invalidate(d)),p&&u()})),uB(r)},l(uB,"overrideCanvasRendererFunctions"),l(Eoe,"clearWebgl"),l(_oe,"clearCanvas"),l(Coe,"createPanZoomMatrix"),l(nI,"setContextTransform"),l(Soe,"drawSelectionRectangle"),l(Aoe,"drawAxes"),l(Loe,"drawAtlases"),l(Noe,"getPickingIndexes"),l(Ioe,"findNearestElementsWebgl"),l(iI,"renderWebgl");var Nc,Roe={drawPolygonPath:function(t,e,r,n,i,a){var s=n/2,o=i/2;t.beginPath&&t.beginPath(),t.moveTo(e+s*a[0],r+o*a[1]);for(var u=1;u<a.length/2;u++)t.lineTo(e+s*a[2*u],r+o*a[2*u+1]);t.closePath()},drawRoundPolygonPath:function(t,e,r,n,i,a,s){s.forEach((function(o){return QN(t,o)})),t.closePath()},drawRoundRectanglePath:function(t,e,r,n,i,a){var s=n/2,o=i/2,u=a==="auto"?rh(n,i):Math.min(a,o,s);t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.arcTo(e+s,r-o,e+s,r,u),t.arcTo(e+s,r+o,e,r+o,u),t.arcTo(e-s,r+o,e-s,r,u),t.arcTo(e-s,r-o,e,r-o,u),t.lineTo(e,r-o),t.closePath()},drawBottomRoundRectanglePath:function(t,e,r,n,i,a){var s=n/2,o=i/2,u=a==="auto"?rh(n,i):a;t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.lineTo(e+s,r-o),t.lineTo(e+s,r),t.arcTo(e+s,r+o,e,r+o,u),t.arcTo(e-s,r+o,e-s,r,u),t.lineTo(e-s,r-o),t.lineTo(e,r-o),t.closePath()},drawCutRectanglePath:function(t,e,r,n,i,a,s){var o=n/2,u=i/2,h=s==="auto"?PN():s;t.beginPath&&t.beginPath(),t.moveTo(e-o+h,r-u),t.lineTo(e+o-h,r-u),t.lineTo(e+o,r-u+h),t.lineTo(e+o,r+u-h),t.lineTo(e+o-h,r+u),t.lineTo(e-o+h,r+u),t.lineTo(e-o,r+u-h),t.lineTo(e-o,r-u+h),t.closePath()},drawBarrelPath:function(t,e,r,n,i){var a=n/2,s=i/2,o=e-a,u=e+a,h=r-s,d=r+s,p=fS(n,i),f=p.widthOffset,g=p.heightOffset,m=p.ctrlPtOffsetPct*f;t.beginPath&&t.beginPath(),t.moveTo(o,h+g),t.lineTo(o,d-g),t.quadraticCurveTo(o+m,d,o+f,d),t.lineTo(u-f,d),t.quadraticCurveTo(u-m,d,u,d-g),t.lineTo(u,h+g),t.quadraticCurveTo(u-m,h,u-f,h),t.lineTo(o+f,h),t.quadraticCurveTo(o+m,h,o,h+g),t.closePath()}},hB=Math.sin(0),dB=Math.cos(0),jS={},WS={},Moe=Math.PI/40;for(Nc=0*Math.PI;Nc<2*Math.PI;Nc+=Moe)jS[Nc]=Math.sin(Nc),WS[Nc]=Math.cos(Nc);Roe.drawEllipsePath=function(t,e,r,n,i){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,r,n/2,i/2,0,0,2*Math.PI);else for(var a,s,o=n/2,u=i/2,h=0*Math.PI;h<2*Math.PI;h+=Moe)a=e-o*jS[h]*hB+o*WS[h]*dB,s=r+u*WS[h]*hB+u*jS[h]*dB,h===0?t.moveTo(a,s):t.lineTo(a,s);t.closePath()};var ky={};function Doe(t,e){for(var r=atob(t),n=new ArrayBuffer(r.length),i=new Uint8Array(n),a=0;a<r.length;a++)i[a]=r.charCodeAt(a);return new Blob([n],{type:e})}function YS(t){var e=t.indexOf(",");return t.substr(e+1)}function UT(t,e,r){var n=l((function(){return e.toDataURL(r,t.quality)}),"getB64Uri");switch(t.output){case"blob-promise":return new Tm((function(i,a){try{e.toBlob((function(s){s!=null?i(s):a(new Error("`canvas.toBlob()` sent a null value in its callback"))}),r,t.quality)}catch(s){a(s)}}));case"blob":return Doe(YS(n()),r);case"base64":return YS(n());default:return n()}}ky.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]},ky.bufferCanvasImage=function(t){var e=this.cy,r=e.mutableElements().boundingBox(),n=this.findContainerClientCoords(),i=t.full?Math.ceil(r.w):n[2],a=t.full?Math.ceil(r.h):n[3],s=ct(t.maxWidth)||ct(t.maxHeight),o=this.getPixelRatio(),u=1;if(t.scale!==void 0)i*=t.scale,a*=t.scale,u=t.scale;else if(s){var h=1/0,d=1/0;ct(t.maxWidth)&&(h=u*t.maxWidth/i),ct(t.maxHeight)&&(d=u*t.maxHeight/a),i*=u=Math.min(h,d),a*=u}s||(i*=o,a*=o,u*=o);var p=document.createElement("canvas");p.width=i,p.height=a,p.style.width=i+"px",p.style.height=a+"px";var f=p.getContext("2d");if(i>0&&a>0){f.clearRect(0,0,i,a),f.globalCompositeOperation="source-over";var g=this.getCachedZSortedEles();if(t.full)f.translate(-r.x1*u,-r.y1*u),f.scale(u,u),this.drawElements(f,g),f.scale(1/u,1/u),f.translate(r.x1*u,r.y1*u);else{var m=e.pan(),y={x:m.x*u,y:m.y*u};u*=e.zoom(),f.translate(y.x,y.y),f.scale(u,u),this.drawElements(f,g),f.scale(1/u,1/u),f.translate(-y.x,-y.y)}t.bg&&(f.globalCompositeOperation="destination-over",f.fillStyle=t.bg,f.rect(0,0,i,a),f.fill())}return p},l(Doe,"b64ToBlob"),l(YS,"b64UriToB64"),l(UT,"output"),ky.png=function(t){return UT(t,this.bufferCanvasImage(t),"image/png")},ky.jpg=function(t){return UT(t,this.bufferCanvasImage(t),"image/jpeg")};var jSe={nodeShapeImpl:function(t,e,r,n,i,a,s,o){switch(t){case"ellipse":return this.drawEllipsePath(e,r,n,i,a);case"polygon":return this.drawPolygonPath(e,r,n,i,a,s);case"round-polygon":return this.drawRoundPolygonPath(e,r,n,i,a,s,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,r,n,i,a,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,r,n,i,a,s,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,r,n,i,a,o);case"barrel":return this.drawBarrelPath(e,r,n,i,a)}}},WSe=aI,Jt=aI.prototype;function aI(t){var e=this,r=e.cy.window().document;t.webgl&&(Jt.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(Jt.CANVAS_LAYERS),contexts:new Array(Jt.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Jt.CANVAS_LAYERS),bufferCanvases:new Array(Jt.BUFFER_COUNT),bufferContexts:new Array(Jt.CANVAS_LAYERS)};var n="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";e.data.canvasContainer=r.createElement("div");var a=e.data.canvasContainer.style;e.data.canvasContainer.style[n]=i,a.position="relative",a.zIndex="0",a.overflow="hidden";var s=t.cy.container();s.appendChild(e.data.canvasContainer),s.style[n]=i;var o={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};qke()&&(o["-ms-touch-action"]="none",o["touch-action"]="none");for(var u=0;u<Jt.CANVAS_LAYERS;u++){var h=e.data.canvases[u]=r.createElement("canvas"),d=Jt.CANVAS_TYPES[u];e.data.contexts[u]=h.getContext(d),e.data.contexts[u]||en("Could not create canvas of type "+d),Object.keys(o).forEach((function(H){h.style[H]=o[H]})),h.style.position="absolute",h.setAttribute("data-id","layer"+u),h.style.zIndex=String(Jt.CANVAS_LAYERS-u),e.data.canvasContainer.appendChild(h),e.data.canvasNeedsRedraw[u]=!1}for(e.data.topCanvas=e.data.canvases[0],e.data.canvases[Jt.NODE].setAttribute("data-id","layer"+Jt.NODE+"-node"),e.data.canvases[Jt.SELECT_BOX].setAttribute("data-id","layer"+Jt.SELECT_BOX+"-selectbox"),e.data.canvases[Jt.DRAG].setAttribute("data-id","layer"+Jt.DRAG+"-drag"),e.data.canvases[Jt.WEBGL]&&e.data.canvases[Jt.WEBGL].setAttribute("data-id","layer"+Jt.WEBGL+"-webgl"),u=0;u<Jt.BUFFER_COUNT;u++)e.data.bufferCanvases[u]=r.createElement("canvas"),e.data.bufferContexts[u]=e.data.bufferCanvases[u].getContext("2d"),e.data.bufferCanvases[u].style.position="absolute",e.data.bufferCanvases[u].setAttribute("data-id","buffer"+u),e.data.bufferCanvases[u].style.zIndex=String(-u-1),e.data.bufferCanvases[u].style.visibility="hidden";e.pathsEnabled=!0;var p=ha(),f=l((function(H){return{x:(H.x1+H.x2)/2,y:(H.y1+H.y2)/2}}),"getBoxCenter"),g=l((function(H){return{x:-H.w/2,y:-H.h/2}}),"getCenterOffset"),m=l((function(H){var K=H[0]._private;return K.oldBackgroundTimestamp!==K.backgroundTimestamp}),"backgroundTimestampHasChanged"),y=l((function(H){return H[0]._private.nodeKey}),"getStyleKey"),v=l((function(H){return H[0]._private.labelStyleKey}),"getLabelKey"),x=l((function(H){return H[0]._private.sourceLabelStyleKey}),"getSourceLabelKey"),b=l((function(H){return H[0]._private.targetLabelStyleKey}),"getTargetLabelKey"),w=l((function(H,K,ie,ne,J){return e.drawElement(H,K,ie,!1,!1,J)}),"drawElement"),T=l((function(H,K,ie,ne,J){return e.drawElementText(H,K,ie,ne,"main",J)}),"drawLabel"),k=l((function(H,K,ie,ne,J){return e.drawElementText(H,K,ie,ne,"source",J)}),"drawSourceLabel"),C=l((function(H,K,ie,ne,J){return e.drawElementText(H,K,ie,ne,"target",J)}),"drawTargetLabel"),E=l((function(H){return H.boundingBox(),H[0]._private.bodyBounds}),"getElementBox"),_=l((function(H){return H.boundingBox(),H[0]._private.labelBounds.main||p}),"getLabelBox"),S=l((function(H){return H.boundingBox(),H[0]._private.labelBounds.source||p}),"getSourceLabelBox"),N=l((function(H){return H.boundingBox(),H[0]._private.labelBounds.target||p}),"getTargetLabelBox"),O=l((function(H,K){return K}),"isLabelVisibleAtScale"),B=l((function(H){return f(E(H))}),"getElementRotationPoint"),L=l((function(H,K,ie){var ne=H?H+"-":"";return{x:K.x+ie.pstyle(ne+"text-margin-x").pfValue,y:K.y+ie.pstyle(ne+"text-margin-y").pfValue}}),"addTextMargin"),I=l((function(H,K,ie){var ne=H[0]._private.rscratch;return{x:ne[K],y:ne[ie]}}),"getRsPt"),A=l((function(H){return L("",I(H,"labelX","labelY"),H)}),"getLabelRotationPoint"),M=l((function(H){return L("source",I(H,"sourceLabelX","sourceLabelY"),H)}),"getSourceLabelRotationPoint"),D=l((function(H){return L("target",I(H,"targetLabelX","targetLabelY"),H)}),"getTargetLabelRotationPoint"),R=l((function(H){return g(E(H))}),"getElementRotationOffset"),P=l((function(H){return g(S(H))}),"getSourceLabelRotationOffset"),$=l((function(H){return g(N(H))}),"getTargetLabelRotationOffset"),z=l((function(H){var K=_(H),ie=g(_(H));if(H.isNode()){switch(H.pstyle("text-halign").value){case"left":ie.x=-K.w-(K.leftPad||0);break;case"right":ie.x=-(K.rightPad||0)}switch(H.pstyle("text-valign").value){case"top":ie.y=-K.h-(K.topPad||0);break;case"bottom":ie.y=-(K.botPad||0)}}return ie}),"getLabelRotationOffset"),q=e.data.eleTxrCache=new vy(e,{getKey:y,doesEleInvalidateKey:m,drawElement:w,getBoundingBox:E,getRotationPoint:B,getRotationOffset:R,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),W=e.data.lblTxrCache=new vy(e,{getKey:v,drawElement:T,getBoundingBox:_,getRotationPoint:A,getRotationOffset:z,isVisible:O}),Q=e.data.slbTxrCache=new vy(e,{getKey:x,drawElement:k,getBoundingBox:S,getRotationPoint:M,getRotationOffset:P,isVisible:O}),te=e.data.tlbTxrCache=new vy(e,{getKey:b,drawElement:C,getBoundingBox:N,getRotationPoint:D,getRotationOffset:$,isVisible:O}),oe=e.data.lyrTxrCache=new uoe(e);e.onUpdateEleCalcs(l((function(H,K){q.invalidateElements(K),W.invalidateElements(K),Q.invalidateElements(K),te.invalidateElements(K),oe.invalidateElements(K);for(var ie=0;ie<K.length;ie++){var ne=K[ie]._private;ne.oldBackgroundTimestamp=ne.backgroundTimestamp}}),"invalidateTextureCaches"));var re=l((function(H){for(var K=0;K<H.length;K++)oe.enqueueElementRefinement(H[K].ele)}),"refineInLayers");q.onDequeue(re),W.onDequeue(re),Q.onDequeue(re),te.onDequeue(re),t.webgl&&e.initWebgl(t,{getStyleKey:y,getLabelKey:v,drawElement:w,drawLabel:T,getElementBox:E,getLabelBox:_,getElementRotationPoint:B,getElementRotationOffset:R,getLabelRotationPoint:A,getLabelRotationOffset:z})}Jt.CANVAS_LAYERS=3,Jt.SELECT_BOX=0,Jt.DRAG=1,Jt.NODE=2,Jt.WEBGL=3,Jt.CANVAS_TYPES=["2d","2d","2d","webgl2"],Jt.BUFFER_COUNT=3,Jt.TEXTURE_BUFFER=0,Jt.MOTIONBLUR_BUFFER_NODE=1,Jt.MOTIONBLUR_BUFFER_DRAG=2,l(aI,"CanvasRenderer"),Jt.redrawHint=function(t,e){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[Jt.NODE]=e;break;case"drag":r.data.canvasNeedsRedraw[Jt.DRAG]=e;break;case"select":r.data.canvasNeedsRedraw[Jt.SELECT_BOX]=e;break;case"gc":r.data.gc=!0}};var YSe=typeof Path2D<"u";Jt.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t},Jt.usePaths=function(){return YSe&&this.pathsEnabled},Jt.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)},Jt.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled},Jt.makeOffscreenCanvas=function(t,e){var r;return(typeof OffscreenCanvas>"u"?"undefined":Un(OffscreenCanvas))!=="undefined"?r=new OffscreenCanvas(t,e):((r=this.cy.window().document.createElement("canvas")).width=t,r.height=e),r},[hoe,Xh,Tl,$Se,Xc,xy,Ii,Toe,Roe,ky,jSe].forEach((function(t){Gt(Jt,t)}));var VSe=[{type:"layout",extensions:vSe},{type:"renderer",extensions:[{name:"null",impl:ZN},{name:"base",impl:loe},{name:"canvas",impl:WSe}]}],Ooe={},Poe={};function sI(t,e,r){var n=r,i=l((function(C){kr("Can not register `"+e+"` for `"+t+"` since `"+C+"` already exists in the prototype and can not be overridden")}),"overrideErr");if(t==="core"){if(ov.prototype[e])return i(e);ov.prototype[e]=r}else if(t==="collection"){if(li.prototype[e])return i(e);li.prototype[e]=r}else if(t==="layout"){for(var a=l((function(C){this.options=C,r.call(this,C),ur(this._private)||(this._private={}),this._private.cy=C.cy,this._private.listeners=[],this.createEmitter()}),"Layout"),s=a.prototype=Object.create(r.prototype),o=[],u=0;u<o.length;u++){var h=o[u];s[h]=s[h]||function(){return this}}s.start&&!s.run?s.run=function(){return this.start(),this}:!s.start&&s.run&&(s.start=function(){return this.run(),this});var d=r.prototype.stop;s.stop=function(){var C=this.options;if(C&&C.animate){var E=this.animations;if(E)for(var _=0;_<E.length;_++)E[_].stop()}return d?d.call(this):this.emit("layoutstop"),this},s.destroy||(s.destroy=function(){return this}),s.cy=function(){return this._private.cy};var p=l((function(C){return C._private.cy}),"getCy"),f={addEventFields:l((function(C,E){E.layout=C,E.cy=p(C),E.target=C}),"addEventFields"),bubble:l((function(){return!0}),"bubble"),parent:l((function(C){return p(C)}),"parent")};Gt(s,{createEmitter:l((function(){return this._private.emitter=new ix(f,this),this}),"createEmitter"),emitter:l((function(){return this._private.emitter}),"emitter"),on:l((function(C,E){return this.emitter().on(C,E),this}),"on"),one:l((function(C,E){return this.emitter().one(C,E),this}),"one"),once:l((function(C,E){return this.emitter().one(C,E),this}),"once"),removeListener:l((function(C,E){return this.emitter().removeListener(C,E),this}),"removeListener"),removeAllListeners:l((function(){return this.emitter().removeAllListeners(),this}),"removeAllListeners"),emit:l((function(C,E){return this.emitter().emit(C,E),this}),"emit")}),br.eventAliasesOn(s),n=a}else if(t==="renderer"&&e!=="null"&&e!=="base"){var g=oI("renderer","base"),m=g.prototype,y=r,v=r.prototype,x=l((function(){g.apply(this,arguments),y.apply(this,arguments)}),"Renderer"),b=x.prototype;for(var w in m){var T=m[w];if(v[w]!=null)return i(w);b[w]=T}for(var k in v)b[k]=v[k];m.clientFunctions.forEach((function(C){b[C]=b[C]||function(){en("Renderer does not implement `renderer."+C+"()` on its prototype")}})),n=x}else if(t==="__proto__"||t==="constructor"||t==="prototype")return en(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return cae({map:Ooe,keys:[t,e],value:n})}function oI(t,e){return uae({map:Ooe,keys:[t,e]})}function Boe(t,e,r,n,i){return cae({map:Poe,keys:[t,e,r,n],value:i})}function $oe(t,e,r,n){return uae({map:Poe,keys:[t,e,r,n]})}l(sI,"setExtension"),l(oI,"getExtension"),l(Boe,"setModule"),l($oe,"getModule");var VS=l((function(){return arguments.length===2?oI.apply(null,arguments):arguments.length===3?sI.apply(null,arguments):arguments.length===4?$oe.apply(null,arguments):arguments.length===5?Boe.apply(null,arguments):void en("Invalid extension access syntax")}),"extension");ov.prototype.extension=VS,VSe.forEach((function(t){t.extensions.forEach((function(e){sI(t.type,e.name,e.impl)}))}));var Foe=l((function t(){if(!(this instanceof t))return new t;this.length=0}),"Stylesheet"),Ic=Foe.prototype;Ic.instanceString=function(){return"stylesheet"},Ic.selector=function(t){return this[this.length++]={selector:t,properties:[]},this},Ic.css=function(t,e){var r=this.length-1;if(Ot(t))this[r].properties.push({name:t,value:e});else if(ur(t))for(var n=t,i=Object.keys(n),a=0;a<i.length;a++){var s=i[a],o=n[s];if(o!=null){var u=bi.properties[s]||bi.properties[tk(s)];if(u!=null){var h=u.name,d=o;this[r].properties.push({name:h,value:d})}}}return this},Ic.style=Ic.css,Ic.generateStyle=function(t){var e=new bi(t);return this.appendToStyle(e)},Ic.appendToStyle=function(t){for(var e=0;e<this.length;e++){var r=this[e],n=r.selector,i=r.properties;t.selector(n);for(var a=0;a<i.length;a++){var s=i[a];t.css(s.name,s.value)}}return t};var js=l((function(t){return t===void 0&&(t={}),ur(t)?new ov(t):Ot(t)?VS.apply(VS,arguments):void 0}),"cytoscape");js.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(js),t.apply(null,e),this},js.warnings=function(t){return Lae(t)},js.version="3.31.0",js.stylesheet=js.Stylesheet=Foe;var pB=qn({"../../node_modules/.pnpm/layout-base@1.0.2/node_modules/layout-base/layout-base.js"(t,e){l((function(r,n){typeof t=="object"&&typeof e=="object"?e.exports=n():typeof define=="function"&&define.amd?define([],n):typeof t=="object"?t.layoutBase=n():r.layoutBase=n()}),"webpackUniversalModuleDefinition")(t,(function(){return(function(r){var n={};function i(a){if(n[a])return n[a].exports;var s=n[a]={i:a,l:!1,exports:{}};return r[a].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return l(i,"__webpack_require__"),i.m=r,i.c=n,i.i=function(a){return a},i.d=function(a,s,o){i.o(a,s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!0,get:o})},i.n=function(a){var s=a&&a.__esModule?l((function(){return a.default}),"getDefault"):l((function(){return a}),"getModuleExports");return i.d(s,"a",s),s},i.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},i.p="",i(i.s=26)})([function(r,n,i){function a(){}l(a,"LayoutConstants"),a.QUALITY=1,a.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,a.DEFAULT_INCREMENTAL=!1,a.DEFAULT_ANIMATION_ON_LAYOUT=!0,a.DEFAULT_ANIMATION_DURING_LAYOUT=!1,a.DEFAULT_ANIMATION_PERIOD=50,a.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,a.DEFAULT_GRAPH_MARGIN=15,a.NODE_DIMENSIONS_INCLUDE_LABELS=!1,a.SIMPLE_NODE_SIZE=40,a.SIMPLE_NODE_HALF_SIZE=a.SIMPLE_NODE_SIZE/2,a.EMPTY_COMPOUND_NODE_SIZE=40,a.MIN_EDGE_LENGTH=1,a.WORLD_BOUNDARY=1e6,a.INITIAL_WORLD_BOUNDARY=a.WORLD_BOUNDARY/1e3,a.WORLD_CENTER_X=1200,a.WORLD_CENTER_Y=900,r.exports=a},function(r,n,i){var a=i(2),s=i(8),o=i(9);function u(d,p,f){a.call(this,f),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=f,this.bendpoints=[],this.source=d,this.target=p}for(var h in l(u,"LEdge"),u.prototype=Object.create(a.prototype),a)u[h]=a[h];u.prototype.getSource=function(){return this.source},u.prototype.getTarget=function(){return this.target},u.prototype.isInterGraph=function(){return this.isInterGraph},u.prototype.getLength=function(){return this.length},u.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},u.prototype.getBendpoints=function(){return this.bendpoints},u.prototype.getLca=function(){return this.lca},u.prototype.getSourceInLca=function(){return this.sourceInLca},u.prototype.getTargetInLca=function(){return this.targetInLca},u.prototype.getOtherEnd=function(d){if(this.source===d)return this.target;if(this.target===d)return this.source;throw"Node is not incident with this edge"},u.prototype.getOtherEndInGraph=function(d,p){for(var f=this.getOtherEnd(d),g=p.getGraphManager().getRoot();;){if(f.getOwner()==p)return f;if(f.getOwner()==g)break;f=f.getOwner().getParent()}return null},u.prototype.updateLength=function(){var d=new Array(4);this.isOverlapingSourceAndTarget=s.getIntersection(this.target.getRect(),this.source.getRect(),d),this.isOverlapingSourceAndTarget||(this.lengthX=d[0]-d[2],this.lengthY=d[1]-d[3],Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},u.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},r.exports=u},function(r,n,i){function a(s){this.vGraphObject=s}l(a,"LGraphObject"),r.exports=a},function(r,n,i){var a=i(2),s=i(10),o=i(13),u=i(0),h=i(16),d=i(4);function p(g,m,y,v){y==null&&v==null&&(v=m),a.call(this,v),g.graphManager!=null&&(g=g.graphManager),this.estimatedSize=s.MIN_VALUE,this.inclusionTreeDepth=s.MAX_VALUE,this.vGraphObject=v,this.edges=[],this.graphManager=g,this.rect=y!=null&&m!=null?new o(m.x,m.y,y.width,y.height):new o}for(var f in l(p,"LNode"),p.prototype=Object.create(a.prototype),a)p[f]=a[f];p.prototype.getEdges=function(){return this.edges},p.prototype.getChild=function(){return this.child},p.prototype.getOwner=function(){return this.owner},p.prototype.getWidth=function(){return this.rect.width},p.prototype.setWidth=function(g){this.rect.width=g},p.prototype.getHeight=function(){return this.rect.height},p.prototype.setHeight=function(g){this.rect.height=g},p.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},p.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},p.prototype.getCenter=function(){return new d(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},p.prototype.getLocation=function(){return new d(this.rect.x,this.rect.y)},p.prototype.getRect=function(){return this.rect},p.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},p.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},p.prototype.setRect=function(g,m){this.rect.x=g.x,this.rect.y=g.y,this.rect.width=m.width,this.rect.height=m.height},p.prototype.setCenter=function(g,m){this.rect.x=g-this.rect.width/2,this.rect.y=m-this.rect.height/2},p.prototype.setLocation=function(g,m){this.rect.x=g,this.rect.y=m},p.prototype.moveBy=function(g,m){this.rect.x+=g,this.rect.y+=m},p.prototype.getEdgeListToNode=function(g){var m=[],y=this;return y.edges.forEach((function(v){if(v.target==g){if(v.source!=y)throw"Incorrect edge source!";m.push(v)}})),m},p.prototype.getEdgesBetween=function(g){var m=[],y=this;return y.edges.forEach((function(v){if(v.source!=y&&v.target!=y)throw"Incorrect edge source and/or target";v.target!=g&&v.source!=g||m.push(v)})),m},p.prototype.getNeighborsList=function(){var g=new Set,m=this;return m.edges.forEach((function(y){if(y.source==m)g.add(y.target);else{if(y.target!=m)throw"Incorrect incidency!";g.add(y.source)}})),g},p.prototype.withChildren=function(){var g=new Set;if(g.add(this),this.child!=null)for(var m=this.child.getNodes(),y=0;y<m.length;y++)m[y].withChildren().forEach((function(v){g.add(v)}));return g},p.prototype.getNoOfChildren=function(){var g=0;if(this.child==null)g=1;else for(var m=this.child.getNodes(),y=0;y<m.length;y++)g+=m[y].getNoOfChildren();return g==0&&(g=1),g},p.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},p.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},p.prototype.scatter=function(){var g,m,y=-u.INITIAL_WORLD_BOUNDARY,v=u.INITIAL_WORLD_BOUNDARY;g=u.WORLD_CENTER_X+h.nextDouble()*(v-y)+y;var x=-u.INITIAL_WORLD_BOUNDARY,b=u.INITIAL_WORLD_BOUNDARY;m=u.WORLD_CENTER_Y+h.nextDouble()*(b-x)+x,this.rect.x=g,this.rect.y=m},p.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var g=this.getChild();if(g.updateBounds(!0),this.rect.x=g.getLeft(),this.rect.y=g.getTop(),this.setWidth(g.getRight()-g.getLeft()),this.setHeight(g.getBottom()-g.getTop()),u.NODE_DIMENSIONS_INCLUDE_LABELS){var m=g.getRight()-g.getLeft(),y=g.getBottom()-g.getTop();this.labelWidth>m&&(this.rect.x-=(this.labelWidth-m)/2,this.setWidth(this.labelWidth)),this.labelHeight>y&&(this.labelPos=="center"?this.rect.y-=(this.labelHeight-y)/2:this.labelPos=="top"&&(this.rect.y-=this.labelHeight-y),this.setHeight(this.labelHeight))}}},p.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==s.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},p.prototype.transform=function(g){var m=this.rect.x;m>u.WORLD_BOUNDARY?m=u.WORLD_BOUNDARY:m<-u.WORLD_BOUNDARY&&(m=-u.WORLD_BOUNDARY);var y=this.rect.y;y>u.WORLD_BOUNDARY?y=u.WORLD_BOUNDARY:y<-u.WORLD_BOUNDARY&&(y=-u.WORLD_BOUNDARY);var v=new d(m,y),x=g.inverseTransformPoint(v);this.setLocation(x.x,x.y)},p.prototype.getLeft=function(){return this.rect.x},p.prototype.getRight=function(){return this.rect.x+this.rect.width},p.prototype.getTop=function(){return this.rect.y},p.prototype.getBottom=function(){return this.rect.y+this.rect.height},p.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},r.exports=p},function(r,n,i){function a(s,o){s==null&&o==null?(this.x=0,this.y=0):(this.x=s,this.y=o)}l(a,"PointD"),a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.setX=function(s){this.x=s},a.prototype.setY=function(s){this.y=s},a.prototype.getDifference=function(s){return new DimensionD(this.x-s.x,this.y-s.y)},a.prototype.getCopy=function(){return new a(this.x,this.y)},a.prototype.translate=function(s){return this.x+=s.width,this.y+=s.height,this},r.exports=a},function(r,n,i){var a=i(2),s=i(10),o=i(0),u=i(6),h=i(3),d=i(1),p=i(13),f=i(12),g=i(11);function m(v,x,b){a.call(this,b),this.estimatedSize=s.MIN_VALUE,this.margin=o.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=v,x!=null&&x instanceof u?this.graphManager=x:x!=null&&x instanceof Layout&&(this.graphManager=x.graphManager)}for(var y in l(m,"LGraph"),m.prototype=Object.create(a.prototype),a)m[y]=a[y];m.prototype.getNodes=function(){return this.nodes},m.prototype.getEdges=function(){return this.edges},m.prototype.getGraphManager=function(){return this.graphManager},m.prototype.getParent=function(){return this.parent},m.prototype.getLeft=function(){return this.left},m.prototype.getRight=function(){return this.right},m.prototype.getTop=function(){return this.top},m.prototype.getBottom=function(){return this.bottom},m.prototype.isConnected=function(){return this.isConnected},m.prototype.add=function(v,x,b){if(x==null&&b==null){var w=v;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(w)>-1)throw"Node already in graph!";return w.owner=this,this.getNodes().push(w),w}var T=v;if(!(this.getNodes().indexOf(x)>-1&&this.getNodes().indexOf(b)>-1))throw"Source or target not in graph!";if(x.owner!=b.owner||x.owner!=this)throw"Both owners must be this graph!";return x.owner!=b.owner?null:(T.source=x,T.target=b,T.isInterGraph=!1,this.getEdges().push(T),x.edges.push(T),b!=x&&b.edges.push(T),T)},m.prototype.remove=function(v){var x=v;if(v instanceof h){if(x==null)throw"Node is null!";if(x.owner==null||x.owner!=this)throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var b=x.edges.slice(),w=b.length,T=0;T<w;T++)(k=b[T]).isInterGraph?this.graphManager.remove(k):k.source.owner.remove(k);if((C=this.nodes.indexOf(x))==-1)throw"Node not in owner node list!";this.nodes.splice(C,1)}else if(v instanceof d){var k;if((k=v)==null)throw"Edge is null!";if(k.source==null||k.target==null)throw"Source and/or target is null!";if(k.source.owner==null||k.target.owner==null||k.source.owner!=this||k.target.owner!=this)throw"Source and/or target owner is invalid!";var C,E=k.source.edges.indexOf(k),_=k.target.edges.indexOf(k);if(!(E>-1&&_>-1))throw"Source and/or target doesn't know this edge!";if(k.source.edges.splice(E,1),k.target!=k.source&&k.target.edges.splice(_,1),(C=k.source.owner.getEdges().indexOf(k))==-1)throw"Not in owner's edge list!";k.source.owner.getEdges().splice(C,1)}},m.prototype.updateLeftTop=function(){for(var v,x,b,w=s.MAX_VALUE,T=s.MAX_VALUE,k=this.getNodes(),C=k.length,E=0;E<C;E++){var _=k[E];w>(v=_.getTop())&&(w=v),T>(x=_.getLeft())&&(T=x)}return w==s.MAX_VALUE?null:(b=k[0].getParent().paddingLeft!=null?k[0].getParent().paddingLeft:this.margin,this.left=T-b,this.top=w-b,new f(this.left,this.top))},m.prototype.updateBounds=function(v){for(var x,b,w,T,k,C=s.MAX_VALUE,E=-s.MAX_VALUE,_=s.MAX_VALUE,S=-s.MAX_VALUE,N=this.nodes,O=N.length,B=0;B<O;B++){var L=N[B];v&&L.child!=null&&L.updateBounds(),C>(x=L.getLeft())&&(C=x),E<(b=L.getRight())&&(E=b),_>(w=L.getTop())&&(_=w),S<(T=L.getBottom())&&(S=T)}var I=new p(C,_,E-C,S-_);C==s.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),k=N[0].getParent().paddingLeft!=null?N[0].getParent().paddingLeft:this.margin,this.left=I.x-k,this.right=I.x+I.width+k,this.top=I.y-k,this.bottom=I.y+I.height+k},m.calculateBounds=function(v){for(var x,b,w,T,k=s.MAX_VALUE,C=-s.MAX_VALUE,E=s.MAX_VALUE,_=-s.MAX_VALUE,S=v.length,N=0;N<S;N++){var O=v[N];k>(x=O.getLeft())&&(k=x),C<(b=O.getRight())&&(C=b),E>(w=O.getTop())&&(E=w),_<(T=O.getBottom())&&(_=T)}return new p(k,E,C-k,_-E)},m.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},m.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},m.prototype.calcEstimatedSize=function(){for(var v=0,x=this.nodes,b=x.length,w=0;w<b;w++)v+=x[w].calcEstimatedSize();return this.estimatedSize=v==0?o.EMPTY_COMPOUND_NODE_SIZE:v/Math.sqrt(this.nodes.length),this.estimatedSize},m.prototype.updateConnected=function(){var v=this;if(this.nodes.length!=0){var x,b,w=new g,T=new Set,k=this.nodes[0];for(k.withChildren().forEach((function(S){w.push(S),T.add(S)}));w.length!==0;)for(var C=(x=(k=w.shift()).getEdges()).length,E=0;E<C;E++)(b=x[E].getOtherEndInGraph(k,this))!=null&&!T.has(b)&&b.withChildren().forEach((function(S){w.push(S),T.add(S)}));if(this.isConnected=!1,T.size>=this.nodes.length){var _=0;T.forEach((function(S){S.owner==v&&_++})),_==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},r.exports=m},function(r,n,i){var a,s=i(1);function o(u){a=i(5),this.layout=u,this.graphs=[],this.edges=[]}l(o,"LGraphManager"),o.prototype.addRoot=function(){var u=this.layout.newGraph(),h=this.layout.newNode(null),d=this.add(u,h);return this.setRootGraph(d),this.rootGraph},o.prototype.add=function(u,h,d,p,f){if(d==null&&p==null&&f==null){if(u==null)throw"Graph is null!";if(h==null)throw"Parent node is null!";if(this.graphs.indexOf(u)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(u),u.parent!=null)throw"Already has a parent!";if(h.child!=null)throw"Already has a child!";return u.parent=h,h.child=u,u}f=d,d=u;var g=(p=h).getOwner(),m=f.getOwner();if(g==null||g.getGraphManager()!=this)throw"Source not in this graph mgr!";if(m==null||m.getGraphManager()!=this)throw"Target not in this graph mgr!";if(g==m)return d.isInterGraph=!1,g.add(d,p,f);if(d.isInterGraph=!0,d.source=p,d.target=f,this.edges.indexOf(d)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(d),d.source==null||d.target==null)throw"Edge source and/or target is null!";if(d.source.edges.indexOf(d)!=-1||d.target.edges.indexOf(d)!=-1)throw"Edge already in source and/or target incidency list!";return d.source.edges.push(d),d.target.edges.push(d),d},o.prototype.remove=function(u){if(u instanceof a){var h=u;if(h.getGraphManager()!=this)throw"Graph not in this graph mgr";if(h!=this.rootGraph&&(h.parent==null||h.parent.graphManager!=this))throw"Invalid parent node!";for(var d,p=[],f=(p=p.concat(h.getEdges())).length,g=0;g<f;g++)d=p[g],h.remove(d);var m,y=[];for(f=(y=y.concat(h.getNodes())).length,g=0;g<f;g++)m=y[g],h.remove(m);h==this.rootGraph&&this.setRootGraph(null);var v=this.graphs.indexOf(h);this.graphs.splice(v,1),h.parent=null}else if(u instanceof s){if((d=u)==null)throw"Edge is null!";if(!d.isInterGraph)throw"Not an inter-graph edge!";if(d.source==null||d.target==null)throw"Source and/or target is null!";if(d.source.edges.indexOf(d)==-1||d.target.edges.indexOf(d)==-1)throw"Source and/or target doesn't know this edge!";if(v=d.source.edges.indexOf(d),d.source.edges.splice(v,1),v=d.target.edges.indexOf(d),d.target.edges.splice(v,1),d.source.owner==null||d.source.owner.getGraphManager()==null)throw"Edge owner graph or owner graph manager is null!";if(d.source.owner.getGraphManager().edges.indexOf(d)==-1)throw"Not in owner graph manager's edge list!";v=d.source.owner.getGraphManager().edges.indexOf(d),d.source.owner.getGraphManager().edges.splice(v,1)}},o.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},o.prototype.getGraphs=function(){return this.graphs},o.prototype.getAllNodes=function(){if(this.allNodes==null){for(var u=[],h=this.getGraphs(),d=h.length,p=0;p<d;p++)u=u.concat(h[p].getNodes());this.allNodes=u}return this.allNodes},o.prototype.resetAllNodes=function(){this.allNodes=null},o.prototype.resetAllEdges=function(){this.allEdges=null},o.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},o.prototype.getAllEdges=function(){if(this.allEdges==null){var u=[],h=this.getGraphs();h.length;for(var d=0;d<h.length;d++)u=u.concat(h[d].getEdges());u=u.concat(this.edges),this.allEdges=u}return this.allEdges},o.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},o.prototype.setAllNodesToApplyGravitation=function(u){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=u},o.prototype.getRoot=function(){return this.rootGraph},o.prototype.setRootGraph=function(u){if(u.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=u,u.parent==null&&(u.parent=this.layout.newNode("Root node"))},o.prototype.getLayout=function(){return this.layout},o.prototype.isOneAncestorOfOther=function(u,h){if(u==null||h==null)throw"assert failed";if(u==h)return!0;for(var d,p=u.getOwner();(d=p.getParent())!=null;){if(d==h)return!0;if((p=d.getOwner())==null)break}for(p=h.getOwner();(d=p.getParent())!=null;){if(d==u)return!0;if((p=d.getOwner())==null)break}return!1},o.prototype.calcLowestCommonAncestors=function(){for(var u,h,d,p,f,g=this.getAllEdges(),m=g.length,y=0;y<m;y++)if(h=(u=g[y]).source,d=u.target,u.lca=null,u.sourceInLca=h,u.targetInLca=d,h!=d){for(p=h.getOwner();u.lca==null;){for(u.targetInLca=d,f=d.getOwner();u.lca==null;){if(f==p){u.lca=f;break}if(f==this.rootGraph)break;if(u.lca!=null)throw"assert failed";u.targetInLca=f.getParent(),f=u.targetInLca.getOwner()}if(p==this.rootGraph)break;u.lca==null&&(u.sourceInLca=p.getParent(),p=u.sourceInLca.getOwner())}if(u.lca==null)throw"assert failed"}else u.lca=h.getOwner()},o.prototype.calcLowestCommonAncestor=function(u,h){if(u==h)return u.getOwner();for(var d=u.getOwner();d!=null;){for(var p=h.getOwner();p!=null;){if(p==d)return p;p=p.getParent().getOwner()}d=d.getParent().getOwner()}return d},o.prototype.calcInclusionTreeDepths=function(u,h){var d;u==null&&h==null&&(u=this.rootGraph,h=1);for(var p=u.getNodes(),f=p.length,g=0;g<f;g++)(d=p[g]).inclusionTreeDepth=h,d.child!=null&&this.calcInclusionTreeDepths(d.child,h+1)},o.prototype.includesInvalidEdge=function(){for(var u,h=this.edges.length,d=0;d<h;d++)if(u=this.edges[d],this.isOneAncestorOfOther(u.source,u.target))return!0;return!1},r.exports=o},function(r,n,i){var a=i(0);function s(){}for(var o in l(s,"FDLayoutConstants"),a)s[o]=a[o];s.MAX_ITERATIONS=2500,s.DEFAULT_EDGE_LENGTH=50,s.DEFAULT_SPRING_STRENGTH=.45,s.DEFAULT_REPULSION_STRENGTH=4500,s.DEFAULT_GRAVITY_STRENGTH=.4,s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,s.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,s.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,s.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,s.COOLING_ADAPTATION_FACTOR=.33,s.ADAPTATION_LOWER_NODE_LIMIT=1e3,s.ADAPTATION_UPPER_NODE_LIMIT=5e3,s.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,s.MAX_NODE_DISPLACEMENT=3*s.MAX_NODE_DISPLACEMENT_INCREMENTAL,s.MIN_REPULSION_DIST=s.DEFAULT_EDGE_LENGTH/10,s.CONVERGENCE_CHECK_PERIOD=100,s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,s.MIN_EDGE_LENGTH=1,s.GRID_CALCULATION_CHECK_PERIOD=10,r.exports=s},function(r,n,i){var a=i(12);function s(){}l(s,"IGeometry"),s.calcSeparationAmount=function(o,u,h,d){if(!o.intersects(u))throw"assert failed";var p=new Array(2);this.decideDirectionsForOverlappingNodes(o,u,p),h[0]=Math.min(o.getRight(),u.getRight())-Math.max(o.x,u.x),h[1]=Math.min(o.getBottom(),u.getBottom())-Math.max(o.y,u.y),o.getX()<=u.getX()&&o.getRight()>=u.getRight()?h[0]+=Math.min(u.getX()-o.getX(),o.getRight()-u.getRight()):u.getX()<=o.getX()&&u.getRight()>=o.getRight()&&(h[0]+=Math.min(o.getX()-u.getX(),u.getRight()-o.getRight())),o.getY()<=u.getY()&&o.getBottom()>=u.getBottom()?h[1]+=Math.min(u.getY()-o.getY(),o.getBottom()-u.getBottom()):u.getY()<=o.getY()&&u.getBottom()>=o.getBottom()&&(h[1]+=Math.min(o.getY()-u.getY(),u.getBottom()-o.getBottom()));var f=Math.abs((u.getCenterY()-o.getCenterY())/(u.getCenterX()-o.getCenterX()));u.getCenterY()===o.getCenterY()&&u.getCenterX()===o.getCenterX()&&(f=1);var g=f*h[0],m=h[1]/f;h[0]<m?m=h[0]:g=h[1],h[0]=-1*p[0]*(m/2+d),h[1]=-1*p[1]*(g/2+d)},s.decideDirectionsForOverlappingNodes=function(o,u,h){o.getCenterX()<u.getCenterX()?h[0]=-1:h[0]=1,o.getCenterY()<u.getCenterY()?h[1]=-1:h[1]=1},s.getIntersection2=function(o,u,h){var d=o.getCenterX(),p=o.getCenterY(),f=u.getCenterX(),g=u.getCenterY();if(o.intersects(u))return h[0]=d,h[1]=p,h[2]=f,h[3]=g,!0;var m=o.getX(),y=o.getY(),v=o.getRight(),x=o.getX(),b=o.getBottom(),w=o.getRight(),T=o.getWidthHalf(),k=o.getHeightHalf(),C=u.getX(),E=u.getY(),_=u.getRight(),S=u.getX(),N=u.getBottom(),O=u.getRight(),B=u.getWidthHalf(),L=u.getHeightHalf(),I=!1,A=!1;if(d===f){if(p>g)return h[0]=d,h[1]=y,h[2]=f,h[3]=N,!1;if(p<g)return h[0]=d,h[1]=b,h[2]=f,h[3]=E,!1}else if(p===g){if(d>f)return h[0]=m,h[1]=p,h[2]=_,h[3]=g,!1;if(d<f)return h[0]=v,h[1]=p,h[2]=C,h[3]=g,!1}else{var M=o.height/o.width,D=u.height/u.width,R=(g-p)/(f-d),P=void 0,$=void 0,z=void 0,q=void 0,W=void 0,Q=void 0;if(-M===R?d>f?(h[0]=x,h[1]=b,I=!0):(h[0]=v,h[1]=y,I=!0):M===R&&(d>f?(h[0]=m,h[1]=y,I=!0):(h[0]=w,h[1]=b,I=!0)),-D===R?f>d?(h[2]=S,h[3]=N,A=!0):(h[2]=_,h[3]=E,A=!0):D===R&&(f>d?(h[2]=C,h[3]=E,A=!0):(h[2]=O,h[3]=N,A=!0)),I&&A)return!1;if(d>f?p>g?(P=this.getCardinalDirection(M,R,4),$=this.getCardinalDirection(D,R,2)):(P=this.getCardinalDirection(-M,R,3),$=this.getCardinalDirection(-D,R,1)):p>g?(P=this.getCardinalDirection(-M,R,1),$=this.getCardinalDirection(-D,R,3)):(P=this.getCardinalDirection(M,R,2),$=this.getCardinalDirection(D,R,4)),!I)switch(P){case 1:q=y,z=d+-k/R,h[0]=z,h[1]=q;break;case 2:z=w,q=p+T*R,h[0]=z,h[1]=q;break;case 3:q=b,z=d+k/R,h[0]=z,h[1]=q;break;case 4:z=x,q=p+-T*R,h[0]=z,h[1]=q}if(!A)switch($){case 1:Q=E,W=f+-L/R,h[2]=W,h[3]=Q;break;case 2:W=O,Q=g+B*R,h[2]=W,h[3]=Q;break;case 3:Q=N,W=f+L/R,h[2]=W,h[3]=Q;break;case 4:W=S,Q=g+-B*R,h[2]=W,h[3]=Q}}return!1},s.getCardinalDirection=function(o,u,h){return o>u?h:1+h%4},s.getIntersection=function(o,u,h,d){if(d==null)return this.getIntersection2(o,u,h);var p,f,g,m,y,v,x,b=o.x,w=o.y,T=u.x,k=u.y,C=h.x,E=h.y,_=d.x,S=d.y;return(x=(p=k-w)*(m=C-_)-(f=S-E)*(g=b-T))===0?null:new a((g*(v=_*E-C*S)-m*(y=T*w-b*k))/x,(f*y-p*v)/x)},s.angleOfVector=function(o,u,h,d){var p=void 0;return o!==h?(p=Math.atan((d-u)/(h-o)),h<o?p+=Math.PI:d<u&&(p+=this.TWO_PI)):p=d<u?this.ONE_AND_HALF_PI:this.HALF_PI,p},s.doIntersect=function(o,u,h,d){var p=o.x,f=o.y,g=u.x,m=u.y,y=h.x,v=h.y,x=d.x,b=d.y,w=(g-p)*(b-v)-(x-y)*(m-f);if(w===0)return!1;var T=((b-v)*(x-p)+(y-x)*(b-f))/w,k=((f-m)*(x-p)+(g-p)*(b-f))/w;return 0<T&&T<1&&0<k&&k<1},s.HALF_PI=.5*Math.PI,s.ONE_AND_HALF_PI=1.5*Math.PI,s.TWO_PI=2*Math.PI,s.THREE_PI=3*Math.PI,r.exports=s},function(r,n,i){function a(){}l(a,"IMath"),a.sign=function(s){return s>0?1:s<0?-1:0},a.floor=function(s){return s<0?Math.ceil(s):Math.floor(s)},a.ceil=function(s){return s<0?Math.floor(s):Math.ceil(s)},r.exports=a},function(r,n,i){function a(){}l(a,"Integer"),a.MAX_VALUE=2147483647,a.MIN_VALUE=-2147483648,r.exports=a},function(r,n,i){var a=(function(){function p(f,g){for(var m=0;m<g.length;m++){var y=g[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(f,y.key,y)}}return l(p,"defineProperties"),function(f,g,m){return g&&p(f.prototype,g),m&&p(f,m),f}})();function s(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")}l(s,"_classCallCheck");var o=l((function(p){return{value:p,next:null,prev:null}}),"nodeFrom"),u=l((function(p,f,g,m){return p!==null?p.next=f:m.head=f,g!==null?g.prev=f:m.tail=f,f.prev=p,f.next=g,m.length++,f}),"add"),h=l((function(p,f){var g=p.prev,m=p.next;return g!==null?g.next=m:f.head=m,m!==null?m.prev=g:f.tail=g,p.prev=p.next=null,f.length--,p}),"_remove"),d=(function(){function p(f){var g=this;s(this,p),this.length=0,this.head=null,this.tail=null,f?.forEach((function(m){return g.push(m)}))}return l(p,"LinkedList"),a(p,[{key:"size",value:l((function(){return this.length}),"size")},{key:"insertBefore",value:l((function(f,g){return u(g.prev,o(f),g,this)}),"insertBefore")},{key:"insertAfter",value:l((function(f,g){return u(g,o(f),g.next,this)}),"insertAfter")},{key:"insertNodeBefore",value:l((function(f,g){return u(g.prev,f,g,this)}),"insertNodeBefore")},{key:"insertNodeAfter",value:l((function(f,g){return u(g,f,g.next,this)}),"insertNodeAfter")},{key:"push",value:l((function(f){return u(this.tail,o(f),null,this)}),"push")},{key:"unshift",value:l((function(f){return u(null,o(f),this.head,this)}),"unshift")},{key:"remove",value:l((function(f){return h(f,this)}),"remove")},{key:"pop",value:l((function(){return h(this.tail,this).value}),"pop")},{key:"popNode",value:l((function(){return h(this.tail,this)}),"popNode")},{key:"shift",value:l((function(){return h(this.head,this).value}),"shift")},{key:"shiftNode",value:l((function(){return h(this.head,this)}),"shiftNode")},{key:"get_object_at",value:l((function(f){if(f<=this.length()){for(var g=1,m=this.head;g<f;)m=m.next,g++;return m.value}}),"get_object_at")},{key:"set_object_at",value:l((function(f,g){if(f<=this.length()){for(var m=1,y=this.head;m<f;)y=y.next,m++;y.value=g}}),"set_object_at")}]),p})();r.exports=d},function(r,n,i){function a(s,o,u){this.x=null,this.y=null,s==null&&o==null&&u==null?(this.x=0,this.y=0):typeof s=="number"&&typeof o=="number"&&u==null?(this.x=s,this.y=o):s.constructor.name=="Point"&&o==null&&u==null&&(u=s,this.x=u.x,this.y=u.y)}l(a,"Point"),a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.getLocation=function(){return new a(this.x,this.y)},a.prototype.setLocation=function(s,o,u){s.constructor.name=="Point"&&o==null&&u==null?(u=s,this.setLocation(u.x,u.y)):typeof s=="number"&&typeof o=="number"&&u==null&&(parseInt(s)==s&&parseInt(o)==o?this.move(s,o):(this.x=Math.floor(s+.5),this.y=Math.floor(o+.5)))},a.prototype.move=function(s,o){this.x=s,this.y=o},a.prototype.translate=function(s,o){this.x+=s,this.y+=o},a.prototype.equals=function(s){if(s.constructor.name=="Point"){var o=s;return this.x==o.x&&this.y==o.y}return this==s},a.prototype.toString=function(){return new a().constructor.name+"[x="+this.x+",y="+this.y+"]"},r.exports=a},function(r,n,i){function a(s,o,u,h){this.x=0,this.y=0,this.width=0,this.height=0,s!=null&&o!=null&&u!=null&&h!=null&&(this.x=s,this.y=o,this.width=u,this.height=h)}l(a,"RectangleD"),a.prototype.getX=function(){return this.x},a.prototype.setX=function(s){this.x=s},a.prototype.getY=function(){return this.y},a.prototype.setY=function(s){this.y=s},a.prototype.getWidth=function(){return this.width},a.prototype.setWidth=function(s){this.width=s},a.prototype.getHeight=function(){return this.height},a.prototype.setHeight=function(s){this.height=s},a.prototype.getRight=function(){return this.x+this.width},a.prototype.getBottom=function(){return this.y+this.height},a.prototype.intersects=function(s){return!(this.getRight()<s.x)&&!(this.getBottom()<s.y)&&!(s.getRight()<this.x)&&!(s.getBottom()<this.y)},a.prototype.getCenterX=function(){return this.x+this.width/2},a.prototype.getMinX=function(){return this.getX()},a.prototype.getMaxX=function(){return this.getX()+this.width},a.prototype.getCenterY=function(){return this.y+this.height/2},a.prototype.getMinY=function(){return this.getY()},a.prototype.getMaxY=function(){return this.getY()+this.height},a.prototype.getWidthHalf=function(){return this.width/2},a.prototype.getHeightHalf=function(){return this.height/2},r.exports=a},function(r,n,i){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function s(){}l(s,"UniqueIDGeneretor"),s.lastID=0,s.createID=function(o){return s.isPrimitive(o)?o:(o.uniqueID!=null||(o.uniqueID=s.getString(),s.lastID++),o.uniqueID)},s.getString=function(o){return o==null&&(o=s.lastID),"Object#"+o},s.isPrimitive=function(o){var u=o===void 0?"undefined":a(o);return o==null||u!="object"&&u!="function"},r.exports=s},function(r,n,i){function a(y){if(Array.isArray(y)){for(var v=0,x=Array(y.length);v<y.length;v++)x[v]=y[v];return x}return Array.from(y)}l(a,"_toConsumableArray");var s=i(0),o=i(6),u=i(3),h=i(1),d=i(5),p=i(4),f=i(17),g=i(27);function m(y){g.call(this),this.layoutQuality=s.QUALITY,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=s.DEFAULT_INCREMENTAL,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new o(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,y!=null&&(this.isRemoteUse=y)}l(m,"Layout"),m.RANDOM_SEED=1,m.prototype=Object.create(g.prototype),m.prototype.getGraphManager=function(){return this.graphManager},m.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},m.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},m.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},m.prototype.newGraphManager=function(){var y=new o(this);return this.graphManager=y,y},m.prototype.newGraph=function(y){return new d(null,this.graphManager,y)},m.prototype.newNode=function(y){return new u(this.graphManager,y)},m.prototype.newEdge=function(y){return new h(null,null,y)},m.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},m.prototype.runLayout=function(){var y;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),y=!this.checkLayoutSuccess()&&this.layout(),s.ANIMATE!=="during"&&(y&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,y)},m.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},m.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var y=this.graphManager.getAllEdges(),v=0;v<y.length;v++)y[v];var x=this.graphManager.getRoot().getNodes();for(v=0;v<x.length;v++)x[v];this.update(this.graphManager.getRoot())}},m.prototype.update=function(y){if(y==null)this.update2();else if(y instanceof u){var v=y;if(v.getChild()!=null)for(var x=v.getChild().getNodes(),b=0;b<x.length;b++)update(x[b]);v.vGraphObject!=null&&v.vGraphObject.update(v)}else if(y instanceof h){var w=y;w.vGraphObject!=null&&w.vGraphObject.update(w)}else if(y instanceof d){var T=y;T.vGraphObject!=null&&T.vGraphObject.update(T)}},m.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=s.QUALITY,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=s.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},m.prototype.transform=function(y){if(y==null)this.transform(new p(0,0));else{var v=new f,x=this.graphManager.getRoot().updateLeftTop();if(x!=null){v.setWorldOrgX(y.x),v.setWorldOrgY(y.y),v.setDeviceOrgX(x.x),v.setDeviceOrgY(x.y);for(var b=this.getAllNodes(),w=0;w<b.length;w++)b[w].transform(v)}}},m.prototype.positionNodesRandomly=function(y){if(y==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var v,x,b=y.getNodes(),w=0;w<b.length;w++)(x=(v=b[w]).getChild())==null||x.getNodes().length==0?v.scatter():(this.positionNodesRandomly(x),v.updateBounds())},m.prototype.getFlatForest=function(){for(var y=[],v=!0,x=this.graphManager.getRoot().getNodes(),b=!0,w=0;w<x.length;w++)x[w].getChild()!=null&&(b=!1);if(!b)return y;var T=new Set,k=[],C=new Map,E=[];for(E=E.concat(x);E.length>0&&v;){for(k.push(E[0]);k.length>0&&v;){var _=k[0];k.splice(0,1),T.add(_);var S=_.getEdges();for(w=0;w<S.length;w++){var N=S[w].getOtherEnd(_);if(C.get(_)!=N){if(T.has(N)){v=!1;break}k.push(N),C.set(N,_)}}}if(v){var O=[].concat(a(T));for(y.push(O),w=0;w<O.length;w++){var B=O[w],L=E.indexOf(B);L>-1&&E.splice(L,1)}T=new Set,C=new Map}else y=[]}return y},m.prototype.createDummyNodesForBendpoints=function(y){for(var v=[],x=y.source,b=this.graphManager.calcLowestCommonAncestor(y.source,y.target),w=0;w<y.bendpoints.length;w++){var T=this.newNode(null);T.setRect(new Point(0,0),new Dimension(1,1)),b.add(T);var k=this.newEdge(null);this.graphManager.add(k,x,T),v.add(T),x=T}return k=this.newEdge(null),this.graphManager.add(k,x,y.target),this.edgeToDummyNodes.set(y,v),y.isInterGraph()?this.graphManager.remove(y):b.remove(y),v},m.prototype.createBendpointsFromDummyNodes=function(){var y=[];y=y.concat(this.graphManager.getAllEdges()),y=[].concat(a(this.edgeToDummyNodes.keys())).concat(y);for(var v=0;v<y.length;v++){var x=y[v];if(x.bendpoints.length>0){for(var b=this.edgeToDummyNodes.get(x),w=0;w<b.length;w++){var T=b[w],k=new p(T.getCenterX(),T.getCenterY()),C=x.bendpoints.get(w);C.x=k.x,C.y=k.y,T.getOwner().remove(T)}this.graphManager.add(x,x.source,x.target)}}},m.transform=function(y,v,x,b){if(x!=null&&b!=null){var w=v;return y<=50?w-=(v-v/x)/50*(50-y):w+=(v*b-v)/50*(y-50),w}var T,k;return y<=50?(T=9*v/500,k=v/10):(T=9*v/50,k=-8*v),T*y+k},m.findCenterOfTree=function(y){var v=[];v=v.concat(y);var x=[],b=new Map,w=!1,T=null;v.length!=1&&v.length!=2||(w=!0,T=v[0]);for(var k=0;k<v.length;k++){var C=(S=v[k]).getNeighborsList().size;b.set(S,S.getNeighborsList().size),C==1&&x.push(S)}var E=[];for(E=E.concat(x);!w;){var _=[];for(_=_.concat(E),E=[],k=0;k<v.length;k++){var S=v[k],N=v.indexOf(S);N>=0&&v.splice(N,1),S.getNeighborsList().forEach((function(O){if(x.indexOf(O)<0){var B=b.get(O)-1;B==1&&E.push(O),b.set(O,B)}}))}x=x.concat(E),v.length!=1&&v.length!=2||(w=!0,T=v[0])}return T},m.prototype.setGraphManager=function(y){this.graphManager=y},r.exports=m},function(r,n,i){function a(){}l(a,"RandomSeed"),a.seed=1,a.x=0,a.nextDouble=function(){return a.x=1e4*Math.sin(a.seed++),a.x-Math.floor(a.x)},r.exports=a},function(r,n,i){var a=i(4);function s(o,u){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}l(s,"Transform"),s.prototype.getWorldOrgX=function(){return this.lworldOrgX},s.prototype.setWorldOrgX=function(o){this.lworldOrgX=o},s.prototype.getWorldOrgY=function(){return this.lworldOrgY},s.prototype.setWorldOrgY=function(o){this.lworldOrgY=o},s.prototype.getWorldExtX=function(){return this.lworldExtX},s.prototype.setWorldExtX=function(o){this.lworldExtX=o},s.prototype.getWorldExtY=function(){return this.lworldExtY},s.prototype.setWorldExtY=function(o){this.lworldExtY=o},s.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},s.prototype.setDeviceOrgX=function(o){this.ldeviceOrgX=o},s.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},s.prototype.setDeviceOrgY=function(o){this.ldeviceOrgY=o},s.prototype.getDeviceExtX=function(){return this.ldeviceExtX},s.prototype.setDeviceExtX=function(o){this.ldeviceExtX=o},s.prototype.getDeviceExtY=function(){return this.ldeviceExtY},s.prototype.setDeviceExtY=function(o){this.ldeviceExtY=o},s.prototype.transformX=function(o){var u=0,h=this.lworldExtX;return h!=0&&(u=this.ldeviceOrgX+(o-this.lworldOrgX)*this.ldeviceExtX/h),u},s.prototype.transformY=function(o){var u=0,h=this.lworldExtY;return h!=0&&(u=this.ldeviceOrgY+(o-this.lworldOrgY)*this.ldeviceExtY/h),u},s.prototype.inverseTransformX=function(o){var u=0,h=this.ldeviceExtX;return h!=0&&(u=this.lworldOrgX+(o-this.ldeviceOrgX)*this.lworldExtX/h),u},s.prototype.inverseTransformY=function(o){var u=0,h=this.ldeviceExtY;return h!=0&&(u=this.lworldOrgY+(o-this.ldeviceOrgY)*this.lworldExtY/h),u},s.prototype.inverseTransformPoint=function(o){return new a(this.inverseTransformX(o.x),this.inverseTransformY(o.y))},r.exports=s},function(r,n,i){function a(g){if(Array.isArray(g)){for(var m=0,y=Array(g.length);m<g.length;m++)y[m]=g[m];return y}return Array.from(g)}l(a,"_toConsumableArray");var s=i(15),o=i(7),u=i(0),h=i(8),d=i(9);function p(){s.call(this),this.useSmartIdealEdgeLengthCalculation=o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=o.DEFAULT_EDGE_LENGTH,this.springConstant=o.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=o.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=o.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=o.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=o.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*o.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=o.MAX_ITERATIONS}for(var f in l(p,"FDLayout"),p.prototype=Object.create(s.prototype),s)p[f]=s[f];p.prototype.initParameters=function(){s.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=o.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},p.prototype.calcIdealEdgeLengths=function(){for(var g,m,y,v,x,b,w=this.getGraphManager().getAllEdges(),T=0;T<w.length;T++)(g=w[T]).idealLength=this.idealEdgeLength,g.isInterGraph&&(y=g.getSource(),v=g.getTarget(),x=g.getSourceInLca().getEstimatedSize(),b=g.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(g.idealLength+=x+b-2*u.SIMPLE_NODE_SIZE),m=g.getLca().getInclusionTreeDepth(),g.idealLength+=o.DEFAULT_EDGE_LENGTH*o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(y.getInclusionTreeDepth()+v.getInclusionTreeDepth()-2*m))},p.prototype.initSpringEmbedder=function(){var g=this.getAllNodes().length;this.incremental?(g>o.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*o.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(g-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-o.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT_INCREMENTAL):(g>o.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(o.COOLING_ADAPTATION_FACTOR,1-(g-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*(1-o.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},p.prototype.calcSpringForces=function(){for(var g,m=this.getAllEdges(),y=0;y<m.length;y++)g=m[y],this.calcSpringForce(g,g.idealLength)},p.prototype.calcRepulsionForces=function(){var g,m,y,v,x,b=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],w=arguments.length>1&&arguments[1]!==void 0&&arguments[1],T=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&b&&this.updateGrid(),x=new Set,g=0;g<T.length;g++)y=T[g],this.calculateRepulsionForceOfANode(y,x,b,w),x.add(y);else for(g=0;g<T.length;g++)for(y=T[g],m=g+1;m<T.length;m++)v=T[m],y.getOwner()==v.getOwner()&&this.calcRepulsionForce(y,v)},p.prototype.calcGravitationalForces=function(){for(var g,m=this.getAllNodesToApplyGravitation(),y=0;y<m.length;y++)g=m[y],this.calcGravitationalForce(g)},p.prototype.moveNodes=function(){for(var g=this.getAllNodes(),m=0;m<g.length;m++)g[m].move()},p.prototype.calcSpringForce=function(g,m){var y,v,x,b,w=g.getSource(),T=g.getTarget();if(this.uniformLeafNodeSizes&&w.getChild()==null&&T.getChild()==null)g.updateLengthSimple();else if(g.updateLength(),g.isOverlapingSourceAndTarget)return;(y=g.getLength())!=0&&(x=(v=this.springConstant*(y-m))*(g.lengthX/y),b=v*(g.lengthY/y),w.springForceX+=x,w.springForceY+=b,T.springForceX-=x,T.springForceY-=b)},p.prototype.calcRepulsionForce=function(g,m){var y,v,x,b,w,T,k,C=g.getRect(),E=m.getRect(),_=new Array(2),S=new Array(4);if(C.intersects(E)){h.calcSeparationAmount(C,E,_,o.DEFAULT_EDGE_LENGTH/2),T=2*_[0],k=2*_[1];var N=g.noOfChildren*m.noOfChildren/(g.noOfChildren+m.noOfChildren);g.repulsionForceX-=N*T,g.repulsionForceY-=N*k,m.repulsionForceX+=N*T,m.repulsionForceY+=N*k}else this.uniformLeafNodeSizes&&g.getChild()==null&&m.getChild()==null?(y=E.getCenterX()-C.getCenterX(),v=E.getCenterY()-C.getCenterY()):(h.getIntersection(C,E,S),y=S[2]-S[0],v=S[3]-S[1]),Math.abs(y)<o.MIN_REPULSION_DIST&&(y=d.sign(y)*o.MIN_REPULSION_DIST),Math.abs(v)<o.MIN_REPULSION_DIST&&(v=d.sign(v)*o.MIN_REPULSION_DIST),x=y*y+v*v,b=Math.sqrt(x),T=(w=this.repulsionConstant*g.noOfChildren*m.noOfChildren/x)*y/b,k=w*v/b,g.repulsionForceX-=T,g.repulsionForceY-=k,m.repulsionForceX+=T,m.repulsionForceY+=k},p.prototype.calcGravitationalForce=function(g){var m,y,v,x,b,w,T,k;y=((m=g.getOwner()).getRight()+m.getLeft())/2,v=(m.getTop()+m.getBottom())/2,x=g.getCenterX()-y,b=g.getCenterY()-v,w=Math.abs(x)+g.getWidth()/2,T=Math.abs(b)+g.getHeight()/2,g.getOwner()==this.graphManager.getRoot()?(w>(k=m.getEstimatedSize()*this.gravityRangeFactor)||T>k)&&(g.gravitationForceX=-this.gravityConstant*x,g.gravitationForceY=-this.gravityConstant*b):(w>(k=m.getEstimatedSize()*this.compoundGravityRangeFactor)||T>k)&&(g.gravitationForceX=-this.gravityConstant*x*this.compoundGravityConstant,g.gravitationForceY=-this.gravityConstant*b*this.compoundGravityConstant)},p.prototype.isConverged=function(){var g,m=!1;return this.totalIterations>this.maxIterations/3&&(m=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),g=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,g||m},p.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},p.prototype.calcNoOfChildrenForAllNodes=function(){for(var g,m=this.graphManager.getAllNodes(),y=0;y<m.length;y++)(g=m[y]).noOfChildren=g.getNoOfChildren()},p.prototype.calcGrid=function(g){var m,y;m=parseInt(Math.ceil((g.getRight()-g.getLeft())/this.repulsionRange)),y=parseInt(Math.ceil((g.getBottom()-g.getTop())/this.repulsionRange));for(var v=new Array(m),x=0;x<m;x++)v[x]=new Array(y);for(x=0;x<m;x++)for(var b=0;b<y;b++)v[x][b]=new Array;return v},p.prototype.addNodeToGrid=function(g,m,y){var v,x,b,w;v=parseInt(Math.floor((g.getRect().x-m)/this.repulsionRange)),x=parseInt(Math.floor((g.getRect().width+g.getRect().x-m)/this.repulsionRange)),b=parseInt(Math.floor((g.getRect().y-y)/this.repulsionRange)),w=parseInt(Math.floor((g.getRect().height+g.getRect().y-y)/this.repulsionRange));for(var T=v;T<=x;T++)for(var k=b;k<=w;k++)this.grid[T][k].push(g),g.setGridCoordinates(v,x,b,w)},p.prototype.updateGrid=function(){var g,m,y=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),g=0;g<y.length;g++)m=y[g],this.addNodeToGrid(m,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},p.prototype.calculateRepulsionForceOfANode=function(g,m,y,v){if(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&y||v){var x,b=new Set;g.surrounding=new Array;for(var w=this.grid,T=g.startX-1;T<g.finishX+2;T++)for(var k=g.startY-1;k<g.finishY+2;k++)if(!(T<0||k<0||T>=w.length||k>=w[0].length)){for(var C=0;C<w[T][k].length;C++)if(x=w[T][k][C],g.getOwner()==x.getOwner()&&g!=x&&!m.has(x)&&!b.has(x)){var E=Math.abs(g.getCenterX()-x.getCenterX())-(g.getWidth()/2+x.getWidth()/2),_=Math.abs(g.getCenterY()-x.getCenterY())-(g.getHeight()/2+x.getHeight()/2);E<=this.repulsionRange&&_<=this.repulsionRange&&b.add(x)}}g.surrounding=[].concat(a(b))}for(T=0;T<g.surrounding.length;T++)this.calcRepulsionForce(g,g.surrounding[T])},p.prototype.calcRepulsionRange=function(){return 0},r.exports=p},function(r,n,i){var a=i(1),s=i(7);function o(h,d,p){a.call(this,h,d,p),this.idealLength=s.DEFAULT_EDGE_LENGTH}for(var u in l(o,"FDLayoutEdge"),o.prototype=Object.create(a.prototype),a)o[u]=a[u];r.exports=o},function(r,n,i){var a=i(3);function s(u,h,d,p){a.call(this,u,h,d,p),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var o in l(s,"FDLayoutNode"),s.prototype=Object.create(a.prototype),a)s[o]=a[o];s.prototype.setGridCoordinates=function(u,h,d,p){this.startX=u,this.finishX=h,this.startY=d,this.finishY=p},r.exports=s},function(r,n,i){function a(s,o){this.width=0,this.height=0,s!==null&&o!==null&&(this.height=o,this.width=s)}l(a,"DimensionD"),a.prototype.getWidth=function(){return this.width},a.prototype.setWidth=function(s){this.width=s},a.prototype.getHeight=function(){return this.height},a.prototype.setHeight=function(s){this.height=s},r.exports=a},function(r,n,i){var a=i(14);function s(){this.map={},this.keys=[]}l(s,"HashMap"),s.prototype.put=function(o,u){var h=a.createID(o);this.contains(h)||(this.map[h]=u,this.keys.push(o))},s.prototype.contains=function(o){return a.createID(o),this.map[o]!=null},s.prototype.get=function(o){var u=a.createID(o);return this.map[u]},s.prototype.keySet=function(){return this.keys},r.exports=s},function(r,n,i){var a=i(14);function s(){this.set={}}l(s,"HashSet"),s.prototype.add=function(o){var u=a.createID(o);this.contains(u)||(this.set[u]=o)},s.prototype.remove=function(o){delete this.set[a.createID(o)]},s.prototype.clear=function(){this.set={}},s.prototype.contains=function(o){return this.set[a.createID(o)]==o},s.prototype.isEmpty=function(){return this.size()===0},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAllTo=function(o){for(var u=Object.keys(this.set),h=u.length,d=0;d<h;d++)o.push(this.set[u[d]])},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAll=function(o){for(var u=o.length,h=0;h<u;h++){var d=o[h];this.add(d)}},r.exports=s},function(r,n,i){var a=(function(){function h(d,p){for(var f=0;f<p.length;f++){var g=p[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}}return l(h,"defineProperties"),function(d,p,f){return p&&h(d.prototype,p),f&&h(d,f),d}})();function s(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")}l(s,"_classCallCheck");var o=i(11),u=(function(){function h(d,p){s(this,h),p===null&&p===void 0||(this.compareFunction=this._defaultCompareFunction);var f=void 0;f=d instanceof o?d.size():d.length,this._quicksort(d,0,f-1)}return l(h,"Quicksort"),a(h,[{key:"_quicksort",value:l((function(d,p,f){if(p<f){var g=this._partition(d,p,f);this._quicksort(d,p,g),this._quicksort(d,g+1,f)}}),"_quicksort")},{key:"_partition",value:l((function(d,p,f){for(var g=this._get(d,p),m=p,y=f;;){for(;this.compareFunction(g,this._get(d,y));)y--;for(;this.compareFunction(this._get(d,m),g);)m++;if(!(m<y))return y;this._swap(d,m,y),m++,y--}}),"_partition")},{key:"_get",value:l((function(d,p){return d instanceof o?d.get_object_at(p):d[p]}),"_get")},{key:"_set",value:l((function(d,p,f){d instanceof o?d.set_object_at(p,f):d[p]=f}),"_set")},{key:"_swap",value:l((function(d,p,f){var g=this._get(d,p);this._set(d,p,this._get(d,f)),this._set(d,f,g)}),"_swap")},{key:"_defaultCompareFunction",value:l((function(d,p){return p>d}),"_defaultCompareFunction")}]),h})();r.exports=u},function(r,n,i){var a=(function(){function u(h,d){for(var p=0;p<d.length;p++){var f=d[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(h,f.key,f)}}return l(u,"defineProperties"),function(h,d,p){return d&&u(h.prototype,d),p&&u(h,p),h}})();function s(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}l(s,"_classCallCheck");var o=(function(){function u(h,d){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;s(this,u),this.sequence1=h,this.sequence2=d,this.match_score=p,this.mismatch_penalty=f,this.gap_penalty=g,this.iMax=h.length+1,this.jMax=d.length+1,this.grid=new Array(this.iMax);for(var m=0;m<this.iMax;m++){this.grid[m]=new Array(this.jMax);for(var y=0;y<this.jMax;y++)this.grid[m][y]=0}this.tracebackGrid=new Array(this.iMax);for(var v=0;v<this.iMax;v++){this.tracebackGrid[v]=new Array(this.jMax);for(var x=0;x<this.jMax;x++)this.tracebackGrid[v][x]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return l(u,"NeedlemanWunsch"),a(u,[{key:"getScore",value:l((function(){return this.score}),"getScore")},{key:"getAlignments",value:l((function(){return this.alignments}),"getAlignments")},{key:"computeGrids",value:l((function(){for(var h=1;h<this.jMax;h++)this.grid[0][h]=this.grid[0][h-1]+this.gap_penalty,this.tracebackGrid[0][h]=[!1,!1,!0];for(var d=1;d<this.iMax;d++)this.grid[d][0]=this.grid[d-1][0]+this.gap_penalty,this.tracebackGrid[d][0]=[!1,!0,!1];for(var p=1;p<this.iMax;p++)for(var f=1;f<this.jMax;f++){var g=[this.sequence1[p-1]===this.sequence2[f-1]?this.grid[p-1][f-1]+this.match_score:this.grid[p-1][f-1]+this.mismatch_penalty,this.grid[p-1][f]+this.gap_penalty,this.grid[p][f-1]+this.gap_penalty],m=this.arrayAllMaxIndexes(g);this.grid[p][f]=g[m[0]],this.tracebackGrid[p][f]=[m.includes(0),m.includes(1),m.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}),"computeGrids")},{key:"alignmentTraceback",value:l((function(){var h=[];for(h.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});h[0];){var d=h[0],p=this.tracebackGrid[d.pos[0]][d.pos[1]];p[0]&&h.push({pos:[d.pos[0]-1,d.pos[1]-1],seq1:this.sequence1[d.pos[0]-1]+d.seq1,seq2:this.sequence2[d.pos[1]-1]+d.seq2}),p[1]&&h.push({pos:[d.pos[0]-1,d.pos[1]],seq1:this.sequence1[d.pos[0]-1]+d.seq1,seq2:"-"+d.seq2}),p[2]&&h.push({pos:[d.pos[0],d.pos[1]-1],seq1:"-"+d.seq1,seq2:this.sequence2[d.pos[1]-1]+d.seq2}),d.pos[0]===0&&d.pos[1]===0&&this.alignments.push({sequence1:d.seq1,sequence2:d.seq2}),h.shift()}return this.alignments}),"alignmentTraceback")},{key:"getAllIndexes",value:l((function(h,d){for(var p=[],f=-1;(f=h.indexOf(d,f+1))!==-1;)p.push(f);return p}),"getAllIndexes")},{key:"arrayAllMaxIndexes",value:l((function(h){return this.getAllIndexes(h,Math.max.apply(null,h))}),"arrayAllMaxIndexes")}]),u})();r.exports=o},function(r,n,i){var a=l((function(){}),"layoutBase");a.FDLayout=i(18),a.FDLayoutConstants=i(7),a.FDLayoutEdge=i(19),a.FDLayoutNode=i(20),a.DimensionD=i(21),a.HashMap=i(22),a.HashSet=i(23),a.IGeometry=i(8),a.IMath=i(9),a.Integer=i(10),a.Point=i(12),a.PointD=i(4),a.RandomSeed=i(16),a.RectangleD=i(13),a.Transform=i(17),a.UniqueIDGeneretor=i(14),a.Quicksort=i(24),a.LinkedList=i(11),a.LGraphObject=i(2),a.LGraph=i(5),a.LEdge=i(1),a.LGraphManager=i(6),a.LNode=i(3),a.Layout=i(15),a.LayoutConstants=i(0),a.NeedlemanWunsch=i(25),r.exports=a},function(r,n,i){function a(){this.listeners=[]}l(a,"Emitter");var s=a.prototype;s.addListener=function(o,u){this.listeners.push({event:o,callback:u})},s.removeListener=function(o,u){for(var h=this.listeners.length;h>=0;h--){var d=this.listeners[h];d.event===o&&d.callback===u&&this.listeners.splice(h,1)}},s.emit=function(o,u){for(var h=0;h<this.listeners.length;h++){var d=this.listeners[h];o===d.event&&d.callback(u)}},r.exports=a}])}))}}),fB=qn({"../../node_modules/.pnpm/cose-base@1.0.3/node_modules/cose-base/cose-base.js"(t,e){l((function(r,n){typeof t=="object"&&typeof e=="object"?e.exports=n(pB()):typeof define=="function"&&define.amd?define(["layout-base"],n):typeof t=="object"?t.coseBase=n(pB()):r.coseBase=n(r.layoutBase)}),"webpackUniversalModuleDefinition")(t,(function(r){return(function(n){var i={};function a(s){if(i[s])return i[s].exports;var o=i[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return l(a,"__webpack_require__"),a.m=n,a.c=i,a.i=function(s){return s},a.d=function(s,o,u){a.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:u})},a.n=function(s){var o=s&&s.__esModule?l((function(){return s.default}),"getDefault"):l((function(){return s}),"getModuleExports");return a.d(o,"a",o),o},a.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},a.p="",a(a.s=7)})([function(n,i){n.exports=r},function(n,i,a){var s=a(0).FDLayoutConstants;function o(){}for(var u in l(o,"CoSEConstants"),s)o[u]=s[u];o.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,o.DEFAULT_RADIAL_SEPARATION=s.DEFAULT_EDGE_LENGTH,o.DEFAULT_COMPONENT_SEPERATION=60,o.TILE=!0,o.TILING_PADDING_VERTICAL=10,o.TILING_PADDING_HORIZONTAL=10,o.TREE_REDUCTION_ON_INCREMENTAL=!1,n.exports=o},function(n,i,a){var s=a(0).FDLayoutEdge;function o(h,d,p){s.call(this,h,d,p)}for(var u in l(o,"CoSEEdge"),o.prototype=Object.create(s.prototype),s)o[u]=s[u];n.exports=o},function(n,i,a){var s=a(0).LGraph;function o(h,d,p){s.call(this,h,d,p)}for(var u in l(o,"CoSEGraph"),o.prototype=Object.create(s.prototype),s)o[u]=s[u];n.exports=o},function(n,i,a){var s=a(0).LGraphManager;function o(h){s.call(this,h)}for(var u in l(o,"CoSEGraphManager"),o.prototype=Object.create(s.prototype),s)o[u]=s[u];n.exports=o},function(n,i,a){var s=a(0).FDLayoutNode,o=a(0).IMath;function u(d,p,f,g){s.call(this,d,p,f,g)}for(var h in l(u,"CoSENode"),u.prototype=Object.create(s.prototype),s)u[h]=s[h];u.prototype.move=function(){var d=this.graphManager.getLayout();this.displacementX=d.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=d.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>d.coolingFactor*d.maxNodeDisplacement&&(this.displacementX=d.coolingFactor*d.maxNodeDisplacement*o.sign(this.displacementX)),Math.abs(this.displacementY)>d.coolingFactor*d.maxNodeDisplacement&&(this.displacementY=d.coolingFactor*d.maxNodeDisplacement*o.sign(this.displacementY)),this.child==null||this.child.getNodes().length==0?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),d.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},u.prototype.propogateDisplacementToChildren=function(d,p){for(var f,g=this.getChild().getNodes(),m=0;m<g.length;m++)(f=g[m]).getChild()==null?(f.moveBy(d,p),f.displacementX+=d,f.displacementY+=p):f.propogateDisplacementToChildren(d,p)},u.prototype.setPred1=function(d){this.pred1=d},u.prototype.getPred1=function(){return pred1},u.prototype.getPred2=function(){return pred2},u.prototype.setNext=function(d){this.next=d},u.prototype.getNext=function(){return next},u.prototype.setProcessed=function(d){this.processed=d},u.prototype.isProcessed=function(){return processed},n.exports=u},function(n,i,a){var s=a(0).FDLayout,o=a(4),u=a(3),h=a(5),d=a(2),p=a(1),f=a(0).FDLayoutConstants,g=a(0).LayoutConstants,m=a(0).Point,y=a(0).PointD,v=a(0).Layout,x=a(0).Integer,b=a(0).IGeometry,w=a(0).LGraph,T=a(0).Transform;function k(){s.call(this),this.toBeTiled={}}for(var C in l(k,"CoSELayout"),k.prototype=Object.create(s.prototype),s)k[C]=s[C];k.prototype.newGraphManager=function(){var E=new o(this);return this.graphManager=E,E},k.prototype.newGraph=function(E){return new u(null,this.graphManager,E)},k.prototype.newNode=function(E){return new h(this.graphManager,E)},k.prototype.newEdge=function(E){return new d(null,null,E)},k.prototype.initParameters=function(){s.prototype.initParameters.call(this,arguments),this.isSubLayout||(p.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=p.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=p.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=f.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=f.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=f.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=f.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=f.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=f.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/f.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=f.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},k.prototype.layout=function(){return g.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},k.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental)p.TREE_REDUCTION_ON_INCREMENTAL&&(this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation(),_=new Set(this.getAllNodes()),S=this.nodesWithGravity.filter((function(N){return _.has(N)})),this.graphManager.setAllNodesToApplyGravitation(S));else{var E=this.getFlatForest();if(E.length>0)this.positionNodesRadially(E);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var _=new Set(this.getAllNodes()),S=this.nodesWithGravity.filter((function(N){return _.has(N)}));this.graphManager.setAllNodesToApplyGravitation(S),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},k.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%f.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var E=new Set(this.getAllNodes()),_=this.nodesWithGravity.filter((function(O){return E.has(O)}));this.graphManager.setAllNodesToApplyGravitation(_),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=f.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=f.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var S=!this.isTreeGrowing&&!this.isGrowthFinished,N=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(S,N),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},k.prototype.getPositionsData=function(){for(var E=this.graphManager.getAllNodes(),_={},S=0;S<E.length;S++){var N=E[S].rect,O=E[S].id;_[O]={id:O,x:N.getCenterX(),y:N.getCenterY(),w:N.width,h:N.height}}return _},k.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var E=!1;if(f.ANIMATE==="during")this.emit("layoutstarted");else{for(;!E;)E=this.tick();this.graphManager.updateBounds()}},k.prototype.calculateNodesToApplyGravitationTo=function(){var E,_,S=[],N=this.graphManager.getGraphs(),O=N.length;for(_=0;_<O;_++)(E=N[_]).updateConnected(),E.isConnected||(S=S.concat(E.getNodes()));return S},k.prototype.createBendpoints=function(){var E=[];E=E.concat(this.graphManager.getAllEdges());var _,S=new Set;for(_=0;_<E.length;_++){var N=E[_];if(!S.has(N)){var O=N.getSource(),B=N.getTarget();if(O==B)N.getBendpoints().push(new y),N.getBendpoints().push(new y),this.createDummyNodesForBendpoints(N),S.add(N);else{var L=[];if(L=(L=L.concat(O.getEdgeListToNode(B))).concat(B.getEdgeListToNode(O)),!S.has(L[0])){var I;if(L.length>1)for(I=0;I<L.length;I++){var A=L[I];A.getBendpoints().push(new y),this.createDummyNodesForBendpoints(A)}L.forEach((function(M){S.add(M)}))}}}if(S.size==E.length)break}},k.prototype.positionNodesRadially=function(E){for(var _=new m(0,0),S=Math.ceil(Math.sqrt(E.length)),N=0,O=0,B=0,L=new y(0,0),I=0;I<E.length;I++){I%S==0&&(B=0,O=N,I!=0&&(O+=p.DEFAULT_COMPONENT_SEPERATION),N=0);var A=E[I],M=v.findCenterOfTree(A);_.x=B,_.y=O,(L=k.radialLayout(A,M,_)).y>N&&(N=Math.floor(L.y)),B=Math.floor(L.x+p.DEFAULT_COMPONENT_SEPERATION)}this.transform(new y(g.WORLD_CENTER_X-L.x/2,g.WORLD_CENTER_Y-L.y/2))},k.radialLayout=function(E,_,S){var N=Math.max(this.maxDiagonalInTree(E),p.DEFAULT_RADIAL_SEPARATION);k.branchRadialLayout(_,null,0,359,0,N);var O=w.calculateBounds(E),B=new T;B.setDeviceOrgX(O.getMinX()),B.setDeviceOrgY(O.getMinY()),B.setWorldOrgX(S.x),B.setWorldOrgY(S.y);for(var L=0;L<E.length;L++)E[L].transform(B);var I=new y(O.getMaxX(),O.getMaxY());return B.inverseTransformPoint(I)},k.branchRadialLayout=function(E,_,S,N,O,B){var L=(N-S+1)/2;L<0&&(L+=180);var I=(L+S)%360*b.TWO_PI/360,A=O*Math.cos(I),M=O*Math.sin(I);E.setCenter(A,M);var D=[],R=(D=D.concat(E.getEdges())).length;_!=null&&R--;for(var P,$=0,z=D.length,q=E.getEdgesBetween(_);q.length>1;){var W=q[0];q.splice(0,1);var Q=D.indexOf(W);Q>=0&&D.splice(Q,1),z--,R--}P=_!=null?(D.indexOf(q[0])+1)%z:0;for(var te=Math.abs(N-S)/R,oe=P;$!=R;oe=++oe%z){var re=D[oe].getOtherEnd(E);if(re!=_){var H=(S+$*te)%360,K=(H+te)%360;k.branchRadialLayout(re,E,H,K,O+B,B),$++}}},k.maxDiagonalInTree=function(E){for(var _=x.MIN_VALUE,S=0;S<E.length;S++){var N=E[S].getDiagonal();N>_&&(_=N)}return _},k.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},k.prototype.groupZeroDegreeMembers=function(){var E=this,_={};this.memberGroups={},this.idToDummyNode={};for(var S=[],N=this.graphManager.getAllNodes(),O=0;O<N.length;O++){var B=(L=N[O]).getParent();this.getNodeDegreeWithChildren(L)!==0||B.id!=null&&this.getToBeTiled(B)||S.push(L)}for(O=0;O<S.length;O++){var L,I=(L=S[O]).getParent().id;_[I]===void 0&&(_[I]=[]),_[I]=_[I].concat(L)}Object.keys(_).forEach((function(A){if(_[A].length>1){var M="DummyCompound_"+A;E.memberGroups[M]=_[A];var D=_[A][0].getParent(),R=new h(E.graphManager);R.id=M,R.paddingLeft=D.paddingLeft||0,R.paddingRight=D.paddingRight||0,R.paddingBottom=D.paddingBottom||0,R.paddingTop=D.paddingTop||0,E.idToDummyNode[M]=R;var P=E.getGraphManager().add(E.newGraph(),R),$=D.getChild();$.add(R);for(var z=0;z<_[A].length;z++){var q=_[A][z];$.remove(q),P.add(q)}}}))},k.prototype.clearCompounds=function(){var E={},_={};this.performDFSOnCompounds();for(var S=0;S<this.compoundOrder.length;S++)_[this.compoundOrder[S].id]=this.compoundOrder[S],E[this.compoundOrder[S].id]=[].concat(this.compoundOrder[S].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[S].getChild()),this.compoundOrder[S].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(E,_)},k.prototype.clearZeroDegreeMembers=function(){var E=this,_=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach((function(S){var N=E.idToDummyNode[S];_[S]=E.tileNodes(E.memberGroups[S],N.paddingLeft+N.paddingRight),N.rect.width=_[S].width,N.rect.height=_[S].height}))},k.prototype.repopulateCompounds=function(){for(var E=this.compoundOrder.length-1;E>=0;E--){var _=this.compoundOrder[E],S=_.id,N=_.paddingLeft,O=_.paddingTop;this.adjustLocations(this.tiledMemberPack[S],_.rect.x,_.rect.y,N,O)}},k.prototype.repopulateZeroDegreeMembers=function(){var E=this,_=this.tiledZeroDegreePack;Object.keys(_).forEach((function(S){var N=E.idToDummyNode[S],O=N.paddingLeft,B=N.paddingTop;E.adjustLocations(_[S],N.rect.x,N.rect.y,O,B)}))},k.prototype.getToBeTiled=function(E){var _=E.id;if(this.toBeTiled[_]!=null)return this.toBeTiled[_];var S=E.getChild();if(S==null)return this.toBeTiled[_]=!1,!1;for(var N=S.getNodes(),O=0;O<N.length;O++){var B=N[O];if(this.getNodeDegree(B)>0)return this.toBeTiled[_]=!1,!1;if(B.getChild()!=null){if(!this.getToBeTiled(B))return this.toBeTiled[_]=!1,!1}else this.toBeTiled[B.id]=!1}return this.toBeTiled[_]=!0,!0},k.prototype.getNodeDegree=function(E){E.id;for(var _=E.getEdges(),S=0,N=0;N<_.length;N++){var O=_[N];O.getSource().id!==O.getTarget().id&&(S+=1)}return S},k.prototype.getNodeDegreeWithChildren=function(E){var _=this.getNodeDegree(E);if(E.getChild()==null)return _;for(var S=E.getChild().getNodes(),N=0;N<S.length;N++){var O=S[N];_+=this.getNodeDegreeWithChildren(O)}return _},k.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},k.prototype.fillCompexOrderByDFS=function(E){for(var _=0;_<E.length;_++){var S=E[_];S.getChild()!=null&&this.fillCompexOrderByDFS(S.getChild().getNodes()),this.getToBeTiled(S)&&this.compoundOrder.push(S)}},k.prototype.adjustLocations=function(E,_,S,N,O){S+=O;for(var B=_+=N,L=0;L<E.rows.length;L++){var I=E.rows[L];_=B;for(var A=0,M=0;M<I.length;M++){var D=I[M];D.rect.x=_,D.rect.y=S,_+=D.rect.width+E.horizontalPadding,D.rect.height>A&&(A=D.rect.height)}S+=A+E.verticalPadding}},k.prototype.tileCompoundMembers=function(E,_){var S=this;this.tiledMemberPack=[],Object.keys(E).forEach((function(N){var O=_[N];S.tiledMemberPack[N]=S.tileNodes(E[N],O.paddingLeft+O.paddingRight),O.rect.width=S.tiledMemberPack[N].width,O.rect.height=S.tiledMemberPack[N].height}))},k.prototype.tileNodes=function(E,_){var S={rows:[],rowWidth:[],rowHeight:[],width:0,height:_,verticalPadding:p.TILING_PADDING_VERTICAL,horizontalPadding:p.TILING_PADDING_HORIZONTAL};E.sort((function(B,L){return B.rect.width*B.rect.height>L.rect.width*L.rect.height?-1:B.rect.width*B.rect.height<L.rect.width*L.rect.height?1:0}));for(var N=0;N<E.length;N++){var O=E[N];S.rows.length==0?this.insertNodeToRow(S,O,0,_):this.canAddHorizontal(S,O.rect.width,O.rect.height)?this.insertNodeToRow(S,O,this.getShortestRowIndex(S),_):this.insertNodeToRow(S,O,S.rows.length,_),this.shiftToLastRow(S)}return S},k.prototype.insertNodeToRow=function(E,_,S,N){var O=N;S==E.rows.length&&(E.rows.push([]),E.rowWidth.push(O),E.rowHeight.push(0));var B=E.rowWidth[S]+_.rect.width;E.rows[S].length>0&&(B+=E.horizontalPadding),E.rowWidth[S]=B,E.width<B&&(E.width=B);var L=_.rect.height;S>0&&(L+=E.verticalPadding);var I=0;L>E.rowHeight[S]&&(I=E.rowHeight[S],E.rowHeight[S]=L,I=E.rowHeight[S]-I),E.height+=I,E.rows[S].push(_)},k.prototype.getShortestRowIndex=function(E){for(var _=-1,S=Number.MAX_VALUE,N=0;N<E.rows.length;N++)E.rowWidth[N]<S&&(_=N,S=E.rowWidth[N]);return _},k.prototype.getLongestRowIndex=function(E){for(var _=-1,S=Number.MIN_VALUE,N=0;N<E.rows.length;N++)E.rowWidth[N]>S&&(_=N,S=E.rowWidth[N]);return _},k.prototype.canAddHorizontal=function(E,_,S){var N=this.getShortestRowIndex(E);if(N<0)return!0;var O=E.rowWidth[N];if(O+E.horizontalPadding+_<=E.width)return!0;var B,L,I=0;return E.rowHeight[N]<S&&N>0&&(I=S+E.verticalPadding-E.rowHeight[N]),B=E.width-O>=_+E.horizontalPadding?(E.height+I)/(O+_+E.horizontalPadding):(E.height+I)/E.width,I=S+E.verticalPadding,(L=E.width<_?(E.height+I)/_:(E.height+I)/E.width)<1&&(L=1/L),B<1&&(B=1/B),B<L},k.prototype.shiftToLastRow=function(E){var _=this.getLongestRowIndex(E),S=E.rowWidth.length-1,N=E.rows[_],O=N[N.length-1],B=O.width+E.horizontalPadding;if(E.width-E.rowWidth[S]>B&&_!=S){N.splice(-1,1),E.rows[S].push(O),E.rowWidth[_]=E.rowWidth[_]-B,E.rowWidth[S]=E.rowWidth[S]+B,E.width=E.rowWidth[instance.getLongestRowIndex(E)];for(var L=Number.MIN_VALUE,I=0;I<N.length;I++)N[I].height>L&&(L=N[I].height);_>0&&(L+=E.verticalPadding);var A=E.rowHeight[_]+E.rowHeight[S];E.rowHeight[_]=L,E.rowHeight[S]<O.height+E.verticalPadding&&(E.rowHeight[S]=O.height+E.verticalPadding);var M=E.rowHeight[_]+E.rowHeight[S];E.height+=M-A,this.shiftToLastRow(E)}},k.prototype.tilingPreLayout=function(){p.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},k.prototype.tilingPostLayout=function(){p.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},k.prototype.reduceTrees=function(){for(var E,_=[],S=!0;S;){var N=this.graphManager.getAllNodes(),O=[];S=!1;for(var B=0;B<N.length;B++)(E=N[B]).getEdges().length!=1||E.getEdges()[0].isInterGraph||E.getChild()!=null||(O.push([E,E.getEdges()[0],E.getOwner()]),S=!0);if(S==1){for(var L=[],I=0;I<O.length;I++)O[I][0].getEdges().length==1&&(L.push(O[I]),O[I][0].getOwner().remove(O[I][0]));_.push(L),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=_},k.prototype.growTree=function(E){for(var _,S=E[E.length-1],N=0;N<S.length;N++)_=S[N],this.findPlaceforPrunedNode(_),_[2].add(_[0]),_[2].add(_[1],_[1].source,_[1].target);E.splice(E.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},k.prototype.findPlaceforPrunedNode=function(E){var _,S,N=E[0],O=(S=N==E[1].source?E[1].target:E[1].source).startX,B=S.finishX,L=S.startY,I=S.finishY,A=[0,0,0,0];if(L>0)for(var M=O;M<=B;M++)A[0]+=this.grid[M][L-1].length+this.grid[M][L].length-1;if(B<this.grid.length-1)for(M=L;M<=I;M++)A[1]+=this.grid[B+1][M].length+this.grid[B][M].length-1;if(I<this.grid[0].length-1)for(M=O;M<=B;M++)A[2]+=this.grid[M][I+1].length+this.grid[M][I].length-1;if(O>0)for(M=L;M<=I;M++)A[3]+=this.grid[O-1][M].length+this.grid[O][M].length-1;for(var D,R,P=x.MAX_VALUE,$=0;$<A.length;$++)A[$]<P?(P=A[$],D=1,R=$):A[$]==P&&D++;if(D==3&&P==0)A[0]==0&&A[1]==0&&A[2]==0?_=1:A[0]==0&&A[1]==0&&A[3]==0?_=0:A[0]==0&&A[2]==0&&A[3]==0?_=3:A[1]==0&&A[2]==0&&A[3]==0&&(_=2);else if(D==2&&P==0){var z=Math.floor(2*Math.random());_=A[0]==0&&A[1]==0?z==0?0:1:A[0]==0&&A[2]==0?z==0?0:2:A[0]==0&&A[3]==0?z==0?0:3:A[1]==0&&A[2]==0?z==0?1:2:A[1]==0&&A[3]==0?z==0?1:3:z==0?2:3}else D==4&&P==0?_=z=Math.floor(4*Math.random()):_=R;_==0?N.setCenter(S.getCenterX(),S.getCenterY()-S.getHeight()/2-f.DEFAULT_EDGE_LENGTH-N.getHeight()/2):_==1?N.setCenter(S.getCenterX()+S.getWidth()/2+f.DEFAULT_EDGE_LENGTH+N.getWidth()/2,S.getCenterY()):_==2?N.setCenter(S.getCenterX(),S.getCenterY()+S.getHeight()/2+f.DEFAULT_EDGE_LENGTH+N.getHeight()/2):N.setCenter(S.getCenterX()-S.getWidth()/2-f.DEFAULT_EDGE_LENGTH-N.getWidth()/2,S.getCenterY())},n.exports=k},function(n,i,a){var s={};s.layoutBase=a(0),s.CoSEConstants=a(1),s.CoSEEdge=a(2),s.CoSEGraph=a(3),s.CoSEGraphManager=a(4),s.CoSELayout=a(6),s.CoSENode=a(5),n.exports=s}])}))}}),HSe=qn({"../../node_modules/.pnpm/cytoscape-cose-bilkent@4.1.0_cytoscape@3.31.0/node_modules/cytoscape-cose-bilkent/cytoscape-cose-bilkent.js"(t,e){l((function(r,n){typeof t=="object"&&typeof e=="object"?e.exports=n(fB()):typeof define=="function"&&define.amd?define(["cose-base"],n):typeof t=="object"?t.cytoscapeCoseBilkent=n(fB()):r.cytoscapeCoseBilkent=n(r.coseBase)}),"webpackUniversalModuleDefinition")(t,(function(r){return(function(n){var i={};function a(s){if(i[s])return i[s].exports;var o=i[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return l(a,"__webpack_require__"),a.m=n,a.c=i,a.i=function(s){return s},a.d=function(s,o,u){a.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:u})},a.n=function(s){var o=s&&s.__esModule?l((function(){return s.default}),"getDefault"):l((function(){return s}),"getModuleExports");return a.d(o,"a",o),o},a.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},a.p="",a(a.s=1)})([function(n,i){n.exports=r},function(n,i,a){var s=a(0).layoutBase.LayoutConstants,o=a(0).layoutBase.FDLayoutConstants,u=a(0).CoSEConstants,h=a(0).CoSELayout,d=a(0).CoSENode,p=a(0).layoutBase.PointD,f=a(0).layoutBase.DimensionD,g={ready:l((function(){}),"ready"),stop:l((function(){}),"stop"),quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function m(b,w){var T={};for(var k in b)T[k]=b[k];for(var k in w)T[k]=w[k];return T}function y(b){this.options=m(g,b),v(this.options)}l(m,"extend"),l(y,"_CoSELayout");var v=l((function(b){b.nodeRepulsion!=null&&(u.DEFAULT_REPULSION_STRENGTH=o.DEFAULT_REPULSION_STRENGTH=b.nodeRepulsion),b.idealEdgeLength!=null&&(u.DEFAULT_EDGE_LENGTH=o.DEFAULT_EDGE_LENGTH=b.idealEdgeLength),b.edgeElasticity!=null&&(u.DEFAULT_SPRING_STRENGTH=o.DEFAULT_SPRING_STRENGTH=b.edgeElasticity),b.nestingFactor!=null&&(u.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=b.nestingFactor),b.gravity!=null&&(u.DEFAULT_GRAVITY_STRENGTH=o.DEFAULT_GRAVITY_STRENGTH=b.gravity),b.numIter!=null&&(u.MAX_ITERATIONS=o.MAX_ITERATIONS=b.numIter),b.gravityRange!=null&&(u.DEFAULT_GRAVITY_RANGE_FACTOR=o.DEFAULT_GRAVITY_RANGE_FACTOR=b.gravityRange),b.gravityCompound!=null&&(u.DEFAULT_COMPOUND_GRAVITY_STRENGTH=o.DEFAULT_COMPOUND_GRAVITY_STRENGTH=b.gravityCompound),b.gravityRangeCompound!=null&&(u.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=b.gravityRangeCompound),b.initialEnergyOnIncremental!=null&&(u.DEFAULT_COOLING_FACTOR_INCREMENTAL=o.DEFAULT_COOLING_FACTOR_INCREMENTAL=b.initialEnergyOnIncremental),b.quality=="draft"?s.QUALITY=0:b.quality=="proof"?s.QUALITY=2:s.QUALITY=1,u.NODE_DIMENSIONS_INCLUDE_LABELS=o.NODE_DIMENSIONS_INCLUDE_LABELS=s.NODE_DIMENSIONS_INCLUDE_LABELS=b.nodeDimensionsIncludeLabels,u.DEFAULT_INCREMENTAL=o.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=!b.randomize,u.ANIMATE=o.ANIMATE=s.ANIMATE=b.animate,u.TILE=b.tile,u.TILING_PADDING_VERTICAL=typeof b.tilingPaddingVertical=="function"?b.tilingPaddingVertical.call():b.tilingPaddingVertical,u.TILING_PADDING_HORIZONTAL=typeof b.tilingPaddingHorizontal=="function"?b.tilingPaddingHorizontal.call():b.tilingPaddingHorizontal}),"getUserOptions");y.prototype.run=function(){var b,w,T=this.options;this.idToLNode={};var k=this.layout=new h,C=this;C.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var E=k.newGraphManager();this.gm=E;var _=this.options.eles.nodes(),S=this.options.eles.edges();this.root=E.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(_),k);for(var N=0;N<S.length;N++){var O=S[N],B=this.idToLNode[O.data("source")],L=this.idToLNode[O.data("target")];B!==L&&B.getEdgesBetween(L).length==0&&(E.add(k.newEdge(),B,L).id=O.id())}var I=l((function(M,D){typeof M=="number"&&(M=D);var R=M.data("id"),P=C.idToLNode[R];return{x:P.getRect().getCenterX(),y:P.getRect().getCenterY()}}),"getPositions"),A=l((function M(){for(var D,R=l((function(){T.fit&&T.cy.fit(T.eles,T.padding),b||(b=!0,C.cy.one("layoutready",T.ready),C.cy.trigger({type:"layoutready",layout:C}))}),"afterReposition"),P=C.options.refresh,$=0;$<P&&!D;$++)D=C.stopped||C.layout.tick();if(D)return k.checkLayoutSuccess()&&!k.isSubLayout&&k.doPostLayout(),k.tilingPostLayout&&k.tilingPostLayout(),k.isLayoutFinished=!0,C.options.eles.nodes().positions(I),R(),C.cy.one("layoutstop",C.options.stop),C.cy.trigger({type:"layoutstop",layout:C}),w&&cancelAnimationFrame(w),void(b=!1);var z=C.layout.getPositionsData();T.eles.nodes().positions((function(q,W){if(typeof q=="number"&&(q=W),!q.isParent()){for(var Q=q.id(),te=z[Q],oe=q;te==null&&(te=z[oe.data("parent")]||z["DummyCompound_"+oe.data("parent")],z[Q]=te,(oe=oe.parent()[0])!=null););return te!=null?{x:te.x,y:te.y}:{x:q.position("x"),y:q.position("y")}}})),R(),w=requestAnimationFrame(M)}),"iterateAnimated");return k.addListener("layoutstarted",(function(){C.options.animate==="during"&&(w=requestAnimationFrame(A))})),k.runLayout(),this.options.animate!=="during"&&(C.options.eles.nodes().not(":parent").layoutPositions(C,C.options,I),b=!1),this},y.prototype.getTopMostNodes=function(b){for(var w={},T=0;T<b.length;T++)w[b[T].id()]=!0;return b.filter((function(k,C){typeof k=="number"&&(k=C);for(var E=k.parent()[0];E!=null;){if(w[E.id()])return!1;E=E.parent()[0]}return!0}))},y.prototype.processChildrenList=function(b,w,T){for(var k=w.length,C=0;C<k;C++){var E,_,S=w[C],N=S.children(),O=S.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if((E=S.outerWidth()!=null&&S.outerHeight()!=null?b.add(new d(T.graphManager,new p(S.position("x")-O.w/2,S.position("y")-O.h/2),new f(parseFloat(O.w),parseFloat(O.h)))):b.add(new d(this.graphManager))).id=S.data("id"),E.paddingLeft=parseInt(S.css("padding")),E.paddingTop=parseInt(S.css("padding")),E.paddingRight=parseInt(S.css("padding")),E.paddingBottom=parseInt(S.css("padding")),this.options.nodeDimensionsIncludeLabels&&S.isParent()){var B=S.boundingBox({includeLabels:!0,includeNodes:!1}).w,L=S.boundingBox({includeLabels:!0,includeNodes:!1}).h,I=S.css("text-halign");E.labelWidth=B,E.labelHeight=L,E.labelPos=I}this.idToLNode[S.data("id")]=E,isNaN(E.rect.x)&&(E.rect.x=0),isNaN(E.rect.y)&&(E.rect.y=0),N!=null&&N.length>0&&(_=T.getGraphManager().add(T.newGraph(),E),this.processChildrenList(_,N,T))}},y.prototype.stop=function(){return this.stopped=!0,this};var x=l((function(b){b("layout","cose-bilkent",y)}),"register");typeof cytoscape<"u"&&x(cytoscape),n.exports=x}])}))}}),HS=(function(){var t=l((function(T,k,C,E){for(C=C||{},E=T.length;E--;C[T[E]]=k);return C}),"o"),e=[1,4],r=[1,13],n=[1,12],i=[1,15],a=[1,16],s=[1,20],o=[1,19],u=[6,7,8],h=[1,26],d=[1,24],p=[1,25],f=[6,7,11],g=[1,6,13,15,16,19,22],m=[1,33],y=[1,34],v=[1,6,7,11,13,15,16,19,22],x={trace:l((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,MINDMAP:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,ICON:15,CLASS:16,nodeWithId:17,nodeWithoutId:18,NODE_DSTART:19,NODE_DESCR:20,NODE_DEND:21,NODE_ID:22,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"MINDMAP",11:"EOF",13:"SPACELIST",15:"ICON",16:"CLASS",19:"NODE_DSTART",20:"NODE_DESCR",21:"NODE_DEND",22:"NODE_ID"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,2],[12,2],[12,2],[12,1],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[18,3],[17,1],[17,4]],performAction:l((function(T,k,C,E,_,S,N){var O=S.length-1;switch(_){case 6:case 7:return E;case 8:E.getLogger().trace("Stop NL ");break;case 9:E.getLogger().trace("Stop EOF ");break;case 11:E.getLogger().trace("Stop NL2 ");break;case 12:E.getLogger().trace("Stop EOF2 ");break;case 15:E.getLogger().info("Node: ",S[O].id),E.addNode(S[O-1].length,S[O].id,S[O].descr,S[O].type);break;case 16:E.getLogger().trace("Icon: ",S[O]),E.decorateNode({icon:S[O]});break;case 17:case 21:E.decorateNode({class:S[O]});break;case 18:E.getLogger().trace("SPACELIST");break;case 19:E.getLogger().trace("Node: ",S[O].id),E.addNode(0,S[O].id,S[O].descr,S[O].type);break;case 20:E.decorateNode({icon:S[O]});break;case 25:E.getLogger().trace("node found ..",S[O-2]),this.$={id:S[O-1],descr:S[O-1],type:E.getType(S[O-2],S[O])};break;case 26:this.$={id:S[O],descr:S[O],type:E.nodeType.DEFAULT};break;case 27:E.getLogger().trace("node found ..",S[O-3]),this.$={id:S[O-3],descr:S[O-1],type:E.getType(S[O-2],S[O])}}}),"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],8:e},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:e},{6:r,7:[1,10],9:9,12:11,13:n,14:14,15:i,16:a,17:17,18:18,19:s,22:o},t(u,[2,3]),{1:[2,2]},t(u,[2,4]),t(u,[2,5]),{1:[2,6],6:r,12:21,13:n,14:14,15:i,16:a,17:17,18:18,19:s,22:o},{6:r,9:22,12:11,13:n,14:14,15:i,16:a,17:17,18:18,19:s,22:o},{6:h,7:d,10:23,11:p},t(f,[2,22],{17:17,18:18,14:27,15:[1,28],16:[1,29],19:s,22:o}),t(f,[2,18]),t(f,[2,19]),t(f,[2,20]),t(f,[2,21]),t(f,[2,23]),t(f,[2,24]),t(f,[2,26],{19:[1,30]}),{20:[1,31]},{6:h,7:d,10:32,11:p},{1:[2,7],6:r,12:21,13:n,14:14,15:i,16:a,17:17,18:18,19:s,22:o},t(g,[2,14],{7:m,11:y}),t(v,[2,8]),t(v,[2,9]),t(v,[2,10]),t(f,[2,15]),t(f,[2,16]),t(f,[2,17]),{20:[1,35]},{21:[1,36]},t(g,[2,13],{7:m,11:y}),t(v,[2,11]),t(v,[2,12]),{21:[1,37]},t(f,[2,25]),t(f,[2,27])],defaultActions:{2:[2,1],6:[2,2]},parseError:l((function(T,k){if(!k.recoverable){var C=new Error(T);throw C.hash=k,C}this.trace(T)}),"parseError"),parse:l((function(T){var k=this,C=[0],E=[],_=[null],S=[],N=this.table,O="",B=0,L=0,I=2,A=1,M=S.slice.call(arguments,1),D=Object.create(this.lexer),R={yy:{}};for(var P in this.yy)Object.prototype.hasOwnProperty.call(this.yy,P)&&(R.yy[P]=this.yy[P]);D.setInput(T,R.yy),R.yy.lexer=D,R.yy.parser=this,D.yylloc===void 0&&(D.yylloc={});var $=D.yylloc;S.push($);var z=D.options&&D.options.ranges;function q(Y){C.length=C.length-2*Y,_.length=_.length-Y,S.length=S.length-Y}function W(){var Y;return typeof(Y=E.pop()||D.lex()||A)!="number"&&(Y instanceof Array&&(Y=(E=Y).pop()),Y=k.symbols_[Y]||Y),Y}typeof R.yy.parseError=="function"?this.parseError=R.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,l(q,"popStack"),l(W,"lex");for(var Q,te,oe,re,H,K,ie,ne,J={};;){if(te=C[C.length-1],this.defaultActions[te]?oe=this.defaultActions[te]:(Q==null&&(Q=W()),oe=N[te]&&N[te][Q]),oe===void 0||!oe.length||!oe[0]){var ue="";for(H in ne=[],N[te])this.terminals_[H]&&H>I&&ne.push("'"+this.terminals_[H]+"'");ue=D.showPosition?"Parse error on line "+(B+1)+`:
`+D.showPosition()+`
Expecting `+ne.join(", ")+", got '"+(this.terminals_[Q]||Q)+"'":"Parse error on line "+(B+1)+": Unexpected "+(Q==A?"end of input":"'"+(this.terminals_[Q]||Q)+"'"),this.parseError(ue,{text:D.match,token:this.terminals_[Q]||Q,line:D.yylineno,loc:$,expected:ne})}if(oe[0]instanceof Array&&oe.length>1)throw new Error("Parse Error: multiple actions possible at state: "+te+", token: "+Q);switch(oe[0]){case 1:C.push(Q),_.push(D.yytext),S.push(D.yylloc),C.push(oe[1]),Q=null,L=D.yyleng,O=D.yytext,B=D.yylineno,$=D.yylloc;break;case 2:if(K=this.productions_[oe[1]][1],J.$=_[_.length-K],J._$={first_line:S[S.length-(K||1)].first_line,last_line:S[S.length-1].last_line,first_column:S[S.length-(K||1)].first_column,last_column:S[S.length-1].last_column},z&&(J._$.range=[S[S.length-(K||1)].range[0],S[S.length-1].range[1]]),(re=this.performAction.apply(J,[O,L,B,R.yy,oe[1],_,S].concat(M)))!==void 0)return re;K&&(C=C.slice(0,-1*K*2),_=_.slice(0,-1*K),S=S.slice(0,-1*K)),C.push(this.productions_[oe[1]][0]),_.push(J.$),S.push(J._$),ie=N[C[C.length-2]][C[C.length-1]],C.push(ie);break;case 3:return!0}}return!0}),"parse")},b=(function(){var T={EOF:1,parseError:l((function(k,C){if(!this.yy.parser)throw new Error(k);this.yy.parser.parseError(k,C)}),"parseError"),setInput:l((function(k,C){return this.yy=C||this.yy||{},this._input=k,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:l((function(){var k=this._input[0];return this.yytext+=k,this.yyleng++,this.offset++,this.match+=k,this.matched+=k,k.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),k}),"input"),unput:l((function(k){var C=k.length,E=k.split(/(?:\r\n?|\n)/g);this._input=k+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-C),this.offset-=C;var _=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),E.length-1&&(this.yylineno-=E.length-1);var S=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:E?(E.length===_.length?this.yylloc.first_column:0)+_[_.length-E.length].length-E[0].length:this.yylloc.first_column-C},this.options.ranges&&(this.yylloc.range=[S[0],S[0]+this.yyleng-C]),this.yyleng=this.yytext.length,this}),"unput"),more:l((function(){return this._more=!0,this}),"more"),reject:l((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:l((function(k){this.unput(this.match.slice(k))}),"less"),pastInput:l((function(){var k=this.matched.substr(0,this.matched.length-this.match.length);return(k.length>20?"...":"")+k.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:l((function(){var k=this.match;return k.length<20&&(k+=this._input.substr(0,20-k.length)),(k.substr(0,20)+(k.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:l((function(){var k=this.pastInput(),C=new Array(k.length+1).join("-");return k+this.upcomingInput()+`
`+C+"^"}),"showPosition"),test_match:l((function(k,C){var E,_,S;if(this.options.backtrack_lexer&&(S={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(S.yylloc.range=this.yylloc.range.slice(0))),(_=k[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=_.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:_?_[_.length-1].length-_[_.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+k[0].length},this.yytext+=k[0],this.match+=k[0],this.matches=k,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(k[0].length),this.matched+=k[0],E=this.performAction.call(this,this.yy,this,C,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),E)return E;if(this._backtrack){for(var N in S)this[N]=S[N];return!1}return!1}),"test_match"),next:l((function(){if(this.done)return this.EOF;var k,C,E,_;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var S=this._currentRules(),N=0;N<S.length;N++)if((E=this._input.match(this.rules[S[N]]))&&(!C||E[0].length>C[0].length)){if(C=E,_=N,this.options.backtrack_lexer){if((k=this.test_match(E,S[N]))!==!1)return k;if(this._backtrack){C=!1;continue}return!1}if(!this.options.flex)break}return C?(k=this.test_match(C,S[_]))!==!1&&k:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:l((function(){var k=this.next();return k||this.lex()}),"lex"),begin:l((function(k){this.conditionStack.push(k)}),"begin"),popState:l((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:l((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:l((function(k){return(k=this.conditionStack.length-1-Math.abs(k||0))>=0?this.conditionStack[k]:"INITIAL"}),"topState"),pushState:l((function(k){this.begin(k)}),"pushState"),stateStackSize:l((function(){return this.conditionStack.length}),"stateStackSize"),options:{"case-insensitive":!0},performAction:l((function(k,C,E,_){switch(E){case 0:return k.getLogger().trace("Found comment",C.yytext),6;case 1:return 8;case 2:this.begin("CLASS");break;case 3:return this.popState(),16;case 4:case 23:case 26:this.popState();break;case 5:k.getLogger().trace("Begin icon"),this.begin("ICON");break;case 6:return k.getLogger().trace("SPACELINE"),6;case 7:return 7;case 8:return 15;case 9:k.getLogger().trace("end icon"),this.popState();break;case 10:return k.getLogger().trace("Exploding node"),this.begin("NODE"),19;case 11:return k.getLogger().trace("Cloud"),this.begin("NODE"),19;case 12:return k.getLogger().trace("Explosion Bang"),this.begin("NODE"),19;case 13:return k.getLogger().trace("Cloud Bang"),this.begin("NODE"),19;case 14:case 15:case 16:case 17:return this.begin("NODE"),19;case 18:return 13;case 19:return 22;case 20:return 11;case 21:this.begin("NSTR2");break;case 22:return"NODE_DESCR";case 24:k.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 25:return k.getLogger().trace("description:",C.yytext),"NODE_DESCR";case 27:return this.popState(),k.getLogger().trace("node end ))"),"NODE_DEND";case 28:return this.popState(),k.getLogger().trace("node end )"),"NODE_DEND";case 29:return this.popState(),k.getLogger().trace("node end ...",C.yytext),"NODE_DEND";case 30:case 33:case 34:return this.popState(),k.getLogger().trace("node end (("),"NODE_DEND";case 31:case 32:return this.popState(),k.getLogger().trace("node end (-"),"NODE_DEND";case 35:case 36:return k.getLogger().trace("Long description:",C.yytext),20}}),"anonymous"),rules:[/^(?:\s*%%.*)/i,/^(?:mindmap\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{CLASS:{rules:[3,4],inclusive:!1},ICON:{rules:[8,9],inclusive:!1},NSTR2:{rules:[22,23],inclusive:!1},NSTR:{rules:[25,26],inclusive:!1},NODE:{rules:[21,24,27,28,29,30,31,32,33,34,35,36],inclusive:!1},INITIAL:{rules:[0,1,2,5,6,7,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}};return T})();function w(){this.yy={}}return x.lexer=b,l(w,"Parser"),w.prototype=x,x.Parser=w,new w})();HS.parser=HS;var XSe=HS,ws=[],zoe=0,lI={},KSe=l((()=>{ws=[],zoe=0,lI={}}),"clear"),ZSe=l((function(t){for(let e=ws.length-1;e>=0;e--)if(ws[e].level<t)return ws[e];return null}),"getParent"),QSe=l((()=>ws.length>0?ws[0]:null),"getMindmap"),JSe=l(((t,e,r,n)=>{ee.info("addNode",t,e,r,n);const i=ke();let a=i.mindmap?.padding??or.mindmap.padding;switch(n){case Rn.ROUNDED_RECT:case Rn.RECT:case Rn.HEXAGON:a*=2}const s={id:zoe++,nodeId:Ir(e,i),level:t,descr:Ir(r,i),type:n,children:[],width:i.mindmap?.maxNodeWidth??or.mindmap.maxNodeWidth,padding:a},o=ZSe(t);if(o)o.children.push(s),ws.push(s);else{if(ws.length!==0)throw new Error('There can be only one root. No parent could be found for ("'+s.descr+'")');ws.push(s)}}),"addNode"),Rn={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},e8e=l(((t,e)=>{switch(ee.debug("In get type",t,e),t){case"[":return Rn.RECT;case"(":return e===")"?Rn.ROUNDED_RECT:Rn.CLOUD;case"((":return Rn.CIRCLE;case")":return Rn.CLOUD;case"))":return Rn.BANG;case"{{":return Rn.HEXAGON;default:return Rn.DEFAULT}}),"getType"),t8e=l(((t,e)=>{lI[t]=e}),"setElementForId"),r8e=l((t=>{if(!t)return;const e=ke(),r=ws[ws.length-1];t.icon&&(r.icon=Ir(t.icon,e)),t.class&&(r.class=Ir(t.class,e))}),"decorateNode"),n8e=l((t=>{switch(t){case Rn.DEFAULT:return"no-border";case Rn.RECT:return"rect";case Rn.ROUNDED_RECT:return"rounded-rect";case Rn.CIRCLE:return"circle";case Rn.CLOUD:return"cloud";case Rn.BANG:return"bang";case Rn.HEXAGON:return"hexgon";default:return"no-border"}}),"type2Str"),i8e=l((()=>ee),"getLogger"),a8e=l((t=>lI[t]),"getElementById"),s8e={clear:KSe,addNode:JSe,getMindmap:QSe,nodeType:Rn,getType:e8e,setElementForId:t8e,decorateNode:r8e,type2Str:n8e,getLogger:i8e,getElementById:a8e},o8e=Ci(HSe()),l8e=l((function(t,e,r,n){e.append("path").attr("id","node-"+r.id).attr("class","node-bkg node-"+t.type2Str(r.type)).attr("d",`M0 ${r.height-5} v${10-r.height} q0,-5 5,-5 h${r.width-10} q5,0 5,5 v${r.height-5} H0 Z`),e.append("line").attr("class","node-line-"+n).attr("x1",0).attr("y1",r.height).attr("x2",r.width).attr("y2",r.height)}),"defaultBkg"),c8e=l((function(t,e,r){e.append("rect").attr("id","node-"+r.id).attr("class","node-bkg node-"+t.type2Str(r.type)).attr("height",r.height).attr("width",r.width)}),"rectBkg"),u8e=l((function(t,e,r){const n=r.width,i=r.height,a=.15*n,s=.25*n,o=.35*n,u=.2*n;e.append("path").attr("id","node-"+r.id).attr("class","node-bkg node-"+t.type2Str(r.type)).attr("d",`M0 0 a${a},${a} 0 0,1 ${.25*n},${-1*n*.1}
      a${o},${o} 1 0,1 ${.4*n},${-1*n*.1}
      a${s},${s} 1 0,1 ${.35*n},${1*n*.2}

      a${a},${a} 1 0,1 ${.15*n},${1*i*.35}
      a${u},${u} 1 0,1 ${-1*n*.15},${1*i*.65}

      a${s},${a} 1 0,1 ${-1*n*.25},${.15*n}
      a${o},${o} 1 0,1 ${-1*n*.5},0
      a${a},${a} 1 0,1 ${-1*n*.25},${-1*n*.15}

      a${a},${a} 1 0,1 ${-1*n*.1},${-1*i*.35}
      a${u},${u} 1 0,1 ${.1*n},${-1*i*.65}

    H0 V0 Z`)}),"cloudBkg"),h8e=l((function(t,e,r){const n=r.width,i=r.height,a=.15*n;e.append("path").attr("id","node-"+r.id).attr("class","node-bkg node-"+t.type2Str(r.type)).attr("d",`M0 0 a${a},${a} 1 0,0 ${.25*n},${-1*i*.1}
      a${a},${a} 1 0,0 ${.25*n},0
      a${a},${a} 1 0,0 ${.25*n},0
      a${a},${a} 1 0,0 ${.25*n},${1*i*.1}

      a${a},${a} 1 0,0 ${.15*n},${1*i*.33}
      a${.8*a},${.8*a} 1 0,0 0,${1*i*.34}
      a${a},${a} 1 0,0 ${-1*n*.15},${1*i*.33}

      a${a},${a} 1 0,0 ${-1*n*.25},${.15*i}
      a${a},${a} 1 0,0 ${-1*n*.25},0
      a${a},${a} 1 0,0 ${-1*n*.25},0
      a${a},${a} 1 0,0 ${-1*n*.25},${-1*i*.15}

      a${a},${a} 1 0,0 ${-1*n*.1},${-1*i*.33}
      a${.8*a},${.8*a} 1 0,0 0,${-1*i*.34}
      a${a},${a} 1 0,0 ${.1*n},${-1*i*.33}

    H0 V0 Z`)}),"bangBkg"),d8e=l((function(t,e,r){e.append("circle").attr("id","node-"+r.id).attr("class","node-bkg node-"+t.type2Str(r.type)).attr("r",r.width/2)}),"circleBkg");function Goe(t,e,r,n,i){return t.insert("polygon",":first-child").attr("points",n.map((function(a){return a.x+","+a.y})).join(" ")).attr("transform","translate("+(i.width-e)/2+", "+r+")")}l(Goe,"insertPolygonShape");var p8e=l((function(t,e,r){const n=r.height,i=n/4,a=r.width-r.padding+2*i;Goe(e,a,n,[{x:i,y:0},{x:a-i,y:0},{x:a,y:-n/2},{x:a-i,y:-n},{x:i,y:-n},{x:0,y:-n/2}],r)}),"hexagonBkg"),f8e=l((function(t,e,r){e.append("rect").attr("id","node-"+r.id).attr("class","node-bkg node-"+t.type2Str(r.type)).attr("height",r.height).attr("rx",r.padding).attr("ry",r.padding).attr("width",r.width)}),"roundedRectBkg"),g8e=l((async function(t,e,r,n,i){const a=i.htmlLabels,s=n%11,o=e.append("g");r.section=s;let u="section-"+s;s<0&&(u+=" section-root"),o.attr("class",(r.class?r.class+" ":"")+"mindmap-node "+u);const h=o.append("g"),d=o.append("g"),p=r.descr.replace(/(<br\/*>)/g,`
`);await pa(d,p,{useHtmlLabels:a,width:r.width,classes:"mindmap-node-label"},i),a||d.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle");const f=d.node().getBBox(),[g]=fc(i.fontSize);if(r.height=f.height+1.1*g*.5+r.padding,r.width=f.width+2*r.padding,r.icon)if(r.type===t.nodeType.CIRCLE)r.height+=50,r.width+=50,o.append("foreignObject").attr("height","50px").attr("width",r.width).attr("style","text-align: center;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+s+" "+r.icon),d.attr("transform","translate("+r.width/2+", "+(r.height/2-1.5*r.padding)+")");else{r.width+=50;const m=r.height;r.height=Math.max(m,60);const y=Math.abs(r.height-m);o.append("foreignObject").attr("width","60px").attr("height",r.height).attr("style","text-align: center;margin-top:"+y/2+"px;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+s+" "+r.icon),d.attr("transform","translate("+(25+r.width/2)+", "+(y/2+r.padding/2)+")")}else if(a){const m=(r.width-f.width)/2,y=(r.height-f.height)/2;d.attr("transform","translate("+m+", "+y+")")}else{const m=r.width/2,y=r.padding/2;d.attr("transform","translate("+m+", "+y+")")}switch(r.type){case t.nodeType.DEFAULT:l8e(t,h,r,s);break;case t.nodeType.ROUNDED_RECT:f8e(t,h,r,s);break;case t.nodeType.RECT:c8e(t,h,r,s);break;case t.nodeType.CIRCLE:h.attr("transform","translate("+r.width/2+", "+ +r.height/2+")"),d8e(t,h,r,s);break;case t.nodeType.CLOUD:u8e(t,h,r,s);break;case t.nodeType.BANG:h8e(t,h,r,s);break;case t.nodeType.HEXAGON:p8e(t,h,r,s)}return t.setElementForId(r.id,o),r.height}),"drawNode"),m8e=l((function(t,e){const r=t.getElementById(e.id),n=e.x||0,i=e.y||0;r.attr("transform","translate("+n+","+i+")")}),"positionNode");async function cI(t,e,r,n,i){await g8e(t,e,r,n,i),r.children&&await Promise.all(r.children.map(((a,s)=>cI(t,e,a,n<0?s:n,i))))}function Uoe(t,e){e.edges().map(((r,n)=>{const i=r.data();if(r[0]._private.bodyBounds){const a=r[0]._private.rscratch;ee.trace("Edge: ",n,i),t.insert("path").attr("d",`M ${a.startX},${a.startY} L ${a.midX},${a.midY} L${a.endX},${a.endY} `).attr("class","edge section-edge-"+i.section+" edge-depth-"+i.depth)}}))}function uI(t,e,r,n){e.add({group:"nodes",data:{id:t.id.toString(),labelText:t.descr,height:t.height,width:t.width,level:n,nodeId:t.id,padding:t.padding,type:t.type},position:{x:t.x,y:t.y}}),t.children&&t.children.forEach((i=>{uI(i,e,r,n+1),e.add({group:"edges",data:{id:`${t.id}_${i.id}`,source:t.id,target:i.id,depth:n,section:i.section}})}))}function qoe(t,e){return new Promise((r=>{const n=Ze("body").append("div").attr("id","cy").attr("style","display:none"),i=js({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});n.remove(),uI(t,i,e,0),i.nodes().forEach((function(a){a.layoutDimensions=()=>{const s=a.data();return{w:s.width,h:s.height}}})),i.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),i.ready((a=>{ee.info("Ready",a),r(i)}))}))}function joe(t,e){e.nodes().map(((r,n)=>{const i=r.data();i.x=r.position().x,i.y=r.position().y,m8e(t,i);const a=t.getElementById(i.nodeId);ee.info("Id:",n,"Position: (",r.position().x,", ",r.position().y,")",i),a.attr("transform",`translate(${r.position().x-i.width/2}, ${r.position().y-i.height/2})`),a.attr("attr",`apa-${n})`)}))}js.use(o8e.default),l(cI,"drawNodes"),l(Uoe,"drawEdges"),l(uI,"addNodes"),l(qoe,"layoutMindmap"),l(joe,"positionNodes");var y8e=l((async(t,e,r,n)=>{ee.debug(`Rendering mindmap diagram
`+t);const i=n.db,a=i.getMindmap();if(!a)return;const s=ke();s.htmlLabels=!1;const o=tl(e),u=o.append("g");u.attr("class","mindmap-edges");const h=o.append("g");h.attr("class","mindmap-nodes"),await cI(i,h,a,-1,s);const d=await qoe(a,s);Uoe(u,d),joe(i,d),am(void 0,o,s.mindmap?.padding??or.mindmap.padding,s.mindmap?.useMaxWidth??or.mindmap.useMaxWidth)}),"draw"),v8e={draw:y8e},x8e=l((t=>{let e="";for(let r=0;r<t.THEME_COLOR_LIMIT;r++)t["lineColor"+r]=t["lineColor"+r]||t["cScaleInv"+r],hc(t["lineColor"+r])?t["lineColor"+r]=bt(t["lineColor"+r],20):t["lineColor"+r]=Lt(t["lineColor"+r],20);for(let r=0;r<t.THEME_COLOR_LIMIT;r++){const n=""+(17-3*r);e+=`
    .section-${r-1} rect, .section-${r-1} path, .section-${r-1} circle, .section-${r-1} polygon, .section-${r-1} path  {
      fill: ${t["cScale"+r]};
    }
    .section-${r-1} text {
     fill: ${t["cScaleLabel"+r]};
    }
    .node-icon-${r-1} {
      font-size: 40px;
      color: ${t["cScaleLabel"+r]};
    }
    .section-edge-${r-1}{
      stroke: ${t["cScale"+r]};
    }
    .edge-depth-${r-1}{
      stroke-width: ${n};
    }
    .section-${r-1} line {
      stroke: ${t["cScaleInv"+r]} ;
      stroke-width: 3;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return e}),"genSections"),b8e={db:s8e,renderer:v8e,parser:XSe,styles:l((t=>`
  .edge {
    stroke-width: 3;
  }
  ${x8e(t)}
  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {
    fill: ${t.git0};
  }
  .section-root text {
    fill: ${t.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .mindmap-node-label {
    dy: 1em;
    alignment-baseline: middle;
    text-anchor: middle;
    dominant-baseline: middle;
    text-align: center;
  }
`),"getStyles")},w8e=Object.freeze({__proto__:null,diagram:b8e}),XS=(function(){var t=l((function(E,_,S,N){for(S=S||{},N=E.length;N--;S[E[N]]=_);return S}),"o"),e=[1,4],r=[1,13],n=[1,12],i=[1,15],a=[1,16],s=[1,20],o=[1,19],u=[6,7,8],h=[1,26],d=[1,24],p=[1,25],f=[6,7,11],g=[1,31],m=[6,7,11,24],y=[1,6,13,16,17,20,23],v=[1,35],x=[1,36],b=[1,6,7,11,13,16,17,20,23],w=[1,38],T={trace:l((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,KANBAN:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,shapeData:15,ICON:16,CLASS:17,nodeWithId:18,nodeWithoutId:19,NODE_DSTART:20,NODE_DESCR:21,NODE_DEND:22,NODE_ID:23,SHAPE_DATA:24,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"KANBAN",11:"EOF",13:"SPACELIST",16:"ICON",17:"CLASS",20:"NODE_DSTART",21:"NODE_DESCR",22:"NODE_DEND",23:"NODE_ID",24:"SHAPE_DATA"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,3],[12,2],[12,2],[12,2],[12,1],[12,2],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[19,3],[18,1],[18,4],[15,2],[15,1]],performAction:l((function(E,_,S,N,O,B,L){var I=B.length-1;switch(O){case 6:case 7:return N;case 8:N.getLogger().trace("Stop NL ");break;case 9:N.getLogger().trace("Stop EOF ");break;case 11:N.getLogger().trace("Stop NL2 ");break;case 12:N.getLogger().trace("Stop EOF2 ");break;case 15:N.getLogger().info("Node: ",B[I-1].id),N.addNode(B[I-2].length,B[I-1].id,B[I-1].descr,B[I-1].type,B[I]);break;case 16:N.getLogger().info("Node: ",B[I].id),N.addNode(B[I-1].length,B[I].id,B[I].descr,B[I].type);break;case 17:N.getLogger().trace("Icon: ",B[I]),N.decorateNode({icon:B[I]});break;case 18:case 23:N.decorateNode({class:B[I]});break;case 19:N.getLogger().trace("SPACELIST");break;case 20:N.getLogger().trace("Node: ",B[I-1].id),N.addNode(0,B[I-1].id,B[I-1].descr,B[I-1].type,B[I]);break;case 21:N.getLogger().trace("Node: ",B[I].id),N.addNode(0,B[I].id,B[I].descr,B[I].type);break;case 22:N.decorateNode({icon:B[I]});break;case 27:N.getLogger().trace("node found ..",B[I-2]),this.$={id:B[I-1],descr:B[I-1],type:N.getType(B[I-2],B[I])};break;case 28:this.$={id:B[I],descr:B[I],type:0};break;case 29:N.getLogger().trace("node found ..",B[I-3]),this.$={id:B[I-3],descr:B[I-1],type:N.getType(B[I-2],B[I])};break;case 30:this.$=B[I-1]+B[I];break;case 31:this.$=B[I]}}),"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],8:e},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:e},{6:r,7:[1,10],9:9,12:11,13:n,14:14,16:i,17:a,18:17,19:18,20:s,23:o},t(u,[2,3]),{1:[2,2]},t(u,[2,4]),t(u,[2,5]),{1:[2,6],6:r,12:21,13:n,14:14,16:i,17:a,18:17,19:18,20:s,23:o},{6:r,9:22,12:11,13:n,14:14,16:i,17:a,18:17,19:18,20:s,23:o},{6:h,7:d,10:23,11:p},t(f,[2,24],{18:17,19:18,14:27,16:[1,28],17:[1,29],20:s,23:o}),t(f,[2,19]),t(f,[2,21],{15:30,24:g}),t(f,[2,22]),t(f,[2,23]),t(m,[2,25]),t(m,[2,26]),t(m,[2,28],{20:[1,32]}),{21:[1,33]},{6:h,7:d,10:34,11:p},{1:[2,7],6:r,12:21,13:n,14:14,16:i,17:a,18:17,19:18,20:s,23:o},t(y,[2,14],{7:v,11:x}),t(b,[2,8]),t(b,[2,9]),t(b,[2,10]),t(f,[2,16],{15:37,24:g}),t(f,[2,17]),t(f,[2,18]),t(f,[2,20],{24:w}),t(m,[2,31]),{21:[1,39]},{22:[1,40]},t(y,[2,13],{7:v,11:x}),t(b,[2,11]),t(b,[2,12]),t(f,[2,15],{24:w}),t(m,[2,30]),{22:[1,41]},t(m,[2,27]),t(m,[2,29])],defaultActions:{2:[2,1],6:[2,2]},parseError:l((function(E,_){if(!_.recoverable){var S=new Error(E);throw S.hash=_,S}this.trace(E)}),"parseError"),parse:l((function(E){var _=this,S=[0],N=[],O=[null],B=[],L=this.table,I="",A=0,M=0,D=2,R=1,P=B.slice.call(arguments,1),$=Object.create(this.lexer),z={yy:{}};for(var q in this.yy)Object.prototype.hasOwnProperty.call(this.yy,q)&&(z.yy[q]=this.yy[q]);$.setInput(E,z.yy),z.yy.lexer=$,z.yy.parser=this,$.yylloc===void 0&&($.yylloc={});var W=$.yylloc;B.push(W);var Q=$.options&&$.options.ranges;function te(ce){S.length=S.length-2*ce,O.length=O.length-ce,B.length=B.length-ce}function oe(){var ce;return typeof(ce=N.pop()||$.lex()||R)!="number"&&(ce instanceof Array&&(ce=(N=ce).pop()),ce=_.symbols_[ce]||ce),ce}typeof z.yy.parseError=="function"?this.parseError=z.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,l(te,"popStack"),l(oe,"lex");for(var re,H,K,ie,ne,J,ue,Y,se={};;){if(H=S[S.length-1],this.defaultActions[H]?K=this.defaultActions[H]:(re==null&&(re=oe()),K=L[H]&&L[H][re]),K===void 0||!K.length||!K[0]){var de="";for(ne in Y=[],L[H])this.terminals_[ne]&&ne>D&&Y.push("'"+this.terminals_[ne]+"'");de=$.showPosition?"Parse error on line "+(A+1)+`:
`+$.showPosition()+`
Expecting `+Y.join(", ")+", got '"+(this.terminals_[re]||re)+"'":"Parse error on line "+(A+1)+": Unexpected "+(re==R?"end of input":"'"+(this.terminals_[re]||re)+"'"),this.parseError(de,{text:$.match,token:this.terminals_[re]||re,line:$.yylineno,loc:W,expected:Y})}if(K[0]instanceof Array&&K.length>1)throw new Error("Parse Error: multiple actions possible at state: "+H+", token: "+re);switch(K[0]){case 1:S.push(re),O.push($.yytext),B.push($.yylloc),S.push(K[1]),re=null,M=$.yyleng,I=$.yytext,A=$.yylineno,W=$.yylloc;break;case 2:if(J=this.productions_[K[1]][1],se.$=O[O.length-J],se._$={first_line:B[B.length-(J||1)].first_line,last_line:B[B.length-1].last_line,first_column:B[B.length-(J||1)].first_column,last_column:B[B.length-1].last_column},Q&&(se._$.range=[B[B.length-(J||1)].range[0],B[B.length-1].range[1]]),(ie=this.performAction.apply(se,[I,M,A,z.yy,K[1],O,B].concat(P)))!==void 0)return ie;J&&(S=S.slice(0,-1*J*2),O=O.slice(0,-1*J),B=B.slice(0,-1*J)),S.push(this.productions_[K[1]][0]),O.push(se.$),B.push(se._$),ue=L[S[S.length-2]][S[S.length-1]],S.push(ue);break;case 3:return!0}}return!0}),"parse")},k=(function(){var E={EOF:1,parseError:l((function(_,S){if(!this.yy.parser)throw new Error(_);this.yy.parser.parseError(_,S)}),"parseError"),setInput:l((function(_,S){return this.yy=S||this.yy||{},this._input=_,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:l((function(){var _=this._input[0];return this.yytext+=_,this.yyleng++,this.offset++,this.match+=_,this.matched+=_,_.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),_}),"input"),unput:l((function(_){var S=_.length,N=_.split(/(?:\r\n?|\n)/g);this._input=_+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-S),this.offset-=S;var O=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),N.length-1&&(this.yylineno-=N.length-1);var B=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:N?(N.length===O.length?this.yylloc.first_column:0)+O[O.length-N.length].length-N[0].length:this.yylloc.first_column-S},this.options.ranges&&(this.yylloc.range=[B[0],B[0]+this.yyleng-S]),this.yyleng=this.yytext.length,this}),"unput"),more:l((function(){return this._more=!0,this}),"more"),reject:l((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:l((function(_){this.unput(this.match.slice(_))}),"less"),pastInput:l((function(){var _=this.matched.substr(0,this.matched.length-this.match.length);return(_.length>20?"...":"")+_.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:l((function(){var _=this.match;return _.length<20&&(_+=this._input.substr(0,20-_.length)),(_.substr(0,20)+(_.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:l((function(){var _=this.pastInput(),S=new Array(_.length+1).join("-");return _+this.upcomingInput()+`
`+S+"^"}),"showPosition"),test_match:l((function(_,S){var N,O,B;if(this.options.backtrack_lexer&&(B={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(B.yylloc.range=this.yylloc.range.slice(0))),(O=_[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=O.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:O?O[O.length-1].length-O[O.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+_[0].length},this.yytext+=_[0],this.match+=_[0],this.matches=_,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(_[0].length),this.matched+=_[0],N=this.performAction.call(this,this.yy,this,S,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),N)return N;if(this._backtrack){for(var L in B)this[L]=B[L];return!1}return!1}),"test_match"),next:l((function(){if(this.done)return this.EOF;var _,S,N,O;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var B=this._currentRules(),L=0;L<B.length;L++)if((N=this._input.match(this.rules[B[L]]))&&(!S||N[0].length>S[0].length)){if(S=N,O=L,this.options.backtrack_lexer){if((_=this.test_match(N,B[L]))!==!1)return _;if(this._backtrack){S=!1;continue}return!1}if(!this.options.flex)break}return S?(_=this.test_match(S,B[O]))!==!1&&_:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:l((function(){var _=this.next();return _||this.lex()}),"lex"),begin:l((function(_){this.conditionStack.push(_)}),"begin"),popState:l((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:l((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:l((function(_){return(_=this.conditionStack.length-1-Math.abs(_||0))>=0?this.conditionStack[_]:"INITIAL"}),"topState"),pushState:l((function(_){this.begin(_)}),"pushState"),stateStackSize:l((function(){return this.conditionStack.length}),"stateStackSize"),options:{"case-insensitive":!0},performAction:l((function(_,S,N,O){switch(N){case 0:return this.pushState("shapeData"),S.yytext="",24;case 1:return this.pushState("shapeDataStr"),24;case 2:return this.popState(),24;case 3:const B=/\n\s*/g;return S.yytext=S.yytext.replace(B,"<br/>"),24;case 4:return 24;case 5:case 10:case 29:case 32:this.popState();break;case 6:return _.getLogger().trace("Found comment",S.yytext),6;case 7:return 8;case 8:this.begin("CLASS");break;case 9:return this.popState(),17;case 11:_.getLogger().trace("Begin icon"),this.begin("ICON");break;case 12:return _.getLogger().trace("SPACELINE"),6;case 13:return 7;case 14:return 16;case 15:_.getLogger().trace("end icon"),this.popState();break;case 16:return _.getLogger().trace("Exploding node"),this.begin("NODE"),20;case 17:return _.getLogger().trace("Cloud"),this.begin("NODE"),20;case 18:return _.getLogger().trace("Explosion Bang"),this.begin("NODE"),20;case 19:return _.getLogger().trace("Cloud Bang"),this.begin("NODE"),20;case 20:case 21:case 22:case 23:return this.begin("NODE"),20;case 24:return 13;case 25:return 23;case 26:return 11;case 27:this.begin("NSTR2");break;case 28:return"NODE_DESCR";case 30:_.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 31:return _.getLogger().trace("description:",S.yytext),"NODE_DESCR";case 33:return this.popState(),_.getLogger().trace("node end ))"),"NODE_DEND";case 34:return this.popState(),_.getLogger().trace("node end )"),"NODE_DEND";case 35:return this.popState(),_.getLogger().trace("node end ...",S.yytext),"NODE_DEND";case 36:case 39:case 40:return this.popState(),_.getLogger().trace("node end (("),"NODE_DEND";case 37:case 38:return this.popState(),_.getLogger().trace("node end (-"),"NODE_DEND";case 41:case 42:return _.getLogger().trace("Long description:",S.yytext),21}}),"anonymous"),rules:[/^(?:@\{)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^\"]+)/i,/^(?:[^}^"]+)/i,/^(?:\})/i,/^(?:\s*%%.*)/i,/^(?:kanban\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}@]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{shapeDataEndBracket:{rules:[],inclusive:!1},shapeDataStr:{rules:[2,3],inclusive:!1},shapeData:{rules:[1,4,5],inclusive:!1},CLASS:{rules:[9,10],inclusive:!1},ICON:{rules:[14,15],inclusive:!1},NSTR2:{rules:[28,29],inclusive:!1},NSTR:{rules:[31,32],inclusive:!1},NODE:{rules:[27,30,33,34,35,36,37,38,39,40,41,42],inclusive:!1},INITIAL:{rules:[0,6,7,8,11,12,13,16,17,18,19,20,21,22,23,24,25,26],inclusive:!0}}};return E})();function C(){this.yy={}}return T.lexer=k,l(C,"Parser"),C.prototype=T,T.Parser=C,new C})();XS.parser=XS;var k8e=XS,$a=[],hI=[],KS=0,dI={},T8e=l((()=>{$a=[],hI=[],KS=0,dI={}}),"clear"),E8e=l((t=>{if($a.length===0)return null;const e=$a[0].level;let r=null;for(let n=$a.length-1;n>=0;n--)if($a[n].level!==e||r||(r=$a[n]),$a[n].level<e)throw new Error('Items without section detected, found section ("'+$a[n].label+'")');return t===r?.level?null:r}),"getSection"),Woe=l((function(){return hI}),"getSections"),_8e=l((function(){const t=[],e=Woe(),r=ke();for(const n of e){const i={id:n.id,label:Ir(n.label??"",r),isGroup:!0,ticket:n.ticket,shape:"kanbanSection",level:n.level,look:r.look};t.push(i);const a=$a.filter((s=>s.parentId===n.id));for(const s of a){const o={id:s.id,parentId:n.id,label:Ir(s.label??"",r),isGroup:!1,ticket:s?.ticket,priority:s?.priority,assigned:s?.assigned,icon:s?.icon,shape:"kanbanItem",level:s.level,rx:5,ry:5,cssStyles:["text-align: left"]};t.push(o)}}return{nodes:t,edges:[],other:{},config:ke()}}),"getData"),C8e=l(((t,e,r,n,i)=>{const a=ke();let s=a.mindmap?.padding??or.mindmap.padding;switch(n){case Mn.ROUNDED_RECT:case Mn.RECT:case Mn.HEXAGON:s*=2}const o={id:Ir(e,a)||"kbn"+KS++,level:t,label:Ir(r,a),width:a.mindmap?.maxNodeWidth??or.mindmap.maxNodeWidth,padding:s,isGroup:!1};if(i!==void 0){let h;h=i.includes(`
`)?i+`
`:`{
`+i+`
}`;const d=b1(h,{schema:x1});if(d.shape&&(d.shape!==d.shape.toLowerCase()||d.shape.includes("_")))throw new Error(`No such shape: ${d.shape}. Shape names should be lowercase.`);d?.shape&&d.shape==="kanbanItem"&&(o.shape=d?.shape),d?.label&&(o.label=d?.label),d?.icon&&(o.icon=d?.icon.toString()),d?.assigned&&(o.assigned=d?.assigned.toString()),d?.ticket&&(o.ticket=d?.ticket.toString()),d?.priority&&(o.priority=d?.priority)}const u=E8e(t);u?o.parentId=u.id||"kbn"+KS++:hI.push(o),$a.push(o)}),"addNode"),Mn={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},S8e=l(((t,e)=>{switch(ee.debug("In get type",t,e),t){case"[":return Mn.RECT;case"(":return e===")"?Mn.ROUNDED_RECT:Mn.CLOUD;case"((":return Mn.CIRCLE;case")":return Mn.CLOUD;case"))":return Mn.BANG;case"{{":return Mn.HEXAGON;default:return Mn.DEFAULT}}),"getType"),A8e=l(((t,e)=>{dI[t]=e}),"setElementForId"),L8e=l((t=>{if(!t)return;const e=ke(),r=$a[$a.length-1];t.icon&&(r.icon=Ir(t.icon,e)),t.class&&(r.cssClasses=Ir(t.class,e))}),"decorateNode"),N8e=l((t=>{switch(t){case Mn.DEFAULT:return"no-border";case Mn.RECT:return"rect";case Mn.ROUNDED_RECT:return"rounded-rect";case Mn.CIRCLE:return"circle";case Mn.CLOUD:return"cloud";case Mn.BANG:return"bang";case Mn.HEXAGON:return"hexgon";default:return"no-border"}}),"type2Str"),I8e=l((()=>ee),"getLogger"),R8e=l((t=>dI[t]),"getElementById"),M8e={clear:T8e,addNode:C8e,getSections:Woe,getData:_8e,nodeType:Mn,getType:S8e,setElementForId:A8e,decorateNode:L8e,type2Str:N8e,getLogger:I8e,getElementById:R8e},D8e=l((async(t,e,r,n)=>{ee.debug(`Rendering kanban diagram
`+t);const i=n.db.getData(),a=ke();a.htmlLabels=!1;const s=tl(e),o=s.append("g");o.attr("class","sections");const u=s.append("g");u.attr("class","items");const h=i.nodes.filter((m=>m.isGroup));let d=0;const p=[];let f=25;for(const m of h){const y=a?.kanban?.sectionWidth||200;d+=1,m.x=y*d+10*(d-1)/2,m.width=y,m.y=0,m.height=3*y,m.rx=5,m.ry=5,m.cssClasses=m.cssClasses+" section-"+d;const v=await Z1(o,m);f=Math.max(f,v?.labelBBox?.height),p.push(v)}let g=0;for(const m of h){const y=p[g];g+=1;const v=a?.kanban?.sectionWidth||200,x=3*-v/2+f;let b=x;const w=i.nodes.filter((C=>C.parentId===m.id));for(const C of w){if(C.isGroup)throw new Error("Groups within groups are not allowed in Kanban diagrams");C.x=m.x,C.width=v-15;const E=(await H6(u,C,{config:a})).node().getBBox();C.y=b+E.height/2,await x_(C),b=C.y+E.height/2+5}const T=y.cluster.select("rect"),k=Math.max(b-x+30,50)+(f-25);T.attr("height",k)}am(void 0,s,a.mindmap?.padding??or.kanban.padding,a.mindmap?.useMaxWidth??or.kanban.useMaxWidth)}),"draw"),O8e={draw:D8e},P8e=l((t=>{let e="";for(let n=0;n<t.THEME_COLOR_LIMIT;n++)t["lineColor"+n]=t["lineColor"+n]||t["cScaleInv"+n],hc(t["lineColor"+n])?t["lineColor"+n]=bt(t["lineColor"+n],20):t["lineColor"+n]=Lt(t["lineColor"+n],20);const r=l(((n,i)=>t.darkMode?Lt(n,i):bt(n,i)),"adjuster");for(let n=0;n<t.THEME_COLOR_LIMIT;n++){const i=""+(17-3*n);e+=`
    .section-${n-1} rect, .section-${n-1} path, .section-${n-1} circle, .section-${n-1} polygon, .section-${n-1} path  {
      fill: ${r(t["cScale"+n],10)};
      stroke: ${r(t["cScale"+n],10)};

    }
    .section-${n-1} text {
     fill: ${t["cScaleLabel"+n]};
    }
    .node-icon-${n-1} {
      font-size: 40px;
      color: ${t["cScaleLabel"+n]};
    }
    .section-edge-${n-1}{
      stroke: ${t["cScale"+n]};
    }
    .edge-depth-${n-1}{
      stroke-width: ${i};
    }
    .section-${n-1} line {
      stroke: ${t["cScaleInv"+n]} ;
      stroke-width: 3;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.background};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .kanban-ticket-link {
    fill: ${t.background};
    stroke: ${t.nodeBorder};
    text-decoration: underline;
  }
    `}return e}),"genSections"),B8e={db:M8e,renderer:O8e,parser:k8e,styles:l((t=>`
  .edge {
    stroke-width: 3;
  }
  ${P8e(t)}
  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {
    fill: ${t.git0};
  }
  .section-root text {
    fill: ${t.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .cluster-label, .label {
    color: ${t.textColor};
    fill: ${t.textColor};
    }
  .kanban-label {
    dy: 1em;
    alignment-baseline: middle;
    text-anchor: middle;
    dominant-baseline: middle;
    text-align: center;
  }
`),"getStyles")},$8e=Object.freeze({__proto__:null,diagram:B8e}),ZS=(function(){var t=l((function(o,u,h,d){for(h=h||{},d=o.length;d--;h[o[d]]=u);return h}),"o"),e=[1,9],r=[1,10],n=[1,5,10,12],i={trace:l((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,SANKEY:4,NEWLINE:5,csv:6,opt_eof:7,record:8,csv_tail:9,EOF:10,"field[source]":11,COMMA:12,"field[target]":13,"field[value]":14,field:15,escaped:16,non_escaped:17,DQUOTE:18,ESCAPED_TEXT:19,NON_ESCAPED_TEXT:20,$accept:0,$end:1},terminals_:{2:"error",4:"SANKEY",5:"NEWLINE",10:"EOF",11:"field[source]",12:"COMMA",13:"field[target]",14:"field[value]",18:"DQUOTE",19:"ESCAPED_TEXT",20:"NON_ESCAPED_TEXT"},productions_:[0,[3,4],[6,2],[9,2],[9,0],[7,1],[7,0],[8,5],[15,1],[15,1],[16,3],[17,1]],performAction:l((function(o,u,h,d,p,f,g){var m=f.length-1;switch(p){case 7:const y=d.findOrCreateNode(f[m-4].trim().replaceAll('""','"')),v=d.findOrCreateNode(f[m-2].trim().replaceAll('""','"')),x=parseFloat(f[m].trim());d.addLink(y,v,x);break;case 8:case 9:case 11:this.$=f[m];break;case 10:this.$=f[m-1]}}),"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},{5:[1,3]},{6:4,8:5,15:6,16:7,17:8,18:e,20:r},{1:[2,6],7:11,10:[1,12]},t(r,[2,4],{9:13,5:[1,14]}),{12:[1,15]},t(n,[2,8]),t(n,[2,9]),{19:[1,16]},t(n,[2,11]),{1:[2,1]},{1:[2,5]},t(r,[2,2]),{6:17,8:5,15:6,16:7,17:8,18:e,20:r},{15:18,16:7,17:8,18:e,20:r},{18:[1,19]},t(r,[2,3]),{12:[1,20]},t(n,[2,10]),{15:21,16:7,17:8,18:e,20:r},t([1,5,10],[2,7])],defaultActions:{11:[2,1],12:[2,5]},parseError:l((function(o,u){if(!u.recoverable){var h=new Error(o);throw h.hash=u,h}this.trace(o)}),"parseError"),parse:l((function(o){var u=this,h=[0],d=[],p=[null],f=[],g=this.table,m="",y=0,v=0,x=2,b=1,w=f.slice.call(arguments,1),T=Object.create(this.lexer),k={yy:{}};for(var C in this.yy)Object.prototype.hasOwnProperty.call(this.yy,C)&&(k.yy[C]=this.yy[C]);T.setInput(o,k.yy),k.yy.lexer=T,k.yy.parser=this,T.yylloc===void 0&&(T.yylloc={});var E=T.yylloc;f.push(E);var _=T.options&&T.options.ranges;function S(z){h.length=h.length-2*z,p.length=p.length-z,f.length=f.length-z}function N(){var z;return typeof(z=d.pop()||T.lex()||b)!="number"&&(z instanceof Array&&(z=(d=z).pop()),z=u.symbols_[z]||z),z}typeof k.yy.parseError=="function"?this.parseError=k.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,l(S,"popStack"),l(N,"lex");for(var O,B,L,I,A,M,D,R,P={};;){if(B=h[h.length-1],this.defaultActions[B]?L=this.defaultActions[B]:(O==null&&(O=N()),L=g[B]&&g[B][O]),L===void 0||!L.length||!L[0]){var $="";for(A in R=[],g[B])this.terminals_[A]&&A>x&&R.push("'"+this.terminals_[A]+"'");$=T.showPosition?"Parse error on line "+(y+1)+`:
`+T.showPosition()+`
Expecting `+R.join(", ")+", got '"+(this.terminals_[O]||O)+"'":"Parse error on line "+(y+1)+": Unexpected "+(O==b?"end of input":"'"+(this.terminals_[O]||O)+"'"),this.parseError($,{text:T.match,token:this.terminals_[O]||O,line:T.yylineno,loc:E,expected:R})}if(L[0]instanceof Array&&L.length>1)throw new Error("Parse Error: multiple actions possible at state: "+B+", token: "+O);switch(L[0]){case 1:h.push(O),p.push(T.yytext),f.push(T.yylloc),h.push(L[1]),O=null,v=T.yyleng,m=T.yytext,y=T.yylineno,E=T.yylloc;break;case 2:if(M=this.productions_[L[1]][1],P.$=p[p.length-M],P._$={first_line:f[f.length-(M||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(M||1)].first_column,last_column:f[f.length-1].last_column},_&&(P._$.range=[f[f.length-(M||1)].range[0],f[f.length-1].range[1]]),(I=this.performAction.apply(P,[m,v,y,k.yy,L[1],p,f].concat(w)))!==void 0)return I;M&&(h=h.slice(0,-1*M*2),p=p.slice(0,-1*M),f=f.slice(0,-1*M)),h.push(this.productions_[L[1]][0]),p.push(P.$),f.push(P._$),D=g[h[h.length-2]][h[h.length-1]],h.push(D);break;case 3:return!0}}return!0}),"parse")},a=(function(){var o={EOF:1,parseError:l((function(u,h){if(!this.yy.parser)throw new Error(u);this.yy.parser.parseError(u,h)}),"parseError"),setInput:l((function(u,h){return this.yy=h||this.yy||{},this._input=u,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:l((function(){var u=this._input[0];return this.yytext+=u,this.yyleng++,this.offset++,this.match+=u,this.matched+=u,u.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),u}),"input"),unput:l((function(u){var h=u.length,d=u.split(/(?:\r\n?|\n)/g);this._input=u+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-h),this.offset-=h;var p=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),d.length-1&&(this.yylineno-=d.length-1);var f=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:d?(d.length===p.length?this.yylloc.first_column:0)+p[p.length-d.length].length-d[0].length:this.yylloc.first_column-h},this.options.ranges&&(this.yylloc.range=[f[0],f[0]+this.yyleng-h]),this.yyleng=this.yytext.length,this}),"unput"),more:l((function(){return this._more=!0,this}),"more"),reject:l((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:l((function(u){this.unput(this.match.slice(u))}),"less"),pastInput:l((function(){var u=this.matched.substr(0,this.matched.length-this.match.length);return(u.length>20?"...":"")+u.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:l((function(){var u=this.match;return u.length<20&&(u+=this._input.substr(0,20-u.length)),(u.substr(0,20)+(u.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:l((function(){var u=this.pastInput(),h=new Array(u.length+1).join("-");return u+this.upcomingInput()+`
`+h+"^"}),"showPosition"),test_match:l((function(u,h){var d,p,f;if(this.options.backtrack_lexer&&(f={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(f.yylloc.range=this.yylloc.range.slice(0))),(p=u[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=p.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:p?p[p.length-1].length-p[p.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+u[0].length},this.yytext+=u[0],this.match+=u[0],this.matches=u,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(u[0].length),this.matched+=u[0],d=this.performAction.call(this,this.yy,this,h,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),d)return d;if(this._backtrack){for(var g in f)this[g]=f[g];return!1}return!1}),"test_match"),next:l((function(){if(this.done)return this.EOF;var u,h,d,p;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length;g++)if((d=this._input.match(this.rules[f[g]]))&&(!h||d[0].length>h[0].length)){if(h=d,p=g,this.options.backtrack_lexer){if((u=this.test_match(d,f[g]))!==!1)return u;if(this._backtrack){h=!1;continue}return!1}if(!this.options.flex)break}return h?(u=this.test_match(h,f[p]))!==!1&&u:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:l((function(){var u=this.next();return u||this.lex()}),"lex"),begin:l((function(u){this.conditionStack.push(u)}),"begin"),popState:l((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:l((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:l((function(u){return(u=this.conditionStack.length-1-Math.abs(u||0))>=0?this.conditionStack[u]:"INITIAL"}),"topState"),pushState:l((function(u){this.begin(u)}),"pushState"),stateStackSize:l((function(){return this.conditionStack.length}),"stateStackSize"),options:{"case-insensitive":!0},performAction:l((function(u,h,d,p){switch(d){case 0:return this.pushState("csv"),4;case 1:return 10;case 2:return 5;case 3:return 12;case 4:return this.pushState("escaped_text"),18;case 5:return 20;case 6:return this.popState("escaped_text"),18;case 7:return 19}}),"anonymous"),rules:[/^(?:sankey-beta\b)/i,/^(?:$)/i,/^(?:((\u000D\u000A)|(\u000A)))/i,/^(?:(\u002C))/i,/^(?:(\u0022))/i,/^(?:([\u0020-\u0021\u0023-\u002B\u002D-\u007E])*)/i,/^(?:(\u0022)(?!(\u0022)))/i,/^(?:(([\u0020-\u0021\u0023-\u002B\u002D-\u007E])|(\u002C)|(\u000D)|(\u000A)|(\u0022)(\u0022))*)/i],conditions:{csv:{rules:[1,2,3,4,5,6,7],inclusive:!1},escaped_text:{rules:[6,7],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7],inclusive:!0}}};return o})();function s(){this.yy={}}return i.lexer=a,l(s,"Parser"),s.prototype=i,i.Parser=s,new s})();ZS.parser=ZS;var g6=ZS,pk=[],fk=[],m6=new Map,F8e=l((()=>{pk=[],fk=[],m6=new Map,jn()}),"clear"),N0,z8e=(N0=class{constructor(e,r,n=0){this.source=e,this.target=r,this.value=n}},l(N0,"SankeyLink"),N0),G8e=l(((t,e,r)=>{pk.push(new z8e(t,e,r))}),"addLink"),I0,U8e=(I0=class{constructor(e){this.ID=e}},l(I0,"SankeyNode"),I0),q8e=l((t=>{t=He.sanitizeText(t,ke());let e=m6.get(t);return e===void 0&&(e=new U8e(t),m6.set(t,e),fk.push(e)),e}),"findOrCreateNode"),j8e=l((()=>fk),"getNodes"),W8e=l((()=>pk),"getLinks"),Y8e=l((()=>({nodes:fk.map((t=>({id:t.ID}))),links:pk.map((t=>({source:t.source.ID,target:t.target.ID,value:t.value})))})),"getGraph"),V8e={nodesMap:m6,getConfig:l((()=>ke().sankey),"getConfig"),getNodes:j8e,getLinks:W8e,getGraph:Y8e,addLink:G8e,findOrCreateNode:q8e,getAccTitle:Xn,setAccTitle:zn,getAccDescription:Zn,setAccDescription:Kn,getDiagramTitle:Wn,setDiagramTitle:di,clear:F8e};function QS(t,e){let r;if(e===void 0)for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}return r}function pI(t,e){let r;if(e===void 0)for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}return r}function y4(t,e){let r=0;if(e===void 0)for(let n of t)(n=+n)&&(r+=n);else{let n=-1;for(let i of t)(i=+e(i,++n,t))&&(r+=i)}return r}function Yoe(t){return t.target.depth}function Voe(t){return t.depth}function Hoe(t,e){return e-1-t.height}function fI(t,e){return t.sourceLinks.length?t.depth:e-1}function Xoe(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?pI(t.sourceLinks,Yoe)-1:0}function Ty(t){return function(){return t}}function JS(t,e){return cv(t.source,e.source)||t.index-e.index}function e8(t,e){return cv(t.target,e.target)||t.index-e.index}function cv(t,e){return t.y0-e.y0}function v4(t){return t.value}function Koe(t){return t.index}function Zoe(t){return t.nodes}function Qoe(t){return t.links}function t8(t,e){const r=t.get(e);if(!r)throw new Error("missing: "+e);return r}function r8({nodes:t}){for(const e of t){let r=e.y0,n=r;for(const i of e.sourceLinks)i.y0=r+i.width/2,r+=i.width;for(const i of e.targetLinks)i.y1=n+i.width/2,n+=i.width}}function Joe(){let t,e,r,n=0,i=0,a=1,s=1,o=24,u=8,h=Koe,d=fI,p=Zoe,f=Qoe,g=6;function m(){const A={nodes:p.apply(null,arguments),links:f.apply(null,arguments)};return y(A),v(A),x(A),b(A),k(A),r8(A),A}function y({nodes:A,links:M}){for(const[R,P]of A.entries())P.index=R,P.sourceLinks=[],P.targetLinks=[];const D=new Map(A.map(((R,P)=>[h(R,P,A),R])));for(const[R,P]of M.entries()){P.index=R;let{source:$,target:z}=P;typeof $!="object"&&($=P.source=t8(D,$)),typeof z!="object"&&(z=P.target=t8(D,z)),$.sourceLinks.push(P),z.targetLinks.push(P)}if(r!=null)for(const{sourceLinks:R,targetLinks:P}of A)R.sort(r),P.sort(r)}function v({nodes:A}){for(const M of A)M.value=M.fixedValue===void 0?Math.max(y4(M.sourceLinks,v4),y4(M.targetLinks,v4)):M.fixedValue}function x({nodes:A}){const M=A.length;let D=new Set(A),R=new Set,P=0;for(;D.size;){for(const $ of D){$.depth=P;for(const{target:z}of $.sourceLinks)R.add(z)}if(++P>M)throw new Error("circular link");D=R,R=new Set}}function b({nodes:A}){const M=A.length;let D=new Set(A),R=new Set,P=0;for(;D.size;){for(const $ of D){$.height=P;for(const{source:z}of $.targetLinks)R.add(z)}if(++P>M)throw new Error("circular link");D=R,R=new Set}}function w({nodes:A}){const M=QS(A,(P=>P.depth))+1,D=(a-n-o)/(M-1),R=new Array(M);for(const P of A){const $=Math.max(0,Math.min(M-1,Math.floor(d.call(null,P,M))));P.layer=$,P.x0=n+$*D,P.x1=P.x0+o,R[$]?R[$].push(P):R[$]=[P]}if(e)for(const P of R)P.sort(e);return R}function T(A){const M=pI(A,(D=>(s-i-(D.length-1)*t)/y4(D,v4)));for(const D of A){let R=i;for(const P of D){P.y0=R,P.y1=R+P.value*M,R=P.y1+t;for(const $ of P.sourceLinks)$.width=$.value*M}R=(s-R+t)/(D.length+1);for(let P=0;P<D.length;++P){const $=D[P];$.y0+=R*(P+1),$.y1+=R*(P+1)}B(D)}}function k(A){const M=w(A);t=Math.min(u,(s-i)/(QS(M,(D=>D.length))-1)),T(M);for(let D=0;D<g;++D){const R=Math.pow(.99,D),P=Math.max(1-R,(D+1)/g);E(M,R,P),C(M,R,P)}}function C(A,M,D){for(let R=1,P=A.length;R<P;++R){const $=A[R];for(const z of $){let q=0,W=0;for(const{source:te,value:oe}of z.targetLinks){let re=oe*(z.layer-te.layer);q+=L(te,z)*re,W+=re}if(!(W>0))continue;let Q=(q/W-z.y0)*M;z.y0+=Q,z.y1+=Q,O(z)}e===void 0&&$.sort(cv),_($,D)}}function E(A,M,D){for(let R=A.length-2;R>=0;--R){const P=A[R];for(const $ of P){let z=0,q=0;for(const{target:Q,value:te}of $.sourceLinks){let oe=te*(Q.layer-$.layer);z+=I($,Q)*oe,q+=oe}if(!(q>0))continue;let W=(z/q-$.y0)*M;$.y0+=W,$.y1+=W,O($)}e===void 0&&P.sort(cv),_(P,D)}}function _(A,M){const D=A.length>>1,R=A[D];N(A,R.y0-t,D-1,M),S(A,R.y1+t,D+1,M),N(A,s,A.length-1,M),S(A,i,0,M)}function S(A,M,D,R){for(;D<A.length;++D){const P=A[D],$=(M-P.y0)*R;$>1e-6&&(P.y0+=$,P.y1+=$),M=P.y1+t}}function N(A,M,D,R){for(;D>=0;--D){const P=A[D],$=(P.y1-M)*R;$>1e-6&&(P.y0-=$,P.y1-=$),M=P.y0-t}}function O({sourceLinks:A,targetLinks:M}){if(r===void 0){for(const{source:{sourceLinks:D}}of M)D.sort(e8);for(const{target:{targetLinks:D}}of A)D.sort(JS)}}function B(A){if(r===void 0)for(const{sourceLinks:M,targetLinks:D}of A)M.sort(e8),D.sort(JS)}function L(A,M){let D=A.y0-(A.sourceLinks.length-1)*t/2;for(const{target:R,width:P}of A.sourceLinks){if(R===M)break;D+=P+t}for(const{source:R,width:P}of M.targetLinks){if(R===A)break;D-=P}return D}function I(A,M){let D=M.y0-(M.targetLinks.length-1)*t/2;for(const{source:R,width:P}of M.targetLinks){if(R===A)break;D+=P+t}for(const{target:R,width:P}of A.sourceLinks){if(R===M)break;D-=P}return D}return l(m,"sankey"),m.update=function(A){return r8(A),A},m.nodeId=function(A){return arguments.length?(h=typeof A=="function"?A:Ty(A),m):h},m.nodeAlign=function(A){return arguments.length?(d=typeof A=="function"?A:Ty(A),m):d},m.nodeSort=function(A){return arguments.length?(e=A,m):e},m.nodeWidth=function(A){return arguments.length?(o=+A,m):o},m.nodePadding=function(A){return arguments.length?(u=t=+A,m):u},m.nodes=function(A){return arguments.length?(p=typeof A=="function"?A:Ty(A),m):p},m.links=function(A){return arguments.length?(f=typeof A=="function"?A:Ty(A),m):f},m.linkSort=function(A){return arguments.length?(r=A,m):r},m.size=function(A){return arguments.length?(n=i=0,a=+A[0],s=+A[1],m):[a-n,s-i]},m.extent=function(A){return arguments.length?(n=+A[0][0],a=+A[1][0],i=+A[0][1],s=+A[1][1],m):[[n,i],[a,s]]},m.iterations=function(A){return arguments.length?(g=+A,m):g},l(y,"computeNodeLinks"),l(v,"computeNodeValues"),l(x,"computeNodeDepths"),l(b,"computeNodeHeights"),l(w,"computeNodeLayers"),l(T,"initializeNodeBreadths"),l(k,"computeNodeBreadths"),l(C,"relaxLeftToRight"),l(E,"relaxRightToLeft"),l(_,"resolveCollisions"),l(S,"resolveCollisionsTopToBottom"),l(N,"resolveCollisionsBottomToTop"),l(O,"reorderNodeLinks"),l(B,"reorderLinks"),l(L,"targetTop"),l(I,"sourceTop"),m}l(QS,"max"),l(pI,"min"),l(y4,"sum"),l(Yoe,"targetDepth"),l(Voe,"left"),l(Hoe,"right"),l(fI,"justify"),l(Xoe,"center"),l(Ty,"constant"),l(JS,"ascendingSourceBreadth"),l(e8,"ascendingTargetBreadth"),l(cv,"ascendingBreadth"),l(v4,"value"),l(Koe,"defaultId"),l(Zoe,"defaultNodes"),l(Qoe,"defaultLinks"),l(t8,"find"),l(r8,"computeLinkBreadths"),l(Joe,"Sankey");var n8=Math.PI,i8=2*n8,H8e=i8-1e-6;function x4(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function a8(){return new x4}l(x4,"Path"),l(a8,"path"),x4.prototype=a8.prototype={constructor:x4,moveTo:l((function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)}),"moveTo"),closePath:l((function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}),"closePath"),lineTo:l((function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)}),"lineTo"),quadraticCurveTo:l((function(t,e,r,n){this._+="Q"+ +t+","+ +e+","+(this._x1=+r)+","+(this._y1=+n)}),"quadraticCurveTo"),bezierCurveTo:l((function(t,e,r,n,i,a){this._+="C"+ +t+","+ +e+","+ +r+","+ +n+","+(this._x1=+i)+","+(this._y1=+a)}),"bezierCurveTo"),arcTo:l((function(t,e,r,n,i){t=+t,e=+e,r=+r,n=+n,i=+i;var a=this._x1,s=this._y1,o=r-t,u=n-e,h=a-t,d=s-e,p=h*h+d*d;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(p>1e-6)if(Math.abs(d*o-u*h)>1e-6&&i){var f=r-a,g=n-s,m=o*o+u*u,y=f*f+g*g,v=Math.sqrt(m),x=Math.sqrt(p),b=i*Math.tan((n8-Math.acos((m+p-y)/(2*v*x)))/2),w=b/x,T=b/v;Math.abs(w-1)>1e-6&&(this._+="L"+(t+w*h)+","+(e+w*d)),this._+="A"+i+","+i+",0,0,"+ +(d*f>h*g)+","+(this._x1=t+T*o)+","+(this._y1=e+T*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e)}),"arcTo"),arc:l((function(t,e,r,n,i,a){t=+t,e=+e,a=!!a;var s=(r=+r)*Math.cos(n),o=r*Math.sin(n),u=t+s,h=e+o,d=1^a,p=a?n-i:i-n;if(r<0)throw new Error("negative radius: "+r);this._x1===null?this._+="M"+u+","+h:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-h)>1e-6)&&(this._+="L"+u+","+h),r&&(p<0&&(p=p%i8+i8),p>H8e?this._+="A"+r+","+r+",0,1,"+d+","+(t-s)+","+(e-o)+"A"+r+","+r+",0,1,"+d+","+(this._x1=u)+","+(this._y1=h):p>1e-6&&(this._+="A"+r+","+r+",0,"+ +(p>=n8)+","+d+","+(this._x1=t+r*Math.cos(i))+","+(this._y1=e+r*Math.sin(i))))}),"arc"),rect:l((function(t,e,r,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +r+"v"+ +n+"h"+-r+"Z"}),"rect"),toString:l((function(){return this._}),"toString")};var X8e=a8;function s8(t){return l((function(){return t}),"constant")}function ele(t){return t[0]}function tle(t){return t[1]}l(s8,"default"),l(ele,"x"),l(tle,"y");var K8e=Array.prototype.slice;function rle(t){return t.source}function nle(t){return t.target}function ile(t){var e=rle,r=nle,n=ele,i=tle,a=null;function s(){var o,u=K8e.call(arguments),h=e.apply(this,u),d=r.apply(this,u);if(a||(a=o=X8e()),t(a,+n.apply(this,(u[0]=h,u)),+i.apply(this,u),+n.apply(this,(u[0]=d,u)),+i.apply(this,u)),o)return a=null,o+""||null}return l(s,"link"),s.source=function(o){return arguments.length?(e=o,s):e},s.target=function(o){return arguments.length?(r=o,s):r},s.x=function(o){return arguments.length?(n=typeof o=="function"?o:s8(+o),s):n},s.y=function(o){return arguments.length?(i=typeof o=="function"?o:s8(+o),s):i},s.context=function(o){return arguments.length?(a=o??null,s):a},s}function ale(t,e,r,n,i){t.moveTo(e,r),t.bezierCurveTo(e=(e+n)/2,r,e,i,n,i)}function sle(){return ile(ale)}function ole(t){return[t.source.x1,t.y0]}function lle(t){return[t.target.x0,t.y1]}function cle(){return sle().source(ole).target(lle)}l(rle,"linkSource"),l(nle,"linkTarget"),l(ile,"link"),l(ale,"curveHorizontal"),l(sle,"linkHorizontal"),l(ole,"horizontalSource"),l(lle,"horizontalTarget"),l(cle,"default");var Ro,gB=(Ro=class{static next(e){return new Ro(e+ ++Ro.count)}constructor(e){this.id=e,this.href=`#${e}`}toString(){return"url("+this.href+")"}},l(Ro,"Uid"),Ro.count=0,Ro),Z8e={left:Voe,right:Hoe,center:Xoe,justify:fI},Q8e=l((function(t,e,r,n){const{securityLevel:i,sankey:a}=ke(),s=e$.sankey;let o;i==="sandbox"&&(o=Ze("#i"+e));const u=Ze(i==="sandbox"?o.nodes()[0].contentDocument.body:"body"),h=i==="sandbox"?u.select(`[id="${e}"]`):Ze(`[id="${e}"]`),d=a?.width??s.width,p=a?.height??s.width,f=a?.useMaxWidth??s.useMaxWidth,g=a?.nodeAlignment??s.nodeAlignment,m=a?.prefix??s.prefix,y=a?.suffix??s.suffix,v=a?.showValues??s.showValues,x=n.db.getGraph(),b=Z8e[g];Joe().nodeId((S=>S.id)).nodeWidth(10).nodePadding(10+(v?15:0)).nodeAlign(b).extent([[0,0],[d,p]])(x);const T=gv(Hue);h.append("g").attr("class","nodes").selectAll(".node").data(x.nodes).join("g").attr("class","node").attr("id",(S=>(S.uid=gB.next("node-")).id)).attr("transform",(function(S){return"translate("+S.x0+","+S.y0+")"})).attr("x",(S=>S.x0)).attr("y",(S=>S.y0)).append("rect").attr("height",(S=>S.y1-S.y0)).attr("width",(S=>S.x1-S.x0)).attr("fill",(S=>T(S.id)));const k=l((({id:S,value:N})=>v?`${S}
${m}${Math.round(100*N)/100}${y}`:S),"getText");h.append("g").attr("class","node-labels").attr("font-size",14).selectAll("text").data(x.nodes).join("text").attr("x",(S=>S.x0<d/2?S.x1+6:S.x0-6)).attr("y",(S=>(S.y1+S.y0)/2)).attr("dy",(v?"0":"0.35")+"em").attr("text-anchor",(S=>S.x0<d/2?"start":"end")).text(k);const C=h.append("g").attr("class","links").attr("fill","none").attr("stroke-opacity",.5).selectAll(".link").data(x.links).join("g").attr("class","link").style("mix-blend-mode","multiply"),E=a?.linkColor??"gradient";if(E==="gradient"){const S=C.append("linearGradient").attr("id",(N=>(N.uid=gB.next("linearGradient-")).id)).attr("gradientUnits","userSpaceOnUse").attr("x1",(N=>N.source.x1)).attr("x2",(N=>N.target.x0));S.append("stop").attr("offset","0%").attr("stop-color",(N=>T(N.source.id))),S.append("stop").attr("offset","100%").attr("stop-color",(N=>T(N.target.id)))}let _;switch(E){case"gradient":_=l((S=>S.uid),"coloring");break;case"source":_=l((S=>T(S.source.id)),"coloring");break;case"target":_=l((S=>T(S.target.id)),"coloring");break;default:_=E}C.append("path").attr("d",cle()).attr("stroke",_).attr("stroke-width",(S=>Math.max(1,S.width))),am(void 0,h,0,f)}),"draw"),J8e={draw:Q8e},e1e=l((t=>t.replaceAll(/^[^\S\n\r]+|[^\S\n\r]+$/g,"").replaceAll(/([\n\r])+/g,`
`).trim()),"prepareTextForParsing"),t1e=l((t=>`.label {
      font-family: ${t.fontFamily};
    }`),"getStyles"),r1e=g6.parse.bind(g6);g6.parse=t=>r1e(e1e(t));var n1e={styles:t1e,parser:g6,db:V8e,renderer:J8e},i1e=Object.freeze({__proto__:null,diagram:n1e}),ule={packet:[]},o8=structuredClone(ule),a1e=or.packet,s1e=l((()=>{const t=ts({...a1e,...Sr().packet});return t.showBits&&(t.paddingY+=10),t}),"getConfig"),o1e=l((()=>o8.packet),"getPacket"),Kh={pushWord:l((t=>{t.length>0&&o8.packet.push(t)}),"pushWord"),getPacket:o1e,getConfig:s1e,clear:l((()=>{jn(),o8=structuredClone(ule)}),"clear"),setAccTitle:zn,getAccTitle:Xn,setDiagramTitle:di,getDiagramTitle:Wn,getAccDescription:Zn,setAccDescription:Kn},l1e=l((t=>{pm(t,Kh);let e=-1,r=[],n=1;const{bitsPerRow:i}=Kh.getConfig();for(let{start:a,end:s,label:o}of t.blocks){if(s&&s<a)throw new Error(`Packet block ${a} - ${s} is invalid. End must be greater than start.`);if(a!==e+1)throw new Error(`Packet block ${a} - ${s??a} is not contiguous. It should start from ${e+1}.`);for(e=s??a,ee.debug(`Packet block ${a} - ${e} with label ${o}`);r.length<=i+1&&Kh.getPacket().length<1e4;){const[u,h]=c1e({start:a,end:s,label:o},n,i);if(r.push(u),u.end+1===n*i&&(Kh.pushWord(r),r=[],n++),!h)break;({start:a,end:s,label:o}=h)}}Kh.pushWord(r)}),"populate"),c1e=l(((t,e,r)=>{if(t.end===void 0&&(t.end=t.start),t.start>t.end)throw new Error(`Block start ${t.start} is greater than block end ${t.end}.`);return t.end+1<=e*r?[t,void 0]:[{start:t.start,end:e*r-1,label:t.label},{start:e*r,end:t.end,label:t.label}]}),"getNextFittingBlock"),u1e={parse:l((async t=>{const e=await sc("packet",t);ee.debug(e),l1e(e)}),"parse")},h1e=l(((t,e,r,n)=>{const i=n.db,a=i.getConfig(),{rowHeight:s,paddingY:o,bitWidth:u,bitsPerRow:h}=a,d=i.getPacket(),p=i.getDiagramTitle(),f=s+o,g=f*(d.length+1)-(p?0:s),m=u*h+2,y=tl(e);y.attr("viewbox",`0 0 ${m} ${g}`),da(y,g,m,a.useMaxWidth);for(const[v,x]of d.entries())d1e(y,x,v,a);y.append("text").text(p).attr("x",m/2).attr("y",g-f/2).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","packetTitle")}),"draw"),d1e=l(((t,e,r,{rowHeight:n,paddingX:i,paddingY:a,bitWidth:s,bitsPerRow:o,showBits:u})=>{const h=t.append("g"),d=r*(n+a)+a;for(const p of e){const f=p.start%o*s+1,g=(p.end-p.start+1)*s-i;if(h.append("rect").attr("x",f).attr("y",d).attr("width",g).attr("height",n).attr("class","packetBlock"),h.append("text").attr("x",f+g/2).attr("y",d+n/2).attr("class","packetLabel").attr("dominant-baseline","middle").attr("text-anchor","middle").text(p.label),!u)continue;const m=p.end===p.start,y=d-2;h.append("text").attr("x",f+(m?g/2:0)).attr("y",y).attr("class","packetByte start").attr("dominant-baseline","auto").attr("text-anchor",m?"middle":"start").text(p.start),m||h.append("text").attr("x",f+g).attr("y",y).attr("class","packetByte end").attr("dominant-baseline","auto").attr("text-anchor","end").text(p.end)}}),"drawWord"),p1e={draw:h1e},f1e={byteFontSize:"10px",startByteColor:"black",endByteColor:"black",labelColor:"black",labelFontSize:"12px",titleColor:"black",titleFontSize:"14px",blockStrokeColor:"black",blockStrokeWidth:"1",blockFillColor:"#efefef"},g1e=l((({packet:t}={})=>{const e=ts(f1e,t);return`
	.packetByte {
		font-size: ${e.byteFontSize};
	}
	.packetByte.start {
		fill: ${e.startByteColor};
	}
	.packetByte.end {
		fill: ${e.endByteColor};
	}
	.packetLabel {
		fill: ${e.labelColor};
		font-size: ${e.labelFontSize};
	}
	.packetTitle {
		fill: ${e.titleColor};
		font-size: ${e.titleFontSize};
	}
	.packetBlock {
		stroke: ${e.blockStrokeColor};
		stroke-width: ${e.blockStrokeWidth};
		fill: ${e.blockFillColor};
	}
	`}),"styles"),m1e={parser:u1e,db:Kh,renderer:p1e,styles:g1e},y1e=Object.freeze({__proto__:null,diagram:m1e}),Zh={showLegend:!0,ticks:5,max:null,min:0,graticule:"circle"},hle={axes:[],curves:[],options:Zh},vh=structuredClone(hle),v1e=or.radar,x1e=l((()=>ts({...v1e,...Sr().radar})),"getConfig"),dle=l((()=>vh.axes),"getAxes"),b1e=l((()=>vh.curves),"getCurves"),w1e=l((()=>vh.options),"getOptions"),k1e=l((t=>{vh.axes=t.map((e=>({name:e.name,label:e.label??e.name})))}),"setAxes"),T1e=l((t=>{vh.curves=t.map((e=>({name:e.name,label:e.label??e.name,entries:E1e(e.entries)})))}),"setCurves"),E1e=l((t=>{if(t[0].axis==null)return t.map((r=>r.value));const e=dle();if(e.length===0)throw new Error("Axes must be populated before curves for reference entries");return e.map((r=>{const n=t.find((i=>i.axis?.$refText===r.name));if(n===void 0)throw new Error("Missing entry for axis "+r.label);return n.value}))}),"computeCurveEntries"),_1e=l((t=>{const e=t.reduce(((r,n)=>(r[n.name]=n,r)),{});vh.options={showLegend:e.showLegend?.value??Zh.showLegend,ticks:e.ticks?.value??Zh.ticks,max:e.max?.value??Zh.max,min:e.min?.value??Zh.min,graticule:e.graticule?.value??Zh.graticule}}),"setOptions"),Ey={getAxes:dle,getCurves:b1e,getOptions:w1e,setAxes:k1e,setCurves:T1e,setOptions:_1e,getConfig:x1e,clear:l((()=>{jn(),vh=structuredClone(hle)}),"clear"),setAccTitle:zn,getAccTitle:Xn,setDiagramTitle:di,getDiagramTitle:Wn,getAccDescription:Zn,setAccDescription:Kn},C1e=l((t=>{pm(t,Ey);const{axes:e,curves:r,options:n}=t;Ey.setAxes(e),Ey.setCurves(r),Ey.setOptions(n)}),"populate"),S1e={parse:l((async t=>{const e=await sc("radar",t);ee.debug(e),C1e(e)}),"parse")},A1e=l(((t,e,r,n)=>{const i=n.db,a=i.getAxes(),s=i.getCurves(),o=i.getOptions(),u=i.getConfig(),h=i.getDiagramTitle(),d=tl(e),p=L1e(d,u),f=o.max??Math.max(...s.map((y=>Math.max(...y.entries)))),g=o.min,m=Math.min(u.width,u.height)/2;N1e(p,a,m,o.ticks,o.graticule),I1e(p,a,m,u),ple(p,a,s,g,f,o.graticule,u),mle(p,s,o.showLegend,u),p.append("text").attr("class","radarTitle").text(h).attr("x",0).attr("y",-u.height/2-u.marginTop)}),"draw"),L1e=l(((t,e)=>{const r=e.width+e.marginLeft+e.marginRight,n=e.height+e.marginTop+e.marginBottom,i=e.marginLeft+e.width/2,a=e.marginTop+e.height/2;return t.attr("viewbox",`0 0 ${r} ${n}`).attr("width",r).attr("height",n),t.append("g").attr("transform",`translate(${i}, ${a})`)}),"drawFrame"),N1e=l(((t,e,r,n,i)=>{if(i==="circle")for(let a=0;a<n;a++){const s=r*(a+1)/n;t.append("circle").attr("r",s).attr("class","radarGraticule")}else if(i==="polygon"){const a=e.length;for(let s=0;s<n;s++){const o=r*(s+1)/n,u=e.map(((h,d)=>{const p=2*d*Math.PI/a-Math.PI/2;return`${o*Math.cos(p)},${o*Math.sin(p)}`})).join(" ");t.append("polygon").attr("points",u).attr("class","radarGraticule")}}}),"drawGraticule"),I1e=l(((t,e,r,n)=>{const i=e.length;for(let a=0;a<i;a++){const s=e[a].label,o=2*a*Math.PI/i-Math.PI/2;t.append("line").attr("x1",0).attr("y1",0).attr("x2",r*n.axisScaleFactor*Math.cos(o)).attr("y2",r*n.axisScaleFactor*Math.sin(o)).attr("class","radarAxisLine"),t.append("text").text(s).attr("x",r*n.axisLabelFactor*Math.cos(o)).attr("y",r*n.axisLabelFactor*Math.sin(o)).attr("class","radarAxisLabel")}}),"drawAxes");function ple(t,e,r,n,i,a,s){const o=e.length,u=Math.min(s.width,s.height)/2;r.forEach(((h,d)=>{if(h.entries.length!==o)return;const p=h.entries.map(((f,g)=>{const m=2*Math.PI*g/o-Math.PI/2,y=fle(f,n,i,u);return{x:y*Math.cos(m),y:y*Math.sin(m)}}));a==="circle"?t.append("path").attr("d",gle(p,s.curveTension)).attr("class",`radarCurve-${d}`):a==="polygon"&&t.append("polygon").attr("points",p.map((f=>`${f.x},${f.y}`)).join(" ")).attr("class",`radarCurve-${d}`)}))}function fle(t,e,r,n){return n*(Math.min(Math.max(t,e),r)-e)/(r-e)}function gle(t,e){const r=t.length;let n=`M${t[0].x},${t[0].y}`;for(let i=0;i<r;i++){const a=t[(i-1+r)%r],s=t[i],o=t[(i+1)%r],u=t[(i+2)%r],h={x:s.x+(o.x-a.x)*e,y:s.y+(o.y-a.y)*e},d={x:o.x-(u.x-s.x)*e,y:o.y-(u.y-s.y)*e};n+=` C${h.x},${h.y} ${d.x},${d.y} ${o.x},${o.y}`}return`${n} Z`}function mle(t,e,r,n){if(!r)return;const i=3*(n.width/2+n.marginRight)/4,a=3*-(n.height/2+n.marginTop)/4;e.forEach(((s,o)=>{const u=t.append("g").attr("transform",`translate(${i}, ${a+20*o})`);u.append("rect").attr("width",12).attr("height",12).attr("class",`radarLegendBox-${o}`),u.append("text").attr("x",16).attr("y",0).attr("class","radarLegendText").text(s.label)}))}l(ple,"drawCurves"),l(fle,"relativeRadius"),l(gle,"closedRoundCurve"),l(mle,"drawLegend");var R1e={draw:A1e},M1e=l(((t,e)=>{let r="";for(let n=0;n<t.THEME_COLOR_LIMIT;n++){const i=t[`cScale${n}`];r+=`
		.radarCurve-${n} {
			color: ${i};
			fill: ${i};
			fill-opacity: ${e.curveOpacity};
			stroke: ${i};
			stroke-width: ${e.curveStrokeWidth};
		}
		.radarLegendBox-${n} {
			fill: ${i};
			fill-opacity: ${e.curveOpacity};
			stroke: ${i};
		}
		`}return r}),"genIndexStyles"),D1e=l((t=>{const e=ts(T6(),Sr().themeVariables);return{themeVariables:e,radarOptions:ts(e.radar,t)}}),"buildRadarStyleOptions"),O1e=l((({radar:t}={})=>{const{themeVariables:e,radarOptions:r}=D1e(t);return`
	.radarTitle {
		font-size: ${e.fontSize};
		color: ${e.titleColor};
		dominant-baseline: hanging;
		text-anchor: middle;
	}
	.radarAxisLine {
		stroke: ${r.axisColor};
		stroke-width: ${r.axisStrokeWidth};
	}
	.radarAxisLabel {
		dominant-baseline: middle;
		text-anchor: middle;
		font-size: ${r.axisLabelFontSize}px;
		color: ${r.axisColor};
	}
	.radarGraticule {
		fill: ${r.graticuleColor};
		fill-opacity: ${r.graticuleOpacity};
		stroke: ${r.graticuleColor};
		stroke-width: ${r.graticuleStrokeWidth};
	}
	.radarLegendText {
		text-anchor: start;
		font-size: ${r.legendFontSize}px;
		dominant-baseline: hanging;
	}
	${M1e(e,r)}
	`}),"styles"),P1e={parser:S1e,db:Ey,renderer:R1e,styles:O1e},B1e=Object.freeze({__proto__:null,diagram:P1e}),l8=(function(){var t=l((function(w,T,k,C){for(k=k||{},C=w.length;C--;k[w[C]]=T);return k}),"o"),e=[1,7],r=[1,13],n=[1,14],i=[1,15],a=[1,19],s=[1,16],o=[1,17],u=[1,18],h=[8,30],d=[8,21,28,29,30,31,32,40,44,47],p=[1,23],f=[1,24],g=[8,15,16,21,28,29,30,31,32,40,44,47],m=[8,15,16,21,27,28,29,30,31,32,40,44,47],y=[1,49],v={trace:l((function(){}),"trace"),yy:{},symbols_:{error:2,spaceLines:3,SPACELINE:4,NL:5,separator:6,SPACE:7,EOF:8,start:9,BLOCK_DIAGRAM_KEY:10,document:11,stop:12,statement:13,link:14,LINK:15,START_LINK:16,LINK_LABEL:17,STR:18,nodeStatement:19,columnsStatement:20,SPACE_BLOCK:21,blockStatement:22,classDefStatement:23,cssClassStatement:24,styleStatement:25,node:26,SIZE:27,COLUMNS:28,"id-block":29,end:30,block:31,NODE_ID:32,nodeShapeNLabel:33,dirList:34,DIR:35,NODE_DSTART:36,NODE_DEND:37,BLOCK_ARROW_START:38,BLOCK_ARROW_END:39,classDef:40,CLASSDEF_ID:41,CLASSDEF_STYLEOPTS:42,DEFAULT:43,class:44,CLASSENTITY_IDS:45,STYLECLASS:46,style:47,STYLE_ENTITY_IDS:48,STYLE_DEFINITION_DATA:49,$accept:0,$end:1},terminals_:{2:"error",4:"SPACELINE",5:"NL",7:"SPACE",8:"EOF",10:"BLOCK_DIAGRAM_KEY",15:"LINK",16:"START_LINK",17:"LINK_LABEL",18:"STR",21:"SPACE_BLOCK",27:"SIZE",28:"COLUMNS",29:"id-block",30:"end",31:"block",32:"NODE_ID",35:"DIR",36:"NODE_DSTART",37:"NODE_DEND",38:"BLOCK_ARROW_START",39:"BLOCK_ARROW_END",40:"classDef",41:"CLASSDEF_ID",42:"CLASSDEF_STYLEOPTS",43:"DEFAULT",44:"class",45:"CLASSENTITY_IDS",46:"STYLECLASS",47:"style",48:"STYLE_ENTITY_IDS",49:"STYLE_DEFINITION_DATA"},productions_:[0,[3,1],[3,2],[3,2],[6,1],[6,1],[6,1],[9,3],[12,1],[12,1],[12,2],[12,2],[11,1],[11,2],[14,1],[14,4],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[19,3],[19,2],[19,1],[20,1],[22,4],[22,3],[26,1],[26,2],[34,1],[34,2],[33,3],[33,4],[23,3],[23,3],[24,3],[25,3]],performAction:l((function(w,T,k,C,E,_,S){var N=_.length-1;switch(E){case 4:C.getLogger().debug("Rule: separator (NL) ");break;case 5:C.getLogger().debug("Rule: separator (Space) ");break;case 6:C.getLogger().debug("Rule: separator (EOF) ");break;case 7:C.getLogger().debug("Rule: hierarchy: ",_[N-1]),C.setHierarchy(_[N-1]);break;case 8:C.getLogger().debug("Stop NL ");break;case 9:C.getLogger().debug("Stop EOF ");break;case 10:C.getLogger().debug("Stop NL2 ");break;case 11:C.getLogger().debug("Stop EOF2 ");break;case 12:C.getLogger().debug("Rule: statement: ",_[N]),typeof _[N].length=="number"?this.$=_[N]:this.$=[_[N]];break;case 13:C.getLogger().debug("Rule: statement #2: ",_[N-1]),this.$=[_[N-1]].concat(_[N]);break;case 14:C.getLogger().debug("Rule: link: ",_[N],w),this.$={edgeTypeStr:_[N],label:""};break;case 15:C.getLogger().debug("Rule: LABEL link: ",_[N-3],_[N-1],_[N]),this.$={edgeTypeStr:_[N],label:_[N-1]};break;case 18:const O=parseInt(_[N]),B=C.generateId();this.$={id:B,type:"space",label:"",width:O,children:[]};break;case 23:C.getLogger().debug("Rule: (nodeStatement link node) ",_[N-2],_[N-1],_[N]," typestr: ",_[N-1].edgeTypeStr);const L=C.edgeStrToEdgeData(_[N-1].edgeTypeStr);this.$=[{id:_[N-2].id,label:_[N-2].label,type:_[N-2].type,directions:_[N-2].directions},{id:_[N-2].id+"-"+_[N].id,start:_[N-2].id,end:_[N].id,label:_[N-1].label,type:"edge",directions:_[N].directions,arrowTypeEnd:L,arrowTypeStart:"arrow_open"},{id:_[N].id,label:_[N].label,type:C.typeStr2Type(_[N].typeStr),directions:_[N].directions}];break;case 24:C.getLogger().debug("Rule: nodeStatement (abc88 node size) ",_[N-1],_[N]),this.$={id:_[N-1].id,label:_[N-1].label,type:C.typeStr2Type(_[N-1].typeStr),directions:_[N-1].directions,widthInColumns:parseInt(_[N],10)};break;case 25:C.getLogger().debug("Rule: nodeStatement (node) ",_[N]),this.$={id:_[N].id,label:_[N].label,type:C.typeStr2Type(_[N].typeStr),directions:_[N].directions,widthInColumns:1};break;case 26:C.getLogger().debug("APA123",this?this:"na"),C.getLogger().debug("COLUMNS: ",_[N]),this.$={type:"column-setting",columns:_[N]==="auto"?-1:parseInt(_[N])};break;case 27:C.getLogger().debug("Rule: id-block statement : ",_[N-2],_[N-1]),C.generateId(),this.$={..._[N-2],type:"composite",children:_[N-1]};break;case 28:C.getLogger().debug("Rule: blockStatement : ",_[N-2],_[N-1],_[N]);const I=C.generateId();this.$={id:I,type:"composite",label:"",children:_[N-1]};break;case 29:C.getLogger().debug("Rule: node (NODE_ID separator): ",_[N]),this.$={id:_[N]};break;case 30:C.getLogger().debug("Rule: node (NODE_ID nodeShapeNLabel separator): ",_[N-1],_[N]),this.$={id:_[N-1],label:_[N].label,typeStr:_[N].typeStr,directions:_[N].directions};break;case 31:C.getLogger().debug("Rule: dirList: ",_[N]),this.$=[_[N]];break;case 32:C.getLogger().debug("Rule: dirList: ",_[N-1],_[N]),this.$=[_[N-1]].concat(_[N]);break;case 33:C.getLogger().debug("Rule: nodeShapeNLabel: ",_[N-2],_[N-1],_[N]),this.$={typeStr:_[N-2]+_[N],label:_[N-1]};break;case 34:C.getLogger().debug("Rule: BLOCK_ARROW nodeShapeNLabel: ",_[N-3],_[N-2]," #3:",_[N-1],_[N]),this.$={typeStr:_[N-3]+_[N],label:_[N-2],directions:_[N-1]};break;case 35:case 36:this.$={type:"classDef",id:_[N-1].trim(),css:_[N].trim()};break;case 37:this.$={type:"applyClass",id:_[N-1].trim(),styleClass:_[N].trim()};break;case 38:this.$={type:"applyStyles",id:_[N-1].trim(),stylesStr:_[N].trim()}}}),"anonymous"),table:[{9:1,10:[1,2]},{1:[3]},{11:3,13:4,19:5,20:6,21:e,22:8,23:9,24:10,25:11,26:12,28:r,29:n,31:i,32:a,40:s,44:o,47:u},{8:[1,20]},t(h,[2,12],{13:4,19:5,20:6,22:8,23:9,24:10,25:11,26:12,11:21,21:e,28:r,29:n,31:i,32:a,40:s,44:o,47:u}),t(d,[2,16],{14:22,15:p,16:f}),t(d,[2,17]),t(d,[2,18]),t(d,[2,19]),t(d,[2,20]),t(d,[2,21]),t(d,[2,22]),t(g,[2,25],{27:[1,25]}),t(d,[2,26]),{19:26,26:12,32:a},{11:27,13:4,19:5,20:6,21:e,22:8,23:9,24:10,25:11,26:12,28:r,29:n,31:i,32:a,40:s,44:o,47:u},{41:[1,28],43:[1,29]},{45:[1,30]},{48:[1,31]},t(m,[2,29],{33:32,36:[1,33],38:[1,34]}),{1:[2,7]},t(h,[2,13]),{26:35,32:a},{32:[2,14]},{17:[1,36]},t(g,[2,24]),{11:37,13:4,14:22,15:p,16:f,19:5,20:6,21:e,22:8,23:9,24:10,25:11,26:12,28:r,29:n,31:i,32:a,40:s,44:o,47:u},{30:[1,38]},{42:[1,39]},{42:[1,40]},{46:[1,41]},{49:[1,42]},t(m,[2,30]),{18:[1,43]},{18:[1,44]},t(g,[2,23]),{18:[1,45]},{30:[1,46]},t(d,[2,28]),t(d,[2,35]),t(d,[2,36]),t(d,[2,37]),t(d,[2,38]),{37:[1,47]},{34:48,35:y},{15:[1,50]},t(d,[2,27]),t(m,[2,33]),{39:[1,51]},{34:52,35:y,39:[2,31]},{32:[2,15]},t(m,[2,34]),{39:[2,32]}],defaultActions:{20:[2,7],23:[2,14],50:[2,15],52:[2,32]},parseError:l((function(w,T){if(!T.recoverable){var k=new Error(w);throw k.hash=T,k}this.trace(w)}),"parseError"),parse:l((function(w){var T=this,k=[0],C=[],E=[null],_=[],S=this.table,N="",O=0,B=0,L=2,I=1,A=_.slice.call(arguments,1),M=Object.create(this.lexer),D={yy:{}};for(var R in this.yy)Object.prototype.hasOwnProperty.call(this.yy,R)&&(D.yy[R]=this.yy[R]);M.setInput(w,D.yy),D.yy.lexer=M,D.yy.parser=this,M.yylloc===void 0&&(M.yylloc={});var P=M.yylloc;_.push(P);var $=M.options&&M.options.ranges;function z(ue){k.length=k.length-2*ue,E.length=E.length-ue,_.length=_.length-ue}function q(){var ue;return typeof(ue=C.pop()||M.lex()||I)!="number"&&(ue instanceof Array&&(ue=(C=ue).pop()),ue=T.symbols_[ue]||ue),ue}typeof D.yy.parseError=="function"?this.parseError=D.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,l(z,"popStack"),l(q,"lex");for(var W,Q,te,oe,re,H,K,ie,ne={};;){if(Q=k[k.length-1],this.defaultActions[Q]?te=this.defaultActions[Q]:(W==null&&(W=q()),te=S[Q]&&S[Q][W]),te===void 0||!te.length||!te[0]){var J="";for(re in ie=[],S[Q])this.terminals_[re]&&re>L&&ie.push("'"+this.terminals_[re]+"'");J=M.showPosition?"Parse error on line "+(O+1)+`:
`+M.showPosition()+`
Expecting `+ie.join(", ")+", got '"+(this.terminals_[W]||W)+"'":"Parse error on line "+(O+1)+": Unexpected "+(W==I?"end of input":"'"+(this.terminals_[W]||W)+"'"),this.parseError(J,{text:M.match,token:this.terminals_[W]||W,line:M.yylineno,loc:P,expected:ie})}if(te[0]instanceof Array&&te.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Q+", token: "+W);switch(te[0]){case 1:k.push(W),E.push(M.yytext),_.push(M.yylloc),k.push(te[1]),W=null,B=M.yyleng,N=M.yytext,O=M.yylineno,P=M.yylloc;break;case 2:if(H=this.productions_[te[1]][1],ne.$=E[E.length-H],ne._$={first_line:_[_.length-(H||1)].first_line,last_line:_[_.length-1].last_line,first_column:_[_.length-(H||1)].first_column,last_column:_[_.length-1].last_column},$&&(ne._$.range=[_[_.length-(H||1)].range[0],_[_.length-1].range[1]]),(oe=this.performAction.apply(ne,[N,B,O,D.yy,te[1],E,_].concat(A)))!==void 0)return oe;H&&(k=k.slice(0,-1*H*2),E=E.slice(0,-1*H),_=_.slice(0,-1*H)),k.push(this.productions_[te[1]][0]),E.push(ne.$),_.push(ne._$),K=S[k[k.length-2]][k[k.length-1]],k.push(K);break;case 3:return!0}}return!0}),"parse")},x=(function(){var w={EOF:1,parseError:l((function(T,k){if(!this.yy.parser)throw new Error(T);this.yy.parser.parseError(T,k)}),"parseError"),setInput:l((function(T,k){return this.yy=k||this.yy||{},this._input=T,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:l((function(){var T=this._input[0];return this.yytext+=T,this.yyleng++,this.offset++,this.match+=T,this.matched+=T,T.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),T}),"input"),unput:l((function(T){var k=T.length,C=T.split(/(?:\r\n?|\n)/g);this._input=T+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-k),this.offset-=k;var E=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),C.length-1&&(this.yylineno-=C.length-1);var _=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:C?(C.length===E.length?this.yylloc.first_column:0)+E[E.length-C.length].length-C[0].length:this.yylloc.first_column-k},this.options.ranges&&(this.yylloc.range=[_[0],_[0]+this.yyleng-k]),this.yyleng=this.yytext.length,this}),"unput"),more:l((function(){return this._more=!0,this}),"more"),reject:l((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:l((function(T){this.unput(this.match.slice(T))}),"less"),pastInput:l((function(){var T=this.matched.substr(0,this.matched.length-this.match.length);return(T.length>20?"...":"")+T.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:l((function(){var T=this.match;return T.length<20&&(T+=this._input.substr(0,20-T.length)),(T.substr(0,20)+(T.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:l((function(){var T=this.pastInput(),k=new Array(T.length+1).join("-");return T+this.upcomingInput()+`
`+k+"^"}),"showPosition"),test_match:l((function(T,k){var C,E,_;if(this.options.backtrack_lexer&&(_={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(_.yylloc.range=this.yylloc.range.slice(0))),(E=T[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=E.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:E?E[E.length-1].length-E[E.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+T[0].length},this.yytext+=T[0],this.match+=T[0],this.matches=T,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(T[0].length),this.matched+=T[0],C=this.performAction.call(this,this.yy,this,k,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),C)return C;if(this._backtrack){for(var S in _)this[S]=_[S];return!1}return!1}),"test_match"),next:l((function(){if(this.done)return this.EOF;var T,k,C,E;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var _=this._currentRules(),S=0;S<_.length;S++)if((C=this._input.match(this.rules[_[S]]))&&(!k||C[0].length>k[0].length)){if(k=C,E=S,this.options.backtrack_lexer){if((T=this.test_match(C,_[S]))!==!1)return T;if(this._backtrack){k=!1;continue}return!1}if(!this.options.flex)break}return k?(T=this.test_match(k,_[E]))!==!1&&T:this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:l((function(){var T=this.next();return T||this.lex()}),"lex"),begin:l((function(T){this.conditionStack.push(T)}),"begin"),popState:l((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:l((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:l((function(T){return(T=this.conditionStack.length-1-Math.abs(T||0))>=0?this.conditionStack[T]:"INITIAL"}),"topState"),pushState:l((function(T){this.begin(T)}),"pushState"),stateStackSize:l((function(){return this.conditionStack.length}),"stateStackSize"),options:{},performAction:l((function(T,k,C,E){switch(C){case 0:return 10;case 1:return T.getLogger().debug("Found space-block"),31;case 2:return T.getLogger().debug("Found nl-block"),31;case 3:return T.getLogger().debug("Found space-block"),29;case 4:T.getLogger().debug(".",k.yytext);break;case 5:T.getLogger().debug("_",k.yytext);break;case 6:return 5;case 7:return k.yytext=-1,28;case 8:return k.yytext=k.yytext.replace(/columns\s+/,""),T.getLogger().debug("COLUMNS (LEX)",k.yytext),28;case 9:case 77:case 78:case 100:this.pushState("md_string");break;case 10:return"MD_STR";case 11:case 35:case 80:this.popState();break;case 12:this.pushState("string");break;case 13:T.getLogger().debug("LEX: POPPING STR:",k.yytext),this.popState();break;case 14:return T.getLogger().debug("LEX: STR end:",k.yytext),"STR";case 15:return k.yytext=k.yytext.replace(/space\:/,""),T.getLogger().debug("SPACE NUM (LEX)",k.yytext),21;case 16:return k.yytext="1",T.getLogger().debug("COLUMNS (LEX)",k.yytext),21;case 17:return 43;case 18:return"LINKSTYLE";case 19:return"INTERPOLATE";case 20:return this.pushState("CLASSDEF"),40;case 21:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 22:return this.popState(),this.pushState("CLASSDEFID"),41;case 23:return this.popState(),42;case 24:return this.pushState("CLASS"),44;case 25:return this.popState(),this.pushState("CLASS_STYLE"),45;case 26:return this.popState(),46;case 27:return this.pushState("STYLE_STMNT"),47;case 28:return this.popState(),this.pushState("STYLE_DEFINITION"),48;case 29:return this.popState(),49;case 30:return this.pushState("acc_title"),"acc_title";case 31:return this.popState(),"acc_title_value";case 32:return this.pushState("acc_descr"),"acc_descr";case 33:return this.popState(),"acc_descr_value";case 34:this.pushState("acc_descr_multiline");break;case 36:return"acc_descr_multiline_value";case 37:return 30;case 38:case 39:case 41:case 42:case 45:return this.popState(),T.getLogger().debug("Lex: (("),"NODE_DEND";case 40:return this.popState(),T.getLogger().debug("Lex: ))"),"NODE_DEND";case 43:return this.popState(),T.getLogger().debug("Lex: (-"),"NODE_DEND";case 44:return this.popState(),T.getLogger().debug("Lex: -)"),"NODE_DEND";case 46:return this.popState(),T.getLogger().debug("Lex: ]]"),"NODE_DEND";case 47:return this.popState(),T.getLogger().debug("Lex: ("),"NODE_DEND";case 48:return this.popState(),T.getLogger().debug("Lex: ])"),"NODE_DEND";case 49:case 50:return this.popState(),T.getLogger().debug("Lex: /]"),"NODE_DEND";case 51:return this.popState(),T.getLogger().debug("Lex: )]"),"NODE_DEND";case 52:return this.popState(),T.getLogger().debug("Lex: )"),"NODE_DEND";case 53:return this.popState(),T.getLogger().debug("Lex: ]>"),"NODE_DEND";case 54:return this.popState(),T.getLogger().debug("Lex: ]"),"NODE_DEND";case 55:return T.getLogger().debug("Lexa: -)"),this.pushState("NODE"),36;case 56:return T.getLogger().debug("Lexa: (-"),this.pushState("NODE"),36;case 57:return T.getLogger().debug("Lexa: ))"),this.pushState("NODE"),36;case 58:case 60:case 61:case 62:case 65:return T.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 59:return T.getLogger().debug("Lex: ((("),this.pushState("NODE"),36;case 63:return T.getLogger().debug("Lexc: >"),this.pushState("NODE"),36;case 64:return T.getLogger().debug("Lexa: (["),this.pushState("NODE"),36;case 66:case 67:case 68:case 69:case 70:case 71:case 72:return this.pushState("NODE"),36;case 73:return T.getLogger().debug("Lexa: ["),this.pushState("NODE"),36;case 74:return this.pushState("BLOCK_ARROW"),T.getLogger().debug("LEX ARR START"),38;case 75:return T.getLogger().debug("Lex: NODE_ID",k.yytext),32;case 76:return T.getLogger().debug("Lex: EOF",k.yytext),8;case 79:return"NODE_DESCR";case 81:T.getLogger().debug("Lex: Starting string"),this.pushState("string");break;case 82:T.getLogger().debug("LEX ARR: Starting string"),this.pushState("string");break;case 83:return T.getLogger().debug("LEX: NODE_DESCR:",k.yytext),"NODE_DESCR";case 84:T.getLogger().debug("LEX POPPING"),this.popState();break;case 85:T.getLogger().debug("Lex: =>BAE"),this.pushState("ARROW_DIR");break;case 86:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (right): dir:",k.yytext),"DIR";case 87:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (left):",k.yytext),"DIR";case 88:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (x):",k.yytext),"DIR";case 89:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (y):",k.yytext),"DIR";case 90:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (up):",k.yytext),"DIR";case 91:return k.yytext=k.yytext.replace(/^,\s*/,""),T.getLogger().debug("Lex (down):",k.yytext),"DIR";case 92:return k.yytext="]>",T.getLogger().debug("Lex (ARROW_DIR end):",k.yytext),this.popState(),this.popState(),"BLOCK_ARROW_END";case 93:return T.getLogger().debug("Lex: LINK","#"+k.yytext+"#"),15;case 94:case 95:case 96:return T.getLogger().debug("Lex: LINK",k.yytext),15;case 97:case 98:case 99:return T.getLogger().debug("Lex: START_LINK",k.yytext),this.pushState("LLABEL"),16;case 101:return T.getLogger().debug("Lex: Starting string"),this.pushState("string"),"LINK_LABEL";case 102:return this.popState(),T.getLogger().debug("Lex: LINK","#"+k.yytext+"#"),15;case 103:case 104:return this.popState(),T.getLogger().debug("Lex: LINK",k.yytext),15;case 105:return T.getLogger().debug("Lex: COLON",k.yytext),k.yytext=k.yytext.slice(1),27}}),"anonymous"),rules:[/^(?:block-beta\b)/,/^(?:block\s+)/,/^(?:block\n+)/,/^(?:block:)/,/^(?:[\s]+)/,/^(?:[\n]+)/,/^(?:((\u000D\u000A)|(\u000A)))/,/^(?:columns\s+auto\b)/,/^(?:columns\s+[\d]+)/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:space[:]\d+)/,/^(?:space\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\s+)/,/^(?:DEFAULT\s+)/,/^(?:\w+\s+)/,/^(?:[^\n]*)/,/^(?:class\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:style\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:end\b\s*)/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:[\)]\))/,/^(?:\}\})/,/^(?:\})/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\()/,/^(?:\]\])/,/^(?:\()/,/^(?:\]\))/,/^(?:\\\])/,/^(?:\/\])/,/^(?:\)\])/,/^(?:[\)])/,/^(?:\]>)/,/^(?:[\]])/,/^(?:-\))/,/^(?:\(-)/,/^(?:\)\))/,/^(?:\))/,/^(?:\(\(\()/,/^(?:\(\()/,/^(?:\{\{)/,/^(?:\{)/,/^(?:>)/,/^(?:\(\[)/,/^(?:\()/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\[\\)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:\[)/,/^(?:<\[)/,/^(?:[^\(\[\n\-\)\{\}\s\<\>:]+)/,/^(?:$)/,/^(?:["][`])/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:\]>\s*\()/,/^(?:,?\s*right\s*)/,/^(?:,?\s*left\s*)/,/^(?:,?\s*x\s*)/,/^(?:,?\s*y\s*)/,/^(?:,?\s*up\s*)/,/^(?:,?\s*down\s*)/,/^(?:\)\s*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*~~[\~]+\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:["][`])/,/^(?:["])/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?::\d+)/],conditions:{STYLE_DEFINITION:{rules:[29],inclusive:!1},STYLE_STMNT:{rules:[28],inclusive:!1},CLASSDEFID:{rules:[23],inclusive:!1},CLASSDEF:{rules:[21,22],inclusive:!1},CLASS_STYLE:{rules:[26],inclusive:!1},CLASS:{rules:[25],inclusive:!1},LLABEL:{rules:[100,101,102,103,104],inclusive:!1},ARROW_DIR:{rules:[86,87,88,89,90,91,92],inclusive:!1},BLOCK_ARROW:{rules:[77,82,85],inclusive:!1},NODE:{rules:[38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,78,81],inclusive:!1},md_string:{rules:[10,11,79,80],inclusive:!1},space:{rules:[],inclusive:!1},string:{rules:[13,14,83,84],inclusive:!1},acc_descr_multiline:{rules:[35,36],inclusive:!1},acc_descr:{rules:[33],inclusive:!1},acc_title:{rules:[31],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,12,15,16,17,18,19,20,24,27,30,32,34,37,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,93,94,95,96,97,98,99,105],inclusive:!0}}};return w})();function b(){this.yy={}}return v.lexer=x,l(b,"Parser"),b.prototype=v,v.Parser=b,new b})();l8.parser=l8;var $1e=l8,ks=new Map,gI=[],c8=new Map,F1e=ke(),y6=new Map,z1e=l((t=>He.sanitizeText(t,F1e)),"sanitizeText"),G1e=l((function(t,e=""){let r=y6.get(t);r||(r={id:t,styles:[],textStyles:[]},y6.set(t,r)),e?.split(",").forEach((n=>{const i=n.replace(/([^;]*);/,"$1").trim();if(RegExp("color").exec(n)){const a=i.replace("fill","bgFill").replace("color","fill");r.textStyles.push(a)}r.styles.push(i)}))}),"addStyleClass"),U1e=l((function(t,e=""){const r=ks.get(t);e!=null&&(r.styles=e.split(","))}),"addStyle2Node"),q1e=l((function(t,e){t.split(",").forEach((function(r){let n=ks.get(r);if(n===void 0){const i=r.trim();n={id:i,type:"na",children:[]},ks.set(i,n)}n.classes||(n.classes=[]),n.classes.push(e)}))}),"setCssClass"),yle=l(((t,e)=>{const r=t.flat(),n=[];for(const i of r)if(i.label&&(i.label=z1e(i.label)),i.type!=="classDef")if(i.type!=="applyClass")if(i.type!=="applyStyles")if(i.type==="column-setting")e.columns=i.columns??-1;else if(i.type==="edge"){const a=(c8.get(i.id)??0)+1;c8.set(i.id,a),i.id=a+"-"+i.id,gI.push(i)}else{i.label||(i.type==="composite"?i.label="":i.label=i.id);const a=ks.get(i.id);if(a===void 0?ks.set(i.id,i):(i.type!=="na"&&(a.type=i.type),i.label!==i.id&&(a.label=i.label)),i.children&&yle(i.children,i),i.type==="space"){const s=i.width??1;for(let o=0;o<s;o++){const u=Gn(i);u.id=u.id+"-"+o,ks.set(u.id,u),n.push(u)}}else a===void 0&&n.push(i)}else i?.stylesStr&&U1e(i.id,i?.stylesStr);else q1e(i.id,i?.styleClass??"");else G1e(i.id,i.css);e.children=n}),"populateBlockDatabase"),mI=[],i2={id:"root",type:"composite",children:[],columns:-1},j1e=l((()=>{ee.debug("Clear called"),jn(),i2={id:"root",type:"composite",children:[],columns:-1},ks=new Map([["root",i2]]),mI=[],y6=new Map,gI=[],c8=new Map}),"clear");function vle(t){switch(ee.debug("typeStr2Type",t),t){case"[]":return"square";case"()":return ee.debug("we have a round"),"round";case"(())":return"circle";case">]":return"rect_left_inv_arrow";case"{}":return"diamond";case"{{}}":return"hexagon";case"([])":return"stadium";case"[[]]":return"subroutine";case"[()]":return"cylinder";case"((()))":return"doublecircle";case"[//]":return"lean_right";case"[\\\\]":return"lean_left";case"[/\\]":return"trapezoid";case"[\\/]":return"inv_trapezoid";case"<[]>":return"block_arrow";default:return"na"}}function xle(t){return ee.debug("typeStr2Type",t),t==="=="?"thick":"normal"}function ble(t){switch(t.trim()){case"--x":return"arrow_cross";case"--o":return"arrow_circle";default:return"arrow_point"}}l(vle,"typeStr2Type"),l(xle,"edgeTypeStr2Type"),l(ble,"edgeStrToEdgeData");var mB=0,W1e=l((()=>(mB++,"id-"+Math.random().toString(36).substr(2,12)+"-"+mB)),"generateId"),Y1e=l((t=>{i2.children=t,yle(t,i2),mI=i2.children}),"setHierarchy"),V1e=l((t=>{const e=ks.get(t);return e?e.columns?e.columns:e.children?e.children.length:-1:-1}),"getColumns"),H1e=l((()=>[...ks.values()]),"getBlocksFlat"),X1e=l((()=>mI||[]),"getBlocks"),K1e=l((()=>gI),"getEdges"),Z1e=l((t=>ks.get(t)),"getBlock"),Q1e=l((t=>{ks.set(t.id,t)}),"setBlock"),J1e=l((()=>console),"getLogger"),eAe=l((function(){return y6}),"getClasses"),tAe={getConfig:l((()=>Sr().block),"getConfig"),typeStr2Type:vle,edgeTypeStr2Type:xle,edgeStrToEdgeData:ble,getLogger:J1e,getBlocksFlat:H1e,getBlocks:X1e,getEdges:K1e,setHierarchy:Y1e,getBlock:Z1e,setBlock:Q1e,getColumns:V1e,getClasses:eAe,clear:j1e,generateId:W1e},ob=l(((t,e)=>{const r=v8,n=r(t,"r"),i=r(t,"g"),a=r(t,"b");return $l(n,i,a,e)}),"fade"),rAe=l((t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .cluster-label text {
    fill: ${t.titleColor};
  }
  .cluster-label span,p {
    color: ${t.titleColor};
  }



  .label text,span,p {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }
  .flowchart-label text {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${ob(t.edgeLabelBackground,.5)};
    // background-color:
  }

  .node .cluster {
    // fill: ${ob(t.mainBkg,.5)};
    fill: ${ob(t.clusterBkg,.5)};
    stroke: ${ob(t.clusterBorder,.2)};
    box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  .cluster span,p {
    color: ${t.titleColor};
  }
  /* .cluster div {
    color: ${t.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
`),"getStyles"),nAe=l(((t,e,r,n)=>{e.forEach((i=>{pAe[i](t,r,n)}))}),"insertMarkers"),iAe=l(((t,e,r)=>{ee.trace("Making markers for ",r),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")}),"extension"),aAe=l(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")}),"composition"),sAe=l(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")}),"aggregation"),oAe=l(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")}),"dependency"),lAe=l(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)}),"lollipop"),cAe=l(((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")}),"point"),uAe=l(((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")}),"circle"),hAe=l(((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")}),"cross"),dAe=l(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}),"barb"),pAe={extension:iAe,composition:aAe,aggregation:sAe,dependency:oAe,lollipop:lAe,point:cAe,circle:uAe,cross:hAe,barb:dAe},fAe=nAe,mn=ke()?.block?.padding??8;function wle(t,e){if(t===0||!Number.isInteger(t))throw new Error("Columns must be an integer !== 0.");if(e<0||!Number.isInteger(e))throw new Error("Position must be a non-negative integer."+e);return t<0?{px:e,py:0}:t===1?{px:0,py:e}:{px:e%t,py:Math.floor(e/t)}}l(wle,"calculateBlockPosition");var gAe=l((t=>{let e=0,r=0;for(const n of t.children){const{width:i,height:a,x:s,y:o}=n.size??{width:0,height:0,x:0,y:0};ee.debug("getMaxChildSize abc95 child:",n.id,"width:",i,"height:",a,"x:",s,"y:",o,n.type),n.type!=="space"&&(i>e&&(e=i/(t.widthInColumns??1)),a>r&&(r=a))}return{width:e,height:r}}),"getMaxChildSize");function v6(t,e,r=0,n=0){ee.debug("setBlockSizes abc95 (start)",t.id,t?.size?.x,"block width =",t?.size,"sieblingWidth",r),t?.size?.width||(t.size={width:r,height:n,x:0,y:0});let i=0,a=0;if(t.children?.length>0){for(const g of t.children)v6(g,e);const s=gAe(t);i=s.width,a=s.height,ee.debug("setBlockSizes abc95 maxWidth of",t.id,":s children is ",i,a);for(const g of t.children)g.size&&(ee.debug(`abc95 Setting size of children of ${t.id} id=${g.id} ${i} ${a} ${JSON.stringify(g.size)}`),g.size.width=i*(g.widthInColumns??1)+mn*((g.widthInColumns??1)-1),g.size.height=a,g.size.x=0,g.size.y=0,ee.debug(`abc95 updating size of ${t.id} children child:${g.id} maxWidth:${i} maxHeight:${a}`));for(const g of t.children)v6(g,e,i,a);const o=t.columns??-1;let u=0;for(const g of t.children)u+=g.widthInColumns??1;let h=t.children.length;o>0&&o<u&&(h=o);const d=Math.ceil(u/h);let p=h*(i+mn)+mn,f=d*(a+mn)+mn;if(p<r){ee.debug(`Detected to small siebling: abc95 ${t.id} sieblingWidth ${r} sieblingHeight ${n} width ${p}`),p=r,f=n;const g=(r-h*mn-mn)/h,m=(n-d*mn-mn)/d;ee.debug("Size indata abc88",t.id,"childWidth",g,"maxWidth",i),ee.debug("Size indata abc88",t.id,"childHeight",m,"maxHeight",a),ee.debug("Size indata abc88 xSize",h,"padding",mn);for(const y of t.children)y.size&&(y.size.width=g,y.size.height=m,y.size.x=0,y.size.y=0)}if(ee.debug(`abc95 (finale calc) ${t.id} xSize ${h} ySize ${d} columns ${o}${t.children.length} width=${Math.max(p,t.size?.width||0)}`),p<(t?.size?.width||0)){p=t?.size?.width||0;const g=o>0?Math.min(t.children.length,o):t.children.length;if(g>0){const m=(p-g*mn-mn)/g;ee.debug("abc95 (growing to fit) width",t.id,p,t.size?.width,m);for(const y of t.children)y.size&&(y.size.width=m)}}t.size={width:p,height:f,x:0,y:0}}ee.debug("setBlockSizes abc94 (done)",t.id,t?.size?.x,t?.size?.width,t?.size?.y,t?.size?.height)}function yI(t,e){ee.debug(`abc85 layout blocks (=>layoutBlocks) ${t.id} x: ${t?.size?.x} y: ${t?.size?.y} width: ${t?.size?.width}`);const r=t.columns??-1;if(ee.debug("layoutBlocks columns abc95",t.id,"=>",r,t),t.children&&t.children.length>0){const n=t?.children[0]?.size?.width??0,i=t.children.length*n+(t.children.length-1)*mn;ee.debug("widthOfChildren 88",i,"posX");let a=0;ee.debug("abc91 block?.size?.x",t.id,t?.size?.x);let s=t?.size?.x?t?.size?.x+(-t?.size?.width/2||0):-mn,o=0;for(const u of t.children){const h=t;if(!u.size)continue;const{width:d,height:p}=u.size,{px:f,py:g}=wle(r,a);if(g!=o&&(o=g,s=t?.size?.x?t?.size?.x+(-t?.size?.width/2||0):-mn,ee.debug("New row in layout for block",t.id," and child ",u.id,o)),ee.debug(`abc89 layout blocks (child) id: ${u.id} Pos: ${a} (px, py) ${f},${g} (${h?.size?.x},${h?.size?.y}) parent: ${h.id} width: ${d}${mn}`),h.size){const m=d/2;u.size.x=s+mn+m,ee.debug(`abc91 layout blocks (calc) px, pyid:${u.id} startingPos=X${s} new startingPosX${u.size.x} ${m} padding=${mn} width=${d} halfWidth=${m} => x:${u.size.x} y:${u.size.y} ${u.widthInColumns} (width * (child?.w || 1)) / 2 ${d*(u?.widthInColumns??1)/2}`),s=u.size.x+m,u.size.y=h.size.y-h.size.height/2+g*(p+mn)+p/2+mn,ee.debug(`abc88 layout blocks (calc) px, pyid:${u.id}startingPosX${s}${mn}${m}=>x:${u.size.x}y:${u.size.y}${u.widthInColumns}(width * (child?.w || 1)) / 2${d*(u?.widthInColumns??1)/2}`)}u.children&&yI(u),a+=u?.widthInColumns??1,ee.debug("abc88 columnsPos",u,a)}}ee.debug(`layout blocks (<==layoutBlocks) ${t.id} x: ${t?.size?.x} y: ${t?.size?.y} width: ${t?.size?.width}`)}function vI(t,{minX:e,minY:r,maxX:n,maxY:i}={minX:0,minY:0,maxX:0,maxY:0}){if(t.size&&t.id!=="root"){const{x:a,y:s,width:o,height:u}=t.size;a-o/2<e&&(e=a-o/2),s-u/2<r&&(r=s-u/2),a+o/2>n&&(n=a+o/2),s+u/2>i&&(i=s+u/2)}if(t.children)for(const a of t.children)({minX:e,minY:r,maxX:n,maxY:i}=vI(a,{minX:e,minY:r,maxX:n,maxY:i}));return{minX:e,minY:r,maxX:n,maxY:i}}function kle(t){const e=t.getBlock("root");if(!e)return;v6(e,t,0,0),yI(e),ee.debug("getBlocks",JSON.stringify(e,null,2));const{minX:r,minY:n,maxX:i,maxY:a}=vI(e);return{x:r,y:n,width:i-r,height:a-n}}function u8(t,e){e&&t.attr("style",e)}function Tle(t){const e=Ze(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=e.append("xhtml:div"),n=t.label,i=t.isNode?"nodeLabel":"edgeLabel",a=r.append("span");return a.html(n),u8(a,t.labelStyle),a.attr("class",i),u8(r,t.labelStyle),r.style("display","inline-block"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}l(v6,"setBlockSizes"),l(yI,"layoutBlocks"),l(vI,"findBounds"),l(kle,"layout"),l(u8,"applyStyle"),l(Tle,"addHtmlLabel");var Va=l(((t,e,r,n)=>{let i=t||"";if(typeof i=="object"&&(i=i[0]),Cr(ke().flowchart.htmlLabels))return i=i.replace(/\\n|\n/g,"<br />"),ee.debug("vertexText"+i),Tle({isNode:n,label:U1(io(i)),labelStyle:e.replace("fill:","color:")});{const a=document.createElementNS("http://www.w3.org/2000/svg","text");a.setAttribute("style",e.replace("color:","fill:"));let s=[];s=typeof i=="string"?i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?i:[];for(const o of s){const u=document.createElementNS("http://www.w3.org/2000/svg","tspan");u.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),u.setAttribute("dy","1em"),u.setAttribute("x","0"),r?u.setAttribute("class","title-row"):u.setAttribute("class","row"),u.textContent=o.trim(),a.appendChild(u)}return a}}),"createLabel"),mAe=l(((t,e,r,n,i)=>{e.arrowTypeStart&&yB(t,"start",e.arrowTypeStart,r,n,i),e.arrowTypeEnd&&yB(t,"end",e.arrowTypeEnd,r,n,i)}),"addEdgeMarkers"),yAe={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},yB=l(((t,e,r,n,i,a)=>{const s=yAe[r];if(!s)return void ee.warn(`Unknown arrow type: ${r}`);const o=e==="start"?"Start":"End";t.attr(`marker-${e}`,`url(${n}#${i}_${a}-${s}${o})`)}),"addEdgeMarker"),h8={},xi={},vAe=l(((t,e)=>{const r=ke(),n=Cr(r.flowchart.htmlLabels),i=e.labelType==="markdown"?pa(t,e.label,{style:e.labelStyle,useHtmlLabels:n,addSvgBackground:!0},r):Va(e.label,e.labelStyle),a=t.insert("g").attr("class","edgeLabel"),s=a.insert("g").attr("class","label");s.node().appendChild(i);let o,u=i.getBBox();if(n){const h=i.children[0],d=Ze(i);u=h.getBoundingClientRect(),d.attr("width",u.width),d.attr("height",u.height)}if(s.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),h8[e.id]=a,e.width=u.width,e.height=u.height,e.startLabelLeft){const h=Va(e.startLabelLeft,e.labelStyle),d=t.insert("g").attr("class","edgeTerminals"),p=d.insert("g").attr("class","inner");o=p.node().appendChild(h);const f=h.getBBox();p.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),xi[e.id]||(xi[e.id]={}),xi[e.id].startLeft=d,_y(o,e.startLabelLeft)}if(e.startLabelRight){const h=Va(e.startLabelRight,e.labelStyle),d=t.insert("g").attr("class","edgeTerminals"),p=d.insert("g").attr("class","inner");o=d.node().appendChild(h),p.node().appendChild(h);const f=h.getBBox();p.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),xi[e.id]||(xi[e.id]={}),xi[e.id].startRight=d,_y(o,e.startLabelRight)}if(e.endLabelLeft){const h=Va(e.endLabelLeft,e.labelStyle),d=t.insert("g").attr("class","edgeTerminals"),p=d.insert("g").attr("class","inner");o=p.node().appendChild(h);const f=h.getBBox();p.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),d.node().appendChild(h),xi[e.id]||(xi[e.id]={}),xi[e.id].endLeft=d,_y(o,e.endLabelLeft)}if(e.endLabelRight){const h=Va(e.endLabelRight,e.labelStyle),d=t.insert("g").attr("class","edgeTerminals"),p=d.insert("g").attr("class","inner");o=p.node().appendChild(h);const f=h.getBBox();p.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),d.node().appendChild(h),xi[e.id]||(xi[e.id]={}),xi[e.id].endRight=d,_y(o,e.endLabelRight)}return i}),"insertEdgeLabel");function _y(t,e){ke().flowchart.htmlLabels&&t&&(t.style.width=9*e.length+"px",t.style.height="12px")}l(_y,"setTerminalWidth");var xAe=l(((t,e)=>{ee.debug("Moving label abc88 ",t.id,t.label,h8[t.id],e);let r=e.updatedPath?e.updatedPath:e.originalPath;const n=ke(),{subGraphTitleTotalMargin:i}=xv(n);if(t.label){const a=h8[t.id];let s=t.x,o=t.y;if(r){const u=Vt.calcLabelPosition(r);ee.debug("Moving label "+t.label+" from (",s,",",o,") to (",u.x,",",u.y,") abc88"),e.updatedPath&&(s=u.x,o=u.y)}a.attr("transform",`translate(${s}, ${o+i/2})`)}if(t.startLabelLeft){const a=xi[t.id].startLeft;let s=t.x,o=t.y;if(r){const u=Vt.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",r);s=u.x,o=u.y}a.attr("transform",`translate(${s}, ${o})`)}if(t.startLabelRight){const a=xi[t.id].startRight;let s=t.x,o=t.y;if(r){const u=Vt.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",r);s=u.x,o=u.y}a.attr("transform",`translate(${s}, ${o})`)}if(t.endLabelLeft){const a=xi[t.id].endLeft;let s=t.x,o=t.y;if(r){const u=Vt.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",r);s=u.x,o=u.y}a.attr("transform",`translate(${s}, ${o})`)}if(t.endLabelRight){const a=xi[t.id].endRight;let s=t.x,o=t.y;if(r){const u=Vt.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",r);s=u.x,o=u.y}a.attr("transform",`translate(${s}, ${o})`)}}),"positionEdgeLabel"),bAe=l(((t,e)=>{const r=t.x,n=t.y,i=Math.abs(e.x-r),a=Math.abs(e.y-n),s=t.width/2,o=t.height/2;return i>=s||a>=o}),"outsideNode"),wAe=l(((t,e,r)=>{ee.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const n=t.x,i=t.y,a=Math.abs(n-r.x),s=t.width/2;let o=r.x<e.x?s-a:s+a;const u=t.height/2,h=Math.abs(e.y-r.y),d=Math.abs(e.x-r.x);if(Math.abs(i-e.y)*s>Math.abs(n-e.x)*u){let p=r.y<e.y?e.y-u-i:i-u-e.y;o=d*p/h;const f={x:r.x<e.x?r.x+o:r.x-d+o,y:r.y<e.y?r.y+h-p:r.y-h+p};return o===0&&(f.x=e.x,f.y=e.y),d===0&&(f.x=e.x),h===0&&(f.y=e.y),ee.debug(`abc89 topp/bott calc, Q ${h}, q ${p}, R ${d}, r ${o}`,f),f}{o=r.x<e.x?e.x-s-n:n-s-e.x;let p=h*o/d,f=r.x<e.x?r.x+d-o:r.x-d+o,g=r.y<e.y?r.y+p:r.y-p;return ee.debug(`sides calc abc89, Q ${h}, q ${p}, R ${d}, r ${o}`,{_x:f,_y:g}),o===0&&(f=e.x,g=e.y),d===0&&(f=e.x),h===0&&(g=e.y),{x:f,y:g}}}),"intersection"),vB=l(((t,e)=>{ee.debug("abc88 cutPathAtIntersect",t,e);let r=[],n=t[0],i=!1;return t.forEach((a=>{if(bAe(e,a)||i)n=a,i||r.push(a);else{const s=wAe(e,n,a);let o=!1;r.forEach((u=>{o=o||u.x===s.x&&u.y===s.y})),r.some((u=>u.x===s.x&&u.y===s.y))||r.push(s),i=!0}})),r}),"cutPathAtIntersect"),kAe=l((function(t,e,r,n,i,a,s){let o=r.points;ee.debug("abc88 InsertEdge: edge=",r,"e=",e);let u=!1;const h=a.node(e.v);var d=a.node(e.w);d?.intersect&&h?.intersect&&(o=o.slice(1,r.points.length-1),o.unshift(h.intersect(o[0])),o.push(d.intersect(o[o.length-1]))),r.toCluster&&(ee.debug("to cluster abc88",n[r.toCluster]),o=vB(r.points,n[r.toCluster].node),u=!0),r.fromCluster&&(ee.debug("from cluster abc88",n[r.fromCluster]),o=vB(o.reverse(),n[r.fromCluster].node).reverse(),u=!0);const p=o.filter((T=>!Number.isNaN(T.y)));let f=B0;!r.curve||i!=="graph"&&i!=="flowchart"||(f=r.curve);const{x:g,y:m}=DH(r),y=P0().x(g).y(m).curve(f);let v;switch(r.thickness){case"normal":v="edge-thickness-normal";break;case"thick":case"invisible":v="edge-thickness-thick";break;default:v=""}switch(r.pattern){case"solid":v+=" edge-pattern-solid";break;case"dotted":v+=" edge-pattern-dotted";break;case"dashed":v+=" edge-pattern-dashed"}const x=t.append("path").attr("d",y(p)).attr("id",r.id).attr("class"," "+v+(r.classes?" "+r.classes:"")).attr("style",r.style);let b="";(ke().flowchart.arrowMarkerAbsolute||ke().state.arrowMarkerAbsolute)&&(b=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,b=b.replace(/\(/g,"\\("),b=b.replace(/\)/g,"\\)")),mAe(x,r,b,s,i);let w={};return u&&(w.updatedPath=o),w.originalPath=r.points,w}),"insertEdge"),TAe=l((t=>{const e=new Set;for(const r of t)switch(r){case"x":e.add("right"),e.add("left");break;case"y":e.add("up"),e.add("down");break;default:e.add(r)}return e}),"expandAndDeduplicateDirections"),EAe=l(((t,e,r)=>{const n=TAe(t),i=e.height+2*r.padding,a=i/2,s=e.width+2*a+r.padding,o=r.padding/2;return n.has("right")&&n.has("left")&&n.has("up")&&n.has("down")?[{x:0,y:0},{x:a,y:0},{x:s/2,y:2*o},{x:s-a,y:0},{x:s,y:0},{x:s,y:-i/3},{x:s+2*o,y:-i/2},{x:s,y:-2*i/3},{x:s,y:-i},{x:s-a,y:-i},{x:s/2,y:-i-2*o},{x:a,y:-i},{x:0,y:-i},{x:0,y:-2*i/3},{x:-2*o,y:-i/2},{x:0,y:-i/3}]:n.has("right")&&n.has("left")&&n.has("up")?[{x:a,y:0},{x:s-a,y:0},{x:s,y:-i/2},{x:s-a,y:-i},{x:a,y:-i},{x:0,y:-i/2}]:n.has("right")&&n.has("left")&&n.has("down")?[{x:0,y:0},{x:a,y:-i},{x:s-a,y:-i},{x:s,y:0}]:n.has("right")&&n.has("up")&&n.has("down")?[{x:0,y:0},{x:s,y:-a},{x:s,y:-i+a},{x:0,y:-i}]:n.has("left")&&n.has("up")&&n.has("down")?[{x:s,y:0},{x:0,y:-a},{x:0,y:-i+a},{x:s,y:-i}]:n.has("right")&&n.has("left")?[{x:a,y:0},{x:a,y:-o},{x:s-a,y:-o},{x:s-a,y:0},{x:s,y:-i/2},{x:s-a,y:-i},{x:s-a,y:-i+o},{x:a,y:-i+o},{x:a,y:-i},{x:0,y:-i/2}]:n.has("up")&&n.has("down")?[{x:s/2,y:0},{x:0,y:-o},{x:a,y:-o},{x:a,y:-i+o},{x:0,y:-i+o},{x:s/2,y:-i},{x:s,y:-i+o},{x:s-a,y:-i+o},{x:s-a,y:-o},{x:s,y:-o}]:n.has("right")&&n.has("up")?[{x:0,y:0},{x:s,y:-a},{x:0,y:-i}]:n.has("right")&&n.has("down")?[{x:0,y:0},{x:s,y:0},{x:0,y:-i}]:n.has("left")&&n.has("up")?[{x:s,y:0},{x:0,y:-a},{x:s,y:-i}]:n.has("left")&&n.has("down")?[{x:s,y:0},{x:0,y:0},{x:s,y:-i}]:n.has("right")?[{x:a,y:-o},{x:a,y:-o},{x:s-a,y:-o},{x:s-a,y:0},{x:s,y:-i/2},{x:s-a,y:-i},{x:s-a,y:-i+o},{x:a,y:-i+o},{x:a,y:-i+o}]:n.has("left")?[{x:a,y:0},{x:a,y:-o},{x:s-a,y:-o},{x:s-a,y:-i+o},{x:a,y:-i+o},{x:a,y:-i},{x:0,y:-i/2}]:n.has("up")?[{x:a,y:-o},{x:a,y:-i+o},{x:0,y:-i+o},{x:s/2,y:-i},{x:s,y:-i+o},{x:s-a,y:-i+o},{x:s-a,y:-o}]:n.has("down")?[{x:s/2,y:0},{x:0,y:-o},{x:a,y:-o},{x:a,y:-i+o},{x:s-a,y:-i+o},{x:s-a,y:-o},{x:s,y:-o}]:[{x:0,y:0}]}),"getArrowPoints");function Ele(t,e){return t.intersect(e)}l(Ele,"intersectNode");var _Ae=Ele;function _le(t,e,r,n){var i=t.x,a=t.y,s=i-n.x,o=a-n.y,u=Math.sqrt(e*e*o*o+r*r*s*s),h=Math.abs(e*r*s/u);n.x<i&&(h=-h);var d=Math.abs(e*r*o/u);return n.y<a&&(d=-d),{x:i+h,y:a+d}}l(_le,"intersectEllipse");var Cle=_le;function Sle(t,e,r){return Cle(t,e,e,r)}l(Sle,"intersectCircle");var CAe=Sle;function Ale(t,e,r,n){var i,a,s,o,u,h,d,p,f,g,m,y,v;if(i=e.y-t.y,s=t.x-e.x,u=e.x*t.y-t.x*e.y,f=i*r.x+s*r.y+u,g=i*n.x+s*n.y+u,!(f!==0&&g!==0&&d8(f,g)||(a=n.y-r.y,o=r.x-n.x,h=n.x*r.y-r.x*n.y,d=a*t.x+o*t.y+h,p=a*e.x+o*e.y+h,d!==0&&p!==0&&d8(d,p)||(m=i*o-a*s)==0)))return y=Math.abs(m/2),{x:(v=s*h-o*u)<0?(v-y)/m:(v+y)/m,y:(v=a*u-i*h)<0?(v-y)/m:(v+y)/m}}function d8(t,e){return t*e>0}l(Ale,"intersectLine"),l(d8,"sameSign");var SAe=Ale,AAe=Lle;function Lle(t,e,r){var n=t.x,i=t.y,a=[],s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;typeof e.forEach=="function"?e.forEach((function(m){s=Math.min(s,m.x),o=Math.min(o,m.y)})):(s=Math.min(s,e.x),o=Math.min(o,e.y));for(var u=n-t.width/2-s,h=i-t.height/2-o,d=0;d<e.length;d++){var p=e[d],f=e[d<e.length-1?d+1:0],g=SAe(t,r,{x:u+p.x,y:h+p.y},{x:u+f.x,y:h+f.y});g&&a.push(g)}return a.length?(a.length>1&&a.sort((function(m,y){var v=m.x-r.x,x=m.y-r.y,b=Math.sqrt(v*v+x*x),w=y.x-r.x,T=y.y-r.y,k=Math.sqrt(w*w+T*T);return b<k?-1:b===k?0:1})),a[0]):t}l(Lle,"intersectPolygon");var LAe=l(((t,e)=>{var r,n,i=t.x,a=t.y,s=e.x-i,o=e.y-a,u=t.width/2,h=t.height/2;return Math.abs(o)*u>Math.abs(s)*h?(o<0&&(h=-h),r=o===0?0:h*s/o,n=h):(s<0&&(u=-u),r=u,n=s===0?0:u*o/s),{x:i+r,y:a+n}}),"intersectRect"),Hr={node:_Ae,circle:CAe,ellipse:Cle,polygon:AAe,rect:LAe},ei=l((async(t,e,r,n)=>{const i=ke();let a;const s=e.useHtmlLabels||Cr(i.flowchart.htmlLabels);a=r||"node default";const o=t.insert("g").attr("class",a).attr("id",e.domId||e.id),u=o.insert("g").attr("class","label").attr("style",e.labelStyle);let h;h=e.labelText===void 0?"":typeof e.labelText=="string"?e.labelText:e.labelText[0];const d=u.node();let p;p=e.labelType==="markdown"?pa(u,Ir(io(h),i),{useHtmlLabels:s,width:e.width||i.flowchart.wrappingWidth,classes:"markdown-node-label"},i):d.appendChild(Va(Ir(io(h),i),e.labelStyle,!1,n));let f=p.getBBox();const g=e.padding/2;if(Cr(i.flowchart.htmlLabels)){const m=p.children[0],y=Ze(p),v=m.getElementsByTagName("img");if(v){const x=h.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...v].map((b=>new Promise((w=>{function T(){if(b.style.display="flex",b.style.flexDirection="column",x){const k=i.fontSize?i.fontSize:window.getComputedStyle(document.body).fontSize,C=5,E=parseInt(k,10)*C+"px";b.style.minWidth=E,b.style.maxWidth=E}else b.style.width="100%";w(b)}l(T,"setupImage"),setTimeout((()=>{b.complete&&T()})),b.addEventListener("error",T),b.addEventListener("load",T)})))))}f=m.getBoundingClientRect(),y.attr("width",f.width),y.attr("height",f.height)}return s?u.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"):u.attr("transform","translate(0, "+-f.height/2+")"),e.centerLabel&&u.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),u.insert("rect",":first-child"),{shapeSvg:o,bbox:f,halfPadding:g,label:u}}),"labelHelper"),hn=l(((t,e)=>{const r=e.node().getBBox();t.width=r.width,t.height=r.height}),"updateNodeBounds");function Ms(t,e,r,n){return t.insert("polygon",":first-child").attr("points",n.map((function(i){return i.x+","+i.y})).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+r/2+")")}l(Ms,"insertPolygonShape");var NAe=l((async(t,e)=>{e.useHtmlLabels||ke().flowchart.htmlLabels||(e.centerLabel=!0);const{shapeSvg:r,bbox:n,halfPadding:i}=await ei(t,e,"node "+e.classes,!0);ee.info("Classes = ",e.classes);const a=r.insert("rect",":first-child");return a.attr("rx",e.rx).attr("ry",e.ry).attr("x",-n.width/2-i).attr("y",-n.height/2-i).attr("width",n.width+e.padding).attr("height",n.height+e.padding),hn(e,a),e.intersect=function(s){return Hr.rect(e,s)},r}),"note"),IAe=NAe,xB=l((t=>t?" "+t:""),"formatClass"),Sa=l(((t,e)=>`${e||"node default"}${xB(t.classes)} ${xB(t.class)}`),"getClassesFromNode"),bB=l((async(t,e)=>{const{shapeSvg:r,bbox:n}=await ei(t,e,Sa(e,void 0),!0),i=n.width+e.padding+(n.height+e.padding),a=[{x:i/2,y:0},{x:i,y:-i/2},{x:i/2,y:-i},{x:0,y:-i/2}];ee.info("Question main (Circle)");const s=Ms(r,i,i,a);return s.attr("style",e.style),hn(e,s),e.intersect=function(o){return ee.warn("Intersect called"),Hr.polygon(e,a,o)},r}),"question"),RAe=l(((t,e)=>{const r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),n=[{x:0,y:14},{x:14,y:0},{x:0,y:-14},{x:-14,y:0}];return r.insert("polygon",":first-child").attr("points",n.map((function(a){return a.x+","+a.y})).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),e.width=28,e.height=28,e.intersect=function(a){return Hr.circle(e,14,a)},r}),"choice"),MAe=l((async(t,e)=>{const{shapeSvg:r,bbox:n}=await ei(t,e,Sa(e,void 0),!0),i=n.height+e.padding,a=i/4,s=n.width+2*a+e.padding,o=[{x:a,y:0},{x:s-a,y:0},{x:s,y:-i/2},{x:s-a,y:-i},{x:a,y:-i},{x:0,y:-i/2}],u=Ms(r,s,i,o);return u.attr("style",e.style),hn(e,u),e.intersect=function(h){return Hr.polygon(e,o,h)},r}),"hexagon"),DAe=l((async(t,e)=>{const{shapeSvg:r,bbox:n}=await ei(t,e,void 0,!0),i=n.height+2*e.padding,a=i/2,s=n.width+2*a+e.padding,o=EAe(e.directions,n,e),u=Ms(r,s,i,o);return u.attr("style",e.style),hn(e,u),e.intersect=function(h){return Hr.polygon(e,o,h)},r}),"block_arrow"),OAe=l((async(t,e)=>{const{shapeSvg:r,bbox:n}=await ei(t,e,Sa(e,void 0),!0),i=n.width+e.padding,a=n.height+e.padding,s=[{x:-a/2,y:0},{x:i,y:0},{x:i,y:-a},{x:-a/2,y:-a},{x:0,y:-a/2}];return Ms(r,i,a,s).attr("style",e.style),e.width=i+a,e.height=a,e.intersect=function(o){return Hr.polygon(e,s,o)},r}),"rect_left_inv_arrow"),PAe=l((async(t,e)=>{const{shapeSvg:r,bbox:n}=await ei(t,e,Sa(e),!0),i=n.width+e.padding,a=n.height+e.padding,s=[{x:-2*a/6,y:0},{x:i-a/6,y:0},{x:i+2*a/6,y:-a},{x:a/6,y:-a}],o=Ms(r,i,a,s);return o.attr("style",e.style),hn(e,o),e.intersect=function(u){return Hr.polygon(e,s,u)},r}),"lean_right"),BAe=l((async(t,e)=>{const{shapeSvg:r,bbox:n}=await ei(t,e,Sa(e,void 0),!0),i=n.width+e.padding,a=n.height+e.padding,s=[{x:2*a/6,y:0},{x:i+a/6,y:0},{x:i-2*a/6,y:-a},{x:-a/6,y:-a}],o=Ms(r,i,a,s);return o.attr("style",e.style),hn(e,o),e.intersect=function(u){return Hr.polygon(e,s,u)},r}),"lean_left"),$Ae=l((async(t,e)=>{const{shapeSvg:r,bbox:n}=await ei(t,e,Sa(e,void 0),!0),i=n.width+e.padding,a=n.height+e.padding,s=[{x:-2*a/6,y:0},{x:i+2*a/6,y:0},{x:i-a/6,y:-a},{x:a/6,y:-a}],o=Ms(r,i,a,s);return o.attr("style",e.style),hn(e,o),e.intersect=function(u){return Hr.polygon(e,s,u)},r}),"trapezoid"),FAe=l((async(t,e)=>{const{shapeSvg:r,bbox:n}=await ei(t,e,Sa(e,void 0),!0),i=n.width+e.padding,a=n.height+e.padding,s=[{x:a/6,y:0},{x:i-a/6,y:0},{x:i+2*a/6,y:-a},{x:-2*a/6,y:-a}],o=Ms(r,i,a,s);return o.attr("style",e.style),hn(e,o),e.intersect=function(u){return Hr.polygon(e,s,u)},r}),"inv_trapezoid"),zAe=l((async(t,e)=>{const{shapeSvg:r,bbox:n}=await ei(t,e,Sa(e,void 0),!0),i=n.width+e.padding,a=n.height+e.padding,s=[{x:0,y:0},{x:i+a/2,y:0},{x:i,y:-a/2},{x:i+a/2,y:-a},{x:0,y:-a}],o=Ms(r,i,a,s);return o.attr("style",e.style),hn(e,o),e.intersect=function(u){return Hr.polygon(e,s,u)},r}),"rect_right_inv_arrow"),GAe=l((async(t,e)=>{const{shapeSvg:r,bbox:n}=await ei(t,e,Sa(e,void 0),!0),i=n.width+e.padding,a=i/2,s=a/(2.5+i/50),o=n.height+s+e.padding,u="M 0,"+s+" a "+a+","+s+" 0,0,0 "+i+" 0 a "+a+","+s+" 0,0,0 "+-i+" 0 l 0,"+o+" a "+a+","+s+" 0,0,0 "+i+" 0 l 0,"+-o,h=r.attr("label-offset-y",s).insert("path",":first-child").attr("style",e.style).attr("d",u).attr("transform","translate("+-i/2+","+-(o/2+s)+")");return hn(e,h),e.intersect=function(d){const p=Hr.rect(e,d),f=p.x-e.x;if(a!=0&&(Math.abs(f)<e.width/2||Math.abs(f)==e.width/2&&Math.abs(p.y-e.y)>e.height/2-s)){let g=s*s*(1-f*f/(a*a));g!=0&&(g=Math.sqrt(g)),g=s-g,d.y-e.y>0&&(g=-g),p.y+=g}return p},r}),"cylinder"),UAe=l((async(t,e)=>{const{shapeSvg:r,bbox:n,halfPadding:i}=await ei(t,e,"node "+e.classes+" "+e.class,!0),a=r.insert("rect",":first-child"),s=e.positioned?e.width:n.width+e.padding,o=e.positioned?e.height:n.height+e.padding,u=e.positioned?-s/2:-n.width/2-i,h=e.positioned?-o/2:-n.height/2-i;if(a.attr("class","basic label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",u).attr("y",h).attr("width",s).attr("height",o),e.props){const d=new Set(Object.keys(e.props));e.props.borders&&(gk(a,e.props.borders,s,o),d.delete("borders")),d.forEach((p=>{ee.warn(`Unknown node property ${p}`)}))}return hn(e,a),e.intersect=function(d){return Hr.rect(e,d)},r}),"rect"),qAe=l((async(t,e)=>{const{shapeSvg:r,bbox:n,halfPadding:i}=await ei(t,e,"node "+e.classes,!0),a=r.insert("rect",":first-child"),s=e.positioned?e.width:n.width+e.padding,o=e.positioned?e.height:n.height+e.padding,u=e.positioned?-s/2:-n.width/2-i,h=e.positioned?-o/2:-n.height/2-i;if(a.attr("class","basic cluster composite label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",u).attr("y",h).attr("width",s).attr("height",o),e.props){const d=new Set(Object.keys(e.props));e.props.borders&&(gk(a,e.props.borders,s,o),d.delete("borders")),d.forEach((p=>{ee.warn(`Unknown node property ${p}`)}))}return hn(e,a),e.intersect=function(d){return Hr.rect(e,d)},r}),"composite"),jAe=l((async(t,e)=>{const{shapeSvg:r}=await ei(t,e,"label",!0);ee.trace("Classes = ",e.class);const n=r.insert("rect",":first-child");if(n.attr("width",0).attr("height",0),r.attr("class","label edgeLabel"),e.props){const i=new Set(Object.keys(e.props));e.props.borders&&(gk(n,e.props.borders,0,0),i.delete("borders")),i.forEach((a=>{ee.warn(`Unknown node property ${a}`)}))}return hn(e,n),e.intersect=function(i){return Hr.rect(e,i)},r}),"labelRect");function gk(t,e,r,n){const i=[],a=l((o=>{i.push(o,0)}),"addBorder"),s=l((o=>{i.push(0,o)}),"skipBorder");e.includes("t")?(ee.debug("add top border"),a(r)):s(r),e.includes("r")?(ee.debug("add right border"),a(n)):s(n),e.includes("b")?(ee.debug("add bottom border"),a(r)):s(r),e.includes("l")?(ee.debug("add left border"),a(n)):s(n),t.attr("stroke-dasharray",i.join(" "))}l(gk,"applyNodePropertyBorders");var WAe=l(((t,e)=>{let r;r=e.classes?"node "+e.classes:"node default";const n=t.insert("g").attr("class",r).attr("id",e.domId||e.id),i=n.insert("rect",":first-child"),a=n.insert("line"),s=n.insert("g").attr("class","label"),o=e.labelText.flat?e.labelText.flat():e.labelText;let u="";u=typeof o=="object"?o[0]:o,ee.info("Label text abc79",u,o,typeof o=="object");const h=s.node().appendChild(Va(u,e.labelStyle,!0,!0));let d={width:0,height:0};if(Cr(ke().flowchart.htmlLabels)){const y=h.children[0],v=Ze(h);d=y.getBoundingClientRect(),v.attr("width",d.width),v.attr("height",d.height)}ee.info("Text 2",o);const p=o.slice(1,o.length);let f=h.getBBox();const g=s.node().appendChild(Va(p.join?p.join("<br/>"):p,e.labelStyle,!0,!0));if(Cr(ke().flowchart.htmlLabels)){const y=g.children[0],v=Ze(g);d=y.getBoundingClientRect(),v.attr("width",d.width),v.attr("height",d.height)}const m=e.padding/2;return Ze(g).attr("transform","translate( "+(d.width>f.width?0:(f.width-d.width)/2)+", "+(f.height+m+5)+")"),Ze(h).attr("transform","translate( "+(d.width<f.width?0:-(f.width-d.width)/2)+", 0)"),d=s.node().getBBox(),s.attr("transform","translate("+-d.width/2+", "+(-d.height/2-m+3)+")"),i.attr("class","outer title-state").attr("x",-d.width/2-m).attr("y",-d.height/2-m).attr("width",d.width+e.padding).attr("height",d.height+e.padding),a.attr("class","divider").attr("x1",-d.width/2-m).attr("x2",d.width/2+m).attr("y1",-d.height/2-m+f.height+m).attr("y2",-d.height/2-m+f.height+m),hn(e,i),e.intersect=function(y){return Hr.rect(e,y)},n}),"rectWithTitle"),YAe=l((async(t,e)=>{const{shapeSvg:r,bbox:n}=await ei(t,e,Sa(e,void 0),!0),i=n.height+e.padding,a=n.width+i/4+e.padding,s=r.insert("rect",":first-child").attr("style",e.style).attr("rx",i/2).attr("ry",i/2).attr("x",-a/2).attr("y",-i/2).attr("width",a).attr("height",i);return hn(e,s),e.intersect=function(o){return Hr.rect(e,o)},r}),"stadium"),VAe=l((async(t,e)=>{const{shapeSvg:r,bbox:n,halfPadding:i}=await ei(t,e,Sa(e,void 0),!0),a=r.insert("circle",":first-child");return a.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",n.width/2+i).attr("width",n.width+e.padding).attr("height",n.height+e.padding),ee.info("Circle main"),hn(e,a),e.intersect=function(s){return ee.info("Circle intersect",e,n.width/2+i,s),Hr.circle(e,n.width/2+i,s)},r}),"circle"),HAe=l((async(t,e)=>{const{shapeSvg:r,bbox:n,halfPadding:i}=await ei(t,e,Sa(e,void 0),!0),a=r.insert("g",":first-child"),s=a.insert("circle"),o=a.insert("circle");return a.attr("class",e.class),s.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",n.width/2+i+5).attr("width",n.width+e.padding+10).attr("height",n.height+e.padding+10),o.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",n.width/2+i).attr("width",n.width+e.padding).attr("height",n.height+e.padding),ee.info("DoubleCircle main"),hn(e,s),e.intersect=function(u){return ee.info("DoubleCircle intersect",e,n.width/2+i+5,u),Hr.circle(e,n.width/2+i+5,u)},r}),"doublecircle"),XAe=l((async(t,e)=>{const{shapeSvg:r,bbox:n}=await ei(t,e,Sa(e,void 0),!0),i=n.width+e.padding,a=n.height+e.padding,s=[{x:0,y:0},{x:i,y:0},{x:i,y:-a},{x:0,y:-a},{x:0,y:0},{x:-8,y:0},{x:i+8,y:0},{x:i+8,y:-a},{x:-8,y:-a},{x:-8,y:0}],o=Ms(r,i,a,s);return o.attr("style",e.style),hn(e,o),e.intersect=function(u){return Hr.polygon(e,s,u)},r}),"subroutine"),KAe=l(((t,e)=>{const r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),n=r.insert("circle",":first-child");return n.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),hn(e,n),e.intersect=function(i){return Hr.circle(e,7,i)},r}),"start"),wB=l(((t,e,r)=>{const n=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let i=70,a=10;r==="LR"&&(i=10,a=70);const s=n.append("rect").attr("x",-1*i/2).attr("y",-1*a/2).attr("width",i).attr("height",a).attr("class","fork-join");return hn(e,s),e.height=e.height+e.padding/2,e.width=e.width+e.padding/2,e.intersect=function(o){return Hr.rect(e,o)},n}),"forkJoin"),ZAe=l(((t,e)=>{const r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),n=r.insert("circle",":first-child"),i=r.insert("circle",":first-child");return i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),n.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),hn(e,i),e.intersect=function(a){return Hr.circle(e,7,a)},r}),"end"),QAe=l(((t,e)=>{const r=e.padding/2;let n;n=e.classes?"node "+e.classes:"node default";const i=t.insert("g").attr("class",n).attr("id",e.domId||e.id),a=i.insert("rect",":first-child"),s=i.insert("line"),o=i.insert("line");let u=0,h=4;const d=i.insert("g").attr("class","label");let p=0;const f=e.classData.annotations?.[0],g=e.classData.annotations[0]?""+e.classData.annotations[0]+"":"",m=d.node().appendChild(Va(g,e.labelStyle,!0,!0));let y=m.getBBox();if(Cr(ke().flowchart.htmlLabels)){const C=m.children[0],E=Ze(m);y=C.getBoundingClientRect(),E.attr("width",y.width),E.attr("height",y.height)}e.classData.annotations[0]&&(h+=y.height+4,u+=y.width);let v=e.classData.label;e.classData.type!==void 0&&e.classData.type!==""&&(ke().flowchart.htmlLabels?v+="&lt;"+e.classData.type+"&gt;":v+="<"+e.classData.type+">");const x=d.node().appendChild(Va(v,e.labelStyle,!0,!0));Ze(x).attr("class","classTitle");let b=x.getBBox();if(Cr(ke().flowchart.htmlLabels)){const C=x.children[0],E=Ze(x);b=C.getBoundingClientRect(),E.attr("width",b.width),E.attr("height",b.height)}h+=b.height+4,b.width>u&&(u=b.width);const w=[];e.classData.members.forEach((C=>{const E=C.getDisplayDetails();let _=E.displayText;ke().flowchart.htmlLabels&&(_=_.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const S=d.node().appendChild(Va(_,E.cssStyle?E.cssStyle:e.labelStyle,!0,!0));let N=S.getBBox();if(Cr(ke().flowchart.htmlLabels)){const O=S.children[0],B=Ze(S);N=O.getBoundingClientRect(),B.attr("width",N.width),B.attr("height",N.height)}N.width>u&&(u=N.width),h+=N.height+4,w.push(S)})),h+=8;const T=[];if(e.classData.methods.forEach((C=>{const E=C.getDisplayDetails();let _=E.displayText;ke().flowchart.htmlLabels&&(_=_.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const S=d.node().appendChild(Va(_,E.cssStyle?E.cssStyle:e.labelStyle,!0,!0));let N=S.getBBox();if(Cr(ke().flowchart.htmlLabels)){const O=S.children[0],B=Ze(S);N=O.getBoundingClientRect(),B.attr("width",N.width),B.attr("height",N.height)}N.width>u&&(u=N.width),h+=N.height+4,T.push(S)})),h+=8,f){let C=(u-y.width)/2;Ze(m).attr("transform","translate( "+(-1*u/2+C)+", "+-1*h/2+")"),p=y.height+4}let k=(u-b.width)/2;return Ze(x).attr("transform","translate( "+(-1*u/2+k)+", "+(-1*h/2+p)+")"),p+=b.height+4,s.attr("class","divider").attr("x1",-u/2-r).attr("x2",u/2+r).attr("y1",-h/2-r+8+p).attr("y2",-h/2-r+8+p),p+=8,w.forEach((C=>{Ze(C).attr("transform","translate( "+-u/2+", "+(-1*h/2+p+4)+")");const E=C?.getBBox();p+=(E?.height??0)+4})),p+=8,o.attr("class","divider").attr("x1",-u/2-r).attr("x2",u/2+r).attr("y1",-h/2-r+8+p).attr("y2",-h/2-r+8+p),p+=8,T.forEach((C=>{Ze(C).attr("transform","translate( "+-u/2+", "+(-1*h/2+p)+")");const E=C?.getBBox();p+=(E?.height??0)+4})),a.attr("style",e.style).attr("class","outer title-state").attr("x",-u/2-r).attr("y",-h/2-r).attr("width",u+e.padding).attr("height",h+e.padding),hn(e,a),e.intersect=function(C){return Hr.rect(e,C)},i}),"class_box"),kB={rhombus:bB,composite:qAe,question:bB,rect:UAe,labelRect:jAe,rectWithTitle:WAe,choice:RAe,circle:VAe,doublecircle:HAe,stadium:YAe,hexagon:MAe,block_arrow:DAe,rect_left_inv_arrow:OAe,lean_right:PAe,lean_left:BAe,trapezoid:$Ae,inv_trapezoid:FAe,rect_right_inv_arrow:zAe,cylinder:GAe,start:KAe,end:ZAe,note:IAe,subroutine:XAe,fork:wB,join:wB,class_box:QAe},b4={},Nle=l((async(t,e,r)=>{let n,i;if(e.link){let a;ke().securityLevel==="sandbox"?a="_top":e.linkTarget&&(a=e.linkTarget||"_blank"),n=t.insert("svg:a").attr("xlink:href",e.link).attr("target",a),i=await kB[e.shape](n,e,r)}else i=await kB[e.shape](t,e,r),n=i;return e.tooltip&&i.attr("title",e.tooltip),e.class&&i.attr("class","node default "+e.class),b4[e.id]=n,e.haveCallback&&b4[e.id].attr("class",b4[e.id].attr("class")+" clickable"),n}),"insertNode"),JAe=l((t=>{const e=b4[t.id];ee.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const r=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+r-t.width/2)+", "+(t.y-t.height/2-8)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),r}),"positionNode");function xI(t,e,r=!1){const n=t;let i="default";(n?.classes?.length||0)>0&&(i=(n?.classes??[]).join(" ")),i+=" flowchart-label";let a,s=0,o="";switch(n.type){case"round":s=5,o="rect";break;case"composite":s=0,o="composite",a=0;break;case"square":case"group":default:o="rect";break;case"diamond":o="question";break;case"hexagon":o="hexagon";break;case"block_arrow":o="block_arrow";break;case"odd":case"rect_left_inv_arrow":o="rect_left_inv_arrow";break;case"lean_right":o="lean_right";break;case"lean_left":o="lean_left";break;case"trapezoid":o="trapezoid";break;case"inv_trapezoid":o="inv_trapezoid";break;case"circle":o="circle";break;case"ellipse":o="ellipse";break;case"stadium":o="stadium";break;case"subroutine":o="subroutine";break;case"cylinder":o="cylinder";break;case"doublecircle":o="doublecircle"}const u=L1(n?.styles??[]),h=n.label,d=n.size??{width:0,height:0,x:0,y:0};return{labelStyle:u.labelStyle,shape:o,labelText:h,rx:s,ry:s,class:i,style:u.style,id:n.id,directions:n.directions,width:d.width,height:d.height,x:d.x,y:d.y,positioned:r,intersect:void 0,type:n.type,padding:a??Sr()?.block?.padding??0}}async function Ile(t,e,r){const n=xI(e,0,!1);if(n.type==="group")return;const i=Sr(),a=await Nle(t,n,{config:i}),s=a.node().getBBox(),o=r.getBlock(n.id);o.size={width:s.width,height:s.height,x:0,y:0,node:a},r.setBlock(o),a.remove()}async function Rle(t,e,r){const n=xI(e,0,!0);if(r.getBlock(n.id).type!=="space"){const i=Sr();await Nle(t,n,{config:i}),e.intersect=n?.intersect,JAe(n)}}async function mk(t,e,r,n){for(const i of e)await n(t,i,r),i.children&&await mk(t,i.children,r,n)}async function Mle(t,e,r){await mk(t,e,r,Ile)}async function Dle(t,e,r){await mk(t,e,r,Rle)}async function Ole(t,e,r,n,i){const a=new la({multigraph:!0,compound:!0});a.setGraph({rankdir:"TB",nodesep:10,ranksep:10,marginx:8,marginy:8});for(const s of r)s.size&&a.setNode(s.id,{width:s.size.width,height:s.size.height,intersect:s.intersect});for(const s of e)if(s.start&&s.end){const o=n.getBlock(s.start),u=n.getBlock(s.end);if(o?.size&&u?.size){const h=o.size,d=u.size,p=[{x:h.x,y:h.y},{x:h.x+(d.x-h.x)/2,y:h.y+(d.y-h.y)/2},{x:d.x,y:d.y}];kAe(t,{v:s.start,w:s.end,name:s.id},{...s,arrowTypeEnd:s.arrowTypeEnd,arrowTypeStart:s.arrowTypeStart,points:p,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"},void 0,"block",a,i),s.label&&(await vAe(t,{...s,label:s.label,labelStyle:"stroke: #333; stroke-width: 1.5px;fill:none;",arrowTypeEnd:s.arrowTypeEnd,arrowTypeStart:s.arrowTypeStart,points:p,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"}),xAe({...s,x:p[1].x,y:p[1].y},{originalPath:p}))}}}l(xI,"getNodeFromBlock"),l(Ile,"calculateBlockSize"),l(Rle,"insertBlockPositioned"),l(mk,"performOperations"),l(Mle,"calculateBlockSizes"),l(Dle,"insertBlocks"),l(Ole,"insertEdges");var e9e=l((function(t,e){return e.db.getClasses()}),"getClasses"),t9e=l((async function(t,e,r,n){const{securityLevel:i,block:a}=Sr(),s=n.db;let o;i==="sandbox"&&(o=Ze("#i"+e));const u=Ze(i==="sandbox"?o.nodes()[0].contentDocument.body:"body"),h=i==="sandbox"?u.select(`[id="${e}"]`):Ze(`[id="${e}"]`);fAe(h,["point","circle","cross"],n.type,e);const d=s.getBlocks(),p=s.getBlocksFlat(),f=s.getEdges(),g=h.insert("g").attr("class","block");await Mle(g,d,s);const m=kle(s);if(await Dle(g,d,s),await Ole(g,f,p,s,e),m){const y=m,v=Math.max(1,Math.round(y.width/y.height*.125)),x=y.height+v+10,b=y.width+10,{useMaxWidth:w}=a;da(h,x,b,!!w),ee.debug("Here Bounds",m,y),h.attr("viewBox",`${y.x-5} ${y.y-5} ${y.width+10} ${y.height+10}`)}}),"draw"),r9e={parser:$1e,db:tAe,renderer:{draw:t9e,getClasses:e9e},styles:rAe},n9e=Object.freeze({__proto__:null,diagram:r9e}),TB=qn({"../../node_modules/.pnpm/layout-base@2.0.1/node_modules/layout-base/layout-base.js"(t,e){l((function(r,n){typeof t=="object"&&typeof e=="object"?e.exports=n():typeof define=="function"&&define.amd?define([],n):typeof t=="object"?t.layoutBase=n():r.layoutBase=n()}),"webpackUniversalModuleDefinition")(t,(function(){return(function(r){var n={};function i(a){if(n[a])return n[a].exports;var s=n[a]={i:a,l:!1,exports:{}};return r[a].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return l(i,"__webpack_require__"),i.m=r,i.c=n,i.i=function(a){return a},i.d=function(a,s,o){i.o(a,s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!0,get:o})},i.n=function(a){var s=a&&a.__esModule?l((function(){return a.default}),"getDefault"):l((function(){return a}),"getModuleExports");return i.d(s,"a",s),s},i.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)},i.p="",i(i.s=28)})([function(r,n,i){function a(){}l(a,"LayoutConstants"),a.QUALITY=1,a.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,a.DEFAULT_INCREMENTAL=!1,a.DEFAULT_ANIMATION_ON_LAYOUT=!0,a.DEFAULT_ANIMATION_DURING_LAYOUT=!1,a.DEFAULT_ANIMATION_PERIOD=50,a.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,a.DEFAULT_GRAPH_MARGIN=15,a.NODE_DIMENSIONS_INCLUDE_LABELS=!1,a.SIMPLE_NODE_SIZE=40,a.SIMPLE_NODE_HALF_SIZE=a.SIMPLE_NODE_SIZE/2,a.EMPTY_COMPOUND_NODE_SIZE=40,a.MIN_EDGE_LENGTH=1,a.WORLD_BOUNDARY=1e6,a.INITIAL_WORLD_BOUNDARY=a.WORLD_BOUNDARY/1e3,a.WORLD_CENTER_X=1200,a.WORLD_CENTER_Y=900,r.exports=a},function(r,n,i){var a=i(2),s=i(8),o=i(9);function u(d,p,f){a.call(this,f),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=f,this.bendpoints=[],this.source=d,this.target=p}for(var h in l(u,"LEdge"),u.prototype=Object.create(a.prototype),a)u[h]=a[h];u.prototype.getSource=function(){return this.source},u.prototype.getTarget=function(){return this.target},u.prototype.isInterGraph=function(){return this.isInterGraph},u.prototype.getLength=function(){return this.length},u.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},u.prototype.getBendpoints=function(){return this.bendpoints},u.prototype.getLca=function(){return this.lca},u.prototype.getSourceInLca=function(){return this.sourceInLca},u.prototype.getTargetInLca=function(){return this.targetInLca},u.prototype.getOtherEnd=function(d){if(this.source===d)return this.target;if(this.target===d)return this.source;throw"Node is not incident with this edge"},u.prototype.getOtherEndInGraph=function(d,p){for(var f=this.getOtherEnd(d),g=p.getGraphManager().getRoot();;){if(f.getOwner()==p)return f;if(f.getOwner()==g)break;f=f.getOwner().getParent()}return null},u.prototype.updateLength=function(){var d=new Array(4);this.isOverlapingSourceAndTarget=s.getIntersection(this.target.getRect(),this.source.getRect(),d),this.isOverlapingSourceAndTarget||(this.lengthX=d[0]-d[2],this.lengthY=d[1]-d[3],Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},u.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},r.exports=u},function(r,n,i){function a(s){this.vGraphObject=s}l(a,"LGraphObject"),r.exports=a},function(r,n,i){var a=i(2),s=i(10),o=i(13),u=i(0),h=i(16),d=i(5);function p(g,m,y,v){y==null&&v==null&&(v=m),a.call(this,v),g.graphManager!=null&&(g=g.graphManager),this.estimatedSize=s.MIN_VALUE,this.inclusionTreeDepth=s.MAX_VALUE,this.vGraphObject=v,this.edges=[],this.graphManager=g,this.rect=y!=null&&m!=null?new o(m.x,m.y,y.width,y.height):new o}for(var f in l(p,"LNode"),p.prototype=Object.create(a.prototype),a)p[f]=a[f];p.prototype.getEdges=function(){return this.edges},p.prototype.getChild=function(){return this.child},p.prototype.getOwner=function(){return this.owner},p.prototype.getWidth=function(){return this.rect.width},p.prototype.setWidth=function(g){this.rect.width=g},p.prototype.getHeight=function(){return this.rect.height},p.prototype.setHeight=function(g){this.rect.height=g},p.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},p.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},p.prototype.getCenter=function(){return new d(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},p.prototype.getLocation=function(){return new d(this.rect.x,this.rect.y)},p.prototype.getRect=function(){return this.rect},p.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},p.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},p.prototype.setRect=function(g,m){this.rect.x=g.x,this.rect.y=g.y,this.rect.width=m.width,this.rect.height=m.height},p.prototype.setCenter=function(g,m){this.rect.x=g-this.rect.width/2,this.rect.y=m-this.rect.height/2},p.prototype.setLocation=function(g,m){this.rect.x=g,this.rect.y=m},p.prototype.moveBy=function(g,m){this.rect.x+=g,this.rect.y+=m},p.prototype.getEdgeListToNode=function(g){var m=[],y=this;return y.edges.forEach((function(v){if(v.target==g){if(v.source!=y)throw"Incorrect edge source!";m.push(v)}})),m},p.prototype.getEdgesBetween=function(g){var m=[],y=this;return y.edges.forEach((function(v){if(v.source!=y&&v.target!=y)throw"Incorrect edge source and/or target";v.target!=g&&v.source!=g||m.push(v)})),m},p.prototype.getNeighborsList=function(){var g=new Set,m=this;return m.edges.forEach((function(y){if(y.source==m)g.add(y.target);else{if(y.target!=m)throw"Incorrect incidency!";g.add(y.source)}})),g},p.prototype.withChildren=function(){var g=new Set;if(g.add(this),this.child!=null)for(var m=this.child.getNodes(),y=0;y<m.length;y++)m[y].withChildren().forEach((function(v){g.add(v)}));return g},p.prototype.getNoOfChildren=function(){var g=0;if(this.child==null)g=1;else for(var m=this.child.getNodes(),y=0;y<m.length;y++)g+=m[y].getNoOfChildren();return g==0&&(g=1),g},p.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},p.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},p.prototype.scatter=function(){var g,m,y=-u.INITIAL_WORLD_BOUNDARY,v=u.INITIAL_WORLD_BOUNDARY;g=u.WORLD_CENTER_X+h.nextDouble()*(v-y)+y;var x=-u.INITIAL_WORLD_BOUNDARY,b=u.INITIAL_WORLD_BOUNDARY;m=u.WORLD_CENTER_Y+h.nextDouble()*(b-x)+x,this.rect.x=g,this.rect.y=m},p.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var g=this.getChild();if(g.updateBounds(!0),this.rect.x=g.getLeft(),this.rect.y=g.getTop(),this.setWidth(g.getRight()-g.getLeft()),this.setHeight(g.getBottom()-g.getTop()),u.NODE_DIMENSIONS_INCLUDE_LABELS){var m=g.getRight()-g.getLeft(),y=g.getBottom()-g.getTop();this.labelWidth&&(this.labelPosHorizontal=="left"?(this.rect.x-=this.labelWidth,this.setWidth(m+this.labelWidth)):this.labelPosHorizontal=="center"&&this.labelWidth>m?(this.rect.x-=(this.labelWidth-m)/2,this.setWidth(this.labelWidth)):this.labelPosHorizontal=="right"&&this.setWidth(m+this.labelWidth)),this.labelHeight&&(this.labelPosVertical=="top"?(this.rect.y-=this.labelHeight,this.setHeight(y+this.labelHeight)):this.labelPosVertical=="center"&&this.labelHeight>y?(this.rect.y-=(this.labelHeight-y)/2,this.setHeight(this.labelHeight)):this.labelPosVertical=="bottom"&&this.setHeight(y+this.labelHeight))}}},p.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==s.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},p.prototype.transform=function(g){var m=this.rect.x;m>u.WORLD_BOUNDARY?m=u.WORLD_BOUNDARY:m<-u.WORLD_BOUNDARY&&(m=-u.WORLD_BOUNDARY);var y=this.rect.y;y>u.WORLD_BOUNDARY?y=u.WORLD_BOUNDARY:y<-u.WORLD_BOUNDARY&&(y=-u.WORLD_BOUNDARY);var v=new d(m,y),x=g.inverseTransformPoint(v);this.setLocation(x.x,x.y)},p.prototype.getLeft=function(){return this.rect.x},p.prototype.getRight=function(){return this.rect.x+this.rect.width},p.prototype.getTop=function(){return this.rect.y},p.prototype.getBottom=function(){return this.rect.y+this.rect.height},p.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},r.exports=p},function(r,n,i){var a=i(0);function s(){}for(var o in l(s,"FDLayoutConstants"),a)s[o]=a[o];s.MAX_ITERATIONS=2500,s.DEFAULT_EDGE_LENGTH=50,s.DEFAULT_SPRING_STRENGTH=.45,s.DEFAULT_REPULSION_STRENGTH=4500,s.DEFAULT_GRAVITY_STRENGTH=.4,s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,s.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,s.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,s.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,s.COOLING_ADAPTATION_FACTOR=.33,s.ADAPTATION_LOWER_NODE_LIMIT=1e3,s.ADAPTATION_UPPER_NODE_LIMIT=5e3,s.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,s.MAX_NODE_DISPLACEMENT=3*s.MAX_NODE_DISPLACEMENT_INCREMENTAL,s.MIN_REPULSION_DIST=s.DEFAULT_EDGE_LENGTH/10,s.CONVERGENCE_CHECK_PERIOD=100,s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,s.MIN_EDGE_LENGTH=1,s.GRID_CALCULATION_CHECK_PERIOD=10,r.exports=s},function(r,n,i){function a(s,o){s==null&&o==null?(this.x=0,this.y=0):(this.x=s,this.y=o)}l(a,"PointD"),a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.setX=function(s){this.x=s},a.prototype.setY=function(s){this.y=s},a.prototype.getDifference=function(s){return new DimensionD(this.x-s.x,this.y-s.y)},a.prototype.getCopy=function(){return new a(this.x,this.y)},a.prototype.translate=function(s){return this.x+=s.width,this.y+=s.height,this},r.exports=a},function(r,n,i){var a=i(2),s=i(10),o=i(0),u=i(7),h=i(3),d=i(1),p=i(13),f=i(12),g=i(11);function m(v,x,b){a.call(this,b),this.estimatedSize=s.MIN_VALUE,this.margin=o.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=v,x!=null&&x instanceof u?this.graphManager=x:x!=null&&x instanceof Layout&&(this.graphManager=x.graphManager)}for(var y in l(m,"LGraph"),m.prototype=Object.create(a.prototype),a)m[y]=a[y];m.prototype.getNodes=function(){return this.nodes},m.prototype.getEdges=function(){return this.edges},m.prototype.getGraphManager=function(){return this.graphManager},m.prototype.getParent=function(){return this.parent},m.prototype.getLeft=function(){return this.left},m.prototype.getRight=function(){return this.right},m.prototype.getTop=function(){return this.top},m.prototype.getBottom=function(){return this.bottom},m.prototype.isConnected=function(){return this.isConnected},m.prototype.add=function(v,x,b){if(x==null&&b==null){var w=v;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(w)>-1)throw"Node already in graph!";return w.owner=this,this.getNodes().push(w),w}var T=v;if(!(this.getNodes().indexOf(x)>-1&&this.getNodes().indexOf(b)>-1))throw"Source or target not in graph!";if(x.owner!=b.owner||x.owner!=this)throw"Both owners must be this graph!";return x.owner!=b.owner?null:(T.source=x,T.target=b,T.isInterGraph=!1,this.getEdges().push(T),x.edges.push(T),b!=x&&b.edges.push(T),T)},m.prototype.remove=function(v){var x=v;if(v instanceof h){if(x==null)throw"Node is null!";if(x.owner==null||x.owner!=this)throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var b=x.edges.slice(),w=b.length,T=0;T<w;T++)(k=b[T]).isInterGraph?this.graphManager.remove(k):k.source.owner.remove(k);if((C=this.nodes.indexOf(x))==-1)throw"Node not in owner node list!";this.nodes.splice(C,1)}else if(v instanceof d){var k;if((k=v)==null)throw"Edge is null!";if(k.source==null||k.target==null)throw"Source and/or target is null!";if(k.source.owner==null||k.target.owner==null||k.source.owner!=this||k.target.owner!=this)throw"Source and/or target owner is invalid!";var C,E=k.source.edges.indexOf(k),_=k.target.edges.indexOf(k);if(!(E>-1&&_>-1))throw"Source and/or target doesn't know this edge!";if(k.source.edges.splice(E,1),k.target!=k.source&&k.target.edges.splice(_,1),(C=k.source.owner.getEdges().indexOf(k))==-1)throw"Not in owner's edge list!";k.source.owner.getEdges().splice(C,1)}},m.prototype.updateLeftTop=function(){for(var v,x,b,w=s.MAX_VALUE,T=s.MAX_VALUE,k=this.getNodes(),C=k.length,E=0;E<C;E++){var _=k[E];w>(v=_.getTop())&&(w=v),T>(x=_.getLeft())&&(T=x)}return w==s.MAX_VALUE?null:(b=k[0].getParent().paddingLeft!=null?k[0].getParent().paddingLeft:this.margin,this.left=T-b,this.top=w-b,new f(this.left,this.top))},m.prototype.updateBounds=function(v){for(var x,b,w,T,k,C=s.MAX_VALUE,E=-s.MAX_VALUE,_=s.MAX_VALUE,S=-s.MAX_VALUE,N=this.nodes,O=N.length,B=0;B<O;B++){var L=N[B];v&&L.child!=null&&L.updateBounds(),C>(x=L.getLeft())&&(C=x),E<(b=L.getRight())&&(E=b),_>(w=L.getTop())&&(_=w),S<(T=L.getBottom())&&(S=T)}var I=new p(C,_,E-C,S-_);C==s.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),k=N[0].getParent().paddingLeft!=null?N[0].getParent().paddingLeft:this.margin,this.left=I.x-k,this.right=I.x+I.width+k,this.top=I.y-k,this.bottom=I.y+I.height+k},m.calculateBounds=function(v){for(var x,b,w,T,k=s.MAX_VALUE,C=-s.MAX_VALUE,E=s.MAX_VALUE,_=-s.MAX_VALUE,S=v.length,N=0;N<S;N++){var O=v[N];k>(x=O.getLeft())&&(k=x),C<(b=O.getRight())&&(C=b),E>(w=O.getTop())&&(E=w),_<(T=O.getBottom())&&(_=T)}return new p(k,E,C-k,_-E)},m.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},m.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},m.prototype.calcEstimatedSize=function(){for(var v=0,x=this.nodes,b=x.length,w=0;w<b;w++)v+=x[w].calcEstimatedSize();return this.estimatedSize=v==0?o.EMPTY_COMPOUND_NODE_SIZE:v/Math.sqrt(this.nodes.length),this.estimatedSize},m.prototype.updateConnected=function(){var v=this;if(this.nodes.length!=0){var x,b,w=new g,T=new Set,k=this.nodes[0];for(k.withChildren().forEach((function(S){w.push(S),T.add(S)}));w.length!==0;)for(var C=(x=(k=w.shift()).getEdges()).length,E=0;E<C;E++)(b=x[E].getOtherEndInGraph(k,this))!=null&&!T.has(b)&&b.withChildren().forEach((function(S){w.push(S),T.add(S)}));if(this.isConnected=!1,T.size>=this.nodes.length){var _=0;T.forEach((function(S){S.owner==v&&_++})),_==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},r.exports=m},function(r,n,i){var a,s=i(1);function o(u){a=i(6),this.layout=u,this.graphs=[],this.edges=[]}l(o,"LGraphManager"),o.prototype.addRoot=function(){var u=this.layout.newGraph(),h=this.layout.newNode(null),d=this.add(u,h);return this.setRootGraph(d),this.rootGraph},o.prototype.add=function(u,h,d,p,f){if(d==null&&p==null&&f==null){if(u==null)throw"Graph is null!";if(h==null)throw"Parent node is null!";if(this.graphs.indexOf(u)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(u),u.parent!=null)throw"Already has a parent!";if(h.child!=null)throw"Already has a child!";return u.parent=h,h.child=u,u}f=d,d=u;var g=(p=h).getOwner(),m=f.getOwner();if(g==null||g.getGraphManager()!=this)throw"Source not in this graph mgr!";if(m==null||m.getGraphManager()!=this)throw"Target not in this graph mgr!";if(g==m)return d.isInterGraph=!1,g.add(d,p,f);if(d.isInterGraph=!0,d.source=p,d.target=f,this.edges.indexOf(d)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(d),d.source==null||d.target==null)throw"Edge source and/or target is null!";if(d.source.edges.indexOf(d)!=-1||d.target.edges.indexOf(d)!=-1)throw"Edge already in source and/or target incidency list!";return d.source.edges.push(d),d.target.edges.push(d),d},o.prototype.remove=function(u){if(u instanceof a){var h=u;if(h.getGraphManager()!=this)throw"Graph not in this graph mgr";if(h!=this.rootGraph&&(h.parent==null||h.parent.graphManager!=this))throw"Invalid parent node!";for(var d,p=[],f=(p=p.concat(h.getEdges())).length,g=0;g<f;g++)d=p[g],h.remove(d);var m,y=[];for(f=(y=y.concat(h.getNodes())).length,g=0;g<f;g++)m=y[g],h.remove(m);h==this.rootGraph&&this.setRootGraph(null);var v=this.graphs.indexOf(h);this.graphs.splice(v,1),h.parent=null}else if(u instanceof s){if((d=u)==null)throw"Edge is null!";if(!d.isInterGraph)throw"Not an inter-graph edge!";if(d.source==null||d.target==null)throw"Source and/or target is null!";if(d.source.edges.indexOf(d)==-1||d.target.edges.indexOf(d)==-1)throw"Source and/or target doesn't know this edge!";if(v=d.source.edges.indexOf(d),d.source.edges.splice(v,1),v=d.target.edges.indexOf(d),d.target.edges.splice(v,1),d.source.owner==null||d.source.owner.getGraphManager()==null)throw"Edge owner graph or owner graph manager is null!";if(d.source.owner.getGraphManager().edges.indexOf(d)==-1)throw"Not in owner graph manager's edge list!";v=d.source.owner.getGraphManager().edges.indexOf(d),d.source.owner.getGraphManager().edges.splice(v,1)}},o.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},o.prototype.getGraphs=function(){return this.graphs},o.prototype.getAllNodes=function(){if(this.allNodes==null){for(var u=[],h=this.getGraphs(),d=h.length,p=0;p<d;p++)u=u.concat(h[p].getNodes());this.allNodes=u}return this.allNodes},o.prototype.resetAllNodes=function(){this.allNodes=null},o.prototype.resetAllEdges=function(){this.allEdges=null},o.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},o.prototype.getAllEdges=function(){if(this.allEdges==null){var u=[],h=this.getGraphs();h.length;for(var d=0;d<h.length;d++)u=u.concat(h[d].getEdges());u=u.concat(this.edges),this.allEdges=u}return this.allEdges},o.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},o.prototype.setAllNodesToApplyGravitation=function(u){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=u},o.prototype.getRoot=function(){return this.rootGraph},o.prototype.setRootGraph=function(u){if(u.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=u,u.parent==null&&(u.parent=this.layout.newNode("Root node"))},o.prototype.getLayout=function(){return this.layout},o.prototype.isOneAncestorOfOther=function(u,h){if(u==null||h==null)throw"assert failed";if(u==h)return!0;for(var d,p=u.getOwner();(d=p.getParent())!=null;){if(d==h)return!0;if((p=d.getOwner())==null)break}for(p=h.getOwner();(d=p.getParent())!=null;){if(d==u)return!0;if((p=d.getOwner())==null)break}return!1},o.prototype.calcLowestCommonAncestors=function(){for(var u,h,d,p,f,g=this.getAllEdges(),m=g.length,y=0;y<m;y++)if(h=(u=g[y]).source,d=u.target,u.lca=null,u.sourceInLca=h,u.targetInLca=d,h!=d){for(p=h.getOwner();u.lca==null;){for(u.targetInLca=d,f=d.getOwner();u.lca==null;){if(f==p){u.lca=f;break}if(f==this.rootGraph)break;if(u.lca!=null)throw"assert failed";u.targetInLca=f.getParent(),f=u.targetInLca.getOwner()}if(p==this.rootGraph)break;u.lca==null&&(u.sourceInLca=p.getParent(),p=u.sourceInLca.getOwner())}if(u.lca==null)throw"assert failed"}else u.lca=h.getOwner()},o.prototype.calcLowestCommonAncestor=function(u,h){if(u==h)return u.getOwner();for(var d=u.getOwner();d!=null;){for(var p=h.getOwner();p!=null;){if(p==d)return p;p=p.getParent().getOwner()}d=d.getParent().getOwner()}return d},o.prototype.calcInclusionTreeDepths=function(u,h){var d;u==null&&h==null&&(u=this.rootGraph,h=1);for(var p=u.getNodes(),f=p.length,g=0;g<f;g++)(d=p[g]).inclusionTreeDepth=h,d.child!=null&&this.calcInclusionTreeDepths(d.child,h+1)},o.prototype.includesInvalidEdge=function(){for(var u,h=[],d=this.edges.length,p=0;p<d;p++)u=this.edges[p],this.isOneAncestorOfOther(u.source,u.target)&&h.push(u);for(p=0;p<h.length;p++)this.remove(h[p]);return!1},r.exports=o},function(r,n,i){var a=i(12);function s(){}l(s,"IGeometry"),s.calcSeparationAmount=function(o,u,h,d){if(!o.intersects(u))throw"assert failed";var p=new Array(2);this.decideDirectionsForOverlappingNodes(o,u,p),h[0]=Math.min(o.getRight(),u.getRight())-Math.max(o.x,u.x),h[1]=Math.min(o.getBottom(),u.getBottom())-Math.max(o.y,u.y),o.getX()<=u.getX()&&o.getRight()>=u.getRight()?h[0]+=Math.min(u.getX()-o.getX(),o.getRight()-u.getRight()):u.getX()<=o.getX()&&u.getRight()>=o.getRight()&&(h[0]+=Math.min(o.getX()-u.getX(),u.getRight()-o.getRight())),o.getY()<=u.getY()&&o.getBottom()>=u.getBottom()?h[1]+=Math.min(u.getY()-o.getY(),o.getBottom()-u.getBottom()):u.getY()<=o.getY()&&u.getBottom()>=o.getBottom()&&(h[1]+=Math.min(o.getY()-u.getY(),u.getBottom()-o.getBottom()));var f=Math.abs((u.getCenterY()-o.getCenterY())/(u.getCenterX()-o.getCenterX()));u.getCenterY()===o.getCenterY()&&u.getCenterX()===o.getCenterX()&&(f=1);var g=f*h[0],m=h[1]/f;h[0]<m?m=h[0]:g=h[1],h[0]=-1*p[0]*(m/2+d),h[1]=-1*p[1]*(g/2+d)},s.decideDirectionsForOverlappingNodes=function(o,u,h){o.getCenterX()<u.getCenterX()?h[0]=-1:h[0]=1,o.getCenterY()<u.getCenterY()?h[1]=-1:h[1]=1},s.getIntersection2=function(o,u,h){var d=o.getCenterX(),p=o.getCenterY(),f=u.getCenterX(),g=u.getCenterY();if(o.intersects(u))return h[0]=d,h[1]=p,h[2]=f,h[3]=g,!0;var m=o.getX(),y=o.getY(),v=o.getRight(),x=o.getX(),b=o.getBottom(),w=o.getRight(),T=o.getWidthHalf(),k=o.getHeightHalf(),C=u.getX(),E=u.getY(),_=u.getRight(),S=u.getX(),N=u.getBottom(),O=u.getRight(),B=u.getWidthHalf(),L=u.getHeightHalf(),I=!1,A=!1;if(d===f){if(p>g)return h[0]=d,h[1]=y,h[2]=f,h[3]=N,!1;if(p<g)return h[0]=d,h[1]=b,h[2]=f,h[3]=E,!1}else if(p===g){if(d>f)return h[0]=m,h[1]=p,h[2]=_,h[3]=g,!1;if(d<f)return h[0]=v,h[1]=p,h[2]=C,h[3]=g,!1}else{var M=o.height/o.width,D=u.height/u.width,R=(g-p)/(f-d),P=void 0,$=void 0,z=void 0,q=void 0,W=void 0,Q=void 0;if(-M===R?d>f?(h[0]=x,h[1]=b,I=!0):(h[0]=v,h[1]=y,I=!0):M===R&&(d>f?(h[0]=m,h[1]=y,I=!0):(h[0]=w,h[1]=b,I=!0)),-D===R?f>d?(h[2]=S,h[3]=N,A=!0):(h[2]=_,h[3]=E,A=!0):D===R&&(f>d?(h[2]=C,h[3]=E,A=!0):(h[2]=O,h[3]=N,A=!0)),I&&A)return!1;if(d>f?p>g?(P=this.getCardinalDirection(M,R,4),$=this.getCardinalDirection(D,R,2)):(P=this.getCardinalDirection(-M,R,3),$=this.getCardinalDirection(-D,R,1)):p>g?(P=this.getCardinalDirection(-M,R,1),$=this.getCardinalDirection(-D,R,3)):(P=this.getCardinalDirection(M,R,2),$=this.getCardinalDirection(D,R,4)),!I)switch(P){case 1:q=y,z=d+-k/R,h[0]=z,h[1]=q;break;case 2:z=w,q=p+T*R,h[0]=z,h[1]=q;break;case 3:q=b,z=d+k/R,h[0]=z,h[1]=q;break;case 4:z=x,q=p+-T*R,h[0]=z,h[1]=q}if(!A)switch($){case 1:Q=E,W=f+-L/R,h[2]=W,h[3]=Q;break;case 2:W=O,Q=g+B*R,h[2]=W,h[3]=Q;break;case 3:Q=N,W=f+L/R,h[2]=W,h[3]=Q;break;case 4:W=S,Q=g+-B*R,h[2]=W,h[3]=Q}}return!1},s.getCardinalDirection=function(o,u,h){return o>u?h:1+h%4},s.getIntersection=function(o,u,h,d){if(d==null)return this.getIntersection2(o,u,h);var p,f,g,m,y,v,x,b=o.x,w=o.y,T=u.x,k=u.y,C=h.x,E=h.y,_=d.x,S=d.y;return(x=(p=k-w)*(m=C-_)-(f=S-E)*(g=b-T))===0?null:new a((g*(v=_*E-C*S)-m*(y=T*w-b*k))/x,(f*y-p*v)/x)},s.angleOfVector=function(o,u,h,d){var p=void 0;return o!==h?(p=Math.atan((d-u)/(h-o)),h<o?p+=Math.PI:d<u&&(p+=this.TWO_PI)):p=d<u?this.ONE_AND_HALF_PI:this.HALF_PI,p},s.doIntersect=function(o,u,h,d){var p=o.x,f=o.y,g=u.x,m=u.y,y=h.x,v=h.y,x=d.x,b=d.y,w=(g-p)*(b-v)-(x-y)*(m-f);if(w===0)return!1;var T=((b-v)*(x-p)+(y-x)*(b-f))/w,k=((f-m)*(x-p)+(g-p)*(b-f))/w;return 0<T&&T<1&&0<k&&k<1},s.findCircleLineIntersections=function(o,u,h,d,p,f,g){var m=(h-o)*(h-o)+(d-u)*(d-u),y=2*((o-p)*(h-o)+(u-f)*(d-u)),v=(o-p)*(o-p)+(u-f)*(u-f)-g*g;if(y*y-4*m*v>=0){var x=(-y+Math.sqrt(y*y-4*m*v))/(2*m),b=(-y-Math.sqrt(y*y-4*m*v))/(2*m);return x>=0&&x<=1?[x]:b>=0&&b<=1?[b]:null}return null},s.HALF_PI=.5*Math.PI,s.ONE_AND_HALF_PI=1.5*Math.PI,s.TWO_PI=2*Math.PI,s.THREE_PI=3*Math.PI,r.exports=s},function(r,n,i){function a(){}l(a,"IMath"),a.sign=function(s){return s>0?1:s<0?-1:0},a.floor=function(s){return s<0?Math.ceil(s):Math.floor(s)},a.ceil=function(s){return s<0?Math.floor(s):Math.ceil(s)},r.exports=a},function(r,n,i){function a(){}l(a,"Integer"),a.MAX_VALUE=2147483647,a.MIN_VALUE=-2147483648,r.exports=a},function(r,n,i){var a=(function(){function p(f,g){for(var m=0;m<g.length;m++){var y=g[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(f,y.key,y)}}return l(p,"defineProperties"),function(f,g,m){return g&&p(f.prototype,g),m&&p(f,m),f}})();function s(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")}l(s,"_classCallCheck");var o=l((function(p){return{value:p,next:null,prev:null}}),"nodeFrom"),u=l((function(p,f,g,m){return p!==null?p.next=f:m.head=f,g!==null?g.prev=f:m.tail=f,f.prev=p,f.next=g,m.length++,f}),"add"),h=l((function(p,f){var g=p.prev,m=p.next;return g!==null?g.next=m:f.head=m,m!==null?m.prev=g:f.tail=g,p.prev=p.next=null,f.length--,p}),"_remove"),d=(function(){function p(f){var g=this;s(this,p),this.length=0,this.head=null,this.tail=null,f?.forEach((function(m){return g.push(m)}))}return l(p,"LinkedList"),a(p,[{key:"size",value:l((function(){return this.length}),"size")},{key:"insertBefore",value:l((function(f,g){return u(g.prev,o(f),g,this)}),"insertBefore")},{key:"insertAfter",value:l((function(f,g){return u(g,o(f),g.next,this)}),"insertAfter")},{key:"insertNodeBefore",value:l((function(f,g){return u(g.prev,f,g,this)}),"insertNodeBefore")},{key:"insertNodeAfter",value:l((function(f,g){return u(g,f,g.next,this)}),"insertNodeAfter")},{key:"push",value:l((function(f){return u(this.tail,o(f),null,this)}),"push")},{key:"unshift",value:l((function(f){return u(null,o(f),this.head,this)}),"unshift")},{key:"remove",value:l((function(f){return h(f,this)}),"remove")},{key:"pop",value:l((function(){return h(this.tail,this).value}),"pop")},{key:"popNode",value:l((function(){return h(this.tail,this)}),"popNode")},{key:"shift",value:l((function(){return h(this.head,this).value}),"shift")},{key:"shiftNode",value:l((function(){return h(this.head,this)}),"shiftNode")},{key:"get_object_at",value:l((function(f){if(f<=this.length()){for(var g=1,m=this.head;g<f;)m=m.next,g++;return m.value}}),"get_object_at")},{key:"set_object_at",value:l((function(f,g){if(f<=this.length()){for(var m=1,y=this.head;m<f;)y=y.next,m++;y.value=g}}),"set_object_at")}]),p})();r.exports=d},function(r,n,i){function a(s,o,u){this.x=null,this.y=null,s==null&&o==null&&u==null?(this.x=0,this.y=0):typeof s=="number"&&typeof o=="number"&&u==null?(this.x=s,this.y=o):s.constructor.name=="Point"&&o==null&&u==null&&(u=s,this.x=u.x,this.y=u.y)}l(a,"Point"),a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.getLocation=function(){return new a(this.x,this.y)},a.prototype.setLocation=function(s,o,u){s.constructor.name=="Point"&&o==null&&u==null?(u=s,this.setLocation(u.x,u.y)):typeof s=="number"&&typeof o=="number"&&u==null&&(parseInt(s)==s&&parseInt(o)==o?this.move(s,o):(this.x=Math.floor(s+.5),this.y=Math.floor(o+.5)))},a.prototype.move=function(s,o){this.x=s,this.y=o},a.prototype.translate=function(s,o){this.x+=s,this.y+=o},a.prototype.equals=function(s){if(s.constructor.name=="Point"){var o=s;return this.x==o.x&&this.y==o.y}return this==s},a.prototype.toString=function(){return new a().constructor.name+"[x="+this.x+",y="+this.y+"]"},r.exports=a},function(r,n,i){function a(s,o,u,h){this.x=0,this.y=0,this.width=0,this.height=0,s!=null&&o!=null&&u!=null&&h!=null&&(this.x=s,this.y=o,this.width=u,this.height=h)}l(a,"RectangleD"),a.prototype.getX=function(){return this.x},a.prototype.setX=function(s){this.x=s},a.prototype.getY=function(){return this.y},a.prototype.setY=function(s){this.y=s},a.prototype.getWidth=function(){return this.width},a.prototype.setWidth=function(s){this.width=s},a.prototype.getHeight=function(){return this.height},a.prototype.setHeight=function(s){this.height=s},a.prototype.getRight=function(){return this.x+this.width},a.prototype.getBottom=function(){return this.y+this.height},a.prototype.intersects=function(s){return!(this.getRight()<s.x)&&!(this.getBottom()<s.y)&&!(s.getRight()<this.x)&&!(s.getBottom()<this.y)},a.prototype.getCenterX=function(){return this.x+this.width/2},a.prototype.getMinX=function(){return this.getX()},a.prototype.getMaxX=function(){return this.getX()+this.width},a.prototype.getCenterY=function(){return this.y+this.height/2},a.prototype.getMinY=function(){return this.getY()},a.prototype.getMaxY=function(){return this.getY()+this.height},a.prototype.getWidthHalf=function(){return this.width/2},a.prototype.getHeightHalf=function(){return this.height/2},r.exports=a},function(r,n,i){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function s(){}l(s,"UniqueIDGeneretor"),s.lastID=0,s.createID=function(o){return s.isPrimitive(o)?o:(o.uniqueID!=null||(o.uniqueID=s.getString(),s.lastID++),o.uniqueID)},s.getString=function(o){return o==null&&(o=s.lastID),"Object#"+o},s.isPrimitive=function(o){var u=o===void 0?"undefined":a(o);return o==null||u!="object"&&u!="function"},r.exports=s},function(r,n,i){function a(y){if(Array.isArray(y)){for(var v=0,x=Array(y.length);v<y.length;v++)x[v]=y[v];return x}return Array.from(y)}l(a,"_toConsumableArray");var s=i(0),o=i(7),u=i(3),h=i(1),d=i(6),p=i(5),f=i(17),g=i(29);function m(y){g.call(this),this.layoutQuality=s.QUALITY,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=s.DEFAULT_INCREMENTAL,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new o(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,y!=null&&(this.isRemoteUse=y)}l(m,"Layout"),m.RANDOM_SEED=1,m.prototype=Object.create(g.prototype),m.prototype.getGraphManager=function(){return this.graphManager},m.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},m.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},m.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},m.prototype.newGraphManager=function(){var y=new o(this);return this.graphManager=y,y},m.prototype.newGraph=function(y){return new d(null,this.graphManager,y)},m.prototype.newNode=function(y){return new u(this.graphManager,y)},m.prototype.newEdge=function(y){return new h(null,null,y)},m.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},m.prototype.runLayout=function(){var y;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),y=!this.checkLayoutSuccess()&&this.layout(),s.ANIMATE!=="during"&&(y&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,y)},m.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},m.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var y=this.graphManager.getAllEdges(),v=0;v<y.length;v++)y[v];var x=this.graphManager.getRoot().getNodes();for(v=0;v<x.length;v++)x[v];this.update(this.graphManager.getRoot())}},m.prototype.update=function(y){if(y==null)this.update2();else if(y instanceof u){var v=y;if(v.getChild()!=null)for(var x=v.getChild().getNodes(),b=0;b<x.length;b++)update(x[b]);v.vGraphObject!=null&&v.vGraphObject.update(v)}else if(y instanceof h){var w=y;w.vGraphObject!=null&&w.vGraphObject.update(w)}else if(y instanceof d){var T=y;T.vGraphObject!=null&&T.vGraphObject.update(T)}},m.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=s.QUALITY,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=s.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},m.prototype.transform=function(y){if(y==null)this.transform(new p(0,0));else{var v=new f,x=this.graphManager.getRoot().updateLeftTop();if(x!=null){v.setWorldOrgX(y.x),v.setWorldOrgY(y.y),v.setDeviceOrgX(x.x),v.setDeviceOrgY(x.y);for(var b=this.getAllNodes(),w=0;w<b.length;w++)b[w].transform(v)}}},m.prototype.positionNodesRandomly=function(y){if(y==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var v,x,b=y.getNodes(),w=0;w<b.length;w++)(x=(v=b[w]).getChild())==null||x.getNodes().length==0?v.scatter():(this.positionNodesRandomly(x),v.updateBounds())},m.prototype.getFlatForest=function(){for(var y=[],v=!0,x=this.graphManager.getRoot().getNodes(),b=!0,w=0;w<x.length;w++)x[w].getChild()!=null&&(b=!1);if(!b)return y;var T=new Set,k=[],C=new Map,E=[];for(E=E.concat(x);E.length>0&&v;){for(k.push(E[0]);k.length>0&&v;){var _=k[0];k.splice(0,1),T.add(_);var S=_.getEdges();for(w=0;w<S.length;w++){var N=S[w].getOtherEnd(_);if(C.get(_)!=N){if(T.has(N)){v=!1;break}k.push(N),C.set(N,_)}}}if(v){var O=[].concat(a(T));for(y.push(O),w=0;w<O.length;w++){var B=O[w],L=E.indexOf(B);L>-1&&E.splice(L,1)}T=new Set,C=new Map}else y=[]}return y},m.prototype.createDummyNodesForBendpoints=function(y){for(var v=[],x=y.source,b=this.graphManager.calcLowestCommonAncestor(y.source,y.target),w=0;w<y.bendpoints.length;w++){var T=this.newNode(null);T.setRect(new Point(0,0),new Dimension(1,1)),b.add(T);var k=this.newEdge(null);this.graphManager.add(k,x,T),v.add(T),x=T}return k=this.newEdge(null),this.graphManager.add(k,x,y.target),this.edgeToDummyNodes.set(y,v),y.isInterGraph()?this.graphManager.remove(y):b.remove(y),v},m.prototype.createBendpointsFromDummyNodes=function(){var y=[];y=y.concat(this.graphManager.getAllEdges()),y=[].concat(a(this.edgeToDummyNodes.keys())).concat(y);for(var v=0;v<y.length;v++){var x=y[v];if(x.bendpoints.length>0){for(var b=this.edgeToDummyNodes.get(x),w=0;w<b.length;w++){var T=b[w],k=new p(T.getCenterX(),T.getCenterY()),C=x.bendpoints.get(w);C.x=k.x,C.y=k.y,T.getOwner().remove(T)}this.graphManager.add(x,x.source,x.target)}}},m.transform=function(y,v,x,b){if(x!=null&&b!=null){var w=v;return y<=50?w-=(v-v/x)/50*(50-y):w+=(v*b-v)/50*(y-50),w}var T,k;return y<=50?(T=9*v/500,k=v/10):(T=9*v/50,k=-8*v),T*y+k},m.findCenterOfTree=function(y){var v=[];v=v.concat(y);var x=[],b=new Map,w=!1,T=null;v.length!=1&&v.length!=2||(w=!0,T=v[0]);for(var k=0;k<v.length;k++){var C=(S=v[k]).getNeighborsList().size;b.set(S,S.getNeighborsList().size),C==1&&x.push(S)}var E=[];for(E=E.concat(x);!w;){var _=[];for(_=_.concat(E),E=[],k=0;k<v.length;k++){var S=v[k],N=v.indexOf(S);N>=0&&v.splice(N,1),S.getNeighborsList().forEach((function(O){if(x.indexOf(O)<0){var B=b.get(O)-1;B==1&&E.push(O),b.set(O,B)}}))}x=x.concat(E),v.length!=1&&v.length!=2||(w=!0,T=v[0])}return T},m.prototype.setGraphManager=function(y){this.graphManager=y},r.exports=m},function(r,n,i){function a(){}l(a,"RandomSeed"),a.seed=1,a.x=0,a.nextDouble=function(){return a.x=1e4*Math.sin(a.seed++),a.x-Math.floor(a.x)},r.exports=a},function(r,n,i){var a=i(5);function s(o,u){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}l(s,"Transform"),s.prototype.getWorldOrgX=function(){return this.lworldOrgX},s.prototype.setWorldOrgX=function(o){this.lworldOrgX=o},s.prototype.getWorldOrgY=function(){return this.lworldOrgY},s.prototype.setWorldOrgY=function(o){this.lworldOrgY=o},s.prototype.getWorldExtX=function(){return this.lworldExtX},s.prototype.setWorldExtX=function(o){this.lworldExtX=o},s.prototype.getWorldExtY=function(){return this.lworldExtY},s.prototype.setWorldExtY=function(o){this.lworldExtY=o},s.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},s.prototype.setDeviceOrgX=function(o){this.ldeviceOrgX=o},s.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},s.prototype.setDeviceOrgY=function(o){this.ldeviceOrgY=o},s.prototype.getDeviceExtX=function(){return this.ldeviceExtX},s.prototype.setDeviceExtX=function(o){this.ldeviceExtX=o},s.prototype.getDeviceExtY=function(){return this.ldeviceExtY},s.prototype.setDeviceExtY=function(o){this.ldeviceExtY=o},s.prototype.transformX=function(o){var u=0,h=this.lworldExtX;return h!=0&&(u=this.ldeviceOrgX+(o-this.lworldOrgX)*this.ldeviceExtX/h),u},s.prototype.transformY=function(o){var u=0,h=this.lworldExtY;return h!=0&&(u=this.ldeviceOrgY+(o-this.lworldOrgY)*this.ldeviceExtY/h),u},s.prototype.inverseTransformX=function(o){var u=0,h=this.ldeviceExtX;return h!=0&&(u=this.lworldOrgX+(o-this.ldeviceOrgX)*this.lworldExtX/h),u},s.prototype.inverseTransformY=function(o){var u=0,h=this.ldeviceExtY;return h!=0&&(u=this.lworldOrgY+(o-this.ldeviceOrgY)*this.lworldExtY/h),u},s.prototype.inverseTransformPoint=function(o){return new a(this.inverseTransformX(o.x),this.inverseTransformY(o.y))},r.exports=s},function(r,n,i){function a(g){if(Array.isArray(g)){for(var m=0,y=Array(g.length);m<g.length;m++)y[m]=g[m];return y}return Array.from(g)}l(a,"_toConsumableArray");var s=i(15),o=i(4),u=i(0),h=i(8),d=i(9);function p(){s.call(this),this.useSmartIdealEdgeLengthCalculation=o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=o.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=o.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=o.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*o.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=o.MAX_ITERATIONS}for(var f in l(p,"FDLayout"),p.prototype=Object.create(s.prototype),s)p[f]=s[f];p.prototype.initParameters=function(){s.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=o.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},p.prototype.calcIdealEdgeLengths=function(){for(var g,m,y,v,x,b,w,T=this.getGraphManager().getAllEdges(),k=0;k<T.length;k++)m=(g=T[k]).idealLength,g.isInterGraph&&(v=g.getSource(),x=g.getTarget(),b=g.getSourceInLca().getEstimatedSize(),w=g.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(g.idealLength+=b+w-2*u.SIMPLE_NODE_SIZE),y=g.getLca().getInclusionTreeDepth(),g.idealLength+=m*o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(v.getInclusionTreeDepth()+x.getInclusionTreeDepth()-2*y))},p.prototype.initSpringEmbedder=function(){var g=this.getAllNodes().length;this.incremental?(g>o.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*o.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(g-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-o.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT_INCREMENTAL):(g>o.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(o.COOLING_ADAPTATION_FACTOR,1-(g-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*(1-o.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.displacementThresholdPerNode=3*o.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},p.prototype.calcSpringForces=function(){for(var g,m=this.getAllEdges(),y=0;y<m.length;y++)g=m[y],this.calcSpringForce(g,g.idealLength)},p.prototype.calcRepulsionForces=function(){var g,m,y,v,x,b=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],w=arguments.length>1&&arguments[1]!==void 0&&arguments[1],T=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&b&&this.updateGrid(),x=new Set,g=0;g<T.length;g++)y=T[g],this.calculateRepulsionForceOfANode(y,x,b,w),x.add(y);else for(g=0;g<T.length;g++)for(y=T[g],m=g+1;m<T.length;m++)v=T[m],y.getOwner()==v.getOwner()&&this.calcRepulsionForce(y,v)},p.prototype.calcGravitationalForces=function(){for(var g,m=this.getAllNodesToApplyGravitation(),y=0;y<m.length;y++)g=m[y],this.calcGravitationalForce(g)},p.prototype.moveNodes=function(){for(var g=this.getAllNodes(),m=0;m<g.length;m++)g[m].move()},p.prototype.calcSpringForce=function(g,m){var y,v,x,b,w=g.getSource(),T=g.getTarget();if(this.uniformLeafNodeSizes&&w.getChild()==null&&T.getChild()==null)g.updateLengthSimple();else if(g.updateLength(),g.isOverlapingSourceAndTarget)return;(y=g.getLength())!=0&&(x=(v=g.edgeElasticity*(y-m))*(g.lengthX/y),b=v*(g.lengthY/y),w.springForceX+=x,w.springForceY+=b,T.springForceX-=x,T.springForceY-=b)},p.prototype.calcRepulsionForce=function(g,m){var y,v,x,b,w,T,k,C=g.getRect(),E=m.getRect(),_=new Array(2),S=new Array(4);if(C.intersects(E)){h.calcSeparationAmount(C,E,_,o.DEFAULT_EDGE_LENGTH/2),T=2*_[0],k=2*_[1];var N=g.noOfChildren*m.noOfChildren/(g.noOfChildren+m.noOfChildren);g.repulsionForceX-=N*T,g.repulsionForceY-=N*k,m.repulsionForceX+=N*T,m.repulsionForceY+=N*k}else this.uniformLeafNodeSizes&&g.getChild()==null&&m.getChild()==null?(y=E.getCenterX()-C.getCenterX(),v=E.getCenterY()-C.getCenterY()):(h.getIntersection(C,E,S),y=S[2]-S[0],v=S[3]-S[1]),Math.abs(y)<o.MIN_REPULSION_DIST&&(y=d.sign(y)*o.MIN_REPULSION_DIST),Math.abs(v)<o.MIN_REPULSION_DIST&&(v=d.sign(v)*o.MIN_REPULSION_DIST),x=y*y+v*v,b=Math.sqrt(x),T=(w=(g.nodeRepulsion/2+m.nodeRepulsion/2)*g.noOfChildren*m.noOfChildren/x)*y/b,k=w*v/b,g.repulsionForceX-=T,g.repulsionForceY-=k,m.repulsionForceX+=T,m.repulsionForceY+=k},p.prototype.calcGravitationalForce=function(g){var m,y,v,x,b,w,T,k;y=((m=g.getOwner()).getRight()+m.getLeft())/2,v=(m.getTop()+m.getBottom())/2,x=g.getCenterX()-y,b=g.getCenterY()-v,w=Math.abs(x)+g.getWidth()/2,T=Math.abs(b)+g.getHeight()/2,g.getOwner()==this.graphManager.getRoot()?(w>(k=m.getEstimatedSize()*this.gravityRangeFactor)||T>k)&&(g.gravitationForceX=-this.gravityConstant*x,g.gravitationForceY=-this.gravityConstant*b):(w>(k=m.getEstimatedSize()*this.compoundGravityRangeFactor)||T>k)&&(g.gravitationForceX=-this.gravityConstant*x*this.compoundGravityConstant,g.gravitationForceY=-this.gravityConstant*b*this.compoundGravityConstant)},p.prototype.isConverged=function(){var g,m=!1;return this.totalIterations>this.maxIterations/3&&(m=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),g=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,g||m},p.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},p.prototype.calcNoOfChildrenForAllNodes=function(){for(var g,m=this.graphManager.getAllNodes(),y=0;y<m.length;y++)(g=m[y]).noOfChildren=g.getNoOfChildren()},p.prototype.calcGrid=function(g){var m,y;m=parseInt(Math.ceil((g.getRight()-g.getLeft())/this.repulsionRange)),y=parseInt(Math.ceil((g.getBottom()-g.getTop())/this.repulsionRange));for(var v=new Array(m),x=0;x<m;x++)v[x]=new Array(y);for(x=0;x<m;x++)for(var b=0;b<y;b++)v[x][b]=new Array;return v},p.prototype.addNodeToGrid=function(g,m,y){var v,x,b,w;v=parseInt(Math.floor((g.getRect().x-m)/this.repulsionRange)),x=parseInt(Math.floor((g.getRect().width+g.getRect().x-m)/this.repulsionRange)),b=parseInt(Math.floor((g.getRect().y-y)/this.repulsionRange)),w=parseInt(Math.floor((g.getRect().height+g.getRect().y-y)/this.repulsionRange));for(var T=v;T<=x;T++)for(var k=b;k<=w;k++)this.grid[T][k].push(g),g.setGridCoordinates(v,x,b,w)},p.prototype.updateGrid=function(){var g,m,y=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),g=0;g<y.length;g++)m=y[g],this.addNodeToGrid(m,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},p.prototype.calculateRepulsionForceOfANode=function(g,m,y,v){if(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&y||v){var x,b=new Set;g.surrounding=new Array;for(var w=this.grid,T=g.startX-1;T<g.finishX+2;T++)for(var k=g.startY-1;k<g.finishY+2;k++)if(!(T<0||k<0||T>=w.length||k>=w[0].length)){for(var C=0;C<w[T][k].length;C++)if(x=w[T][k][C],g.getOwner()==x.getOwner()&&g!=x&&!m.has(x)&&!b.has(x)){var E=Math.abs(g.getCenterX()-x.getCenterX())-(g.getWidth()/2+x.getWidth()/2),_=Math.abs(g.getCenterY()-x.getCenterY())-(g.getHeight()/2+x.getHeight()/2);E<=this.repulsionRange&&_<=this.repulsionRange&&b.add(x)}}g.surrounding=[].concat(a(b))}for(T=0;T<g.surrounding.length;T++)this.calcRepulsionForce(g,g.surrounding[T])},p.prototype.calcRepulsionRange=function(){return 0},r.exports=p},function(r,n,i){var a=i(1),s=i(4);function o(h,d,p){a.call(this,h,d,p),this.idealLength=s.DEFAULT_EDGE_LENGTH,this.edgeElasticity=s.DEFAULT_SPRING_STRENGTH}for(var u in l(o,"FDLayoutEdge"),o.prototype=Object.create(a.prototype),a)o[u]=a[u];r.exports=o},function(r,n,i){var a=i(3),s=i(4);function o(h,d,p,f){a.call(this,h,d,p,f),this.nodeRepulsion=s.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var u in l(o,"FDLayoutNode"),o.prototype=Object.create(a.prototype),a)o[u]=a[u];o.prototype.setGridCoordinates=function(h,d,p,f){this.startX=h,this.finishX=d,this.startY=p,this.finishY=f},r.exports=o},function(r,n,i){function a(s,o){this.width=0,this.height=0,s!==null&&o!==null&&(this.height=o,this.width=s)}l(a,"DimensionD"),a.prototype.getWidth=function(){return this.width},a.prototype.setWidth=function(s){this.width=s},a.prototype.getHeight=function(){return this.height},a.prototype.setHeight=function(s){this.height=s},r.exports=a},function(r,n,i){var a=i(14);function s(){this.map={},this.keys=[]}l(s,"HashMap"),s.prototype.put=function(o,u){var h=a.createID(o);this.contains(h)||(this.map[h]=u,this.keys.push(o))},s.prototype.contains=function(o){return a.createID(o),this.map[o]!=null},s.prototype.get=function(o){var u=a.createID(o);return this.map[u]},s.prototype.keySet=function(){return this.keys},r.exports=s},function(r,n,i){var a=i(14);function s(){this.set={}}l(s,"HashSet"),s.prototype.add=function(o){var u=a.createID(o);this.contains(u)||(this.set[u]=o)},s.prototype.remove=function(o){delete this.set[a.createID(o)]},s.prototype.clear=function(){this.set={}},s.prototype.contains=function(o){return this.set[a.createID(o)]==o},s.prototype.isEmpty=function(){return this.size()===0},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAllTo=function(o){for(var u=Object.keys(this.set),h=u.length,d=0;d<h;d++)o.push(this.set[u[d]])},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAll=function(o){for(var u=o.length,h=0;h<u;h++){var d=o[h];this.add(d)}},r.exports=s},function(r,n,i){function a(){}l(a,"Matrix"),a.multMat=function(s,o){for(var u=[],h=0;h<s.length;h++){u[h]=[];for(var d=0;d<o[0].length;d++){u[h][d]=0;for(var p=0;p<s[0].length;p++)u[h][d]+=s[h][p]*o[p][d]}}return u},a.transpose=function(s){for(var o=[],u=0;u<s[0].length;u++){o[u]=[];for(var h=0;h<s.length;h++)o[u][h]=s[h][u]}return o},a.multCons=function(s,o){for(var u=[],h=0;h<s.length;h++)u[h]=s[h]*o;return u},a.minusOp=function(s,o){for(var u=[],h=0;h<s.length;h++)u[h]=s[h]-o[h];return u},a.dotProduct=function(s,o){for(var u=0,h=0;h<s.length;h++)u+=s[h]*o[h];return u},a.mag=function(s){return Math.sqrt(this.dotProduct(s,s))},a.normalize=function(s){for(var o=[],u=this.mag(s),h=0;h<s.length;h++)o[h]=s[h]/u;return o},a.multGamma=function(s){for(var o=[],u=0,h=0;h<s.length;h++)u+=s[h];u*=-1/s.length;for(var d=0;d<s.length;d++)o[d]=u+s[d];return o},a.multL=function(s,o,u){for(var h=[],d=[],p=[],f=0;f<o[0].length;f++){for(var g=0,m=0;m<o.length;m++)g+=-.5*o[m][f]*s[m];d[f]=g}for(var y=0;y<u.length;y++){for(var v=0,x=0;x<u.length;x++)v+=u[y][x]*d[x];p[y]=v}for(var b=0;b<o.length;b++){for(var w=0,T=0;T<o[0].length;T++)w+=o[b][T]*p[T];h[b]=w}return h},r.exports=a},function(r,n,i){var a=(function(){function h(d,p){for(var f=0;f<p.length;f++){var g=p[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}}return l(h,"defineProperties"),function(d,p,f){return p&&h(d.prototype,p),f&&h(d,f),d}})();function s(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")}l(s,"_classCallCheck");var o=i(11),u=(function(){function h(d,p){s(this,h),p===null&&p===void 0||(this.compareFunction=this._defaultCompareFunction);var f=void 0;f=d instanceof o?d.size():d.length,this._quicksort(d,0,f-1)}return l(h,"Quicksort"),a(h,[{key:"_quicksort",value:l((function(d,p,f){if(p<f){var g=this._partition(d,p,f);this._quicksort(d,p,g),this._quicksort(d,g+1,f)}}),"_quicksort")},{key:"_partition",value:l((function(d,p,f){for(var g=this._get(d,p),m=p,y=f;;){for(;this.compareFunction(g,this._get(d,y));)y--;for(;this.compareFunction(this._get(d,m),g);)m++;if(!(m<y))return y;this._swap(d,m,y),m++,y--}}),"_partition")},{key:"_get",value:l((function(d,p){return d instanceof o?d.get_object_at(p):d[p]}),"_get")},{key:"_set",value:l((function(d,p,f){d instanceof o?d.set_object_at(p,f):d[p]=f}),"_set")},{key:"_swap",value:l((function(d,p,f){var g=this._get(d,p);this._set(d,p,this._get(d,f)),this._set(d,f,g)}),"_swap")},{key:"_defaultCompareFunction",value:l((function(d,p){return p>d}),"_defaultCompareFunction")}]),h})();r.exports=u},function(r,n,i){function a(){}l(a,"SVD"),a.svd=function(s){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=s.length,this.n=s[0].length;var o,u,h=Math.min(this.m,this.n);this.s=(function(Ye){for(var je=[];Ye-- >0;)je.push(0);return je})(Math.min(this.m+1,this.n)),this.U=(o=[this.m,h],u=l((function Ye(je){if(je.length==0)return 0;for(var mt=[],at=0;at<je[0];at++)mt.push(Ye(je.slice(1)));return mt}),"allocate"),u(o)),this.V=(function(Ye){var je=l((function mt(at){if(at.length==0)return 0;for(var Et=[],xt=0;xt<at[0];xt++)Et.push(mt(at.slice(1)));return Et}),"allocate");return je(Ye)})([this.n,this.n]);for(var d=(function(Ye){for(var je=[];Ye-- >0;)je.push(0);return je})(this.n),p=(function(Ye){for(var je=[];Ye-- >0;)je.push(0);return je})(this.m),f=Math.min(this.m-1,this.n),g=Math.max(0,Math.min(this.n-2,this.m)),m=0;m<Math.max(f,g);m++){if(m<f){this.s[m]=0;for(var y=m;y<this.m;y++)this.s[m]=a.hypot(this.s[m],s[y][m]);if(this.s[m]!==0){s[m][m]<0&&(this.s[m]=-this.s[m]);for(var v=m;v<this.m;v++)s[v][m]/=this.s[m];s[m][m]+=1}this.s[m]=-this.s[m]}for(var x=m+1;x<this.n;x++){if((function(Ye,je){return Ye&&je})(m<f,this.s[m]!==0)){for(var b=0,w=m;w<this.m;w++)b+=s[w][m]*s[w][x];b=-b/s[m][m];for(var T=m;T<this.m;T++)s[T][x]+=b*s[T][m]}d[x]=s[m][x]}if((function(Ye,je){return je})(0,m<f))for(var k=m;k<this.m;k++)this.U[k][m]=s[k][m];if(m<g){d[m]=0;for(var C=m+1;C<this.n;C++)d[m]=a.hypot(d[m],d[C]);if(d[m]!==0){d[m+1]<0&&(d[m]=-d[m]);for(var E=m+1;E<this.n;E++)d[E]/=d[m];d[m+1]+=1}if(d[m]=-d[m],(function(Ye,je){return Ye&&je})(m+1<this.m,d[m]!==0)){for(var _=m+1;_<this.m;_++)p[_]=0;for(var S=m+1;S<this.n;S++)for(var N=m+1;N<this.m;N++)p[N]+=d[S]*s[N][S];for(var O=m+1;O<this.n;O++)for(var B=-d[O]/d[m+1],L=m+1;L<this.m;L++)s[L][O]+=B*p[L]}for(var I=m+1;I<this.n;I++)this.V[I][m]=d[I]}}var A=Math.min(this.n,this.m+1);f<this.n&&(this.s[f]=s[f][f]),this.m<A&&(this.s[A-1]=0),g+1<A&&(d[g]=s[g][A-1]),d[A-1]=0;for(var M=f;M<h;M++){for(var D=0;D<this.m;D++)this.U[D][M]=0;this.U[M][M]=1}for(var R=f-1;R>=0;R--)if(this.s[R]!==0){for(var P=R+1;P<h;P++){for(var $=0,z=R;z<this.m;z++)$+=this.U[z][R]*this.U[z][P];$=-$/this.U[R][R];for(var q=R;q<this.m;q++)this.U[q][P]+=$*this.U[q][R]}for(var W=R;W<this.m;W++)this.U[W][R]=-this.U[W][R];this.U[R][R]=1+this.U[R][R];for(var Q=0;Q<R-1;Q++)this.U[Q][R]=0}else{for(var te=0;te<this.m;te++)this.U[te][R]=0;this.U[R][R]=1}for(var oe=this.n-1;oe>=0;oe--){if((function(Ye,je){return Ye&&je})(oe<g,d[oe]!==0))for(var re=oe+1;re<h;re++){for(var H=0,K=oe+1;K<this.n;K++)H+=this.V[K][oe]*this.V[K][re];H=-H/this.V[oe+1][oe];for(var ie=oe+1;ie<this.n;ie++)this.V[ie][re]+=H*this.V[ie][oe]}for(var ne=0;ne<this.n;ne++)this.V[ne][oe]=0;this.V[oe][oe]=1}for(var J=A-1,ue=Math.pow(2,-52),Y=Math.pow(2,-966);A>0;){var se=void 0,de=void 0;for(se=A-2;se>=-1&&se!==-1;se--)if(Math.abs(d[se])<=Y+ue*(Math.abs(this.s[se])+Math.abs(this.s[se+1]))){d[se]=0;break}if(se===A-2)de=4;else{var ce=void 0;for(ce=A-1;ce>=se&&ce!==se;ce--){var Ee=(ce!==A?Math.abs(d[ce]):0)+(ce!==se+1?Math.abs(d[ce-1]):0);if(Math.abs(this.s[ce])<=Y+ue*Ee){this.s[ce]=0;break}}ce===se?de=3:ce===A-1?de=1:(de=2,se=ce)}switch(se++,de){case 1:var ve=d[A-2];d[A-2]=0;for(var De=A-2;De>=se;De--){var Ue=a.hypot(this.s[De],ve),ze=this.s[De]/Ue,Ge=ve/Ue;this.s[De]=Ue,De!==se&&(ve=-Ge*d[De-1],d[De-1]=ze*d[De-1]);for(var $e=0;$e<this.n;$e++)Ue=ze*this.V[$e][De]+Ge*this.V[$e][A-1],this.V[$e][A-1]=-Ge*this.V[$e][De]+ze*this.V[$e][A-1],this.V[$e][De]=Ue}break;case 2:var Pe=d[se-1];d[se-1]=0;for(var j=se;j<A;j++){var pe=a.hypot(this.s[j],Pe),X=this.s[j]/pe,ge=Pe/pe;this.s[j]=pe,Pe=-ge*d[j],d[j]=X*d[j];for(var G=0;G<this.m;G++)pe=X*this.U[G][j]+ge*this.U[G][se-1],this.U[G][se-1]=-ge*this.U[G][j]+X*this.U[G][se-1],this.U[G][j]=pe}break;case 3:var le=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[A-1]),Math.abs(this.s[A-2])),Math.abs(d[A-2])),Math.abs(this.s[se])),Math.abs(d[se])),V=this.s[A-1]/le,me=this.s[A-2]/le,he=d[A-2]/le,_e=this.s[se]/le,Ce=d[se]/le,Te=((me+V)*(me-V)+he*he)/2,Re=V*he*(V*he),Le=0;(function(Ye,je){return Ye||je})(Te!==0,Re!==0)&&(Le=Math.sqrt(Te*Te+Re),Te<0&&(Le=-Le),Le=Re/(Te+Le));for(var ot=(_e+V)*(_e-V)+Le,Tt=_e*Ce,Fe=se;Fe<A-1;Fe++){var gt=a.hypot(ot,Tt),Qe=ot/gt,Be=Tt/gt;Fe!==se&&(d[Fe-1]=gt),ot=Qe*this.s[Fe]+Be*d[Fe],d[Fe]=Qe*d[Fe]-Be*this.s[Fe],Tt=Be*this.s[Fe+1],this.s[Fe+1]=Qe*this.s[Fe+1];for(var rt=0;rt<this.n;rt++)gt=Qe*this.V[rt][Fe]+Be*this.V[rt][Fe+1],this.V[rt][Fe+1]=-Be*this.V[rt][Fe]+Qe*this.V[rt][Fe+1],this.V[rt][Fe]=gt;if(Qe=ot/(gt=a.hypot(ot,Tt)),Be=Tt/gt,this.s[Fe]=gt,ot=Qe*d[Fe]+Be*this.s[Fe+1],this.s[Fe+1]=-Be*d[Fe]+Qe*this.s[Fe+1],Tt=Be*d[Fe+1],d[Fe+1]=Qe*d[Fe+1],Fe<this.m-1)for(var lt=0;lt<this.m;lt++)gt=Qe*this.U[lt][Fe]+Be*this.U[lt][Fe+1],this.U[lt][Fe+1]=-Be*this.U[lt][Fe]+Qe*this.U[lt][Fe+1],this.U[lt][Fe]=gt}d[A-2]=ot;break;case 4:if(this.s[se]<=0){this.s[se]=this.s[se]<0?-this.s[se]:0;for(var Je=0;Je<=J;Je++)this.V[Je][se]=-this.V[Je][se]}for(;se<J&&!(this.s[se]>=this.s[se+1]);){var _t=this.s[se];if(this.s[se]=this.s[se+1],this.s[se+1]=_t,se<this.n-1)for(var it=0;it<this.n;it++)_t=this.V[it][se+1],this.V[it][se+1]=this.V[it][se],this.V[it][se]=_t;if(se<this.m-1)for(var pt=0;pt<this.m;pt++)_t=this.U[pt][se+1],this.U[pt][se+1]=this.U[pt][se],this.U[pt][se]=_t;se++}A--}}return{U:this.U,V:this.V,S:this.s}},a.hypot=function(s,o){var u=void 0;return Math.abs(s)>Math.abs(o)?(u=o/s,u=Math.abs(s)*Math.sqrt(1+u*u)):o!=0?(u=s/o,u=Math.abs(o)*Math.sqrt(1+u*u)):u=0,u},r.exports=a},function(r,n,i){var a=(function(){function u(h,d){for(var p=0;p<d.length;p++){var f=d[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(h,f.key,f)}}return l(u,"defineProperties"),function(h,d,p){return d&&u(h.prototype,d),p&&u(h,p),h}})();function s(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}l(s,"_classCallCheck");var o=(function(){function u(h,d){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;s(this,u),this.sequence1=h,this.sequence2=d,this.match_score=p,this.mismatch_penalty=f,this.gap_penalty=g,this.iMax=h.length+1,this.jMax=d.length+1,this.grid=new Array(this.iMax);for(var m=0;m<this.iMax;m++){this.grid[m]=new Array(this.jMax);for(var y=0;y<this.jMax;y++)this.grid[m][y]=0}this.tracebackGrid=new Array(this.iMax);for(var v=0;v<this.iMax;v++){this.tracebackGrid[v]=new Array(this.jMax);for(var x=0;x<this.jMax;x++)this.tracebackGrid[v][x]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return l(u,"NeedlemanWunsch"),a(u,[{key:"getScore",value:l((function(){return this.score}),"getScore")},{key:"getAlignments",value:l((function(){return this.alignments}),"getAlignments")},{key:"computeGrids",value:l((function(){for(var h=1;h<this.jMax;h++)this.grid[0][h]=this.grid[0][h-1]+this.gap_penalty,this.tracebackGrid[0][h]=[!1,!1,!0];for(var d=1;d<this.iMax;d++)this.grid[d][0]=this.grid[d-1][0]+this.gap_penalty,this.tracebackGrid[d][0]=[!1,!0,!1];for(var p=1;p<this.iMax;p++)for(var f=1;f<this.jMax;f++){var g=[this.sequence1[p-1]===this.sequence2[f-1]?this.grid[p-1][f-1]+this.match_score:this.grid[p-1][f-1]+this.mismatch_penalty,this.grid[p-1][f]+this.gap_penalty,this.grid[p][f-1]+this.gap_penalty],m=this.arrayAllMaxIndexes(g);this.grid[p][f]=g[m[0]],this.tracebackGrid[p][f]=[m.includes(0),m.includes(1),m.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}),"computeGrids")},{key:"alignmentTraceback",value:l((function(){var h=[];for(h.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});h[0];){var d=h[0],p=this.tracebackGrid[d.pos[0]][d.pos[1]];p[0]&&h.push({pos:[d.pos[0]-1,d.pos[1]-1],seq1:this.sequence1[d.pos[0]-1]+d.seq1,seq2:this.sequence2[d.pos[1]-1]+d.seq2}),p[1]&&h.push({pos:[d.pos[0]-1,d.pos[1]],seq1:this.sequence1[d.pos[0]-1]+d.seq1,seq2:"-"+d.seq2}),p[2]&&h.push({pos:[d.pos[0],d.pos[1]-1],seq1:"-"+d.seq1,seq2:this.sequence2[d.pos[1]-1]+d.seq2}),d.pos[0]===0&&d.pos[1]===0&&this.alignments.push({sequence1:d.seq1,sequence2:d.seq2}),h.shift()}return this.alignments}),"alignmentTraceback")},{key:"getAllIndexes",value:l((function(h,d){for(var p=[],f=-1;(f=h.indexOf(d,f+1))!==-1;)p.push(f);return p}),"getAllIndexes")},{key:"arrayAllMaxIndexes",value:l((function(h){return this.getAllIndexes(h,Math.max.apply(null,h))}),"arrayAllMaxIndexes")}]),u})();r.exports=o},function(r,n,i){var a=l((function(){}),"layoutBase");a.FDLayout=i(18),a.FDLayoutConstants=i(4),a.FDLayoutEdge=i(19),a.FDLayoutNode=i(20),a.DimensionD=i(21),a.HashMap=i(22),a.HashSet=i(23),a.IGeometry=i(8),a.IMath=i(9),a.Integer=i(10),a.Point=i(12),a.PointD=i(5),a.RandomSeed=i(16),a.RectangleD=i(13),a.Transform=i(17),a.UniqueIDGeneretor=i(14),a.Quicksort=i(25),a.LinkedList=i(11),a.LGraphObject=i(2),a.LGraph=i(6),a.LEdge=i(1),a.LGraphManager=i(7),a.LNode=i(3),a.Layout=i(15),a.LayoutConstants=i(0),a.NeedlemanWunsch=i(27),a.Matrix=i(24),a.SVD=i(26),r.exports=a},function(r,n,i){function a(){this.listeners=[]}l(a,"Emitter");var s=a.prototype;s.addListener=function(o,u){this.listeners.push({event:o,callback:u})},s.removeListener=function(o,u){for(var h=this.listeners.length;h>=0;h--){var d=this.listeners[h];d.event===o&&d.callback===u&&this.listeners.splice(h,1)}},s.emit=function(o,u){for(var h=0;h<this.listeners.length;h++){var d=this.listeners[h];o===d.event&&d.callback(u)}},r.exports=a}])}))}}),EB=qn({"../../node_modules/.pnpm/cose-base@2.2.0/node_modules/cose-base/cose-base.js"(t,e){l((function(r,n){typeof t=="object"&&typeof e=="object"?e.exports=n(TB()):typeof define=="function"&&define.amd?define(["layout-base"],n):typeof t=="object"?t.coseBase=n(TB()):r.coseBase=n(r.layoutBase)}),"webpackUniversalModuleDefinition")(t,(function(r){return(()=>{var n={45:(s,o,u)=>{var h={};h.layoutBase=u(551),h.CoSEConstants=u(806),h.CoSEEdge=u(767),h.CoSEGraph=u(880),h.CoSEGraphManager=u(578),h.CoSELayout=u(765),h.CoSENode=u(991),h.ConstraintHandler=u(902),s.exports=h},806:(s,o,u)=>{var h=u(551).FDLayoutConstants;function d(){}for(var p in l(d,"CoSEConstants"),h)d[p]=h[p];d.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,d.DEFAULT_RADIAL_SEPARATION=h.DEFAULT_EDGE_LENGTH,d.DEFAULT_COMPONENT_SEPERATION=60,d.TILE=!0,d.TILING_PADDING_VERTICAL=10,d.TILING_PADDING_HORIZONTAL=10,d.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,d.ENFORCE_CONSTRAINTS=!0,d.APPLY_LAYOUT=!0,d.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,d.TREE_REDUCTION_ON_INCREMENTAL=!0,d.PURE_INCREMENTAL=d.DEFAULT_INCREMENTAL,s.exports=d},767:(s,o,u)=>{var h=u(551).FDLayoutEdge;function d(f,g,m){h.call(this,f,g,m)}for(var p in l(d,"CoSEEdge"),d.prototype=Object.create(h.prototype),h)d[p]=h[p];s.exports=d},880:(s,o,u)=>{var h=u(551).LGraph;function d(f,g,m){h.call(this,f,g,m)}for(var p in l(d,"CoSEGraph"),d.prototype=Object.create(h.prototype),h)d[p]=h[p];s.exports=d},578:(s,o,u)=>{var h=u(551).LGraphManager;function d(f){h.call(this,f)}for(var p in l(d,"CoSEGraphManager"),d.prototype=Object.create(h.prototype),h)d[p]=h[p];s.exports=d},765:(s,o,u)=>{var h=u(551).FDLayout,d=u(578),p=u(880),f=u(991),g=u(767),m=u(806),y=u(902),v=u(551).FDLayoutConstants,x=u(551).LayoutConstants,b=u(551).Point,w=u(551).PointD,T=u(551).DimensionD,k=u(551).Layout,C=u(551).Integer,E=u(551).IGeometry,_=u(551).LGraph,S=u(551).Transform,N=u(551).LinkedList;function O(){h.call(this),this.toBeTiled={},this.constraints={}}for(var B in l(O,"CoSELayout"),O.prototype=Object.create(h.prototype),h)O[B]=h[B];O.prototype.newGraphManager=function(){var L=new d(this);return this.graphManager=L,L},O.prototype.newGraph=function(L){return new p(null,this.graphManager,L)},O.prototype.newNode=function(L){return new f(this.graphManager,L)},O.prototype.newEdge=function(L){return new g(null,null,L)},O.prototype.initParameters=function(){h.prototype.initParameters.call(this,arguments),this.isSubLayout||(m.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=m.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=m.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=v.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=v.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=v.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=v.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},O.prototype.initSpringEmbedder=function(){h.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/v.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},O.prototype.layout=function(){return x.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},O.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental)m.TREE_REDUCTION_ON_INCREMENTAL&&(this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation(),I=new Set(this.getAllNodes()),A=this.nodesWithGravity.filter((function(M){return I.has(M)})),this.graphManager.setAllNodesToApplyGravitation(A));else{var L=this.getFlatForest();if(L.length>0)this.positionNodesRadially(L);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var I=new Set(this.getAllNodes()),A=this.nodesWithGravity.filter((function(M){return I.has(M)}));this.graphManager.setAllNodesToApplyGravitation(A),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(y.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),m.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},O.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%v.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var L=new Set(this.getAllNodes()),I=this.nodesWithGravity.filter((function(D){return L.has(D)}));this.graphManager.setAllNodesToApplyGravitation(I),this.graphManager.updateBounds(),this.updateGrid(),m.PURE_INCREMENTAL?this.coolingFactor=v.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=v.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),m.PURE_INCREMENTAL?this.coolingFactor=v.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=v.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var A=!this.isTreeGrowing&&!this.isGrowthFinished,M=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(A,M),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},O.prototype.getPositionsData=function(){for(var L=this.graphManager.getAllNodes(),I={},A=0;A<L.length;A++){var M=L[A].rect,D=L[A].id;I[D]={id:D,x:M.getCenterX(),y:M.getCenterY(),w:M.width,h:M.height}}return I},O.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var L=!1;if(v.ANIMATE==="during")this.emit("layoutstarted");else{for(;!L;)L=this.tick();this.graphManager.updateBounds()}},O.prototype.moveNodes=function(){for(var L=this.getAllNodes(),I=0;I<L.length;I++)L[I].calculateDisplacement();for(Object.keys(this.constraints).length>0&&this.updateDisplacements(),I=0;I<L.length;I++)L[I].move()},O.prototype.initConstraintVariables=function(){var L=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var I=this.graphManager.getAllNodes(),A=0;A<I.length;A++){var M=I[A];this.idToNodeMap.set(M.id,M)}var D=l((function H(K){for(var ie,ne=K.getChild().getNodes(),J=0,ue=0;ue<ne.length;ue++)(ie=ne[ue]).getChild()==null?L.fixedNodeSet.has(ie.id)&&(J+=100):J+=H(ie);return J}),"calculateCompoundWeight");if(this.constraints.fixedNodeConstraint){for(this.constraints.fixedNodeConstraint.forEach((function(H){L.fixedNodeSet.add(H.nodeId)})),I=this.graphManager.getAllNodes(),A=0;A<I.length;A++)if((M=I[A]).getChild()!=null){var R=D(M);R>0&&(M.fixedNodeWeight=R)}}if(this.constraints.relativePlacementConstraint){var P=new Map,$=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach((function(H){L.fixedNodesOnHorizontal.add(H),L.fixedNodesOnVertical.add(H)})),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical){var z=this.constraints.alignmentConstraint.vertical;for(A=0;A<z.length;A++)this.dummyToNodeForVerticalAlignment.set("dummy"+A,[]),z[A].forEach((function(H){P.set(H,"dummy"+A),L.dummyToNodeForVerticalAlignment.get("dummy"+A).push(H),L.fixedNodeSet.has(H)&&L.fixedNodesOnHorizontal.add("dummy"+A)}))}if(this.constraints.alignmentConstraint.horizontal){var q=this.constraints.alignmentConstraint.horizontal;for(A=0;A<q.length;A++)this.dummyToNodeForHorizontalAlignment.set("dummy"+A,[]),q[A].forEach((function(H){$.set(H,"dummy"+A),L.dummyToNodeForHorizontalAlignment.get("dummy"+A).push(H),L.fixedNodeSet.has(H)&&L.fixedNodesOnVertical.add("dummy"+A)}))}}if(m.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(H){var K,ie,ne;for(ne=H.length-1;ne>=2*H.length/3;ne--)K=Math.floor(Math.random()*(ne+1)),ie=H[ne],H[ne]=H[K],H[K]=ie;return H},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach((function(H){if(H.left){var K=P.has(H.left)?P.get(H.left):H.left,ie=P.has(H.right)?P.get(H.right):H.right;L.nodesInRelativeHorizontal.includes(K)||(L.nodesInRelativeHorizontal.push(K),L.nodeToRelativeConstraintMapHorizontal.set(K,[]),L.dummyToNodeForVerticalAlignment.has(K)?L.nodeToTempPositionMapHorizontal.set(K,L.idToNodeMap.get(L.dummyToNodeForVerticalAlignment.get(K)[0]).getCenterX()):L.nodeToTempPositionMapHorizontal.set(K,L.idToNodeMap.get(K).getCenterX())),L.nodesInRelativeHorizontal.includes(ie)||(L.nodesInRelativeHorizontal.push(ie),L.nodeToRelativeConstraintMapHorizontal.set(ie,[]),L.dummyToNodeForVerticalAlignment.has(ie)?L.nodeToTempPositionMapHorizontal.set(ie,L.idToNodeMap.get(L.dummyToNodeForVerticalAlignment.get(ie)[0]).getCenterX()):L.nodeToTempPositionMapHorizontal.set(ie,L.idToNodeMap.get(ie).getCenterX())),L.nodeToRelativeConstraintMapHorizontal.get(K).push({right:ie,gap:H.gap}),L.nodeToRelativeConstraintMapHorizontal.get(ie).push({left:K,gap:H.gap})}else{var ne=$.has(H.top)?$.get(H.top):H.top,J=$.has(H.bottom)?$.get(H.bottom):H.bottom;L.nodesInRelativeVertical.includes(ne)||(L.nodesInRelativeVertical.push(ne),L.nodeToRelativeConstraintMapVertical.set(ne,[]),L.dummyToNodeForHorizontalAlignment.has(ne)?L.nodeToTempPositionMapVertical.set(ne,L.idToNodeMap.get(L.dummyToNodeForHorizontalAlignment.get(ne)[0]).getCenterY()):L.nodeToTempPositionMapVertical.set(ne,L.idToNodeMap.get(ne).getCenterY())),L.nodesInRelativeVertical.includes(J)||(L.nodesInRelativeVertical.push(J),L.nodeToRelativeConstraintMapVertical.set(J,[]),L.dummyToNodeForHorizontalAlignment.has(J)?L.nodeToTempPositionMapVertical.set(J,L.idToNodeMap.get(L.dummyToNodeForHorizontalAlignment.get(J)[0]).getCenterY()):L.nodeToTempPositionMapVertical.set(J,L.idToNodeMap.get(J).getCenterY())),L.nodeToRelativeConstraintMapVertical.get(ne).push({bottom:J,gap:H.gap}),L.nodeToRelativeConstraintMapVertical.get(J).push({top:ne,gap:H.gap})}}));else{var W=new Map,Q=new Map;this.constraints.relativePlacementConstraint.forEach((function(H){if(H.left){var K=P.has(H.left)?P.get(H.left):H.left,ie=P.has(H.right)?P.get(H.right):H.right;W.has(K)?W.get(K).push(ie):W.set(K,[ie]),W.has(ie)?W.get(ie).push(K):W.set(ie,[K])}else{var ne=$.has(H.top)?$.get(H.top):H.top,J=$.has(H.bottom)?$.get(H.bottom):H.bottom;Q.has(ne)?Q.get(ne).push(J):Q.set(ne,[J]),Q.has(J)?Q.get(J).push(ne):Q.set(J,[ne])}}));var te=l((function(H,K){var ie=[],ne=[],J=new N,ue=new Set,Y=0;return H.forEach((function(se,de){if(!ue.has(de)){ie[Y]=[],ne[Y]=!1;var ce=de;for(J.push(ce),ue.add(ce),ie[Y].push(ce);J.length!=0;)ce=J.shift(),K.has(ce)&&(ne[Y]=!0),H.get(ce).forEach((function(Ee){ue.has(Ee)||(J.push(Ee),ue.add(Ee),ie[Y].push(Ee))}));Y++}})),{components:ie,isFixed:ne}}),"constructComponents"),oe=te(W,L.fixedNodesOnHorizontal);this.componentsOnHorizontal=oe.components,this.fixedComponentsOnHorizontal=oe.isFixed;var re=te(Q,L.fixedNodesOnVertical);this.componentsOnVertical=re.components,this.fixedComponentsOnVertical=re.isFixed}}},O.prototype.updateDisplacements=function(){var L=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach((function(re){var H=L.idToNodeMap.get(re.nodeId);H.displacementX=0,H.displacementY=0})),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var I=this.constraints.alignmentConstraint.vertical,A=0;A<I.length;A++){for(var M=0,D=0;D<I[A].length;D++){if(this.fixedNodeSet.has(I[A][D])){M=0;break}M+=this.idToNodeMap.get(I[A][D]).displacementX}var R=M/I[A].length;for(D=0;D<I[A].length;D++)this.idToNodeMap.get(I[A][D]).displacementX=R}if(this.constraints.alignmentConstraint.horizontal){var P=this.constraints.alignmentConstraint.horizontal;for(A=0;A<P.length;A++){var $=0;for(D=0;D<P[A].length;D++){if(this.fixedNodeSet.has(P[A][D])){$=0;break}$+=this.idToNodeMap.get(P[A][D]).displacementY}var z=$/P[A].length;for(D=0;D<P[A].length;D++)this.idToNodeMap.get(P[A][D]).displacementY=z}}}if(this.constraints.relativePlacementConstraint)if(m.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach((function(re){if(!L.fixedNodesOnHorizontal.has(re)){var H=0;H=L.dummyToNodeForVerticalAlignment.has(re)?L.idToNodeMap.get(L.dummyToNodeForVerticalAlignment.get(re)[0]).displacementX:L.idToNodeMap.get(re).displacementX,L.nodeToRelativeConstraintMapHorizontal.get(re).forEach((function(K){var ie;K.right?(ie=L.nodeToTempPositionMapHorizontal.get(K.right)-L.nodeToTempPositionMapHorizontal.get(re)-H)<K.gap&&(H-=K.gap-ie):(ie=L.nodeToTempPositionMapHorizontal.get(re)-L.nodeToTempPositionMapHorizontal.get(K.left)+H)<K.gap&&(H+=K.gap-ie)})),L.nodeToTempPositionMapHorizontal.set(re,L.nodeToTempPositionMapHorizontal.get(re)+H),L.dummyToNodeForVerticalAlignment.has(re)?L.dummyToNodeForVerticalAlignment.get(re).forEach((function(K){L.idToNodeMap.get(K).displacementX=H})):L.idToNodeMap.get(re).displacementX=H}})),this.nodesInRelativeVertical.forEach((function(re){if(!L.fixedNodesOnHorizontal.has(re)){var H=0;H=L.dummyToNodeForHorizontalAlignment.has(re)?L.idToNodeMap.get(L.dummyToNodeForHorizontalAlignment.get(re)[0]).displacementY:L.idToNodeMap.get(re).displacementY,L.nodeToRelativeConstraintMapVertical.get(re).forEach((function(K){var ie;K.bottom?(ie=L.nodeToTempPositionMapVertical.get(K.bottom)-L.nodeToTempPositionMapVertical.get(re)-H)<K.gap&&(H-=K.gap-ie):(ie=L.nodeToTempPositionMapVertical.get(re)-L.nodeToTempPositionMapVertical.get(K.top)+H)<K.gap&&(H+=K.gap-ie)})),L.nodeToTempPositionMapVertical.set(re,L.nodeToTempPositionMapVertical.get(re)+H),L.dummyToNodeForHorizontalAlignment.has(re)?L.dummyToNodeForHorizontalAlignment.get(re).forEach((function(K){L.idToNodeMap.get(K).displacementY=H})):L.idToNodeMap.get(re).displacementY=H}}));else{for(A=0;A<this.componentsOnHorizontal.length;A++){var q=this.componentsOnHorizontal[A];if(this.fixedComponentsOnHorizontal[A])for(D=0;D<q.length;D++)this.dummyToNodeForVerticalAlignment.has(q[D])?this.dummyToNodeForVerticalAlignment.get(q[D]).forEach((function(re){L.idToNodeMap.get(re).displacementX=0})):this.idToNodeMap.get(q[D]).displacementX=0;else{var W=0,Q=0;for(D=0;D<q.length;D++)this.dummyToNodeForVerticalAlignment.has(q[D])?(W+=(oe=this.dummyToNodeForVerticalAlignment.get(q[D])).length*this.idToNodeMap.get(oe[0]).displacementX,Q+=oe.length):(W+=this.idToNodeMap.get(q[D]).displacementX,Q++);var te=W/Q;for(D=0;D<q.length;D++)this.dummyToNodeForVerticalAlignment.has(q[D])?this.dummyToNodeForVerticalAlignment.get(q[D]).forEach((function(re){L.idToNodeMap.get(re).displacementX=te})):this.idToNodeMap.get(q[D]).displacementX=te}}for(A=0;A<this.componentsOnVertical.length;A++)if(q=this.componentsOnVertical[A],this.fixedComponentsOnVertical[A])for(D=0;D<q.length;D++)this.dummyToNodeForHorizontalAlignment.has(q[D])?this.dummyToNodeForHorizontalAlignment.get(q[D]).forEach((function(re){L.idToNodeMap.get(re).displacementY=0})):this.idToNodeMap.get(q[D]).displacementY=0;else{for(W=0,Q=0,D=0;D<q.length;D++){var oe;this.dummyToNodeForHorizontalAlignment.has(q[D])?(W+=(oe=this.dummyToNodeForHorizontalAlignment.get(q[D])).length*this.idToNodeMap.get(oe[0]).displacementY,Q+=oe.length):(W+=this.idToNodeMap.get(q[D]).displacementY,Q++)}for(te=W/Q,D=0;D<q.length;D++)this.dummyToNodeForHorizontalAlignment.has(q[D])?this.dummyToNodeForHorizontalAlignment.get(q[D]).forEach((function(re){L.idToNodeMap.get(re).displacementY=te})):this.idToNodeMap.get(q[D]).displacementY=te}}},O.prototype.calculateNodesToApplyGravitationTo=function(){var L,I,A=[],M=this.graphManager.getGraphs(),D=M.length;for(I=0;I<D;I++)(L=M[I]).updateConnected(),L.isConnected||(A=A.concat(L.getNodes()));return A},O.prototype.createBendpoints=function(){var L=[];L=L.concat(this.graphManager.getAllEdges());var I,A=new Set;for(I=0;I<L.length;I++){var M=L[I];if(!A.has(M)){var D=M.getSource(),R=M.getTarget();if(D==R)M.getBendpoints().push(new w),M.getBendpoints().push(new w),this.createDummyNodesForBendpoints(M),A.add(M);else{var P=[];if(P=(P=P.concat(D.getEdgeListToNode(R))).concat(R.getEdgeListToNode(D)),!A.has(P[0])){var $;if(P.length>1)for($=0;$<P.length;$++){var z=P[$];z.getBendpoints().push(new w),this.createDummyNodesForBendpoints(z)}P.forEach((function(q){A.add(q)}))}}}if(A.size==L.length)break}},O.prototype.positionNodesRadially=function(L){for(var I=new b(0,0),A=Math.ceil(Math.sqrt(L.length)),M=0,D=0,R=0,P=new w(0,0),$=0;$<L.length;$++){$%A==0&&(R=0,D=M,$!=0&&(D+=m.DEFAULT_COMPONENT_SEPERATION),M=0);var z=L[$],q=k.findCenterOfTree(z);I.x=R,I.y=D,(P=O.radialLayout(z,q,I)).y>M&&(M=Math.floor(P.y)),R=Math.floor(P.x+m.DEFAULT_COMPONENT_SEPERATION)}this.transform(new w(x.WORLD_CENTER_X-P.x/2,x.WORLD_CENTER_Y-P.y/2))},O.radialLayout=function(L,I,A){var M=Math.max(this.maxDiagonalInTree(L),m.DEFAULT_RADIAL_SEPARATION);O.branchRadialLayout(I,null,0,359,0,M);var D=_.calculateBounds(L),R=new S;R.setDeviceOrgX(D.getMinX()),R.setDeviceOrgY(D.getMinY()),R.setWorldOrgX(A.x),R.setWorldOrgY(A.y);for(var P=0;P<L.length;P++)L[P].transform(R);var $=new w(D.getMaxX(),D.getMaxY());return R.inverseTransformPoint($)},O.branchRadialLayout=function(L,I,A,M,D,R){var P=(M-A+1)/2;P<0&&(P+=180);var $=(P+A)%360*E.TWO_PI/360,z=D*Math.cos($),q=D*Math.sin($);L.setCenter(z,q);var W=[],Q=(W=W.concat(L.getEdges())).length;I!=null&&Q--;for(var te,oe=0,re=W.length,H=L.getEdgesBetween(I);H.length>1;){var K=H[0];H.splice(0,1);var ie=W.indexOf(K);ie>=0&&W.splice(ie,1),re--,Q--}te=I!=null?(W.indexOf(H[0])+1)%re:0;for(var ne=Math.abs(M-A)/Q,J=te;oe!=Q;J=++J%re){var ue=W[J].getOtherEnd(L);if(ue!=I){var Y=(A+oe*ne)%360,se=(Y+ne)%360;O.branchRadialLayout(ue,L,Y,se,D+R,R),oe++}}},O.maxDiagonalInTree=function(L){for(var I=C.MIN_VALUE,A=0;A<L.length;A++){var M=L[A].getDiagonal();M>I&&(I=M)}return I},O.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},O.prototype.groupZeroDegreeMembers=function(){var L=this,I={};this.memberGroups={},this.idToDummyNode={};for(var A=[],M=this.graphManager.getAllNodes(),D=0;D<M.length;D++){var R=(P=M[D]).getParent();this.getNodeDegreeWithChildren(P)!==0||R.id!=null&&this.getToBeTiled(R)||A.push(P)}for(D=0;D<A.length;D++){var P,$=(P=A[D]).getParent().id;I[$]===void 0&&(I[$]=[]),I[$]=I[$].concat(P)}Object.keys(I).forEach((function(z){if(I[z].length>1){var q="DummyCompound_"+z;L.memberGroups[q]=I[z];var W=I[z][0].getParent(),Q=new f(L.graphManager);Q.id=q,Q.paddingLeft=W.paddingLeft||0,Q.paddingRight=W.paddingRight||0,Q.paddingBottom=W.paddingBottom||0,Q.paddingTop=W.paddingTop||0,L.idToDummyNode[q]=Q;var te=L.getGraphManager().add(L.newGraph(),Q),oe=W.getChild();oe.add(Q);for(var re=0;re<I[z].length;re++){var H=I[z][re];oe.remove(H),te.add(H)}}}))},O.prototype.clearCompounds=function(){var L={},I={};this.performDFSOnCompounds();for(var A=0;A<this.compoundOrder.length;A++)I[this.compoundOrder[A].id]=this.compoundOrder[A],L[this.compoundOrder[A].id]=[].concat(this.compoundOrder[A].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[A].getChild()),this.compoundOrder[A].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(L,I)},O.prototype.clearZeroDegreeMembers=function(){var L=this,I=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach((function(A){var M=L.idToDummyNode[A];if(I[A]=L.tileNodes(L.memberGroups[A],M.paddingLeft+M.paddingRight),M.rect.width=I[A].width,M.rect.height=I[A].height,M.setCenter(I[A].centerX,I[A].centerY),M.labelMarginLeft=0,M.labelMarginTop=0,m.NODE_DIMENSIONS_INCLUDE_LABELS){var D=M.rect.width,R=M.rect.height;M.labelWidth&&(M.labelPosHorizontal=="left"?(M.rect.x-=M.labelWidth,M.setWidth(D+M.labelWidth),M.labelMarginLeft=M.labelWidth):M.labelPosHorizontal=="center"&&M.labelWidth>D?(M.rect.x-=(M.labelWidth-D)/2,M.setWidth(M.labelWidth),M.labelMarginLeft=(M.labelWidth-D)/2):M.labelPosHorizontal=="right"&&M.setWidth(D+M.labelWidth)),M.labelHeight&&(M.labelPosVertical=="top"?(M.rect.y-=M.labelHeight,M.setHeight(R+M.labelHeight),M.labelMarginTop=M.labelHeight):M.labelPosVertical=="center"&&M.labelHeight>R?(M.rect.y-=(M.labelHeight-R)/2,M.setHeight(M.labelHeight),M.labelMarginTop=(M.labelHeight-R)/2):M.labelPosVertical=="bottom"&&M.setHeight(R+M.labelHeight))}}))},O.prototype.repopulateCompounds=function(){for(var L=this.compoundOrder.length-1;L>=0;L--){var I=this.compoundOrder[L],A=I.id,M=I.paddingLeft,D=I.paddingTop,R=I.labelMarginLeft,P=I.labelMarginTop;this.adjustLocations(this.tiledMemberPack[A],I.rect.x,I.rect.y,M,D,R,P)}},O.prototype.repopulateZeroDegreeMembers=function(){var L=this,I=this.tiledZeroDegreePack;Object.keys(I).forEach((function(A){var M=L.idToDummyNode[A],D=M.paddingLeft,R=M.paddingTop,P=M.labelMarginLeft,$=M.labelMarginTop;L.adjustLocations(I[A],M.rect.x,M.rect.y,D,R,P,$)}))},O.prototype.getToBeTiled=function(L){var I=L.id;if(this.toBeTiled[I]!=null)return this.toBeTiled[I];var A=L.getChild();if(A==null)return this.toBeTiled[I]=!1,!1;for(var M=A.getNodes(),D=0;D<M.length;D++){var R=M[D];if(this.getNodeDegree(R)>0)return this.toBeTiled[I]=!1,!1;if(R.getChild()!=null){if(!this.getToBeTiled(R))return this.toBeTiled[I]=!1,!1}else this.toBeTiled[R.id]=!1}return this.toBeTiled[I]=!0,!0},O.prototype.getNodeDegree=function(L){L.id;for(var I=L.getEdges(),A=0,M=0;M<I.length;M++){var D=I[M];D.getSource().id!==D.getTarget().id&&(A+=1)}return A},O.prototype.getNodeDegreeWithChildren=function(L){var I=this.getNodeDegree(L);if(L.getChild()==null)return I;for(var A=L.getChild().getNodes(),M=0;M<A.length;M++){var D=A[M];I+=this.getNodeDegreeWithChildren(D)}return I},O.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},O.prototype.fillCompexOrderByDFS=function(L){for(var I=0;I<L.length;I++){var A=L[I];A.getChild()!=null&&this.fillCompexOrderByDFS(A.getChild().getNodes()),this.getToBeTiled(A)&&this.compoundOrder.push(A)}},O.prototype.adjustLocations=function(L,I,A,M,D,R,P){A+=D+P;for(var $=I+=M+R,z=0;z<L.rows.length;z++){var q=L.rows[z];I=$;for(var W=0,Q=0;Q<q.length;Q++){var te=q[Q];te.rect.x=I,te.rect.y=A,I+=te.rect.width+L.horizontalPadding,te.rect.height>W&&(W=te.rect.height)}A+=W+L.verticalPadding}},O.prototype.tileCompoundMembers=function(L,I){var A=this;this.tiledMemberPack=[],Object.keys(L).forEach((function(M){var D=I[M];if(A.tiledMemberPack[M]=A.tileNodes(L[M],D.paddingLeft+D.paddingRight),D.rect.width=A.tiledMemberPack[M].width,D.rect.height=A.tiledMemberPack[M].height,D.setCenter(A.tiledMemberPack[M].centerX,A.tiledMemberPack[M].centerY),D.labelMarginLeft=0,D.labelMarginTop=0,m.NODE_DIMENSIONS_INCLUDE_LABELS){var R=D.rect.width,P=D.rect.height;D.labelWidth&&(D.labelPosHorizontal=="left"?(D.rect.x-=D.labelWidth,D.setWidth(R+D.labelWidth),D.labelMarginLeft=D.labelWidth):D.labelPosHorizontal=="center"&&D.labelWidth>R?(D.rect.x-=(D.labelWidth-R)/2,D.setWidth(D.labelWidth),D.labelMarginLeft=(D.labelWidth-R)/2):D.labelPosHorizontal=="right"&&D.setWidth(R+D.labelWidth)),D.labelHeight&&(D.labelPosVertical=="top"?(D.rect.y-=D.labelHeight,D.setHeight(P+D.labelHeight),D.labelMarginTop=D.labelHeight):D.labelPosVertical=="center"&&D.labelHeight>P?(D.rect.y-=(D.labelHeight-P)/2,D.setHeight(D.labelHeight),D.labelMarginTop=(D.labelHeight-P)/2):D.labelPosVertical=="bottom"&&D.setHeight(P+D.labelHeight))}}))},O.prototype.tileNodes=function(L,I){var A=this.tileNodesByFavoringDim(L,I,!0),M=this.tileNodesByFavoringDim(L,I,!1),D=this.getOrgRatio(A);return this.getOrgRatio(M)<D?M:A},O.prototype.getOrgRatio=function(L){var I=L.width/L.height;return I<1&&(I=1/I),I},O.prototype.calcIdealRowWidth=function(L,I){var A=m.TILING_PADDING_VERTICAL,M=m.TILING_PADDING_HORIZONTAL,D=L.length,R=0,P=0,$=0;L.forEach((function(re){R+=re.getWidth(),P+=re.getHeight(),re.getWidth()>$&&($=re.getWidth())}));var z,q=R/D,W=P/D,Q=Math.pow(A-M,2)+4*(q+M)*(W+A)*D,te=(M-A+Math.sqrt(Q))/(2*(q+M));I?(z=Math.ceil(te))==te&&z++:z=Math.floor(te);var oe=z*(q+M)-M;return $>oe&&(oe=$),oe+=2*M},O.prototype.tileNodesByFavoringDim=function(L,I,A){var M=m.TILING_PADDING_VERTICAL,D=m.TILING_PADDING_HORIZONTAL,R=m.TILING_COMPARE_BY,P={rows:[],rowWidth:[],rowHeight:[],width:0,height:I,verticalPadding:M,horizontalPadding:D,centerX:0,centerY:0};R&&(P.idealRowWidth=this.calcIdealRowWidth(L,A));var $=l((function(re){return re.rect.width*re.rect.height}),"getNodeArea"),z=l((function(re,H){return $(H)-$(re)}),"areaCompareFcn");L.sort((function(re,H){var K=z;return P.idealRowWidth?(K=R)(re.id,H.id):K(re,H)}));for(var q=0,W=0,Q=0;Q<L.length;Q++)q+=(te=L[Q]).getCenterX(),W+=te.getCenterY();for(P.centerX=q/L.length,P.centerY=W/L.length,Q=0;Q<L.length;Q++){var te=L[Q];if(P.rows.length==0)this.insertNodeToRow(P,te,0,I);else if(this.canAddHorizontal(P,te.rect.width,te.rect.height)){var oe=P.rows.length-1;P.idealRowWidth||(oe=this.getShortestRowIndex(P)),this.insertNodeToRow(P,te,oe,I)}else this.insertNodeToRow(P,te,P.rows.length,I);this.shiftToLastRow(P)}return P},O.prototype.insertNodeToRow=function(L,I,A,M){var D=M;A==L.rows.length&&(L.rows.push([]),L.rowWidth.push(D),L.rowHeight.push(0));var R=L.rowWidth[A]+I.rect.width;L.rows[A].length>0&&(R+=L.horizontalPadding),L.rowWidth[A]=R,L.width<R&&(L.width=R);var P=I.rect.height;A>0&&(P+=L.verticalPadding);var $=0;P>L.rowHeight[A]&&($=L.rowHeight[A],L.rowHeight[A]=P,$=L.rowHeight[A]-$),L.height+=$,L.rows[A].push(I)},O.prototype.getShortestRowIndex=function(L){for(var I=-1,A=Number.MAX_VALUE,M=0;M<L.rows.length;M++)L.rowWidth[M]<A&&(I=M,A=L.rowWidth[M]);return I},O.prototype.getLongestRowIndex=function(L){for(var I=-1,A=Number.MIN_VALUE,M=0;M<L.rows.length;M++)L.rowWidth[M]>A&&(I=M,A=L.rowWidth[M]);return I},O.prototype.canAddHorizontal=function(L,I,A){if(L.idealRowWidth){var M=L.rows.length-1;return L.rowWidth[M]+I+L.horizontalPadding<=L.idealRowWidth}var D=this.getShortestRowIndex(L);if(D<0)return!0;var R=L.rowWidth[D];if(R+L.horizontalPadding+I<=L.width)return!0;var P,$,z=0;return L.rowHeight[D]<A&&D>0&&(z=A+L.verticalPadding-L.rowHeight[D]),P=L.width-R>=I+L.horizontalPadding?(L.height+z)/(R+I+L.horizontalPadding):(L.height+z)/L.width,z=A+L.verticalPadding,($=L.width<I?(L.height+z)/I:(L.height+z)/L.width)<1&&($=1/$),P<1&&(P=1/P),P<$},O.prototype.shiftToLastRow=function(L){var I=this.getLongestRowIndex(L),A=L.rowWidth.length-1,M=L.rows[I],D=M[M.length-1],R=D.width+L.horizontalPadding;if(L.width-L.rowWidth[A]>R&&I!=A){M.splice(-1,1),L.rows[A].push(D),L.rowWidth[I]=L.rowWidth[I]-R,L.rowWidth[A]=L.rowWidth[A]+R,L.width=L.rowWidth[instance.getLongestRowIndex(L)];for(var P=Number.MIN_VALUE,$=0;$<M.length;$++)M[$].height>P&&(P=M[$].height);I>0&&(P+=L.verticalPadding);var z=L.rowHeight[I]+L.rowHeight[A];L.rowHeight[I]=P,L.rowHeight[A]<D.height+L.verticalPadding&&(L.rowHeight[A]=D.height+L.verticalPadding);var q=L.rowHeight[I]+L.rowHeight[A];L.height+=q-z,this.shiftToLastRow(L)}},O.prototype.tilingPreLayout=function(){m.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},O.prototype.tilingPostLayout=function(){m.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},O.prototype.reduceTrees=function(){for(var L,I=[],A=!0;A;){var M=this.graphManager.getAllNodes(),D=[];A=!1;for(var R=0;R<M.length;R++)if((L=M[R]).getEdges().length==1&&!L.getEdges()[0].isInterGraph&&L.getChild()==null){if(m.PURE_INCREMENTAL){var P=L.getEdges()[0].getOtherEnd(L),$=new T(L.getCenterX()-P.getCenterX(),L.getCenterY()-P.getCenterY());D.push([L,L.getEdges()[0],L.getOwner(),$])}else D.push([L,L.getEdges()[0],L.getOwner()]);A=!0}if(A==1){for(var z=[],q=0;q<D.length;q++)D[q][0].getEdges().length==1&&(z.push(D[q]),D[q][0].getOwner().remove(D[q][0]));I.push(z),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=I},O.prototype.growTree=function(L){for(var I,A=L[L.length-1],M=0;M<A.length;M++)I=A[M],this.findPlaceforPrunedNode(I),I[2].add(I[0]),I[2].add(I[1],I[1].source,I[1].target);L.splice(L.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},O.prototype.findPlaceforPrunedNode=function(L){var I,A,M=L[0];if(A=M==L[1].source?L[1].target:L[1].source,m.PURE_INCREMENTAL)M.setCenter(A.getCenterX()+L[3].getWidth(),A.getCenterY()+L[3].getHeight());else{var D=A.startX,R=A.finishX,P=A.startY,$=A.finishY,z=[0,0,0,0];if(P>0)for(var q=D;q<=R;q++)z[0]+=this.grid[q][P-1].length+this.grid[q][P].length-1;if(R<this.grid.length-1)for(q=P;q<=$;q++)z[1]+=this.grid[R+1][q].length+this.grid[R][q].length-1;if($<this.grid[0].length-1)for(q=D;q<=R;q++)z[2]+=this.grid[q][$+1].length+this.grid[q][$].length-1;if(D>0)for(q=P;q<=$;q++)z[3]+=this.grid[D-1][q].length+this.grid[D][q].length-1;for(var W,Q,te=C.MAX_VALUE,oe=0;oe<z.length;oe++)z[oe]<te?(te=z[oe],W=1,Q=oe):z[oe]==te&&W++;if(W==3&&te==0)z[0]==0&&z[1]==0&&z[2]==0?I=1:z[0]==0&&z[1]==0&&z[3]==0?I=0:z[0]==0&&z[2]==0&&z[3]==0?I=3:z[1]==0&&z[2]==0&&z[3]==0&&(I=2);else if(W==2&&te==0){var re=Math.floor(2*Math.random());I=z[0]==0&&z[1]==0?re==0?0:1:z[0]==0&&z[2]==0?re==0?0:2:z[0]==0&&z[3]==0?re==0?0:3:z[1]==0&&z[2]==0?re==0?1:2:z[1]==0&&z[3]==0?re==0?1:3:re==0?2:3}else W==4&&te==0?I=re=Math.floor(4*Math.random()):I=Q;I==0?M.setCenter(A.getCenterX(),A.getCenterY()-A.getHeight()/2-v.DEFAULT_EDGE_LENGTH-M.getHeight()/2):I==1?M.setCenter(A.getCenterX()+A.getWidth()/2+v.DEFAULT_EDGE_LENGTH+M.getWidth()/2,A.getCenterY()):I==2?M.setCenter(A.getCenterX(),A.getCenterY()+A.getHeight()/2+v.DEFAULT_EDGE_LENGTH+M.getHeight()/2):M.setCenter(A.getCenterX()-A.getWidth()/2-v.DEFAULT_EDGE_LENGTH-M.getWidth()/2,A.getCenterY())}},s.exports=O},991:(s,o,u)=>{var h=u(551).FDLayoutNode,d=u(551).IMath;function p(g,m,y,v){h.call(this,g,m,y,v)}for(var f in l(p,"CoSENode"),p.prototype=Object.create(h.prototype),h)p[f]=h[f];p.prototype.calculateDisplacement=function(){var g=this.graphManager.getLayout();this.getChild()!=null&&this.fixedNodeWeight?(this.displacementX+=g.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=g.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=g.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=g.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>g.coolingFactor*g.maxNodeDisplacement&&(this.displacementX=g.coolingFactor*g.maxNodeDisplacement*d.sign(this.displacementX)),Math.abs(this.displacementY)>g.coolingFactor*g.maxNodeDisplacement&&(this.displacementY=g.coolingFactor*g.maxNodeDisplacement*d.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},p.prototype.propogateDisplacementToChildren=function(g,m){for(var y,v=this.getChild().getNodes(),x=0;x<v.length;x++)(y=v[x]).getChild()==null?(y.displacementX+=g,y.displacementY+=m):y.propogateDisplacementToChildren(g,m)},p.prototype.move=function(){var g=this.graphManager.getLayout();this.child!=null&&this.child.getNodes().length!=0||(this.moveBy(this.displacementX,this.displacementY),g.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},p.prototype.setPred1=function(g){this.pred1=g},p.prototype.getPred1=function(){return pred1},p.prototype.getPred2=function(){return pred2},p.prototype.setNext=function(g){this.next=g},p.prototype.getNext=function(){return next},p.prototype.setProcessed=function(g){this.processed=g},p.prototype.isProcessed=function(){return processed},s.exports=p},902:(s,o,u)=>{function h(y){if(Array.isArray(y)){for(var v=0,x=Array(y.length);v<y.length;v++)x[v]=y[v];return x}return Array.from(y)}l(h,"_toConsumableArray");var d=u(806),p=u(551).LinkedList,f=u(551).Matrix,g=u(551).SVD;function m(){}l(m,"ConstraintHandler"),m.handleConstraints=function(y){var v={};v.fixedNodeConstraint=y.constraints.fixedNodeConstraint,v.alignmentConstraint=y.constraints.alignmentConstraint,v.relativePlacementConstraint=y.constraints.relativePlacementConstraint;for(var x=new Map,b=new Map,w=[],T=[],k=y.getAllNodes(),C=0,E=0;E<k.length;E++){var _=k[E];_.getChild()==null&&(b.set(_.id,C++),w.push(_.getCenterX()),T.push(_.getCenterY()),x.set(_.id,_))}v.relativePlacementConstraint&&v.relativePlacementConstraint.forEach((function(le){le.gap||le.gap==0||(le.left?le.gap=d.DEFAULT_EDGE_LENGTH+x.get(le.left).getWidth()/2+x.get(le.right).getWidth()/2:le.gap=d.DEFAULT_EDGE_LENGTH+x.get(le.top).getHeight()/2+x.get(le.bottom).getHeight()/2)}));var S=l((function(le,V){return{x:le.x-V.x,y:le.y-V.y}}),"calculatePositionDiff"),N=l((function(le){var V=0,me=0;return le.forEach((function(he){V+=w[b.get(he)],me+=T[b.get(he)]})),{x:V/le.size,y:me/le.size}}),"calculateAvgPosition"),O=l((function(le,V,me,he,_e){function Ce(Qe,Be){var rt=new Set(Qe),lt=!0,Je=!1,_t=void 0;try{for(var it,pt=Be[Symbol.iterator]();!(lt=(it=pt.next()).done);lt=!0){var Ye=it.value;rt.add(Ye)}}catch(je){Je=!0,_t=je}finally{try{!lt&&pt.return&&pt.return()}finally{if(Je)throw _t}}return rt}l(Ce,"setUnion");var Te=new Map;le.forEach((function(Qe,Be){Te.set(Be,0)})),le.forEach((function(Qe,Be){Qe.forEach((function(rt){Te.set(rt.id,Te.get(rt.id)+1)}))}));var Re=new Map,Le=new Map,ot=new p;Te.forEach((function(Qe,Be){Qe==0?(ot.push(Be),me||(V=="horizontal"?Re.set(Be,b.has(Be)?w[b.get(Be)]:he.get(Be)):Re.set(Be,b.has(Be)?T[b.get(Be)]:he.get(Be)))):Re.set(Be,Number.NEGATIVE_INFINITY),me&&Le.set(Be,new Set([Be]))})),me&&_e.forEach((function(Qe){var Be=[];if(Qe.forEach((function(Je){me.has(Je)&&Be.push(Je)})),Be.length>0){var rt=0;Be.forEach((function(Je){V=="horizontal"?(Re.set(Je,b.has(Je)?w[b.get(Je)]:he.get(Je)),rt+=Re.get(Je)):(Re.set(Je,b.has(Je)?T[b.get(Je)]:he.get(Je)),rt+=Re.get(Je))})),rt/=Be.length,Qe.forEach((function(Je){me.has(Je)||Re.set(Je,rt)}))}else{var lt=0;Qe.forEach((function(Je){lt+=V=="horizontal"?b.has(Je)?w[b.get(Je)]:he.get(Je):b.has(Je)?T[b.get(Je)]:he.get(Je)})),lt/=Qe.length,Qe.forEach((function(Je){Re.set(Je,lt)}))}}));for(var Tt=l((function(){var Qe=ot.shift();le.get(Qe).forEach((function(Be){if(Re.get(Be.id)<Re.get(Qe)+Be.gap)if(me&&me.has(Be.id)){var rt=void 0;if(rt=V=="horizontal"?b.has(Be.id)?w[b.get(Be.id)]:he.get(Be.id):b.has(Be.id)?T[b.get(Be.id)]:he.get(Be.id),Re.set(Be.id,rt),rt<Re.get(Qe)+Be.gap){var lt=Re.get(Qe)+Be.gap-rt;Le.get(Qe).forEach((function(Je){Re.set(Je,Re.get(Je)-lt)}))}}else Re.set(Be.id,Re.get(Qe)+Be.gap);Te.set(Be.id,Te.get(Be.id)-1),Te.get(Be.id)==0&&ot.push(Be.id),me&&Le.set(Be.id,Ce(Le.get(Qe),Le.get(Be.id)))}))}),"_loop");ot.length!=0;)Tt();if(me){var Fe=new Set;le.forEach((function(Qe,Be){Qe.length==0&&Fe.add(Be)}));var gt=[];Le.forEach((function(Qe,Be){if(Fe.has(Be)){var rt=!1,lt=!0,Je=!1,_t=void 0;try{for(var it,pt=Qe[Symbol.iterator]();!(lt=(it=pt.next()).done);lt=!0){var Ye=it.value;me.has(Ye)&&(rt=!0)}}catch(at){Je=!0,_t=at}finally{try{!lt&&pt.return&&pt.return()}finally{if(Je)throw _t}}if(!rt){var je=!1,mt=void 0;gt.forEach((function(at,Et){at.has([].concat(h(Qe))[0])&&(je=!0,mt=Et)})),je?Qe.forEach((function(at){gt[mt].add(at)})):gt.push(new Set(Qe))}}})),gt.forEach((function(Qe,Be){var rt=Number.POSITIVE_INFINITY,lt=Number.POSITIVE_INFINITY,Je=Number.NEGATIVE_INFINITY,_t=Number.NEGATIVE_INFINITY,it=!0,pt=!1,Ye=void 0;try{for(var je,mt=Qe[Symbol.iterator]();!(it=(je=mt.next()).done);it=!0){var at=je.value,Et=void 0;Et=V=="horizontal"?b.has(at)?w[b.get(at)]:he.get(at):b.has(at)?T[b.get(at)]:he.get(at);var xt=Re.get(at);Et<rt&&(rt=Et),Et>Je&&(Je=Et),xt<lt&&(lt=xt),xt>_t&&(_t=xt)}}catch(xe){pt=!0,Ye=xe}finally{try{!it&&mt.return&&mt.return()}finally{if(pt)throw Ye}}var rn=(rt+Je)/2-(lt+_t)/2,wt=!0,dn=!1,gr=void 0;try{for(var Ht,nn=Qe[Symbol.iterator]();!(wt=(Ht=nn.next()).done);wt=!0){var pn=Ht.value;Re.set(pn,Re.get(pn)+rn)}}catch(xe){dn=!0,gr=xe}finally{try{!wt&&nn.return&&nn.return()}finally{if(dn)throw gr}}}))}return Re}),"findAppropriatePositionForRelativePlacement"),B=l((function(le){var V=0,me=0,he=0,_e=0;if(le.forEach((function(Le){Le.left?w[b.get(Le.left)]-w[b.get(Le.right)]>=0?V++:me++:T[b.get(Le.top)]-T[b.get(Le.bottom)]>=0?he++:_e++})),V>me&&he>_e)for(var Ce=0;Ce<b.size;Ce++)w[Ce]=-1*w[Ce],T[Ce]=-1*T[Ce];else if(V>me)for(var Te=0;Te<b.size;Te++)w[Te]=-1*w[Te];else if(he>_e)for(var Re=0;Re<b.size;Re++)T[Re]=-1*T[Re]}),"applyReflectionForRelativePlacement"),L=l((function(le){var V=[],me=new p,he=new Set,_e=0;return le.forEach((function(Ce,Te){if(!he.has(Te)){V[_e]=[];var Re=Te;for(me.push(Re),he.add(Re),V[_e].push(Re);me.length!=0;)Re=me.shift(),le.get(Re).forEach((function(Le){he.has(Le.id)||(me.push(Le.id),he.add(Le.id),V[_e].push(Le.id))}));_e++}})),V}),"findComponents"),I=l((function(le){var V=new Map;return le.forEach((function(me,he){V.set(he,[])})),le.forEach((function(me,he){me.forEach((function(_e){V.get(he).push(_e),V.get(_e.id).push({id:he,gap:_e.gap,direction:_e.direction})}))})),V}),"dagToUndirected"),A=l((function(le){var V=new Map;return le.forEach((function(me,he){V.set(he,[])})),le.forEach((function(me,he){me.forEach((function(_e){V.get(_e.id).push({id:he,gap:_e.gap,direction:_e.direction})}))})),V}),"dagToReversed"),M=[],D=[],R=!1,P=!1,$=new Set,z=new Map,q=new Map,W=[];if(v.fixedNodeConstraint&&v.fixedNodeConstraint.forEach((function(le){$.add(le.nodeId)})),v.relativePlacementConstraint&&(v.relativePlacementConstraint.forEach((function(le){le.left?(z.has(le.left)?z.get(le.left).push({id:le.right,gap:le.gap,direction:"horizontal"}):z.set(le.left,[{id:le.right,gap:le.gap,direction:"horizontal"}]),z.has(le.right)||z.set(le.right,[])):(z.has(le.top)?z.get(le.top).push({id:le.bottom,gap:le.gap,direction:"vertical"}):z.set(le.top,[{id:le.bottom,gap:le.gap,direction:"vertical"}]),z.has(le.bottom)||z.set(le.bottom,[]))})),q=I(z),W=L(q)),d.TRANSFORM_ON_CONSTRAINT_HANDLING){if(v.fixedNodeConstraint&&v.fixedNodeConstraint.length>1)v.fixedNodeConstraint.forEach((function(le,V){M[V]=[le.position.x,le.position.y],D[V]=[w[b.get(le.nodeId)],T[b.get(le.nodeId)]]})),R=!0;else if(v.alignmentConstraint)(function(){var le=0;if(v.alignmentConstraint.vertical){for(var V=v.alignmentConstraint.vertical,me=l((function(Re){var Le=new Set;V[Re].forEach((function(Fe){Le.add(Fe)}));var ot=new Set([].concat(h(Le)).filter((function(Fe){return $.has(Fe)}))),Tt=void 0;Tt=ot.size>0?w[b.get(ot.values().next().value)]:N(Le).x,V[Re].forEach((function(Fe){M[le]=[Tt,T[b.get(Fe)]],D[le]=[w[b.get(Fe)],T[b.get(Fe)]],le++}))}),"_loop2"),he=0;he<V.length;he++)me(he);R=!0}if(v.alignmentConstraint.horizontal){for(var _e=v.alignmentConstraint.horizontal,Ce=l((function(Re){var Le=new Set;_e[Re].forEach((function(Fe){Le.add(Fe)}));var ot=new Set([].concat(h(Le)).filter((function(Fe){return $.has(Fe)}))),Tt=void 0;Tt=ot.size>0?w[b.get(ot.values().next().value)]:N(Le).y,_e[Re].forEach((function(Fe){M[le]=[w[b.get(Fe)],Tt],D[le]=[w[b.get(Fe)],T[b.get(Fe)]],le++}))}),"_loop3"),Te=0;Te<_e.length;Te++)Ce(Te);R=!0}v.relativePlacementConstraint&&(P=!0)})();else if(v.relativePlacementConstraint){for(var Q=0,te=0,oe=0;oe<W.length;oe++)W[oe].length>Q&&(Q=W[oe].length,te=oe);if(Q<q.size/2)B(v.relativePlacementConstraint),R=!1,P=!1;else{var re=new Map,H=new Map,K=[];W[te].forEach((function(le){z.get(le).forEach((function(V){V.direction=="horizontal"?(re.has(le)?re.get(le).push(V):re.set(le,[V]),re.has(V.id)||re.set(V.id,[]),K.push({left:le,right:V.id})):(H.has(le)?H.get(le).push(V):H.set(le,[V]),H.has(V.id)||H.set(V.id,[]),K.push({top:le,bottom:V.id}))}))})),B(K),P=!1;var ie=O(re,"horizontal"),ne=O(H,"vertical");W[te].forEach((function(le,V){D[V]=[w[b.get(le)],T[b.get(le)]],M[V]=[],ie.has(le)?M[V][0]=ie.get(le):M[V][0]=w[b.get(le)],ne.has(le)?M[V][1]=ne.get(le):M[V][1]=T[b.get(le)]})),R=!0}}if(R){for(var J,ue=f.transpose(M),Y=f.transpose(D),se=0;se<ue.length;se++)ue[se]=f.multGamma(ue[se]),Y[se]=f.multGamma(Y[se]);var de=f.multMat(ue,f.transpose(Y)),ce=g.svd(de);J=f.multMat(ce.V,f.transpose(ce.U));for(var Ee=0;Ee<b.size;Ee++){var ve=[w[Ee],T[Ee]],De=[J[0][0],J[1][0]],Ue=[J[0][1],J[1][1]];w[Ee]=f.dotProduct(ve,De),T[Ee]=f.dotProduct(ve,Ue)}P&&B(v.relativePlacementConstraint)}}if(d.ENFORCE_CONSTRAINTS){if(v.fixedNodeConstraint&&v.fixedNodeConstraint.length>0){var ze={x:0,y:0};v.fixedNodeConstraint.forEach((function(le,V){var me={x:w[b.get(le.nodeId)],y:T[b.get(le.nodeId)]},he=le.position,_e=S(he,me);ze.x+=_e.x,ze.y+=_e.y})),ze.x/=v.fixedNodeConstraint.length,ze.y/=v.fixedNodeConstraint.length,w.forEach((function(le,V){w[V]+=ze.x})),T.forEach((function(le,V){T[V]+=ze.y})),v.fixedNodeConstraint.forEach((function(le){w[b.get(le.nodeId)]=le.position.x,T[b.get(le.nodeId)]=le.position.y}))}if(v.alignmentConstraint){if(v.alignmentConstraint.vertical)for(var Ge=v.alignmentConstraint.vertical,$e=l((function(le){var V=new Set;Ge[le].forEach((function(_e){V.add(_e)}));var me=new Set([].concat(h(V)).filter((function(_e){return $.has(_e)}))),he=void 0;he=me.size>0?w[b.get(me.values().next().value)]:N(V).x,V.forEach((function(_e){$.has(_e)||(w[b.get(_e)]=he)}))}),"_loop4"),Pe=0;Pe<Ge.length;Pe++)$e(Pe);if(v.alignmentConstraint.horizontal)for(var j=v.alignmentConstraint.horizontal,pe=l((function(le){var V=new Set;j[le].forEach((function(_e){V.add(_e)}));var me=new Set([].concat(h(V)).filter((function(_e){return $.has(_e)}))),he=void 0;he=me.size>0?T[b.get(me.values().next().value)]:N(V).y,V.forEach((function(_e){$.has(_e)||(T[b.get(_e)]=he)}))}),"_loop5"),X=0;X<j.length;X++)pe(X)}v.relativePlacementConstraint&&(function(){var le=new Map,V=new Map,me=new Map,he=new Map,_e=new Map,Ce=new Map,Te=new Set,Re=new Set;if($.forEach((function(Dt){Te.add(Dt),Re.add(Dt)})),v.alignmentConstraint){if(v.alignmentConstraint.vertical)for(var Le=v.alignmentConstraint.vertical,ot=l((function(Dt){me.set("dummy"+Dt,[]),Le[Dt].forEach((function(Kt){le.set(Kt,"dummy"+Dt),me.get("dummy"+Dt).push(Kt),$.has(Kt)&&Te.add("dummy"+Dt)})),_e.set("dummy"+Dt,w[b.get(Le[Dt][0])])}),"_loop6"),Tt=0;Tt<Le.length;Tt++)ot(Tt);if(v.alignmentConstraint.horizontal)for(var Fe=v.alignmentConstraint.horizontal,gt=l((function(Dt){he.set("dummy"+Dt,[]),Fe[Dt].forEach((function(Kt){V.set(Kt,"dummy"+Dt),he.get("dummy"+Dt).push(Kt),$.has(Kt)&&Re.add("dummy"+Dt)})),Ce.set("dummy"+Dt,T[b.get(Fe[Dt][0])])}),"_loop7"),Qe=0;Qe<Fe.length;Qe++)gt(Qe)}var Be=new Map,rt=new Map,lt=l((function(Dt){z.get(Dt).forEach((function(Kt){var dt=void 0,It=void 0;Kt.direction=="horizontal"?(dt=le.get(Dt)?le.get(Dt):Dt,It=le.get(Kt.id)?{id:le.get(Kt.id),gap:Kt.gap,direction:Kt.direction}:Kt,Be.has(dt)?Be.get(dt).push(It):Be.set(dt,[It]),Be.has(It.id)||Be.set(It.id,[])):(dt=V.get(Dt)?V.get(Dt):Dt,It=V.get(Kt.id)?{id:V.get(Kt.id),gap:Kt.gap,direction:Kt.direction}:Kt,rt.has(dt)?rt.get(dt).push(It):rt.set(dt,[It]),rt.has(It.id)||rt.set(It.id,[]))}))}),"_loop8"),Je=!0,_t=!1,it=void 0;try{for(var pt,Ye=z.keys()[Symbol.iterator]();!(Je=(pt=Ye.next()).done);Je=!0)lt(pt.value)}catch(Dt){_t=!0,it=Dt}finally{try{!Je&&Ye.return&&Ye.return()}finally{if(_t)throw it}}var je=I(Be),mt=I(rt),at=L(je),Et=L(mt),xt=A(Be),rn=A(rt),wt=[],dn=[];at.forEach((function(Dt,Kt){wt[Kt]=[],Dt.forEach((function(dt){xt.get(dt).length==0&&wt[Kt].push(dt)}))})),Et.forEach((function(Dt,Kt){dn[Kt]=[],Dt.forEach((function(dt){rn.get(dt).length==0&&dn[Kt].push(dt)}))}));var gr=O(Be,"horizontal",Te,_e,wt),Ht=O(rt,"vertical",Re,Ce,dn),nn=l((function(Dt){me.get(Dt)?me.get(Dt).forEach((function(Kt){w[b.get(Kt)]=gr.get(Dt)})):w[b.get(Dt)]=gr.get(Dt)}),"_loop9"),pn=!0,xe=!1,Ke=void 0;try{for(var Xe,Xt=gr.keys()[Symbol.iterator]();!(pn=(Xe=Xt.next()).done);pn=!0)nn(Xe.value)}catch(Dt){xe=!0,Ke=Dt}finally{try{!pn&&Xt.return&&Xt.return()}finally{if(xe)throw Ke}}var Tr=l((function(Dt){he.get(Dt)?he.get(Dt).forEach((function(Kt){T[b.get(Kt)]=Ht.get(Dt)})):T[b.get(Dt)]=Ht.get(Dt)}),"_loop10"),ir=!0,Yi=!1,Xr=void 0;try{for(var ti,fn=Ht.keys()[Symbol.iterator]();!(ir=(ti=fn.next()).done);ir=!0)Tr(ti.value)}catch(Dt){Yi=!0,Xr=Dt}finally{try{!ir&&fn.return&&fn.return()}finally{if(Yi)throw Xr}}})()}for(var ge=0;ge<k.length;ge++){var G=k[ge];G.getChild()==null&&G.setCenter(w[b.get(G.id)],T[b.get(G.id)])}},s.exports=m},551:s=>{s.exports=r}},i={};function a(s){var o=i[s];if(o!==void 0)return o.exports;var u=i[s]={exports:{}};return n[s](u,u.exports,a),u.exports}return l(a,"__webpack_require__"),a(45)})()}))}}),i9e=qn({"../../node_modules/.pnpm/cytoscape-fcose@2.2.0_cytoscape@3.31.0/node_modules/cytoscape-fcose/cytoscape-fcose.js"(t,e){l((function(r,n){typeof t=="object"&&typeof e=="object"?e.exports=n(EB()):typeof define=="function"&&define.amd?define(["cose-base"],n):typeof t=="object"?t.cytoscapeFcose=n(EB()):r.cytoscapeFcose=n(r.coseBase)}),"webpackUniversalModuleDefinition")(t,(function(r){return(()=>{var n={658:s=>{s.exports=Object.assign!=null?Object.assign.bind(Object):function(o){for(var u=arguments.length,h=Array(u>1?u-1:0),d=1;d<u;d++)h[d-1]=arguments[d];return h.forEach((function(p){Object.keys(p).forEach((function(f){return o[f]=p[f]}))})),o}},548:(s,o,u)=>{var h=(function(){function f(g,m){var y=[],v=!0,x=!1,b=void 0;try{for(var w,T=g[Symbol.iterator]();!(v=(w=T.next()).done)&&(y.push(w.value),!m||y.length!==m);v=!0);}catch(k){x=!0,b=k}finally{try{!v&&T.return&&T.return()}finally{if(x)throw b}}return y}return l(f,"sliceIterator"),function(g,m){if(Array.isArray(g))return g;if(Symbol.iterator in Object(g))return f(g,m);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),d=u(140).layoutBase.LinkedList,p={getTopMostNodes:function(f){for(var g={},m=0;m<f.length;m++)g[f[m].id()]=!0;return f.filter((function(y,v){typeof y=="number"&&(y=v);for(var x=y.parent()[0];x!=null;){if(g[x.id()])return!1;x=x.parent()[0]}return!0}))},connectComponents:function(f,g,m,y){var v=new d,x=new Set,b=[],w=void 0,T=void 0,k=void 0,C=!1,E=1,_=[],S=[],N=l((function(){var O=f.collection();S.push(O);var B=m[0],L=f.collection();L.merge(B).merge(B.descendants().intersection(g)),b.push(B),L.forEach((function(M){v.push(M),x.add(M),O.merge(M)}));for(var I=l((function(){B=v.shift();var M=f.collection();B.neighborhood().nodes().forEach((function(P){g.intersection(B.edgesWith(P)).length>0&&M.merge(P)}));for(var D=0;D<M.length;D++){var R=M[D];(w=m.intersection(R.union(R.ancestors())))!=null&&!x.has(w[0])&&w.union(w.descendants()).forEach((function(P){v.push(P),x.add(P),O.merge(P),m.has(P)&&b.push(P)}))}}),"_loop2");v.length!=0;)I();if(O.forEach((function(M){g.intersection(M.connectedEdges()).forEach((function(D){O.has(D.source())&&O.has(D.target())&&O.merge(D)}))})),b.length==m.length&&(C=!0),!C||C&&E>1){T=b[0],k=T.connectedEdges().length,b.forEach((function(M){M.connectedEdges().length<k&&(k=M.connectedEdges().length,T=M)})),_.push(T.id());var A=f.collection();A.merge(b[0]),b.forEach((function(M){A.merge(M)})),b=[],m=m.difference(A),E++}}),"_loop");do N();while(!C);return y&&_.length>0&&y.set("dummy"+(y.size+1),_),S},relocateComponent:function(f,g,m){if(!m.fixedNodeConstraint){var y=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,x=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY;if(m.quality=="draft"){var w=!0,T=!1,k=void 0;try{for(var C,E=g.nodeIndexes[Symbol.iterator]();!(w=(C=E.next()).done);w=!0){var _=C.value,S=h(_,2),N=S[0],O=S[1],B=m.cy.getElementById(N);if(B){var L=B.boundingBox(),I=g.xCoords[O]-L.w/2,A=g.xCoords[O]+L.w/2,M=g.yCoords[O]-L.h/2,D=g.yCoords[O]+L.h/2;I<y&&(y=I),A>v&&(v=A),M<x&&(x=M),D>b&&(b=D)}}}catch(q){T=!0,k=q}finally{try{!w&&E.return&&E.return()}finally{if(T)throw k}}var R=f.x-(v+y)/2,P=f.y-(b+x)/2;g.xCoords=g.xCoords.map((function(q){return q+R})),g.yCoords=g.yCoords.map((function(q){return q+P}))}else{Object.keys(g).forEach((function(q){var W=g[q],Q=W.getRect().x,te=W.getRect().x+W.getRect().width,oe=W.getRect().y,re=W.getRect().y+W.getRect().height;Q<y&&(y=Q),te>v&&(v=te),oe<x&&(x=oe),re>b&&(b=re)}));var $=f.x-(v+y)/2,z=f.y-(b+x)/2;Object.keys(g).forEach((function(q){var W=g[q];W.setCenter(W.getCenterX()+$,W.getCenterY()+z)}))}}},calcBoundingBox:function(f,g,m,y){for(var v=Number.MAX_SAFE_INTEGER,x=Number.MIN_SAFE_INTEGER,b=Number.MAX_SAFE_INTEGER,w=Number.MIN_SAFE_INTEGER,T=void 0,k=void 0,C=void 0,E=void 0,_=f.descendants().not(":parent"),S=_.length,N=0;N<S;N++){var O=_[N];v>(T=g[y.get(O.id())]-O.width()/2)&&(v=T),x<(k=g[y.get(O.id())]+O.width()/2)&&(x=k),b>(C=m[y.get(O.id())]-O.height()/2)&&(b=C),w<(E=m[y.get(O.id())]+O.height()/2)&&(w=E)}var B={};return B.topLeftX=v,B.topLeftY=b,B.width=x-v,B.height=w-b,B},calcParentsWithoutChildren:function(f,g){var m=f.collection();return g.nodes(":parent").forEach((function(y){var v=!1;y.children().forEach((function(x){x.css("display")!="none"&&(v=!0)})),v||m.merge(y)})),m}};s.exports=p},816:(s,o,u)=>{var h=u(548),d=u(140).CoSELayout,p=u(140).CoSENode,f=u(140).layoutBase.PointD,g=u(140).layoutBase.DimensionD,m=u(140).layoutBase.LayoutConstants,y=u(140).layoutBase.FDLayoutConstants,v=u(140).CoSEConstants,x=l((function(b,w){var T=b.cy,k=b.eles,C=k.nodes(),E=k.edges(),_=void 0,S=void 0,N=void 0,O={};b.randomize&&(_=w.nodeIndexes,S=w.xCoords,N=w.yCoords);var B=l((function($){return typeof $=="function"}),"isFn"),L=l((function($,z){return B($)?$(z):$}),"optFn"),I=h.calcParentsWithoutChildren(T,k),A=l((function $(z,q,W,Q){for(var te=q.length,oe=0;oe<te;oe++){var re=q[oe],H=null;re.intersection(I).length==0&&(H=re.children());var K=void 0,ie=re.layoutDimensions({nodeDimensionsIncludeLabels:Q.nodeDimensionsIncludeLabels});if(re.outerWidth()!=null&&re.outerHeight()!=null)if(Q.randomize)if(re.isParent()){var ne=h.calcBoundingBox(re,S,N,_);K=re.intersection(I).length==0?z.add(new p(W.graphManager,new f(ne.topLeftX,ne.topLeftY),new g(ne.width,ne.height))):z.add(new p(W.graphManager,new f(ne.topLeftX,ne.topLeftY),new g(parseFloat(ie.w),parseFloat(ie.h))))}else K=z.add(new p(W.graphManager,new f(S[_.get(re.id())]-ie.w/2,N[_.get(re.id())]-ie.h/2),new g(parseFloat(ie.w),parseFloat(ie.h))));else K=z.add(new p(W.graphManager,new f(re.position("x")-ie.w/2,re.position("y")-ie.h/2),new g(parseFloat(ie.w),parseFloat(ie.h))));else K=z.add(new p(this.graphManager));K.id=re.data("id"),K.nodeRepulsion=L(Q.nodeRepulsion,re),K.paddingLeft=parseInt(re.css("padding")),K.paddingTop=parseInt(re.css("padding")),K.paddingRight=parseInt(re.css("padding")),K.paddingBottom=parseInt(re.css("padding")),Q.nodeDimensionsIncludeLabels&&(K.labelWidth=re.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,K.labelHeight=re.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,K.labelPosVertical=re.css("text-valign"),K.labelPosHorizontal=re.css("text-halign")),O[re.data("id")]=K,isNaN(K.rect.x)&&(K.rect.x=0),isNaN(K.rect.y)&&(K.rect.y=0),H!=null&&H.length>0&&$(W.getGraphManager().add(W.newGraph(),K),H,W,Q)}}),"processChildrenList"),M=l((function($,z,q){for(var W=0,Q=0,te=0;te<q.length;te++){var oe=q[te],re=O[oe.data("source")],H=O[oe.data("target")];if(re&&H&&re!==H&&re.getEdgesBetween(H).length==0){var K=z.add($.newEdge(),re,H);K.id=oe.id(),K.idealLength=L(b.idealEdgeLength,oe),K.edgeElasticity=L(b.edgeElasticity,oe),W+=K.idealLength,Q++}}b.idealEdgeLength!=null&&(Q>0?v.DEFAULT_EDGE_LENGTH=y.DEFAULT_EDGE_LENGTH=W/Q:B(b.idealEdgeLength)?v.DEFAULT_EDGE_LENGTH=y.DEFAULT_EDGE_LENGTH=50:v.DEFAULT_EDGE_LENGTH=y.DEFAULT_EDGE_LENGTH=b.idealEdgeLength,v.MIN_REPULSION_DIST=y.MIN_REPULSION_DIST=y.DEFAULT_EDGE_LENGTH/10,v.DEFAULT_RADIAL_SEPARATION=y.DEFAULT_EDGE_LENGTH)}),"processEdges"),D=l((function($,z){z.fixedNodeConstraint&&($.constraints.fixedNodeConstraint=z.fixedNodeConstraint),z.alignmentConstraint&&($.constraints.alignmentConstraint=z.alignmentConstraint),z.relativePlacementConstraint&&($.constraints.relativePlacementConstraint=z.relativePlacementConstraint)}),"processConstraints");b.nestingFactor!=null&&(v.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=y.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=b.nestingFactor),b.gravity!=null&&(v.DEFAULT_GRAVITY_STRENGTH=y.DEFAULT_GRAVITY_STRENGTH=b.gravity),b.numIter!=null&&(v.MAX_ITERATIONS=y.MAX_ITERATIONS=b.numIter),b.gravityRange!=null&&(v.DEFAULT_GRAVITY_RANGE_FACTOR=y.DEFAULT_GRAVITY_RANGE_FACTOR=b.gravityRange),b.gravityCompound!=null&&(v.DEFAULT_COMPOUND_GRAVITY_STRENGTH=y.DEFAULT_COMPOUND_GRAVITY_STRENGTH=b.gravityCompound),b.gravityRangeCompound!=null&&(v.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=y.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=b.gravityRangeCompound),b.initialEnergyOnIncremental!=null&&(v.DEFAULT_COOLING_FACTOR_INCREMENTAL=y.DEFAULT_COOLING_FACTOR_INCREMENTAL=b.initialEnergyOnIncremental),b.tilingCompareBy!=null&&(v.TILING_COMPARE_BY=b.tilingCompareBy),b.quality=="proof"?m.QUALITY=2:m.QUALITY=0,v.NODE_DIMENSIONS_INCLUDE_LABELS=y.NODE_DIMENSIONS_INCLUDE_LABELS=m.NODE_DIMENSIONS_INCLUDE_LABELS=b.nodeDimensionsIncludeLabels,v.DEFAULT_INCREMENTAL=y.DEFAULT_INCREMENTAL=m.DEFAULT_INCREMENTAL=!b.randomize,v.ANIMATE=y.ANIMATE=m.ANIMATE=b.animate,v.TILE=b.tile,v.TILING_PADDING_VERTICAL=typeof b.tilingPaddingVertical=="function"?b.tilingPaddingVertical.call():b.tilingPaddingVertical,v.TILING_PADDING_HORIZONTAL=typeof b.tilingPaddingHorizontal=="function"?b.tilingPaddingHorizontal.call():b.tilingPaddingHorizontal,v.DEFAULT_INCREMENTAL=y.DEFAULT_INCREMENTAL=m.DEFAULT_INCREMENTAL=!0,v.PURE_INCREMENTAL=!b.randomize,m.DEFAULT_UNIFORM_LEAF_NODE_SIZES=b.uniformNodeDimensions,b.step=="transformed"&&(v.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,v.ENFORCE_CONSTRAINTS=!1,v.APPLY_LAYOUT=!1),b.step=="enforced"&&(v.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,v.ENFORCE_CONSTRAINTS=!0,v.APPLY_LAYOUT=!1),b.step=="cose"&&(v.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,v.ENFORCE_CONSTRAINTS=!1,v.APPLY_LAYOUT=!0),b.step=="all"&&(b.randomize?v.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:v.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,v.ENFORCE_CONSTRAINTS=!0,v.APPLY_LAYOUT=!0),b.fixedNodeConstraint||b.alignmentConstraint||b.relativePlacementConstraint?v.TREE_REDUCTION_ON_INCREMENTAL=!1:v.TREE_REDUCTION_ON_INCREMENTAL=!0;var R=new d,P=R.newGraphManager();return A(P.addRoot(),h.getTopMostNodes(C),R,b),M(R,P,E),D(R,b),R.runLayout(),O}),"coseLayout");s.exports={coseLayout:x}},212:(s,o,u)=>{var h=(function(){function x(b,w){for(var T=0;T<w.length;T++){var k=w[T];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(b,k.key,k)}}return l(x,"defineProperties"),function(b,w,T){return w&&x(b.prototype,w),T&&x(b,T),b}})();function d(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}l(d,"_classCallCheck");var p=u(658),f=u(548),g=u(657).spectralLayout,m=u(816).coseLayout,y=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:l((function(x){return 4500}),"nodeRepulsion"),idealEdgeLength:l((function(x){return 50}),"idealEdgeLength"),edgeElasticity:l((function(x){return .45}),"edgeElasticity"),nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:l((function(){}),"ready"),stop:l((function(){}),"stop")}),v=(function(){function x(b){d(this,x),this.options=p({},y,b)}return l(x,"Layout"),h(x,[{key:"run",value:l((function(){var b=this.options,w=b.cy,T=b.eles,k=[],C=[],E=void 0,_=[];!b.fixedNodeConstraint||Array.isArray(b.fixedNodeConstraint)&&b.fixedNodeConstraint.length!=0||(b.fixedNodeConstraint=void 0),b.alignmentConstraint&&(!b.alignmentConstraint.vertical||Array.isArray(b.alignmentConstraint.vertical)&&b.alignmentConstraint.vertical.length!=0||(b.alignmentConstraint.vertical=void 0),!b.alignmentConstraint.horizontal||Array.isArray(b.alignmentConstraint.horizontal)&&b.alignmentConstraint.horizontal.length!=0||(b.alignmentConstraint.horizontal=void 0)),!b.relativePlacementConstraint||Array.isArray(b.relativePlacementConstraint)&&b.relativePlacementConstraint.length!=0||(b.relativePlacementConstraint=void 0),(b.fixedNodeConstraint||b.alignmentConstraint||b.relativePlacementConstraint)&&(b.tile=!1,b.packComponents=!1);var S=void 0,N=!1;if(w.layoutUtilities&&b.packComponents&&((S=w.layoutUtilities("get"))||(S=w.layoutUtilities()),N=!0),T.nodes().length>0)if(N){var O=f.getTopMostNodes(b.eles.nodes());if((E=f.connectComponents(w,b.eles,O)).forEach((function(H){var K=H.boundingBox();_.push({x:K.x1+K.w/2,y:K.y1+K.h/2})})),b.randomize&&E.forEach((function(H){b.eles=H,k.push(g(b))})),b.quality=="default"||b.quality=="proof"){var B=w.collection();if(b.tile){var L=0,I={nodeIndexes:new Map,xCoords:[],yCoords:[]},A=[];if(E.forEach((function(H,K){H.edges().length==0&&(H.nodes().forEach((function(ie,ne){B.merge(H.nodes()[ne]),ie.isParent()||(I.nodeIndexes.set(H.nodes()[ne].id(),L++),I.xCoords.push(H.nodes()[0].position().x),I.yCoords.push(H.nodes()[0].position().y))})),A.push(K))})),B.length>1){var M=B.boundingBox();_.push({x:M.x1+M.w/2,y:M.y1+M.h/2}),E.push(B),k.push(I);for(var D=A.length-1;D>=0;D--)E.splice(A[D],1),k.splice(A[D],1),_.splice(A[D],1)}}E.forEach((function(H,K){b.eles=H,C.push(m(b,k[K])),f.relocateComponent(_[K],C[K],b)}))}else E.forEach((function(H,K){f.relocateComponent(_[K],k[K],b)}));var R=new Set;if(E.length>1){var P=[],$=T.filter((function(H){return H.css("display")=="none"}));E.forEach((function(H,K){var ie=void 0;if(b.quality=="draft"&&(ie=k[K].nodeIndexes),H.nodes().not($).length>0){var ne={edges:[],nodes:[]},J=void 0;H.nodes().not($).forEach((function(ue){if(b.quality=="draft")if(ue.isParent()){var Y=f.calcBoundingBox(ue,k[K].xCoords,k[K].yCoords,ie);ne.nodes.push({x:Y.topLeftX,y:Y.topLeftY,width:Y.width,height:Y.height})}else J=ie.get(ue.id()),ne.nodes.push({x:k[K].xCoords[J]-ue.boundingbox().w/2,y:k[K].yCoords[J]-ue.boundingbox().h/2,width:ue.boundingbox().w,height:ue.boundingbox().h});else C[K][ue.id()]&&ne.nodes.push({x:C[K][ue.id()].getLeft(),y:C[K][ue.id()].getTop(),width:C[K][ue.id()].getWidth(),height:C[K][ue.id()].getHeight()})})),H.edges().forEach((function(ue){var Y=ue.source(),se=ue.target();if(Y.css("display")!="none"&&se.css("display")!="none")if(b.quality=="draft"){var de=ie.get(Y.id()),ce=ie.get(se.id()),Ee=[],ve=[];if(Y.isParent()){var De=f.calcBoundingBox(Y,k[K].xCoords,k[K].yCoords,ie);Ee.push(De.topLeftX+De.width/2),Ee.push(De.topLeftY+De.height/2)}else Ee.push(k[K].xCoords[de]),Ee.push(k[K].yCoords[de]);if(se.isParent()){var Ue=f.calcBoundingBox(se,k[K].xCoords,k[K].yCoords,ie);ve.push(Ue.topLeftX+Ue.width/2),ve.push(Ue.topLeftY+Ue.height/2)}else ve.push(k[K].xCoords[ce]),ve.push(k[K].yCoords[ce]);ne.edges.push({startX:Ee[0],startY:Ee[1],endX:ve[0],endY:ve[1]})}else C[K][Y.id()]&&C[K][se.id()]&&ne.edges.push({startX:C[K][Y.id()].getCenterX(),startY:C[K][Y.id()].getCenterY(),endX:C[K][se.id()].getCenterX(),endY:C[K][se.id()].getCenterY()})})),ne.nodes.length>0&&(P.push(ne),R.add(K))}}));var z=S.packComponents(P,b.randomize).shifts;if(b.quality=="draft")k.forEach((function(H,K){var ie=H.xCoords.map((function(J){return J+z[K].dx})),ne=H.yCoords.map((function(J){return J+z[K].dy}));H.xCoords=ie,H.yCoords=ne}));else{var q=0;R.forEach((function(H){Object.keys(C[H]).forEach((function(K){var ie=C[H][K];ie.setCenter(ie.getCenterX()+z[q].dx,ie.getCenterY()+z[q].dy)})),q++}))}}}else{var W=b.eles.boundingBox();if(_.push({x:W.x1+W.w/2,y:W.y1+W.h/2}),b.randomize){var Q=g(b);k.push(Q)}b.quality=="default"||b.quality=="proof"?(C.push(m(b,k[0])),f.relocateComponent(_[0],C[0],b)):f.relocateComponent(_[0],k[0],b)}var te=l((function(H,K){if(b.quality=="default"||b.quality=="proof"){typeof H=="number"&&(H=K);var ie=void 0,ne=void 0,J=H.data("id");return C.forEach((function(Y){J in Y&&(ie={x:Y[J].getRect().getCenterX(),y:Y[J].getRect().getCenterY()},ne=Y[J])})),b.nodeDimensionsIncludeLabels&&(ne.labelWidth&&(ne.labelPosHorizontal=="left"?ie.x+=ne.labelWidth/2:ne.labelPosHorizontal=="right"&&(ie.x-=ne.labelWidth/2)),ne.labelHeight&&(ne.labelPosVertical=="top"?ie.y+=ne.labelHeight/2:ne.labelPosVertical=="bottom"&&(ie.y-=ne.labelHeight/2))),ie==null&&(ie={x:H.position("x"),y:H.position("y")}),{x:ie.x,y:ie.y}}var ue=void 0;return k.forEach((function(Y){var se=Y.nodeIndexes.get(H.id());se!=null&&(ue={x:Y.xCoords[se],y:Y.yCoords[se]})})),ue==null&&(ue={x:H.position("x"),y:H.position("y")}),{x:ue.x,y:ue.y}}),"getPositions");if(b.quality=="default"||b.quality=="proof"||b.randomize){var oe=f.calcParentsWithoutChildren(w,T),re=T.filter((function(H){return H.css("display")=="none"}));b.eles=T.not(re),T.nodes().not(":parent").not(re).layoutPositions(this,b,te),oe.length>0&&oe.forEach((function(H){H.position(te(H))}))}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}),"run")}]),x})();s.exports=v},657:(s,o,u)=>{var h=u(548),d=u(140).layoutBase.Matrix,p=u(140).layoutBase.SVD,f=l((function(g){var m=g.cy,y=g.eles,v=y.nodes(),x=y.nodes(":parent"),b=new Map,w=new Map,T=new Map,k=[],C=[],E=[],_=[],S=[],N=[],O=[],B=[],L=void 0,I=1e8,A=1e-9,M=g.piTol,D=g.samplingType,R=g.nodeSeparation,P=void 0,$=l((function(){for(var X=0,ge=0,G=!1;ge<P;){X=Math.floor(Math.random()*L),G=!1;for(var le=0;le<ge;le++)if(_[le]==X){G=!0;break}G||(_[ge]=X,ge++)}}),"randomSampleCR"),z=l((function(X,ge,G){for(var le=[],V=0,me=0,he=0,_e=void 0,Ce=[],Te=0,Re=1,Le=0;Le<L;Le++)Ce[Le]=I;for(le[me]=X,Ce[X]=0;me>=V;){he=le[V++];for(var ot=k[he],Tt=0;Tt<ot.length;Tt++)Ce[_e=w.get(ot[Tt])]==I&&(Ce[_e]=Ce[he]+1,le[++me]=_e);N[he][ge]=Ce[he]*R}if(G){for(var Fe=0;Fe<L;Fe++)N[Fe][ge]<S[Fe]&&(S[Fe]=N[Fe][ge]);for(var gt=0;gt<L;gt++)S[gt]>Te&&(Te=S[gt],Re=gt)}return Re}),"BFS"),q=l((function(X){var ge=void 0;if(X){ge=Math.floor(Math.random()*L);for(var G=0;G<L;G++)S[G]=I;for(var le=0;le<P;le++)_[le]=ge,ge=z(ge,le,X)}else{$();for(var V=0;V<P;V++)z(_[V],V,X,!1)}for(var me=0;me<L;me++)for(var he=0;he<P;he++)N[me][he]*=N[me][he];for(var _e=0;_e<P;_e++)O[_e]=[];for(var Ce=0;Ce<P;Ce++)for(var Te=0;Te<P;Te++)O[Ce][Te]=N[_[Te]][Ce]}),"allBFS"),W=l((function(){for(var X=p.svd(O),ge=X.S,G=X.U,le=X.V,V=ge[0]*ge[0]*ge[0],me=[],he=0;he<P;he++){me[he]=[];for(var _e=0;_e<P;_e++)me[he][_e]=0,he==_e&&(me[he][_e]=ge[he]/(ge[he]*ge[he]+V/(ge[he]*ge[he])))}B=d.multMat(d.multMat(le,me),d.transpose(G))}),"sample"),Q=l((function(){for(var X=void 0,ge=void 0,G=[],le=[],V=[],me=[],he=0;he<L;he++)G[he]=Math.random(),le[he]=Math.random();G=d.normalize(G),le=d.normalize(le);for(var _e=A,Ce=A,Te=void 0;;){for(var Re=0;Re<L;Re++)V[Re]=G[Re];if(G=d.multGamma(d.multL(d.multGamma(V),N,B)),X=d.dotProduct(V,G),G=d.normalize(G),_e=d.dotProduct(V,G),(Te=Math.abs(_e/Ce))<=1+M&&Te>=1)break;Ce=_e}for(var Le=0;Le<L;Le++)V[Le]=G[Le];for(Ce=A;;){for(var ot=0;ot<L;ot++)me[ot]=le[ot];if(me=d.minusOp(me,d.multCons(V,d.dotProduct(V,me))),le=d.multGamma(d.multL(d.multGamma(me),N,B)),ge=d.dotProduct(me,le),le=d.normalize(le),_e=d.dotProduct(me,le),(Te=Math.abs(_e/Ce))<=1+M&&Te>=1)break;Ce=_e}for(var Tt=0;Tt<L;Tt++)me[Tt]=le[Tt];C=d.multCons(V,Math.sqrt(Math.abs(X))),E=d.multCons(me,Math.sqrt(Math.abs(ge)))}),"powerIteration");h.connectComponents(m,y,h.getTopMostNodes(v),b),x.forEach((function(X){h.connectComponents(m,y,h.getTopMostNodes(X.descendants().intersection(y)),b)}));for(var te=0,oe=0;oe<v.length;oe++)v[oe].isParent()||w.set(v[oe].id(),te++);var re=!0,H=!1,K=void 0;try{for(var ie,ne=b.keys()[Symbol.iterator]();!(re=(ie=ne.next()).done);re=!0){var J=ie.value;w.set(J,te++)}}catch(X){H=!0,K=X}finally{try{!re&&ne.return&&ne.return()}finally{if(H)throw K}}for(var ue=0;ue<w.size;ue++)k[ue]=[];x.forEach((function(X){for(var ge=X.children().intersection(y);ge.nodes(":childless").length==0;)ge=ge.nodes()[0].children().intersection(y);var G=0,le=ge.nodes(":childless")[0].connectedEdges().length;ge.nodes(":childless").forEach((function(V,me){V.connectedEdges().length<le&&(le=V.connectedEdges().length,G=me)})),T.set(X.id(),ge.nodes(":childless")[G].id())})),v.forEach((function(X){var ge=void 0;ge=X.isParent()?w.get(T.get(X.id())):w.get(X.id()),X.neighborhood().nodes().forEach((function(G){y.intersection(X.edgesWith(G)).length>0&&(G.isParent()?k[ge].push(T.get(G.id())):k[ge].push(G.id()))}))}));var Y=l((function(X){var ge=w.get(X),G=void 0;b.get(X).forEach((function(le){G=m.getElementById(le).isParent()?T.get(le):le,k[ge].push(G),k[w.get(G)].push(X)}))}),"_loop"),se=!0,de=!1,ce=void 0;try{for(var Ee,ve=b.keys()[Symbol.iterator]();!(se=(Ee=ve.next()).done);se=!0)Y(Ee.value)}catch(X){de=!0,ce=X}finally{try{!se&&ve.return&&ve.return()}finally{if(de)throw ce}}var De=void 0;if((L=w.size)>2){P=L<g.sampleSize?L:g.sampleSize;for(var Ue=0;Ue<L;Ue++)N[Ue]=[];for(var ze=0;ze<P;ze++)B[ze]=[];return g.quality=="draft"||g.step=="all"?(q(D),W(),Q(),De={nodeIndexes:w,xCoords:C,yCoords:E}):(w.forEach((function(X,ge){C.push(m.getElementById(ge).position("x")),E.push(m.getElementById(ge).position("y"))})),De={nodeIndexes:w,xCoords:C,yCoords:E}),De}var Ge=w.keys(),$e=m.getElementById(Ge.next().value),Pe=$e.position(),j=$e.outerWidth();if(C.push(Pe.x),E.push(Pe.y),L==2){var pe=m.getElementById(Ge.next().value).outerWidth();C.push(Pe.x+j/2+pe/2+g.idealEdgeLength),E.push(Pe.y)}return De={nodeIndexes:w,xCoords:C,yCoords:E}}),"spectralLayout");s.exports={spectralLayout:f}},579:(s,o,u)=>{var h=u(212),d=l((function(p){p&&p("layout","fcose",h)}),"register");typeof cytoscape<"u"&&d(cytoscape),s.exports=d},140:s=>{s.exports=r}},i={};function a(s){var o=i[s];if(o!==void 0)return o.exports;var u=i[s]={exports:{}};return n[s](u,u.exports,a),u.exports}return l(a,"__webpack_require__"),a(579)})()}))}}),_B={L:"left",R:"right",T:"top",B:"bottom"},CB={L:l((t=>`${t},${t/2} 0,${t} 0,0`),"L"),R:l((t=>`0,${t/2} ${t},0 ${t},${t}`),"R"),T:l((t=>`0,0 ${t},0 ${t/2},${t}`),"T"),B:l((t=>`${t/2},0 ${t},${t} 0,${t}`),"B")},lb={L:l(((t,e)=>t-e+2),"L"),R:l(((t,e)=>t-2),"R"),T:l(((t,e)=>t-e+2),"T"),B:l(((t,e)=>t-2),"B")},a9e=l((function(t){return Mi(t)?t==="L"?"R":"L":t==="T"?"B":"T"}),"getOppositeArchitectureDirection"),SB=l((function(t){return t==="L"||t==="R"||t==="T"||t==="B"}),"isArchitectureDirection"),Mi=l((function(t){return t==="L"||t==="R"}),"isArchitectureDirectionX"),uc=l((function(t){return t==="T"||t==="B"}),"isArchitectureDirectionY"),bI=l((function(t,e){const r=Mi(t)&&uc(e),n=uc(t)&&Mi(e);return r||n}),"isArchitectureDirectionXY"),s9e=l((function(t){const e=t[0],r=t[1],n=Mi(e)&&uc(r),i=uc(e)&&Mi(r);return n||i}),"isArchitecturePairXY"),o9e=l((function(t){return t!=="LL"&&t!=="RR"&&t!=="TT"&&t!=="BB"}),"isValidArchitectureDirectionPair"),p8=l((function(t,e){const r=`${t}${e}`;return o9e(r)?r:void 0}),"getArchitectureDirectionPair"),l9e=l((function([t,e],r){const n=r[0],i=r[1];return Mi(n)?uc(i)?[t+(n==="L"?-1:1),e+(i==="T"?1:-1)]:[t+(n==="L"?-1:1),e]:Mi(i)?[t+(i==="L"?1:-1),e+(n==="T"?1:-1)]:[t,e+(n==="T"?1:-1)]}),"shiftPositionByArchitectureDirectionPair"),c9e=l((function(t){return t==="LT"||t==="TL"?[1,1]:t==="BL"||t==="LB"?[1,-1]:t==="BR"||t==="RB"?[-1,-1]:[-1,1]}),"getArchitectureDirectionXYFactors"),u9e=l((function(t,e){return bI(t,e)?"bend":Mi(t)?"horizontal":"vertical"}),"getArchitectureDirectionAlignment"),h9e=l((function(t){return t.type==="service"}),"isArchitectureService"),d9e=l((function(t){return t.type==="junction"}),"isArchitectureJunction"),Ple=l((t=>t.data()),"edgeData"),jd=l((t=>t.data()),"nodeData"),Ble=or.architecture,Zt=new XA((()=>({nodes:{},groups:{},edges:[],registeredIds:{},config:Ble,dataStructures:void 0,elements:{}}))),p9e=l((()=>{Zt.reset(),jn()}),"clear"),f9e=l((function({id:t,icon:e,in:r,title:n,iconText:i}){if(Zt.records.registeredIds[t]!==void 0)throw new Error(`The service id [${t}] is already in use by another ${Zt.records.registeredIds[t]}`);if(r!==void 0){if(t===r)throw new Error(`The service [${t}] cannot be placed within itself`);if(Zt.records.registeredIds[r]===void 0)throw new Error(`The service [${t}]'s parent does not exist. Please make sure the parent is created before this service`);if(Zt.records.registeredIds[r]==="node")throw new Error(`The service [${t}]'s parent is not a group`)}Zt.records.registeredIds[t]="node",Zt.records.nodes[t]={id:t,type:"service",icon:e,iconText:i,title:n,edges:[],in:r}}),"addService"),g9e=l((()=>Object.values(Zt.records.nodes).filter(h9e)),"getServices"),m9e=l((function({id:t,in:e}){Zt.records.registeredIds[t]="node",Zt.records.nodes[t]={id:t,type:"junction",edges:[],in:e}}),"addJunction"),y9e=l((()=>Object.values(Zt.records.nodes).filter(d9e)),"getJunctions"),v9e=l((()=>Object.values(Zt.records.nodes)),"getNodes"),f8=l((t=>Zt.records.nodes[t]),"getNode"),x9e=l((function({id:t,icon:e,in:r,title:n}){if(Zt.records.registeredIds[t]!==void 0)throw new Error(`The group id [${t}] is already in use by another ${Zt.records.registeredIds[t]}`);if(r!==void 0){if(t===r)throw new Error(`The group [${t}] cannot be placed within itself`);if(Zt.records.registeredIds[r]===void 0)throw new Error(`The group [${t}]'s parent does not exist. Please make sure the parent is created before this group`);if(Zt.records.registeredIds[r]==="node")throw new Error(`The group [${t}]'s parent is not a group`)}Zt.records.registeredIds[t]="group",Zt.records.groups[t]={id:t,icon:e,title:n,in:r}}),"addGroup"),b9e=l((()=>Object.values(Zt.records.groups)),"getGroups"),w9e=l((function({lhsId:t,rhsId:e,lhsDir:r,rhsDir:n,lhsInto:i,rhsInto:a,lhsGroup:s,rhsGroup:o,title:u}){if(!SB(r))throw new Error(`Invalid direction given for left hand side of edge ${t}--${e}. Expected (L,R,T,B) got ${r}`);if(!SB(n))throw new Error(`Invalid direction given for right hand side of edge ${t}--${e}. Expected (L,R,T,B) got ${n}`);if(Zt.records.nodes[t]===void 0&&Zt.records.groups[t]===void 0)throw new Error(`The left-hand id [${t}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(Zt.records.nodes[e]===void 0&&Zt.records.groups[t]===void 0)throw new Error(`The right-hand id [${e}] does not yet exist. Please create the service/group before declaring an edge to it.`);const h=Zt.records.nodes[t].in,d=Zt.records.nodes[e].in;if(s&&h&&d&&h==d)throw new Error(`The left-hand id [${t}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if(o&&h&&d&&h==d)throw new Error(`The right-hand id [${e}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);const p={lhsId:t,lhsDir:r,lhsInto:i,lhsGroup:s,rhsId:e,rhsDir:n,rhsInto:a,rhsGroup:o,title:u};Zt.records.edges.push(p),Zt.records.nodes[t]&&Zt.records.nodes[e]&&(Zt.records.nodes[t].edges.push(Zt.records.edges[Zt.records.edges.length-1]),Zt.records.nodes[e].edges.push(Zt.records.edges[Zt.records.edges.length-1]))}),"addEdge"),k9e=l((()=>Zt.records.edges),"getEdges"),T9e=l((()=>{if(Zt.records.dataStructures===void 0){const t={},e=Object.entries(Zt.records.nodes).reduce(((o,[u,h])=>(o[u]=h.edges.reduce(((d,p)=>{const f=f8(p.lhsId)?.in,g=f8(p.rhsId)?.in;if(f&&g&&f!==g){const m=u9e(p.lhsDir,p.rhsDir);m!=="bend"&&(t[f]??={},t[f][g]=m,t[g]??={},t[g][f]=m)}if(p.lhsId===u){const m=p8(p.lhsDir,p.rhsDir);m&&(d[m]=p.rhsId)}else{const m=p8(p.rhsDir,p.lhsDir);m&&(d[m]=p.lhsId)}return d}),{}),o)),{}),r=Object.keys(e)[0],n={[r]:1},i=Object.keys(e).reduce(((o,u)=>u===r?o:{...o,[u]:1}),{}),a=l((o=>{const u={[o]:[0,0]},h=[o];for(;h.length>0;){const d=h.shift();if(d){n[d]=1,delete i[d];const p=e[d],[f,g]=u[d];Object.entries(p).forEach((([m,y])=>{n[y]||(u[y]=l9e([f,g],m),h.push(y))}))}}return u}),"BFS"),s=[a(r)];for(;Object.keys(i).length>0;)s.push(a(Object.keys(i)[0]));Zt.records.dataStructures={adjList:e,spatialMaps:s,groupAlignments:t}}return Zt.records.dataStructures}),"getDataStructures"),E9e=l(((t,e)=>{Zt.records.elements[t]=e}),"setElementForId"),_9e=l((t=>Zt.records.elements[t]),"getElementById"),x6={clear:p9e,setDiagramTitle:di,getDiagramTitle:Wn,setAccTitle:zn,getAccTitle:Xn,setAccDescription:Kn,getAccDescription:Zn,addService:f9e,getServices:g9e,addJunction:m9e,getJunctions:y9e,getNodes:v9e,getNode:f8,addGroup:x9e,getGroups:b9e,addEdge:w9e,getEdges:k9e,setElementForId:E9e,getElementById:_9e,getDataStructures:T9e};function $n(t){const e=ke().architecture;return e?.[t]?e[t]:Ble[t]}l($n,"getConfigField");var C9e=l(((t,e)=>{pm(t,e),t.groups.map(e.addGroup),t.services.map((r=>e.addService({...r,type:"service"}))),t.junctions.map((r=>e.addJunction({...r,type:"junction"}))),t.edges.map(e.addEdge)}),"populateDb"),S9e={parse:l((async t=>{const e=await sc("architecture",t);ee.debug(e),C9e(e,x6)}),"parse")},A9e=l((t=>`
  .edge {
    stroke-width: ${t.archEdgeWidth};
    stroke: ${t.archEdgeColor};
    fill: none;
  }

  .arrow {
    fill: ${t.archEdgeArrowColor};
  }

  .node-bkg {
    fill: none;
    stroke: ${t.archGroupBorderColor};
    stroke-width: ${t.archGroupBorderWidth};
    stroke-dasharray: 8;
  }
  .node-icon-text {
    display: flex; 
    align-items: center;
  }
  
  .node-icon-text > div {
    color: #fff;
    margin: 1px;
    height: fit-content;
    text-align: center;
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
  }
`),"getStyles"),L9e=Ci(i9e()),Ih=l((t=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${t}</g>`),"wrapIcon"),uv={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:Ih('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:Ih('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:Ih('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:Ih('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:Ih('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:Zj,blank:{body:Ih("")}}},N9e=l((async function(t,e){const r=$n("padding"),n=$n("iconSize"),i=n/2,a=n/6,s=a/2;await Promise.all(e.edges().map((async o=>{const{source:u,sourceDir:h,sourceArrow:d,sourceGroup:p,target:f,targetDir:g,targetArrow:m,targetGroup:y,label:v}=Ple(o);let{x,y:b}=o[0].sourceEndpoint();const{x:w,y:T}=o[0].midpoint();let{x:k,y:C}=o[0].targetEndpoint();const E=r+4;if(p&&(Mi(h)?x+=h==="L"?-E:E:b+=h==="T"?-E:E+18),y&&(Mi(g)?k+=g==="L"?-E:E:C+=g==="T"?-E:E+18),p||x6.getNode(u)?.type!=="junction"||(Mi(h)?x+=h==="L"?i:-i:b+=h==="T"?i:-i),y||x6.getNode(f)?.type!=="junction"||(Mi(g)?k+=g==="L"?i:-i:C+=g==="T"?i:-i),o[0]._private.rscratch){const _=t.insert("g");if(_.insert("path").attr("d",`M ${x},${b} L ${w},${T} L${k},${C} `).attr("class","edge"),d){const S=Mi(h)?lb[h](x,a):x-s,N=uc(h)?lb[h](b,a):b-s;_.insert("polygon").attr("points",CB[h](a)).attr("transform",`translate(${S},${N})`).attr("class","arrow")}if(m){const S=Mi(g)?lb[g](k,a):k-s,N=uc(g)?lb[g](C,a):C-s;_.insert("polygon").attr("points",CB[g](a)).attr("transform",`translate(${S},${N})`).attr("class","arrow")}if(v){const S=bI(h,g)?"XY":Mi(h)?"X":"Y";let N=0;N=S==="X"?Math.abs(x-k):S==="Y"?Math.abs(b-C)/1.5:Math.abs(x-k)/2;const O=_.append("g");if(await pa(O,v,{useHtmlLabels:!1,width:N,classes:"architecture-service-label"},ke()),O.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),S==="X")O.attr("transform","translate("+w+", "+T+")");else if(S==="Y")O.attr("transform","translate("+w+", "+T+") rotate(-90)");else if(S==="XY"){const B=p8(h,g);if(B&&s9e(B)){const L=O.node().getBoundingClientRect(),[I,A]=c9e(B);O.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*I*A*45})`);const M=O.node().getBoundingClientRect();O.attr("transform",`
                translate(${w}, ${T-L.height/2})
                translate(${I*M.width/2}, ${A*M.height/2})
                rotate(${-1*I*A*45}, 0, ${L.height/2})
              `)}}}}})))}),"drawEdges"),I9e=l((async function(t,e){const r=.75*$n("padding"),n=$n("fontSize"),i=$n("iconSize")/2;await Promise.all(e.nodes().map((async a=>{const s=jd(a);if(s.type==="group"){const{h:o,w:u,x1:h,y1:d}=a.boundingBox();t.append("rect").attr("x",h+i).attr("y",d+i).attr("width",u).attr("height",o).attr("class","node-bkg");const p=t.append("g");let f=h,g=d;if(s.icon){const m=p.append("g");m.html(`<g>${await Wu(s.icon,{height:r,width:r,fallbackPrefix:uv.prefix})}</g>`),m.attr("transform","translate("+(f+i+1)+", "+(g+i+1)+")"),f+=r,g+=n/2-1-2}if(s.label){const m=p.append("g");await pa(m,s.label,{useHtmlLabels:!1,width:u,classes:"architecture-service-label"},ke()),m.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),m.attr("transform","translate("+(f+i+4)+", "+(g+i+2)+")")}}})))}),"drawGroups"),R9e=l((async function(t,e,r){for(const n of r){const i=e.append("g"),a=$n("iconSize");if(n.title){const h=i.append("g");await pa(h,n.title,{useHtmlLabels:!1,width:1.5*a,classes:"architecture-service-label"},ke()),h.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),h.attr("transform","translate("+a/2+", "+a+")")}const s=i.append("g");if(n.icon)s.html(`<g>${await Wu(n.icon,{height:a,width:a,fallbackPrefix:uv.prefix})}</g>`);else if(n.iconText){s.html(`<g>${await Wu("blank",{height:a,width:a,fallbackPrefix:uv.prefix})}</g>`);const h=s.append("g").append("foreignObject").attr("width",a).attr("height",a).append("div").attr("class","node-icon-text").attr("style",`height: ${a}px;`).append("div").html(n.iconText),d=parseInt(window.getComputedStyle(h.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;h.attr("style",`-webkit-line-clamp: ${Math.floor((a-2)/d)};`)}else s.append("path").attr("class","node-bkg").attr("id","node-"+n.id).attr("d",`M0 ${a} v${-a} q0,-5 5,-5 h${a} q5,0 5,5 v${a} H0 Z`);i.attr("class","architecture-service");const{width:o,height:u}=i._groups[0][0].getBBox();n.width=o,n.height=u,t.setElementForId(n.id,i)}return 0}),"drawServices"),M9e=l((function(t,e,r){r.forEach((n=>{const i=e.append("g"),a=$n("iconSize");i.append("g").append("rect").attr("id","node-"+n.id).attr("fill-opacity","0").attr("width",a).attr("height",a),i.attr("class","architecture-junction");const{width:s,height:o}=i._groups[0][0].getBBox();i.width=s,i.height=o,t.setElementForId(n.id,i)}))}),"drawJunctions");function $le(t,e){t.forEach((r=>{e.add({group:"nodes",data:{type:"service",id:r.id,icon:r.icon,label:r.title,parent:r.in,width:$n("iconSize"),height:$n("iconSize")},classes:"node-service"})}))}function Fle(t,e){t.forEach((r=>{e.add({group:"nodes",data:{type:"junction",id:r.id,parent:r.in,width:$n("iconSize"),height:$n("iconSize")},classes:"node-junction"})}))}function zle(t,e){e.nodes().map((r=>{const n=jd(r);n.type!=="group"&&(n.x=r.position().x,n.y=r.position().y,t.getElementById(n.id).attr("transform","translate("+(n.x||0)+","+(n.y||0)+")"))}))}function Gle(t,e){t.forEach((r=>{e.add({group:"nodes",data:{type:"group",id:r.id,icon:r.icon,label:r.title,parent:r.in},classes:"node-group"})}))}function Ule(t,e){t.forEach((r=>{const{lhsId:n,rhsId:i,lhsInto:a,lhsGroup:s,rhsInto:o,lhsDir:u,rhsDir:h,rhsGroup:d,title:p}=r,f=bI(r.lhsDir,r.rhsDir)?"segments":"straight",g={id:`${n}-${i}`,label:p,source:n,sourceDir:u,sourceArrow:a,sourceGroup:s,sourceEndpoint:u==="L"?"0 50%":u==="R"?"100% 50%":u==="T"?"50% 0":"50% 100%",target:i,targetDir:h,targetArrow:o,targetGroup:d,targetEndpoint:h==="L"?"0 50%":h==="R"?"100% 50%":h==="T"?"50% 0":"50% 100%"};e.add({group:"edges",data:g,classes:f})}))}function qle(t,e,r){const n=l(((o,u)=>Object.entries(o).reduce(((h,[d,p])=>{let f=0;const g=Object.entries(p);if(g.length===1)return h[d]=g[0][1],h;for(let m=0;m<g.length-1;m++)for(let y=m+1;y<g.length;y++){const[v,x]=g[m],[b,w]=g[y];r[v]?.[b]===u?(h[d]??=[],h[d]=[...h[d],...x,...w]):v==="default"||b==="default"?(h[d]??=[],h[d]=[...h[d],...x,...w]):(h[`${d}-${f++}`]=x,h[`${d}-${f++}`]=w)}return h}),{})),"flattenAlignments"),i=e.map((o=>{const u={},h={};return Object.entries(o).forEach((([d,[p,f]])=>{const g=t.getNode(d)?.in??"default";u[f]??={},u[f][g]??=[],u[f][g].push(d),h[p]??={},h[p][g]??=[],h[p][g].push(d)})),{horiz:Object.values(n(u,"horizontal")).filter((d=>d.length>1)),vert:Object.values(n(h,"vertical")).filter((d=>d.length>1))}})),[a,s]=i.reduce((([o,u],{horiz:h,vert:d})=>[[...o,...h],[...u,...d]]),[[],[]]);return{horizontal:a,vertical:s}}function jle(t){const e=[],r=l((i=>`${i[0]},${i[1]}`),"posToStr"),n=l((i=>i.split(",").map((a=>parseInt(a)))),"strToPos");return t.forEach((i=>{const a=Object.fromEntries(Object.entries(i).map((([h,d])=>[r(d),h]))),s=[r([0,0])],o={},u={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;s.length>0;){const h=s.shift();if(h){o[h]=1;const d=a[h];if(d){const p=n(h);Object.entries(u).forEach((([f,g])=>{const m=r([p[0]+g[0],p[1]+g[1]]),y=a[m];y&&!o[m]&&(s.push(m),e.push({[_B[f]]:y,[_B[a9e(f)]]:d,gap:1.5*$n("iconSize")}))}))}}}})),e}function Wle(t,e,r,n,i,{spatialMaps:a,groupAlignments:s}){return new Promise((o=>{const u=Ze("body").append("div").attr("id","cy").attr("style","display:none"),h=js({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${$n("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${$n("padding")}px`}}]});u.remove(),Gle(r,h),$le(t,h),Fle(e,h),Ule(n,h);const d=qle(i,a,s),p=jle(a),f=h.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(g){const[m,y]=g.connectedNodes(),{parent:v}=jd(m),{parent:x}=jd(y);return v===x?1.5*$n("iconSize"):.5*$n("iconSize")},edgeElasticity(g){const[m,y]=g.connectedNodes(),{parent:v}=jd(m),{parent:x}=jd(y);return v===x?.45:.001},alignmentConstraint:d,relativePlacementConstraint:p});f.one("layoutstop",(()=>{function g(m,y,v,x){let b,w;const{x:T,y:k}=m,{x:C,y:E}=y;w=(x-k+(T-v)*(k-E)/(T-C))/Math.sqrt(1+Math.pow((k-E)/(T-C),2)),b=Math.sqrt(Math.pow(x-k,2)+Math.pow(v-T,2)-Math.pow(w,2)),b/=Math.sqrt(Math.pow(C-T,2)+Math.pow(E-k,2));let _=(C-T)*(x-k)-(E-k)*(v-T);switch(!0){case _>=0:_=1;break;case _<0:_=-1}let S=(C-T)*(v-T)+(E-k)*(x-k);switch(!0){case S>=0:S=1;break;case S<0:S=-1}return w=Math.abs(w)*_,b*=S,{distances:w,weights:b}}l(g,"getSegmentWeights"),h.startBatch();for(const m of Object.values(h.edges()))if(m.data?.()){const{x:y,y:v}=m.source().position(),{x,y:b}=m.target().position();if(y!==x&&v!==b){const w=m.sourceEndpoint(),T=m.targetEndpoint(),{sourceDir:k}=Ple(m),[C,E]=uc(k)?[w.x,T.y]:[T.x,w.y],{weights:_,distances:S}=g(w,T,C,E);m.style("segment-distances",S),m.style("segment-weights",_)}}h.endBatch(),f.run()})),f.run(),h.ready((g=>{ee.info("Ready",g),o(h)}))}))}Jj([{name:uv.prefix,icons:uv}]),js.use(L9e.default),l($le,"addServices"),l(Fle,"addJunctions"),l(zle,"positionNodes"),l(Gle,"addGroups"),l(Ule,"addEdges"),l(qle,"getAlignments"),l(jle,"getRelativeConstraints"),l(Wle,"layoutArchitecture");var D9e=l((async(t,e,r,n)=>{const i=n.db,a=i.getServices(),s=i.getJunctions(),o=i.getGroups(),u=i.getEdges(),h=i.getDataStructures(),d=tl(e),p=d.append("g");p.attr("class","architecture-edges");const f=d.append("g");f.attr("class","architecture-services");const g=d.append("g");g.attr("class","architecture-groups"),await R9e(i,f,a),M9e(i,f,s);const m=await Wle(a,s,o,u,i,h);await N9e(p,m),await I9e(g,m),zle(i,m),am(void 0,d,$n("padding"),$n("useMaxWidth"))}),"draw"),O9e={parser:S9e,db:x6,renderer:{draw:D9e},styles:A9e},P9e=Object.freeze({__proto__:null,diagram:O9e}),B9e=Object.freeze({__proto__:null,InfoModule:gne,createInfoServices:UC}),$9e=Object.freeze({__proto__:null,PacketModule:mne,createPacketServices:qC}),F9e=Object.freeze({__proto__:null,PieModule:hne,createPieServices:$C}),z9e=Object.freeze({__proto__:null,ArchitectureModule:dne,createArchitectureServices:FC}),G9e=Object.freeze({__proto__:null,GitGraphModule:pne,createGitGraphServices:zC}),U9e=Object.freeze({__proto__:null,RadarModule:fne,createRadarServices:GC});export{j9e as default};
