<!-- eslint-disable @intlify/vue-i18n/no-html-messages -->
<i18n>
{
  "fr": {
    "hello": "Bonjour {names}&nbsp;!",
    "ultimatum": "On souhaiterait avoir ta r√©ponse avant le 30 avril 2023. | On souhaiterait avoir votre r√©ponse avant le 30 avril 2023.",
    "attending": {
      "question": "Viens-tu ? | Venez-vous ?",
      "instruction": "Plusieurs choix possibles",
      "cityHall": "√Ä la mairie",
      "cityHallDate": "19 ao√ªt 2023",
      "church": "√Ä l'√©glise",
      "churchDate": "19 ao√ªt 2023",
      "wineReception": "Au vin d'honneur",
      "wineReceptionDate": "19 ao√ªt 2023",
      "party": "√Ä la soir√©e",
      "partyDate": "19 ao√ªt 2023",
      "cant": "Je ne peux pas venir. | Nous ne pouvons pas venir.",
      "after": "Le lendemain",
      "afterDate": "20 ao√ªt 2023",
      "error": {
        "required": "Merci de nous confirmer ta pr√©sence. | Merci de nous confirmer votre pr√©sence."
      }
    },
    "meal": {
      "title": "Choix du plat",
      "subtitle": "Merci de choisir ce que tu souhaites manger pour le plat principal (uniquement disponible pour les menus adultes). | Merci de choisir ce que vous souhaitez manger pour le plat principal (uniquement disponible pour les menus adultes).",
      "meat": "Viande rouge saignante",
      "fish": "Poisson",
      "children": "Menu enfant",
      "allergies": "Une allergie ? Un r√©gime particulier ?",
      "error": {
        "required": "On a besoin de savoir ce que {name} mangera pour ne pas g√¢cher."
      }
    },
    "plus1": {
      "question": "Viens-tu accompagn√© ?",
      "questionName": "Peux-tu nous dire son pr√©nom ?",
      "yes": "Oui",
      "no": "Non",
      "error": {
        "required": "Merci de nous confirmer qu'il ou elle vient."
      },
      "errorName": {
        "required": "On a besoin du pr√©nom de ton/ta +1. ;)"
      }
    },
    "children": {
      "question": "Ton/tes enfant(s) vien(nen)t-il(s) ? | Votre/Vos enfant(s) vien(nen)t-il(s) ?",
      "yes": "Oui",
      "no": "Non",
      "error": {
        "required": "Merci de nous confirmer la pr√©sence ou non des enfants."
      }
    },
    "comment": {
      "question": "Un commentaire ?",
      "error": {
        "required": "N'h√©sites pas √† nous laisser un petit commentaire, √ßa nous fera plaisir. üòá | N'h√©sitez pas √† nous laisser un petit commentaire, √ßa nous fera plaisir. üòá"
      }
    },
    "pet": {
      "p1": "Attention, nos amis les animaux ne sont malheureusement pas autoris√©s.",
      "p2": "Il faudra pr√©voir de les faire garder pour le weekend."
    },
    "housing": {
      "p1": "N'oublies pas de r√©server d√®s que possible un logement pour le weekend du 19 ao√ªt 2023 ! Granville est un lieu tr√®s touristique l'√©t√©. | N'oubliez pas de r√©server d√®s que possible un logement pour le weekend du 19 ao√ªt 2023 ! Granville est un lieu tr√®s touristique l'√©t√©."
    },
    "parker": {
      "p1": "Un service de taxi sera √† ta disposition gratuitement pour que tu puisses rentrer dormir en s√©curit√©. | Un service de taxi sera √† votre disposition gratuitement pour que vous puissiez rentrer dormir en s√©curit√©.",
      "p2": "Il sera disponible pour te ramener entre 1h et 5h du matin, si ton logement est situ√© dans un rayon de <strong>10 km</strong> autour du Ch√¢teau de la Cr√™te. | Il sera disponible pour vous ramener entre 1h et 5h du matin, si votre logement est situ√© dans un rayon de <strong>10 km</strong> autour du Ch√¢teau de la Cr√™te.",
      "p3": "Le lendemain, il repassera chercher les conducteurs entre 11 et 12h pour les ramener au Ch√¢teau."
    },
    "cgu": {
      "p1": "Une fois la r√©ponse envoy√©e, tu ne pourras plus r√©utiliser ce formulaire pour la modifier. Si besoin, il faudra nous contacter directement : | Une fois la r√©ponse envoy√©e, vous ne pourrez plus r√©utiliser ce formulaire pour la modifier. Si besoin, il faudra nous contacter directement :",
      "email": "Par mail vallee_a@hotmail.fr / florent@berthelot.io",
      "phone": " Par t√©l√©phone au 06 03 65 21 38 / 06 50 99 96 18",
      "error": {
        "required": "Il faut lire le petit message √† la fin et cocher cette case. ;)"
      }
    },
    "submit": {
      "text": "Envoyer la r√©ponse",
      "loading": "Envoi...",
      "error": "Une erreur est survenue lors de l'envoi du formulaire, r√©essaye ! | Une erreur est survenue lors de l'envoi du formulaire, r√©essayez !"
    }
  },
  "en": {
    "hello": "Hello {names}!",
    "ultimatum": "Please answer before the 30th of April 2023.",
    "attending": {
      "question": "Will you come?",
      "instruction": "Several choices possible",
      "cityHall": "To the town hall",
      "cityHallDate": "19th of August 2023",
      "church": "To the church",
      "churchDate": "19th of August 2023",
      "wineReception": "To the reception",
      "wineReceptionDate": "19th of August 2023",
      "party": "To the dinner and party",
      "partyDate": "19th of August 2023",
      "cant": "I can't come. | We can't come.",
      "after": "The post-wedding brunch",
      "afterDate": "20th of August 2023",
      "error": {
        "required": "Please confirm your attendance."
      }
    },
    "meal": {
      "title": "Choice of main course",
      "subtitle": "Please choose your main course (only available for adult menus).",
      "meat": "Red meat cooked rare",
      "fish": "Fish",
      "children": "Kids' menu",
      "allergies": "Any allergy? Any special diet?",
      "error": {
        "required": "We need to know what {name} would prefer eating to avoid waste."
      }
    },
    "plus1": {
      "question": "Will you come accompanied?",
      "questionName": "What's their name?",
      "yes": "Yes",
      "no": "No",
      "error": {
        "required": "Please confirm their attendance."
      },
      "errorName": {
        "required": "We need their name for the seating plan. ;)"
      }
    },
    "children": {
      "question": "Is your child attending? | Are your children attending?",
      "yes": "Yes",
      "no": "No",
      "error": {
        "required": "Please confirm the attendance of your child. | Please confirm the attendance of your children."
      }
    },
    "comment": {
      "question": "A comment?",
      "error": {
        "required": "Don't hesitate to leave a small comment, we'll love it. üòá"
      }
    },
    "pet": {
      "p1": "Warning, pets are unfortunately not allowed.",
      "p2": "You will have to plan ahead to have them looked after for the weekend."
    },
    "housing": {
      "p1": "Don't forget to book as soon as possible your accomodation for the weekend of the 19th of August 2023! Granville is a very touristic area in Summer."
    },
    "parker": {
      "p1": " A taxi service will be available free of charge so you can go back safely for the night.",
      "p2": " The taxi will be able to take you back between 1:00am and 5:00am, if your chosen accommodation is located within <strong>10 km</strong> around the Ch√¢teau de la Cr√™te.",
      "p3": " The next day, the taxi will come back to pick up the drivers from 11:00am to 12:00pm and take them back to the Ch√¢teau."
    },
    "cgu": {
      "p1": "Once your answer is sent, you won't be able to use this form to change it. If needed, please contact us directly:",
      "email": "By email vallee_a@hotmail.fr / florent@berthelot.io",
      "phone": " By phone at (+33) 6 03 65 21 38 / (+33) 6 50 99 96 18",
      "error": {
        "required": "You have to read the little message at the end and tick this box. ;)"
      }
    },
    "submit": {
      "text": "Send the answer",
      "loading": "Sending...",
      "error": "An error occured while sending the form, try again!"
    }
  }
}
</i18n>

<!-- eslint-disable vue/no-v-html @intlify/vue-i18n/no-v-html -->

<template>
  <main id="answer-main" class="main">
    <form @submit.prevent="submitForm">
      <h2 class="title" v-html="$t('hello', { names: invitation.name })"></h2>

      <p class="subtitle">
        {{ $tc('ultimatum', invitation.nbOfPeople) }}
      </p>

      <fieldset id="attending" class="question-container">
        <div class="question">
          {{ $tc('attending.question', invitation.nbOfPeople) }}
        </div>
        <div class="question-instruction">
          {{ $tc('attending.instruction', invitation.nbOfPeople) }}
        </div>
        <div class="answers checkboxes">
          <label v-if="invitation.invitedTo.cityHall">
            <input
              :checked="formValues.attending.includes('cityHall')"
              type="checkbox"
              name="attending"
              value="cityHall"
              @change="handleAttendingChange"
            />
            <div class="checkbox-content">
              <img
                class="option-icon"
                src="../00_shared/assets//mariage_civil.svg"
                alt=""
              />
              <div class="option-title">
                {{ $t('attending.cityHall') }}
              </div>
              <div class="option-date">
                {{ $t('attending.cityHallDate') }}
              </div>
            </div>
          </label>
          <label v-if="invitation.invitedTo.church">
            <input
              :checked="formValues.attending.includes('church')"
              type="checkbox"
              name="attending"
              value="church"
              @change="handleAttendingChange"
            />
            <div class="checkbox-content">
              <img
                class="option-icon"
                src="../00_shared/assets/church.svg"
                alt=""
              />
              <div class="option-title">{{ $t('attending.church') }}</div>
              <div class="option-date">
                {{ $t('attending.churchDate') }}
              </div>
            </div>
          </label>
          <label v-if="invitation.invitedTo.wineReception">
            <input
              :checked="formValues.attending.includes('wineReception')"
              type="checkbox"
              name="attending"
              value="wineReception"
              @change="handleAttendingChange"
            />
            <div class="checkbox-content">
              <img class="option-icon" src="./assets/cocktail.svg" alt="" />
              <div class="option-title">
                {{ $t('attending.wineReception') }}
              </div>
              <div class="option-date">
                {{ $t('attending.wineReceptionDate') }}
              </div>
            </div>
          </label>
          <label v-if="invitation.invitedTo.party">
            <input
              :checked="formValues.attending.includes('party')"
              type="checkbox"
              name="attending"
              value="party"
              @change="handleAttendingChange"
            />
            <div class="checkbox-content">
              <img class="option-icon" src="./assets/diner.svg" alt="" />
              <div class="option-title">{{ $t('attending.party') }}</div>
              <div class="option-date">
                {{ $t('attending.partyDate') }}
              </div>
            </div>
          </label>
          <label v-if="invitation.invitedTo.after">
            <input
              :checked="formValues.attending.includes('after')"
              type="checkbox"
              name="attending"
              value="after"
              @change="handleAttendingChange"
            />
            <div class="checkbox-content">
              <img
                class="option-icon"
                src="../00_shared/assets/just-maried.svg"
                alt=""
              />
              <div class="option-title">{{ $t('attending.after') }}</div>
              <div class="option-date">
                {{ $t('attending.afterDate') }}
              </div>
            </div>
          </label>
          <label>
            <input
              :checked="formValues.attending.includes('cant')"
              type="checkbox"
              name="attending"
              value="cant"
              @change="handleAttendingChange"
            />
            <div class="checkbox-content">
              <img class="option-icon" src="./assets/cant.png" alt="" />
              <div class="option-title">
                {{ $tc('attending.cant', invitation.nbOfPeople) }}
              </div>
            </div>
          </label>
        </div>

        <span v-if="shouldValidateForm" class="error">
          {{
            formState.errors.attending
              ? $tc(
                  'attending.error.' + formState.errors.attending,
                  invitation.nbOfPeople,
                )
              : ''
          }}
        </span>
      </fieldset>

      <fieldset
        v-if="invitation.plus1Invited && !formValues.attending.includes('cant')"
        id="plus1Invited"
        class="question-container"
      >
        <span class="question">{{ $t('plus1.question') }}</span>
        <div class="answers checkboxes checkboxes--small">
          <label>
            <input
              v-model="formValues.plus1"
              type="radio"
              name="plus1"
              value="yes"
            />
            <div class="checkbox-content">
              {{ $t('plus1.yes') }}
            </div>
          </label>
          <label>
            <input
              v-model="formValues.plus1"
              type="radio"
              name="plus1"
              value="no"
            />
            <div class="checkbox-content">
              {{ $t('plus1.no') }}
            </div>
          </label>
        </div>
        <span v-if="shouldValidateForm" class="error">
          {{
            formState.errors.plus1Invited
              ? $t('plus1.error.' + formState.errors.plus1Invited)
              : ''
          }}
        </span>
      </fieldset>

      <label
        v-if="
          formValues.plus1 === 'yes' && !formValues.attending.includes('cant')
        "
        id="plus1Name"
        class="question-container"
        rules="required"
      >
        <span class="question">{{ $t('plus1.questionName') }}</span>
        <input
          v-model="formValues.plus1Name"
          type="text"
          name="plus1Name"
          class="plus1-input"
        />
        <div v-if="shouldValidateForm" class="error">
          {{
            formState.errors.plus1Name
              ? $t('plus1.errorName.' + formState.errors.plus1Name)
              : ''
          }}
        </div>
      </label>

      <fieldset
        v-if="
          invitation.questionOnChildren &&
          !formValues.attending.includes('cant')
        "
        id="children"
        class="question-container"
      >
        <span class="question">{{
          $tc('children.question', invitation.children.length)
        }}</span>
        <div class="answers checkboxes checkboxes--small">
          <label>
            <input
              v-model="formValues.children"
              type="radio"
              name="children"
              value="true"
            />
            <div class="checkbox-content">
              {{ $t('children.yes') }}
            </div>
          </label>
          <label>
            <input
              v-model="formValues.children"
              type="radio"
              name="children"
              value="false"
            />
            <div class="checkbox-content">
              {{ $t('children.no') }}
            </div>
          </label>
        </div>
        <div v-if="shouldValidateForm" class="error">
          {{
            formState.errors.children
              ? $tc(
                  'children.error.' + formState.errors.children,
                  invitation.children.length,
                )
              : ''
          }}
        </div>
      </fieldset>

      <h3
        v-if="
          !formValues.attending.includes('cant') && invitation.invitedTo.party
        "
        id="meal"
        class="title"
      >
        {{ $t('meal.title') }}
      </h3>
      <p
        v-if="
          !formValues.attending.includes('cant') && invitation.invitedTo.party
        "
        class="subtitle"
      >
        {{ $tc('meal.subtitle', invitation.nbOfPeople) }}
      </p>

      <ul
        v-if="
          !formValues.attending.includes('cant') && invitation.invitedTo.party
        "
        class="meal-people"
      >
        <li v-for="peopleName of peopleThatCome" :key="peopleName">
          <fieldset class="question-container">
            <div class="question">{{ peopleName }}</div>
            <div class="answers checkboxes checkboxes--small">
              <label
                v-if="
                  !['0 - 3 ans', '4 - 12 ans'].includes(
                    invitation.ages[peopleName],
                  )
                "
              >
                <input
                  v-model="formValues[`meal-${peopleName}`]"
                  type="radio"
                  :name="`meal-${peopleName}`"
                  value="meat"
                />
                <div class="checkbox-content">
                  {{ $t('meal.meat') }}
                </div>
              </label>
              <label
                v-if="
                  !['0 - 3 ans', '4 - 12 ans'].includes(
                    invitation.ages[peopleName],
                  )
                "
              >
                <input
                  v-model="formValues[`meal-${peopleName}`]"
                  type="radio"
                  :name="`meal-${peopleName}`"
                  value="fish"
                />
                <div class="checkbox-content">
                  {{ $t('meal.fish') }}
                </div>
              </label>

              <label v-if="invitation.children.includes(peopleName)">
                <input
                  v-model="formValues[`meal-${peopleName}`]"
                  type="radio"
                  :name="`meal-${peopleName}`"
                  value="child"
                />
                <div class="checkbox-content">
                  {{ $t('meal.children') }}
                </div>
              </label>
            </div>
          </fieldset>
          <div v-if="shouldValidateForm" class="error">
            {{
              formState.errors.meal && formState.errors.meal[peopleName]
                ? $t('meal.error.' + formState.errors.meal[peopleName], {
                    name: peopleName,
                  })
                : ''
            }}
          </div>
        </li>
      </ul>

      <label
        v-if="
          !formValues.attending.includes('cant') && invitation.invitedTo.party
        "
        class="question-container"
      >
        <span class="question">{{ $t('meal.allergies') }}</span>
        <textarea
          v-model="formValues.mealComment"
          name="mealComment"
          :placeholder="invitation.placeholderAllergies"
        ></textarea>
      </label>

      <section v-if="!formValues.attending.includes('cant')" class="infos">
        <ul>
          <li class="info">
            <img src="./assets/no-pets.svg" class="info-icon" alt="" />
            <div>
              {{ $t('pet.p1') }}
              <br />
              {{ $t('pet.p2') }}
            </div>
          </li>
          <li v-if="invitation.invitedTo.party" class="info">
            <img src="./assets/hotel.svg" class="info-icon" alt="" />
            <div>
              {{ $tc('housing.p1', invitation.nbOfPeople) }}
            </div>
          </li>
          <li v-if="invitation.invitedTo.party" class="info">
            <img
              src="../00_shared/assets/driver.svg"
              class="info-icon"
              alt=""
            />
            <div>
              <div v-html="$tc('parker.p1', invitation.nbOfPeople)"></div>
              <div v-html="$tc('parker.p2', invitation.nbOfPeople)"></div>
              <div v-html="$tc('parker.p3', invitation.nbOfPeople)"></div>
            </div>
          </li>
        </ul>
      </section>

      <div class="question-container">
        <label id="comment">
          <span class="question">{{ $t('comment.question') }}</span>
          <textarea
            v-model="formValues.comment"
            name="comment"
            :placeholder="invitation.placeholderComment"
          ></textarea>
        </label>
        <div v-if="shouldValidateForm" class="error">
          {{
            formState.errors.comment
              ? $tc(
                  'comment.error.' + formState.errors.comment,
                  invitation.nbOfPeople,
                )
              : ''
          }}
        </div>
      </div>

      <div id="cgu" class="cgu-container">
        <label class="cgu-label">
          <input
            v-model="formValues.cgu"
            type="checkbox"
            name="cgu"
            value="true"
          />
          <div>
            {{ $tc('cgu.p1', invitation.nbOfPeople) }}
            <ul>
              <li>
                {{ $t('cgu.email') }}
              </li>
              <li>
                {{ $t('cgu.phone') }}
              </li>
            </ul>
          </div>
        </label>
        <div v-if="shouldValidateForm" class="error">
          {{
            formState.errors.cgu ? $t('cgu.error.' + formState.errors.cgu) : ''
          }}
        </div>
      </div>

      <div class="action">
        <button
          class="anwser-button"
          type="submit"
          :disabled="submitFormStatus.loading"
        >
          {{
            submitFormStatus.loading
              ? $t('submit.loading')
              : $tc('submit.text', invitation.nbOfPeople)
          }}
        </button>
        <span class="error">
          {{
            submitFormStatus.error
              ? $tc('submit.error', invitation.nbOfPeople)
              : ''
          }}
        </span>
      </div>
    </form>
  </main>
</template>

<script>
import { saveInvitationAnswer } from '../00_shared/fetcher'

export default {
  props: {
    invitation: {
      required: true,
      type: Object,
    },
  },
  data() {
    return {
      formValues: {
        attending: [],
        plus1: null,
        plus1Name: null,
        plus1Meal: null,
        children: null,
        mealComment: null,
        cgu: false,
        comment: '',
        ...this.invitation.people.reduce((acc, peopleName) => {
          return {
            ...acc,
            [`meal-${peopleName}`]: ['0 - 3 ans', '4 - 12 ans'].includes(
              this.invitation.ages[peopleName],
            )
              ? 'child'
              : null,
          }
        }, {}),
      },
      shouldValidateForm: false,
      submitFormStatus: {
        loading: false,
        error: null,
      },
    }
  },
  computed: {
    peopleThatCome() {
      const res = this.invitation.people?.filter((name) => {
        return !this.invitation.children.includes(name)
      })

      if (this.formValues.plus1 === 'yes' && this.formValues.plus1Name) {
        res.push(this.formValues.plus1Name)
      }

      if (
        this.formValues.children === 'true' ||
        !this.invitation.questionOnChildren
      ) {
        res.push(...this.invitation.children)
      }

      return res
    },
    formState() {
      const mealErrors = this.peopleThatCome.reduce((acc, name) => {
        return {
          ...acc,
          [name]: this.invitation.invitedTo.party
            ? !this.formValues.attending.includes('cant') &&
              !this.formValues[`meal-${name}`]
              ? 'required'
              : false
            : false,
        }
      }, {})
      const mealIsValid = Object.values(mealErrors).reduce((isValid, error) => {
        return isValid && !error
      }, true)

      const errors = {
        attending: !this.formValues.attending?.length ? 'required' : false,
        plus1Invited: this.invitation.plus1Invited
          ? !this.formValues.attending.includes('cant') &&
            !this.formValues.plus1
            ? 'required'
            : false
          : false,
        plus1Name:
          !this.formValues.attending.includes('cant') &&
          this.formValues.plus1 === 'yes' &&
          !this.formValues.plus1Name
            ? 'required'
            : false,
        children:
          !this.formValues.attending.includes('cant') &&
          this.invitation.questionOnChildren &&
          !this.formValues.children
            ? 'required'
            : false,
        meal: mealIsValid ? false : mealErrors,
        comment: !this.formValues.comment ? 'required' : false,
        cgu: !this.formValues.cgu ? 'required' : false,
      }

      return {
        valid: Object.values(errors).reduce((isValid, error) => {
          return isValid && !error
        }, true),
        errors,
      }
    },
  },
  methods: {
    handleAttendingChange(e) {
      if (this.formValues.attending.includes('cant')) {
        this.formValues.attending =
          e.target.value === 'cant' ? [] : [e.target.value]
      } else if (e.target.value === 'cant') {
        this.formValues.attending = [e.target.value]
      } else if (this.formValues.attending.includes(e.target.value)) {
        this.formValues.attending = this.formValues.attending.filter(
          (val) => val !== e.target.value,
        )
      } else {
        this.formValues.attending = [
          ...this.formValues.attending,
          e.target.value,
        ]
      }
    },
    async submitForm() {
      if (!this.shouldValidateForm) {
        this.shouldValidateForm = true
      }
      if (!this.formState.valid) {
        const firstError = [
          'attending',
          'plus1Invited',
          'plus1Name',
          'children',
          'meal',
          'comment',
          'cgu',
        ].find((error) => {
          return !!this.formState.errors[error]
        })

        window.document
          .querySelector(`#${firstError}`)
          ?.scrollIntoView({ behavior: 'smooth' })
        return
      }

      this.submitFormStatus.loading = true

      try {
        await saveInvitationAnswer(
          this.invitation.id,
          this.peopleThatCome,
          this.formValues,
          this.invitation,
        )

        window.localStorage.setItem('answered', 'true')

        this.$router.push(
          this.localePath(
            `/mariage/${this.$route.params.invite}?noAnimation=true`,
          ),
        )
      } catch (err) {
        // eslint-disable-next-line no-console
        console.error(err)
        this.submitFormStatus.error = err
      }

      this.submitFormStatus.loading = false
    },
  },
}
</script>

<style>
#answer-main strong {
  font-weight: 600;
}
</style>

<style scoped>
.main {
  padding: 2rem 20rem;
  height: 100%;
}

.title {
  font-family: 'DM Serif Display';
  font-style: normal;
  font-weight: 400;
  font-size: 3.25rem;
  line-height: 4.5rem;
  text-align: center;
}

.title--only {
  margin-bottom: 2rem;
}

.subtitle {
  font-family: 'Open Sans', sans-serif;
  font-size: 1.125rem;
  font-weight: 500;
  line-height: 1.6rem;
  text-align: center;

  margin-top: 0.5rem;
  margin-bottom: 2rem;
}

.question-container {
  display: block;
  margin-bottom: 1rem;
}

.question {
  font-size: 1.5rem;
  display: block;
  margin-bottom: 0.5rem;

  font-family: 'Open Sans', sans-serif;
  font-size: 1.125rem;
  font-weight: 500;
  line-height: 1.6rem;

  color: #2e3f4b;
}

.question-instruction {
  font-family: 'Open Sans', sans-serif;
  font-size: 0.875rem;
  font-weight: 500;
  line-height: 1.125rem;

  color: #6c8393;

  margin-bottom: 2rem;
}

.question-container textarea {
  display: block;
  width: 100%;
  height: 10rem;
  line-height: 1.5rem;
  padding: 0.5rem;
}

.answers {
  display: flex;
  flex-direction: column;
  margin: 0.5rem 0 2rem 0;
}

.answers.checkboxes {
  gap: 1.5rem;
  flex-wrap: wrap;
  flex-direction: row;
}

.answers.checkboxes label input ~ .checkbox-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 10.625rem;
  width: 11.875rem;
  background: #ffffff;
  border: 2px solid #ffffff;
  box-shadow: 0px 4px 16px rgba(155, 97, 167, 0.15);
  border-radius: 0.5rem;
  transition: all 0.3s ease;

  font-family: 'Open Sans', sans-serif;
  font-size: 0.75rem;
  font-weight: 400;
  line-height: 1rem;
}

.answers.checkboxes.checkboxes--small label input ~ .checkbox-content {
  width: 12.5rem;
  height: 3.125rem;
}

.answers.checkboxes label {
  cursor: pointer;
}

.answers.checkboxes label:hover input ~ .checkbox-content,
.answers.checkboxes label:focus input ~ .checkbox-content {
  border: 2px solid #8d4b9a;
}

.answers.checkboxes label:active input ~ .checkbox-content {
  background: #f1e8ff;
}

.answers.checkboxes label input:checked ~ .checkbox-content {
  background: #f1e8ff;
  border: 2px solid #8d4b9a;
}

.answers.checkboxes label .option-icon {
  margin-bottom: 1.5rem;
  height: 3.2rem;
}

.answers.checkboxes label .option-title {
  font-family: 'Open Sans', sans-serif;
  font-size: 1rem;
  font-weight: 600;
  line-height: 1.375rem;
  color: #2e3f4b;

  margin-bottom: 0.25rem;
  text-align: center;
}

.answers.checkboxes label .option-date {
  font-family: 'Open Sans', sans-serif;
  font-size: 0.75rem;
  font-weight: 400;
  line-height: 1rem;
}

.answers.checkboxes input {
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
}

textarea,
input[type='text'] {
  padding: 0 0.825rem;

  width: 20rem;
  height: 2.75rem;

  font-family: 'Open Sans', sans-serif;
  font-size: 1rem;
  font-weight: 400;
  line-height: 2.5rem;

  background: #ffffff;
  border: 1px solid #d0d5dd;
  box-shadow: 0px 1px 2px rgba(16, 24, 40, 0.05);
  border-radius: 0.5rem;
}

textarea:focus,
textarea:active,
input[type='text']:focus,
input[type='text']:active {
  border: 1px solid #8d4b9a;
  outline: none;
}

textarea {
  height: auto;
  min-height: 8rem;
}

.meal-people fieldset {
  display: flex;
}

.meal-people fieldset .question {
  min-width: 15.6rem;
  display: flex;
  align-items: center;
  height: 3.125rem;
}

.meal-people fieldset .answers {
  margin: 0;
}

.meal-people .question-container {
  margin-bottom: 0;
}

.meal-people li {
  margin-bottom: 1rem;
}

.infos {
  background: #f1e8ff;
  color: #2e3f4b;

  font-family: 'Open Sans', sans-serif;
  font-size: 1.125rem;
  font-weight: 500;
  line-height: 1.5rem;

  margin: 2rem -20rem 4rem -20rem;
  padding: 4rem 20rem;
}

.infos ul {
  width: 100%;

  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 2rem;
}

.info {
  display: flex;
  align-items: center;
}

.info-icon {
  width: 3.25rem;
  margin-right: 2rem;
}

.cgu-container {
  font-family: 'Open Sans', sans-serif;
  font-size: 1.125rem;
  font-weight: 500;
  line-height: 1.5rem;
  color: #344054;
  margin: 2rem 0;
}

.cgu-label {
  display: flex;
  align-items: flex-start;
  cursor: pointer;
}

.cgu-container input {
  margin-right: 0.75rem;
  height: 1.125rem;
  cursor: pointer;
}

.cgu-container ul {
  margin-left: 1rem;
  list-style: disc;
}

.action {
  display: flex;
  align-items: center;
  justify-content: center;
}

.anwser-button {
  margin-top: 2.75rem;
  padding: 0.25rem;
  margin: auto;
  background: #2e3f4c;
  width: 16.5rem;
  height: 3.6rem;
  border-radius: 0.5rem;

  border: none;

  font-family: 'Open Sans', sans-serif;
  font-size: 1.5rem;
  font-weight: 500;
  line-height: 2rem;

  color: #faf8ff;

  transition: all 0.5s ease;
  cursor: pointer;
}

.anwser-button:hover,
.anwser-button:focus {
  box-shadow: 0 0 0.5rem #fffbf8;
  transform: scale(1.1);
  outline: none;

  animation: blink 1s infinite alternate;
}

.anwser-button:active {
  box-shadow: 0 0 1rem #2e3f4c;
}

@keyframes blink {
  0% {
    transform: scale(1);
  }
  100% {
    transform: scale(1.2);
  }
}

.error {
  color: red;
  font-family: 'Open Sans', sans-serif;
  font-size: 0.8rem;
  font-weight: 400;
  line-height: 1rem;
  padding: 0.5rem 0;
}

@media screen and (max-width: 850px) {
  .main {
    padding: 2rem 1rem;
  }
  .title {
    font-size: 2rem;
    line-height: 2.75rem;
  }

  .answers.checkboxes {
    justify-content: center;
  }

  .answers.checkboxes label input ~ .checkbox-content {
    height: 9rem;
    width: 9rem;
  }

  .answers.checkboxes.checkboxes--small label {
    width: calc(50% - 1rem);
  }
  .answers.checkboxes.checkboxes--small label input ~ .checkbox-content {
    width: auto;
  }

  .meal-people fieldset {
    display: block;
  }

  .question-container textarea,
  input[type='text'] {
    width: calc(100% - 2rem);
  }

  .infos {
    margin: 2rem -1rem 4rem -1rem;
    padding: 4rem 1rem;
  }
}
</style>
